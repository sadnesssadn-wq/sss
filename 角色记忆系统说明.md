# 🧠 角色记忆系统

## 📋 概述

角色记忆系统是一个用于存储和管理AI助手角色配置、记忆和上下文信息的Python应用程序。

## 📁 文件结构

```
/workspace/
├── role_memory.json      # 角色记忆配置文件（JSON格式）
├── role_memory.py        # 角色记忆管理程序（Python）
└── 角色记忆系统说明.md   # 本文档
```

## 🚀 快速开始

### 1. 查看当前角色记忆

```bash
python3 role_memory.py
```

### 2. 查看配置文件

```bash
cat role_memory.json
```

### 3. 验证JSON格式

```bash
python3 -m json.tool role_memory.json
```

## 📖 功能说明

### 核心功能

1. **角色配置管理**
   - 角色名称、类型、创建时间
   - 语言偏好设置

2. **记忆系统**
   - 短期记忆：当前会话上下文
   - 长期记忆：持久化的重要信息
   - 用户偏好记录

3. **能力定义**
   - 核心能力列表
   - 专业技能清单

4. **行为准则**
   - 响应方式定义
   - 沟通风格设置
   - 优先级排序

5. **上下文信息**
   - 当前项目信息
   - 最近任务记录

## 💻 编程接口

### 基本使用

```python
from role_memory import RoleMemory

# 创建记忆管理器
memory = RoleMemory()

# 添加新记忆
memory.add_memory("完成了某个重要任务", importance="高")

# 获取所有记忆
all_memories = memory.get_memories()

# 获取高重要性记忆
important_memories = memory.get_memories(importance="高")

# 显示角色信息
memory.display_role_info()

# 更新上下文
memory.update_context("当前任务", "实现新功能")
```

### API 方法

#### `add_memory(event: str, importance: str = "中")`
添加新的记忆条目
- **参数**:
  - `event`: 事件描述
  - `importance`: 重要性（低/中/高）

#### `get_memories(importance: str = None)`
获取记忆列表
- **参数**:
  - `importance`: 可选的重要性过滤
- **返回**: 记忆列表

#### `display_role_info()`
在控制台显示完整的角色信息和记忆统计

#### `update_context(key: str, value: Any)`
更新上下文信息
- **参数**:
  - `key`: 上下文键名
  - `value`: 上下文值

## 📝 配置文件结构

```json
{
  "version": "1.0",
  "角色配置": {
    "角色名称": "AI助手",
    "角色类型": "智能助理",
    "创建时间": "2025-10-19",
    "语言偏好": "zh-CN"
  },
  "记忆系统": {
    "短期记忆": {
      "描述": "当前对话上下文",
      "保留时长": "当前会话",
      "内容": []
    },
    "长期记忆": {
      "描述": "持久化的重要信息",
      "保留时长": "永久",
      "内容": [
        {
          "时间": "2025-10-19",
          "事件": "事件描述",
          "重要性": "高"
        }
      ]
    },
    "用户偏好": {
      "语言": "中文",
      "交互方式": "友好、专业",
      "专业领域": ["Python开发", "软件工程"]
    }
  },
  "能力定义": {
    "核心能力": [...],
    "专业技能": [...]
  },
  "行为准则": {
    "响应方式": "清晰、准确、有帮助",
    "沟通风格": "专业且友好",
    "优先级": [...]
  },
  "上下文信息": {
    "当前项目": "/workspace",
    "当前分支": "...",
    "最近任务": [...]
  }
}
```

## 🔧 自定义配置

### 修改角色配置

1. 编辑 `role_memory.json` 文件
2. 修改相应的字段
3. 保存文件
4. 重新运行程序以加载新配置

### 添加自定义字段

配置文件支持添加任意JSON字段，系统会自动保存和加载。

## 📊 使用示例

### 示例 1: 记录用户交互

```python
memory = RoleMemory()
memory.add_memory("用户询问了Python编程问题", "中")
memory.add_memory("成功解决了用户的问题", "高")
```

### 示例 2: 跟踪项目进度

```python
memory = RoleMemory()
memory.update_context("当前阶段", "开发中")
memory.update_context("完成进度", "60%")
memory.add_memory("完成了核心功能开发", "高")
```

### 示例 3: 查询历史记忆

```python
memory = RoleMemory()

# 查看所有高重要性记忆
important = memory.get_memories(importance="高")
for m in important:
    print(f"{m['时间']}: {m['事件']}")
```

## 🔄 集成到其他项目

### 作为模块导入

```python
# 在你的项目中
from role_memory import RoleMemory

class YourApplication:
    def __init__(self):
        self.memory = RoleMemory("path/to/config.json")
    
    def process_event(self, event):
        # 你的业务逻辑
        ...
        # 记录事件
        self.memory.add_memory(f"处理了事件: {event}", "中")
```

## 🛠️ 维护和管理

### 备份配置

```bash
# 备份当前配置
cp role_memory.json role_memory.backup.json

# 查看配置历史（如果使用Git）
git log -- role_memory.json
```

### 重置配置

```bash
# 从备份恢复
cp role_memory.backup.json role_memory.json

# 或者删除配置文件，程序会创建新的
rm role_memory.json
python3 role_memory.py
```

## 📈 扩展建议

1. **添加记忆搜索功能**
   - 按关键词搜索
   - 按时间范围筛选

2. **实现记忆导出**
   - 导出为Markdown
   - 导出为CSV

3. **添加记忆分析**
   - 统计分析
   - 可视化展示

4. **集成数据库**
   - 使用SQLite存储大量记忆
   - 提高查询效率

## 🤝 相关文件

- `main.py` - 主应用程序
- `requirements.txt` - Python依赖
- `README.md` - 项目说明

## 📞 技术支持

如需帮助或有问题，请：
1. 查看本文档
2. 检查配置文件格式
3. 运行 `python3 role_memory.py` 查看系统状态

## 📜 更新日志

### v1.0 (2025-10-19)
- ✨ 初始版本发布
- 🎯 实现基本的角色记忆管理
- 📝 支持JSON配置文件
- 🔧 提供Python编程接口
- 📊 添加记忆统计和展示功能

---

**创建时间**: 2025-10-19  
**最后更新**: 2025-10-19  
**版本**: 1.0
