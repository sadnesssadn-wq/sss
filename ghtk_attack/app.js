webpackJsonp([262],{"+ABs":function(t,e){},"+E3f":function(t,e){},"+Eac":function(t,e){},"+MVp":function(t,e){},"+cgA":function(t,e,a){"use strict";var n=a("RUzx"),i=a.n(n),s=a("frDO"),o=a("HhAh"),r=a.n(o),l=a("phbQ"),c={name:"multi-select-user",props:{users:{default:null},stationId:{default:null},customClass:{default:""},codType:{default:null},statusId:{default:null},placeholder:{default:null},hideSelected:{default:!0},autoClose:{default:!0},clearOnSelect:{default:!0},disabled:{default:!1},multiple:{default:!0},targetApi:{type:String,default:"admin"}},components:{Multiselect:i.a,sosService:s.a,debounce:r.a},watch:{asyncSelected:function(){this.$emit("onChange",this.asyncSelected)},users:{immediate:!0,handler:function(){this.asyncSelected=this.users}}},data:function(){return{asyncSelected:[],asyncFound:[],asyncLoading:!1,asyncTimeout:null,message:"Nhập ít nhất 2 ký tự"}},computed:{},created:function(){},methods:{resetOption:function(){this.asyncSelected=[]},asyncFind:r()(function(t){var e=this;if(t.length<2)return this.asyncFound=[],void(this.message="Nhập ít nhất 2 ký tự");this.asyncLoading=!0,this.asyncFound=[];var a={term:t,onlyMainUser:0,station_id:this.stationId,cod_type:this.codType,status_id:this.statusId};"hrm"===this.targetApi?l.a.searchUser({username:t}).then(function(t){t.data.hasOwnProperty("success")&&(t.data.success?e.asyncFound=t.data.data:e.message="Không tìm thấy kết quả")}).catch(function(){e.message="Không tìm thấy kết quả"}).then(function(){e.asyncLoading=!1}):s.a.apiGetListUsers(a).then(function(t){t.data.hasOwnProperty("success")&&(t.data.success?e.asyncFound=t.data.data:e.message="Không tìm thấy kết quả")}).catch(function(){e.message="Không tìm thấy kết quả"}).then(function(){e.asyncLoading=!1})},500)}},d=a("XyMi"),u=Object(d.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-row",{staticClass:"my-1"},[a("b-col",{attrs:{sm:"12"}},[a("multiselect",{class:t.customClass,attrs:{disabled:t.disabled,label:"name","track-by":"id",placeholder:t.placeholder,options:t.asyncFound,multiple:t.multiple,searchable:!0,loading:t.asyncLoading,"internal-search":!1,"clear-on-select":t.clearOnSelect,"close-on-select":t.autoClose,"hide-selected":t.hideSelected,"show-labels":!1},on:{"search-change":t.asyncFind,select:function(e){t.$emit("select",e)},remove:function(e){t.$emit("remove",e)},input:function(e){t.$emit("input",e)}},model:{value:t.asyncSelected,callback:function(e){t.asyncSelected=e},expression:"asyncSelected"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Không có kết quả phù hợp !")]),t._v(" "),a("span",{attrs:{slot:"noOptions"},slot:"noOptions"},[t._v(t._s(t.message))]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])],1)],1)},[],!1,null,null,null);e.a=u.exports},"+cgv":function(t,e){},"+f+B":function(t,e){},"+fY7":function(t,e){},"+rLF":function(t,e,a){"use strict";var n=a("Dd8w"),i=a.n(n),s=a("vfns"),o=a("CpaI"),r=a("RUzx"),l={name:"single-select-sub-district",components:{Multiselect:a.n(r).a},props:{provinceId:null,districtId:null,subDistrictId:null,isDisabled:{type:Boolean},state:{type:Boolean,default:null}},data:function(){return{option:null,options:[]}},created:function(){this.storage=new s.a,this.getListSubDistrict()},watch:{option:function(t,e){this.$emit("handleSelectedSubDistrict",t)},provinceId:function(t,e){this.getListSubDistrict()},districtId:function(t,e){this.getListSubDistrict()},subDistrictId:function(t,e){t&&this.setSelectedOption()}},methods:{setSelectedOption:function(){var t=this;this.options.length>0&&this.subDistrictId&&(this.option=this.options.find(function(e){return parseInt(e.id)===parseInt(t.subDistrictId)}))},setDisplayName:function(){this.options=this.options.map(function(t){var e=null===t.end_date||new Date(t.end_date)>new Date?t.prefix+" "+t.name:t.prefix+" "+t.name+" (Cũ)";return i()({},t,{name:e})})},getListSubDistrict:function(){var t=this,e="";if(this.option=null,this.options=[],this.districtId||this.provinceId){e=this.districtId?"listSubDistrictsByDistrict-"+this.districtId:"listSubDistrictsByProvince-"+this.provinceId;var a=this.storage.get(e);if(a)this.options=a,this.setDisplayName(),this.setSelectedOption();else{var n={province_ids:this.districtId?[]:[this.provinceId],district_ids:this.districtId?[this.districtId]:[]};o.a.getSubDistrictHrmV2(n).then(function(a){a.data.success&&(t.options=a.data.data,t.storage.set(e,t.options),t.setDisplayName(),t.setSelectedOption())}).catch(function(t){console.log(t)})}}}}},c=a("XyMi");var d=function(t){a("69Je")},u=Object(c.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{class:{stateTrue:!0===t.state,stateFalse:0==t.state},attrs:{options:t.options,disabled:t.isDisabled,placeholder:"Chọn phường/xã",label:"name","track-by":"id",selectedLabel:"",deselectLabel:"X",selectLabel:""},on:{select:function(e){t.$emit("select",e)},input:function(e){t.$emit("input",e)},remove:function(e){t.$emit("remove",e)}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v("Chọn phường/xã")])])},[],!1,d,"data-v-62131d98",null);e.a=u.exports},"+tAL":function(t,e){},"/8Ad":function(t,e){},"/GU8":function(t,e){},"/b0+":function(t,e,a){"use strict";var n=a("mvHQ"),i=a.n(n),s=a("RUzx"),o=a.n(s),r=a("xF2Z"),l={name:"multi-select-department",props:{departmentNames:{default:null},departmentIds:{default:null},autoClose:{default:null},hideSelected:{default:null},placeholder:{default:"Chọn Bộ Phận"},customClass:{default:null},disabled:{default:!1},isMultiple:{default:!0}},components:{Multiselect:o.a},data:function(){return{autoClosed:!0,hideSelect:!1,departmentOption:null,departmentOptions:[]}},created:function(){this.getAllDepartment(),void 0!==this.autoClose&&null!==this.autoClosed&&(this.autoClosed=this.autoClose),void 0!==this.hideSelected&&null!==this.hideSelected&&(this.hideSelect=this.hideSelected)},watch:{hideSelected:function(t,e){this.hideSelect=this.hideSelected},autoClose:function(t,e){this.autoClosed=this.autoClose},departmentNames:function(t,e){t?void 0!==this.departmentOptions&&this.departmentOptions.length>0&&this.setList():this.departmentOption=null},departmentIds:function(t,e){t||(this.departmentOption=null),this.departmentOptions&&this.departmentOptions.length>0&&this.setList()},departmentOption:function(t,e){this.$emit("handleDepartmentSelected",t)}},methods:{setList:function(){var t=this;if(this.departmentOptions&&0!==this.departmentOptions.length&&(this.departmentNames&&(this.departmentOption=[],this.departmentNames.split(",").forEach(function(e){if(e){var a=t.departmentOptions.find(function(t){return""+t.name===e});a&&t.departmentOption.push(a)}t.departmentOption.push(t.departmentOptions.find(function(t){return""+t.name===e}))})),this.departmentIds&&this.departmentIds.length>0)){this.departmentOption=[];var e=this.departmentIds;Array.isArray(this.departmentIds)||(e=this.departmentIds.split(",")),e.forEach(function(e){var a=t.departmentOptions.find(function(t){return+t.id==+e});a&&t.departmentOption.push(a)})}},getAllDepartment:function(){var t=this;if(sessionStorage.getItem("allDepartment"))return this.departmentOptions=JSON.parse(sessionStorage.getItem("allDepartment")),void this.setList();r.a.getDepartmentList().then(function(e){e.data.success&&(t.departmentOptions=e.data.data,t.setList(),sessionStorage.setItem("allDepartment",i()(t.departmentOptions)))}).catch(function(t){console.log(t)})}}},c=a("XyMi"),d=Object(c.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{class:t.customClass,attrs:{options:t.departmentOptions,multiple:t.isMultiple,placeholder:t.placeholder,label:"name","track-by":"id",selectedLabel:"",deselectLabel:"X",selectLabel:"","hide-selected":t.hideSelected,"close-on-select":t.autoClosed,disabled:t.disabled},model:{value:t.departmentOption,callback:function(e){t.departmentOption=e},expression:"departmentOption"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,null,null,null);e.a=d.exports},"/cL2":function(t,e){},"/g5g":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("mvHQ"),i=a.n(n),s=a("fZjL"),o=a.n(s),r=a("Dd8w"),l=a.n(r),c=a("Xxa5"),d=a.n(c),u=a("exGp"),h=a.n(u),p=a("/b0+"),m=a("TyzE"),f=a("vEo5"),g=a("3BrW"),v=a("IC97"),_=a("nEp0"),b=a("pu4W"),y=a("NICC"),C=a("SLMx"),w=a("hC/b"),k={props:{open:{default:!1},scope:{type:String,default:"private"},tags:{default:null},tableName:{default:null},recordId:{default:null},attachPermission:{type:Boolean,default:!0},globalTags:{default:null},isStaffShiftPage:{default:!1},havePersonalTag:{default:!0},permissions:{default:function(){return{manageGlobalTag:!1}}}},data:function(){return{openModal:!1,loading:!1,tag:"",tagGlobal:""}},methods:{close:function(){this.openModal=!1,this.$emit("action",{action:"closeHrTag"})},canManageGlobalTags:function(){return this.permissions&&this.permissions.manageGlobalTag},onSubmit:function(t){var e=this;return h()(d.a.mark(function a(){var n;return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(e.tag.length>20)){a.next=3;break}return w.a.showMessage("Độ dài tag cần nhỏ hơn 20 kí tứ","warning"),a.abrupt("return");case 3:return t.preventDefault(),a.prev=4,e.loading=!0,a.next=8,C.a.create({name:e.tag,table_name:e.tableName,scope:e.scope});case 8:(n=a.sent).data.success?(w.a.showMessage(n.data.message,"success"),e.tag="",e.$emit("refresh"),e.$emit("action",{action:"refreshHrTag"})):w.a.showMessage(n.data.message,"warning"),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(4),w.a.showMessage(a.t0.message,"warning");case 15:return a.prev=15,e.loading=!1,a.finish(15);case 18:case"end":return a.stop()}},a,e,[[4,12,15,18]])}))()},onDeleteTag:function(t){var e=this;return h()(d.a.mark(function a(){var n;return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!confirm("Bạn có chắc muốn xóa tag "+t.name+" ?")){a.next=7;break}return e.loading=!0,a.next=5,C.a.delete({id:t.id});case 5:(n=a.sent).data.success?(w.a.showMessage(n.data.message,"success"),e.$emit("action",{action:"refreshHrTag"}),e.$emit("refresh")):w.a.showMessage(n.data.message,"warning");case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),w.a.showMessage(a.t0.message,"warning");case 12:return a.prev=12,e.loading=!1,a.finish(12);case 15:case"end":return a.stop()}},a,e,[[0,9,12,15]])}))()},onAttach:function(t){var e=this;return h()(d.a.mark(function a(){var n,i;return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e.loading=!0,a.next=4,C.a.attach({hr_tag_id:t.id,table_name:t.table_name,record_id:e.recordId});case 4:(n=a.sent).data.success?(w.a.showMessage(n.data.message,"success"),i=n.data.candidate_log?n.data.candidate_log:null,e.$emit("attachTagSuccess",{tag:t,log:i}),e.openModal=!1):w.a.showMessage(n.data.message,"warning"),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),w.a.showMessage(a.t0.message,"warning");case 11:return a.prev=11,e.loading=!1,a.finish(11);case 14:case"end":return a.stop()}},a,e,[[0,8,11,14]])}))()}},watch:{open:function(t){this.openModal=t}}},x=a("XyMi");var S=function(t){a("NMPq")},M=Object(x.a)(k,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{attrs:{title:"Tạo và quản lý thẻ phân loại",scrollable:""},on:{hidden:function(e){return t.close()}},model:{value:t.openModal,callback:function(e){t.openModal=e},expression:"openModal"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"col-md-12 form"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Tag chung")]),t._v(" "),t.canManageGlobalTags()?a("b-input-group",{staticClass:"mb-3"},[a("b-form-input",{attrs:{type:"text",placeholder:"Nhập tên tag mới"},model:{value:t.tag,callback:function(e){t.tag=e},expression:"tag"}}),t._v(" "),a("b-input-group-append",[a("b-button",{attrs:{variant:"outline-success",id:"hr-tag-modal-btn-save",name:"hr-tag-modal-btn-save"},on:{click:t.onSubmit}},[a("i",{staticClass:"fa fa-save"})])],1)],1):t._e(),t._v(" "),t.globalTags?a("div",[a("b-list-group",t._l(t.globalTags,function(e,n){return a("b-list-group-item",{key:n,staticClass:"d-flex align-items-center"},[a("span",{staticClass:"mr-auto"},[t._v(t._s(e.name))]),t._v(" "),t.attachPermission?a("b-button",{staticClass:"add-tag",attrs:{variant:"outline-success"},on:{click:function(a){return t.onAttach(e)}}},[a("i",{staticClass:"fa fa-tag"})]):t._e(),t._v(" "),t.canManageGlobalTags()?a("b-button",{attrs:{variant:"outline-danger"},on:{click:function(a){return t.onDeleteTag(e)}}},[a("i",{staticClass:"fa fa-trash"})]):t._e()],1)}),1)],1):t._e()],1),t._v(" "),t.havePersonalTag?a("b-form",{on:{submit:t.onSubmit}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Tag cá nhân")]),t._v(" "),a("b-input-group",{staticClass:"mb-3"},[a("b-form-input",{attrs:{type:"text",placeholder:"Nhập tên tag mới"},model:{value:t.tag,callback:function(e){t.tag=e},expression:"tag"}}),t._v(" "),a("b-input-group-append",[a("b-button",{attrs:{variant:"outline-success",id:"hr-tag-modal-btn-save",name:"hr-tag-modal-btn-save"},on:{click:t.onSubmit}},[a("i",{staticClass:"fa fa-save"})])],1)],1),t._v(" "),a("div",[a("b-list-group",t._l(t.tags,function(e,n){return a("b-list-group-item",{key:n,staticClass:"d-flex align-items-center"},[a("span",{staticClass:"mr-auto"},[t._v(t._s(e.name))]),t._v(" "),t.attachPermission?a("b-button",{staticClass:"add-tag",attrs:{variant:"outline-success"},on:{click:function(a){return t.onAttach(e)}}},[a("i",{staticClass:"fa fa-tag"})]):t._e(),t._v(" "),a("b-button",{attrs:{variant:"outline-danger"},on:{click:function(a){return t.onDeleteTag(e)}}},[a("i",{staticClass:"fa fa-trash"})])],1)}),1)],1)],1)]):t._e()],1),t._v(" "),a("template",{slot:"modal-footer"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.close()}}},[t._v("Đóng")])])],2)],1)},[],!1,S,"data-v-1aaed668",null).exports,T=a("Vec3"),D=a("lBHt"),I=a("l48y"),P=a("JmUl"),E=a("Yw12"),L=a("QqLn"),A=a("gRE1"),O=a.n(A),N=a("Gu7T"),R=a.n(N),U=a("7zFw"),$=a("RUzx"),H=a.n($),B={name:"SelectTag",components:{Multiselect:H.a},props:{tags:[],customClass:""},data:function(){return{options:[],selectedOption:""}},mounted:function(){this.fetchOptions()},created:function(){},watch:{selectedOption:function(t,e){this.$emit("handleTagsSelected",t)}},methods:{fetchOptions:function(){var t=this;return h()(d.a.mark(function e(){var a,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.getTags();case 2:(a=e.sent).data.success?(n=[].concat(R()(O()(a.data.data.tag_global)),R()(O()(a.data.data.tag_personal))),t.options=n.map(function(t){return{id:t.id,name:t.name}})):console.log(a.data.message||"Không lấy được tag");case 4:case"end":return e.stop()}},e,t)}))()}}},j=Object(x.a)(B,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("multiselect",{class:t.customClass,attrs:{options:t.options,placeholder:"Chọn tag",label:"name","track-by":"name",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn",searchable:!0,multiple:!0},model:{value:t.selectedOption,callback:function(e){t.selectedOption=e},expression:"selectedOption"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")])])],1)},[],!1,null,null,null).exports,F=a("yfp4"),q=a("xF2Z"),Y=a("PJh5"),z=a.n(Y),G=a("b2C9"),K=a("NYxO"),V=a("7K05"),Q={name:"ModalAddCandidate",props:{},methods:{openModalImportData:function(){this.$emit("openModalImportData")},openLink:function(t){window.open(t,"_blank")}}};var X=function(t){a("LTTd"),a("8SDm")},W=Object(x.a)(Q,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{"modal-class":"modal-custom",size:"sm",centered:"",static:"",id:"modal-add-candidate","hide-footer":"","hide-header":""}},[a("div",{staticClass:"modal-title-contact"},[a("span",[t._v("Thêm ứng viên")])]),t._v(" "),a("div",{staticClass:"modal-content-contact"},[a("div",[a("span",[t._v("Vui lòng chọn hình thức để tạo ứng viên mới")])])]),t._v(" "),a("div",{staticClass:"text-center mt-3 mb-2"},[a("b-btn",{staticClass:"button-add-candidate-modal",attrs:{variant:"ghtk"},on:{click:function(e){return t.openModalImportData()}}},[t._v("Nhập dữ liệu")]),t._v(" "),a("b-btn",{staticClass:"button-add-candidate-modal",attrs:{variant:"ghtk",id:"candidate-manage-btn-add-candidate-modal",name:"candidate-manage-btn-add-candidate-modal"},on:{click:function(e){return t.openLink("/adm/recruitment/candidate/create")}}},[t._v("Thêm ứng viên")])],1)])},[],!1,X,"data-v-9c708206",null).exports,J={name:"ModalImportData",props:{isUploading:{default:!1},fileExcelCandidateDisabled:{default:function(){return[]}}},data:function(){return{dataFileExcelCandidateDisabled:this.fileExcelCandidateDisabled}},watch:{dataFileExcelCandidateDisabled:{handler:function(t){this.$emit("changeFileExcelCandidateDisabled",t)},deep:!0}},methods:{triggerInputFileDataDisabled:function(){this.$emit("importing"),this.$refs.fileInputDataDisabled.$el.childNodes[0].click()},resetForm:function(){this.dataFileExcelCandidateDisabled=[]},exportSampleFile:function(){window.open("https://cache.giaohangtietkiem.vn/d/662e83ba5497e1c9a401cbcc599a1e10.xlsx")}}};var Z=function(t){a("x8dU"),a("B09k")},tt=Object(x.a)(J,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{attrs:{"modal-class":"modal-custom",static:"",centered:"",id:"modal-import-data-candidate","hide-footer":"","hide-header":""},on:{hide:function(e){return t.resetForm()}}},[a("div",{staticClass:"modal-title-contact"},[a("span",[t._v("Nhập dữ liệu")])]),t._v(" "),a("div",{staticClass:"modal-content-import-data"},[a("div",[a("span",[t._v("- Chỉ cho phép upload file excel.")]),a("br"),t._v(" "),a("span",[t._v("- Không được để trống các trường sau: STT, Họ tên, số điện thoại, ngày ứng tuyển, trạng thái.")]),a("br"),t._v(" "),a("span",[t._v("- Nội dung các cột trạng thái, Vị trí, nguồn giới thiệu, kênh giới thiệu chỉ được chọn theo file mẫu.")]),a("br"),t._v(" "),a("span",[t._v("- Ngày ứng tuyển không được có chữ.")]),a("br"),t._v(" "),a("span",[t._v("- Thời gian để ở định dạng DD-MM-YYYY hoặc YYYY-MM-DD, ví dụ: 03-03-2022")]),a("br"),t._v(" "),a("span",[t._v("- Nếu có nhiều sheet, Hệ thống sẽ nhận diện sheet đầu tiên của file excel")]),a("br"),t._v(" "),a("span",[t._v("- Các trạng thái của lưu thông tin: Hủy ứng tuyển, đã nghỉ việc, Không trúng tuyển, từ chối nhận việc..")]),a("br")]),t._v(" "),a("div",{staticClass:"mt-4"},[a("div",{staticStyle:{"text-align":"center","font-size":"16px",color:"#000"}},[a("b",[t._v("KÉO THẢ FILE ĐỂ UPLOAD")])]),t._v(" "),a("div",{staticClass:"text-center mt-2"},[a("b-btn",{staticClass:"button-import-data",attrs:{variant:"outline-ghtk"},on:{click:t.exportSampleFile}},[t._v("\n            Tải file mẫu\n          ")]),t._v(" "),t.isUploading?t._e():a("b-button",{staticClass:"btn btn-outline-ghtk button-import-data",attrs:{id:"candidate-btn-import-data",name:"candidate-btn-import-data"},on:{click:t.triggerInputFileDataDisabled}},[a("span",{staticClass:"ladda-label"},[t._v("Chọn file")])]),t._v(" "),t.isUploading?a("b-btn",{staticClass:"exporting-btn",attrs:{variant:"outline-ghtk"}},[a("span",[a("div",{staticClass:"sk-folding-cube sk-primary"},[a("div",{staticClass:"sk-cube1 sk-cube"}),t._v(" "),a("div",{staticClass:"sk-cube2 sk-cube"}),t._v(" "),a("div",{staticClass:"sk-cube4 sk-cube"}),t._v(" "),a("div",{staticClass:"sk-cube3 sk-cube"})]),t._v("\n                          Đang xử lý...\n                      ")])]):t._e()],1)])])]),t._v(" "),a("b-form-file",{ref:"fileInputDataDisabled",staticStyle:{display:"none"},model:{value:t.dataFileExcelCandidateDisabled,callback:function(e){t.dataFileExcelCandidateDisabled=e},expression:"dataFileExcelCandidateDisabled"}})],1)},[],!1,Z,"data-v-b891bd50",null).exports,et={name:"ModalReferralCandidate",props:{referralInfo:{default:function(){return{referralCode:"",referralQr:""}}}},methods:{downloadURI:function(t){var e=t.split(".png")[0]+".png";fetch(e).then(function(t){return t.blob()}).then(function(t){var e=document.createElement("a");e.href=URL.createObjectURL(t),e.download="qr.png",e.click(),w.a.showMessage("Tải xuống mã QR thành công","success")}).catch(function(t){console.log(t),w.a.showMessage("Tải xuống mã QR thất bại","warning")})},copyText:function(t){try{navigator.clipboard.writeText(t),w.a.showMessage("Sao chép thành công","success")}catch(t){console.log(t),w.a.showMessage("Sao chép thất bại","warning")}}}};var at=function(t){a("r4fb")},nt=Object(x.a)(et,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{"modal-class":"modal-custom",size:"md",title:"Mã cá nhân","header-class":"justify-content-center",centered:"",static:"",id:"modal-referral-candidate","hide-footer":""}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"p-4"},[a("p",{staticClass:"modal-referral-title"},[t._v("Bước 1: Hướng dẫn ứng viên tải app GHTK,Co")]),t._v(" "),a("p",{staticClass:"modal-referral-step"},[t._v("Cách 1: Gửi mã QR")]),t._v(" "),a("div",{staticClass:"center"},[a("div",{staticClass:"bg-qr"},[a("img",{staticClass:"p-3",attrs:{src:t.referralInfo.referralQr,alt:""}}),t._v(" "),a("button",{staticClass:"btn btn-download-qr mb-3 pl-5 pr-lg-5",on:{click:function(e){return t.downloadURI(t.referralInfo.referralQr)}}},[a("i",{staticClass:"fa fa-download",attrs:{"aria-hidden":"true"}}),t._v("\n            Tải xuống\n          ")])])]),t._v(" "),a("div",{staticClass:"mt-3 mb-2"},[a("span",{staticClass:"modal-referral-step"},[t._v("Cách 2: Gửi link tải app")]),t._v(" "),a("div",{staticClass:"d-flex justify-content-between align-items-center block-app mt-2"},[a("span",{staticClass:"pt-2 pb-2 pl-2 link-app"},[a("u",[t._v("https://app.ghtk.vn/")])]),t._v(" "),a("div",{staticClass:"clone-button mr-1"},[a("div",{staticClass:"btn-copy",on:{click:function(e){return t.copyText("https://app.ghtk.vn/")}}},[a("i",{staticClass:"fa fa-clone",attrs:{"aria-hidden":"true"}}),t._v(" "),a("span",[t._v("Sao chép")])])])])]),t._v(" "),a("div",{staticClass:"mb-2"},[a("p",{staticClass:"modal-referral-title mt-3 mb-2"},[t._v("Bước 2: Gửi mã cá nhân")]),t._v(" "),a("div",{staticClass:"d-flex justify-content-between align-items-center block-app"},[a("span",{staticClass:"pt-2 pb-2 pl-2 link-app ref-code"},[t._v("\n            "+t._s(t.referralInfo.referralCode)+"\n          ")]),t._v(" "),a("div",{staticClass:"clone-button mr-1"},[a("div",{staticClass:"btn-copy",on:{click:function(e){return t.copyText(t.referralInfo.referralCode)}}},[a("i",{staticClass:"fa fa-clone",attrs:{"aria-hidden":"true"}}),t._v(" "),a("span",[t._v("Sao chép")])])])])])])])])},[],!1,at,"data-v-2a6984af",null).exports,it=a("R1Q+"),st=a("vfns"),ot=a("IcnI"),rt=a("4WGu"),lt={name:"candidate-manager",props:{orderCode:{default:null},categoryAlias:{default:null},groupAlias:{default:null},showIframeProp:{type:Boolean,default:!1}},components:{Multiselect:H.a,ModalReferralCandidate:nt,ModalAddCandidate:W,SingleSelectPosition:L.a,ListCandidate:P.a,MultiSelectProvince:m.a,MultiSelectDistricts:f.a,MultiSelectStation:g.a,SingleSelectProfileRegion:I.a,MultiSelectDepartment:p.a,SingleSelectCandidatePosition:_.a,SingleSelectReferral:b.a,SingleSelectUser:D.a,Datepicker:v.a,QuickCreateUser:y.a,HrTagModalV2:M,MultiSelectHrTag:T.a,CandidateTagModal:E.a,SelectTag:j,SelectSourceRecruitment:V.a,SelectJob:F.a,ModalImportData:tt},mounted:function(){w.a.importLibraryTracingLogs()},beforeDestroy:function(){w.a.removeLibraryTracingLogs()},data:function(){return{disabledClassOldCandidate:!0,showIframe:!1,showModalChangeRound:!1,refreshToken:ot.a.isRefreshToken,processKey:null,currentCandidateStatus:"all",noRecordNoti:"",idCandidateCv:null,ulrCvFile:"",exporting:!1,exported:!1,URLExportedFile:null,processorActive:!1,currEditing:null,triggerEdit:!1,typeEdit:"",currUser:{},isUploading:!1,referralEnums:{facebook:"Facebook/internet",web:"Jobsite tuyển dụng",workfes:"Ngày hội việc làm",gtvlservice:"Dịch vụ GTVL",ghtk:"Nhân viên GHTK",employee:"Giới thiệu nội bộ",friend:"Bạn bè, người thân",collabor:"CTV tuyển dụng",other:"Khác",outdoor:"Quảng cáo ngoài trời"},jobId:"",candidateJobId:"",permissions:[],stageStatus:{candidate_id:null,status:null},page:{currentPage:1,totalPages:1,perPage:10,totalItems:0},dateFilterOptions:[{value:"created",name:"Ngày tạo hồ sơ"},{value:"expected_interview_date",name:"Ngày hẹn phỏng vấn"},{value:"expected_join_date",name:"Ngày hẹn nhận việc"}],reasonSaveinfOption:[{text:"Không liên hệ được",value:"contact_fail"},{text:"Hủy ứng tuyển",value:"cancel_recruit"},{text:"Trượt phỏng vấn",value:"rejected"},{text:"Từ chối nhận việc",value:"refused"},{text:"khác",value:"other"}],listCandidates:[],countStatus:{},showReffererSelection:!1,masterIdLinkable:null,cv_file:null,dateFilterTypeOp:null,dateFilter:null,optionRegion:{value:0,disabled:!0,options:[{value:0,text:"Chọn tất cả"},{value:10,text:"Miền Bắc"},{value:20,text:"Miền Trung"},{value:30,text:"Miền Nam"}]},optionsDocumentStatus:[{key:0,text:"Thiếu hồ sơ"},{key:1,text:"Đủ hồ sơ"}],filter:{name:null,card_id:null,email_or_phone:null,regions:null,provinces:null,districts:null,stations:null,station_expected:null,positions:null,job_id:null,appointment_date:null,status:null,tags:null,created_by:null,source:null,created_at:null,departments:null,document_status:null},appointment_date:null,searchTag:null,tag:null,isAddTag:[],loading:!1,openQuickAdd:!1,fileExcelCandidateDisabled:[],tagReasons:[{name:"Không liên hệ được",active:!1,alias:"khong-lien-he-duoc-2"},{name:"Không phù hợp",active:!1,alias:"khong-phu-hop-1"},{name:"Hủy ứng tuyển",active:!1,alias:"huy-ung-tuyen"},{name:"Không đi phỏng vấn",active:!1,alias:"khong-di-phong-van"},{name:"Không nhận việc",active:!1,alias:"khong-nhan-viec"}],openTagModal:!1,attachPermission:!0,tags:[],globalTags:[],tableName:"sgw_candidates",scope:"private",recordId:null,candidatesByStatuses:[],candidateTags:[],currComment:null,isSuccessOrFails:!1,messageSuccessOrFails:"",reasonRejectJob:null,reasonRejectTag:[],saveOk:!1,reloadListTag:!1,importError:!1,notAddCandidate:!0,curCandidate:{id:null,tags:null},referralInfo:{referralCode:"",referralQr:""},showQr:!1,elementId:{configIframe:"iframe-hrm-candidate"},messageType:{requestAuth:"hrm_authentication_request",refreshIamToken:"hrm_refresh_iam_token",openPageCandidateDetail:"hrm_open_page_candidate_detail"}}},created:function(){var t,e=this;this.showIframeProp||(this.getReferralCode(),this.countCandidateByStatus(),this.getCandidates()),this.startListenIframeEvent(),ot.a.dispatch("listenMessageFromHrm"),this.$watch("isRefreshToken",(t=h()(d.a.mark(function t(a){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a||e.loading){t.next=5;break}return e.loading=!0,t.next=4,e.getReferralCode();case 4:e.loading=!1;case 5:case"end":return t.stop()}},t,e)})),function(e){return t.apply(this,arguments)})),ot.a.dispatch("setShowModalChangeRound",!1,this.elementId.configIframe)},computed:l()({},Object(K.c)({userInfo:"userInfo",isRefreshToken:"isRefreshToken",getIsShowModalChangeRound:"getIsShowModalChangeRound"}),{urlCandidateManager:function(){return rt.a.domainHrmFe+"/recruitment/candidate-manager"}}),watch:{fileExcelCandidateDisabled:function(t){t&&this.importCandidates(t)}},methods:{getReferralCode:function(){var t=this;return h()(d.a.mark(function e(){var a,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.getReferralCandidate();case 3:a=e.sent,(n=a.data).success?(t.referralInfo.referralCode=n.data.referral_code,t.referralInfo.referralQr=n.data.referral_qr,t.showQr=!0):t.showQr=!1,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t.showQr=!1;case 12:case"end":return e.stop()}},e,t,[[0,8]])}))()},openModalImportData:function(){this.$bvModal.hide("modal-add-candidate"),this.$bvModal.show("modal-import-data-candidate")},pushTagToCandidate:function(t){this.listCandidates.find(function(e){return e.id===t.candidate_id}).tags.push({tag_id:t.tag_id,name:t.tag_name,type:t.tag_type})},changeFileExcelCandidateDisabled:function(t){this.fileExcelCandidateDisabled=t},openLink:function(t){window.open(t,"_blank")},changePage:function(){this.getCandidates()},openModalAddCandidate:function(){this.$bvModal.show("modal-add-candidate")},openModalReferralCandidate:function(){this.$bvModal.show("modal-referral-candidate")},selectCreator:function(t){this.filter.created_by=t?t.map(function(t){return t.id}):null},handleSelectedRecruitmentSource:function(t){this.filter.source=t?t.value:""},handleDepartmentSelected:function(t){this.filter.departments=t?t.map(function(t){return t.id}):null},handlePositionsSelected:function(t){this.filter.job_id=t?t.map(function(t){return t.id}):null},formatDatetimeRange:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?"YYYY-MM-DD":"YYYY-MM-DD HH:mm:ss";return[z()(t.start).format(e),z()(t.end).format(e)]},getCandidates:function(){var t=this;return h()(d.a.mark(function e(){var a,n,i;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,t.filter.page=t.page.currentPage,t.filter.limit=t.page.per_page,a=l()({},t.filter,{page:t.page.currentPage,limit:t.page.perPage}),t.filter.document_status&&(a.document_status=t.filter.document_status.key),a.appointment_date&&(a.appointment_date=t.formatDatetimeRange(a.appointment_date)),a.created_at&&(a.created_at=t.formatDatetimeRange(a.created_at,!1)),o()(a).forEach(function(t){null===a[t]&&delete a[t]}),e.prev=8,e.next=11,U.a.getCandidates(a);case 11:n=e.sent,(i=n.data).success?(t.page.totalItems=i.total,t.page.totalPages=i.last_page,t.listCandidates=i.data,t.permissions=i.permission):(t.page.totalItems=0,t.page.totalPages=0,t.listCandidates=[],w.a.showMessage(i.message||"Không thuộc vùng quản lý !","warning")),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(8),console.log(e.t0);case 19:return e.prev=19,t.jobId="",t.candidateJobId="",t.$nextTick(function(){t.loading=!1}),e.finish(19);case 24:case"end":return e.stop()}},e,t,[[8,16,19,24]])}))()},resetModal:function(){this.curCandidate={},this.currComment=null,this.jobId="",this.candidateJobId=""},quickCreateCandidate:function(t){var e=this;return h()(d.a.mark(function a(){var n,i;return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,U.a.quickCreateCandidate(t);case 3:n=a.sent,(i=n.data).success?(e.getCandidates(e.filter),w.a.showMessage("Thành công!","success"),e.openQuickAdd=!1):w.a.showMessage(i.message,"warning"),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),w.a.showMessage(a.t0.message,"warning");case 11:case"end":return a.stop()}},a,e,[[0,8]])}))()},canEditExpectJoin:function(t){return!!t&&["expect_join","interview"].includes(t.status)},updateCandidate:function(t){for(var e=0;e<this.listCandidates.length;e++)return this.listCandidates[e].id===t.id&&(this.listCandidates[e]=t),void this.$forceUpdate()},clearSource:function(){this.currEditing.source=null},toggleDetail:function(t){t.showDetail=!t.showDetail,t.showProcessor=t.showDetail,this.$forceUpdate()},toggleResignInfo:function(t){t.showResignInfo=!t.showResignInfo,this.$forceUpdate()},resetExport:function(){this.exporting=!1,this.exported=!1,this.URLExportedFile=null},redirectToLinkMasterProfile:function(){void 0!==this.masterIdLinkable&&null!==this.masterIdLinkable&&this.$router.push({name:"edit-master-profile",params:{id:this.masterIdLinkable}})},redirectToMasterProfile:function(t){var e={};if(t.id&&(e.id=t.id),t.name&&(e.name=t.name),t.birthday&&(e.birthday=t.birthday),t.mail&&(e.mail=t.mail),t.phone&&(e.phone=t.phone),t.gender&&(e.gender=t.gender),t.identify_id&&(e.identify_id=t.identify_id),t.type_marriage_name&&(e.marital_status_name=t.type_marriage_name),t.province_now_id&&(e.province_now_id=t.province_now_id),t.district_now_id&&(e.district_now_id=t.district_now_id),t.subdistrict_now_id&&(e.subdistrict_now_id=t.subdistrict_now_id),t.detail_now&&(e.detail_now=t.detail_now),t.province_household_id&&(e.province_household_id=t.province_household_id),t.district_household_id&&(e.district_household_id=t.district_household_id),t.subdistrict_household_id&&(e.subdistrict_household_id=t.subdistrict_household_id),t.detail_household&&(e.detail_household=t.detail_household),t.province_register_id&&(e.province_register_id=t.province_register_id),t.district_register_id&&(e.district_register_id=t.district_register_id),t.province_grant_identify_id&&(e.province_grant_identify_id=t.province_grant_identify_id),t.date_grant_identify_id&&(e.date_grant_identify_id=t.date_grant_identify_id),t.academy_level&&(e.academy_level=t.academy_level),t.type_marriage_name&&(e.type_marriage_name=t.type_marriage_name),this.curCandidate&&(e.status=this.curCandidate.status||t.status,e.evaluate=this.curCandidate.evaluate),sessionStorage.setItem("candidate",i()(e)),this.blankMode){var a=this.$router.resolve({name:"add-master-profile"});window.open(a.href,"_blank")}else this.$router.push({name:"add-master-profile"})},createMasterProfile:function(t){var e=this;if(this.masterIdLinkable=null,t.identify_id){var a={field:"personal_id_number",value:t.identify_id};q.a.existedFieldValue(a).then(function(a){if(a.data.success)if(a.data.exist){e.masterIdLinkable=a.data.data;var n={candidate_id:t.id,master_id:e.masterIdLinkable};U.a.existedMasterProfile(n).then(function(t){t.data.success&&(t.data.data?alert("Đã tồn tại ứng viên liên kết đến Master Profile có cùng số CMND/CCCD này"):e.$refs.refLinkModal.show())})}else e.redirectToMasterProfile(t);else alert("Đã có lỗi xảy ra, vui lòng thử lại.")})}else this.redirectToMasterProfile(t)},resetMessageImport:function(){this.isSuccessOrFails=!1,this.messageSuccessOrFails=null,this.importError=!1,this.processKey=null},importCandidates:function(t){var e=this;if(t&&t.name){if("xlsx"!==t.name.split(".").pop())return void alert("Bạn phải upload file định dạng .xlsx!");this.importError=!1,this.isUploading=!0;var a=new FormData;a.append("excel_file",t),U.a.import(a).then(function(t){t.data.success?(w.a.showMessage("Vui lòng đợi để lấy kết quả","warning"),e.checkJobImportStatus(t.data.data.process_key)):(e.isUploading=!1,w.a.showMessage(t.data.message,"warning"))}).catch(function(t){e.isUploading=!1,console.log(t)}).finally(function(t){e.fileExcelCandidateDisabled=null})}},checkJobImportStatus:function(t){var e=this;t||w.a.showMessage("Đã có lỗi xảy ra","warning"),this.processKey=t;var a=setInterval(function(){U.a.getProcessImport({process_key:t}).then(function(t){if(t.data.success){if(t.data.data.import_done){var n=t.data.data;clearInterval(a),w.a.showMessage("Đã import xong file dữ liệu","success"),e.isUploading=!1,e.isSuccessOrFails=!0,e.messageSuccessOrFails="Import thành công: "+n.total_success+"/"+n.total,+n.total_success<+n.total&&(e.importError=!0),e.fileExcelCandidateDisabled=null,e.$bvModal.hide("modal-import-data-candidate"),document.body.scrollTop=document.documentElement.scrollTop=0}}else w.a.showMessage(t.data.message,"warning"),clearInterval(a),e.isUploading=!1,e.fileExcelCandidateDisabled=null})},2e3)},showHideProcessor:function(t){t.showProcessor=!t.showProcessor,this.$forceUpdate()},openModalCandidate:function(t,e){this.$router.push({name:"add-candidate"})},updateStageStatus:function(t){this.stageStatus.candidate_id!==t.id&&(this.stageStatus.candidate_id=t.id,this.stageStatus.status=t.status)},moment:function(t){return z()(t)},getCurrUser:function(){var t=this;U.a.getCurrUser().then(function(e){e.data.success&&(t.currUser=e.data.data)}).catch(function(t){})},overdate:function(t){return!(!t||!["interview","expect_join"].includes(t.status))&&("interview"===t.status?z()(t.expected_interview_date).add(1,"days").isBefore():"expect_join"===t.status?z()(t.expected_join_date).add(1,"days").isBefore():void 0)},addLog:function(t,e){e&&(isNaN(t)||t<0||!this.listCandidates[t].id||this.listCandidates[t].logs.push(e))},resetOrder:function(){this.filter.orderField=null,this.filter.orderType=null},getCandidateStatusName:function(t){return(new G.a).getStatusName(t)},getCandidateStatusClass:function(t){return(new G.a).getStatusClass(t)},updateAppointmentDate:function(t,e){var a=this;return h()(d.a.mark(function n(){var i;return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e&&(e=z()(e).format("YYYY-MM-DD")),i="","expect_join"===t.status&&(i="ngày hẹn nhận việc"),"interview"===t.status&&(i="ngày hẹn phỏng vấn"),n.next=6,U.a.updateAppointmentDate({id:t.id,date:e||null}).then(function(a){a.data.success?("expect_join"===t.status&&(t.expected_join_date=e),"interview"===t.status&&(t.expected_interview_date=e),w.a.showMessage(e?i+" mới: "+z()(e).format("DD-MM-YYYY"):i+" đã xóa","success","Cập nhật thành công")):w.a.showMessage("không cập nhật được "+i,"warning","Lỗi")}).catch(function(t){w.a.showMessage("Có lỗi xảy ra, vui lòng thử lại sau !","warning"),console.log(t)});case 6:a.$forceUpdate();case 7:case"end":return n.stop()}},n,a)}))()},setJob:function(t){this.filter.positions=t?t.map(function(t){return t.id}).toString():null},exportCvCandidate:function(t){t?(this.idCandidateCv=t,window.open("/admin/manage-candidates/exportCvCandidate?id_candidate="+t,"_blank")):w.a.showMessage("Không có ID ứng viên")},expectJoinFrom:function(t){if(t)return(t=new Date(t)).setDate(t.getDate()-1),t},canSendSms:function(t){return["expect_join","contact_fail","interview"].includes(t.status)&&(!t.sentSms||t.sentSms!==t.status)&&!+t.master_profile_id},showModalSmsContent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;!isNaN(t)&&t>-1&&this.listCandidates[t]&&(this.curCandidate.idx=t,this.curCandidate.candidate_id=this.listCandidates[t].id,this.curCandidate.status=this.listCandidates[t].status,this.curCandidate.evaluate=null,this.curCandidate.reason_saveinfo=null,this.curCandidate.apply_date=this.listCandidates[t].apply_date||this.listCandidates[t].created),this.listCandidates[this.curCandidate.idx]&&this.canSendSms(this.listCandidates[this.curCandidate.idx])&&this.$bvModal.show("modal-send-sms")},canQuickCreateAcc:function(t){return![1,2,3,25].includes(parseInt(t.job_id))&&(!!t&&(("take_job"===t.status||"expect_join"===t.status)&&!t.master_profile_id&&1==+t.job_id))},showOriginTel:function(t){this.listCandidates[t].phone_display=this.listCandidates[t].phone_origin},handleProvinceSelected:function(t){this.filter.provinces=t?t.map(function(t){return t.id}):null},handleSelectedLocation:function(t){this.filter.districts=t?t.map(function(t){return t.id}):null},handleStationSelected:function(t){this.filter.stations=t?t.map(function(t){return t.id}):null},handleStationExpectedSelected:function(t){this.filter.station_expected=t?t.map(function(t){return t.id}):null},openTagManage:function(t){t&&(this.curCandidate=t),this.$bvModal.show("candidate-tag-modal")},closeTagManage:function(){this.recordId=null,this.openTagModal=!1},countCandidateByStatus:function(){var t=this;return h()(d.a.mark(function e(){var a,n,i;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=l()({},t.filter),t.filter.document_status&&(a.document_status=t.filter.document_status.key),a.appointment_date&&(a.appointment_date=t.formatDatetimeRange(a.appointment_date)),a.created_at&&(a.created_at=t.formatDatetimeRange(a.created_at,!1)),a.status&&delete a.status,e.next=8,U.a.countCandidatesByStatus(a);case 8:n=e.sent,i=n.data,t.candidatesByStatuses=i.data,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:return e.prev=16,e.finish(16);case 18:case"end":return e.stop()}},e,t,[[0,13,16,18]])}))()},countCandidateByTag:function(){var t=this;return h()(d.a.mark(function e(){var a,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.countCandidateByTag(t.filter);case 3:a=e.sent,n=a.data,t.candidateTags=n.data,e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:return e.prev=10,e.finish(10);case 12:case"end":return e.stop()}},e,t,[[0,8,10,12]])}))()},reloadPage:function(){var t=this;return h()(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.countCandidateByStatus();case 2:return e.next=4,t.getCandidates();case 4:case"end":return e.stop()}},e,t)}))()},toggleTagManage:function(t,e){this.recordId=t,this.openTagModal=e},refreshCandidate:function(){this.filter={name:null,email_or_phone:null,region:null,provinces:null,districts:null,stations:null,job_id:null,appointment_date:null,status:null,hr_tag_id:null,departments:null},this.getCandidates()},searchByStatus:function(t){this.filter.status="all"===t?null:[t],this.currentCandidateStatus=t,this.getCandidates(this.filter)},searchByTag:function(t,e){this.filter.hr_tag_id=t,this.filter.status=null,this.currentCandidateStatus=e,this.getCandidates(this.filter)},searchAll:function(){this.filter.hr_tag_id=null,this.filter.status=null,this.currentCandidateStatus="all",this.getCandidates(this.filter)},handleTagsSelected:function(t){this.filter.tags=t.map(function(t){return t.id})},handleSourcesSelected:function(t){this.filter.source=t.map(function(t){return t.id})},handleRegionsSelected:function(t){this.filter.regions=t.map(function(t){return t.id})},search:function(){this.countCandidateByStatus(),this.getCandidates()},downLoadErrorFile:function(){var t,e=this;U.a.exportLogCandidateImport({process_key:this.processKey}).then(function(t){var e=window.URL.createObjectURL(new Blob([t.data])),a=document.createElement("a");a.href=e,a.setAttribute("download","data.xlsx"),document.body.appendChild(a),a.click()}).catch((t=h()(d.a.mark(function t(a){var n,i;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.response.data.text();case 2:n=t.sent,a&&(i=JSON.parse(n),w.a.showMessage(i.message||"Có lỗi xảy ra. Hãy thử lại nhé!","warning"));case 4:case"end":return t.stop()}},t,e)})),function(e){return t.apply(this,arguments)})).then(function(){e.appLoading=!1,e.$stopLoading()})},startListenIframeEvent:function(){var t=this;window.addEventListener("message",function(e){if(e.origin===rt.a.domainHrmFe)switch(e.data.type){case t.messageType.requestAuth:console.log("listen request auth",t.messageType.requestAuth),ot.a.dispatch("sendMessageToHrm",t.elementId.configIframe);break;case t.messageType.refreshIamToken:console.log("listen request refresh auth",t.messageType.refreshIamToken);var a=new st.a("session",!1).get("isReload");if(!a||"false"===a){console.log("reload");var n=new st.a("local"),i=new st.a("session",!1);n.remove(rt.a.oidc.tokenIamStorage),i.set("isReload",!0);var s=Object(it.a)(rt.a.oidc);try{s.run(window.location.href)}catch(t){}}break;case t.messageType.openPageCandidateDetail:var o=e.data.payload.id;e.data.payload.showPopupChangeRound&&ot.a.dispatch("setShowModalChangeRound",!0,t.elementId.configIframe),window.open(t.$router.resolve({name:"update-candidate",params:{id:o}}).href,"_blank"),e.source.postMessage({type:"open_modal_change_round",payload:t.getIsShowModalChangeRound},rt.a.domainHrmFe)}})}}};var ct=function(t){a("OEkN"),a("6aA6"),a("1qdA")},dt=Object(x.a)(lt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showIframe||t.showIframeProp?a("div",[[a("iframe",{staticClass:"border-0",staticStyle:{height:"100vh"},attrs:{id:t.elementId.configIframe,src:t.urlCandidateManager,title:"recruitment",width:"100%",height:"100%",allow:"clipboard-write"}})]],2):a("div",[a("div",{staticClass:"d-none d-md-block main-content candidate_management_page"},[t.isSuccessOrFails?a("div",{staticClass:"col-12 justify-content-center mt-3 mb-3"},[a("b-alert",{staticClass:"alert-message",attrs:{variant:"success",show:""}},[a("div",[t._v(t._s(t.messageSuccessOrFails))]),t._v(" "),t.importError?a("div",{staticStyle:{color:"red"}},[a("b-button",{staticClass:"tag-manage",attrs:{pill:"",variant:"outline-secondary"},on:{click:function(e){return t.downLoadErrorFile()}}},[t._v(" Tải tệp lỗi")])],1):t._e(),t._v(" "),a("i",{staticClass:"fas fa-times alert-message__close-btn",on:{click:t.resetMessageImport}})])],1):t._e(),t._v(" "),a("b-row",{staticClass:"mx-0 header my-2 align-items-center"},[a("b-col",{attrs:{md:"4"}},[a("h4",{staticClass:"m-0"},[t._v("Tuyển dụng")])]),t._v(" "),a("b-col",{staticClass:"text-right",attrs:{md:"8"}},[t._l(t.candidatesByStatuses,function(e,n){return a("b-btn",{key:"status"+n,staticClass:"btn-radius pd-5 btn-filter-tag",attrs:{variant:t.currentCandidateStatus===e.name?"ghtk":"outline-ghtk-color-custom",id:"candidate-btn-"+e.name,name:"candidate-btn-"+e.name},on:{click:function(a){return t.searchByStatus(e.name)}}},[t._v("\n          "+t._s(e.label)+" ("+t._s(e.count)+")\n        ")])}),t._v(" "),a("b-button",{class:t.disabledClassOldCandidate?"d-none":"tag-manage",attrs:{disabled:t.disabledClassOldCandidate,pill:"",variant:"outline-secondary"},on:{click:function(e){return t.openTagManage()}}},[t._v("+ Tag")])],2)],1),t._v(" "),a("div",{staticClass:"filter-select-container"},[a("b-row",{staticClass:"mx-0 filter pb-1"},[a("div",{staticClass:"input-filter mb-1 z-5"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.name,expression:"filter.name"}],staticClass:"form-control",staticStyle:{"border-radius":"4px",border:"1px solid #e8e8e8 !important"},attrs:{placeholder:"Họ tên"},domProps:{value:t.filter.name},on:{input:function(e){e.target.composing||t.$set(t.filter,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"input-filter mb-1 z-5"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.email_or_phone,expression:"filter.email_or_phone"}],staticClass:"form-control",staticStyle:{"border-radius":"4px",border:"1px solid #e8e8e8 !important"},attrs:{placeholder:"SĐT, Email"},domProps:{value:t.filter.email_or_phone},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search()},input:function(e){e.target.composing||t.$set(t.filter,"email_or_phone",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"input-filter mb-1 z-5"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.card_id,expression:"filter.card_id"}],staticClass:"form-control",staticStyle:{"border-radius":"4px",border:"1px solid #e8e8e8 !important"},attrs:{placeholder:"CMND/CCCD"},domProps:{value:t.filter.card_id},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search()},input:function(e){e.target.composing||t.$set(t.filter,"card_id",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"input-filter mb-1 z-5"},[a("single-select-profile-region",{staticClass:"z-5 multiselect-ghtk multiselect-no-horizontal",attrs:{placeholder:"Chọn miền",multiple:!0},on:{handleSelectedRegion:t.handleRegionsSelected}})],1),t._v(" "),a("div",{staticClass:"input-filter mb-1 z-5"},[a("multi-select-province",{attrs:{customClass:"z-5 multiselect-ghtk multiselect-no-horizontal",region:t.filter.regions,"auto-close":!0,"hide-select":!0},on:{handleProvinceSelected:t.handleProvinceSelected}})],1),t._v(" "),a("div",{staticClass:"input-filter mb-1 z-5"},[a("multi-select-districts",{attrs:{customClass:"z-5 multiselect-ghtk multiselect-no-horizontal","auto-close":!0,"hide-select":!0,"province-id":t.filter.provinces,"district-id":t.filter.districts},on:{onChange:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return t.handleSelectedLocation.apply(void 0,n.concat(["district_register_id"]))}}})],1),t._v(" "),a("div",{staticClass:"input-filter mb-1 z-5"},[a("multi-select-station",{attrs:{customClass:"z-5 multiselect-ghtk multiselect-no-horizontal","auto-close":!0,"hide-select":!0,placeholder:"Kho phỏng vấn"},on:{handleStationSelected:t.handleStationSelected}})],1),t._v(" "),a("div",{staticClass:"input-filter mb-1 z-5"},[a("multi-select-station",{attrs:{customClass:"z-5 multiselect-ghtk multiselect-no-horizontal","auto-close":!0,"hide-select":!0,placeholder:"Kho làm việc"},on:{handleStationSelected:t.handleStationExpectedSelected}})],1)]),t._v(" "),a("b-row",{staticClass:"mx-0 filter pb-1"},[a("div",{staticClass:"input-filter mb-1 z-3"},[a("v-date-picker",{attrs:{mode:"range",locale:"vi",color:"green","input-props":{placeholder:"Ngày hẹn",style:"font-size:14px; line-height: unset; border: 1px solid #e8e8e8;"}},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search.apply(null,arguments)}},model:{value:t.filter.appointment_date,callback:function(e){t.$set(t.filter,"appointment_date",e)},expression:"filter.appointment_date"}})],1),t._v(" "),a("div",{staticClass:"input-filter mb-1 z-3"},[a("SelectJob",{attrs:{multiple:!0},on:{"selected-option-changed":t.handlePositionsSelected}})],1),t._v(" "),a("div",{staticClass:"input-filter mb-1 z-3"},[a("multiselect",{attrs:{placeholder:"Trạng thái hồ sơ",label:"text","track-by":"key",options:t.optionsDocumentStatus,"open-direction":"bottom",selectLabel:"",selectedLabel:"Chọn",deselectLabel:"x","allow-empty":!0},model:{value:t.filter.document_status,callback:function(e){t.$set(t.filter,"document_status",e)},expression:"filter.document_status"}})],1),t._v(" "),a("div",{staticClass:"input-filter mb-1 z-3"},[a("v-date-picker",{attrs:{mode:"range",locale:"vi",color:"green","input-props":{placeholder:"Ngày tạo",style:"font-size:14px; line-height: unset; border: 1px solid #e8e8e8;"}},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search.apply(null,arguments)}},model:{value:t.filter.created_at,callback:function(e){t.$set(t.filter,"created_at",e)},expression:"filter.created_at"}})],1),t._v(" "),a("div",{staticClass:"input-filter mb-1 z-3"},[a("single-select-user",{staticClass:"z-5 multiselect-ghtk multiselect-no-horizontal",attrs:{placeholder:"Người tạo",multiple:!0,"in-scope":!0},on:{onChange:t.selectCreator}})],1),t._v(" "),a("div",{staticClass:"input-filter mb-1 z-3"},[a("SelectSourceRecruitment",{staticClass:"z-3 multiselect-ghtk multiselect-no-horizontal",attrs:{multiple:!0,placeholder:"Nguồn tuyển dụng"},on:{handleSourceSelected:t.handleSourcesSelected}})],1),t._v(" "),a("div",{staticClass:"input-filter mb-1 z-3"},[a("SelectTag",{attrs:{"custom-class":"z-3 multiselect-ghtk multiselect-no-horizontal",placeholder:"Tag ứng viên",type:"getJob"},on:{handleTagsSelected:t.handleTagsSelected}})],1),t._v(" "),a("div",{staticClass:"input-filter mb-1 z-3"},[a("b-btn",{staticStyle:{"border-radius":"5px",width:"100%"},attrs:{variant:"ghtk",id:"candidate-btn-search",name:"candidate-btn-search"},on:{click:function(e){return t.search()}}},[t._v(" Tìm kiếm")])],1)])],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"order-table row mx-0 position-relative"},[t.listCandidates.length>0?a("div",{staticClass:"col col-12 table-content",staticStyle:{"max-height":"75vh",overflow:"auto"}},[a("ListCandidate",{attrs:{originTags:t.tags,originGlobalTags:t.globalTags,listCandidates:t.listCandidates,jobId:t.jobId,candidateJobId:t.candidateJobId,permissions:t.permissions},on:{reloadCandidates:function(e){return t.reloadPage()},refreshModelTags:function(e){return t.reloadPage()},openTagManage:t.openTagManage,refreshCandidate:function(e){return t.refreshCandidate()},openTagOfCandidate:t.openTagManage}})],1):a("div",{staticClass:"none-result"},[t._v("Không tìm thấy kết quả phù hợp")])]),t._v(" "),a("input",{attrs:{type:"hidden",id:"code-name"},domProps:{value:t.userInfo&&t.userInfo.User?t.userInfo.User.id:null}}),t._v(" "),a("div",{staticClass:"paging mt-3 d-flex"},[a("div",{staticStyle:{width:"85%"}},[a("div",[a("b",{staticClass:"float-left"},[t._v("Trang "+t._s(t.page.currentPage)+"/"+t._s(Math.ceil(t.page.totalItems/t.page.perPage)))])]),t._v(" "),a("div",{staticClass:"z-0 d-inline-block paginator-ghtk ml-2"},[a("b-pagination",{staticClass:"mb-1",attrs:{size:"sm",align:"left","total-rows":t.page.totalItems,"per-page":t.page.perPage},on:{input:function(e){return t.changePage()}},model:{value:t.page.currentPage,callback:function(e){t.$set(t.page,"currentPage",e)},expression:"page.currentPage"}})],1)]),t._v(" "),a("div",{staticClass:"search-button-container"},[a("b-row",{staticClass:"mx-0 filter pb-1 border-bottom"},[a("b-col",{staticClass:"text-right",attrs:{md:t.showQr?6:12}},[a("b-btn",{class:t.disabledClassOldCandidate?"d-none":"float-right",staticStyle:{"border-radius":"5px"},attrs:{disabled:t.disabledClassOldCandidate,right:"",variant:"ghtk"},on:{click:t.openModalAddCandidate}},[a("span",{attrs:{slot:"button-content"},slot:"button-content"},[a("i",{staticClass:"fas fa-plus"}),t._v(" Thêm ứng viên\n            ")])])],1),t._v(" "),t.showQr?a("b-col",{staticClass:"text-right",attrs:{md:"6"}},[a("b-btn",{class:t.disabledClassOldCandidate?"d-none":"float-right",staticStyle:{"border-radius":"5px"},attrs:{disabled:t.disabledClassOldCandidate,right:"",variant:"ghtk"},on:{click:t.openModalReferralCandidate}},[a("span",{attrs:{slot:"button-content"},slot:"button-content"},[a("i",{staticClass:"fa fa-qrcode"}),t._v(" Mã cá nhân\n            ")])])],1):t._e()],1)],1)])],1),t._v(" "),a("CandidateTagModal",{attrs:{"record-id":t.curCandidate.id,"tags-candidate":t.curCandidate.tags},on:{attach:t.pushTagToCandidate}}),t._v(" "),a("ModalAddCandidate",{on:{openModalImportData:t.openModalImportData}}),t._v(" "),t.showQr?a("ModalReferralCandidate",{attrs:{referralInfo:t.referralInfo}}):t._e(),t._v(" "),a("ModalImportData",{attrs:{isUploading:t.isUploading,fileExcelCandidateDisabled:t.fileExcelCandidateDisabled},on:{changeFileExcelCandidateDisabled:t.changeFileExcelCandidateDisabled}})],1)},[],!1,ct,"data-v-7e86dd59",null);e.default=dt.exports},"/yc8":function(t,e,a){"use strict";var n=a("JJbb");e.a={getMenuWork:function(t){return n.a.get("ErpStaffWork/getMenuWork",{params:t})},getStatisticWork:function(t){return n.a.get("ErpStaffWork/getStatisticWork",{params:t})},getDataWork:function(t){return n.a.get("ErpStaffWork/getDataWork",{params:t})},staffLog:function(t){return n.a.post("ErpStaffWork/staffLog",t)}}},0:function(t,e){},"04d5":function(t,e){},"0Dxw":function(t,e){},"0Np3":function(t,e){},"0XQL":function(t,e,a){"use strict";var n=a("fZjL"),i=a.n(n),s=a("Zx67"),o=a.n(s),r=a("Zrlr"),l=a.n(r),c=a("wxAW"),d=a.n(c),u=a("zwoO"),h=a.n(u),p=a("Pf15"),m=a.n(p),f=function(t){function e(){return l()(this,e),h()(this,(e.__proto__||o()(e)).apply(this,arguments))}return m()(e,t),d()(e,null,[{key:"getStatusOptions",value:function(){var t=[];return i()(e.statusOptions).forEach(function(a){t.push({desc:e.statusOptions[a],value:a})}),t}},{key:"getStatusName",value:function(t){switch(parseInt(t)){case e.DISABLE_STATUS:return"Đã bị vô hiệu hóa";case e.ACTIVE_STATUS:return"Đang kích hoạt";default:return"Không xác định"}}},{key:"getBriefStatusName",value:function(t){var a=parseInt(t);return isNaN(a)?e.briefStatus[0]:e.briefStatus[a]}},{key:"getBriefStatusClass",value:function(t){switch(parseInt(t)){case 1:return"badge badge-success";case 2:return"badge badge-info";default:return"badge badge-secondary"}}},{key:"getBriefStatusProfileName",value:function(t){return"string"!=typeof t?e.statusOptions.active:e.statusOptions[t]}},{key:"getBriefStatusProfileClass",value:function(t){switch(t){case"active":return"badge badge-success";case"disable":return"badge badge-secondary";case"not_verified":return"badge badge-danger";default:return"badge badge-warning"}}}]),e}(a("MUME").a);f.DISABLE_STATUS="disable",f.ACTIVE_STATUS="active",f.PAUSE_STATUS="pause",f.NOT_VERIFIED_STATUS="not_verified",f.statusOptions={active:"Đang làm việc",disable:"Đã nghỉ việc",pause:"Tạm dừng công việc",not_verified:"Chờ nhận việc"},f.profileStatusOps=[{value:"active",desc:"Đang làm việc"},{value:"disable",desc:"Đã nghỉ việc"},{value:"pause",desc:"Tạm dừng công việc"},{value:"not_verified",desc:"Chờ nhận việc"}],f.briefStatus={0:"Chưa có thông tin",1:"Đã xác nhận",2:"Đã có thông tin"},f.statusCnBConfirm={0:{desc:"Chưa có thông tin",variant:"secondary"},1:{desc:"Đã xác nhận",variant:"success"},2:{desc:"Đã có thông tin",variant:"info"}},f.CnBConfirmOption=[{value:0,desc:"Chưa có thông tin"},{value:1,desc:"Đã xác nhận"},{value:2,desc:"Đã có thông tin"}],e.a=f},"0adn":function(t,e){},"0qbh":function(t,e){},1:function(t,e,a){a("j1ja"),t.exports=a("NHnr")},"1LJd":function(t,e){},"1M/v":function(t,e){},"1N6s":function(t,e){},"1WW8":function(t,e){},"1cl8":function(t,e){},"1qdA":function(t,e){},"1uPn":function(t,e){},2:function(t,e){},"23wW":function(t,e,a){"use strict";var n=a("Dd8w"),i=a.n(n),s=a("qkSh"),o=a("VvlD"),r=a("hC/b"),l=a("NHnr"),c={name:"modal-edit-evaluation",components:{evaluationService:s.a},props:["evaluation","isManagement","criteria","managerCriteria","groupId","evaluatedPermissionExpired","userId","loadingModal"],data:function(){return{optionEvaluation:[{value:"1",text:"Cần cải thiện"},{value:"2",text:"Bình thường"},{value:"3",text:"Đáng khen ngợi"},{value:"4",text:"Quá tuyệt vời"}],appLoading:!1,standardEvaluation:{id:"",honest:"",responsibility:"",disciplinary:"",effective:"",core_values:"",resolve_problem:"",creation:"",descrip:"",user_id:"",start_date:"",end_date:""}}},created:function(){this.setOldData(),this.loadingModal=!1},computed:{isAdd:function(){return null==this.evaluation}},methods:{hideModal:function(){this.$refs.myModalEdit.hide()},editEvaluation:function(){var t=this;this.appLoading=!0;var e={id:this.standardEvaluation.id,honest:this.standardEvaluation.honest,responsibility:this.standardEvaluation.responsibility,disciplinary:this.standardEvaluation.disciplinary,effective:this.standardEvaluation.effective,core_values:this.standardEvaluation.core_values,resolve_problem:this.standardEvaluation.resolve_problem,creation:this.standardEvaluation.creation,work_assign:this.standardEvaluation.work_assign,evaluate_control:this.standardEvaluation.evaluate_control,train_develop:this.standardEvaluation.train_develop,build_collectivity:this.standardEvaluation.build_collectivity,descrip:this.standardEvaluation.descrip,user_id:this.standardEvaluation.user_id,start_date:this.standardEvaluation.start_date,end_date:this.standardEvaluation.end_date};void 0===this.standardEvaluation.user_id&&this.isAdd&&null!==this.userId&&(e.user_id=this.userId),s.a.addEvaluation(e).then(function(e){e.data.success?(r.a.showMessage(e.data.message,"success"),t.updateEvaluation(e.data.data),t.hideModal(),null!==t.userId&&l.eventBus.$emit("updateLogStaff",t.userId)):r.a.showMessage(e.data.message,"warning")}).catch(function(t){console.log(t)}).then(function(){t.appLoading=!1})},setOldData:function(){var t=this.evaluation?this.evaluation:{};this.standardEvaluation=i()({},this.standardEvaluation,{id:t.id?t.id:null,honest:t.honest?t.honest:"2",responsibility:t.responsibility?t.responsibility:"2",disciplinary:t.disciplinary?t.disciplinary:"2",effective:t.effective?t.effective:"2",core_values:t.core_values?t.core_values:"2",resolve_problem:t.resolve_problem?t.resolve_problem:"2",creation:t.creation?t.creation:"2",descrip:t.descrip?t.descrip:"",user_id:t.user_id?t.user_id:this.$route.params.id}),1===parseInt(this.isManagement)&&15!==parseInt(this.groupId)&&(this.standardEvaluation.work_assign=t.work_assign?t.work_assign:"2",this.standardEvaluation.evaluate_control=t.evaluate_control?t.evaluate_control:"2",this.standardEvaluation.train_develop=t.train_develop?t.train_develop:"2",this.standardEvaluation.build_collectivity=t.build_collectivity?t.build_collectivity:"2"),15===parseInt(this.groupId)?(this.standardEvaluation.start_date=null!=this.evaluation?this.evaluation.start_date:o.a.cycleEvaluationForTech().from,this.standardEvaluation.end_date=null!=this.evaluation?this.evaluation.end_date:o.a.cycleEvaluationForTech().to):(this.standardEvaluation.start_date=null!=this.evaluation?this.evaluation.start_date:o.a.daysInCycleEvaluation().from,this.standardEvaluation.end_date=null!=this.evaluation?this.evaluation.end_date:o.a.daysInCycleEvaluation().to)},updateEvaluation:function(){this.$emit("update-evaluation")}}},d=a("XyMi");var u=function(t){a("+ABs"),a("Gymz")},h=Object(d.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-cus"},[a("b-modal",{ref:"myModalEdit",attrs:{size:"lg",id:"modal-edit-evaluation","hide-footer":"",static:""},on:{show:t.setOldData}},[a("i",{directives:[{name:"show",rawName:"v-show",value:t.loadingModal,expression:"loadingModal"}],staticClass:"fas fa-spinner fa-pulse cusSpinner"}),t._v(" "),a("div",{attrs:{slot:"modal-title"},slot:"modal-title"},[t.isAdd?a("span",[t._v("Thêm đánh giá")]):a("span",[t._v("Chỉnh sửa đánh giá")])]),t._v(" "),a("b-container",{directives:[{name:"show",rawName:"v-show",value:!t.loadingModal,expression:"!loadingModal"}],attrs:{fluid:""}},[a("b-row",{staticClass:"mb-1 text-center"},[a("b-col",{attrs:{cols:"6"}},[a("strong",[t._v("Các tiêu chí")])]),t._v(" "),a("b-col",[a("strong",[t._v("Mức độ đánh giá")])])],1),t._v(" "),t._l(t.criteria,function(e,n){return[a("b-row",{key:n,staticClass:"mb-1 margin-top-10"},[a("b-col",{attrs:{cols:"6"}},[a("span",{staticClass:"descrip-cri",attrs:{"data-title":e.descrip}},[t._v(t._s(e.name))]),t._v(":")]),t._v(" "),a("b-col",[a("b-form-select",{attrs:{options:t.optionEvaluation,placeholder:"Chọn mức độ đánh giá"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.editEvaluation.apply(null,arguments)}},model:{value:t.standardEvaluation[e.id],callback:function(a){t.$set(t.standardEvaluation,e.id,a)},expression:"standardEvaluation[cri.id]"}})],1)],1)]}),t._v(" "),a("hr"),t._v(" "),1===t.isManagement&&15!=+t.groupId?a("div",[a("strong",[t._v("Tiêu chí dành cho quản lí")]),t._v(" "),t._l(t.managerCriteria,function(e,n){return[a("b-row",{key:n,staticClass:"mb-1 margin-top-10"},[a("b-col",{attrs:{cols:"6"}},[t._v(t._s(e.name)+":")]),t._v(" "),a("b-col",[a("b-form-select",{attrs:{options:t.optionEvaluation,placeholder:"Chọn mức độ đánh giá"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.editEvaluation.apply(null,arguments)}},model:{value:t.standardEvaluation[e.id],callback:function(a){t.$set(t.standardEvaluation,e.id,a)},expression:"standardEvaluation[cri.id]"}})],1)],1)]})],2):t._e(),t._v(" "),a("b-row",[a("b-col",{staticClass:"col-md-6"},[a("b-form-group",{attrs:{label:"Ngày bắt đầu",id:"input-group-start"}},[a("b-form-input",{attrs:{disabled:!(t.evaluatedPermissionExpired&&t.isAdd),id:"start-date",type:"date"},model:{value:t.standardEvaluation.start_date,callback:function(e){t.$set(t.standardEvaluation,"start_date",e)},expression:"standardEvaluation.start_date"}})],1)],1),t._v(" "),a("b-col",{staticClass:"col-md-6"},[a("b-form-group",{attrs:{label:"Ngày kết thúc",id:"input-group-end"}},[a("b-form-input",{attrs:{disabled:!(t.evaluatedPermissionExpired&&t.isAdd),id:"end-date",type:"date"},model:{value:t.standardEvaluation.end_date,callback:function(e){t.$set(t.standardEvaluation,"end_date",e)},expression:"standardEvaluation.end_date"}})],1)],1)],1),t._v(" "),a("b-row",[a("b-form-group",{staticClass:"col-md-12",attrs:{label:"Nhận xét",id:"input-group-tax-iden-number"}},[a("b-form-input",{attrs:{id:"input-tax-iden-number",placeholder:"Nhập nhận xét đánh giá"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.editEvaluation.apply(null,arguments)}},model:{value:t.standardEvaluation.descrip,callback:function(e){t.$set(t.standardEvaluation,"descrip",e)},expression:"standardEvaluation.descrip"}})],1)],1),t._v(" "),15==+t.groupId?a("b-row",[a("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-guideline",modifiers:{"collapse-guideline":!0}}],staticClass:"guideline"},[t._v("GUIDELINE")]),t._v(" "),a("b-collapse",{staticClass:"mt-2",attrs:{id:"collapse-guideline"}},[a("div",{staticClass:"guideline-detail"},[a("table",{staticClass:"table table-bordered"},[a("thead",{staticClass:"thead-dark"},[a("tr",{staticClass:"text-center"},[a("th",{attrs:{scope:"col"}},[t._v("Point")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Fstar")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("% Hoàn thành mục tiêu")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("1- Cần cải thiện")]),t._v(" "),a("td",[t._v("Không thể hiện")]),t._v(" "),a("td",[t._v("Đạt nhỏ hơn 70% chỉ tiêu/yêu cầu công việc, xuất hiện lỗi/sự cố nằm ngoài phạm vi được\n                  duyệt gây ảnh hưởng lớn đến tài chính/thương hiệu Cty và không xử lý được\n                ")])]),t._v(" "),a("tr",[a("td",[t._v("2- Bình thường")]),t._v(" "),a("td",[t._v("Ít thể hiện/thể hiện chưa rõ")]),t._v(" "),a("td",[t._v("Đạt 70->80% chỉ tiêu/yêu cầu công việc, có xuất hiện lỗi/sự cố nhỏ nằm ngoài\n                  phạm vi\n                  được duyệt, không gây thiệt hạit\n                ")])]),t._v(" "),a("tr",[a("td",[t._v("3- Đáng khen")]),t._v(" "),a("td",[t._v("Luôn luôn thể hiện")]),t._v(" "),a("td",[t._v("Đạt 90->95% chỉ tiêu/yêu cầu công việc, không có lỗi/sự cố nằm ngoài phạm vi\n                  được\n                  duyệt\n                ")])]),t._v(" "),a("tr",[a("td",[t._v("4- Tuyệt vời")]),t._v(" "),a("td",[t._v("Là tấm gương cho người khác học tập")]),t._v(" "),a("td",[t._v("\n                  Đạt >95% chỉ tiêu/yêu cầu công việc trở lên và có những đóng góp vượt trội\n                ")])])])])])])],1):t._e()],2),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.loadingModal,expression:"!loadingModal"}],staticClass:"text-center margin-top-10"},[a("b-button",{attrs:{disabled:t.appLoading,variant:"primary"},on:{click:function(e){return t.editEvaluation()}}},[t._v("Đánh giá"),a("i",{directives:[{name:"show",rawName:"v-show",value:t.appLoading,expression:"appLoading"}],staticClass:"fas fa-spinner fa-pulse"})])],1)],1)],1)},[],!1,u,"data-v-bd078286",null);e.a=h.exports},"2Cim":function(t,e){},"2QYU":function(t,e,a){"use strict";var n={name:"single-select-relation",components:{},props:{value:{},placeholder:{},relationOption:{type:String,default:"household"}},data:function(){return{selected:null,options:{household:[{text:"Chủ hộ",value:"Chủ hộ"},{text:"Vợ",value:"Vợ"},{text:"Chồng",value:"Chồng"},{text:"Bố",value:"Bố"},{text:"Mẹ",value:"Mẹ"},{text:"Em",value:"Em"},{text:"Anh",value:"Anh"},{text:"Chị",value:"Chị"},{text:"Con",value:"Con"},{text:"Cháu",value:"Cháu"},{text:"Ông",value:"Ông"},{text:"Bà",value:"Bà"},{text:"Cô",value:"Cô"},{text:"Dì",value:"Dì"},{text:"Chú",value:"Chú"},{text:"Thím",value:"Thím"},{text:"Bác",value:"Bác"},{text:"Cậu",value:"Cậu"},{text:"Mợ",value:"Mợ"},{text:"Con dâu",value:"Con dâu"},{text:"Con rể",value:"Con rể"},{text:"Chắt",value:"Chắt"},{text:"Bạn bè",value:"Bạn bè"},{text:"Họ hàng",value:"Họ hàng"},{text:"Khác",value:"Khác"}],guardian:[{text:"Ông",value:"Ông"},{text:"Bà",value:"Bà"},{text:"Bố",value:"Bố"},{text:"Mẹ",value:"Mẹ"},{text:"Vợ",value:"Vợ"},{text:"Chồng",value:"Chồng"},{text:"Anh",value:"Anh"},{text:"Chị",value:"Chị"},{text:"Em",value:"Em"},{text:"Bạn bè",value:"Bạn bè"},{text:"Họ hàng",value:"Họ hàng"}]}}},methods:{selectedOption:function(t){if(this.value)return t.value===this.value},onChange:function(t){this.$emit("input",t.target.value)}}},i=a("XyMi"),s=Object(i.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("select",{staticClass:"form-control custom-select",on:{change:t.onChange}},[a("option",{attrs:{value:""}},[t._v(t._s(t.placeholder))]),t._v(" "),t._l(t.options[t.relationOption]||[],function(e,n){return a("option",{key:n,domProps:{value:e.value,selected:t.selectedOption(e)}},[t._v("\n    "+t._s(e.text)+"\n  ")])})],2)},[],!1,null,null,null);e.a=s.exports},3:function(t,e){},"3BrW":function(t,e,a){"use strict";var n=a("RUzx"),i=a.n(n),s=a("xT3c"),o={name:"multi-select-station",components:{Multiselect:i.a},props:{provinceIds:{},stationIds:{},autoClose:{default:!0},hideSelected:{default:!1},limitProp:{default:5},isDisabled:{default:!1},placeholder:{default:"Chọn kho"},reset:{default:!1},listStation:{},isActive:{default:!1},triggerDuplicateChange:{default:!1}},data:function(){return{option:null,options:[]}},created:function(){},watch:{option:function(t,e){this.$emit("input",t),this.emitStation()},stationIds:function(t,e){this.triggerDuplicateChange||this.setList()},triggerDuplicateChange:function(t,e){this.$emit("handleTriggerDuplicateChange",t)},provinceIds:{immediate:!0,handler:function(t,e){this.listStation||this.getList(t),this.option=null}},reset:function(){this.option=null},listStation:{immediate:!0,handler:function(t,e){this.getListById(t),this.option=null}}},methods:{select:function(t){this.$emit("select",t)},remove:function(t){this.$emit("remove",t)},emitStation:function(){this.$emit("handleStationSelected",this.option)},resetOption:function(){this.option=null},setList:function(){var t=this;this.stationIds?(this.option=[],this.stationIds.split(",").forEach(function(e){var a=t.options.find(function(t){return""+t.id===e});a&&t.option.push(a)})):this.option=null},getList:function(t){var e=this;t=t&&t.constructor===Array?t.join():t,s.a.getAllStationByProvinceIds({provinceIds:t,is_active:this.isActive}).then(function(t){t.data.success&&(e.options=t.data.data,e.triggerDuplicateChange=!1,e.setList())}).catch(function(t){console.log(t)})},getListById:function(t){var e=this;t=t&&t.constructor===Array?t.join():t,s.a.getAllStationByIds({stationIds:t,is_active:this.isActive}).then(function(t){t.data.success&&(e.options=t.data.data,e.setList())}).catch(function(t){console.log(t)})}}},r=a("XyMi");var l=function(t){a("pr+G")},c=Object(r.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{attrs:{options:t.options,multiple:!0,placeholder:t.placeholder,label:"name","track-by":"id","selected-label":"","deselect-label":"X","select-label":"",disabled:t.isDisabled,limit:t.limitProp,"hide-selected":t.hideSelected,"close-on-select":t.autoClose},on:{input:function(e){return t.emitStation()},select:t.select,remove:t.remove},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,l,"data-v-5d4b0a66",null);e.a=c.exports},"3f40":function(t,e){},"3m8s":function(t,e,a){"use strict";var n,i=a("Saf8"),s=a("Xxa5"),o=a.n(s),r=a("//Fk"),l=a.n(r),c=a("exGp"),d=a.n(c),u=a("mtWM"),h=a.n(u),p=a("4WGu"),m=a("fEi7"),f=a("vfns"),g=a("R1Q+"),v=this,_=new f.a("local"),b=new f.a("session",!1),y=new URL(p.a.domain),C=new URL(document.referrer||location.origin),w=y.host===C.host,k=0,x=(n=d()(o.a.mark(function t(e){var a,n,i,s,r,c;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e.response,n=a.status,i=a.data,t.t0=n,t.next=400===t.t0?4:401===t.t0?5:402===t.t0?29:404===t.t0?30:405===t.t0?31:419===t.t0?32:500===t.t0?33:34;break;case 4:return t.abrupt("break",35);case 5:if(w){t.next=16;break}if(!(1109===i.code||i.errors&&i.errors.includes(1109))){t.next=9;break}return t.next=9,m.a.refreshToken();case 9:if(!(s=m.a.getToken())||0!==k){t.next=14;break}return++k,e.config.headers.GchatToken=s,t.abrupt("return",h.a.request(e.config));case 14:t.next=28;break;case 16:if((r=b.get("isReload"))&&"false"!==r){t.next=28;break}return _.remove(p.a.oidc.tokenIamStorage),b.set("isReload",!0),c=Object(g.a)(p.a.oidc),t.prev=21,t.next=24,c.run(window.location.href);case 24:t.next=28;break;case 26:t.prev=26,t.t1=t.catch(21);case 28:case 29:case 30:case 31:case 32:case 33:case 34:return t.abrupt("break",35);case 35:return t.abrupt("return",l.a.reject(e));case 36:case"end":return t.stop()}},t,v,[[21,26]])})),function(t){return n.apply(this,arguments)}),S=h.a.create({baseURL:p.a.baseApiHrmPolicyUrl});S.interceptors.request.use(function(t){var e=_.get(p.a.oidc.tokenIamStorage);if(e&&e.accessToken&&(t.headers.Authorization=p.a.bearerKey+" "+e.accessToken.accessToken),!w){var a=m.a.getToken();a&&(t.headers.GchatToken=a)}return t}),S.interceptors.response.use(function(t){return k=0,t},x);var M=S;e.a={getReward:function(t){return i.a.get("fstar-reward/get-data",{params:t})},getPenalty:function(t){return i.a.get("fstar-penalty/get-data",{params:t})},getTypeReward:function(){return i.a.get("fstar-reward/get-type")},getTypePenalty:function(){return i.a.get("fstar-penalty/get-type")},createReward:function(t){return i.a.post("fstar-reward/insert-data",t)},createPenalty:function(t){return i.a.post("fstar-penalty/insert-data",t)},updateReward:function(t){return i.a.post("fstar-reward/update-data",t)},updatePenalty:function(t){return i.a.post("fstar-penalty/update-data",t)},approveReward:function(t){return i.a.post("fstar-reward/approve",t)},deleteReward:function(t){return i.a.post("fstar-reward/delete",t)},cancelReward:function(t){return i.a.post("fstar-reward/reject",t)},cancelPenalty:function(t){return i.a.post("fstar-penalty/cancel",t)},totalReward:function(t){return i.a.get("fstar-reward/count-data",{params:t})},totalPenalty:function(t){return i.a.get("fstar-penalty/count-data",{params:t})},getManagerData:function(t){return i.a.get("fstar/get-manager-data",{params:t})},getUserFSar:function(t){return i.a.get("fstar/get-users",{params:t})},getUserRepresent:function(t){return i.a.get("fstar/get-user-represent",{params:t})},getUserTemp:function(t){return M.get("/fstar/api/get-user-temp",{params:t})},saveUserTemp:function(t){return M.post("/fstar/api/save-user-temp",t)},removeUserTemp:function(t){return M.delete("/fstar/api/remove-user-temp",{params:t})}}},4:function(t,e){},"4+Wp":function(t,e){},"48eD":function(t,e){},"4DgD":function(t,e){},"4OiV":function(t,e){},"4SK9":function(t,e){},"4WGu":function(t,e,a){"use strict";var n=a("Dd8w"),i=a.n(n),s="https://admin.giaohangtietkiem.vn/adm",o={isDev:!1,domain:s},r={clientId:"01GJPEFFBFHNJSZX2RSNTRGYZD",issuer:"https://auth.giaohangtietkiem.vn",redirectUri:s+"/auth/callback",scopes:["openid"],pkce:!0,isAuthzBackground:!1,authnUrl:"https://id.giaohangtietkiem.vn",tokenIamStorage:"ghtk-token-storage",tokenSessionStorage:"ecom-session-token"},l={authDomain:"https://chat.ghtk.vn",authStorage:"gchat_auth"},c={baseUrl:"/adm",domainDownloadFile:"https://cache.giaohangtietkiem.vn/",baseApiUrl:"https://admin.giaohangtietkiem.vn/admin/",baseApiReportUrl:"/report/",baseApiErpUrl:"https://admin.giaohangtietkiem.vn/erp/",baseApiG3PLUrl:"/admin/G3PL/",baseApiHrmNewUrl:"https://hrm-api.ghtk.vn/erp/",baseApiKpiNewUrl:"https://kpi-api.ghtk.vn",baseApiKpiSalaryUrl:"https://kpi-salary.ghtk.vn",baseApiHrmUniUrl:"https://hrm-uni.ghtk.vn",baseApiHrmPolicyUrl:"https://hrm-policy.ghtk.vn",baseApiInterUrl:"https://inter.ghtk.vn/api/",baseApiNewBagUrl:"https://new-bag.ghtk.vn/",bearerKeyEcom:"BearerKpi",bearerKey:"Bearer",gchatDomain:"https://ghtk.me",domainGhtkAdmin:"https://admin.giaohangtietkiem.vn",domainHrmFe:"https://hrm.ghtk.vn",domainDas2Fe:"https://das2.ghtk.vn",domainHrmTicket:"https://hrm-ticket.ghtk.vn",domainQLTSFe:"https://qlts.ghtk.vn",domainApiQLTS:"https://qlts-be.ghtk.vn",domainApiHrm:"https://hrm-api.ghtk.vn",domainApiHrmPolicy:"https://hrm-policy.ghtk.vn",limitPostMessageKey:"limitPostMessage",defaultLimitPostMessage:1,timeLockPostMessage:3e3};c=i()({},c,o,{oidc:i()({},r),gchat:l,cacheKey:{isLoginOnGchat:"isLoginOnGchat",callbackRefererPath:"callbackRefererPath"}}),e.a=c},"4pAE":function(t,e,a){"use strict";var n,i=a("Xxa5"),s=a.n(i),o=a("//Fk"),r=a.n(o),l=a("exGp"),c=a.n(l),d=a("mtWM"),u=a.n(d),h=a("4WGu"),p=a("fEi7"),m=a("hC/b"),f=a("vfns"),g=a("R1Q+"),v=this,_=new f.a("local"),b=new f.a("session",!1),y=!m.a.isInIframe(),C=0,w=(n=c()(s.a.mark(function t(e){var a,n,i,o,l,c;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e.response,n=a.status,i=a.data,t.t0=n,t.next=400===t.t0?4:401===t.t0?5:402===t.t0?29:404===t.t0?30:405===t.t0?31:419===t.t0?32:500===t.t0?33:34;break;case 4:return t.abrupt("break",35);case 5:if(y){t.next=16;break}if(!(1109===i.code||i.errors&&i.errors.includes(1109))){t.next=9;break}return t.next=9,p.a.refreshToken();case 9:if(!(o=p.a.getToken())||0!==C){t.next=14;break}return++C,e.config.headers.GchatToken=o,t.abrupt("return",u.a.request(e.config));case 14:t.next=28;break;case 16:if((l=b.get("isReload"))&&"false"!==l){t.next=28;break}return _.remove(h.a.oidc.tokenIamStorage),b.set("isReload",!0),c=Object(g.a)(h.a.oidc),t.prev=21,t.next=24,c.run(window.location.href);case 24:t.next=28;break;case 26:t.prev=26,t.t1=t.catch(21);case 28:case 29:case 30:case 31:case 32:case 33:case 34:return t.abrupt("break",35);case 35:return t.abrupt("return",r.a.reject(e));case 36:case"end":return t.stop()}},t,v,[[21,26]])})),function(t){return n.apply(this,arguments)}),k=u.a.create({baseURL:h.a.baseApiHrmUniUrl});k.interceptors.request.use(function(t){var e=_.get(h.a.oidc.tokenIamStorage);if(e&&e.accessToken&&(t.headers.Authorization=h.a.bearerKey+" "+e.accessToken.accessToken),!y){var a=p.a.getToken();a&&(t.headers.GchatToken=a)}return t}),k.interceptors.response.use(function(t){return C=0,t},w),e.a=k},"4qOc":function(t,e){},"4yWF":function(t,e){},"4zEa":function(t,e,a){"use strict";(function(t){var n=a("mvHQ"),i=a.n(n),s=a("pFYg"),o=a.n(s),r=a("Xxa5"),l=a.n(r),c=a("exGp"),d=a.n(c),u=a("woOf"),h=a.n(u),p=a("fZjL"),m=a.n(p),f=a("xH6Y");e.a={name:"vue-simple-suggest",inheritAttrs:!1,model:{prop:"value",event:"input"},props:{styles:{type:Object,default:function(){return{}}},controls:{type:Object,default:function(){return f.a}},minLength:{type:Number,default:1},maxSuggestions:{type:Number,default:10},displayAttribute:{type:String,default:"title"},valueAttribute:{type:String,default:"id"},list:{type:[Function,Array],default:function(){return[]}},removeList:{type:Boolean,default:!1},destyled:{type:Boolean,default:!1},filterByQuery:{type:Boolean,default:!1},filter:{type:Function,default:function(t,e){return!e||~this.displayProperty(t).toLowerCase().indexOf(e.toLowerCase())}},debounce:{type:Number,default:0},nullableSelect:{type:Boolean,default:!1},value:{},mode:{type:String,default:"input",validator:function(t){return!!~m()(f.e).indexOf(t.toLowerCase())}},preventHide:{type:Boolean,default:!1}},watch:{mode:{handler:function(t,e){var a=this;this.constructor.options.model.event=t,this.$parent&&this.$parent.$forceUpdate(),this.$nextTick(function(){"input"===t?a.$emit("input",a.text):a.$emit("select",a.selected)})},immediate:!0},value:{handler:function(t){"string"!=typeof t&&(t=this.displayProperty(t)),this.updateTextOutside(t)},immediate:!0}},data:function(){return{selected:null,hovered:null,suggestions:[],listShown:!1,inputElement:null,canSend:!0,timeoutInstance:null,text:this.value,isPlainSuggestion:!1,isClicking:!1,isInFocus:!1,isFalseFocus:!1,isTabbed:!1,controlScheme:{},listId:this._uid+"-suggestions"}},computed:{listIsRequest:function(){return"function"==typeof this.list},inputIsComponent:function(){return this.$slots.default&&this.$slots.default.length>0&&!!this.$slots.default[0].componentInstance},input:function(){return this.inputIsComponent?this.$slots.default[0].componentInstance:this.inputElement},on:function(){return this.inputIsComponent?"$on":"addEventListener"},off:function(){return this.inputIsComponent?"$off":"removeEventListener"},hoveredIndex:function(){for(var t=0;t<this.suggestions.length;t++){var e=this.suggestions[t];if(this.hovered&&this.valueProperty(this.hovered)==this.valueProperty(e))return t}return-1},textLength:function(){return this.text&&this.text.length||this.inputElement.value.length||0},isSelectedUpToDate:function(){return!!this.selected&&this.displayProperty(this.selected)===this.text}},created:function(){this.controlScheme=h()({},f.a,this.controls)},mounted:function(){var t=this;return d()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$slots.default;case 2:t.$nextTick(function(){t.inputElement=t.$refs.inputSlot.querySelector("input"),t.inputElement?(t.setInputAriaAttributes(),t.prepareEventHandlers(!0)):console.error("No input element found")});case 3:case"end":return e.stop()}},e,t)}))()},beforeDestroy:function(){this.prepareEventHandlers(!1)},methods:{isEqual:function(t,e){return e&&this.valueProperty(t)==this.valueProperty(e)},isSelected:function(t){return this.isEqual(t,this.selected)},isHovered:function(t){return this.isEqual(t,this.hovered)},setInputAriaAttributes:function(){this.inputElement.setAttribute("aria-activedescendant",""),this.inputElement.setAttribute("aria-autocomplete","list"),this.inputElement.setAttribute("aria-controls",this.listId)},prepareEventHandlers:function(t){var e=this[t?"on":"off"],a={click:this.showSuggestions,keydown:this.onKeyDown,keyup:this.onListKeyUp},n=h()({blur:this.onBlur,focus:this.onFocus,input:this.onInput},a);for(var i in n)this.input[e](i,n[i]);var s=t?"addEventListener":"removeEventListener";for(var o in a)this.inputElement[s](o,a[o])},isScopedSlotEmpty:function(t){if(t){var e=t(this);return!(Array.isArray(e)||e&&(e.tag||e.context||e.text||e.children))}return!0},miscSlotsAreEmpty:function(){var t=this,e=["misc-item-above","misc-item-below"].map(function(e){return t.$scopedSlots[e]});if(e.every(function(t){return!!t}))return e.every(this.isScopedSlotEmpty.bind(this));var a=e.find(function(t){return!!t});return this.isScopedSlotEmpty.call(this,a)},getPropertyByAttribute:function(t,e){return this.isPlainSuggestion?t:void 0!==(void 0===t?"undefined":o()(t))?Object(f.b)(t,e):t},displayProperty:function(e){if(this.isPlainSuggestion)return e;var a=this.getPropertyByAttribute(e,this.displayAttribute);return void 0===a&&(a=i()(e),t&&~"production".indexOf("dev")&&console.warn("[vue-simple-suggest]: Please, provide `display-attribute` as a key or a dotted path for a property from your object.")),String(a||"")},valueProperty:function(t){if(this.isPlainSuggestion)return t;var e=this.getPropertyByAttribute(t,this.valueAttribute);return void 0===e&&console.error("[vue-simple-suggest]: Please, check if you passed 'value-attribute' (default is 'id') and 'display-attribute' (default is 'title') props correctly.\n        Your list objects should always contain a unique identifier."),e},autocompleteText:function(t){this.setText(this.displayProperty(t))},setText:function(t){var e=this;this.$nextTick(function(){e.inputElement.value=t,e.text=t,e.$emit("input",t)})},select:function(t){(this.selected!==t||this.nullableSelect&&!t)&&(this.selected=t,this.$emit("select",t),t&&this.autocompleteText(t)),this.hover(null)},hover:function(t,e){var a=t?this.getId(t,this.hoveredIndex):"";this.inputElement.setAttribute("aria-activedescendant",a),t&&t!==this.hovered&&this.$emit("hover",t,e),this.hovered=t},hideList:function(){this.listShown&&(this.listShown=!1,this.hover(null),this.$emit("hide-list"))},showList:function(){this.listShown||this.textLength>=this.minLength&&(this.suggestions.length>0||!this.miscSlotsAreEmpty())&&(this.listShown=!0,this.$emit("show-list"))},showSuggestions:function(){var t=this;return d()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0===t.suggestions.length&&t.minLength<=t.textLength)){e.next=4;break}return t.showList(),e.next=4,t.research();case 4:t.showList();case 5:case"end":return e.stop()}},e,t)}))()},onShowList:function(t){Object(f.c)(this.controlScheme.showList,t)&&this.showSuggestions()},moveSelection:function(t){if(this.listShown&&this.suggestions.length&&Object(f.c)([this.controlScheme.selectionUp,this.controlScheme.selectionDown],t)){t.preventDefault();var e=Object(f.c)(this.controlScheme.selectionDown,t),a=2*e-1,n=e?0:this.suggestions.length-1,i=e?this.hoveredIndex<this.suggestions.length-1:this.hoveredIndex>0,s=null;s=this.hovered?i?this.suggestions[this.hoveredIndex+a]:this.suggestions[n]:this.selected||this.suggestions[n],this.hover(s)}},onKeyDown:function(t){var e=this.controlScheme.select,a=this.controlScheme.hideList;"Enter"===t.key&&this.listShown&&Object(f.d)([e,a],13)&&t.preventDefault(),"Tab"===t.key&&this.hovered&&this.select(this.hovered),this.onShowList(t),this.moveSelection(t),this.onAutocomplete(t)},onListKeyUp:function(t){var e=this.controlScheme.select,a=this.controlScheme.hideList;this.listShown&&Object(f.c)([e,a],t)&&(t.preventDefault(),Object(f.c)(e,t)&&this.select(this.hovered),this.hideList())},onAutocomplete:function(t){Object(f.c)(this.controlScheme.autocomplete,t)&&(t.ctrlKey||t.shiftKey)&&this.suggestions.length>0&&this.suggestions[0]&&this.listShown&&(t.preventDefault(),this.hover(this.suggestions[0]),this.autocompleteText(this.suggestions[0]))},suggestionClick:function(t,e){var a=this;this.$emit("suggestion-click",t,e),this.select(t),this.preventHide||this.hideList(),this.isClicking&&setTimeout(function(){a.inputElement.focus(),a.isClicking=!1},0)},onBlur:function(t){this.isInFocus?(this.isClicking=this.hovered&&!this.isTabbed,this.isClicking?t&&t.isTrusted&&!this.isTabbed&&(this.isFalseFocus=!0):(this.isInFocus=!1,this.hideList(),this.$emit("blur",t))):(this.inputElement.blur(),console.error("This should never happen!\n          If you encountered this error, please make sure that your input component emits 'focus' events properly.\n          For more info see https://github.com/KazanExpress/vue-simple-suggest#custom-input.\n\n          If your 'vue-simple-suggest' setup does not include a custom input component - please,\n          report to https://github.com/KazanExpress/vue-simple-suggest/issues/new")),this.isTabbed=!1},onFocus:function(t){this.isInFocus=!0,t&&!this.isFalseFocus&&this.$emit("focus",t),this.isClicking||this.isFalseFocus||this.showSuggestions(),this.isFalseFocus=!1},onInput:function(t){var e=t.target?t.target.value:t;this.updateTextOutside(e),this.$emit("input",e)},updateTextOutside:function(t){this.text!==t&&(this.text=t,this.hovered&&this.hover(null),this.text.length<this.minLength?this.hideList():this.debounce?(clearTimeout(this.timeoutInstance),this.timeoutInstance=setTimeout(this.research,this.debounce)):this.research())},research:function(){var t=this;return d()(l.a.mark(function e(){var a,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.canSend){e.next=8;break}return t.canSend=!1,a=t.text,e.next=6,t.getSuggestions(t.text);case 6:n=e.sent,a===t.text&&t.$set(t,"suggestions",n);case 8:e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(0),t.clearSuggestions(),e.t0;case 14:return e.prev=14,t.canSend=!0,0===t.suggestions.length&&t.miscSlotsAreEmpty()?t.hideList():t.isInFocus&&t.showList(),e.abrupt("return",t.suggestions);case 19:case"end":return e.stop()}},e,t,[[0,10,14,19]])}))()},getSuggestions:function(t){var e=this;return d()(l.a.mark(function a(){var n,i;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!((t=t||"").length<e.minLength)){a.next=3;break}return a.abrupt("return",[]);case 3:if(e.selected=null,e.listIsRequest&&e.$emit("request-start",t),n=!1,i=[],a.prev=7,!e.listIsRequest){a.next=17;break}return a.next=11,e.list(t);case 11:if(a.t0=a.sent,a.t0){a.next=14;break}a.t0=[];case 14:i=a.t0,a.next=18;break;case 17:i=e.list;case 18:Array.isArray(i)||(i=[i]),n="object"!==o()(i[0])&&void 0!==i[0]||Array.isArray(i[0]),e.filterByQuery&&(i=i.filter(function(a){return e.filter(a,t)})),e.listIsRequest&&e.$emit("request-done",i),a.next=31;break;case 24:if(a.prev=24,a.t1=a.catch(7),!e.listIsRequest){a.next=30;break}e.$emit("request-failed",a.t1),a.next=31;break;case 30:throw a.t1;case 31:return a.prev=31,e.maxSuggestions&&i.splice(e.maxSuggestions),e.isPlainSuggestion=n,a.abrupt("return",i);case 36:case"end":return a.stop()}},a,e,[[7,24,31,36]])}))()},clearSuggestions:function(){this.suggestions.splice(0)},getId:function(t,e){return this.listId+"-suggestion-"+(this.isPlainSuggestion?e:this.valueProperty(t)||e)}}}}).call(e,a("W2nU"))},5:function(t,e){},"5/1o":function(t,e){},"5/cN":function(t,e){},"5/fO":function(t,e){},"51RP":function(t,e){},"5H57":function(t,e,a){"use strict";var n=a("RUzx"),i=a.n(n),s=a("0XQL"),o={name:"select-profile-status",props:{status:{type:String,default:null},autoClose:{default:!0},hideSelect:{default:!0},placeholder:{default:"Chọn trạng thái"},multiple:{default:!1,type:Boolean},state:{type:Boolean,default:null}},components:{Multiselect:i.a},data:function(){return{option:null,options:s.a.getStatusOptions()}},watch:{status:{immediate:!0,handler:function(t,e){t?this.set():this.option=null}}},methods:{set:function(){var t=this;if(this.multiple){var e=this.status.split(",");this.option=this.options.filter(function(t){return e.includes(t.value)})}else{var a=this.options.find(function(e){return e.value===t.status});this.option=a||null}}}},r=a("XyMi");var l=function(t){a("PMWW")},c=Object(r.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("multiselect",{staticClass:"multiselect-primary",class:{stateTrue:!0===t.state,stateFalse:0==t.state},attrs:{options:t.options,multiple:t.multiple,placeholder:t.placeholder,label:"desc","track-by":"value",selectedLabel:"",deselectLabel:"X",selectLabel:"","hide-selected":t.hideSelect,"close-on-select":t.autoClose},on:{input:function(e){t.$emit("change",e)},select:function(e){t.$emit("select",e)}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])],1)},[],!1,l,"data-v-330b62dd",null);e.a=c.exports},"5JuN":function(t,e,a){"use strict";var n=a("zN+w"),i=a("NHnr"),s={name:"menu-work",props:{collapseOnChange:{default:!1,type:Boolean},listWork:{default:function(t){return{}},type:Object},hideMode:{default:!0,type:Boolean}},data:function(t){return{menuIsShowing:!0,menuExpand:{},routerLinks:{recruitment:"/staff-work/recruitment",staff_work:"/staff-work/works",take_care:"/staff-work/take-care",driverx:"/staff-work/driverx",staff_onboard:"/staff-work/onboard",contract_sign:"/staff-work/contracts",checkin_manager:"/staff-work/checkin",deposit:"/staff-work/deposit",f_star:"/staff-work/f-star",master_profile:"/staff-work/master-profile",off_work:"/staff-work/stop-working",closing_shift:"/staff-work/closing-shift",training_class:"/staff-work/classes",post_dashboard:"/staff-work/station-operation",hub_dashboard:"/staff-work/hubs",must_handle:"/staff-work/must-handle",staff_resign:"/staff-work/staff-resign",staff_management:"/staff-work/staff-management",staff_management_by_level:"/staff-work/staff-management",staff_support:"/staff-work/staff-support"}}},methods:{focusHrWork:function(){n.a.sendMessage({type:"status_iframe",payload:{is_focus:!0}},null)},generateBtnWorkClass:function(t){var e="menu-item text-left";return"closing_shift"===t&&(e="menu-item menu-item--staff-shift"),e},changeCollapse:function(){this.menuIsShowing=!this.menuIsShowing,i.eventBus.$emit("changeCollapseWork",this.menuIsShowing)}}},o=a("XyMi");var r=function(t){a("r/1a")},l=Object(o.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.menuIsShowing?"menu_work":"menu_work menu_work--hide",on:{click:function(e){return e.preventDefault(),t.focusHrWork()}}},[a("div",{staticClass:"bg-white sidebar"},[a("div",{staticClass:"sidebar-header py-2"},[a("b-btn",{staticClass:"collapse-btn",attrs:{variant:"outline-light",title:t.menuIsShowing?"Thu gọn":"Mở rộng"},on:{click:function(e){return e.preventDefault(),t.changeCollapse()}}},[a("i",{staticClass:"fas fa-bars"})]),t._v(" "),a("h4",{staticClass:"py-2 text-center mb-0 ml-3 sidebar-title"},[t._v("Quản lý công việc")])],1),t._v(" "),t.listWork?a("div",{staticClass:"sidebar-menu"},t._l(t.listWork||{},function(e,n){return a("router-link",{key:n,class:t.generateBtnWorkClass(n),attrs:{to:{path:t.routerLinks[n]}}},[t._v("\n        "+t._s(e.desc)+"\n      ")])}),1):t._e()])])},[],!1,r,"data-v-ffbc7ad2",null);e.a=l.exports},"5ajp":function(t,e){},"5g/Z":function(t,e){},"5g7j":function(t,e){},"5k9y":function(t,e,a){"use strict";var n=a("mvHQ"),i=a.n(n),s=a("RUzx"),o=a.n(s),r=a("s5Jn"),l={name:"multi-select-worktype",components:{Multiselect:o.a},props:{positionCustom:{},workTypeId:{},isDisabled:{type:Boolean},customClass:{type:String,default:""},customMultiselectClass:{type:String,default:""},placeholder:{type:String,default:"Chọn kiểu nhân viên"},listPosition:{},screenDeposit:!1,appendGroupType:{default:!1},triggerDuplicateChange:{default:!1}},data:function(){return{option:null,options:[],triggerDuplicate:!1}},created:function(){this.getListWorkType()},watch:{positionCustom:function(t,e){t?this.getListWorkType(t):(this.options=[],this.option=[])},option:function(t,e){this.$emit("handleSelectedWorkType",t)},triggerDuplicateChange:function(t,e){this.triggerDuplicate=this.triggerDuplicateChange},workTypeId:function(t,e){this.triggerDuplicate||(t?this.setSelectedOption():this.option=[])},listPosition:function(t,e){t&&this.getListWorkType()}},methods:{setSelectedOption:function(){var t=this;this.option=[],this.options.length>0&&this.workTypeId&&this.workTypeId.split(",").forEach(function(e){t.options.forEach(function(a){""+a.id===e&&t.option.push(a)})})},getListWorkType:function(){var t=this;if(!this.positionCustom&&sessionStorage.getItem("allWorkTypeUser")&&this.screenDeposit)return this.options=JSON.parse(sessionStorage.getItem("allWorkTypeUser")),this.$emit("handleTriggerDuplicateChange",!1),this.triggerDuplicate=!1,this.listPosition&&this.setListOption(this.listPosition),void this.setSelectedOption();var e={position:this.positionCustom,screenDeposit:this.screenDeposit,append_group_type:this.appendGroupType};r.a.getListWorkType(e).then(function(e){t.triggerDuplicate=!1,e.data.success?(t.options=e.data.data,t.$emit("handleTriggerDuplicateChange",!1),t.workTypeId&&t.setSelectedOption(),t.positionCustom||sessionStorage.setItem("allWorkTypeUser",i()(t.options)),t.listPosition&&t.setListOption(t.listPosition)):t.option=[]}).catch(function(t){console.log(t)})},setListOption:function(t){if(t&&this.workTypeId)try{this.options=this.options.filter(function(e){var a=t.split(",").filter(function(t){return!!e.position_ids.includes(parseInt(t))||(!!e.position_ids.includes(t)||void 0)});if(a||a.length>0)return!0}),this.setSelectedOption()}catch(t){console.log(t)}}}},c=a("XyMi"),d=Object(c.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.customClass},[a("multiselect",{class:t.customMultiselectClass,attrs:{options:t.options,disabled:t.isDisabled,multiple:!0,label:"work_type_description",placeholder:t.placeholder,"track-by":"id",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn",searchable:!0},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])],1)},[],!1,null,null,null);e.a=d.exports},"5s6c":function(t,e){},"5vjp":function(t,e,a){"use strict";var n=a("agCp"),i=a("RUzx"),s={name:"single-select-module",components:{Multiselect:a.n(i).a},props:{stationId:{},moduleId:{},isDisabled:{type:Boolean},customClass:{default:"mb-4"}},data:function(){return{option:null,options:[]}},created:function(){this.stationId&&this.getModuleByStation()},watch:{option:function(t,e){this.$emit("handleSelectedModule",t)},stationId:function(t,e){t&&this.getModuleByStation()},moduleId:function(t,e){t?this.setSelectedOption():this.option=null}},methods:{getModuleByStation:function(){var t=this,e={station_id:this.stationId};n.a.getModuleByStation(e).then(function(e){e.data.success&&(t.options=e.data.data,t.moduleId&&t.setSelectedOption())}).catch(function(t){console.log(t)})},setSelectedOption:function(){var t=this;this.options.length>0&&this.moduleId&&(this.option=this.options.find(function(e){return e.id===t.moduleId}))}}},o=a("XyMi"),r=Object(o.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.customClass||""},[a("multiselect",{attrs:{options:t.options,disabled:t.isDisabled,placeholder:"Chọn module",label:"name","track-by":"name",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn"},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v("Chọn module")])])],1)},[],!1,null,null,null);e.a=r.exports},6:function(t,e){},"69Je":function(t,e){},"6EiC":function(t,e){},"6aA6":function(t,e){},"6hNn":function(t,e){},"6tFF":function(t,e,a){"use strict";var n=a("Xxa5"),i=a.n(n),s=a("exGp"),o=a.n(s),r=a("PJh5"),l=a.n(r),c=(a("N1kN"),a("EAZf")),d=a.n(c),u=a("7+uW"),h=a("4WGu"),p=a("7zFw"),m=a("hC/b");u.default.use(d.a);var f={components:{Viewer:d.a},props:{document:{}},data:function(){return{showImage:!0,isViewIdentify:!1,loadingAction:null}},computed:{helper:function(){return m.a}},mounted:function(){},methods:{imageSrc:function(t){return 58==+this.document.document_id?"https://cache.giaohangtietkiem.vn/d/6dfaffd8b31844a380c72b9a191894e5.png":(this.checkPdf(t)&&(t=h.a.baseUrl+"/static/img/pdf.png"),t)},openFile:function(t){var e=this;return o()(i.a.mark(function a(){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!t){a.next=4;break}return a.next=3,e.viewIdentify(t);case 3:e.document.url&&Array.isArray(e.document.url)&&e.document.url.forEach(function(e){e&&e.includes(t)&&window.open(e,"_blank")});case 4:case"end":return a.stop()}},a,e)}))()},openNotImageFile:function(t){window.open(t,"_blank")},checkImage:function(t){return null!=t.match(/^http[^\?]*.(jpg|jpeg|gif|png|tiff|bmp)(\?(.*))?$/gim)},checkPdf:function(t){return null!=t.match(/\.(pdf|PDF)$/)},viewIdentify:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"identify";return o()(i.a.mark(function a(){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!t.isViewIdentify){a.next=2;break}return a.abrupt("return");case 2:return t.loadingAction=e,console.log(t.document),a.next=6,p.a.realDocument(t.document).then(function(e){e.data.success?(t.showImage=!1,t.document.url=e.data.data||t.document.url,t.showImage=!0,t.isViewIdentify=!0):m.a.showMessage(e.data.message||"Lấy ảnh nét thất bại!")}).catch(function(t){m.a.showMessage(t.message||"Lỗi xảy ra, vui lòng liên hệ IT để được hỗ trợ!","error")});case 6:t.loadingAction=null;case 7:case"end":return a.stop()}},a,t)}))()}},filters:{dateFormated:function(t){return l()(t).format("DD/MM/YYYY")}},watch:{}},g=a("XyMi");var v=function(t){a("6hNn"),a("cA8J")},_=Object(g.a)(f,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("div",{staticClass:"mb-1 image-wrap"},[a("b-carousel",{directives:[{name:"viewer",rawName:"v-viewer"}],ref:"profileDocsSlide",staticClass:"document-carousel-custom",staticStyle:{"text-shadow":"1px 1px 2px #333",height:"180px",border:"1px solid #ddd"},attrs:{background:"#ababab",interval:4e4,controls:!0,indicators:!0}},t._l(t.document.url,function(e,n){return t.showImage?a("b-carousel-slide",{key:"slide-"+n,scopedSlots:t._u([t.checkImage(e)?{key:"img",fn:function(){return[a("img",{staticClass:"w-100",attrs:{src:t.imageSrc(e),alt:t.document.document_name}})]},proxy:!0}:{key:"img",fn:function(){return[a("img",{staticClass:"w-100 cursor-pointer",attrs:{src:t.imageSrc(e),alt:t.document.document_name,onerror:"this.src='https://admin.giaohangtietkiem.vn/adm/static/img/pdf.png'"},on:{click:function(a){return t.openNotImageFile(e)}}})]},proxy:!0}],null,!0)}):t._e()}),1),t._v(" "),a("div",[58===t.document.document_id?a("b-button-group",{staticClass:"btn-block mt-1 mb-1",attrs:{size:"sm"}},[a("b-button",{staticClass:"mt-0 ghtk-color",attrs:{block:"",variant:"light rounded-0"},on:{click:function(e){return t.openFile(".mp4")}}},[".mp4"===t.loadingAction?a("span",[a("i",{staticClass:"fas fa-spinner fa-pulse text-success ml-auto mr-1"})]):a("span",[a("i",{staticClass:"fa fa-video"}),t._v(" Xem video\n              ")])]),t._v(" "),a("b-button",{staticClass:"mt-0 ghtk-color",attrs:{block:"",variant:"light rounded-0"},on:{click:function(e){return t.openFile(".pdf")}}},[".pdf"===t.loadingAction?a("span",[a("i",{staticClass:"fas fa-spinner fa-pulse text-success ml-auto mr-1"})]):a("span",[a("i",{staticClass:"fa fa-file-pdf-o"}),t._v(" Xem file\n              ")])])],1):a("b-button-group",{staticClass:"btn-block mt-1 mb-1",attrs:{size:"sm"}},[a("b-button",{staticClass:"mt-0 ghtk-color",attrs:{block:"",variant:"light rounded-0"},on:{click:function(e){return t.viewIdentify("identify")}}},["identify"===t.loadingAction?a("span",[a("i",{staticClass:"fas fa-spinner fa-pulse text-success ml-auto mr-1"})]):a("span",[a("i",{staticClass:"fa fa-eye"}),t._v(" Lấy ảnh nét\n            ")])])],1)],1)],1)])])},[],!1,v,"data-v-818236c2",null);e.a=_.exports},"7BWE":function(t,e){},"7FTm":function(t,e,a){"use strict";var n=a("Zx67"),i=a.n(n),s=a("Zrlr"),o=a.n(s),r=a("wxAW"),l=a.n(r),c=a("zwoO"),d=a.n(c),u=a("Pf15"),h=a.n(u),p=function(t){function e(){return o()(this,e),d()(this,(e.__proto__||i()(e)).apply(this,arguments))}return h()(e,t),l()(e,null,[{key:"getTagByOrderType",value:function(t){switch(t=parseInt(t)){case this.orderType.change_image_ekyc.id:return{value:this.orderType.change_image_ekyc.alias,name:"Chưa duyệt ảnh chụp lại",style:{"background-color":"#DDC52F",color:"white"}};case this.orderType.confirm_staff_ekyc.id:return{value:this.orderType.confirm_staff_ekyc.alias,name:"Xác nhận nhân viên",style:{"background-color":"#DDC52F",color:"white"}};case this.orderType.update_identity_card_ekyc.id:return{value:this.orderType.update_identity_card_ekyc.alias,name:"Cập nhật CCCD",style:{"background-color":"#DDC52F",color:"white"}};default:return null}}}]),e}(a("MUME").a);p.CHO_DUYET_STATUS="cho_duyet",p.PENDING_STATUS="cho_duyet",p.statusDesc={cho_duyet:{desc:"Chờ duyệt",variant:"dark"},tu_choi:{desc:"Từ chối",variant:"danger"},thieu_ho_so:{desc:"Thiếu hồ sơ",variant:"warning"},da_duyet_leader:{desc:"Leader khu vực đã duyệt",variant:"primary"},da_duyet:{desc:"Đã hoàn thành",variant:"ghtk"},co_ket_qua:{desc:"Đã bàn giao/thanh toán",variant:"info"},nhan_ket_qua:{desc:"Đã nhận bàn giao/thanh toán",variant:"secondary"},da_duyet_supervisor:{desc:"Quản lý trực tiếp đã duyệt",variant:"info"},hoan_thanh:{desc:"Đã hoàn thành",variant:"ghtk"},da_huy:{desc:"Đã hủy",variant:"dark"}},p.statusOptions=[{value:"cho_duyet",desc:"Chờ duyệt"},{value:"da_duyet",desc:"Đã duyệt"},{value:"hoan_thanh",desc:"Đã Hoàn thành"},{value:"tu_choi",desc:"Từ chối"},{value:"da_huy",desc:"Đã hủy"},{value:"chua_ky",desc:"Chưa ký HĐ"},{value:"da_duyet_supervisor",desc:"Quản lý trực tiếp đã duyệt"},{value:"da_duyet_leader",desc:"Leader khu vực đã duyệt"},{value:"thieu_ho_so",desc:"Thiếu hồ sơ"},{value:"co_ket_qua",desc:"Đã bàn giao/thanh toán"},{value:"nhan_ket_qua",desc:"Đã nhận bàn giao/thanh toán"}],p.flowAction={CnB:{cho_duyet:[{action:"duyet",variant:"outline-ghtk",text:"Duyệt"},{action:"tu_choi",variant:"outline-danger"},{action:"thieu_ho_so",variant:"outline-warning",order_group:["supply_bhxh","supply_bhyt","regime","stop_working","modify"]}],tu_choi:[],thieu_ho_so:[{action:"duyet",variant:"outline-ghtk",text:"Duyệt"},{action:"tu_choi",variant:"outline-danger"}],da_duyet_leader:[{action:"duyet",variant:"outline-ghtk",text:"Duyệt"},{action:"thieu_ho_so",variant:"outline-warning",order_group:["supply_bhxh","supply_bhyt","regime","stop_working","modify"]},{action:"tu_choi",variant:"outline-danger"}],da_duyet_supervisor:[{action:"duyet",variant:"outline-ghtk",text:"Duyệt"},{action:"thieu_ho_so",variant:"outline-warning",order_group:["supply_bhxh","supply_bhyt","regime","stop_working","modify"]},{action:"tu_choi",variant:"outline-danger"}],da_duyet:[{action:"ban_giao",variant:"outline-ghtk",text:"Đã bàn giao/thanh toán",order_group:["supply_bhxh","supply_bhyt"]}]},Leader:{cho_duyet:[{action:"duyet",variant:"outline-ghtk",text:"Duyệt"},{action:"tu_choi",variant:"outline-danger"},{action:"thieu_ho_so",variant:"outline-warning",order_group:["supply_bhxh","supply_bhyt","regime","stop_working","modify"]}],tu_choi:[{action:"thieu_ho_so",variant:"outline-warning",order_group:["supply_bhxh","supply_bhyt","regime","stop_working","modify"]}],thieu_ho_so:[{action:"duyet",variant:"outline-ghtk",text:"Duyệt"},{action:"tu_choi",variant:"outline-danger"}],da_duyet_leader:[{action:"duyet",variant:"outline-ghtk",text:"Duyệt",order_group:["stop_working","user_info"]},{action:"thieu_ho_so",variant:"outline-warning",order_group:["supply_bhxh","supply_bhyt","regime","stop_working","modify"]},{action:"tu_choi",variant:"outline-danger"}],da_duyet_supervisor:[{action:"duyet",variant:"outline-ghtk",text:"Duyệt",order_group:["contract"]},{action:"thieu_ho_so",variant:"outline-warning",order_group:["supply_bhxh","supply_bhyt","regime","stop_working","modify"]},{action:"tu_choi",variant:"outline-danger",order_group:["contract"]}],da_duyet:[{action:"ban_giao",variant:"outline-ghtk",text:"Đã bàn giao/thanh toán",order_group:["supply_bhxh","supply_bhyt"]}]},Supervisor:{cho_duyet:[{action:"duyet",variant:"outline-ghtk",text:"Duyệt",order_group:["contract"]},{action:"tu_choi",variant:"outline-danger",order_group:["contract"]}],da_duyet_supervisor:[{action:"tu_choi",variant:"outline-danger",order_group:["contract"]}],tu_choi:[{action:"duyet",variant:"outline-ghtk",order_group:["contract"],text:"Duyệt lại đề xuất"}]},Hr:{thieu_ho_so:[{action:"de_xuat_lai",variant:"outline-ghtk",text:"Đề xuất lại",order_group:["supply_bhxh","supply_bhyt","regime","stop_working","modify"]}],cho_duyet:[{action:"duyet",variant:"outline-ghtk",text:"Duyệt"},{action:"tu_choi",variant:"outline-ghtk"},{action:"thieu_ho_so",variant:"outline-ghtk",order_group:["supply_bhxh","supply_bhyt","regime","stop_working","modify"]}]},Staff:{cho_duyet:[{action:"duyet",variant:"outline-ghtk",text:"Duyệt"},{action:"tu_choi",variant:"outline-danger"}]}},p.birthTypeOptions=[{value:null,text:""},{value:"normal",text:"Sinh thông thường"},{value:"have_surgery",text:"Sinh con phải phẫu thuật"},{value:"premature_birth",text:"Sinh con dưới 32 tuần tuổi"}],p.birthdayStatusOptions=[{value:"dd/mm/yyyy",text:"Ngày/tháng/năm"},{value:"mm/yyyy",text:"Tháng/năm"},{value:"yyyy",text:"Năm"}],p.insuranceBookStatusOptions=[{value:null,text:""},{value:"first_time",text:"1. NLĐ lần đầu tham gia BHXH tại GHTK"},{value:"employee",text:"2. NLĐ giữ sổ BHXH"},{value:"lost",text:"3. NLĐ bị mất sổ BHXH"},{value:"withdrawn",text:"4. NLĐ bị thu hồi sổ do hưởng TC 1 lần"},{value:"unknown",text:"5. NLĐ không biết về tình trạng sổ BHXH"}],p.genderOptions=[{value:null,text:""},{value:"male",text:"Nam"},{value:"female",text:"Nữ"},{value:"other",text:"Khác"}],p.nationalityOptions=[{value:"Vietnam",text:"Việt Nam"},{value:"Cambodia",text:"Campuchia"},{value:"Laos",text:"Lào"},{value:"Thailand",text:"Thái Lan"},{value:"China",text:"Trung Quốc"},{value:"other",text:"Khác"}],p.salaryAreaOptions=[{value:1,text:"I"},{value:2,text:"II"},{value:3,text:"III"},{value:4,text:"IV"}],p.fileTypeOptions={insurance:[{value:null,text:"-- Chọn loại chứng từ/File --"},{value:"tk1",text:"TK1"},{value:"other_company_contract",text:"Hợp đồng lao động (công ty khác)"},{value:"confirm_insurance",text:"Giấy xác nhận tham gia BHXH"},{value:"insurance_book",text:"Hình ảnh sổ BHXH"},{value:"medical_insurance",text:"Hình ảnh thẻ BHYT"},{value:"confirm_unemployment_benefit",text:"Quyết định hưởng trợ cấp thất nghiệp"},{value:"household_book",text:"Hình ảnh sổ hộ khẩu"},{value:"personal_id",text:"Hình ảnh CMND"},{value:"hospital_checkout",text:"Giấy ra viện"},{value:"confirm_resign_regime_benefit",text:"Giấy xác nhận nghỉ việc hưởng chế độ BHXH"},{value:"birth_certificate",text:"Giấy khai sinh/chứng sinh"},{value:"birth_certificate_extract",text:"Trích lục khai sinh"},{value:"other",text:"Giấy tờ khác"}],working_process:[{value:null,text:"-- Chọn loại File --"},{value:"resignation",text:"Đơn xin nghỉ việc"},{value:"other",text:"Giấy tờ khác"}],contract:[]},p.categoryAlias={insurance:"BH",contract:"HĐ",working_process:"CT"},p.orderType={change_image_ekyc:{id:39,alias:"ekyc_image_changes"},report_lost_identity_card:{id:40,alias:"lost_identity_card"},confirm_staff_ekyc:{id:41,alias:"confirm_staff_ekyc"},update_identity_card_ekyc:{id:42,alias:"update_identity_card"}},e.a=p},"7K05":function(t,e,a){"use strict";var n=a("RUzx"),i={name:"SelectSourceRecruitment",components:{Multiselect:a.n(n).a},props:{multiple:!1,source:{type:String,default:null},placeholder:{default:"Chọn nguồn giới thiệu"},disable:{type:Boolean,default:!1}},data:function(){return{selectedSource:null,options:[{name:"Mạng xã hội",id:"social_network"},{name:"Jobsite tuyển dụng",id:"web"},{name:"Ngày hội việc làm",id:"workfes"},{name:"Giới thiệu nội bộ",id:"employee"},{name:"Quảng cáo ngoài trời",id:"outdoor"},{name:"Đối tác tuyển dụng",id:"other"}]}},watch:{source:function(t,e){this.selectedSource=this.options.find(function(e){return e.id===t})},selectedSource:function(t,e){this.$emit("handleSourceSelected",t)}},methods:{handleChange:function(t){console.log(123),this.$emit("selected-option-changed",t)}}},s=a("XyMi"),o=Object(s.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("multiselect",{attrs:{options:t.options,placeholder:t.placeholder,label:"name","track-by":"id",selectedLabel:"Đã chọn",deselectLabel:"X",selectLabel:"",searchable:!0,multiple:t.multiple,disabled:t.disable},on:{input:t.handleChange},model:{value:t.selectedSource,callback:function(e){t.selectedSource=e},expression:"selectedSource"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])],1)},[],!1,null,null,null);e.a=o.exports},"7QXo":function(t,e,a){"use strict";var n=a("Dd8w"),i=a.n(n),s=a("RUzx"),o=a.n(s),r=a("CpaI"),l={name:"single-select-commune-tax",components:{Multiselect:o.a},props:{provinceCode:{default:null},districtCode:{default:null},communeCode:{default:null},isDisabled:{type:Boolean},state:Boolean},data:function(){return{option:null,options:[]}},watch:{provinceCode:function(t,e){t&&parseInt(t)!==parseInt(e)?this.getListSubDistrict(t):t||(this.option=null,this.options=[])},districtCode:function(t,e){t&&parseInt(t)!==parseInt(e)?this.getListSubDistrict(t):t||(this.option=null,this.options=[])},option:function(t,e){this.$emit("handleSelectedCommune",t)}},mounted:function(){var t=this;this.districtCode&&setTimeout(function(){return t.getListSubDistrict(t.districtCode)},2e3)},methods:{setDisplayName:function(){this.options=this.options.map(function(t){var e=null===t.end_date||new Date(t.end_date)>new Date?t.prefix+" "+t.name:t.prefix+" "+t.name+" (Cũ)";return i()({},t,{name:e})})},getListSubDistrict:function(){var t=this,e={province_ids:this.districtCode?[]:[this.provinceCode],district_ids:this.districtCode?[this.districtCode]:[]};r.a.getSubDistrictHrmV2(e).then(function(e){e.data.success&&(t.options=e.data.data,t.communeCode&&null===t.option&&(t.option=t.options.find(function(e){return parseInt(e.code)===parseInt(t.communeCode)})),t.setDisplayName())}).catch(function(t){console.log(t)})}}},c=a("XyMi");var d=function(t){a("Ti7d")},u=Object(c.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mb-4"},[a("multiselect",{attrs:{options:t.options,disabled:t.isDisabled,placeholder:"Chọn thị trấn/xã",label:"name","track-by":"name",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn",searchable:!0},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v("Chọn thị trấn/xã")])])],1)},[],!1,d,"data-v-3c15a760",null);e.a=u.exports},"7pbi":function(t,e,a){"use strict";var n=a("Xxa5"),i=a.n(n),s=a("exGp"),o=a.n(s),r=a("xF2Z"),l=a("hC/b"),c={props:{userId:{default:null},orderId:{default:null},staffLogId:{default:null},type:{type:String,required:!0},dataInput:{},source:{type:String,required:!0},label:{default:""},isGetData:{default:!1}},name:"eye-button",watch:{isGetData:function(t,e){t&&this.viewRawData()}},data:function(){return{isLoading:!1}},computed:{},created:function(){},methods:{viewRawData:function(){var t=this;return o()(i.a.mark(function e(){var a,n,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.isLoading=!0,a={type:t.type,data:t.dataInput,source:t.source},t.orderId?a.order_id=t.orderId:t.staffLogId?a.staff_log_id=t.staffLogId:a.user_id=t.userId,e.next=6,r.a.getRawInfo(a);case 6:n=e.sent,(s=n.data).success?t.$emit("returnRawData",s.data.raw_data):l.a.showMessage(s.message||"Có lỗi xảy ra trong quá trình lấy thông tin."),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),l.a.showMessage(e.t0.message||"Có lỗi xảy ra trong quá trình lấy thông tin","error");case 14:return e.prev=14,t.isLoading=!1,e.finish(14);case 17:case"end":return e.stop()}},e,t,[[0,11,14,17]])}))()}}},d=a("XyMi");var u=function(t){a("TSRk")},h=Object(d.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["eye-button tracking-action","tracking-"+t.type,"tracking-uid-"+t.userId],on:{click:function(e){return t.viewRawData()}}},[a("i",{staticClass:"fa fa-eye"}),t._v(" "),""!==t.label?a("span",{staticClass:"eye-button__label"},[t._v(t._s(t.label))]):t._e()])},[],!1,u,"data-v-643b2e65",null);e.a=h.exports},"7rYh":function(t,e){},"7yf7":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("mvHQ"),i=a.n(n),s=a("Xxa5"),o=a.n(s),r=a("exGp"),l=a.n(r),c=a("Dd8w"),d=a.n(c),u=a("HveU"),h=a("JJbb"),p=a("Saf8"),m={getUnionOffers:function(t){return h.a.get("ErpUnionOffer/getUnionOffers",{params:t})},getUnionOffer:function(t){return h.a.get("ErpUnionOffer/getUnionOffer",{params:t})},addUnionOffer:function(t){return h.a.post("ErpUnionOffer/addUnionOffer",t)},getUnionsByMasterProfileId:function(t){return h.a.get("ErpUnionOffer/getUnionsByMasterProfileId",{params:t})},getUserCreate:function(){return h.a.get("ErpUnionOffer/getUserCreate")},getUnionTypes:function(){return h.a.get("ErpUnionOffer/getUnionTypes")},validUserUnion:function(t){return p.a.get("/master-profile/info",{params:t})},deleteUnionOffer:function(t){return h.a.post("ErpUnionOffer/removeUnionOffer",t)},getAllProvince:function(){return h.a.get("ErpUnionOffer/getAllProvince")},checkCanUpdateStatus:function(t){return h.a.get("ErpUnionOffer/checkCanUpdateStatus",{params:t})},getUnionsForQuickUpdate:function(t){return h.a.get("ErpUnionOffer/getUnionsForQuickUpdate",{params:t})},updateUnionStatus:function(t){return h.a.post("ErpUnionOffer/updateUnionStatus",t)},quickUpdate:function(t){return h.a.post("ErpUnionOffer/quickUpdate",t)},getUnionDocuments:function(t){return h.a.get("ErpUnionOffer/getUnionDocuments",{params:t})},getListDistrictByProvinceCode:function(t){return h.a.get("ErpDependentPerson/getListDistrictByProvinceCode",{params:t})},getListCommuneByDistrictCode:function(t){return h.a.get("ErpDependentPerson/getListCommuneByDistrictCode",{params:t})}},f=a("hC/b"),g=a("PJh5"),v=a.n(g),_=a("NYxO"),b={name:"modal-quick-update-union",props:{optionMonth:{type:Array,default:null},optionStatus:{type:Array,default:null}},components:{SweetModal:u.a,SweetModalTab:u.b},computed:d()({rows:function(){return this.items.length}},Object(_.c)({userInfo:"userInfo"})),data:function(){return{perPage:10,currentPage:1,fields:[{key:"STT",label:"STT"},{key:"fullname",label:"Tên Nhân viên"},{key:"staff_code",label:"Mã nhân viên"},{key:"active_date",label:"Ngày hưởng chế độ"},{key:"desc",label:"Nội dung chế độ"},{key:"docs",label:"Giấy tờ"},{key:"status",label:"Trạng thái đăng kí"}],items:[],fileDocuments:[],dataSearch:{month:null,status:null}}},methods:{openLink:function(t){window.open(t)},resetModal:function(){this.dataSearch.month=null,this.dataSearch.status=null,this.items=[],this.currentPage=1,this.$emit("reloadpage")},getStatus:function(t){var e="";switch(t){case"pending":e="Đang chờ";break;case"lack_document":e="Thiếu tài liệu";break;case"error":e="Lỗi";break;case"success":e="Thành công"}return e},formatDate:function(t,e){if(t){if("month"===e)return v()(t).format("MM-YYYY");if("date"===e)return v()(t).format("DD-MM-YYYY")}},checkCanUpdateStatus:function(){var t=this,e={username:this.userInfo.User?this.userInfo.User.username:null};m.checkCanUpdateStatus(e).then(function(e){if(e.data.success)if(e.data.data&&e.data.data.allowUpdate){if(!confirm("Bạn chắc chắn muốn cập nhật nhanh trạng thái?"))return;t.quickUpdate()}else f.a.showMessage("Bạn không có quyền cập nhật trạng thái chế độ công đoàn","warning");else f.a.showMessage("Bạn không có quyền cập nhật trạng thái chế độ công đoàn","warning")}).catch(function(t){console.log(t)})},quickUpdate:function(){var t=this;this.$startLoading(),m.quickUpdate().then(function(e){t.$stopLoading(),e.data.success?f.a.showMessage(e.data.message,"success"):f.a.showMessage(e.data.message,"warning")}).catch(function(e){t.$stopLoading(),console.log(e),f.a.showMessage("Đã có lỗi xảy ra","warning")})},getUnionDocuments:function(t){var e=this;this.$startLoading(),this.fileDocuments=[],m.getUnionDocuments({id:t}).then(function(t){e.$stopLoading(),t.data.success?(e.fileDocuments=t.data.data,e.$refs.imageListDocs.show()):f.a.showMessage(t.data.message,"warning")}).catch(function(t){console.log(t),f.a.showMessage("Đã có lỗi xảy ra","warning")})},searchUnions:function(){var t=this;if(this.$startLoading(),!this.dataSearch.month&&!this.dataSearch.status)return this.$stopLoading(),void f.a.showMessage("bạn chưa chọn tháng đăng kí hoặc trạng thái","warning");this.items=[],m.getUnionsForQuickUpdate(this.dataSearch).then(function(e){t.$stopLoading(),e.data.success?t.items=e.data.data:f.a.showMessage(e.data.message,"warning")}).catch(function(t){console.log(t),f.a.showMessage("Đã có lỗi xảy ra","warning")})}}},y=a("XyMi");var C=function(t){a("nJAo")},w=Object(y.a)(b,function(){var t=this.$createElement;return(this._self._c||t)("b-button",{attrs:{variant:"ghtk"},on:{click:this.checkCanUpdateStatus}},[this._v("Cập nhập nhanh trạng thái của đề xuất")])},[],!1,C,"data-v-199c489e",null).exports,k=a("BO1k"),x=a.n(k),S=a("IC97"),M=a("7+uW"),T=a("sUu7"),D=a("HhAh"),I=a.n(D),P=a("d6YO"),E=a("msBV"),L=a("7QXo"),A=a("FlDG"),O=a("xt1G"),N=a("Zx67"),R=a.n(N),U=a("Zrlr"),$=a.n(U),H=a("wxAW"),B=a.n(H),j=a("zwoO"),F=a.n(j),q=a("Pf15"),Y=a.n(q),z=function(t){function e(){return $()(this,e),F()(this,(e.__proto__||R()(e)).apply(this,arguments))}return Y()(e,t),B()(e,null,[{key:"showNumberInput",value:function(t){return e.listTypeNumberInput.includes(parseInt(t))}},{key:"labelNumberInput",value:function(t){switch(t){case e.unionTypes.type_relatives_die:return"Số người mất";case e.unionTypes.type_birth_baby:return"Số con";case e.unionTypes.type_sick_relative:return"Số người ốm"}}},{key:"inListTypeDie",value:function(t){return e.listTypeDie.includes(t)}}]),e}(a("MUME").a);z.unionTypes={type_member_died:3,type_relatives_die:4,type_marry:5,type_birth_baby:6,type_accident_member:7,type_sick_relative:8,type_sick_member:9},z.listTypeNumberInput=[z.unionTypes.type_relatives_die,z.unionTypes.type_birth_baby,z.unionTypes.type_sick_relative],z.listTypeDie=[z.unionTypes.type_member_died,z.unionTypes.type_relatives_die],z.requiredSeniority=[z.unionTypes.type_marry,z.unionTypes.type_birth_baby,z.unionTypes.type_accident_member,z.unionTypes.type_sick_relative];var G=z;M.default.use(T.a,{fieldsBagName:"veeFields"});var K={name:"modal-create-union",props:{currEditing:{default:null},trigger:{default:!1},type:{default:"create"},staffcode:{default:null},typeUnions:{default:null},typeUnionOptions:{default:null},isChangeStaffCode:{default:null},unionId:{default:null}},components:{Datepicker:S.a,EditPeriodDocuments:A.a,SingleSelectProvinceTax:P.a,SingleSelectDistrictTax:E.a,SingleSelectCommuneTax:L.a,debounce:I.a},computed:d()({},Object(_.c)({userInfo:"userInfo"}),{showNumberInput:function(){return G.showNumberInput(this.staffInfo.union_type)},labelNumberInput:function(){return G.labelNumberInput(this.staffInfo.union_type)}}),data:function(){return{amountEditable:!1,unionTypesEditable:[],isShowInputFile:!0,loading:!1,addBtnDisabled:!1,disable:!1,title:"Thêm đề xuất công đoàn",btnAddTitle:"",infoUserSuccess:"",noti:"",validStaffCode:!1,allowEdit:!1,createBy:{username:"",fullname:""},staffInfo:{unionId:null,staff_code:null,master_profile_id:null,active_date:null,union_type:null,status:"",birthday:"",join_date:"",contract_date:"",seniors:0,senior_months:"",position_name:"",station_name:"",province_name:"",region:"",bank_account_name:"",bank_account_number:"",bank_name:"",money:0,baseMoney:0,number_children:1,files:[],file_desc:[],type_desc:"",create_by_user:"",create_by_fullname:"",note:"",region_id:"",station_id:"",province_id:"",is_buy_funeral_wreath:!1,expense_other:0,coefficient:1},fileDeleted:[],fileAdded:[],reRenderFileInput:!0,filesAccumulated:[],fileDocuments:[],formEditUnion:{master_profile_id:null,unionId:null,staff_code:null,fullname:null,birthday:"",age:null,gender:null,tax_iden_number:null,personal_id_number:null,number_gks:null,number_book_gks:null,provinceId:null,districtId:null,communeId:null,from:"",to:"",fileCmndDependent:null,fileBirthCertificate:null,fileInabilityToWork:null,fileHousehold:null,fileXNNPTTNCN:null,fileDKNPT:null,fileOther:null,fileAuthority:null},statusUnion:[{text:"Đang chờ",value:"pending"},{text:"Thiếu tài liệu",value:"lack_document"},{text:"Lỗi",value:"error"},{text:"Thành công",value:"success"}],gender:[{text:"Nam",value:"male"},{text:"Nữ",value:"female"}],loadingMasterProfile:!1,isReadOnly:!1,countFileUpload:[]}},watch:{typeUnionOptions:function(t){var e=this;t&&t.forEach(function(t){t.type&&t.amount_editable&&e.unionTypesEditable.push(t.type)})},trigger:function(){var t=this;if(this.noti="","create"===this.type&&(this.title="Thêm đề xuất công đoàn",this.btnAddTitle="Đề xuất",this.isReadOnly=!1,this.allowEdit=!1,this.resetForm(),this.staffcode&&this.validUserUnion(this.staffcode),this.createBy.username||(this.createBy.username=this.userInfo.User.username,this.createBy.fullname=this.userInfo.User.fullname)),"show"===this.type)this.resetForm(),this.title="Thông tin đề xuất",this.allowEdit=!1,this.isReadOnly=!0,this.getUnionOffer(this.unionId);else{if(this.title="Thêm đề xuất công đoàn",this.btnAddTitle="Cập nhật",this.allowEdit=!0,this.resetForm(),!this.currEditing)return;var e={id:this.currEditing};m.getUnionOffer(e).then(function(e){e.data.success?t.setForm(e.data.data):f.a.showMessage(e.data.message,"warning")}).catch(function(t){console.log(t)}).then(function(){t.appLoading=!1})}this.$refs["edit-modal"].show()},unionId:function(){this.getUnionOffer(this.unionId)},"staffInfo.is_buy_funeral_wreath":function(t){t||(this.staffInfo.expense_other=null)}},methods:{checkIfImage:function(t){return/\.(jpg|jpeg|png|gif|bmp|svg)$/i.test(t)},classElCountDocs:function(t){return this.isShowInputFile=parseInt(this.countFileUpload[t])<parseInt(this.staffInfo.coefficient),this.countFileUpload[t]<=this.staffInfo.coefficient?"text-ghtk":"red-text"},openLink:function(t){window.open(t,"_blank")},onFileChange:function(t,e){var a=this;console.log(t,e,"onFileChange"),this.fileAdded[e]?(console.log(this.fileAdded,"push"),this.fileAdded[e].push(t)):(console.log(this.fileAdded,"new"),this.fileAdded[e]=[t]),this.countFileUpload[e]=this.fileAdded[e].length,this.$set(this.fileAdded,e,this.fileAdded[e]),this.reRenderFileInput=!1,this.$nextTick(function(){a.reRenderFileInput=!0})},getUnionOffer:function(t){var e=this;return l()(o.a.mark(function a(){var n,i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,O.a.getUnionOffer({id:t});case 3:if(!(n=a.sent).data.success){a.next=24;break}return i=n.data.data,e.staffInfo.unionId=i.id,e.staffInfo.staff_code=i.mp_id,a.next=10,e.validUserUnion(i.mp_id);case 10:e.staffInfo.union_type=i.type,e.changeUnionType(i.type),e.staffInfo.status=i.status,e.staffInfo.money=i.money,e.staffInfo.coefficient=i.payment_detail.coefficient?i.payment_detail.coefficient:1,e.staffInfo.money=+i.payment_detail.base_money*+e.staffInfo.coefficient,e.createBy.fullname=i.created_user.fullname,e.staffInfo.active_date=i.active_date,e.staffInfo.note=i.note,e.staffInfo.docs=i.docs?i.docs:[],e.staffInfo.expense_other=i.payment_detail.expense_other,e.staffInfo.is_buy_funeral_wreath=e.staffInfo.expense_other>0,a.next=25;break;case 24:f.a.showMessage(n.data.message,"warning");case 25:a.next=30;break;case 27:a.prev=27,a.t0=a.catch(0),f.a.showMessage("Có lỗi xảy ra khi lấy thông tin đề xuất","error","Lỗi");case 30:case"end":return a.stop()}},a,e,[[0,27]])}))()},showEditModal:function(){this.staffInfo.staff_code=this.staffcode},handleBankAccountInput:function(){if(this.staffInfo.bank_account_name){this.staffInfo.bank_account_name=this.staffInfo.bank_account_name.normalize("NFD").replace(/[\u0300-\u036f]/g,""),this.staffInfo.bank_account_name=this.staffInfo.bank_account_name.trim().toUpperCase()}},blockKeyNotNumeric:function(t){var e=t.keyCode;return 8===e||46===e||(!(!t.ctrlKey||67!==e&&86!==e)||void((e<48||e>57&&e<96||e>105)&&t.preventDefault()))},convertMoney:function(t){return this.staffInfo.money=(t+"").replace(/\D/g,""),f.a.formatMoney(t)},getUrl:function(t){return URL.createObjectURL(t)},formatNames:function(t){return t?t.length+" files":""},deleteFile:function(t,e,a,n){if(a){if(t.target.classList.contains("ion-md-close-circle"))this.fileDeleted.push(this.fileDocuments[e].id),t.target.setAttribute("title","Lấy lại");else{var i=this.fileDeleted.indexOf(this.fileDocuments[e].id);i>=0&&(this.fileDeleted.splice(i,1),t.target.setAttribute("title","Xóa"))}t.target.classList.toggle("ion-md-close-circle"),t.target.classList.toggle("ion-md-refresh-circle"),t.target.nextElementSibling.classList.toggle("file-deleted")}else this.fileAdded[n].splice(e,1);this.countFileUpload[n]=this.fileAdded[n].length},changeUnionStatus:function(t){1!==this.userInfo.User.group_id||this.userInfo.User.group_id},changeQuantity:function(t){this.staffInfo.money=this.staffInfo.baseMoney*t,this.staffInfo.coefficient=t},changeUnionType:function(t){if(this.fileAdded=[],this.fileDocuments=[],this.fileDeleted=[],this.staffInfo.coefficient=1,this.staffInfo.is_buy_funeral_wreath=!1,this.staffInfo.expense_other=null,t&&this.staffInfo.seniors)for(var e=this.typeUnions.length-1;e>=0;e--)if(this.typeUnions[e].type===t){+this.staffInfo.seniors>=+this.typeUnions[e].seniority?(this.staffInfo.money=+this.typeUnions[e].amount,this.staffInfo.baseMoney=+this.staffInfo.money,this.typeUnions[e].required_docs?(this.allowEdit=!0,this.staffInfo.file_desc=this.typeUnions[e].required_docs):(this.allowEdit=!1,this.staffInfo.file_desc="")):G.inListTypeDie(t)?(this.staffInfo.money=+this.typeUnions[e].amount,this.staffInfo.baseMoney=+this.staffInfo.money,this.staffInfo.baseMoney=0,this.staffInfo.file_desc=this.typeUnions[e].required_docs):(this.staffInfo.money=0,this.staffInfo.baseMoney=0,this.staffInfo.file_desc=""),this.staffInfo.union_type=t,this.staffInfo.type_desc=this.typeUnions[e].name,this.amountEditable=this.unionTypesEditable.includes(t);break}var a=!0,n=!1,i=void 0;try{for(var s,o=x()(this.staffInfo.file_desc);!(a=(s=o.next()).done);a=!0){var r=s.value;this.countFileUpload[r.type]=0}}catch(t){n=!0,i=t}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}},validField:function(t){return null===t?null:!(t<0||0===t.length)&&void 0},convertToMonth:function(t){if(""!==t){var e=new Date,a=new Date(t);return 12*(e.getYear()-a.getYear())+(e.getMonth()-a.getMonth())}return 0},setForm:function(t){t.id&&(this.staffInfo.unionId=t.id),t.master_profile_id&&(this.staffInfo.master_profile_id=t.master_profile_id),t.staff_code&&(this.staffInfo.staff_code=t.staff_code),t.fullname&&(this.staffInfo.fullname=t.fullname),t.birthday&&(this.staffInfo.birthday=f.a.formatDate(t.birthday,"DD-MM-YYYY")),t.username&&(this.staffInfo.username=t.username),t.active_date&&(this.staffInfo.active_date=v()(t.active_date).toDate()),t.join_date&&(this.staffInfo.join_date=t.join_date,this.staffInfo.contract_date=f.a.formatDate(t.contract_date,"DD-MM-YYYY"),this.staffInfo.seniors=this.convertToMonth(t.contract_date),this.staffInfo.senior_months=this.staffInfo.seniors+" tháng"),t.bank_account_name&&(this.staffInfo.bank_account_name=t.bank_account_name),t.bank_account_number&&(this.staffInfo.bank_account_number=t.bank_account_number),t.bank_name&&(this.staffInfo.bank_name=t.bank_name),t.region&&(this.staffInfo.region=t.region),t.station_name&&(this.staffInfo.station_name=t.station_name),t.position_name&&(this.staffInfo.position_name=t.position_name),t.province_name&&(this.staffInfo.province_name=t.province_name),t.station_id&&(this.staffInfo.station_id=t.station_id),t.region_id&&(this.staffInfo.region_id=t.region_id),t.province_id&&(this.staffInfo.province_id=t.province_id),t.union_type&&this.changeUnionType(t.union_type),t.status&&(this.staffInfo.status=t.status),t.money&&(this.staffInfo.money=t.money),t.number_children&&(this.staffInfo.number_children=t.number_children),t.created_by&&t.created_by.fullname&&(this.staffInfo.create_by_fullname=t.created_by.fullname),t.files&&t.files.length&&(this.fileDocuments=t.files),t.note&&(this.staffInfo.note=t.note)},resetForm:function(){this.staffInfo.unionId=null,this.staffInfo.staff_code&&"edit"!==this.type||(this.staffInfo.master_profile_id=null),this.staffInfo.staff_code=null,this.staffInfo.fullname="",this.staffInfo.username="",this.staffInfo.birthday="",this.staffInfo.money=0,this.staffInfo.baseMoney=0,this.fileAdded=[],this.fileDeleted=[],this.fileDocuments=[],this.staffInfo.active_date=null,this.staffInfo.join_date="",this.staffInfo.contract_date="",this.staffInfo.senior_months="",this.staffInfo.bank_account_name="",this.staffInfo.bank_account_number="",this.staffInfo.bank_name="",this.staffInfo.region="",this.staffInfo.station_name="",this.staffInfo.position_name="",this.staffInfo.province_name="",this.staffInfo.station_id="",this.staffInfo.region_id="",this.staffInfo.province_id="",this.staffInfo.union_type=null,this.staffInfo.status="",this.staffInfo.note="",this.staffInfo.file_desc="",this.staffInfo.type_desc="",this.staffInfo.number_children=1,this.staffInfo.coefficient=1,this.staffInfo.expense_other=0,this.staffInfo.seniors=0},validUserUnion:function(t){var e=this;return l()(o.a.mark(function a(){var n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t){a.next=3;break}return e.resetForm(),a.abrupt("return");case 3:return e.loadingMasterProfile=!0,a.prev=4,a.next=7,m.validUserUnion({id:+t});case 7:(n=a.sent).data.success?(e.validStaffCode=!0,e.setForm(n.data.data),e.noti=""):(e.staffInfo.master_profile_id=null,e.validStaffCode=!1,e.noti=n.data.message),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(4),e.noti="Có lỗi xảy ra";case 14:return a.prev=14,e.loadingMasterProfile=!1,a.finish(14);case 17:case"end":return a.stop()}},a,e,[[4,11,14,17]])}))()},checkUsername:I()(function(t){t&&t.length<5||(this.noti="",this.validUserUnion(this.staffInfo.staff_code))},500),createUnionOffer:function(){var t=this;return l()(o.a.mark(function e(){var a,n,i,s,r,l,c,d,u,h,p,m,g,v,_,b,y;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.staffInfo.seniors<3&&G.requiredSeniority.includes(t.staffInfo.union_type))){e.next=3;break}return f.a.showMessage("Người lao động chưa  đủ thâm niên để hưởng chế độ này","error","Lỗi"),e.abrupt("return");case 3:if(!t.staffInfo.is_buy_funeral_wreath||t.staffInfo.expense_other){e.next=6;break}return f.a.showMessage("Vui lòng nhập giá trị vòng hoa","warning","Thông báo"),e.abrupt("return");case 6:for(t.loading=!0,a=[],n=!0,i=!1,s=void 0,e.prev=11,r=x()(t.staffInfo.file_desc);!(n=(l=r.next()).done);n=!0)c=l.value,a[c.type]=t.fileAdded[c.type];e.next=19;break;case 15:e.prev=15,e.t0=e.catch(11),i=!0,s=e.t0;case 19:e.prev=19,e.prev=20,!n&&r.return&&r.return();case 22:if(e.prev=22,!i){e.next=25;break}throw s;case 25:return e.finish(22);case 26:return e.finish(19);case 27:if(d=new FormData,!(a.length>0)){e.next=56;break}u=0,h=0;case 31:if(!(h<a.length)){e.next=56;break}if(void 0!==a[h]){e.next=34;break}return e.abrupt("continue",53);case 34:for(p=!0,m=!1,g=void 0,e.prev=37,v=x()(a[h]);!(p=(_=v.next()).done);p=!0)b=_.value,d.append("document[type]["+u+"]",h),d.append("document[file]["+u+"]",b),d.append("document[name]["+u+"]",b.name.slice(0,19)),u++;e.next=45;break;case 41:e.prev=41,e.t1=e.catch(37),m=!0,g=e.t1;case 45:e.prev=45,e.prev=46,!p&&v.return&&v.return();case 48:if(e.prev=48,!m){e.next=51;break}throw g;case 51:return e.finish(48);case 52:return e.finish(45);case 53:h++,e.next=31;break;case 56:return d.append("money_benefit",t.staffInfo.money),d.append("master_profile_id",t.staffInfo.master_profile_id),d.append("union_type",t.staffInfo.union_type),d.append("active_date",f.a.formatDate(t.staffInfo.active_date,"YYYY-MM-DD")),d.append("coefficient",t.staffInfo.coefficient),d.append("note",t.staffInfo.note),t.staffInfo.expense_other&&d.append("expense_other",t.staffInfo.expense_other),e.prev=63,e.next=66,O.a.createUnionOffer(d);case 66:(y=e.sent).data.success?(t.$bvModal.hide("modal-add-union"),t.$emit("onCreated"),f.a.showMessage("Tạo đề xuất thành công","success","Thành công")):f.a.showMessage(y.data.message,"error","Lỗi"),e.next=73;break;case 70:e.prev=70,e.t2=e.catch(63),f.a.showMessage("Có lỗi xảy ra","error","Lỗi");case 73:return e.prev=73,t.loading=!1,e.finish(73);case 76:case"end":return e.stop()}},e,t,[[11,15,19,27],[20,,22,26],[37,41,45,53],[46,,48,52],[63,70,73,76]])}))()},closeUnionModal:function(){this.$bvModal.hide("modal-add-union")},formatDate:function(t,e){return f.a.formatDate(t,e)}}};var V=function(t){a("6aA6"),a("dgSy"),a("fXsv")},Q=Object(y.a)(K,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"edit-modal",attrs:{"hide-footer":"",id:"modal-add-union",title:t.title,"modal-class":"modal-xxl modal-create-union",bodyClass:"mh-75 overflow-auto"},on:{show:t.showEditModal}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"position-relative"},[a("b-row",[a("b-card",{staticClass:"col-md-12 border-0"},[a("b-form-group",{attrs:{"label-cols-sm":"2"}},[a("template",{slot:"label"},[t._v("Người tạo đề xuất")]),t._v(" "),t.currEditing?a("b-form-input",{staticClass:"col-md-3",attrs:{readonly:""},model:{value:t.staffInfo.create_by_fullname,callback:function(e){t.$set(t.staffInfo,"create_by_fullname",e)},expression:"staffInfo.create_by_fullname"}}):a("b-form-input",{staticClass:"col-md-3",attrs:{readonly:""},model:{value:t.createBy.fullname,callback:function(e){t.$set(t.createBy,"fullname",e)},expression:"createBy.fullname"}})],2),t._v(" "),a("b-form-group",{attrs:{"label-cols-sm":"2"}},[a("template",{slot:"label"},[t._v("\n              Mã Nhân Viên "),a("span",{staticClass:"red-text"},[t._v("(*)")])]),t._v(" "),a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-md-3",attrs:{disabled:"create"!==t.type||!t.isChangeStaffCode,state:t.validField(t.staffInfo.staff_code),id:"staff-code",name:"staff-code",type:"number",readonly:t.isReadOnly,placeholder:"Nhập mã nhân viên"},on:{input:function(e){return t.checkUsername()}},model:{value:t.staffInfo.staff_code,callback:function(e){t.$set(t.staffInfo,"staff_code",e)},expression:"staffInfo.staff_code"}}),t._v(" "),t.loadingMasterProfile?a("div",{staticClass:"position-absolute"},[a("em",{staticClass:"fa fa-spin fa-spinner"})]):t._e(),t._v(" "),!t.validStaffCode&&t.staffInfo.staff_code?a("span",{staticClass:"noti-error",attrs:{id:"notification-warnning"}},[t._v(t._s(t.noti))]):t._e(),t._v(" "),t.validStaffCode&&t.staffInfo.staff_code?a("span",{staticClass:"noti-success",attrs:{id:"notification-success"}},[t._v(t._s(t.infoUserSuccess))]):t._e(),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"required"==t.errors.firstRule("staff-code"),expression:"errors.firstRule('staff-code') == 'required'"}],staticClass:"noti-error"},[t._v("Không để trống trường này ")])],2)],1)],1),t._v(" "),a("b-row",[a("b-card",{staticClass:"col-md-12 ml-2 mr-2 pl-0 pr-0 rounded w-100",attrs:{"sub-title":"Thông tin cá nhân","sub-title-text-variant":"black"}},[a("b-row",[a("b-col",[a("b-form-group",[a("label",{staticClass:"form-label"},[t._v("Username")]),t._v(" "),a("b-form-input",{attrs:{readonly:""},model:{value:t.staffInfo.username,callback:function(e){t.$set(t.staffInfo,"username",e)},expression:"staffInfo.username"}})],1)],1),t._v(" "),a("b-col",[a("b-form-group",[a("label",{staticClass:"form-label"},[t._v("\n                  Họ và tên\n                ")]),t._v(" "),a("b-form-input",{attrs:{readonly:"",type:"text"},model:{value:t.staffInfo.fullname,callback:function(e){t.$set(t.staffInfo,"fullname",e)},expression:"staffInfo.fullname"}})],1)],1),t._v(" "),a("b-col",[a("b-form-group",[a("label",{staticClass:"form-label"},[t._v("Ngày sinh")]),t._v(" "),a("b-form-input",{attrs:{readonly:""},model:{value:t.staffInfo.birthday,callback:function(e){t.$set(t.staffInfo,"birthday",e)},expression:"staffInfo.birthday"}})],1)],1),t._v(" "),a("b-col",[a("b-form-group",[a("label",{staticClass:"form-label"},[t._v("Vị trí")]),t._v(" "),a("b-form-input",{attrs:{readonly:""},model:{value:t.staffInfo.position_name,callback:function(e){t.$set(t.staffInfo,"position_name",e)},expression:"staffInfo.position_name"}})],1)],1)],1),t._v(" "),a("b-row",[a("b-col",[a("b-form-group",[a("label",{staticClass:"form-label"},[t._v("Miền")]),t._v(" "),a("b-form-input",{attrs:{readonly:""},model:{value:t.staffInfo.region,callback:function(e){t.$set(t.staffInfo,"region",e)},expression:"staffInfo.region"}})],1)],1),t._v(" "),a("b-col",[a("b-form-group",[a("label",{staticClass:"form-label"},[t._v("Tỉnh")]),t._v(" "),a("b-form-input",{attrs:{readonly:"",type:"text"},model:{value:t.staffInfo.province_name,callback:function(e){t.$set(t.staffInfo,"province_name",e)},expression:"staffInfo.province_name"}})],1)],1),t._v(" "),a("b-col",[a("b-form-group",[a("label",{staticClass:"form-label"},[t._v("Kho")]),t._v(" "),a("b-form-input",{attrs:{readonly:""},model:{value:t.staffInfo.station_name,callback:function(e){t.$set(t.staffInfo,"station_name",e)},expression:"staffInfo.station_name"}})],1)],1),t._v(" "),a("b-col")],1)],1),t._v(" "),a("b-card",{staticClass:"mt-3 ml-2 mr-2 pl-0 pr-0 rounded w-100",attrs:{"sub-title":"Thông tin đóng bảo hiểm xã hội","sub-title-text-variant":"black"}},[a("b-row",[a("b-col",[a("b-form-group",[a("label",{staticClass:"form-label"},[t._v("Ngày ký HĐLĐ")]),t._v(" "),a("b-form-input",{attrs:{readonly:""},model:{value:t.staffInfo.contract_date,callback:function(e){t.$set(t.staffInfo,"contract_date",e)},expression:"staffInfo.contract_date"}})],1)],1),t._v(" "),a("b-col",[a("b-form-group",[a("label",{staticClass:"form-label"},[t._v("Thâm niên")]),t._v(" "),a("b-form-input",{attrs:{readonly:"",type:"text"},model:{value:t.staffInfo.senior_months,callback:function(e){t.$set(t.staffInfo,"senior_months",e)},expression:"staffInfo.senior_months"}})],1)],1),t._v(" "),a("b-col"),t._v(" "),a("b-col")],1)],1),t._v(" "),a("b-card",{staticClass:"mt-3 ml-2 mr-2 pl-0 pr-0 rounded w-100",attrs:{"sub-title":"Thông tin thanh toán","sub-title-text-variant":"black"}},[a("b-row",[a("b-col",[a("b-form-group",[a("label",{staticClass:"form-label"},[t._v("Chủ tài khoản")]),t._v(" "),a("b-form-input",{attrs:{maxlength:"200",disabled:""},on:{input:function(e){return t.handleBankAccountInput()}},model:{value:t.staffInfo.bank_account_name,callback:function(e){t.$set(t.staffInfo,"bank_account_name",e)},expression:"staffInfo.bank_account_name"}})],1)],1),t._v(" "),a("b-col",[a("b-form-group",[a("label",{staticClass:"form-label"},[t._v("Số tài khoản")]),t._v(" "),a("b-form-input",{attrs:{type:"text",maxlength:"200",disabled:""},on:{keydown:function(e){return t.blockKeyNotNumeric(e)}},model:{value:t.staffInfo.bank_account_number,callback:function(e){t.$set(t.staffInfo,"bank_account_number",e)},expression:"staffInfo.bank_account_number"}})],1)],1),t._v(" "),a("b-col",[a("b-form-group",[a("label",{staticClass:"form-label"},[t._v("Ngân hàng")]),t._v(" "),a("b-form-input",{attrs:{type:"text",maxlength:"200",disabled:""},model:{value:t.staffInfo.bank_name,callback:function(e){t.$set(t.staffInfo,"bank_name",e)},expression:"staffInfo.bank_name"}})],1)],1),t._v(" "),a("b-col")],1)],1),t._v(" "),a("b-card",{staticClass:"mt-3 ml-2 mr-2 pl-0 pr-0 rounded w-100",attrs:{"sub-title":"Chế độ công đoàn","sub-title-text-variant":"black"}},[a("b-row",[a("b-col",[a("b-form-group",[a("label",{staticClass:"form-label"},[t._v("Chế độ "),a("span",{staticClass:"red-text"},[t._v("(*)")])]),t._v(" "),a("b-form-select",{attrs:{options:t.typeUnionOptions,disabled:t.isReadOnly},on:{change:t.changeUnionType},model:{value:t.staffInfo.union_type,callback:function(e){t.$set(t.staffInfo,"union_type",e)},expression:"staffInfo.union_type"}})],1)],1),t._v(" "),a("b-col",[a("b-form-group",[a("label",{staticClass:"form-label"},[t._v("Tiền được nhận "),a("span",{staticClass:"red-text"},[t._v("(*)")])]),t._v(" "),a("b-form-input",{attrs:{value:t.convertMoney(t.staffInfo.money),formatter:t.convertMoney,disabled:!t.amountEditable||t.isReadOnly,maxlength:"200"}})],1)],1),t._v(" "),a("b-col",[a("b-form-group",[a("label",{staticClass:"form-label"},[t._v("Ghi chú")]),t._v(" "),a("b-form-input",{attrs:{type:"text",maxlength:"200",disabled:t.isReadOnly},model:{value:t.staffInfo.note,callback:function(e){t.$set(t.staffInfo,"note",e)},expression:"staffInfo.note"}})],1)],1),t._v(" "),a("b-col",[t.isReadOnly?a("b-form-group",[a("label",{staticClass:"form-label"},[t._v("Ngày phát sinh chế độ"),a("span",{staticClass:"red-text"},[t._v("(*)")])]),t._v(" "),a("b-form-input",{attrs:{value:t.formatDate(t.staffInfo.active_date,"DD/MM/YYYY"),type:"text",disabled:t.isReadOnly}})],1):a("b-form-group",[a("label",{staticClass:"form-label"},[t._v("Ngày phát sinh chế độ"),a("span",{staticClass:"red-text"},[t._v("(*)")])]),t._v(" "),a("v-date-picker",{attrs:{popover:{visibility:"focus"},mode:"date",locale:"vi",color:"green","input-props":{placeholder:"dd/mm/yyyy"}},model:{value:t.staffInfo.active_date,callback:function(e){t.$set(t.staffInfo,"active_date",e)},expression:"staffInfo.active_date"}})],1)],1),t._v(" "),a("b-col",[t.currEditing?a("b-form-group",[a("label",{staticClass:"form-label"},[t._v("Trạng thái")]),t._v(" "),a("b-form-select",{attrs:{options:t.statusUnion,disable:1!==t.userInfo.User.group_id},on:{change:t.changeUnionStatus},model:{value:t.staffInfo.status,callback:function(e){t.$set(t.staffInfo,"status",e)},expression:"staffInfo.status"}})],1):t._e()],1)],1),t._v(" "),t.showNumberInput?a("b-row",[a("b-form-group",{staticClass:"col-md-3 max-width-20"},[a("label",{staticClass:"form-label"},[t._v(t._s(t.labelNumberInput))]),t._v(" "),a("b-form-input",{attrs:{type:"number",min:"1",disabled:t.isReadOnly},on:{input:t.changeQuantity,keydown:function(e){return t.blockKeyNotNumeric(e)}},model:{value:t.staffInfo.coefficient,callback:function(e){t.$set(t.staffInfo,"coefficient",e)},expression:"staffInfo.coefficient"}})],1)],1):t._e(),t._v(" "),3===t.staffInfo.union_type?a("b-form-checkbox",{class:t.isReadOnly?"":"checkbox-ghtk",attrs:{"button-variant":"info",disabled:t.isReadOnly},model:{value:t.staffInfo.is_buy_funeral_wreath,callback:function(e){t.$set(t.staffInfo,"is_buy_funeral_wreath",e)},expression:"staffInfo.is_buy_funeral_wreath"}},[t._v("\n            Vòng hoa\n          ")]):t._e(),t._v(" "),3===t.staffInfo.union_type&&t.staffInfo.is_buy_funeral_wreath?a("b-row",[a("b-form-group",{staticClass:"col-md-3 max-width-20 mt-1"},[a("b-form-input",{attrs:{type:"number",disabled:t.isReadOnly,placeholder:"Nhập giá trị vòng hoa"},model:{value:t.staffInfo.expense_other,callback:function(e){t.$set(t.staffInfo,"expense_other",e)},expression:"staffInfo.expense_other"}})],1)],1):t._e(),t._v(" "),t.staffInfo.file_desc.length>0?a("b-row",[a("b-col",[[a("div",{staticClass:"div-file-type"},[a("span",{staticClass:"span-file-type"},[t._v("Giấy tờ yêu cầu "),a("span",{staticClass:"red-text"},[t._v("(*)")])]),t._v(" "),t._l(t.staffInfo.file_desc,function(e,n){return a("div",{key:n,staticClass:"pt-3"},[a("p",{staticClass:"text-black mt-2 mb-1"},[t._v("\n                      "+t._s(e.name)+"\n                      "),t.isReadOnly?t._e():a("span",{class:t.classElCountDocs(e.type)},[t._v("\n                        "+t._s(t.countFileUpload[e.type])+"/"+t._s(t.staffInfo.coefficient)+"\n                      ")])]),t._v(" "),[t.isReadOnly&&t.staffInfo.docs.length>0?a("div",{staticClass:"text-left d-flex"},t._l(t.staffInfo.docs,function(n,i){return a("div",{key:i,staticClass:"img-bounder mt-1"},[t.checkIfImage(n.file_url)&&n.document_type===e.type?a("b-img",{directives:[{name:"img",rawName:"v-img",value:{group:"files"},expression:"{group: `files`}"}],staticClass:"rounded mt-2 mr-3 border",staticStyle:{height:"150px","max-width":"100px"},attrs:{src:n.file_url,alt:n.file_name}}):t._e(),t._v(" "),t.checkIfImage(n.file_url)||n.document_type!==e.type?t._e():a("b-link",{on:{click:function(e){return t.openLink(n.file_url)}}},[a("h4",[a("b-badge",{attrs:{variant:"primary"}},[t._v(t._s(n.file_name))])],1)])],1)}),0):t._e()],t._v(" "),[a("div",{staticClass:"text-left d-flex"},[t._l(t.fileDocuments[e.type],function(e,n){return a("div",{key:n,staticClass:"img-bounder mt-1 mr-2"},[0===e.type.indexOf("image")?a("b-img",{directives:[{name:"img",rawName:"v-img",value:{group:"files"},expression:"{group: `files`}"}],staticClass:"rounded mt-2 mr-3 border",staticStyle:{height:"150px","max-width":"100px"},attrs:{src:e.link_file,alt:e.name}}):a("div",{staticClass:"mt-2 mr-3"},[a("b-link",{staticClass:"mr-3",on:{click:function(a){return t.openLink(e.file_url)}}},[a("h4",[a("b-badge",{attrs:{variant:"primary"}},[t._v(t._s(e.file_name))])],1)]),t._v(" "),a("br")],1)],1)}),t._v(" "),t._l(t.fileAdded[e.type],function(n,i){return a("div",{key:i,staticClass:"img-bounder mt-1 mr-2"},[t.staffInfo.file_desc?a("span",{staticClass:"icon ion-md-close-circle btn-disable-file",attrs:{title:"Xóa"},on:{click:function(a){return t.deleteFile(a,i,!1,e.type)}}}):t._e(),t._v(" "),a("a",{attrs:{href:"javascript:void(0)"}},[n.type.includes("image")?a("b-img",{staticClass:"rounded mt-2 mr-3 border",staticStyle:{height:"150px","max-width":"100px"},attrs:{src:t.getUrl(n),alt:n.name}}):a("b-link",{staticClass:"mr-3",on:{click:function(e){t.openLink(t.getUrl(n))}}},[a("h4",[a("b-badge",{staticClass:"mt-2 mr-2",attrs:{variant:"primary"}},[t._v(t._s(n.name))])],1)])],1)])}),t._v(" "),t.isReadOnly?t._e():a("div",{staticClass:"img-bounder mt-1 mb-4"},[a("b-form-group",{staticClass:"dragdrop"},[t.reRenderFileInput?a("b-form-file",{attrs:{accept:"image/*",placeholder:"Thêm file","file-name-formatter":t.formatNames},on:{input:function(a){return t.onFileChange(a,e.type)}}}):t._e()],1)],1)],2)]],2)})],2)]],2)],1):t._e()],1)],1),t._v(" "),a("br"),t._v(" "),t.isReadOnly?t._e():a("div",{attrs:{align:"center"}},[a("b-btn",{staticClass:"w-10re mr-3",attrs:{id:"close-btn",variant:"secondary",disabled:t.addBtnDisabled},on:{click:function(e){return t.closeUnionModal()}}},[t._v("Đóng")]),t._v(" "),a("b-btn",{staticClass:"w-10re",attrs:{id:"add-btn",variant:"ghtk",disabled:t.addBtnDisabled},on:{click:function(e){return t.createUnionOffer()}}},[t._v("Đề xuất")])],1)],1)])],1)},[],!1,V,"data-v-298f83f8",null).exports,X=a("RUzx"),W=a.n(X),J={name:"MultiSelectUnionStatus",components:{Multiselect:W.a},props:{autoClose:{default:!0},hideSelected:{default:!0},limitProp:{default:5},isDisabled:{default:!1},placeholder:{default:"Trạng thái"},customClass:{default:"multiselect-ghtk"}},data:function(){return{option:null,options:[{id:1,name:"Chờ HR duyệt"},{id:2,name:"Chờ C&B duyệt"},{id:3,name:"Đã duyệt"},{id:4,name:"Từ chối"}]}},methods:{handleInput:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&(this.option=t),this.$emit("onChangeStatusSelected",this.option)}}},Z=Object(y.a)(J,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{class:t.customClass,attrs:{options:t.options,multiple:!0,placeholder:t.placeholder,label:"name","track-by":"id","selected-label":"","deselect-label":"X","select-label":"",disabled:t.isDisabled,limit:t.limitProp,"hide-selected":t.hideSelected,"close-on-select":t.autoClose},on:{input:t.handleInput},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,null,null,null).exports,tt=a("F/2K"),et=a("a/7L"),at=a("l48y"),nt=a("Ls4C"),it=a("Gu7T"),st=a.n(it),ot={name:"UnionLogs",props:{unionOffer:{type:Object,default:function(t){return{}}}},created:function(){this.unionLogsId=f.a.generateUniqueId(this.unionLogsId),this.loadDataLog()},watch:{unionOffer:function(){this.page=1,this.dataLogs=[],this.loadDataLog()}},data:function(){return{page:1,limit:10,isLoading:!1,dataLogs:[],stopLoadData:!1,unionLogsId:"union-logs"}},methods:{loadDataLog:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.prev=1,e.next=4,O.a.getLogs({code:t.unionOffer.code,page:t.page,limit:t.limit});case 4:(a=e.sent).data.success?((n=t.dataLogs).push.apply(n,st()(a.data.data)),t.stopLoadData=a.data.data.length<t.limit,t.page++):t.stopLoadData=!0,t.isLoading=!1,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),t.isLoading=!1,t.stopLoadData=!0;case 13:case"end":return e.stop()}},e,t,[[1,9]])}))()},handleScroll:function(){if(!this.stopLoadData&&!this.isLoading){var t=this.$refs[this.unionLogsId];t.scrollTop+t.clientHeight+100>=t.scrollHeight&&this.loadDataLog()}}}};var rt=function(t){a("s1yC")},lt=Object(y.a)(ot,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:t.unionLogsId,staticClass:"log-detail h-25",on:{scroll:t.handleScroll}},[a("ul",{staticClass:"ant-timeline ms-1"},[t._l(t.dataLogs,function(e,n){return a("li",{key:n,staticClass:"ant-timeline-item"},[a("div",{staticClass:"ant-timeline-item-tail"}),t._v(" "),a("div",{staticClass:"ant-timeline-item-head ant-timeline-item-head-blue"}),t._v(" "),a("div",{staticClass:"ant-timeline-item-content"},[a("span",{staticClass:"time-log text-black"},[t._v(t._s(e))])])])}),t._v(" "),a("li",{directives:[{name:"show",rawName:"v-show",value:0===t.dataLogs.length,expression:"dataLogs.length === 0"}]},[a("div",{staticClass:"text-center"},[t._v("Không có dữ liệu logs!")])])],2),t._v(" "),t.isLoading?a("div",[a("em",{staticClass:"fa fa-spin fa-spinner"})]):t._e()])},[],!1,rt,"data-v-22a2838b",null).exports,ct=a("Rwp6"),dt=a("EAZf"),ut=a.n(dt),ht=(a("N1kN"),a("poZo")),pt=a("lBHt"),mt=a("TyzE"),ft=a("3BrW"),gt=a("Vec3"),vt=a("DbLI"),_t=a("/b0+"),bt=a("bkph"),yt={name:"MultiSelectUnionType",components:{Multiselect:W.a},props:{autoClose:{default:!0},hideSelected:{default:!0},limitProp:{default:5},isDisabled:{default:!1},placeholder:{default:"Loại đề xuất"},customClass:{default:"multiselect-ghtk"}},data:function(){return{option:null,options:[],typeBirthday:{type:1,name:"Sinh nhật đoàn viên"}}},created:function(){this.getUnionTypes()},methods:{handleInput:function(){this.$emit("onChange",this.option)},getUnionTypes:function(){var t=this;return l()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.getUnionTypes();case 3:(a=e.sent).data.success?(t.options=a.data.data.map(function(t){return{type:t.type,name:t.name}}),t.options.unshift(t.typeBirthday)):f.a.showMessage(a.data.message,"warning","Thông báo"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),f.a.showMessage("Có lỗi khi lấy danh sách loại đề xuất!","error","Lỗi");case 10:case"end":return e.stop()}},e,t,[[0,7]])}))()}}},Ct=Object(y.a)(yt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{class:t.customClass,attrs:{options:t.options,multiple:!0,placeholder:t.placeholder,label:"name","track-by":"type","selected-label":"","deselect-label":"X","select-label":"",disabled:t.isDisabled,limit:t.limitProp,"hide-selected":t.hideSelected,"close-on-select":t.autoClose},on:{input:t.handleInput},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,null,null,null).exports,wt=a("u1Qr"),kt=a("CAWZ"),xt=a("phbQ"),St={DEPUTY_DIRECTTOR_HR:269,DIRECTTOR_HR:286};M.default.use(ct.a,{altAsTitle:!0}),M.default.use(ut.a);var Mt={name:"manager-union",mixins:[ht.a],props:["dataSearchInput"],components:{MultiSelectUnionType:Ct,MultiSelectRegion:bt.a,MultiSelectDepartment:_t.a,MultiSelectPosition:vt.a,MultiSelectHrTag:gt.a,MultiSelectStation:ft.a,MultiSelectProvince:mt.a,SingleSelectUser:pt.a,ModalQuickUpdateUnion:w,ModalCreateUnion:Q,SweetModal:u.a,SweetModalTab:u.b,SingleSelectProvince:tt.a,SingleSelectStation:et.a,SingleSelectRegion:at.a,PerfectScrollbar:nt.a,Viewer:ut.a,MultiSelectUnionStatus:Z,UnionLogs:lt,SensitiveLabel:wt.a},data:function(){return{canPermissionApprove:!1,firstSelectStatus:!0,unionModal:{id:null},loadingPhone:!1,loading:!1,staffcode:null,fileChange:!1,allowEdit:!1,disableInput:!1,currEditing:null,isChangeStaffCode:!0,triggerEdit:!1,typeEdit:"",dataChange:!1,numUserHasDependant:0,typeUnions:[],typeUnionOptions:[{text:"-- Chọn loại chế độ --",value:null}],selected:null,pageData:{currentPage:1,totalPages:0,totalItems:0,perPage:10,totalRow:0},fileDocuments:[],fileDocumentSrcs:[],dependantId:null,dependant:{birthplace_province:"",birthplace_district:"",birthplace_sub_district:""},items:[],singleItem:{},listItems:[],striped:!1,bordered:!1,borderless:!1,outlined:!1,small:!1,hover:!1,dark:!1,fixed:!1,footClone:!1,headVariant:null,tableVariant:"",noCollapse:!1,dataSearch:{provinceId:null,stationId:null,regionId:null,taxIdenNumberPersonalId:null,fullnameUsername:null,month:null,year:null,status:null,page:null,type:null},optionsYear:[{text:"-- Chọn năm --",value:null}],optionsMonth:[{text:"-- Chọn tháng đăng kí --",value:null},{text:"Tháng 1",value:"1"},{text:"Tháng 2",value:"2"},{text:"Tháng 3",value:"3"},{text:"Tháng 4",value:"4"},{text:"Tháng 5",value:"5"},{text:"Tháng 6",value:"6"},{text:"Tháng 7",value:"7"},{text:"Tháng 8",value:"8"},{text:"Tháng 9",value:"9"},{text:"Tháng 10",value:"10"},{text:"Tháng 11",value:"11"},{text:"Tháng 12",value:"12"}],optionStatus:[{text:"-- Chọn trạng thái đề xuất --",value:null},{text:"Đang chờ",value:"pending"},{text:"Thiếu tài liệu",value:"lack_document"},{text:"Lỗi",value:"error"},{text:"Thành công",value:"success"}],logs:[],editNoteMode:{type:"edit",dependant_id:null,new_note:null},notEnoughFile:null,filter:{region:null,province:null,station:null,user_id:null,department:null,deadline:null,position:null,handler_id:null,created:null,union_offer_code:null,identify_id:null,status:null,union_type:null},rejectModalData:{isLoading:!1,unionOfferId:null,unionType:null,reason:["Thiếu hồ sơ","Quá hạn đề xuất","Sai ngày phát sinh chế độ"],reasonSelected:null,reasonOther:"",isReadOnly:!1},staffInfo:{defaultAvatar:"https://cache.giaohangtietkiem.vn/d/b04440d8dc4a05f744f1680ad42ecd1c.jpg?width=450&height=450",phoneNumber:""},unionOffers:[],titleToast:{success:"Thành công",error:"Lỗi",warning:"Cảnh báo"},unionStatus:{pending_hr:1,pending_cb:2,approved:3,rejected:4},handlerModalData:{list:[]},staffContactInfo:{fullName:"",position:"",phone:""}}},watch:{hardFixClassFileInput:function(t){},allowEdit:function(t,e){if(!t){this.fileAdded.fileCmndDependent=[],this.fileAdded.fileBirthCertificate=[],this.fileAdded.fileInabilityToWork=[],this.fileAdded.fileHousehold=[],this.fileAdded.fileXNNPTTNCN=[],this.fileAdded.fileDKNPT=[],this.fileAdded.fileOther=[],this.fileAdded.fileAuthority=[],this.fileDeleted.fileCmndDependent=[],this.fileDeleted.fileBirthCertificate=[],this.fileDeleted.fileInabilityToWork=[],this.fileDeleted.fileHousehold=[],this.fileDeleted.fileXNNPTTNCN=[],this.fileDeleted.fileDKNPT=[],this.fileDeleted.fileOther=[],this.fileDeleted.fileAuthority=[];for(var a=this.$el.querySelectorAll(".file-deleted"),n=0,i=0|a.length;n<i;n=n+1|0)a[n].classList.remove("file-deleted");this.$el.querySelector("#topFile").scrollIntoView()}},curUser:function(){this.selectStatusFilterForCurUser(),this.curUser&&this.changeSelectStatus()}},computed:d()({totalItems:function(){return this.items.length},totalPages:function(){return Math.ceil(this.totalItems/this.perPage)}},Object(_.c)({curUser:"userInfo"})),created:function(){if(this.createYearOption(),this.typeUnions.length||this.getUnionType(),this.dataSearchInput)return this.dataSearch=d()({},this.dataSearch,this.dataSearchInput),void this.searchUser();this.selectStatusFilterForCurUser()},mounted:function(){this.curUser&&this.changeSelectStatus()},methods:{checkPermissionApprove:function(){var t=this;return l()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xt.a.canPer({permission:"union.change-all-status"});case 3:a=e.sent,t.canPermissionApprove=a.data.success||!1,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),f.a.showMessage("Không lấy được quyền của user!","error",t.titleToast.error);case 10:case"end":return e.stop()}},e,t,[[0,7]])}))()},selectStatusFilterForCurUser:function(){!this.curUser||parseInt(this.curUser.ErpPosition.id)!==St.DEPUTY_DIRECTTOR_HR&&parseInt(this.curUser.ErpPosition.id)!==St.DIRECTTOR_HR||(this.getUnionOffers(),this.firstSelectStatus=!1)},showAction:function(t){return t=JSON.parse(i()(t)).map(function(t){return t.id}),!!(this.canPermissionApprove||parseInt(this.curUser.ErpPosition.id)===St.DEPUTY_DIRECTTOR_HR||parseInt(this.curUser.ErpPosition.id)===St.DIRECTTOR_HR||t&&t.length>0&&t.includes(parseInt(this.curUser.User.id)))},changeSelectStatus:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.checkPermissionApprove();case 2:parseInt(t.curUser.ErpPosition.id)!==St.DEPUTY_DIRECTTOR_HR&&parseInt(t.curUser.ErpPosition.id)!==St.DIRECTTOR_HR&&(t.canPermissionApprove?t.$refs.selectStatus.handleInput([{id:2,name:"Chờ C&B duyệt"}]):t.$refs.selectStatus.handleInput([{id:1,name:"Chờ HR duyệt"}]));case 3:case"end":return e.stop()}},e,t)}))()},checkIfImage:function(t){return/\.(jpg|jpeg|png|gif|bmp|svg)$/i.test(t)},getPhoneNumberByUserId:function(t){var e=this;return l()(o.a.mark(function a(){var n,i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.staffInfo.phoneNumber="",a.prev=1,e.loadingPhone=!0,n={user_id:t},a.next=6,kt.a.getPhoneNumber(n);case 6:(i=a.sent).data.success?e.staffInfo.phoneNumber=i.data.data.tel||"":f.a.showMessage(i.data.message||"Không lấy được số điện thoại của user","warning");case 8:return a.prev=8,e.loadingPhone=!1,a.finish(8);case 11:case"end":return a.stop()}},a,e,[[1,,8,11]])}))()},openUnionOfferInfoModal:function(t){this.unionModal.id=t,this.typeEdit="show",this.triggerEdit=!this.triggerEdit,this.$bvModal.show("modal-add-union")},openStaffProfileScreen:function(t){window.open("/adm/profile/staff/"+t,"_blank")},getUnionOffers:function(){var t=this;return l()(o.a.mark(function e(){var a,n,i,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,a=t.convertDataFilter(),n={page:t.pageData.currentPage,limit:t.pageData.perPage},i=d()({},a,n),e.prev=4,e.next=7,O.a.getUnionOffers(i);case 7:(s=e.sent).data.success?(t.unionOffers=s.data.data,t.pageData.totalItems=s.data.total,t.pageData.totalPages=s.data.last_page,t.pageData.totalRow=s.data.total,t.pageData.currentPage=s.data.current_page,t.pageData.perPage=s.data.per_page):f.a.showMessage(s.data.message,"error",t.titleToast.error),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),f.a.showMessage("Không lấy được danh sách đề xuất công đoàn","error",t.titleToast.error);case 14:return e.prev=14,t.loading=!1,e.finish(14);case 17:case"end":return e.stop()}},e,t,[[4,11,14,17]])}))()},convertDataFilter:function(){var t=d()({},this.filter);return t.department=t.department?t.department.split(","):null,t.position=t.position?t.position.split(","):null,t.region=t.region?t.region.split(","):null,t.province=t.province?t.province.split(","):null,t.station=t.station?t.station.split(","):null,t.union_type=t.union_type?t.union_type.split(","):null,t.status=t.status?t.status.split(","):null,t.deadline&&(t.deadline_start=f.a.formatDate(t.deadline.start,"YYYY-MM-DD"),t.deadline_end=f.a.formatDate(t.deadline.end,"YYYY-MM-DD")),t.created&&(t.created_start=f.a.formatDate(t.created.start,"YYYY-MM-DD"),t.created_end=f.a.formatDate(t.created.end,"YYYY-MM-DD")),delete t.deadline,delete t.created,t},reject:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.rejectModalData.isLoading=!0,a=t.rejectModalData.reasonOther?t.rejectModalData.reasonSelected+", "+t.rejectModalData.reasonOther:t.rejectModalData.reasonSelected){e.next=6;break}return f.a.showMessage("Vui lòng chọn lý do từ chối","error",t.titleToast.error),t.rejectModalData.isLoading=!1,e.abrupt("return");case 6:return e.prev=6,e.next=9,O.a.changeStatusUnionOffer({union_offer_id:t.rejectModalData.unionOfferId,status:t.unionStatus.rejected,union_type:t.rejectModalData.unionType,reason:a});case 9:if(!(n=e.sent).data.success){e.next=21;break}return f.a.showMessage('Đã từ chối đề xuất"',"success",t.titleToast.success),t.$bvModal.hide("modal-reject-union"),t.rejectModalData.unionOfferId=null,t.rejectModalData.unionType=null,t.rejectModalData.reasonSelected=null,t.rejectModalData.reasonOther="",e.next=19,t.getUnionOffers();case 19:e.next=22;break;case 21:f.a.showMessage(n.data.message,"error",t.titleToast.error);case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(6),f.a.showMessage("Không thể từ chối đề xuất công đoàn","error",t.titleToast.error);case 27:return e.prev=27,t.rejectModalData.isLoading=!1,e.finish(27);case 30:case"end":return e.stop()}},e,t,[[6,24,27,30]])}))()},showHandlerModal:function(t){this.handlerModalData.list=t,this.$bvModal.show("modal-handler-list")},showRejectModal:function(t,e){this.rejectModalData.unionOfferId=t,this.rejectModalData.unionType=e,this.$bvModal.show("modal-reject-union")},showStaffContactModal:function(t,e,a){this.getPhoneNumberByUserId(a),this.staffContactInfo.userId=a,this.staffContactInfo.fullName=t,this.staffContactInfo.position=e,this.staffContactInfo.phone=this.staffInfo.phoneNumber,this.$bvModal.show("modal-staff-contact")},colorTagStatus:function(t){switch(t){case this.unionStatus.pending_hr:case this.unionStatus.pending_cb:return"bg-tag-pending";case this.unionStatus.approved:return"bg-tag-approved";case this.unionStatus.rejected:return"bg-tag-rejected";default:return"bg-tag-status"}},formatDateTime:function(t,e){return f.a.formatDate(t,e)},showCreateUnionModal:function(){this.typeEdit="create",this.triggerEdit=!this.triggerEdit,this.$bvModal.show("modal-add-union")},showImage:function(t){this.$el.querySelector(".doc-img").$viewer.show()},covertMoney:function(t){return f.a.formatMoney(t)},getUnionType:function(){var t=this;O.a.getUnionTypes().then(function(e){if(e.data.success&&(t.typeUnions=e.data.data,t.typeUnions.length)){var a=[];t.typeUnions=t.typeUnions.sort(function(t,e){var a=+t.type-+e.type;return 0!==a?a:+t.seniority-+e.seniority}),t.typeUnions.forEach(function(e){-1===a.indexOf(e.type)&&(a.push(e.type),t.typeUnionOptions.push(d()({},e,{text:e.name,value:e.type})))})}}).catch(function(t){return console.error("error getUnionTypes",t)})},createYearOption:function(){for(var t=(new Date).getFullYear(),e=0;e<10;e++)this.optionsYear.push({text:"Năm "+(t-e),value:t-e})},changeUnionStatus:function(t,e,a){var n=this;return l()(o.a.mark(function i(){var s,r;return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n.loading=!0,s={union_offer_id:t,union_type:e,status:a},i.prev=2,i.next=5,O.a.changeStatusUnionOffer(s);case 5:if(!(r=i.sent).data.success){i.next=12;break}return f.a.showMessage("Đã duyệt đề xuất thành công","success",n.titleToast.success),i.next=10,n.getUnionOffers();case 10:i.next=13;break;case 12:f.a.showMessage(r.data.message,"warn",n.titleToast.warning);case 13:i.next=18;break;case 15:i.prev=15,i.t0=i.catch(2),f.a.showMessage("Không thể duyệt đề xuất công đoàn","error",n.titleToast.error);case 18:return i.prev=18,n.loading=!1,i.finish(18);case 21:case"end":return i.stop()}},i,n,[[2,15,18,21]])}))()},formatDate:function(t,e){if(t){var a=new Date(t),n=a.getDate()<10?"0"+a.getDate():a.getDate(),i=a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1,s=a.getFullYear();return e?i+"/"+s:n+"/"+i+"/"+s}},scrollHandle:function(t){},handleChange:function(t){t&&(this.dataChange=t)},countUserHasDependant:function(){var t=this;m.countUserHasDependant().then(function(e){!0===e.data.success?t.numUserHasDependant=e.data.data.countUserHasDependant:f.a.showMessage(e.data.message,"error",t.titleToast.error)}).then(function(){t.$stopLoading()}).catch(function(e){f.a.showMessage("Không lấy được dữ liệu tổng số người đăng kí NPT","error",t.titleToast.error),t.$stopLoading()})},pageChanged:function(t){this.pageData.currentPage=t,this.getUnionOffers()},isNumber:function(t){var e=(t=t||window.event).which?t.which:t.keyCode;if(!(e>31&&(e<48||e>57)))return!0;t.preventDefault()},getUnionsByMasterProfileId:function(t,e){var a=this;return l()(o.a.mark(function n(){var i;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i={id:t.master_profile_id||t.id,region_id:t.region_id||"",province_id:t.province_id||"",station:t.station||""},a.singleItem=t,e||(a.listItems=[]),n.next=5,m.getUnionsByMasterProfileId(i).then(function(t){e&&(a.listItems=[]),!0===t.data.success?a.listItems=t.data.data:f.a.showMessage(t.data.message,"warn",a.titleToast.warning)}).catch(function(t){f.a.showMessage("Không lấy được dữ liệu","warn",a.titleToast.warning)}).then(function(){a.$stopLoading()});case 5:case"end":return n.stop()}},n,a)}))()},showModalFile:function(t){this.fileDocuments=t,this.fileDocumentSrcs=this.fileDocuments.map(function(t){return t.link_file}),this.$refs.imageDocs.show()},handleSelectedProvince:function(t){this.filter.province=t?t.map(function(t){return t.id}).toString():""},handleStationSelected:function(t){this.filter.station=t?t.map(function(t){return t.id}).toString():""},handleSelectedRegion:function(t){this.filter.region=t?t.map(function(t){return t.id}).toString():"",t||(this.filter.province="")},handleSelectedUnionType:function(t){this.filter.union_type=t?t.map(function(t){return t.type}).toString():""},handleSelectedStatus:function(t){this.filter.status=t?t.map(function(t){return t.id}).toString():"",this.firstSelectStatus&&(this.getUnionOffers(),this.firstSelectStatus=!1)},searchUser:function(t,e){var a=this;this.loading=!0,e&&(this.pageData.currentPage=1,this.dataSearch.page=1),this.dataSearch.page=t,m.getUnionOffers(this.dataSearch).then(function(t){t.data.success?(a.pageData.totalItems=t.data.pagination.count,a.pageData.perPage=t.data.pagination.limit,a.pageData.totalPages=t.data.pagination.pageCount,a.pageData.totalRow=t.data.pagination.totalRow,a.pageData.current=t.data.pagination.page,a.pageData.count=t.data.pagination.count,a.items=t.data.data):a.$refs["modal-noti"].show()}).finally(function(t){a.loading=!1})},searchStaff:function(){this.searchUser()},updateOk:function(){"edit"===this.typeEdit?this.singleItem.id&&(this.dataChange=!0,this.getUnionsByMasterProfileId(this.singleItem)):"create"===this.typeEdit&&this.searchStaff()},reloadPage:function(){this.dataChange&&(this.searchUser(this.pageData.currentPage),this.dataChange=!1),this.singleItem={},this.listItems=[]},deleteUnionOffer:function(t){var e=this;if(confirm("Bạn có chắc chắn muốn xóa đề xuất của "+t.fullname+" không ?")){var a={unionId:t.id};this.$startLoading(),m.deleteUnionOffer(a).then(function(a){a.data.success?(e.dataChange=!0,e.getUnionsByMasterProfileId(t),f.a.showMessage(a.data.message,"success",e.titleToast.success)):!1===a.data.success?f.a.showMessage(a.data.message,"warning",e.titleToast.warning):(e.disableInput=!0,f.a.showMessage("Bạn không có quyền xóa !","warning",e.titleToast.warning))}).catch(function(t){f.a.showMessage("Đã có lỗi xảy ra","warning",e.titleToast.warning)}).then(function(){e.$stopLoading()})}},openEditModal:function(t,e,a,n){n&&n.preventDefault(),this.currEditing=e,this.triggerEdit=!this.triggerEdit,this.typeEdit=t,a?(this.isChangeStaffCode=!1,this.staffcode=a):(this.isChangeStaffCode=!0,this.staffcode=null)},showModalNote:function(){this.$refs["modal-note"].show()},exportUnion:function(){var t="";for(var e in this.dataSearch)null!==this.dataSearch[e]&&""!==this.dataSearch[e]&&"page"!==e&&(t+=e+"="+this.dataSearch[e]+"&");window.open("/erp/ErpUnionOffer/exportExcelUnions?"+t,"_blank")},disableRadioFunction:function(){this.disableInput=!0},setEditFile:function(){this.allowEdit=!this.allowEdit},reloadChange:function(){this.fileDependant=[],this.notEnoughFile=null,this.dataChange&&this.getUnionsByMasterProfileId(this.singleItem),this.allowEdit=!1,this.dataChange=!1},deleteFile:function(t,e,a,n){if(n){if(t.target.classList.contains("ion-md-close-circle"))this.fileDeleted[e].push(this.fileDependant[e].files[a].id),t.target.setAttribute("title","Lấy lại");else{var i=this.fileDeleted[e].indexOf(this.fileDependant[e].files[a].id);i>=0&&(this.fileDeleted[e].splice(i,1),t.target.setAttribute("title","Xóa"))}t.target.classList.toggle("ion-md-close-circle"),t.target.classList.toggle("ion-md-refresh-circle"),t.target.nextElementSibling.classList.toggle("file-deleted")}else this.fileAdded[e].splice(a,1)},formatNames:function(t){return t?t.length+" files selected":""},getUrl:function(t){return URL.createObjectURL(t)},openLink:function(t){window.open(t,"_blank")},validateInput:function(t,e,a){return f.a.validValue(t,e,a)},handleDepartmentSelected:function(t){this.filter.department=t?t.map(function(t){return t.id}).toString():""},handlePositionSelected:function(t){this.filter.position=t?t.map(function(t){return t.id}).toString():""}}};var Tt=function(t){a("r6qh")},Dt=Object(y.a)(Mt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"p-3"},[a("div",{staticClass:"row filter pb-2 pl-2 pr-2 justify-content-between input-border"},[a("div",{staticClass:"mb-1 pr-1 input-filter"},[a("SingleSelectUser",{staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{placeholder:"Họ tên/username"},on:{onChange:function(e){t.filter.user_id=e?e.id:null}}})],1),t._v(" "),a("div",{staticClass:"mb-1 pl-1 pr-1 input-filter"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.identify_id,expression:"filter.identify_id"}],staticClass:"form-control",attrs:{type:"number",placeholder:"CMND/CCCD",disabled:!1},domProps:{value:t.filter.identify_id},on:{input:[function(e){e.target.composing||t.$set(t.filter,"identify_id",e.target.value)},function(e){return t.validateInput(t.filter,"identify_id",{length:12})}]}})]),t._v(" "),a("div",{staticClass:"mb-1 pl-1 pr-1 input-filter"},[a("MultiSelectDepartment",{staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{"department-ids":t.filter.department,"auto-close":!0,"hide-selected":!0,placeholder:"Bộ phận"},on:{handleDepartmentSelected:t.handleDepartmentSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 pl-1 pr-1 input-filter"},[a("MultiSelectPosition",{staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{"department-ids":t.filter.department,"position-ids":t.filter.position,autoClose:!0,hideSelected:!0,placeholder:"Vị trí"},on:{handlePositionSelected:t.handlePositionSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 pl-1 pr-1 input-filter"},[a("MultiSelectRegion",{attrs:{customClass:"multiselect-ghtk multiselect-no-horizontal",autoClose:!0,hideSelected:!0,regions:t.filter.region?t.filter.region:""},on:{handleSelectedRegion:t.handleSelectedRegion}})],1),t._v(" "),a("div",{staticClass:"mb-1 pl-1 pr-1 input-filter"},[a("MultiSelectProvince",{attrs:{customClass:"multiselect-ghtk multiselect-no-horizontal","province-ids":t.filter.province,region:t.filter.region,"auto-close":!0,"hide-select":!0},on:{handleProvinceSelected:t.handleSelectedProvince}})],1),t._v(" "),a("div",{staticClass:"mb-1 pl-1 input-filter"},[a("MultiSelectStation",{staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{"province-ids":t.filter.province,autoClose:!0,hideSelected:!0},on:{input:t.handleStationSelected}})],1)]),t._v(" "),a("div",{staticClass:"row filter pb-2 pl-2 pr-2 justify-content-between input-border"},[a("div",{staticClass:"mb-1 pr-1 input-filter"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.union_offer_code,expression:"filter.union_offer_code"}],staticClass:"form-control",attrs:{type:"number",placeholder:"Mã đề xuất",disabled:!1},domProps:{value:t.filter.union_offer_code},on:{input:[function(e){e.target.composing||t.$set(t.filter,"union_offer_code",e.target.value)},function(e){return t.validateInput(t.filter,"order_id",{length:12})}]}})]),t._v(" "),a("div",{staticClass:"mb-1 pl-1 pr-1 input-filter"},[a("MultiSelectUnionType",{staticClass:"multiselect-ghtk multiselect-no-horizontal",on:{onChange:t.handleSelectedUnionType}})],1),t._v(" "),a("div",{staticClass:"mb-1 pl-1 pr-1 input-filter"},[a("MultiSelectUnionStatus",{ref:"selectStatus",staticClass:"multiselect-ghtk multiselect-no-horizontal",on:{onChangeStatusSelected:t.handleSelectedStatus}})],1),t._v(" "),a("div",{staticClass:"mb-1 pl-1 pr-1 input-filter"},[a("SingleSelectUser",{staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{placeholder:"Người xử lý"},on:{onChange:function(e){t.filter.handler_id=e?e.id:null}}})],1),t._v(" "),a("div",{staticClass:"mb-1 pl-1 pr-1 input-filter"},[a("v-date-picker",{attrs:{mode:"range",locale:"vi",color:"green","input-props":{placeholder:"Hạn xử lý",style:"font-size:14px; line-height: unset",class:"form-control rounded"},popover:{visibility:"focus"}},model:{value:t.filter.deadline,callback:function(e){t.$set(t.filter,"deadline",e)},expression:"filter.deadline"}})],1),t._v(" "),a("div",{staticClass:"mb-1 pl-1 pr-1 input-filter"},[a("v-date-picker",{attrs:{mode:"range",locale:"vi",color:"green","input-props":{placeholder:"Ngày tạo",style:"font-size:14px; line-height: unset",class:"form-control rounded"},popover:{visibility:"focus"}},model:{value:t.filter.created,callback:function(e){t.$set(t.filter,"created",e)},expression:"filter.created"}})],1),t._v(" "),a("div",{staticClass:"text-right input-filter pl-1"},[a("button",{staticClass:"btn btn-ghtk rounded w-100",on:{click:t.getUnionOffers}},[t._v("Tìm kiếm")])])]),t._v(" "),a("div",{staticClass:"table-sticky mh-70 table-data"},[a("table",{staticClass:"table table-sm mb-0 bordered",attrs:{"aria-describedby":"list union offer"}},[t._m(0),t._v(" "),a("tbody",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"position-relative"},[t._l(t.unionOffers,function(e,n){return a("tr",{key:n},[a("td",{staticClass:"info p-2"},[a("div",{staticClass:"d-flex justify-content-between"},[a("div",{staticClass:"profile mt-1 mr-2 mb-1"},[a("img",{staticClass:"img-circle image-gallery mt-2 mr-2 mb-2",attrs:{alt:"avatar",src:e.user_info.avatar?e.user_info.avatar:t.staffInfo.defaultAvatar}}),t._v(" "),a("div",{staticClass:"d-inline-block"},[a("div",{staticClass:"text-black member-info font-weight-600"},[t._v(t._s(e.user_info.full_name)+" ("+t._s(e.user_info.username)+")")]),t._v(" "),a("div",{staticClass:"text-black position"},[t._v(t._s(e.user_info.position)+" - "+t._s(e.user_info.station))])])]),t._v(" "),a("div",{staticClass:"btn-profile m-2"},[a("b-dd",{staticClass:"w-100 justify-content-end mb-2",attrs:{left:"",variant:"outline-ghtk w-100","toggle-class":"btn-pill btn-sm",dropdown:"","no-caret":"",menuClass:"border-radius-3 p-0 border-ghtk overflow-hidden"}},[a("span",{staticClass:"w-100",attrs:{slot:"button-content"},slot:"button-content"},[t._v("\n                Xem\n              ")]),t._v(" "),a("b-dd-item",{staticClass:"action-view border-bottom-ghtk",on:{click:function(a){return t.openUnionOfferInfoModal(e.data.id)}}},[t._v("\n                  Xem đề xuất "),a("em",{staticClass:"fas fa-chevron-right float-right"})]),t._v(" "),a("b-dd-item",{staticClass:"action-view",on:{click:function(a){return t.openStaffProfileScreen(e.user_info.id)}}},[t._v("\n                  Xem profile "),a("em",{staticClass:"fas fa-chevron-right float-right"})])],1),t._v(" "),a("button",{on:{click:function(a){return t.showStaffContactModal(e.user_info.full_name,e.user_info.position,e.user_info.id)}}},[t._v("\n                Gọi\n              ")])],1)]),t._v(" "),a("h5",{staticClass:"text-ghtk"},[t._v("Ngày tạo đề xuất: "+t._s(t.formatDateTime(e.data.created_at,"DD/MM/YYYY")))]),t._v(" "),a("div",{staticClass:"d-flex flex-wrap mt-2"},[a("h6",{staticClass:"tag p-1 w-max-content bg-ghtk text-white d-flex justify-content-center align-center text-center mr-2"},[t._v("\n              Công đoàn\n            ")]),t._v(" "),a("h6",{staticClass:"tag p-1 w-max-content text-white d-flex justify-content-center align-center text-center",class:t.colorTagStatus(e.data.status)},[t._v("\n              "+t._s(e.data.status_name)+"\n            ")])]),t._v(" "),a("div",{staticClass:"document-union"},[[a("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"position-relative mr-1 d-inline-block"},[a("div",{staticClass:"num-img-extend",class:e.data.docs.length>1?"":"d-none"},[t._v("\n                  +"+t._s(e.data.docs.length-1)+"\n                ")]),t._v(" "),t._l(e.data.docs,function(e,n){return[t.checkIfImage(e.file_url)?a("img",{key:n,staticClass:"image-document",class:n<1?"d-inline-block":"d-none",attrs:{src:e.file_url,alt:"Hồ sơ"}}):a("div",[a("b-link",{on:{click:function(a){return t.openLink(e.file_url)}}},[a("h6",[a("b-badge",{attrs:{variant:"primary"}},[t._v(t._s(e.file_name))])],1)])],1)]})],2)]],2)]),t._v(" "),a("td",{staticClass:"p-2"},[a("h5",{staticClass:"text-ghtk mt-2 pt-1"},[t._v("CĐ."+t._s(e.data.code)+" - "+t._s(e.data.name))]),t._v(" "),a("h5",{staticClass:"text-black font-weight-500 font-14"},[t._v("Hạn xử lý: "+t._s(t.formatDateTime(e.data.deadline,"HH:mm:ss DD/MM/YYYY")))]),t._v(" "),a("h5",{staticClass:"text-black font-weight-500 font-14 mb-2"},[t._v("Chi tiết log")]),t._v(" "),a("UnionLogs",{attrs:{unionOffer:e.data}})],1),t._v(" "),a("td",{staticClass:"border-left p-2"},[a("div",{staticClass:"mt-1 mb-2 d-flex justify-content-center"},[a("h5",{staticClass:"text-ghtk bg-transparent border-0 p-0 mt-2 mb-1 cursor-pointer",on:{click:function(a){return t.showHandlerModal(e.user_handle)}}},[t._v("\n              Người xử lý\n            ")])]),t._v(" "),t._l(e.user_handle,function(e,n){return a("div",{key:n,staticClass:"mt-1",class:n>1?"d-none":"d-flex"},[a("img",{staticClass:"img-small mr-2",attrs:{src:e.avatar?e.avatar:t.staffInfo.defaultAvatar,alt:"avatar"}}),t._v(" "),a("span",{staticClass:"text-black"},[t._v(t._s(e.username)+" - "+t._s(e.station))])])}),t._v(" "),t.showAction(e.user_handle)?a("div",{staticClass:"action d-flex flex-column align-items-center mt-3"},[e.data.status===t.unionStatus.pending_hr?a("div",[a("button",{staticClass:"btn btn-outline-ghtk pt-1 pb-1",on:{click:function(a){return t.changeUnionStatus(e.data.id,e.data.type,t.unionStatus.pending_cb)}}},[t._v("\n                HR duyệt\n              ")])]):t._e(),t._v(" "),e.data.status===t.unionStatus.pending_cb?a("div",[a("button",{staticClass:"btn btn-outline-ghtk pt-1 pb-1",on:{click:function(a){return t.changeUnionStatus(e.data.id,e.data.type,t.unionStatus.approved)}}},[t._v("\n                C&B duyệt\n              ")])]):t._e(),t._v(" "),e.data.status<t.unionStatus.approved?a("div",[a("button",{staticClass:"btn btn-outline-danger pt-1 pb-1",on:{click:function(a){return t.showRejectModal(e.data.id,e.data.type)}}},[t._v("\n                Từ chối\n              ")])]):t._e()]):t._e()],2)])}),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]},[t._m(1)]),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:!t.loading&&0===t.unionOffers.length,expression:"!loading && unionOffers.length === 0"}]},[t._m(2)])],2)])]),t._v(" "),a("b-modal",{ref:"ultraWide",attrs:{"hide-footer":"",id:"modal-list-union-mp",title:"Chi tiết công đoàn","modal-class":"modal-xxl",centered:""},on:{hidden:t.reloadPage}},[a("table",{staticClass:"table table-hover table-bordered table-sm"},[a("thead",{staticClass:"thead-light"},[a("tr",[a("th",[t._v("STT")]),t._v(" "),a("th",[t._v("Họ và tên")]),t._v(" "),a("th",[t._v("Chế độ")]),t._v(" "),a("th",[t._v("Tiền chế độ")]),t._v(" "),a("th",[t._v("Giấy tờ")]),t._v(" "),a("th",[t._v("Trạng thái")]),t._v(" "),a("th",[t._v("Ngày đề xuất")]),t._v(" "),a("th",[t._v("Thao tác")])])]),t._v(" "),a("tbody",t._l(t.listItems,function(e,n){return a("tr",{key:e.id},[a("td",[t._v(t._s(n+1))]),t._v(" "),a("td",[t._v(t._s(e.fullname))]),t._v(" "),a("td",[t._v(t._s(e.desc))]),t._v(" "),a("td",[t._v(t._s(t.covertMoney(e.money)))]),t._v(" "),a("td",[a("div",{staticClass:"action-btn"},[a("b-btn",{attrs:{size:"sm",variant:"outline-ghtk"},on:{click:function(a){return t.showModalFile(e.files)}}},[a("i",{staticClass:"icon ion-ios-document"})])],1)]),t._v(" "),a("td",[a("b-form-select",{attrs:{size:"sm",options:t.optionStatus},on:{change:function(a){for(var n=arguments.length,i=Array(n);n--;)i[n]=arguments[n];return t.changeUnionStatus.apply(void 0,[e].concat(i))}},model:{value:e.status,callback:function(a){t.$set(e,"status",a)},expression:"info.status"}})],1),t._v(" "),a("td",[t._v(t._s(t.formatDate(e.created)))]),t._v(" "),a("td",[a("div",{staticClass:"action-btn"},[a("span",[a("a",{attrs:{href:"#"},on:{click:function(a){return t.openEditModal("edit",e.id,null,a)}}},[t._v("\n              Chỉnh sửa\n            ")]),t._v("\n            |\n            "),a("a",{staticClass:"text-danger",attrs:{href:"#"},on:{click:function(a){return t.deleteUnionOffer(e,a)}}},[t._v("\n              Xóa\n            ")])])])])])}),0)])]),t._v(" "),a("b-modal",{ref:"modal-noti",attrs:{id:"bv-modal-noti","hide-footer":""},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v("\n      Thông báo\n    ")]},proxy:!0}])},[t._v(" "),a("div",{staticClass:"d-block text-center"},[a("h3",[t._v("Không tìm thấy dữ liệu")]),t._v(" "),a("b-button",{staticClass:"mt-3",attrs:{block:""},on:{click:function(e){return t.$bvModal.hide("bv-modal-noti")}}},[t._v("Đóng")])],1)]),t._v(" "),a("modal-create-union",{attrs:{currEditing:t.currEditing,trigger:t.triggerEdit,type:t.typeEdit,staffcode:t.staffcode,typeUnions:t.typeUnions,typeUnionOptions:t.typeUnionOptions,isChangeStaffCode:t.isChangeStaffCode,unionId:t.unionModal.id},on:{onCreated:function(e){return t.getUnionOffers()}}}),t._v(" "),a("b-modal",{attrs:{id:"modal-reject-union","hide-footer":"",title:"Từ chối","modal-class":"modal-reject-union"}},[a("b-form-group",{directives:[{name:"loading",rawName:"v-loading",value:t.rejectModalData.isLoading,expression:"rejectModalData.isLoading"}],attrs:{label:"Chọn lý do từ chối"}},[a("label",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Chọn lý do từ chối")]),t._v(" "),t._l(t.rejectModalData.reason,function(e){return a("div",{staticClass:"d-inline-flex"},[a("b-form-checkbox",{staticClass:"button-checkbox",attrs:{disabled:t.rejectModalData.isReadOnly,value:e,name:"check-button",button:"","button-variant":"checkbox-outline-ghtk"},model:{value:t.rejectModalData.reasonSelected,callback:function(e){t.$set(t.rejectModalData,"reasonSelected",e)},expression:"rejectModalData.reasonSelected"}},[t._v("\n          "+t._s(e)+"\n        ")])],1)})],2),t._v(" "),a("b-form-group",[a("label",{staticClass:"col-form-label font-14"},[t._v("Lý do khác:")]),t._v(" "),a("b-form-textarea",{attrs:{placeholder:"Nhập lý do từ chối đề xuất"},model:{value:t.rejectModalData.reasonOther,callback:function(e){t.$set(t.rejectModalData,"reasonOther",e)},expression:"rejectModalData.reasonOther"}})],1),t._v(" "),a("div",{attrs:{align:"center"}},[a("b-btn",{attrs:{variant:"ghtk"},on:{click:function(e){return t.reject()}}},[t._v("\n        Xác nhận\n      ")])],1)],1),t._v(" "),a("b-modal",{attrs:{id:"modal-handler-list","hide-footer":"",title:"Danh sách người xử lý","modal-class":"modal-handler-list scrollable",scrollable:""}},[a("div",{staticClass:"d-flex flex-column"},[a("div",t._l(t.handlerModalData.list,function(e,n){return a("div",{key:n,staticClass:"handler-list p-2"},[a("div",{staticClass:"d-flex align-content-center"},[a("img",{staticClass:"img-circle img-medium mr-2",attrs:{src:e.avatar?e.avatar:t.staffInfo.defaultAvatar,alt:"avatar"}}),t._v(" "),a("div",{staticClass:"ms-1 d-flex align-items-center"},[a("strong",{staticClass:"text-highlight"},[t._v("\n                "+t._s(e.full_name)+" - "+t._s(e.username)+" - "+t._s(e.position)+"\n              ")])])])])}),0)])]),t._v(" "),a("b-modal",{attrs:{id:"modal-staff-contact","hide-footer":"",title:"Gọi nhân viên","modal-class":"modal-handler-list scrollable",size:"sm"}},[a("strong",[t._v("Nhân viên: ")]),a("span",[t._v(t._s(this.staffContactInfo.fullName))]),t._v(" "),a("br"),t._v(" "),a("strong",[t._v("Vị trí: ")]),a("span",[t._v(t._s(this.staffContactInfo.position))]),t._v(" "),a("br"),t._v(" "),a("strong",[t._v("Số điện thoại: ")]),t._v(" "),a("SensitiveLabel",{staticClass:"d-inline",attrs:{"data-input":t.staffInfo.phoneNumber,"user-id":t.staffContactInfo.userId,type:"tel",source:"union-management"}}),t._v(" "),t.loadingPhone?a("span",[a("em",{staticClass:"fa fa-spin fa-spinner"})]):t._e(),t._v(" "),a("div",{staticClass:"d-flex justify-content-center mt-3"},[a("b-btn",{attrs:{variant:"ghtk"},on:{click:function(e){return t.$bvModal.hide("modal-staff-contact")}}},[t._v("Đóng")])],1)],1),t._v(" "),a("div",{staticClass:"d-flex justify-content-between pt-3"},[a("div",{staticClass:"paging mt-1 d-block w-75"},[a("div",{staticClass:"col text-left p-0 mt-2"},[a("b",[t._v("\n          Bản ghi/ trang\n        ")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.pageData.perPage,expression:"pageData.perPage"}],staticClass:"form-control form-control-sm w-4re text-ghtk rounded border-ghtk d-inline-block",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.pageData,"perPage",e.target.multiple?a:a[0])},function(e){return t.getUnionOffers()}]}},[a("option",[t._v("5")]),t._v(" "),a("option",[t._v("10")]),t._v(" "),a("option",[t._v("25")]),t._v(" "),a("option",[t._v("50")]),t._v(" "),a("option",[t._v("100")])]),t._v(" "),a("div",{staticClass:"z-0 d-inline-block"},[a("b-pagination",{staticClass:"paginator-ghtk mb-0",attrs:{size:"sm",align:"left","total-rows":+t.pageData.totalItems,"per-page":+t.pageData.perPage},on:{change:t.pageChanged},model:{value:t.pageData.currentPage,callback:function(e){t.$set(t.pageData,"currentPage",e)},expression:"pageData.currentPage"}})],1)])]),t._v(" "),a("div",[a("button",{staticClass:"btn btn-ghtk",on:{click:t.showCreateUnionModal}},[a("em",{staticClass:"ion ion-ios-add"}),t._v(" Thêm đề xuất\n      ")])])])],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",{staticClass:"text-center text-black"},[e("th",{staticClass:"w-30"},[e("b",[this._v("Nhân viên")])]),this._v(" "),e("th",{staticClass:"border-right border-left"},[e("b",[this._v("Trạng thái")])]),this._v(" "),e("th",{staticClass:"w-15"},[e("b",[this._v("Thao tác")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"font-weight-bold text-center no-record",attrs:{colspan:"3"}},[e("div",{staticClass:"my-5"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"font-weight-bold text-center no-record",attrs:{colspan:"3"}},[e("div",{staticClass:"my-5"},[this._v("Không tìm thấy đề xuất công đoàn !")])])}],!1,Tt,"data-v-d397965c",null);e.default=Dt.exports},"7zFw":function(t,e,a){"use strict";var n=a("mvHQ"),i=a.n(n),s=a("Xxa5"),o=a.n(s),r=a("exGp"),l=a.n(r),c=a("4pAE");e.a={getCandidates:function(t){return c.a.get("/recruitment/candidates",{params:t})},countCandidatesByStatus:function(t){return c.a.get("/recruitment/candidates/count-by-status",{params:t})},rejectCandidate:function(t,e){var a=this;return l()(o.a.mark(function n(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",c.a.post("/recruitment/candidates/"+e+"/reject",t));case 1:case"end":return a.stop()}},n,a)}))()},noteCandidate:function(t){var e=this;return l()(o.a.mark(function a(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.a.post("/recruitment/candidates/add-note",t));case 1:case"end":return e.stop()}},a,e)}))()},getPhoneCandidate:function(t){return c.a.get("/recruitment/candidates/get-phone",{params:t})},toChannelChat:function(t){return c.a.post("/recruitment/candidates/add-hr-to-channel",t)},getCandidateReview:function(t){return c.a.get("/recruitment/candidate/get-candidate-review",{params:t})},reviewCandidate:function(t){return c.a.post("/recruitment/candidate/create-candidate-review",t)},createSchedule:function(t){return c.a.post("/recruitment/candidates/schedule/create",t)},createAccount:function(t,e){return c.a.post("/recruitment/candidates/"+e+"/approve",t)},getTags:function(t){return c.a.get("/recruitment/tags/list",{params:t})},createTag:function(t){return c.a.post("/recruitment/tags/create",t)},deleteTag:function(t){return c.a.delete("/recruitment/tags/delete",{params:t})},attachTag:function(t){return c.a.post("/recruitment/tags/attach",t)},detachTag:function(t){return c.a.delete("/recruitment/tags/detach",{params:t})},getCandidateInfo:function(t){return c.a.get("/recruitment/candidate/get-candidate-info",{params:t})},updateCandidateInfo:function(t){return c.a.post("/recruitment/candidate/update-candidate-info",t)},createCandidate:function(t){return c.a.post("/recruitment/candidate/create-candidate-info",t)},getJobs:function(t){return c.a.get("/recruitment/jobs/list")},getSchedule:function(t){return c.a.get("/recruitment/candidates/get-schedule",{params:t})},import:function(t){return c.a.post("/recruitment/candidate/create-candidate-with-file-upload",t)},getProcessImport:function(t){return c.a.get("/recruitment/candidate/get-process-import-candidate",{params:t})},exportLogCandidateImport:function(t){return c.a.get("/recruitment/candidate/export-log-candidate-import",{params:t,responseType:"blob"})},getCandidateForCloseShift:function(t){return c.a.get("/recruitment/candidates/for-close-shift",{params:t})},closeShiftExplanation:function(t,e){return c.a.post("/recruitment/candidates/"+t+"/close-shift-explanation",e)},getReferralCandidate:function(t){return c.a.get("/recruitment/candidate/get-referral-code-web")},getCountDocument:function(t){return c.a.get("/recruitment/candidates/get-count-document",{params:t})},getDocument:function(t){return c.a.get("/recruitment/candidates/get-document",{params:t})},realDocument:function(t){return c.a.post("/recruitment/candidates/origin-document",t)},getAllJob:function(){var t=this;return l()(o.a.mark(function e(){var a,n,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a="allRecruitmentJob",!sessionStorage.getItem(a)){e.next=3;break}return e.abrupt("return",JSON.parse(sessionStorage.getItem(a)));case 3:return e.prev=3,e.next=6,t.getJobs();case 6:if(!(n=e.sent).data.success){e.next=11;break}return s=n.data.data.map(function(t){return{id:t.id,name:t.name}}),sessionStorage.setItem(a,i()(s)),e.abrupt("return",s);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),console.log(e.t0),e.abrupt("return",[]);case 17:case"end":return e.stop()}},e,t,[[3,13]])}))()}}},"8M/B":function(t,e){},"8PFr":function(t,e){},"8SDm":function(t,e){},"8Yjz":function(t,e){},"8klq":function(t,e){},"8l7q":function(t,e){},"8usR":function(t,e,a){"use strict";var n=a("vfns"),i=a("X1Jv"),s=a("RUzx"),o={name:"select-ethnic",components:{Multiselect:a.n(s).a},props:{ethnicValue:{default:null},placeholder:{type:String,default:"Chọn dân tộc"},disabled:{type:Boolean},state:{default:null,type:Boolean},multiple:{default:!1,type:Boolean}},data:function(){return{storage:null,option:[],options:[]}},created:function(){this.storage=new n.a,this.getListEthnic()},watch:{option:function(t,e){this.$emit("handleSelectedEthnic",t)},ethnicValue:function(t,e){this.setSelectedOption()}},methods:{setSelectedOption:function(){var t=this;this.multiple?this.options.length>0&&this.ethnicValue&&this.ethnicValue.length>0&&(this.option=[],this.ethnicValue.map(function(e){var a=t.options.find(function(t){return t.value===e})||null;a&&t.option.push(a)})):this.options.length>0&&this.ethnicValue?this.option=this.options.find(function(e){return e.value===t.ethnicValue})||null:this.option=null},getListEthnic:function(){var t=this,e=this.storage.get("ethnicList");e&&e.length>0?(this.options=e,this.setSelectedOption()):i.a.getEthnic().then(function(e){e.data.success&&(t.options=e.data.data,t.options&&t.options.length>0&&t.storage.set("ethnicList",t.options),t.setSelectedOption())}).catch(function(t){console.log(t)})}}},r=a("XyMi"),l=Object(r.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("multiselect",{class:{stateTrue:!0===t.state,stateFalse:0==t.state},attrs:{options:t.options,placeholder:t.placeholder,multiple:t.multiple,disabled:t.disabled,label:"name","track-by":"value","close-on-select":!0,selectedLabel:"",deselectLabel:"X",selectLabel:""},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))]),t._v(" "),a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")])])],1)},[],!1,null,null,null);e.a=l.exports},"8xxY":function(t,e){},"903a":function(t,e){},"9RQE":function(t,e){},"9Wgl":function(t,e,a){"use strict";var n=a("Zx67"),i=a.n(n),s=a("Zrlr"),o=a.n(s),r=a("wxAW"),l=a.n(r),c=a("zwoO"),d=a.n(c),u=a("Pf15"),h=a.n(u),p=function(t){function e(){return o()(this,e),d()(this,(e.__proto__||i()(e)).apply(this,arguments))}return h()(e,t),l()(e,null,[{key:"getStatusName",value:function(t){var e=parseInt(t);return this.statusOptions[e]?this.statusOptions[e]:"Không xác định"}}]),e}(a("MUME").a);p.LOCK_STATUS=1,p.DEACTIVATE_STATUS=2,p.ACTIVE_STATUS=3,p.statusOptions={1:"Dừng hoạt động",2:"Khóa tạm thời",3:"Đang hoạt động"},p.statusVariant={1:"danger",2:"warning",3:"ghtk"},p.defaultCriteriaFstar=[{id:"honest",name:"Trung thực",descrip:""},{id:"responsibility",name:"Tinh thần trách nhiệm",descrip:""},{id:"disciplinary",name:"Kỷ luật",descrip:""},{id:"effective",name:"Hiệu quả công việc",descrip:""},{id:"core_values",name:"Nhanh - giá trị cốt lõi",descrip:""},{id:"resolve_problem",name:"Giải quyết vấn đề đến cùng",descrip:""},{id:"creation",name:"Cải tiến, Sáng tạo",descrip:""}],p.defaultManagerCriteriaFstar=[{id:"work_assign",name:"Sắp xếp, phân công công việc",descrip:""},{id:"evaluate_control",name:"Đánh giá, kiểm soát",descrip:""},{id:"train_develop",name:"Đào tạo, phát triển nhân viên",descrip:""},{id:"build_collectivity",name:"Gắn kết, xây dựng tập thể",descrip:""}],p.techCriteriaFstar=[{id:"honest",name:"Cẩn thận",descrip:"Xem xét kỹ lưỡng task đảm nhận, kể cả sau khi đã golive, luôn có những biện pháp để review/check chéo nhằm đảm bảo tính đúng đắn chính xác"},{id:"responsibility",name:"Tinh thần Trách nhiệm",descrip:"Biết nhận trách nhiệm và chịu trách nhiệm cho những task được giao, đảm bảo chất lượng sản phẩm của mình là tốt nhất trước khi đưa cho team khác. Luôn trong trạng thái sẵn sàng support 24/7"},{id:"disciplinary",name:"Kỷ luật",descrip:"Tôn trọng và chấp hành kỷ luật của cty/tập thể, ko để việc cá nhân ảnh hưởng tới công việc chung"},{id:"effective",name:"Teamwork",descrip:"Tinh thần tập thể hòa đồng, tôn trọng, phối hợp và hỗ trợ lẫn nhau, luôn làm rõ và cùng hướng đến việc đạt mục tiêu chung mỗi khi làm việc cùng nhau"},{id:"core_values",name:"Khả năng kiểm soát timeline",descrip:"Estimate task chuẩn, tôn trọng deadline, chủ động phối hợp với các bên liên quan để đảm task hoàn thành đúng deadline. Ko đổ lỗi, ko né trách nhiệm."},{id:"resolve_problem",name:"Chủ động",descrip:"Tự chủ, trách nhiệm, đặt mục tiêu cao cho bản thân và team, mọi hành động đều hướng tới kết quả cụ thể, rõ ràng. Gặp khó khăn, vướng mắc cũng luôn chủ động tìm giải pháp hoặc tối thiểu là chủ động thông báo để các bên liên quan nắm được thông tin"},{id:"creation",name:"Kỹ năng giải quyết vấn đề linh hoạt",descrip:"linh hoạt nhạy bén, ứng phó nhanh trong giải quyết tình huống. Luôn sẵn sàng các giải pháp tình thế/ giải pháp kỹ thuật thay thế khi gặp khó khăn, nhằm đạt yêu cầu của task"}],p.WH_STAFF_POSITIONS=[40,41,42,79,80,124],p.WH_STAFF_ONSITE_POSITIONS=124,p.WH_STAFF_BIG_SIZE_POSITIONS=174,p.WH_STAFF_GROUPS=[23,26],p.whDefaultWork=[{text:"Xuống tải",value:"down_truck"},{text:"Sorting bao",value:"sorting_bag"},{text:"Sorting đơn",value:"sorting_package"},{text:"Làm hàng",value:"labeling"},{text:"Lên tải",value:"up_truck"},{text:"Trung chuyển",value:"transit"}],p.rankingOption=[{text:"Chọn cấp bậc",value:""},{text:"F1",value:"F1"},{text:"F2",value:"F2"},{text:"F3",value:"F3"},{text:"J1",value:"J1"},{text:"J2",value:"J2"},{text:"J3",value:"J3"},{text:"J4",value:"J4"},{text:"J5",value:"J5"},{text:"S1",value:"S1"},{text:"S2",value:"S2"},{text:"S3",value:"S3"},{text:"S4",value:"S4"},{text:"S5",value:"S5"},{text:"Xóa cấp bậc",value:" "}],p.managerLevelOption=[{text:"Chọn cấp quản lý",value:""},{text:"M1",value:"M1"},{text:"M2",value:"M2"},{text:"M3",value:"M3"},{text:"M4",value:"M4"},{text:"M5",value:"M5"},{text:"M6",value:"M6"},{text:"M7",value:"M7"},{text:"M8",value:"M8"},{text:"M9",value:"M9"},{text:"M10",value:"M10"},{text:"Xóa cấp quản lý",value:""}],p.rankingByDuty={1:[],2:[],3:[{text:"M2",value:"Management-M2"},{text:"M3",value:"Management-M3"},{text:"Xóa cấp quản lý",value:""}],4:[],5:[],8:[{text:"M1",value:"Management-M1"},{text:"Xóa cấp bậc nhân viên",value:""}],9:[{text:"Senior L8",value:"Senior-L8"},{text:"Senior L7",value:"Senior-L7"},{text:"Middle L7",value:"Middle-L7"},{text:"Middle L6",value:"Middle-L6"},{text:"Middle L5",value:"Middle-L5"},{text:"Junior L4",value:"Junior-L4"},{text:"Junior L3",value:"Junior-L3"},{text:"Junior L2",value:"Junior-L2"},{text:"Fresher L1",value:"Fresher-L1"},{text:"Xóa cấp bậc nhân viên",value:""}],10:[{text:"M2",value:"Management-M2"},{text:"M3",value:"Management-M3"},{text:"Xóa cấp quản lý",value:""}],6:[{text:"Senior L8",value:"Senior-L8"},{text:"Senior L7",value:"Senior-L7"},{text:"Middle L7",value:"Middle-L7"},{text:"Middle L6",value:"Middle-L6"},{text:"Middle L5",value:"Middle-L5"},{text:"Junior L4",value:"Junior-L4"},{text:"Junior L3",value:"Junior-L3"},{text:"Junior L2",value:"Junior-L2"},{text:"Fresher L1",value:"Fresher-L1"},{text:"Xóa cấp bậc nhân viên",value:""}],7:[]},e.a=p},"9fDz":function(t,e){},"9xWJ":function(t,e){},A6ec:function(t,e){},AgGy:function(t,e){},Aj3r:function(t,e){},Anvs:function(t,e){},B09k:function(t,e){},BKHo:function(t,e){},BKkZ:function(t,e){},BPJG:function(t,e){},Batc:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Xxa5"),i=a.n(n),s=a("exGp"),o=a.n(s),r=a("Dd8w"),l=a.n(r),c=a("IC97"),d=a("PbY7"),u=a("5vjp"),h=a("F/2K"),p=a("a/7L"),m=a("YlZe"),f=a("csCE"),g=a("l48y"),v=a("ufke"),_=a("s5Jn"),b=a("PJh5"),y=a.n(b),C=a("hC/b"),w=a("7+uW"),k=a("sUu7");w.default.use(k.a);var x={name:"modal-add-deposit",components:{Datepicker:c.a,moment:y.a},props:["deposit"],data:function(){return{form:{deposited_money:null,date_time:"",file:null},show:!0}},created:function(){},watch:{},methods:{inputMoney:function(t,e){return C.a.inputMoney(t,e)},addDeposit:function(){var t=this;this.$validator.validateAll().then(function(e){if(e){var a=new FormData;a.append("sgw_deposit_id",t.deposit.deposit_id),a.append("deposited_money",C.a.reformatMoney(t.form.deposited_money)),a.append("date_time",y()(t.form.date_time).format("YYYY-MM-DD")),a.append("file",t.form.file),a.append("type","1"),_.a.add(a).then(function(e){e.data.success?(t.hideModal(),t.updateData(),C.a.showMessage(e.data.message,"success")):C.a.showMessage(e.data.message,"warning")})}}).catch(function(t){console.log(t)}).finally(function(){t.$stopLoading()})},hideModal:function(){this.$refs.myModalRef.hide()},updateData:function(){this.$emit("updateData")},reset:function(){this.form.deposited_money="",this.form.date_time="",this.form.file=null,this.errors.clear()}}},S=a("XyMi");var M=function(t){a("CB3g")},T=Object(S.a)(x,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{ref:"myModalRef",attrs:{size:"lg",id:"modal-add-deposit","hide-footer":!0,title:"Thêm thông tin đặt cọc đầu vào"},on:{hide:t.reset}},[a("div",[a("b-form",[a("b-form-group",{attrs:{id:"input-group-1",label:"Nhập số tiền đóng cọc:"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.deposited_money,expression:"form.deposited_money"},{name:"validate",rawName:"v-validate",value:{required:!0,numeric:!0,max_value:t.deposit.payment_money},expression:"{required:true, numeric: true, max_value: deposit.payment_money}"}],staticClass:"form-control",attrs:{name:"form-deposited-money",placeholder:"Nhập số tiền"},domProps:{value:t.form.deposited_money},on:{input:function(e){e.target.composing||t.$set(t.form,"deposited_money",e.target.value)}}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"required"==t.errors.firstRule("form-deposited-money"),expression:"errors.firstRule('form-deposited-money') == 'required'"}],staticClass:"help is-danger"},[t._v("Không để trống trường này ")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"max_value"==t.errors.firstRule("form-deposited-money"),expression:"errors.firstRule('form-deposited-money') == 'max_value'"}],staticClass:"help is-danger"},[t._v("Số tiền nhập vào lớn hơn số tiền cần đóng ")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"numeric"==t.errors.firstRule("form-deposited-money"),expression:"errors.firstRule('form-deposited-money') == 'numeric'"}],staticClass:"help is-danger"},[t._v("Vui lòng nhập số ")])]),t._v(" "),a("b-form-group",{attrs:{id:"input-group-3",label:"Nhập thời gian đóng cọc:","label-for":"input-2"}},[a("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{format:"dd-MM-yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0,name:"form-date"},model:{value:t.form.date_time,callback:function(e){t.$set(t.form,"date_time",e)},expression:"form.date_time"}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"required"==t.errors.firstRule("form-date"),expression:"errors.firstRule('form-date') == 'required'"}],staticClass:"help is-danger"},[t._v("Không để trống trường này ")])],1),t._v(" "),a("b-form-group",{attrs:{label:"Tải biên nhận:"}},[a("b-form-file",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"form-file",placeholder:"Choose a file...","drop-placeholder":"Drop file here..."},model:{value:t.form.file,callback:function(e){t.$set(t.form,"file",e)},expression:"form.file"}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"required"==t.errors.firstRule("form-file"),expression:"errors.firstRule('form-file') == 'required'"}],staticClass:"help is-danger"},[t._v("Không để trống trường này ")])],1),t._v(" "),a("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.addDeposit()}}},[t._v("Submit")]),t._v(" "),a("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.reset()}}},[t._v("Reset")])],1)],1)])],1)},[],!1,M,"data-v-b1583814",null).exports,D={name:"modal-detail-deposit",components:{},props:["item","groupId"],data:function(){return{isShowInputNote:!1,accountantStatus:[{value:"coordinator_confirm",text:"Chọn trạng thái",disabled:!0},{value:"accountant_confirm",text:"Xác nhận"},{value:"accountant_refuse",text:"Từ chối"},{value:"deleted",text:"Xóa"}],coordinatorStatus:[{value:"unapproved",text:"Chưa duyệt"},{value:"coordinator_confirm",text:"Xác nhận thu tiền"},{value:"coordinator_refuse",text:"Từ chối"}],optionStates:[{value:"old",text:"Cọc cũ"},{value:"new",text:"Cọc hiện tại"}]}},created:function(){},watch:{item:{handler:function(){this.$forceUpdate()},deep:!0}},methods:{saveDepositNote:function(){var t=this,e={id:this.item.deposit_id,note:this.item.note};_.a.saveDepositNote(e).then(function(e){e.data.success?(C.a.showMessage(e.data.message,"success"),t.isShowInputNote=!t.isShowInputNote,t.$emit("onUpdateSuccess")):C.a.showMessage(e.data.message,"warning")}).catch(function(t){console.log(t)})},approvedDeposit:function(t){var e=this,a={id:t.id,status:t.status};_.a.changeStatusDeposit(a).then(function(a){a.data.success?(C.a.showMessage(a.data.message,"success"),e.$emit("onUpdateSuccess"),e.item.deposit_histories.find(function(e){return e.id===t.id}).status=t.status):C.a.showMessage(a.data.message,"warning")}).catch(function(t){console.log(t)})},updateDepositState:function(t){var e={deposit:t};_.a.updateDepositState(e).then(function(t){t.data.success?C.a.showMessage(t.data.message,"success"):C.a.showMessage(t.data.message,"warning")}).catch(function(t){console.log(t)})}}};var I=function(t){a("SvPV")},P=Object(S.a)(D,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{attrs:{"modal-class":"modal-lg-custom",id:"modal-detail-deposit","hide-footer":!0,"hide-header":!0,static:""}},[a("div",{staticClass:"general-infor"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"image-user"},[a("img",{attrs:{src:t.item.image_profile,alt:""}})])]),t._v(" "),a("div",{staticClass:"col-md-9"},[a("p",[t._v("Nhân viên: "+t._s(t.item.fullname)+" ("+t._s(t.item.staff_code)+")")]),t._v(" "),void 0!==t.item.groups?a("p",[t._v("Vị trí: "+t._s(t.item.groups.toString())+" - Điện thoại: "+t._s(t.item.tel))]):t._e(),t._v(" "),a("p",[t._v("Trạng thái:\n                            "),1==t.item.status?a("span",[t._v(" Thiếu cọc")]):2==t.item.status?a("span",[t._v("Đủ cọc")]):3==t.item.status?a("span",[t._v("Hoàn trả thiếu")]):4==t.item.status?a("span",[t._v("Hoàn trả đủ")]):a("span",[t._v("Không có dữ liệu")])]),t._v(" "),a("p",[t._v("Tổng tiền cần cọc: "),a("strong",{directives:[{name:"numeral",rawName:"v-numeral"}],domProps:{textContent:t._s(t.item.payment_money)}}),t._v(".\n                          Số tiền cần cọc đầu vào: "),a("strong",{directives:[{name:"numeral",rawName:"v-numeral"}],domProps:{textContent:t._s(t.item.receivables_at_work)}}),t._v(".\n                          Đã đóng: "),a("strong",{directives:[{name:"numeral",rawName:"v-numeral"}],domProps:{textContent:t._s(t.item.total_deposited_money)}})]),t._v(" "),t.isShowInputNote?a("div",[a("b-row",{staticClass:"deposit-note"},[a("b-col",{attrs:{md:"2"}},[t._v("\n                                    Ghi chú:\n                                ")]),t._v(" "),a("b-col",{staticClass:"ml-note",attrs:{md:"9"}},[a("b-input",{staticClass:"border-only-bottom",attrs:{placeholder:"Nhập ghi chú"},model:{value:t.item.note,callback:function(e){t.$set(t.item,"note",e)},expression:"item.note"}})],1),t._v(" "),t.isShowInputNote?t._e():a("b-col",{attrs:{md:"9"}},[a("span",[t._v(t._s(t.item.note))])]),t._v(" "),a("b-col",{attrs:{md:"1"}},[a("i",{staticClass:"ion-icon ion-md-save cursor-pointer",staticStyle:{"margin-right":"5px"},on:{click:t.saveDepositNote}})])],1)],1):a("p",[t._v("Ghi chú: "+t._s(t.item.note)+"\n                        "),t.isShowInputNote?t._e():a("i",{staticClass:"ion-icon ion-md-create cursor-pointer",staticStyle:{"margin-right":"5px"},on:{click:function(e){t.isShowInputNote=!t.isShowInputNote}}})])])])]),t._v(" "),a("div",{staticClass:"deposit-history"},[a("p",[t._v("Lịch sử tiền cọc:")]),t._v(" "),a("table",{staticClass:"table mb-0 table-bordered"},[a("thead",{staticClass:"thead-light"},[a("tr",[a("th",[t._v("STT")]),t._v(" "),a("th",[t._v("Họ tên")]),t._v(" "),a("th",[t._v("Kho")]),t._v(" "),a("th",[t._v("Ngày đóng")]),t._v(" "),a("th",[t._v("Số tiền cọc")]),t._v(" "),a("th",[t._v("Hình thức nộp tiền")]),t._v(" "),a("th",[t._v("Loại cọc")]),t._v(" "),a("th",[t._v("Trạng thái")])])]),t._v(" "),t._l(t.item.deposit_histories,function(e,n){return a("tbody",[1==e.type&&3!=e.status?a("tr",[a("td",[t._v(t._s(n+1))]),t._v(" "),a("td",[t._v(t._s(t.item.fullname))]),t._v(" "),a("td",[t._v(t._s(t.item.station.toString()))]),t._v(" "),a("td",[t._v(t._s(e.date_time))]),t._v(" "),a("td",{directives:[{name:"numeral",rawName:"v-numeral"}],domProps:{textContent:t._s(e.deposited_money)}}),t._v(" "),1==e.payment_method?a("td",[t._v("Nộp tiền mặt"),e.file?a("img",{attrs:{src:e.file,alt:""}}):t._e()]):t._e(),t._v(" "),2==e.payment_method?a("td",[t._v("Nộp chuyển khoản")]):t._e(),t._v(" "),6==e.payment_method?a("td",[t._v("Thanh toán qua QR code")]):t._e(),t._v(" "),a("td",[a("b-form-select",{attrs:{options:t.optionStates},on:{change:function(a){return t.updateDepositState(e)}},model:{value:e.deposit_state,callback:function(a){t.$set(e,"deposit_state",a)},expression:"deposit.deposit_state"}})],1),t._v(" "),8===parseInt(t.groupId)?a("td",[a("b-form-select",{attrs:{options:t.accountantStatus},on:{change:function(a){return t.approvedDeposit(e)}},model:{value:e.status,callback:function(a){t.$set(e,"status",a)},expression:"deposit.status"}})],1):a("td",["accountant_confirm"===e.status?a("span",[t._v("KT đã xác nhận")]):"accountant_refuse"===e.status?a("span",[t._v("KT đã từ chối")]):a("b-form-select",{attrs:{options:t.coordinatorStatus},on:{change:function(a){return t.approvedDeposit(e)}},model:{value:e.status,callback:function(a){t.$set(e,"status",a)},expression:"deposit.status"}})],1)]):t._e()])})],2)]),t._v(" "),a("div",{staticClass:"refund-history"},[a("p",[t._v("Lịch sử trả cọc:")]),t._v(" "),a("table",{staticClass:"table mb-0 table-bordered"},[a("thead",{staticClass:"thead-light"},[a("tr",[a("th",[t._v("STT")]),t._v(" "),a("th",[t._v("Họ tên")]),t._v(" "),a("th",[t._v("Kho")]),t._v(" "),a("th",[t._v("Ngày trả")]),t._v(" "),a("th",[t._v("Số tiền trả")]),t._v(" "),a("th",[t._v("Hình thức thanh toán")]),t._v(" "),a("th",[t._v("Loại cọc")]),t._v(" "),a("th",[t._v("Trạng thái")])])]),t._v(" "),t._l(t.item.deposit_histories,function(e,n){return a("tbody",[2==e.type&&3!=e.status?a("tr",[a("td",[t._v(t._s(n+1))]),t._v(" "),a("td",[t._v(t._s(t.item.fullname))]),t._v(" "),a("td",[t._v(t._s(t.item.station.toString()))]),t._v(" "),a("td",[t._v(t._s(e.date_time))]),t._v(" "),a("td",{directives:[{name:"numeral",rawName:"v-numeral"}],domProps:{textContent:t._s(e.deposited_money)}}),t._v(" "),1==e.payment_method?a("td",[t._v("Trả tiền mặt"),a("img",{attrs:{src:e.file,alt:""}})]):t._e(),t._v(" "),2==e.payment_method?a("td",[t._v("Trả chuyển khoản")]):t._e(),t._v(" "),3==e.payment_method?a("td",[t._v("Cấn trừ bồi hoàn")]):t._e(),t._v(" "),4==e.payment_method?a("td",[t._v("Phạt tài sản")]):t._e(),t._v(" "),5==e.payment_method?a("td",[t._v("Trừ tạm ứng")]):t._e(),t._v(" "),a("td",[a("b-form-select",{attrs:{options:t.optionStates},on:{change:function(a){return t.updateDepositState(e)}},model:{value:e.deposit_state,callback:function(a){t.$set(e,"deposit_state",a)},expression:"deposit.deposit_state"}})],1),t._v(" "),8===parseInt(t.groupId)?a("td",[a("b-form-select",{attrs:{options:t.accountantStatus},on:{change:function(a){return t.approvedDeposit(e)}},model:{value:e.status,callback:function(a){t.$set(e,"status",a)},expression:"deposit.status"}})],1):a("td",["accountant_confirm"===e.status?a("span",[t._v("Đã hoàn cọc")]):a("span",[t._v("KT chưa hoàn cọc")])])]):t._e()])})],2)])])],1)},[],!1,I,"data-v-0450e284",null).exports,E=a("VvlD");w.default.use(k.a,{fieldsBagName:"veeFields"});var L={name:"modal-request-refund",components:{},props:["item"],data:function(){return{isProcessingUpdate:!1,request_money:"",show:!0}},created:function(){},watch:{},computed:{date_expect_refund:function(){return E.a.getDateExpectRefund()}},methods:{formatMoney:function(t){return C.a.formatMoney(t)},requestRefund:function(){var t=this;this.$validator.validateAll().then(function(e){if(e){var a={master_profile_id:t.item.master_profile_id,deposit_id:t.item.deposit_id,request_money:t.request_money,date_expect_refund:t.date_expect_refund};_.a.requestRefund(a).then(function(e){e.data.success?(C.a.showMessage(e.data.message,"success"),t.hideModal()):C.a.showMessage(e.data.message,"warning")}).catch(function(t){console.log(t)}).then(function(){t.$stopLoading()})}})},hideModal:function(){this.$refs.modalRequestRefund.hide()},updateData:function(){this.$emit("updateData")},reSet:function(){this.request_money=""}}};var A=function(t){a("TYZh")},O=Object(S.a)(L,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{ref:"modalRequestRefund",attrs:{size:"lg",id:"modal-request-refund","hide-footer":!0,title:"Yêu cầu tiền hoàn cọc ",static:""},on:{hide:t.reSet}},[a("div",[a("b-form-group",{attrs:{id:"input-group-1",label:"Nhập số tiền cần hoàn cọc cho nhân viên "+t.item.fullname+":"}},[a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,numeric:!0,max_value:t.item.total_deposited_money},expression:"{required: true, numeric: true, max_value: item.total_deposited_money}"}],class:{"is-danger":t.errors.has("request_money")},attrs:{name:"request_money",placeholder:"Nhập số tiền"},model:{value:t.request_money,callback:function(e){t.request_money=e},expression:"request_money"}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"required"==t.errors.firstRule("request_money"),expression:"errors.firstRule('request_money') == 'required'"}],staticClass:"help is-danger"},[t._v("Không để trống trường này ")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"numeric"==t.errors.firstRule("request_money"),expression:"errors.firstRule('request_money') == 'numeric'"}],staticClass:"help is-danger"},[t._v("Vui lòng nhập số")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"max_value"==t.errors.firstRule("request_money"),expression:"errors.firstRule('request_money') == 'max_value'"}],staticClass:"help is-danger"},[t._v("Số tiền không được vượt quá "+t._s(t.formatMoney(t.item.total_deposited_money))+" VNĐ")])],1),t._v(" "),a("b-form-group",{attrs:{id:"input-group-2",label:"Ngày dự kiến hoàn cọc:"}},[a("b-form-input",{attrs:{type:"date",disabled:""},model:{value:t.date_expect_refund,callback:function(e){t.date_expect_refund=e},expression:"date_expect_refund"}})],1),t._v(" "),a("b-button",{attrs:{loading:t.isProcessingUpdate,variant:"primary"},on:{click:function(e){return t.requestRefund()}}},[t._v("Yêu cầu")]),t._v(" "),a("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.reSet()}}},[t._v("Reset")])],1)])],1)},[],!1,A,"data-v-0c7ed13b",null).exports,N={name:"modal-users-not-have-deposit",components:{},props:[],data:function(){return{listMasId:[],tmpId:[],allSelected:!1,indeterminate:!1,pageData:{currentPage:1,totalPages:0,totalItems:0,perPage:6},listMas:[]}},created:function(){},computed:{totalPages:function(){return Math.ceil(this.pageData.totalItems/this.pageData.perPage)}},watch:{},methods:{changeStatus:function(t,e){this.$set(this.listMasId,e,t)},toggleAll:function(){this.allSelected?this.listMasId=[]:this.listMasId=this.tmpId},setOriginDeposit:function(){var t=this;if(confirm("Bạn chắc chắn muốn cập nhật thông tin cọc ban đầu của những người đã chọn!")){var e={listMasId:this.listMasId};_.a.setOriginDeposit(e).then(function(e){e.data.success&&(C.a.showMessage(e.data.message,"success"),t.getListUserNotHaveDeposit(t.pageData.currentPage))}).catch(function(t){console.log(t)})}},pageChanged:function(t){this.getListUserNotHaveDeposit(t),this.pageData.currentPage=t},getListUserNotHaveDeposit:function(t){var e=this,a={page:t,limit:this.pageData.perPage};_.a.getListUserNotHaveDeposit(a).then(function(t){t.data.success&&(e.listMas=t.data.data.listMas,e.tmpId=t.data.data.listMasId,e.pageData.totalItems=t.data.data.count)}).catch(function(t){console.log(t)})}}};var R=function(t){a("aD9H")},U=Object(S.a)(N,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{attrs:{"modal-class":"modal-xl",id:"modal-users-not-have-deposit","hide-footer":!0,"hide-header":!0,static:""},on:{show:function(e){return t.getListUserNotHaveDeposit(t.pageData.currentPage)}}},[a("div",{staticClass:"deposit-history"},[a("p",[t._v("Danh sách nhân viên chưa có cọc:")]),t._v(" "),a("div",[a("button",{staticClass:"btn btn-outline-info float-right ml-5",on:{click:function(e){return t.setOriginDeposit()}}},[t._v("Config tiền đặt cọc theo rule")]),t._v(" "),a("b-form-group",{staticClass:"float-right",scopedSlots:t._u([{key:"label",fn:function(){return[a("b-form-checkbox",{attrs:{indeterminate:t.indeterminate,"aria-describedby":"flavours","aria-controls":"flavours"},on:{change:t.toggleAll},model:{value:t.allSelected,callback:function(e){t.allSelected=e},expression:"allSelected"}},[t._v("\n                            "+t._s(t.allSelected?"Bỏ chọn tất cả":"Chọn tất cả")+"\n                        ")])]},proxy:!0}])})],1),t._v(" "),a("table",{staticClass:"table mb-0 table-bordered"},[a("thead",{staticClass:"thead-light"},[a("tr",[a("th",[t._v("STT")]),t._v(" "),a("th",[t._v("Mã nhân viên")]),t._v(" "),a("th",[t._v("Tên nhân viên")]),t._v(" "),a("th",[t._v("Ngày vào làm")]),t._v(" "),a("th",[t._v("Vị trí")]),t._v(" "),a("th",[t._v("Loại nhân viên")]),t._v(" "),a("th",[t._v("Tùy chọn")])])]),t._v(" "),a("tbody",t._l(t.listMas,function(e,n){return a("tr",[a("td",[t._v(t._s((t.pageData.currentPage-1)*t.pageData.perPage+n+1))]),t._v(" "),a("td",[t._v(t._s(e.staff_code))]),t._v(" "),a("td",[t._v(t._s(e.fullname))]),t._v(" "),a("td",[t._v(t._s(e.join_date))]),t._v(" "),a("td",[t._v(t._s(e.groups.toString()))]),t._v(" "),a("td",[t._v(t._s(e.work_types.toString()))]),t._v(" "),a("td",{staticClass:"text-center"},[a("b-form-checkbox",{attrs:{value:e.id,"unchecked-value":null},model:{value:t.listMasId[(t.pageData.currentPage-1)*t.pageData.perPage+n],callback:function(e){t.$set(t.listMasId,(t.pageData.currentPage-1)*t.pageData.perPage+n,e)},expression:"listMasId[(pageData.currentPage - 1) * pageData.perPage + index]"}})],1)])}),0)]),t._v(" "),a("b-card-body",{staticClass:"pt-0 pb-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm pt-3"},[a("b-pagination",{attrs:{"total-rows":t.pageData.totalItems,"per-page":t.pageData.perPage},on:{change:t.pageChanged},model:{value:t.pageData.currentPage,callback:function(e){t.$set(t.pageData,"currentPage",e)},expression:"pageData.currentPage"}})],1),t._v(" "),a("div",{staticClass:"col-sm text-sm-left text-center pt-3"},[t.pageData.totalItems?a("span",{staticClass:"text-muted"},[t._v("Trang "+t._s(t.pageData.currentPage)+" trên "+t._s(t.totalPages))]):t._e()])])])],1)])],1)},[],!1,R,"data-v-0c69591c",null).exports;w.default.use(k.a);var $={name:"modal-list-refund",components:{SingleSelectProfileRegion:g.a,SingleSelectStation:p.a,SingleSelectProvince:h.a},props:["groupId"],data:function(){return{statusOptions:[{value:1,text:"Chưa duyệt"},{value:2,text:"Đã duyệt"},{value:3,text:"Yêu cầu bị bủy"}],listRefunds:[],searchText:"",pageData:{currentPage:1,totalPages:0,totalItems:0,perPage:6},isApproved:!0,isNotApproved:!0,isCanceled:!0,downloaded:!1,URLExportedFile:"#",range_time:null,time_format:null,rangeConfig:{mode:"range",altInput:!0,dateFormat:"d-m-Y",altFormat:"d-m-Y"},exportList:!0,exporting:!1,exported:!1,showModalReason:!1,reason:"",status:null,refundId:null,refundStatus:null,region:"",provinceId:"",stationId:""}},created:function(){},computed:{totalPages:function(){return Math.ceil(this.pageData.totalItems/this.pageData.perPage)}},watch:{},methods:{cancelApprove:function(){this.showModalReason=!1,this.reason=""},moment:function(t){return t?y()(t).format("DD-MM-YYYY"):""},setDownloaded:function(){this.downloaded=!0,this.exported=!1},exportDepositRefund:function(){var t=this;this.exporting=!0;var e=null!=this.range_time?this.getStartEndFromTimeRange(this.range_time):{},a={search:this.searchText,region:this.region,provinceId:this.provinceId,stationId:this.stationId,status:this.status,from:e.from,to:e.to};_.a.exportDepositRefund(a).then(function(e){e.data.success?(t.exported=!0,t.URLExportedFile=e.data.data.url,t.exporting=!1,t.downloaded=!1,C.a.showMessage(e.data.message,"success")):(C.a.showMessage(e.data.message,"success"),t.exporting=!1)})},pageChanged:function(t){this.getListRefunds(t,this.pageData.perPage),this.pageData.currentPage=t},approvedRefund:function(t,e){var a=this;if(3===parseInt(e)&&!1===this.showModalReason)return this.refundId=t,this.refundStatus=e,void(this.showModalReason=!0);this.showModalReason&&this.$validator.validateAll().then(function(t){if(!t)return!1});var n={id:t||this.refundId,status:e||this.refundStatus,reason:this.reason};_.a.changeStatusRequestRefund(n).then(function(t){t.data.success?(a.getListRefunds(a.pageData.currentPage,a.pageData.perPage,!1),C.a.showMessage(t.data.message,"success"),a.showModalReason=!1):(a.getListRefunds(a.pageData.currentPage,a.pageData.perPage,!1),C.a.showMessage(t.data.message,"warning"))}).catch(function(t){console.log(t)})},getListRefunds:function(t,e,a){var n=this,i=null!=this.range_time?this.getStartEndFromTimeRange(this.range_time):{},s={page:t,limit:e,search:this.searchText,region:this.region,provinceId:this.provinceId,stationId:this.stationId,status:this.status,from:i.from,to:i.to};a&&(this.pageData.currentPage=1,s.page=1),_.a.getListRefunds(s).then(function(t){t.data.success&&(n.listRefunds=t.data.data,n.pageData.totalItems=t.data.total_item)}).catch(function(t){console.log(t)}).then(function(){n.$stopLoading()})},resetSearch:function(){this.range_time=null,this.searchText=null,this.region="",this.provinceId=null,this.stationId=null,this.listStatus=[0,1,2,3],this.getListRefunds(this.pageData.currentPage,this.pageData.perPage,!0)},getStartEndFromTimeRange:function(){return{from:y()(this.range_time.start).format("YYYY-MM-DD"),to:y()(this.range_time.end).format("YYYY-MM-DD")}},handleSelectedRegion:function(t){this.region=t?t.id:""},handleSelectedProvince:function(t){this.provinceId=t?t.id:""},handleSelectedStation:function(t){this.stationId=t?t.id:""}}};var H=function(t){a("eQ2R")},B=Object(S.a)($,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{attrs:{"no-enforce-focus":!0,"modal-class":"modal-xxl",id:"modal-list-refund","hide-footer":!0,"hide-header":!0,static:""},on:{show:function(e){return t.getListRefunds(t.pageData.currentPage,t.pageData.perPage,!0)}}},[a("div",{staticClass:"deposit-history"},[a("h4",[t._v("Danh sách yêu cầu hoàn cọc:")]),t._v(" "),a("div",{staticClass:"search-form-refund"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"},[a("b-input",{attrs:{type:"text",placeholder:"Nhập tên, username hoặc mã nhân viên"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getListRefunds(t.pageData.currentPage,t.pageData.perPage,!0)}},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}})],1),t._v(" "),a("div",{staticClass:"col-md-2"},[a("v-date-picker",{attrs:{mode:"range",locale:"vi",color:"green","input-props":{placeholder:"Chọn thời gian dự kiến hoàn cọc",style:"font-size:14px; line-height: unset"}},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getListRefunds(t.pageData.currentPage,t.pageData.perPage,!0)}},model:{value:t.range_time,callback:function(e){t.range_time=e},expression:"range_time"}})],1),t._v(" "),a("div",{staticClass:"col-md-2"},[a("single-select-profile-region",{attrs:{region:t.region},on:{handleSelectedRegion:t.handleSelectedRegion}})],1),t._v(" "),a("div",{staticClass:"col-md-2"},[a("single-select-province",{attrs:{"custom-class":"","region-name":t.region,"province-id":t.provinceId},on:{handleSelectedProvince:t.handleSelectedProvince}})],1),t._v(" "),a("div",{staticClass:"col-md-2"},[a("single-select-station",{attrs:{"custom-class":"","province-id":t.provinceId},on:{handleSelectedStation:t.handleSelectedStation}})],1),t._v(" "),a("div",{staticClass:"col-md-2"},[a("b-form-select",{staticClass:"only-bottom-border",attrs:{options:t.statusOptions},scopedSlots:t._u([{key:"first",fn:function(){return[a("option",{attrs:{disabled:""},domProps:{value:null}},[t._v("-- Chọn trạng thái --")])]},proxy:!0}]),model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1),t._v(" "),a("div",{staticClass:"col-md-12 text-right mt-2"},[a("div",[t.exporting?a("b-btn",{staticClass:"exporting-btn",attrs:{variant:"outline-success"}},[a("span",[a("div",{staticClass:"sk-folding-cube sk-primary"},[a("div",{staticClass:"sk-cube1 sk-cube"}),t._v(" "),a("div",{staticClass:"sk-cube2 sk-cube"}),t._v(" "),a("div",{staticClass:"sk-cube4 sk-cube"}),t._v(" "),a("div",{staticClass:"sk-cube3 sk-cube"})]),t._v("\n                                Đang xuất...")])]):t.exported?a("div",{staticClass:"d-inline-block float-right",on:{click:t.setDownloaded}},[a("b-btn",{attrs:{variant:"success",href:t.URLExportedFile,target:"blank"}},[a("i",{staticClass:"ion ion-md-download"}),t._v(" Tải xuống\n                                    ")])],1):a("b-btn",{staticClass:"float-right",attrs:{variant:"outline-success"},on:{click:t.exportDepositRefund}},[a("i",{staticClass:"ion ion-md-print"}),t._v(" Xuất danh sách hoàn cọc\n                                ")])],1),t._v(" "),a("b-button",{staticClass:"btn btn-primary",on:{click:function(e){return t.getListRefunds(t.pageData.currentPage,t.pageData.perPage,!0)}}},[a("i",{staticClass:"sidenav-icon ion ion-md-search"}),t._v("Tìm kiếm")]),t._v(" "),a("b-button",{staticClass:"btn btn-secondary",on:{click:function(e){return t.resetSearch()}}},[a("i",{staticClass:"sidenav-icon fas fa-eraser mr-1"}),t._v(" Xóa lọc")])],1)])]),t._v(" "),a("table",{staticClass:"table mb-0 table-bordered table-vertical"},[a("thead",{staticClass:"thead-light"},[a("tr",[a("th",[t._v("STT")]),t._v(" "),a("th",[t._v("Mã nhân viên")]),t._v(" "),a("th",[t._v("Tên nhân viên")]),t._v(" "),a("th",[t._v("Tỉnh")]),t._v(" "),a("th",[t._v("Kho")]),t._v(" "),a("th",[t._v("Tổng tiền đã đóng")]),t._v(" "),a("th",[t._v("Số tiền yêu cầu")]),t._v(" "),a("th",[t._v("Ngày yêu cầu")]),t._v(" "),a("th",[t._v("Ngày nghỉ việc")]),t._v(" "),a("th",[t._v("Ngày dự kiến hoàn cọc")]),t._v(" "),a("th",[t._v("Người tạo yêu cầu")]),t._v(" "),a("th",[t._v("Lý do hủy duyệt")]),t._v(" "),a("th",[t._v("Trạng thái")])])]),t._v(" "),t._l(t.listRefunds,function(e,n){return a("tbody",[a("tr",[a("td",[t._v(t._s((t.pageData.currentPage-1)*t.pageData.perPage+n+1))]),t._v(" "),a("td",[t._v(t._s(e.staff_code))]),t._v(" "),a("td",[t._v(t._s(e.staff_name))]),t._v(" "),a("td",[t._v(t._s(e.province))]),t._v(" "),a("td",[t._v(t._s(e.station))]),t._v(" "),a("td",{directives:[{name:"numeral",rawName:"v-numeral"}],domProps:{textContent:t._s(e.total_deposited_money)}}),t._v(" "),a("td",{directives:[{name:"numeral",rawName:"v-numeral"}],domProps:{textContent:t._s(e.request_money)}}),t._v(" "),a("td",[t._v(t._s(t.moment(e.created)))]),t._v(" "),a("td",[t._v(t._s(t.moment(e.resign_date)))]),t._v(" "),a("td",[t._v(t._s(t.moment(e.date_expect_refund)))]),t._v(" "),a("td",[t._v(t._s(e.created_by_fullname))]),t._v(" "),a("td",[t._v(t._s(e.reason))]),t._v(" "),8==t.groupId?a("td",[a("div",[a("b-dropdown",{attrs:{size:"lg",variant:"link","toggle-class":"text-decoration-none","no-caret":""}},[1==e.status?a("template",{slot:"button-content"},[a("i",{staticClass:"ion ion-ios-checkmark-circle-outline red-icon",attrs:{title:"Chưa duyệt"}})]):2==e.status?a("template",{slot:"button-content"},[a("i",{staticClass:"ion ion-ios-checkmark-circle green-icon",attrs:{title:"Đã duyệt"}})]):3==e.status?a("template",{slot:"button-content"},[a("i",{staticClass:"ion ion-ios-remove-circle red-icon",attrs:{title:"Hủy duyệt"}})]):t._e(),t._v(" "),a("b-dropdown-item",{attrs:{href:"#"},on:{click:function(a){return t.approvedRefund(e.refund_id,2)}}},[t._v("Duyệt")]),t._v(" "),a("b-dropdown-item",{attrs:{href:"#"},on:{click:function(a){return t.approvedRefund(e.refund_id,3)}}},[t._v("Hủy duyệt")])],2)],1)]):t._e(),t._v(" "),8!=t.groupId?a("td",[1==e.status?a("span",[t._v("Chưa duyệt")]):t._e(),t._v(" "),2==e.status?a("span",[t._v("Đã duyệt")]):t._e(),t._v(" "),3==e.status?a("span",[t._v("Yêu cầu bị hủy")]):t._e()]):t._e()])])})],2),t._v(" "),a("b-card-body",{staticClass:"pt-0 pb-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm pt-3"},[a("b-pagination",{attrs:{"total-rows":t.pageData.totalItems,"per-page":t.pageData.perPage},on:{change:t.pageChanged},model:{value:t.pageData.currentPage,callback:function(e){t.$set(t.pageData,"currentPage",e)},expression:"pageData.currentPage"}})],1),t._v(" "),a("div",{staticClass:"col-sm text-sm-left text-center pt-3"},[t.pageData.totalItems?a("span",{staticClass:"text-muted"},[t._v("Trang "+t._s(t.pageData.currentPage)+" trên "+t._s(t.totalPages))]):t._e()])])])],1),t._v(" "),a("b-modal",{attrs:{title:"Nhập lý do","hide-footer":!0},on:{hide:function(e){return t.cancelApprove()}},model:{value:t.showModalReason,callback:function(e){t.showModalReason=e},expression:"showModalReason"}},[a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{placeholder:"Nhập lý do không duyệt",name:"reason-not-approved"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"required"==t.errors.firstRule("reason-not-approved"),expression:"errors.firstRule('reason-not-approved') == 'required'"}],staticClass:"help is-danger"},[t._v("Không để trống trường này ")]),t._v(" "),a("div",{staticClass:"text-center mt-3"},[a("b-btn",{attrs:{variant:"secondary"},on:{click:function(e){return t.cancelApprove()}}},[t._v("Hủy")]),t._v(" "),a("b-btn",{attrs:{variant:"primary"},on:{click:function(e){return t.approvedRefund()}}},[t._v("Xác nhận")])],1)],1)],1)],1)},[],!1,H,"data-v-4553a806",null).exports,j=a("fZjL"),F=a.n(j),q=a("lBHt");w.default.use(k.a);var Y={name:"modal-initial-deposit",components:{SingleSelectUser:q.a},props:{deposit:{default:Object}},data:function(){return{user:"",payment_money:null,receivables_at_work:null,note:null,notify:{message:"",class:"",title:"",duration:""},isEdit:!0}},created:function(){},computed:{isAdd:function(){return 0===F()(this.deposit).length&&this.deposit.constructor===Object}},watch:{deposit:function(t){this.payment_money=this.deposit.payment_money,this.receivables_at_work=this.deposit.receivables_at_work,this.note=this.deposit.note}},methods:{selectedUser:function(t){this.user=t},changeUser:function(){this.isEdit=!this.isEdit},resetData:function(){this.isEdit=!0,this.errors.clear()},updateInitialDeposit:function(){var t=this;this.$validator.validateAll().then(function(e){if(e){var a={payment_money:t.payment_money,receivables_at_work:t.receivables_at_work,note:t.note};t.isAdd?t.$set(a,"user_id",t.user.id):(t.isEdit?t.$set(a,"master_profile_id",t.deposit.master_profile_id):t.$set(a,"user_id",t.user.id),t.$set(a,"deposit_id",t.deposit.deposit_id)),_.a.updateInitialDeposit(a).then(function(e){e.data.hasOwnProperty("success")?e.data.success?(C.a.showMessage(e.data.message,"success"),t.$refs.modalInitialDeposit.hide(),t.$emit("updateData")):C.a.showMessage(e.data.message,"warning"):t.notify.success=!1}).catch(function(e){t.notify.success=!1,t.notify.message="Có lỗi xảy ra, liên hệ IT để được hỗ trợ",t.showNotification(!1)})}else t.isProcessingUpdate=!1,t.notify.success=!1,t.notify.message="Vui lòng nhập đủ thông tin yêu cầu",t.showNotification(!1)}).catch(function(t){console.log(t)})},showNotification:function(t){var e="bg-success text-white";t||(e="bg-warning text-dark"),this.$notify({group:"update-initial-deposit",title:this.notify.title,text:this.notify.message,type:e,duration:this.notify.duration})}}};var z=function(t){a("4SK9")},G=Object(S.a)(Y,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{ref:"modalInitialDeposit",attrs:{size:"lg",id:"modal-initial-deposit","hide-footer":!0},on:{hide:function(e){return t.resetData()}},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v("\n            Cập nhật thông tin cọc đầu vào\n        ")]},proxy:!0}])},[t._v(" "),!t.isAdd&&t.isEdit?a("div",{staticClass:"general-infor"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"image-user"},[a("img",{attrs:{src:t.deposit.image_profile,alt:""}})])]),t._v(" "),a("div",{staticClass:"col-md-9"},[a("p",[t._v("Nhân viên: "+t._s(t.deposit.fullname)+" ("+t._s(t.deposit.staff_code)+")")]),t._v(" "),void 0!==t.deposit.groups?a("p",[t._v("Vị trí: "+t._s(t.deposit.groups.toString()))]):t._e(),t._v(" "),a("p",[t._v("Điện thoại: "+t._s(t.deposit.tel))]),t._v(" "),a("p",[t._v("Trạng thái:\n                        "),1==t.deposit.status?a("span",[t._v(" Thiếu cọc")]):2==t.deposit.status?a("span",[t._v("Đủ cọc")]):3==t.deposit.status?a("span",[t._v("Hoàn trả thiếu")]):4==t.deposit.status?a("span",[t._v("Hoàn trả đủ")]):a("span",[t._v("Không có dữ liệu")])]),t._v(" "),a("p",[t._v("Tổng tiền cần cọc: "),a("strong",{directives:[{name:"numeral",rawName:"v-numeral"}],domProps:{textContent:t._s(t.deposit.payment_money)}}),t._v(".\n                      Số tiền cần cọc đầu vào: "),a("strong",{directives:[{name:"numeral",rawName:"v-numeral"}],domProps:{textContent:t._s(t.deposit.receivables_at_work)}}),t._v(".\n                      Đã đóng: "),a("strong",{directives:[{name:"numeral",rawName:"v-numeral"}],domProps:{textContent:t._s(t.deposit.total_deposited_money)}})])])]),t._v(" "),a("button",{staticClass:"btn btn-outline-info mb-3",on:{click:function(e){return t.changeUser()}}},[t._v("\n                Thay đổi người cần cọc\n            ")])]):t._e(),t._v(" "),a("div",[a("b-form-row",[t.isAdd||!t.isEdit?a("b-form-group",{staticClass:"col-md-12",attrs:{label:"Chọn nhân viên:",id:"input-group-user"}},[a("single-select-user",{attrs:{"is-select-main-user":"yes"},on:{onChange:t.selectedUser}})],1):t._e(),t._v(" "),a("b-form-group",{staticClass:"col-md-6 input-group-initial-deposit",attrs:{label:"Tiền cọc phải đóng:",id:"input-deposit"}},[a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,numeric:!0},expression:"{required:true, numeric: true}"}],staticClass:"only-bottom-border",attrs:{name:"payment_money",placeholder:"Nhập số tiền cọc phải đóng"},model:{value:t.payment_money,callback:function(e){t.payment_money=e},expression:"payment_money"}}),t._v(" "),a("span",{staticClass:"position-absolute",staticStyle:{right:"60px",bottom:"0"}},[t._v("VNĐ")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"required"==t.errors.firstRule("payment_money"),expression:"errors.firstRule('payment_money') == 'required'"}],staticClass:"help is-danger"},[t._v("Không để trống trường này")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"numeric"==t.errors.firstRule("payment_money"),expression:"errors.firstRule('payment_money') == 'numeric'"}],staticClass:"help is-danger"},[t._v("Vui lòng nhập số")])],1),t._v(" "),a("b-form-group",{staticClass:"col-md-6 input-group-initial-deposit",attrs:{label:"Tiền cọc cần đóng lúc nhận việc:",id:"input-deposit-start"}},[a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,numeric:!0},expression:"{required:true, numeric: true}"}],staticClass:"only-bottom-border",attrs:{placeholder:"Nhập số tiền cọc cần đóng lúc nhận việc",name:"receivables_at_work"},model:{value:t.receivables_at_work,callback:function(e){t.receivables_at_work=e},expression:"receivables_at_work"}}),t._v(" "),a("span",{staticClass:"position-absolute",staticStyle:{right:"60px",bottom:"0"}},[t._v("VNĐ")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"required"==t.errors.firstRule("receivables_at_work"),expression:"errors.firstRule('receivables_at_work') == 'required'"}],staticClass:"help is-danger"},[t._v("Không để trống trường này ")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"numeric"==t.errors.firstRule("receivables_at_work"),expression:"errors.firstRule('receivables_at_work') == 'numeric'"}],staticClass:"help is-danger"},[t._v("Vui lòng nhập số")])],1),t._v(" "),a("b-input-group",[a("b-form-input",{staticClass:"only-bottom-border",staticStyle:{"max-width":"700px","padding-right":"35px"},attrs:{placeholder:"Viết ghi chú"},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}})],1)],1),t._v(" "),a("b-button",{staticClass:"mt-3",attrs:{block:""},on:{click:function(e){return t.updateInitialDeposit()}}},[t._v("Xác nhận")]),t._v(" "),a("notifications",{attrs:{group:"update-initial-deposit"}})],1)])],1)},[],!1,z,"data-v-2ed72140",null).exports;w.default.use(k.a);var K={name:"modal-export-deposit",components:{Datepicker:c.a},props:["groupId"],data:function(){return{typeOptions:[{value:1,text:"Trích cọc NV Fulltime"},{value:2,text:"Trích cọc COD CTV"},{value:3,text:"Xuất dư cọc"}],type:null,date:null,loading:!1}},created:function(){},computed:{totalPages:function(){return Math.ceil(this.pageData.totalItems/this.pageData.perPage)}},watch:{},methods:{moment:function(t){return t?y()(t).format("YYYY-MM-DD"):""},downloadLink:function(t){var e=document.createElement("a");e.href=t,e.click(),URL.revokeObjectURL(e.href)},exportDeposit:function(){var t=this;return o()(i.a.mark(function e(){var a,n,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.loading=!0,e.prev=1,1!==t.type){e.next=9;break}return e.next=5,_.a.exportDepositSalary({date:t.moment(t.date)});case 5:(a=e.sent).data.success?t.downloadLink(a.data.data.url):C.a.showMessage(a.data.message||"Có lỗi xảy ra","warning"),e.next=20;break;case 9:if(2!==t.type){e.next=16;break}return e.next=12,_.a.exportDepositSalary({date:t.moment(t.date),type:"ctv"});case 12:(n=e.sent).data.success?t.downloadLink(n.data.data.url):C.a.showMessage(n.data.message||"Có lỗi xảy ra","warning"),e.next=20;break;case 16:return e.next=18,_.a.exportRedundantDeposit();case 18:(s=e.sent).data.success?t.downloadLink(s.data.data.url):C.a.showMessage(s.data.message||"Có lỗi xảy ra","warning");case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(1),C.a.showMessage(e.t0.message||"Có lỗi xảy ra","fail");case 25:t.loading=!1;case 26:case"end":return e.stop()}},e,t,[[1,22]])}))()}}};var V=function(t){a("Wuoy")},Q=Object(S.a)(K,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{attrs:{id:"modal-export-deposit","hide-footer":"true",size:"lg"},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v("\n        Xuất thông tin cọc\n      ")]},proxy:!0}])},[t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"d-flex"},[a("b-form-select",{staticClass:"mb-3 col-4",attrs:{options:t.typeOptions,name:"approved",placeholder:"Loại"},scopedSlots:t._u([{key:"first",fn:function(){return[a("option",{domProps:{value:null}},[t._v("-- Chọn loại cần xuất --")])]},proxy:!0}]),model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),t._v(" "),a("div",{staticClass:"col-5"},[a("datepicker",{attrs:{format:"dd-MM-yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,placeholder:"Kì lương",required:!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._v(" "),a("b-button",{staticClass:"btn-ghtk mr-3 btn-export-deposit",on:{click:function(e){return t.exportDeposit()}}},[a("span",{staticClass:"ladda-label"},[a("i",{staticClass:"sidenav-icon ion ion-md-document"}),t._v("Xuất cọc")])])],1)])],1)},[],!1,V,"data-v-16265385",null).exports,X=a("NYxO"),W=a("4WGu"),J=a("IcnI"),Z=a("poZo"),tt=a("R1Q+"),et=a("vfns"),at={name:"DepositManager",mixins:[Z.a],props:{scrollMode:{defautl:!1,type:Boolean}},components:{ModalInitialDeposit:G,SingleSelectModule:u.a,SingleSelectProvince:h.a,SingleSelectStation:p.a,SingleSelectProfileRegion:g.a,SingleSelectPosition:m.a,SingleSelectDepartment:f.a,SingleSelectWorkType:v.a,ModalDetailDeposit:P,ModalAddDeposit:T,ModalRequestRefund:O,ModalUsersNotHaveDeposit:U,ModalListRefund:B,Datepicker:c.a,config:W.a,ModalExportDeposit:Q},data:function(){return{elementId:{configIframe:"iframe-deposit"},hasIframe:!1,messageType:{requestAuth:"hrm_authentication_request",refreshIamToken:"hrm_refresh_iam_token"},groupIdHr:["3"],groupIdCash:["7","24"],appLoading:!1,searchText:"",pageData:{currentPage:1,totalPages:0,totalItems:0,perPage:10},staff_code:"",keyword:"",region:"",provinceId:"",stationId:"",departmentId:"",departmentName:"",positionId:"",work_type_id:"",status:null,join_date:null,approved:null,listData:[],depositModal:{},tmpDeposit:"",fileExcelDataUserDisabled:[],fileExcelOldData:[],fileExcelDeposit:[],fileExcelRefund:[],isEnough:!0,isNotEnough:!0,isRefund:!0,groupId:"",codGroupIds:d.a.codGroupIds,optionStatus:[{value:1,text:"Thiếu cọc"},{value:5,text:"Cần trích cọc"},{value:2,text:"Đã nộp đủ"},{value:3,text:"Hoàn trả thiếu"},{value:4,text:"Hoàn trả đủ"}],optionApproved:[{value:1,text:"Có bản ghi chưa duyệt"},{value:2,text:"Có bản ghi đã duyệt"},{value:3,text:"Không có bản ghi nào"}],range_time:null,time_format:null,rangeConfig:{mode:"range",altInput:!0,dateFormat:"d-m-Y",altFormat:"d-m-Y"},URLExportedFile:"#",exporting:!1,exported:!1,downloaded:!1,isAdd:!0,isEdit:!0,isUploading:!1,isUploadDataUserDisabled:!1,isUploadOldData:!1,isUploadDeposited:!1,isUploadRefund:!1,modal:{detail:1,edit:2,refund:3},permission:{}}},created:function(){this.checkCanRedirect()},computed:l()({},Object(X.c)({userInfo:"userInfo"}),{totalPages:function(){return Math.ceil(this.pageData.totalItems/this.pageData.perPage)},addDepositPermission:function(){return this.groupIdHr.includes(this.groupId)}}),watch:{fileExcelDataUserDisabled:function(t,e){this.uploadDataUserDisabled(t)},fileExcelOldData:function(t,e){this.uploadOldData(t)},fileExcelDeposit:function(t,e){this.uploadDeposit(t)},fileExcelRefund:function(t,e){this.uploadRefund(t)},range_time:function(t,e){this.getStartEndFromTimeRange()}},methods:{getUrlIframe:function(t){return W.a.domainHrmFe+t},addRequestRefundPermission:function(t){return 4!==parseInt(t.status)},getPermissionDeposit:function(){var t=this;_.a.getPermissionDeposit().then(function(e){e.data.success&&(t.permission=e.data.data)})},setDownloaded:function(){this.downloaded=!0,this.exported=!1},checkJobStatus:function(t){var e=this,a=setInterval(function(){_.a.checkJobStatus({job_id:t}).then(function(t){t.data.success?"closed"===t.data.job_status&&(clearInterval(a),t.data.message?e.$notify({group:"default",type:"text-dark bg-warning",title:"Xảy ra lỗi",text:t.data.message}):(e.exported=!0,e.URLExportedFile=t.data.file_path,e.$notify({group:"default",type:"text-white bg-primary",title:"Xuất file thành công",text:"Đã xuất xong file cọc"}),e.downloaded=!1),e.exporting=!1):(e.$notify({group:"default",type:"text-dark bg-warning",title:"Xảy ra lỗi",text:t.data.message}),clearInterval(a),e.exporting=!1)})},2e3)},exportDeposit:function(){var t=this,e=this.getStartEndFromTimeRange(),a={staff_code:this.staff_code,keyword:this.keyword,region:this.region,provinceId:this.provinceId,stationId:this.stationId,join_date:this.join_date,departmentId:this.departmentId,positionId:this.positionId,workTypeId:this.work_type_id,status:this.status,approved:this.approved,from:e.from,to:e.to};this.exporting=!0,_.a.exportDeposit(a).then(function(e){e.data.success?t.checkJobStatus(e.data.job_id):(t.$notify({group:"default",type:"text-dark bg-warning",title:"Xảy ra lỗi",text:e.data.message}),t.exporting=!1)})},getStartEndFromTimeRange:function(){if(!this.range_time)return{};var t=this.range_time.split("to").map(function(t){return t.trim()});return 2===t.length?{from:y()(t[0],"DD-MM-YYYY").format("YYYY-MM-DD"),to:y()(t[1],"DD-MM-YYYY").format("YYYY-MM-DD")}:void 0},searchDeposit:function(){this.pageData.currentPage=1,this.search()},gotoCodProfile:function(t,e){d.a.redirectProfile(t,e)},search:function(){var t=this;this.appLoading=!0;var e=this.getStartEndFromTimeRange(),a={staff_code:this.staff_code,keyword:this.keyword,region:this.region,provinceId:this.provinceId,stationId:this.stationId,join_date:this.join_date,departmentId:this.departmentId,positionId:this.positionId,workTypeId:this.work_type_id,status:this.status,approved:this.approved,from:e.from,to:e.to,page:this.pageData.currentPage,limit:this.pageData.perPage};_.a.getAll(a).then(function(e){e.data.success&&(t.listData=e.data.data,t.pageData.totalItems=e.data.total_item)}).catch(function(t){console.log(t)}).then(function(){t.appLoading=!1})},deleteDeposit:function(t){var e=this;if(confirm("Bạn chắc chắn muốn xóa thông tin đặt cọc của "+t.fullname+" ?")){var a={id:t.deposit_id};_.a.deleteDeposit(a).then(function(t){t.data.success?(C.a.showMessage(t.data.message,"success"),e.search()):C.a.showMessage(t.data.message,"warning")}).catch(function(t){console.log(t)})}},getGroupIdOfUser:function(){var t=this;_.a.getGroupIdOfUser().then(function(e){e.data.success&&(t.groupId=e.data.data)}).catch(function(t){console.log(t)})},selectDeposit:function(t,e){this.depositModal=t,1===e&&this.$bvModal.show("modal-detail-deposit"),2===e&&this.$bvModal.show("modal-initial-deposit"),3===e&&this.$bvModal.show("modal-request-refund")},selectDepositId:function(t){this.tmpDeposit=t},triggerInputDataUserDisabled:function(){this.$refs.fileInputDataUserDisabled.$el.childNodes[0].click()},triggerInputOldData:function(){this.$refs.fileInputOldData.$el.childNodes[0].click()},triggerInputDeposit:function(){this.$refs.fileInputDeposit.$el.childNodes[0].click()},triggerInputRefund:function(){this.$refs.fileInputRefund.$el.childNodes[0].click()},uploadDataUserDisabled:function(t){var e=this;this.isUploading=!0;var a=new FormData;a.append("file",t),_.a.insertDataUserDisabled(a).then(function(t){t.data.success?(C.a.showMessage(t.data.message,"success"),e.isUploading=!1,e.search()):C.a.showMessage(t.data.message,"warning")}).catch(function(t){console.log(t)}).then(function(){e.$stopLoading()})},uploadOldData:function(t){var e=this;this.isUploading=!0;var a=new FormData;a.append("file",t),_.a.insertOldDeposit(a).then(function(t){t.data.success?(C.a.showMessage(t.data.message,"success"),e.isUploading=!1,e.search()):C.a.showMessage(t.data.message,"warning")}).catch(function(t){console.log(t)}).then(function(){e.$stopLoading()})},uploadDeposit:function(t){var e=this;this.isUploading=!0;var a=new FormData;a.append("file",t),_.a.insertDepositsByExcel(a).then(function(t){t.data.success?(C.a.showMessage(t.data.message,"success"),e.isUploading=!1,e.search()):C.a.showMessage(t.data.message,"warning")}).catch(function(t){console.log(t)}).then(function(){e.$stopLoading()})},uploadRefund:function(t){var e=this;this.isUploading=!0;var a=new FormData;a.append("file",t),_.a.insertRefundsByExcel(a).then(function(t){t.data.success?(C.a.showMessage(t.data.message,"success"),e.isUploading=!1,e.search()):C.a.showMessage(t.data.message,"warning")}).catch(function(t){console.log(t)}).then(function(){e.$stopLoading()})},showModalInitial:function(t){t&&(this.depositModal={}),this.$bvModal.show("modal-initial-deposit")},showInputDataUserDisabled:function(){this.isUploadDataUserDisabled=!0,this.isUploadOldData=!1,this.isUploadDeposited=!1,this.isUploadRefund=!1},showInputOldData:function(){this.isUploadDataUserDisabled=!1,this.isUploadOldData=!0,this.isUploadDeposited=!1,this.isUploadRefund=!1},showInputDeposit:function(){this.isUploadDataUserDisabled=!1,this.isUploadOldData=!1,this.isUploadDeposited=!0,this.isUploadRefund=!1},showInputRefund:function(){this.isUploadDataUserDisabled=!1,this.isUploadOldData=!1,this.isUploadDeposited=!1,this.isUploadRefund=!0},handleSelectedRegion:function(t){this.region=t?t.id:""},handleSelectedProvince:function(t){this.provinceId=t?t.id:""},handleSelectedStation:function(t){this.stationId=t?t.id:""},handleSelectedDepartment:function(t){this.departmentName=t?t.name:"",this.departmentId=t?t.id:""},handleSelectedPosition:function(t){this.positionId=t?t.id:""},handleSelectedWorkType:function(t){this.work_type_id=t?t.id:""},startListenIframeEvent:function(){var t=this;window.addEventListener("message",function(e){if(e.origin===W.a.domainHrmFe)switch(e.data.type){case t.messageType.requestAuth:console.log("listen request auth",t.messageType.requestAuth),J.a.dispatch("sendMessageToHrm",t.elementId.configIframe);break;case t.messageType.refreshIamToken:console.log("listen request refresh auth",t.messageType.refreshIamToken);var a=new et.a("session",!1).get("isReload");if(!a||"false"===a){var n=new et.a("local"),i=new et.a("session",!1);n.remove(W.a.oidc.tokenIamStorage),i.set("isReload",!0);var s=Object(tt.a)(W.a.oidc);try{s.run(window.location.href)}catch(t){}}}})},checkCanRedirect:function(){var t=this;return o()(i.a.mark(function e(){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.a.checkCanRedirect({config_alias:"iframe_deposit"});case 3:if(!(a=e.sent).data||!0!==a.data.success){e.next=13;break}return e.next=7,document.getElementsByClassName("router-transitions");case 7:(n=e.sent)&&n[0]&&n[0].setAttribute("id","iframe_deposit-layout"),t.hasIframe=!0,t.startListenIframeEvent(),e.next=17;break;case 13:t.$route.query.status&&(t.status=t.$route.query.status),t.getGroupIdOfUser(),t.getPermissionDeposit(),t.search();case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.log(e.t0);case 22:case"end":return e.stop()}},e,t,[[0,19]])}))()}}};var nt=function(t){a("6aA6"),a("SMfO"),a("903a")},it=Object(S.a)(at,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.hasIframe?t._e():a("div",[a("div",{staticClass:"ui-block"},[a("div",{staticClass:"header-container"},[a("div",{staticClass:"row align-items-center"},[t._m(0),t._v(" "),a("div",{staticClass:"col-md-8 text-right"},[a("b-btn",{staticClass:"mb-3",attrs:{type:"button",variant:"ghtk"},on:{click:function(e){return t.searchDeposit()}}},[a("i",{staticClass:"sidenav-icon ion ion-md-search"}),t._v(" Tìm kiếm\n            ")]),t._v(" "),t.permission.export&&t.checkPermissionExportAllPage()?a("div",{staticClass:"d-inline-block ml-1"},[t.exporting?a("b-btn",{staticClass:"exporting-btn",attrs:{variant:"ghtk"}},[a("span",[a("div",{staticClass:"sk-folding-cube sk-primary"},[a("div",{staticClass:"sk-cube1 sk-cube"}),t._v(" "),a("div",{staticClass:"sk-cube2 sk-cube"}),t._v(" "),a("div",{staticClass:"sk-cube4 sk-cube"}),t._v(" "),a("div",{staticClass:"sk-cube3 sk-cube"})]),t._v("\n                              Đang xuất...")])]):t.exported?a("div",{staticClass:"d-inline-block",on:{click:t.setDownloaded}},[a("b-btn",{attrs:{variant:"ghtk",href:t.URLExportedFile,target:"blank"}},[a("i",{staticClass:"ion ion-md-download"}),t._v(" Tải xuống\n                ")])],1):a("b-btn",{attrs:{variant:"ghtk"},on:{click:t.exportDeposit}},[a("i",{staticClass:"ion ion-md-print"}),t._v(" Xuất cọc\n              ")])],1):t._e(),t._v(" "),8==t.groupId?a("span",[a("b-btn",{staticClass:"mb-3",attrs:{variant:"ghtk"},on:{click:function(e){return t.showModalInitial(!0)}}},[a("span",{staticClass:"ladda-label mb-3"},[a("i",{staticClass:"sidenav-icon ion ion-md-add"}),t._v("Thêm thông tin cọc")])]),t._v(" "),a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapseUpload",modifiers:{collapseUpload:!0}}],staticClass:"btn-ghtk mr-3 mb-3",on:{click:t.showInputDataUserDisabled}},[a("span",{staticClass:"ladda-label"},[a("i",{staticClass:"sidenav-icon ion ion-md-cloud-upload"}),t._v("Upload cọc nhân viên đã nghỉ việc")])]),t._v(" "),a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapseUpload",modifiers:{collapseUpload:!0}}],staticClass:"btn-ghtk mr-3 mb-3",on:{click:t.showInputDeposit}},[a("span",{staticClass:"ladda-label"},[a("i",{staticClass:"sidenav-icon ion ion-md-cloud-upload"}),t._v("Upload cọc trừ hàng tháng")])]),t._v(" "),a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapseUpload",modifiers:{collapseUpload:!0}}],staticClass:"btn-ghtk mr-3 mb-3",on:{click:t.showInputRefund}},[a("span",{staticClass:"ladda-label"},[a("i",{staticClass:"sidenav-icon ion ion-md-cloud-upload"}),t._v("Upload cọc hoàn")])])],1):t._e(),t._v(" "),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-list-refund",modifiers:{"modal-list-refund":!0}}],staticClass:"btn-ghtk mr-3 mb-3"},[a("span",{staticClass:"ladda-label"},[a("i",{staticClass:"sidenav-icon ion ion-md-document"}),t._v("Danh sách yêu cầu tiền hoàn cọc")])]),t._v(" "),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-export-deposit",modifiers:{"modal-export-deposit":!0}}],staticClass:"btn-ghtk mr-3 mb-3"},[a("span",{staticClass:"ladda-label"},[a("i",{staticClass:"sidenav-icon ion ion-md-document"}),t._v("Trích cọc/Dư cọc")])]),t._v(" "),a("modal-list-refund",{attrs:{groupId:t.groupId}}),t._v(" "),t.userInfo&&t.userInfo.hasOwnProperty("User")&&"congam"===t.userInfo.User.username?a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-users-not-have-deposit",modifiers:{"modal-users-not-have-deposit":!0}}],staticClass:"btn-ghtk"},[a("span",{staticClass:"ladda-label"},[a("i",{staticClass:"sidenav-icon ion ion-md-document"}),t._v("Danh sách nhân viên chưa config cọc")])]):t._e(),t._v(" "),a("modal-users-not-have-deposit")],1)]),t._v(" "),a("b-form-file",{ref:"fileInputDataUserDisabled",staticStyle:{display:"none"},model:{value:t.fileExcelDataUserDisabled,callback:function(e){t.fileExcelDataUserDisabled=e},expression:"fileExcelDataUserDisabled"}}),t._v(" "),a("b-form-file",{ref:"fileInputOldData",staticStyle:{display:"none"},model:{value:t.fileExcelOldData,callback:function(e){t.fileExcelOldData=e},expression:"fileExcelOldData"}}),t._v(" "),a("b-form-file",{ref:"fileInputDeposit",staticStyle:{display:"none"},model:{value:t.fileExcelDeposit,callback:function(e){t.fileExcelDeposit=e},expression:"fileExcelDeposit"}}),t._v(" "),a("b-form-file",{ref:"fileInputRefund",staticStyle:{display:"none"},model:{value:t.fileExcelRefund,callback:function(e){t.fileExcelRefund=e},expression:"fileExcelRefund"}})],1)]),t._v(" "),a("div",[a("div",{staticClass:"mb-2 mt-2"},[a("b-row",{staticClass:"h-col-50"},[a("b-col",{attrs:{md:"2"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.staff_code,expression:"staff_code"}],staticClass:"form-control",attrs:{placeholder:"Mã Profile",type:"number",min:"9",max:"12"},domProps:{value:t.staff_code},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchDeposit.apply(null,arguments)},input:function(e){e.target.composing||(t.staff_code=e.target.value)}}})]),t._v(" "),a("b-col",{attrs:{md:"2"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"form-control",attrs:{type:"text",placeholder:"username, Họ tên"},domProps:{value:t.keyword},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchDeposit.apply(null,arguments)},input:function(e){e.target.composing||(t.keyword=e.target.value)}}})]),t._v(" "),a("b-col",{staticClass:"z-5",attrs:{md:"2"}},[a("single-select-profile-region",{on:{handleSelectedRegion:t.handleSelectedRegion}})],1),t._v(" "),a("b-col",{staticClass:"z-5",attrs:{md:"2"}},[a("single-select-province",{on:{handleSelectedProvince:t.handleSelectedProvince}})],1),t._v(" "),a("b-col",{staticClass:"z-5",attrs:{md:"2"}},[a("single-select-station",{attrs:{"province-id":t.provinceId},on:{handleSelectedStation:t.handleSelectedStation}})],1),t._v(" "),a("b-col",{staticClass:"z-5",attrs:{md:"2"}},[a("single-select-department",{on:{handleSelectedDepartment:t.handleSelectedDepartment}})],1),t._v(" "),a("b-col",{staticClass:"mb-2 z-3",attrs:{md:"2"}},[a("single-select-position",{attrs:{"department-id":t.departmentId,"position-job":t.positionId},on:{handleSelectedPosition:t.handleSelectedPosition}})],1),t._v(" "),a("b-col",{staticClass:"mb-2 z-3",attrs:{md:"2"}},[a("single-select-work-type",{attrs:{"position-job":t.positionId,"work-type-id":t.work_type_id},on:{handleSelectedWorkType:t.handleSelectedWorkType}})],1),t._v(" "),a("b-col",{staticClass:"md-2",attrs:{md:"2"}},[a("b-form-select",{staticClass:"mb-3",attrs:{options:t.optionStatus,name:"status"},scopedSlots:t._u([{key:"first",fn:function(){return[a("option",{domProps:{value:null}},[t._v("-- Trạng thái cọc --")])]},proxy:!0}],null,!1,2575106352),model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1),t._v(" "),a("b-col",{staticClass:"md-2",attrs:{md:"2"}},[a("datepicker",{attrs:{format:"dd-MM-yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,placeholder:"Ngày vào làm",required:!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},model:{value:t.join_date,callback:function(e){t.join_date=e},expression:"join_date"}})],1),t._v(" "),a("b-col",{staticClass:"md-2",attrs:{md:"2"}},[a("b-form-select",{staticClass:"mb-3",attrs:{options:t.optionApproved,name:"approved"},scopedSlots:t._u([{key:"first",fn:function(){return[a("option",{domProps:{value:null}},[t._v("-- Trạng thái duyệt --")])]},proxy:!0}],null,!1,4035221894),model:{value:t.approved,callback:function(e){t.approved=e},expression:"approved"}})],1),t._v(" "),a("b-col",{staticClass:"mb-2",attrs:{md:"2"}})],1)],1),t._v(" "),a("div",{staticClass:"list-request-refund d-flex "}),t._v(" "),a("div",{staticClass:"mt-2"},[a("b-collapse",{attrs:{id:"collapseUpload"}},[a("b-btn",{attrs:{variant:"ghtk"}},[a("i",{staticClass:"ion ion-md-arrow-down",attrs:{"aria-hidden":"true"}}),t._v(" "),t.isUploadDataUserDisabled?a("a",{staticClass:"text-white",attrs:{href:"/admin/files/templates/template_user_nghi_viec.xlsx",target:"_blank"}},[t._v("File mẫu danh sách nhân viên chưa có bản ghi cọc")]):t._e(),t._v(" "),t.isUploadOldData?a("a",{staticClass:"text-white",attrs:{href:"/admin/files/templates/template_coc_cu.xlsx",target:"_blank"}},[t._v("File mẫu cọc cũ")]):t._e(),t._v(" "),t.isUploadDeposited?a("a",{staticClass:"text-white",attrs:{href:"/admin/files/templates/template_coc_tru_hang_thang.xlsx",target:"_blank"}},[t._v("File mẫu cọc trừ")]):t._e(),t._v(" "),t.isUploadRefund?a("a",{staticClass:"text-white",attrs:{href:"/admin/files/templates/template_coc_hoan.xlsx",target:"_blank"}},[t._v("File mẫu cọc hoàn")]):t._e()]),t._v(" "),a("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-deposit",modifiers:{"collapse-deposit":!0}}],attrs:{variant:"danger"}},[t._v("Quy ước File upload")]),t._v(" "),a("b-collapse",{staticClass:"mt-2",attrs:{id:"collapse-deposit"}},[a("b-card",[a("p",{staticClass:"card-text"},[t._v("\n                - Chỉ cho phép upload file excel, tên file không nên để tiếng viêt có dấu. "),a("br"),t._v("\n                - Thời gian để ở định dạng YYYY-MM-DD, ví dụ: 2020-04-20 "),a("br"),t._v("\n                - Số tiền theo định dạng: 1000000 (không có . hoặc , hoặc khoảng trắng)."),a("br")])])],1),t._v(" "),a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table"},[a("tbody",[a("tr",[a("td",{attrs:{colspan:"12"}},[a("div",{staticClass:"text-center p-3"},[a("h4",[t._v("Kéo thả file để upload\n                      "),a("div",{staticClass:"text-muted small my-3"},[t._v("hoặc")])]),t._v(" "),t.isUploading?a("b-btn",{staticClass:"exporting-btn",attrs:{variant:"outline-ghtk"}},[a("span",[a("div",{staticClass:"sk-folding-cube sk-primary"},[a("div",{staticClass:"sk-cube1 sk-cube"}),t._v(" "),a("div",{staticClass:"sk-cube2 sk-cube"}),t._v(" "),a("div",{staticClass:"sk-cube4 sk-cube"}),t._v(" "),a("div",{staticClass:"sk-cube3 sk-cube"})]),t._v("\n                                          Đang xử lý...")])]):t._e(),t._v(" "),!t.isUploading&&t.isUploadDataUserDisabled?a("b-button",{staticClass:"btn btn-outline-ghtk",on:{click:t.triggerInputDataUserDisabled}},[a("span",{staticClass:"ladda-label"},[a("i",{staticClass:"sidenav-icon ion ion-md-cloud-upload"}),t._v("Chọn file")])]):t._e(),t._v(" "),!t.isUploading&&t.isUploadOldData?a("b-button",{staticClass:"btn btn-outline-ghtk",on:{click:t.triggerInputOldData}},[a("span",{staticClass:"ladda-label"},[a("i",{staticClass:"sidenav-icon ion ion-md-cloud-upload"}),t._v("Chọn file")])]):t._e(),t._v(" "),!t.isUploading&&t.isUploadDeposited?a("b-button",{staticClass:"btn btn-outline-ghtk",on:{click:t.triggerInputDeposit}},[a("span",{staticClass:"ladda-label"},[a("i",{staticClass:"sidenav-icon ion ion-md-cloud-upload"}),t._v("Chọn file")])]):t._e(),t._v(" "),!t.isUploading&&t.isUploadRefund?a("b-button",{staticClass:"btn btn-outline-ghtk",on:{click:t.triggerInputRefund}},[a("span",{staticClass:"ladda-label"},[a("i",{staticClass:"sidenav-icon ion ion-md-cloud-upload"}),t._v("Chọn file")])]):t._e()],1)])])])])])],1)],1),t._v(" "),a("div",{staticClass:"emp-deposit position-relative"},[a("div",{staticClass:"border"},[a("div",{staticClass:"paging my-1"},[a("div",{staticClass:"z-0 d-inline-block"},[a("b-pagination",{staticClass:"mb-1",attrs:{size:"sm",align:"left","total-rows":t.pageData.totalItems,"per-page":t.pageData.perPage},on:{input:t.search},model:{value:t.pageData.currentPage,callback:function(e){t.$set(t.pageData,"currentPage",e)},expression:"pageData.currentPage"}})],1),t._v(" "),a("b",{staticClass:"float-right"},[t._v("Trang "+t._s(t.pageData.currentPage)+"/"+t._s(t.totalPages))])]),t._v(" "),a("div",{staticClass:"table-result",class:t.scrollMode&&"table-sticky"},[a("table",{staticClass:"table mb-0 table-bordered",class:t.scrollMode&&"table-sm"},[a("thead",[a("tr",[a("th",[t._v("Mã NV")]),t._v(" "),a("th",[t._v("Kho")]),t._v(" "),a("th",[t._v("Họ tên")]),t._v(" "),a("th",[t._v("Vị trí")]),t._v(" "),a("th",[t._v("Loại hình làm việc")]),t._v(" "),a("th",[t._v("Ngày vào làm")]),t._v(" "),a("th",[t._v("Tổng tiền cần cọc")]),t._v(" "),a("th",[t._v("Tổng tiền đã cọc")]),t._v(" "),a("th",[t._v("Tổng tiền hoàn trả")]),t._v(" "),a("th",[t._v("Số lần nộp")]),t._v(" "),8==t.groupId?a("th",[t._v("Chưa duyệt")]):t._e(),t._v(" "),a("th",[t._v("Trạng thái")]),t._v(" "),a("th",[t._v("Action")])])]),t._v(" "),a("tbody",{directives:[{name:"loading",rawName:"v-loading",value:t.appLoading,expression:"appLoading"}],staticClass:"position-relative mih-5re"},[t._l(t.listData,function(e,n){return a("tr",{key:n},[a("td",[t._v(t._s(e.staff_code))]),t._v(" "),a("td",[t._v(t._s(e.station.toString()))]),t._v(" "),a("td",[a("p",{staticClass:"member-info-item",class:t.codGroupIds.includes(parseInt(e.group_id))?"text-success-hover text-underline-hover cursor-pointer":"",on:{click:function(a){return t.gotoCodProfile(e.group_id,e.user_id)}}},[t._v("\n                    "+t._s(e.fullname)+" ")])]),t._v(" "),a("td",[t._v(t._s(e.position.toString()))]),t._v(" "),a("td",[t._v(t._s(e.work_types.toString()))]),t._v(" "),a("td",[t._v(t._s(e.join_date))]),t._v(" "),a("td",{directives:[{name:"numeral",rawName:"v-numeral"}],domProps:{textContent:t._s(e.payment_money)}}),t._v(" "),a("td",{directives:[{name:"numeral",rawName:"v-numeral"}],domProps:{textContent:t._s(e.total_deposited_money)}}),t._v(" "),a("td",{directives:[{name:"numeral",rawName:"v-numeral"}],domProps:{textContent:t._s(e.refund_money)}}),t._v(" "),a("td",[t._v(t._s(e.count))]),t._v(" "),8==t.groupId?a("td",[t._v(t._s(e.count_not_approved))]):t._e(),t._v(" "),1==parseInt(e.status)?a("td",[a("i",{staticClass:"ion ion-ios-star-half red-icon"}),t._v(" Thiếu cọc\n                ")]):2==parseInt(e.status)?a("td",[a("i",{staticClass:"ion ion-ios-star green-icon"}),t._v(" Đã nộp đủ\n                ")]):3==parseInt(e.status)?a("td",[a("i",{staticClass:"ion ion-ios-star-outline green-icon"}),t._v(" Hoàn trả thiếu\n                ")]):4==parseInt(e.status)?a("td",[a("i",{staticClass:"ion ion-ios-star-outline red-icon"}),t._v(" Hoàn trả đủ\n                ")]):a("td",[t._v("\n                  Không có dữ liệu\n                ")]),t._v(" "),a("td",[a("b-btn",{staticClass:"btn btn-sm btn-outline-ghtk",attrs:{title:"Xem chi tiết"},on:{click:function(a){return t.selectDeposit(e,t.modal.detail)}}},[a("i",{staticClass:"ion ion-md-eye cursor-pointer"})]),t._v(" "),t.permission.edit_deposit?a("b-btn",{staticClass:"btn btn-sm btn-outline-ghtk",attrs:{title:"Chỉnh sửa cọc"},on:{click:function(a){return t.selectDeposit(e,t.modal.edit)}}},[a("i",{staticClass:"ion ion-md-create cursor-pointer"})]):t._e(),t._v(" "),t.permission.delete_deposit?a("b-btn",{staticClass:"btn btn-sm btn-outline-danger",attrs:{title:"Xóa cọc"},on:{click:function(a){return t.deleteDeposit(e)}}},[a("i",{staticClass:"ion ion-md-trash cursor-pointer"})]):t._e(),t._v(" "),2!==parseInt(e.status)?a("span",{on:{click:function(a){return t.selectDepositId(e)}}},[t.permission.add_deposit?a("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-add-deposit",modifiers:{"modal-add-deposit":!0}}],staticClass:"btn btn-sm btn-outline-ghtk",attrs:{title:"Thêm thông tin cọc"}},[a("i",{staticClass:"ion ion-md-add-circle cursor-pointer"})]):t._e()],1):t._e(),t._v(" "),t.permission.require_refund&&t.addRequestRefundPermission(e)?a("b-btn",{staticClass:"btn btn-sm btn-outline-warning",attrs:{title:"Yêu cầu tiền hoàn cọc"},on:{click:function(a){return t.selectDeposit(e,t.modal.refund)}}},[a("i",{staticClass:"ion ion-logo-usd cursor-pointer",attrs:{title:"Yêu cầu tiền hoàn cọc"}})]):t._e()],1)])}),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:!t.listData||!t.listData.length,expression:"!listData || !listData.length"}]},[t._m(1)])],2)]),t._v(" "),a("modal-detail-deposit",{attrs:{item:t.depositModal,groupId:t.groupId},on:{onUpdateSuccess:function(e){return t.search()}}}),t._v(" "),t.permission.add_deposit?a("modal-add-deposit",{attrs:{deposit:t.tmpDeposit},on:{updateData:function(e){return t.search()}}}):t._e(),t._v(" "),a("modal-request-refund",{attrs:{item:t.depositModal}}),t._v(" "),a("modal-initial-deposit",{attrs:{deposit:t.depositModal},on:{updatedate:function(e){return t.search()}}}),t._v(" "),a("modal-export-deposit")],1)])])])]),t._v(" "),t.hasIframe?a("iframe",{staticClass:"border-0",staticStyle:{height:"85vh"},attrs:{src:t.getUrlIframe("/deposit/manage"),id:t.elementId.configIframe,width:"100%"}}):t._e()])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-md-4"},[e("h4",{staticClass:"ui-block-heading m-0"},[this._v("Quản lý cọc")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"text-center",attrs:{colspan:"20"}},[e("div",{staticClass:"mih-5re align-center"},[e("b",[this._v("Không có dữ liệu phù hợp, vui lòng thử lại với điều kiện tìm kiếm khác.")])])])}],!1,nt,"data-v-22577b84",null);e.default=it.exports},"Brr+":function(t,e){},CAWZ:function(t,e,a){"use strict";var n=a("PikB");e.a={getDeadlineOpts:function(){return n.a.get("/AdMasterProfile/getDeadlineOpts")},addDocumentType:function(t){return n.a.post("/AdMasterProfile/addDocumentType",t)},getDocumentTypes:function(t){return n.a.get("/AdMasterProfile/getDocumentTypes",{params:t})},deleteDocumentType:function(t){return n.a.post("/AdMasterProfile/deleteDocumentType",t)},updateDocumentType:function(t){return n.a.post("/AdMasterProfile/updateDocumentType",t)},addPositionDocumentConfig:function(t){return n.a.post("/AdMasterProfile/addPositionDocumentConfig",t)},removePositionDocumentConfig:function(t){return n.a.post("/AdMasterProfile/removePositionDocumentConfig",t)},updatePositionDocumentConfig:function(t){return n.a.post("/AdMasterProfile/updatePositionDocumentConfig",t)},getPositionDocumentConfig:function(t){return n.a.get("/AdMasterProfile/getPositionDocumentConfig",{params:t})},createDocument:function(t){return n.a.post("/AdMasterProfile/createDocument",t)},approveDocument:function(t){return n.a.post("/AdMasterProfile/approveDocument",t)},getDocuments:function(t){return n.a.get("/AdMasterProfile/getDocumentUploads",{params:t})},getDocumentAnalytic:function(t){return n.a.get("/AdMasterProfile/getDocumentAnalytic",{params:t})},removeDocument:function(t){return n.a.post("/AdMasterProfile/removeDocument",t)},getDocumentDataFromMPId:function(t){return n.a.get("/AdMasterProfile/getDocumentDataFromMPId",{params:t})},getAnalyticList:function(t){return n.a.get("/AdMasterProfile/getAnalyticList",{params:t})},uploadFileTaxCode:function(t){return n.a.post("/AdMasterProfile/uploadFileTaxCode",t)},uploadFileAccountNumber:function(t){return n.a.post("/AdMasterProfile/uploadFileAccountNumber",t)},checkStatusJob:function(t){return n.a.get("/AdMasterProfile/checkStatusJob",{params:t})},createNote:function(t){return n.a.post("/AdProfiles/createNote",t)},handoverStaff:function(t){return n.a.post("/AdMasterProfile/handoverStaff",t)},sendChat:function(t){return n.a.post("/AdMasterProfile/sendChatAboutDocument",t)},getPhoneNumber:function(t){return n.a.get("/AdMasterProfile/getPhoneNumber",{params:t})}}},CB3g:function(t,e){},CIh5:function(t,e){},CRSl:function(t,e){},CZqh:function(t,e){},CbBl:function(t,e){},CoZ9:function(t,e){},CpaI:function(t,e,a){"use strict";var n=a("PikB"),i=a("Saf8");e.a={getListRegions:function(){return n.a.get("/AdSearchStaff/getRegionList")},getListProvinceByRegions:function(t){var e={region_id:t};return n.a.get("/AdSearchStaff/getProvincesByRegion",{params:e})},getAllProvince:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.a.get("AdAddresses/getListRealProvince",{params:t})},getProvinceByRegionId:function(t){return n.a.get("AdAddresses/getProvinceByRegionId",{params:t})},getDistrictByProvinceId:function(t){return n.a.get("AdAddresses/getListRealDistrictByProvinceId",{params:t})},getDistrictByProvinceIdV2:function(t){return n.a.get("AdAddresses/getListRealDistrictByProvinceIdV2",{params:t})},getSubDistrictByDistrictId:function(t){return n.a.get("AdAddresses/getListRealSubDistrictByDistrictId",{params:t})},getProvincesByRegionHr:function(t){return n.a.get("AdAddresses/getProvincesByRegionHr",{params:t})},getProvincesByRegion:function(t){return n.a.get("AdAddresses/getProvincesByRegion",{params:t})},getDistrictByID:function(t){return n.a.get("AdAddresses/getDistrictByID",{params:t})},getWardByDistrictByID:function(t){return n.a.get("AdAddresses/getWardByDistrictID",{params:t})},getDistrictAddressByProvinceId:function(t){return n.a.get("AdAddresses/getDistrictsByProvinceId",{params:t})},getSubDistrictAddressByDistrictId:function(t){return n.a.get("AdAddresses/getSubDistrictsByDistrictId",{params:t})},getAllProvinceHrmV2:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return i.a.get("/address-v2/provinces",{params:t})},getDistrictByProvinceIdHrmV2:function(t){return i.a.get("/address-v2/districts",{params:t})},getSubDistrictHrmV2:function(t){return i.a.get("/address-v2/sub-districts",{params:t})}}},CpkS:function(t,e){},CvGb:function(t,e){},D56I:function(t,e){},DDmj:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAASCAYAAACEnoQPAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAlSURBVHgB7ctBFQAABETBJaeuGqlAB27en/tYZbSWXAdkMvlPHksVAywf9VShAAAAAElFTkSuQmCC"},DPob:function(t,e){},DXZQ:function(t,e){},DbLI:function(t,e,a){"use strict";var n=a("mvHQ"),i=a.n(n),s=a("RUzx"),o=a.n(s),r=a("xF2Z"),l={name:"multi-select-position",components:{Multiselect:o.a},props:{departmentIds:{default:null},positionIds:{default:null},autoClose:{default:null},hideSelected:{default:null},placeholder:{default:"Chọn vị trí"},disabled:{default:!1},listPosition:{},departmentId:{},isSyllabus:{default:!1},triggerDuplicateChange:{default:!1},isMultiple:{default:!0},excludeDepartment:{type:Array,default:function(){return[]}},notInGroup:{type:Array,default:function(){return[]}}},data:function(){return{option:null,options:[],triggerDuplicate:!1}},created:function(){this.getList(this.departmentIds)},watch:{option:function(t,e){this.$emit("handlePositionSelected",t)},departmentIds:function(t,e){this.getList(t)},listPosition:{immediate:!0,handler:function(t,e){this.getList(),this.option=null}},departmentId:{immediate:!0,handler:function(t,e){this.getList()}},triggerDuplicateChange:function(t,e){this.triggerDuplicate=t},positionIds:function(t,e){this.triggerDuplicate||this.options&&this.options.length>0&&this.setList()}},methods:{upTriger:function(){this.triggerDuplicateChange=!1},reset:function(){this.option=null},setList:function(){var t=this;this.positionIds&&this.positionIds.length>0?(this.option=[],this.positionIds.split(",").forEach(function(e){if(e){var a=t.options.find(function(t){return+t.id==+e});a&&t.option.push(a)}})):this.option=null},getList:function(t){var e=this;if(!t&&sessionStorage.getItem("allPosition"))return this.options=JSON.parse(sessionStorage.getItem("allPosition")),this.listPosition&&this.listPosition.length&&this.setListOption(this.listPosition),this.excludeDepartment&&this.excludeDepartment.length>0&&(this.options=this.options.filter(function(t){return!e.excludeDepartment.includes(+t.department_id)})),this.departmentId&&this.setListOptionByDepartmentId(this.departmentId),this.isSyllabus&&this.setListOptionSyllarbus(),this.notInGroup.length>0&&(this.options=this.options.filter(function(t){if(!e.notInGroup.includes(parseInt(t.group_id)))return!0},{notInGroup:this.notInGroup})),void this.setList();r.a.getAllPositionByDepartmentIds({departmentIds:t,isSyllabus:this.isSyllabus}).then(function(a){a.data.success&&(e.options=a.data.data,e.excludeDepartment&&e.excludeDepartment.length>0&&(e.options=e.options.filter(function(t){return!e.excludeDepartment.includes(+t.department_id)})),e.triggerDuplicate=!1,e.$emit("handleTriggerDuplicateChange",!1),e.setList(),t||sessionStorage.setItem("allPosition",i()(e.options)),e.listPosition&&e.listPosition.length&&e.setListOption(e.listPosition),e.departmentId&&e.setListOptionByDepartmentId(e.departmentId),e.isSyllabus&&e.setListOptionSyllarbus())}).catch(function(t){console.log(t)})},setListOption:function(t){this.options=this.options.filter(function(e){return!!t.includes(parseInt(e.id))||(!!t.includes(e.id)||void 0)})},setListOptionByDepartmentId:function(t){this.options=this.options.filter(function(e){if(parseInt(t)===parseInt(e.department_id))return!0}),this.setList()},setListOptionSyllarbus:function(){this.options=this.options.filter(function(t){if(1!==parseInt(t.department_id))return!0}),this.setList()}}},c=a("XyMi"),d=Object(c.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{attrs:{options:t.options,multiple:t.isMultiple,placeholder:t.placeholder,label:"name","track-by":"id",selectedLabel:"",deselectLabel:"X",selectLabel:"","close-on-select":t.autoClose,"hide-selected":t.hideSelected,disabled:t.disabled},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,null,null,null);e.a=d.exports},DeeD:function(t,e,a){"use strict";var n=a("Y/vs"),i=a("pedj"),s=a("qwjJ"),o=a("IC97"),r=a("hC/b"),l=a("oonE"),c={name:"detail-liquidate-contract",props:{title:{type:String,default:"Thông tin thanh lý"},id:{type:String,default:"detail-liquidate-contract"},contractId:{default:null},contract:{},edit:{default:!0}},components:{FileViewUpload:i.a,SelectOption:s.a,Datepicker:o.a},data:function(){return{liquidateInfo:{id:null,contract_id:null,date:null,reason:null,other_reason:null,status:null},reasonLiquidate:l.a.reasonLiquidate,files:[],fileAdd:[],fileDelete:[],loading:!1}},watch:{},methods:{resetInfo:function(){this.files=[],this.fileAdd=[],this.fileDelete=[],this.liquidateInfo.liquidate_date="",this.liquidateInfo.reason="",r.a.resetData(this.liquidateInfo)},updateLiquidateInfo:function(){var t=this,e=this.contractId;if(e){var a=new FormData;if(this.liquidateInfo.liquidate_date&&this.liquidateInfo.reason&&("other"!==this.liquidateInfo.reason||this.liquidateInfo.other_reason)){var i=new Date;if(!(new Date(this.liquidateInfo.liquidate_date).getTime()<=i.getTime())||confirm("Hợp đồng sẽ bị vô hiệu hóa ngay lập tức !")){for(var s in this.fileDelete)a.append("fileDelete["+s+"]",this.fileDelete[s]);for(var o in this.fileAdd)a.append("fileAdd["+o+"]",this.fileAdd[o]);for(var l in this.liquidateInfo)this.liquidateInfo[l]instanceof Date?a.append(l,this.liquidateInfo[l].toDateString()):this.liquidateInfo[l]?a.append(l,this.liquidateInfo[l]):a.append(l,"");a.append("contract_id",e),this.$startLoading(),n.a.updateLiquidateInfo(a).then(function(e){e.data.success?(t.$emit("updateOk",e.data.data),t.files=e.data.data.file||[],t.fileAdd=[],t.fileDelete=[],t.$bvModal.hide(t.id),r.a.showMessage(e.data.message,"success")):r.a.showMessage(e.data.message||"Không cập nhật được thông tin thanh lý, vui lòng liên hệ IT để được hỗ trợ !","warning")}).catch(function(t){r.a.showMessage("Không cập nhật được thông tin thanh lý, vui lòng liên hệ IT để được hỗ trợ !","warning"),console.log(t)}).finally(function(e){t.resetInfo(),t.$stopLoading()})}}else r.a.showMessage("Vui lòng nhập đủ thông tin !")}},getLiquidateInfo:function(){var t=this,e=this.contractId||this.contract.id;if(e){this.loading=!0;var a={contract_id:e};n.a.getLiquidateInfo(a).then(function(e){e.data.success?(e.data.data&&(t.liquidateInfo=e.data.data,t.files=e.data.data.file),t.fileAdd=[],t.fileDelete=[]):(r.a.showMessage(e.data.message||"Không thể lấy thông tin thanh lý !","warning"),t.resetInfo())}).catch(function(e){r.a.showMessage("Không thể lấy thông tin thanh lý !","warning"),console.log(e),t.resetInfo()}).finally(function(e){t.loading=!1})}}}},d=a("XyMi"),u=Object(d.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{"hide-footer":"","modal-class":"modal-lg-custom align-items-center",title:t.title,id:t.id,centered:"",static:""},on:{hide:t.resetInfo,shown:t.getLiquidateInfo}},[a("b-row",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("b-col",{attrs:{md:"6"}},[a("b-form-group",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Ngày thanh lý "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("datepicker",{attrs:{format:"dd/MM/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,placeholder:"Chọn ngày thanh lý","calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},model:{value:t.liquidateInfo.liquidate_date,callback:function(e){t.$set(t.liquidateInfo,"liquidate_date",e)},expression:"liquidateInfo.liquidate_date"}})],1)],1),t._v(" "),a("b-col",{attrs:{md:"6"}},[a("b-form-group",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Lý do "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("SelectOption",{attrs:{options:t.reasonLiquidate,placeholder:"Chọn lý do thanh lý hợp đồng"},model:{value:t.liquidateInfo.reason,callback:function(e){t.$set(t.liquidateInfo,"reason",e)},expression:"liquidateInfo.reason"}})],1)],1),t._v(" "),a("b-col",{directives:[{name:"show",rawName:"v-show",value:"other"===t.liquidateInfo.reason,expression:"liquidateInfo.reason === 'other'"}],staticClass:"mt-1",attrs:{md:"12"}},[a("b-form-group",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Nhập lý do khác "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("b-input",{attrs:{placeholder:"Nhập lý do thanh lý hợp đồng"},model:{value:t.liquidateInfo.other_reason,callback:function(e){t.$set(t.liquidateInfo,"other_reason",e)},expression:"liquidateInfo.other_reason"}})],1)],1),t._v(" "),a("b-col",{staticClass:"mt-1",attrs:{md:"12"}},[a("b-form-group",{attrs:{label:"Thêm file thanh lý (nếu có)"}},[a("FileViewUpload",{attrs:{"file-add":t.fileAdd,"file-delete":t.fileDelete,files:t.files,edit:t.edit,accept:"image/*, .pdf, .doc, .docx","input-id":t.id+"-file-liquidation",hideUploadButton:!0}})],1)],1)],1),t._v(" "),a("div",{staticClass:"seperate-sm mb-1"}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit,expression:"edit"}],staticClass:"text-center"},[a("b-btn",{attrs:{variant:"ghtk",name:"stop-work-btn-update-liquidate-info",id:"stop-work-btn-update-liquidate-info"},on:{click:t.updateLiquidateInfo}},[t._v("Xác nhận thanh lý")])],1)],1)},[],!1,null,null,null);e.a=u.exports},DkPr:function(t,e,a){"use strict";var n=a("BO1k"),i=a.n(n),s=a("mvHQ"),o=a.n(s),r=a("RUzx"),l=a.n(r),c=a("xF2Z"),d={name:"single-select-duty",components:{Multiselect:l.a},props:{dutyType:{},dutyId:null,isDisabled:{type:Boolean}},data:function(){return{allDuty:[],option:null,options:[],dutyByType:{office:[1,3,10,8,9,6,7],operation:[1,2,3,4,5,6,7]}}},created:function(){this.getList()},watch:{option:function(t,e){this.$emit("handleSelected",t)},dutyId:function(t,e){t?this.setSelectedOption():this.option=null},dutyType:function(t){this.setOptions(t)}},methods:{getList:function(){var t=this;if(sessionStorage.getItem("listDuties"))return this.allDuty=JSON.parse(sessionStorage.getItem("listDuties")),this.setOptions(this.dutyType),void this.setSelectedOption();c.a.getDutiesList().then(function(e){e.data.success&&(t.allDuty=e.data.data,sessionStorage.setItem("listDuties",o()(t.allDuty)),t.setOptions(t.dutyType),t.setSelectedOption())}).catch(function(t){console.log(t)})},setOptions:function(t){var e=this;t||(this.options=this.allDuty);var a=[];if(this.dutyByType[t]){var n=function(t){e.allDuty.forEach(function(e){return+e.id===t&&a.push(e)})},s=!0,o=!1,r=void 0;try{for(var l,c=i()(this.dutyByType[t]);!(s=(l=c.next()).done);s=!0){n(l.value)}}catch(t){o=!0,r=t}finally{try{!s&&c.return&&c.return()}finally{if(o)throw r}}}this.options=a},setSelectedOption:function(){var t=this;this.options.length>0&&this.dutyId&&(this.option=this.options.find(function(e){return parseInt(e.id)===parseInt(t.dutyId)}))}}},u=a("XyMi"),h=Object(u.a)(d,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("multiselect",{attrs:{options:t.options,placeholder:"Chọn chức vụ",label:"name","track-by":"name",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn",searchable:!0,disabled:t.isDisabled},on:{select:function(e){return t.$emit("select",e)}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v("Chọn chức vụ")])])],1)},[],!1,null,null,null);e.a=h.exports},"E+3v":function(t,e){},EBYl:function(t,e){},ERtT:function(t,e){},ETVN:function(t,e){},ETv2:function(t,e,a){"use strict";var n={props:{logs:{},appendAction:{},itemStyle:{type:Object,default:function(t){return{padding:"0 0 20px",fontSize:"14px"}}},timeField:{default:"created"},messageField:{default:"desc"},timeFormat:{type:Function},timeLogClass:{}}},i=a("XyMi");var s=function(t){a("Scpf")},o=Object(i.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"ant-timeline"},t._l(t.logs,function(e,n){return a("li",{key:"log-"+n,staticClass:"ant-timeline-item",style:t.itemStyle},[a("div",{staticClass:"ant-timeline-item-tail"}),t._v(" "),a("div",{staticClass:"ant-timeline-item-head ant-timeline-item-head-blue"}),t._v(" "),a("div",{staticClass:"ant-timeline-item-content"},[a("span",{class:t.timeLogClass},[t._v(t._s(t.timeFormat?t.timeFormat(e[t.timeField],"HH:mm:ss DD-MM-YYYY"):e[t.timeField]))]),t._v(" "),e.created_by?a("span",{staticClass:"user-log"},[t._v(t._s(e.created_by.username||"")+" "+t._s(e.created_by.position_name?" - "+e.created_by.position_name:""))]):e.user?a("span",{staticClass:"user-log"},[t._v(t._s(e.user.username||"")+" "+t._s(e.user.station?" - "+e.user.station:""))]):t._e(),t._v(" "),a("span",{domProps:{innerHTML:t._s(e[t.messageField])}}),t._v(" "),t.appendAction?a("span",[e.action_censor?a("b",{staticClass:"text-ghtk-action text-underline-hover",on:{click:function(a){return t.$emit("action",{action:"censor",data:e})}}},[t._v("(Sửa)")]):t._e(),t._v(" "),"update"===e.type?a("b",{staticClass:"text-ghtk-action text-underline-hover",on:{click:function(a){return t.$emit("action",{action:"view-log-update",data:e.id})}}},[t._v("(Chi tiết)")]):t._e()]):t._e()])])}),0)},[],!1,s,"data-v-e15e3d4a",null);e.a=o.exports},EUVc:function(t,e){},EWru:function(t,e){},EZi6:function(t,e){},EfBK:function(t,e){},Enw3:function(t,e){},"F/2K":function(t,e,a){"use strict";var n=a("Xxa5"),i=a.n(n),s=a("exGp"),o=a.n(s),r=a("Dd8w"),l=a.n(r),c=a("CpaI"),d=a("fwrr"),u=a("RUzx"),h={name:"single-select-province",components:{Multiselect:a.n(u).a},props:{placeholder:{type:String,default:"Chọn tỉnh"},regionId:{type:String},regionName:{type:String},provinceId:{},isDisabled:{type:Boolean},unselect:{type:Boolean},state:{type:Boolean,default:null},selectClass:{default:""},reset:{default:!1}},data:function(){return{option:null,options:[]}},created:function(){this.getAllProvince()},watch:{option:function(t,e){this.$emit("handleSelectedProvince",t)},regionId:function(t,e){t?this.getProvinceByRegionId(t):(this.option=null,this.getAllProvince())},regionName:function(t,e){t?this.getProvinceByRegionId(t):(this.option=null,this.getAllProvince())},provinceId:function(t,e){t?this.setSelectedOption():this.option=null},unselect:function(t,e){t&&(this.option=null)},reset:function(){this.option=null}},methods:{setSelectedOption:function(){var t=this;this.options&&this.options.length&&this.provinceId&&(this.option=this.options.find(function(e){return parseInt(e.id)===parseInt(t.provinceId)})||null)},setDisplayName:function(){this.options=this.options.map(function(t){var e=null===t.end_date||new Date(t.end_date)>new Date?t.prefix+" "+t.name:t.prefix+" "+t.name+" (Cũ)";return l()({},t,{name:e})})},getAllProvince:function(){var t=this;return o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.getters["location/getRealProvinces"];case 2:t.options=e.sent,t.setDisplayName(),t.setSelectedOption();case 5:case"end":return e.stop()}},e,t)}))()},getProvinceByRegionId:function(t){var e=this;if(this.regionName){var a={regions:this.regionName};d.a.getProvinceByRegion(a).then(function(a){a&&a.data&&(e.options=a.data.data.ProvinceListingV2.data,e.setDisplayName(),1!==e.options.length||"HN"!==t&&"HCM"!==t?e.option=null:e.option=e.options[0])}).catch(function(t){console.log(t)})}else{var n={regionId:t};c.a.getProvinceByRegionId(n).then(function(t){t.data.success&&(e.options=t.data.data,e.option=null)}).catch(function(t){console.log(t)})}}}},p=a("XyMi");var m=function(t){a("Brr+")},f=Object(p.a)(h,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{class:[t.selectClass,{stateTrue:!0===t.state,stateFalse:0==t.state}],attrs:{options:t.options,placeholder:t.placeholder,disabled:t.isDisabled,label:"name","track-by":"id",selectedLabel:"",deselectLabel:"X",selectLabel:"Chọn",searchable:!0},on:{select:function(e){t.$emit("select",e)},input:function(e){t.$emit("input",e)},remove:function(e){t.$emit("remove",e)}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,m,"data-v-7440935c",null);e.a=f.exports},FJSv:function(t,e){},FcGS:function(t,e,a){"use strict";var n=a("gRE1"),i=a.n(n),s=a("mvHQ"),o=a.n(s),r=a("Gu7T"),l=a.n(r),c=a("RUzx"),d=a.n(c),u=a("YJw0"),h=a("hC/b"),p={name:"select-order-group",props:{groupOptions:{type:Array,default:function(t){return[]}},disabled:{default:!1,type:Boolean},multiple:{default:!1,type:Boolean},hideSelect:{default:!1,type:Boolean},autoClose:{default:!0,type:Boolean},placeholder:{default:"Chọn loại khai báo"},state:{type:Boolean,default:null},group:{type:String,default:null},groupSelect:{default:null},category:{default:null},categoryGroup:{default:!0,type:Boolean},appendCategory:{default:!1,type:Boolean}},components:{Multiselect:d.a},created:function(){this.getType()},data:function(t){return{option:null,options:[]}},watch:{group:function(t,e){this.setList()}},methods:{setList:function(){var t=this;if(this.group&&this.options&&Array.isArray(this.options)&&this.options.length)if(this.categoryGroup){if(!this.multiple)return void this.options.every(function(e){if(Array.isArray(e.groups)){var a=e.groups.find(function(e){return e.alias===t.group});a&&(t.option=a)}return!t.option||!t.option.length});var e=this.group.splite(",");this.options.every(function(a){if(Array.isArray(a.groups)){var n=a.groups.filter(function(t){return e.includes(t.alias)});n&&(t.option=[].concat(l()(t.option),l()(n)))}})}else{if(!this.multiple){var a=this.options.find(function(e){return e.alias===t.group});return void(a&&(this.option=a))}var n=this.group.splite(","),i=this.options.filter(function(t){return n.includes(t.alias)});this.option=i}else this.option=null},getType:function(){var t=this;if(!h.a.isEmpty(this.groupOptions)||sessionStorage.getItem("hrOrderType"))return h.a.isEmpty(this.groupOptions)?this.buildOption(JSON.parse(sessionStorage.getItem("hrOrderType"))):this.buildOption(this.groupOptions),void this.setList();u.a.getType().then(function(e){e.data.success&&(t.buildOption(e.data.data),t.setList(),sessionStorage.setItem("hrOrderType",o()(e.data.data)))}).catch(function(t){console.log(t),h.a.showMessage("Có lỗi xảy ra, không lấy được danh sách loại khai báo !")})},buildOption:function(t){var e=this;if(t&&Array.isArray(t)&&t.length)if(this.options=[],this.categoryGroup){var a={};t.forEach(function(t){var n=t.category||"other";a[n]?a[n].groups.push({alias:t.alias,category:t.category,name:t.group+(e.appendCategory?"("+t.category_name+")":"")}):a[n]={category:n,category_name:t.category_name||"Khác",groups:[{alias:t.alias,category:t.category,name:t.group+(e.appendCategory?"("+t.category_name+")":"")}]}}),this.options=i()(a)}else t.forEach(function(t){t.alias&&e.options.push({alias:t.alias,category:t.category,name:t.group+(e.appendCategory?"("+t.category_name+")":"")})})}}},m=a("XyMi");var f=function(t){a("Xxi1")},g=Object(m.a)(p,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{class:{stateTrue:!0===t.state,stateFalse:0==t.state},attrs:{options:t.options,"group-values":t.categoryGroup?"groups":null,"group-label":t.categoryGroup?"category_name":null,"group-select":t.categoryGroup&&t.groupSelect,disabled:t.disabled,multiple:t.multiple,placeholder:t.placeholder,label:"name","track-by":"alias",selectedLabel:"",deselectLabel:"X",selectLabel:"","hide-selected":t.hideSelect,"close-on-select":t.autoClose},on:{input:function(e){t.$emit("input",e)},select:function(e){t.$emit("select",e)}},scopedSlots:t._u([{key:"option",fn:function(e){return[a("span",{class:!e.option.$isLabel&&t.categoryGroup&&"pl-2 border-left border-secondary"},[t._v(" "+t._s(e.option.name||e.option.$groupLabel))])]}}]),model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,f,"data-v-36e3fa0b",null);e.a=g.exports},"FgI/":function(t,e){},FlDG:function(t,e,a){"use strict";var n=a("BO1k"),i=a.n(n),s=a("hC/b"),o=a("EAZf"),r=a.n(o),l=a("dAhr"),c={name:"edit-period-documents",components:{Viewer:r.a,pdf:l.a},data:function(t){return{tmpFile:null}},props:{accept:{type:String,default:"image/*, .pdf, .doc, .docx, application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document, video/*"},files:{default:[]},type:{type:String,default:"edit"},canDeleteOrigin:{type:Boolean,default:!0},originCount:{type:Number,default:0}},computed:{helper:function(){return s.a}},watch:{},methods:{getUrl:function(t){return s.a.isEmpty(t)?null:"string"==typeof t?t:URL.createObjectURL(t)},openLink:function(t){window.open(t,"_blank")},addFile:function(t){this.tmpFile||(this.tmpFile={});var e=t.target.files||t.dataTransfer.files;e.size&&(e=[e]);var a=this.accept.split(", "),n=!0,o=!1,r=void 0;try{for(var l,c=i()(e);!(n=(l=c.next()).done);n=!0){var d=l.value,u=d.type.split("/"),h=d.name.split(".").pop();if(!u||u.leght<1)return;a.includes(d.type)||a.includes(u[0]+"/*")||a.includes("."+h)?this.tmpFile=d:s.a.showMessage("Định dạng file "+d.name+"  không được hỗ trợ !","warning")}}catch(t){o=!0,r=t}finally{try{!n&&c.return&&c.return()}finally{if(o)throw r}}t.target.value=null}}},d=a("XyMi");var u=function(t){a("SDcQ")},h=Object(d.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",[t._l(t.files,function(e,n){return[a("div",{key:e.name+"file-add"+n,staticClass:"col-4 mb-3"},[a("div",{staticClass:"d-flex justify-content-center mb-2"},["image"===t.helper.getFileType(e)?a("img",{staticClass:"mw-100",style:{height:"250px",width:"100%"},attrs:{src:t.getUrl(e),alt:e.name}}):"video"===t.helper.getFileType(e)?a("video",{staticClass:"mw-100",style:{height:"250px",width:"100%"},attrs:{controls:""}},[a("source",{attrs:{src:t.getUrl(e),type:"video/mp4"}}),t._v("\n            Your browser does not support the video tag.\n          ")]):"pdf"===t.helper.getFileType(e)?a("iframe",{staticClass:"mw-100",style:{height:"250px",width:"100%"},attrs:{src:t.getUrl(e),frameborder:"0"}}):"doc"===t.helper.getFileType(e)?a("img",{staticClass:"mw-100",style:{height:"250px",width:"100%"},attrs:{src:"https://gs.giaohangtietkiem.vn/d/e24bec4ee88441bdb3e79466dd541152.png?height=250"}}):t._e()]),t._v(" "),a("div",{staticClass:"d-flex mt-2",class:"edit"!==t.type&&"add"!==t.type||!(t.canDeleteOrigin||n>=t.originCount)?"justify-content-center":"justify-content-between"},[a("button",{staticClass:"btn btn-md btn-outline-ghtk rounded",staticStyle:{width:"48%"},on:{click:function(a){t.openLink(t.getUrl(e))}}},[t._v("Xem\n          ")]),t._v(" "),"edit"!==t.type&&"add"!==t.type||!(t.canDeleteOrigin||n>=t.originCount)?t._e():a("button",{staticClass:"btn btn-md btn-outline-danger rounded",staticStyle:{width:"48%"},on:{click:function(e){return t.$emit("action",{action:"delete-file",data:{idx:n}})}}},[t._v("Xóa\n          ")])])])]})],2),t._v(" "),a("input",{staticClass:"custom-file-input d-none",attrs:{type:"file",multiple:!1,accept:t.accept,id:"tmpFile",name:"input_"},on:{change:function(e){return t.$emit("action",{action:"new-file",data:{file:t.tmpFile}})},input:t.addFile}}),t._v(" "),"view"!==t.type?a("div",{staticClass:"m-0 d-flex justify-content-center"},[a("label",{staticClass:"custom-label",attrs:{for:"tmpFile",id:"custom-file-label"}},[t._t("label",function(){return[a("div",{staticClass:"rounded cursor-pointer btn-ghtk px-5 py-1 font-large"},[t._v("Thêm tài liệu")])]})],2)]):t._e()],1)},[],!1,u,"data-v-2f33ce29",null);e.a=h.exports},Fyw1:function(t,e){},"G+44":function(t,e){},GNnm:function(t,e,a){"use strict";var n=a("Xxa5"),i=a.n(n),s=a("exGp"),o=a.n(s),r=a("3m8s"),l=a("hC/b"),c={name:"ModalRewardConfirm",props:{action:{type:String,default:""},title:{type:String,default:""},content:{type:String,default:""},dataReward:{type:Object,default:function(t){return{}}}},computed:{helper:function(t){return l.a}},watch:{dataReward:function(t){this.reward=t}},data:function(){return{loadingComponent:!1,reward:{}}},methods:{emitSuccess:function(){this.$bvModal.hide("modal-action-reward-confirm"),this.$emit("reloadListFstar")},submit:function(){var t=this;return o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.loadingComponent=!0,"approve"!==t.action){e.next=6;break}return e.next=4,t.submitApproveReward();case 4:e.next=14;break;case 6:if("remove"!==t.action){e.next=11;break}return e.next=9,t.submitDeleteReward();case 9:e.next=14;break;case 11:if("cancel"!==t.action){e.next=14;break}return e.next=14,t.submitCancelReward();case 14:t.loadingComponent=!1;case 15:case"end":return e.stop()}},e,t)}))()},submitApproveReward:function(){var t=this;return o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.approveReward({id:t.reward.id}).then(function(e){e.data.success?(l.a.showMessage(e.data.message,"success"),t.emitSuccess()):l.a.showMessage(e.data.message,"error")}).catch(function(t){l.a.showMessage(t.response.data.message,"error")});case 2:case"end":return e.stop()}},e,t)}))()},submitDeleteReward:function(){var t=this;return o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.deleteReward({id:t.reward.id}).then(function(e){e.data.success?(l.a.showMessage(e.data.message,"success"),t.emitSuccess()):l.a.showMessage(e.data.message,"error")}).catch(function(t){l.a.showMessage(t.response.data.message,"error")});case 2:case"end":return e.stop()}},e,t)}))()},submitCancelReward:function(){var t=this;return o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.cancelReward({id:t.reward.id}).then(function(e){e.data.success?(l.a.showMessage(e.data.message,"success"),t.emitSuccess()):l.a.showMessage(e.data.message,"error")}).catch(function(t){l.a.showMessage(t.response.data.message,"error")});case 2:case"end":return e.stop()}},e,t)}))()}}},d=a("XyMi");var u=function(t){a("sbYV")},h=Object(d.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{attrs:{id:"modal-action-reward-confirm",title:t.title,scrollable:"","hide-footer":"","header-class":"justify-content-center",centered:""}},[a("div",{staticClass:"mb-4 text-center"},[t._v("\n      "+t._s(t.content)+"\n    ")]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingComponent,expression:"loadingComponent"}],staticClass:"mt-1 text-center"},[a("button",{staticClass:"btn btn-outline-success mr-4 w-25",attrs:{"data-style":"zoom-out"},on:{click:function(e){return t.$bvModal.hide("modal-action-reward-confirm")}}},[t._v("\n        Hủy\n      ")]),t._v(" "),a("button",{staticClass:"btn btn-success ml-4 w-25",attrs:{"data-style":"zoom-out"},on:{click:t.submit}},[t._v("\n        Xác nhận\n      ")])])])],1)},[],!1,u,"data-v-03b4fbeb",null);e.a=h.exports},GXGd:function(t,e){},Gf1z:function(t,e){},GoQ2:function(t,e,a){"use strict";var n=a("Zx67"),i=a.n(n),s=a("Zrlr"),o=a.n(s),r=a("wxAW"),l=a.n(r),c=a("zwoO"),d=a.n(c),u=a("Pf15"),h=a.n(u),p=function(t){function e(){return o()(this,e),d()(this,(e.__proto__||i()(e)).apply(this,arguments))}return h()(e,t),l()(e,[{key:"getClassName",value:function(t){var a=e.LIST_HEALTH_CLASSES.find(function(e){return e.value===parseInt(t)});return a?a.text:"Không xác định"}}]),e}(a("MUME").a);p.TYPE_HEALTH_CERTIFICATE=5,p.TYPE_GUARDIAN_LETTER=10,p.TYPE_DRIVER_LICENSE=13,p.TYPE_CIC=58,p.TYPE_VEHICLE_RC=60,p.LIST_HEALTH_CLASSES=[{value:1,text:"Loại I"},{value:2,text:"Loại II"},{value:3,text:"Loại III"},{value:4,text:"Loại IV"},{value:5,text:"Loại V"},{value:0,text:"Không xác định"}],e.a=p},Gq70:function(t,e){},Gymz:function(t,e){},H2gP:function(t,e){},H5Ae:function(t,e){},HZ8Y:function(t,e){},Hci3:function(t,e,a){"use strict";var n=a("RUzx"),i=a.n(n),s=a("hC/b"),o={name:"select-shift",components:{Multiselect:i.a},props:{disabled:{default:!1},shift:{default:""}},computed:{helper:function(t){return s.a}},data:function(){return{minHoursPerShift:10,maxHoursPerShift:14,optionStart:null,optionEnd:null,optionTimes:[],tempShift:{from:null,to:null}}},created:function(){this.getConfigTime()},watch:{shift:function(){var t=this;this.optionStart=this.shift?this.optionTimes.find(function(e){return e.value===t.shift.from}):null,this.optionEnd=this.shift?this.optionTimes.find(function(e){return e.value===t.shift.to}):null}},methods:{setSelectedOption:function(){var t=this;this.optionTimes&&this.optionTimes.length&&(this.optionStart=this.shift?this.optionTimes.find(function(e){return e.value===t.shift.from}):null,this.optionEnd=this.shift?this.optionTimes.find(function(e){return e.value===t.shift.to}):null)},getConfigTime:function(){for(var t=0;t<24;t++){var e=t<10?{label:"0"+t+":00",value:"0"+t+":00:00"}:{label:t+":00",value:t+":00:00"};this.optionTimes.push(e)}this.shift&&(this.tempShift=this.shift,this.setSelectedOption())},validationShift:function(){if(null!==this.tempShift.from&&null!==this.tempShift.to){var t=parseInt(this.tempShift.from.split(":")[0]),e=parseInt(this.tempShift.to.split(":")[0]),a=t<e?e-t:24-t+e;return a<this.minHoursPerShift||a>this.maxHoursPerShift?s.a.showMessage("Khung giờ của ca làm việc không được nhỏ hơn "+this.minHoursPerShift+" tiếng và lớn hơn "+this.maxHoursPerShift+" tiếng.","warning"):void 0}},handleStartChange:function(t){this.tempShift.from=t.value,this.validationShift(),this.handleShiftChange()},handleEndChange:function(t){this.tempShift.to=t.value,this.validationShift(),this.handleShiftChange()},handleShiftChange:function(){this.$emit("select",this.tempShift)}}},r=a("XyMi"),l=Object(r.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"select-user-work-type d-flex"},[a("multiselect",{attrs:{options:t.optionTimes,disabled:t.disabled,label:"label","track-by":"value",placeholder:"Bắt đầu ca",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn",searchable:!0},on:{select:t.handleStartChange},model:{value:t.optionStart,callback:function(e){t.optionStart=e},expression:"optionStart"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v("Bắt đầu ca")])]),t._v(" "),t._m(0),t._v(" "),a("multiselect",{attrs:{options:t.optionTimes,disabled:t.disabled,label:"label","track-by":"value",placeholder:"Kết thúc ca",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn",searchable:!0},on:{select:t.handleEndChange},model:{value:t.optionEnd,callback:function(e){t.optionEnd=e},expression:"optionEnd"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v("Kết thúc ca")])])],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"col-1 pt-2"},[e("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}})])}],!1,null,null,null);e.a=l.exports},Hv3x:function(t,e,a){"use strict";var n=a("7FTm"),i=a("RUzx"),s={name:"select-order-status",props:{status:{},statusOptions:{type:Array,default:function(t){return[]}},disabled:{default:!1,type:Boolean},multiple:{default:!1,type:Boolean},hideSelect:{default:!1,type:Boolean},autoClose:{default:!0,type:Boolean},placeholder:{default:"Chọn trạng thái"},state:{type:Boolean,default:null},CustomClass:{default:""}},components:{Multiselect:a.n(i).a},created:function(){this.statusOptions&&this.statusOptions.length&&(this.options=this.typeOptions,this.setList())},data:function(t){return{option:null,options:n.a.statusOptions}},watch:{status:function(t,e){this.setList()}},methods:{setList:function(){var t=this;if(this.options&&this.options.length&&this.status)if(this.multiple){var e=this.status.split(","),a=this.options.filter(function(t){return e.includes(t.value)});this.option=a}else{var n=this.options.find(function(e){return e.value===t.status});n&&(this.option=n)}else this.option=null}}},o=a("XyMi");var r=function(t){a("Xhte")},l=Object(o.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{class:[{stateTrue:!0===t.state,stateFalse:0==t.state},t.CustomClass],attrs:{options:t.options,disabled:t.disabled,multiple:t.multiple,placeholder:t.placeholder,label:"desc","track-by":"value",selectedLabel:"",deselectLabel:"X",selectLabel:"","hide-selected":t.hideSelect,"close-on-select":t.autoClose},on:{input:function(e){t.$emit("input",e)},select:function(e){t.$emit("select",e)}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,r,"data-v-0729392b",null);e.a=l.exports},HyZu:function(t,e){},IIaH:function(t,e,a){"use strict";var n=a("XyMi");var i=function(t){a("EWru")},s=Object(n.a)({name:"DefaultWorkCheckbox",props:["job","index","isOnsite"],data:function(){return{default_work:[]}},methods:{},created:function(){this.default_work=this.job},watch:{default_work:function(){this.$emit("update-item-config",this.index,this.default_work)},job:function(t){this.default_work=t}}},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-form-checkbox-group",{staticClass:"py-2",attrs:{id:"checkbox-default-work",name:"select-default-work"},model:{value:t.default_work,callback:function(e){t.default_work=e},expression:"default_work"}},[a("b-form-checkbox",{attrs:{value:"down_truck"}},[t._v("Nhập hàng")]),t._v(" "),a("b-form-checkbox",{attrs:{value:"sorting_package"}},[t._v("Rã bao")]),t._v(" "),a("b-form-checkbox",{attrs:{value:"labeling"}},[t._v("Chia hàng")]),t._v(" "),a("b-form-checkbox",{attrs:{value:"sorting_bag"}},[t._v("Nhập chuồng")]),t._v(" "),a("b-form-checkbox",{attrs:{value:"up_truck"}},[t._v("Xuất hàng")]),t._v(" "),t.isOnsite?a("b-form-checkbox",{attrs:{value:"transit"}},[t._v("Trung chuyển")]):t._e()],1)],1)},[],!1,i,"data-v-0b7abc66",null).exports,o=a("hC/b"),r=a("IC97"),l=a("PJh5"),c=a.n(l),d={components:{DefaultWorkCheckbox:s,Datepicker:r.a},props:{configDefaultWork:{type:Array},isOnsite:{}},data:function(){return{default_work:[]}},methods:{addConfig:function(){var t=this.default_work[this.default_work.length-1],e=void 0;void 0!==t?(t.to_date=c()(t.from_date).format("YYYY-MM-DD"),e=c()(t.to_date).add(1,"day").format("YYYY-MM-DD")):e=c()().format("YYYY-MM-DD"),this.default_work.push({from_date:e,to_date:null,alias_job:[]}),this.$emit("update-config",this.default_work)},removeConfig:function(t){t===this.default_work.length-1?(this.default_work.pop(),void 0!==this.default_work[this.default_work.length-1]&&(this.default_work[this.default_work.length-1].to_date=null)):(this.default_work=this.default_work.filter(function(e,a){return t!==a}),t-1>=0&&(this.default_work[t-1].to_date=c()(this.default_work[t].from_date).subtract(1,"days").format("YYYY-MM-DD"))),this.$emit("update-config",this.default_work)},updateItemConfig:function(t,e){this.default_work[t].alias_job=e,this.$emit("update-config",this.default_work)},validateTimeConfig:function(t){for(var e=0;e<t.length;++e)if(void 0!==t[e]){if(t[e].from_date=c()(t[e].from_date).format("YYYY-MM-DD"),t[e].to_date=null!==t[e].to_date?c()(t[e].to_date).format("YYYY-MM-DD"):null,c()(t[e].to_date).format("YYYY-MM-DD")<c()(t[e].from_date).format("YYYY-MM-DD"))return void o.a.showMessage("Ngày kết thúc phải lớn hơn hoặc bằng ngày bắt đầu","warning");if(void 0!==t[e+1]&&c()(t[e].to_date).format("YYYY-MM-DD")>=c()(t[e+1].from_date).format("YYYY-MM-DD"))return void o.a.showMessage("Thời gian config công việc mặc định không hợp lệ. Thời gian config sau không được đè lên thời gian config trước","warning")}},inputUpdate:function(t,e){var a=this.configDefaultWork;a[e].from_date=c()(t).format("YYYY-MM-DD"),a.sort(function(t,e){return new Date(t.from_date)-new Date(e.from_date)});for(var n=0;n<a.length;n++)n===a.length-1?a[n].to_date=null:a[n].to_date=c()(a[n+1].from_date).subtract(1,"days").format("YYYY-MM-DD");this.$emit("update-config",a)}},watch:{configDefaultWork:{handler:function(t){this.validateTimeConfig(t),this.default_work=t},deep:!0}},computed:{widthColumnTable:function(){return this.isOnsite?65:50}},created:function(){this.default_work=0!==this.configDefaultWork.length?this.configDefaultWork:[{from_date:c()().format("YYYY-MM-DD"),to_date:null,alias_job:[]}]}};var u=function(t){a("vFIp")},h=Object(n.a)(d,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("table",{staticClass:"table table-borderless"},[a("thead",[a("tr",{staticStyle:{"text-align":"center"}},[a("th",{style:{width:t.widthColumnTable+"%"}},[t._v("Công việc")]),t._v(" "),a("th",[t._v("Ngày bắt đầu")]),t._v(" "),a("th",[t._v("Ngày kết thúc")]),t._v(" "),a("th")])]),t._v(" "),a("tbody",t._l(t.default_work,function(e,n){return a("tr",[a("td",{staticClass:"align-self-center"},[a("default-work-checkbox",{attrs:{job:e.alias_job,index:n,"is-onsite":t.isOnsite},on:{"update-item-config":t.updateItemConfig}})],1),t._v(" "),a("td",{staticClass:"text-center"},[a("datepicker",{attrs:{format:"dd-MM-yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!1,placeholder:"Ngày bắt đầu",required:!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!1},on:{input:function(a){return t.inputUpdate(e.from_date,n)}},model:{value:e.from_date,callback:function(a){t.$set(e,"from_date",a)},expression:"item.from_date"}})],1),t._v(" "),null!=e.to_date?a("td",{staticClass:"text-center"},[a("datepicker",{attrs:{format:"dd-MM-yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,placeholder:"Ngày kết thúc",required:!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!1,disabled:"disabled"},model:{value:e.to_date,callback:function(a){t.$set(e,"to_date",a)},expression:"item.to_date"}})],1):a("td",{staticClass:"text-center"},[a("datepicker",{attrs:{format:"dd-MM-yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,placeholder:"Vô thời hạn",required:!1,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!1,disabled:"disabled"},model:{value:e.to_date,callback:function(a){t.$set(e,"to_date",a)},expression:"item.to_date"}})],1),t._v(" "),a("td",{staticClass:"text-center d-flex"},[a("b-button",{staticClass:"py-2 remove-config",attrs:{variant:"outline-danger",size:"sm"},on:{click:function(e){return t.removeConfig(n)}}},[t._v("X")])],1)])}),0)]),t._v(" "),a("b-button",{attrs:{size:"sm",variant:"outline-success add-config"},on:{click:t.addConfig}},[t._v("+ Thêm đầu việc")])],1)},[],!1,u,"data-v-455af99a",null);e.a=h.exports},IJZV:function(t,e){},IKfy:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAMCAYAAAC5tzfZAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADMSURBVHgBhZIBDcIwEEWvCQLmgKIAHDAJTMGGA1AwcDAHDAVIABQQHEzCHIz/4ZeUBtglL7f9u99emzpTDMOQIVVgCTLJvdg75zqLAwYPbmAnc1xbgDOoUxNFb38C9Qaswk9FbCQ4Aafh9wSUoAirIc2/eNY8E+p3MKXJIPTKm5ENOzCjie4chot2OySNx1Cz1802bMrBKZrdJ2TS848FddX1r5lkeN+wiwotUqu5vWTmUto2nH2SHJINHOeqTK0IzSFi0/PJoKGxkXgAVB2Q3ycwOhIAAAAASUVORK5CYII="},IZqH:function(t,e){},"Ia/w":function(t,e){},IcnI:function(t,e,a){"use strict";var n={};a.d(n,"userInfo",function(){return c}),a.d(n,"tokenData",function(){return d});var i={};a.d(i,"getUserInfo",function(){return k}),a.d(i,"loginByIamToken",function(){return x});var s={};a.d(s,"setUserInfo",function(){return M}),a.d(s,"setToken",function(){return T});var o,r=a("7+uW"),l=a("NYxO"),c=function(t){return t.userInfo},d=function(t){return t.tokenData},u=a("Xxa5"),h=a.n(u),p=a("exGp"),m=a.n(p),f=a("phbQ"),g=a("4WGu"),v=a("hC/b"),_=a("vfns"),b=a("R1Q+"),y=this,C=new _.a("local"),w=new _.a("session"),k=function(t){var e=t.commit;f.a.getUserInfo().then(function(t){if(t.data.success)e("setUserInfo",t.data.userInfo),e("setToken",t.data.token),sessionStorage.removeItem("isReload"),C.remove("isLoginAdminFailed");else{C.set("isLoginAdminFailed",!0);var a=new URL(window.location.href);if(!v.a.isInIframe()&&"/adm/auth/callback"!==a.pathname){C.remove(g.a.oidc.tokenIamStorage);var n=Object(b.a)(g.a.oidc);try{n.run(window.location.href)}catch(t){}}else w.remove(g.a.cacheKey.isLoginOnGchat)}}).catch(function(t){console.log("Có lỗi xảy ra khi lấy dữ liệu người dùng.")})},x=(o=m()(h.a.mark(function t(e){var a,n,i;e.commit;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=C.get(g.a.oidc.tokenIamStorage),n="",a&&a.accessToken&&(n=a.accessToken.accessToken),t.next=5,f.a.loginByIamToken({access_token:n});case 5:t.sent.data.success?(i=C.get(g.a.cacheKey.callbackRefererPath),window.location.href=i||window.location.origin):window.location.href=C.get(window.location.origin);case 7:case"end":return t.stop()}},t,y)})),function(t){return o.apply(this,arguments)}),S=new _.a("local"),M=function(t,e){t.userInfo=e,S.set("UserInfo",e)},T=function(t,e){t.tokenData=e},D=a("fEi7"),I={state:{gchatAuth:{access_token:null,refresh_token:null},is_refresh_token:!1,isShowModalChangeRound:!1},getters:{gchatAuth:function(t){return t.gchatAuth},isRefreshToken:function(t){return t.is_refresh_token},getIsShowModalChangeRound:function(t){return t.isShowModalChangeRound}},mutations:{ADD_EVENT:function(t,e){e&&"authentication"===e.type&&e.payload&&(t.gchatAuth.access_token=e.payload.token||"",t.gchatAuth.refresh_token=e.payload.refresh_token||"",D.a.saveGchatAuth(t.gchatAuth))},SEND_MESSAGE:function(t,e){if(e){var a=sessionStorage.getItem(g.a.limitPostMessageKey);if("0"!==a){var n=document.getElementById(e),i=!1;if(n)if(v.a.isInIframe()){var s=D.a.getToken(),o=D.a.getRefreshToken();s&&o&&(console.log("send to iframe","hrm_authentication_response"),n.contentWindow.postMessage({type:"hrm_authentication_response",payload:{access_token:s,refresh_token:o}},g.a.domainHrmFe),i=!0)}else{var r=localStorage.getItem(g.a.oidc.tokenIamStorage);r&&(console.log("send to iframe","hrm_iam_token"),n.contentWindow.postMessage({type:"hrm_iam_token",payload:r},g.a.domainHrmFe),i=!0)}i&&(a=null!==a&&void 0!==a?a>0?a-1:0:g.a.defaultLimitPostMessage-1,sessionStorage.setItem(g.a.limitPostMessageKey,a.toString()),setTimeout(function(){sessionStorage.setItem(g.a.limitPostMessageKey,g.a.defaultLimitPostMessage.toString())},g.a.timeLockPostMessage))}}},LISTEN_MESSAGE:function(t){window.addEventListener("message",function(e){if(e.origin===g.a.domainHrmFe){if("hrm_authentication_request"===e.data.type)if(t.gchatAuth.access_token)e.source.postMessage({type:"hrm_authentication_response",payload:t.gchatAuth},g.a.domainHrmFe);else{var a=localStorage.getItem(g.a.oidc.tokenIamStorage);e.source.postMessage({type:"hrm_iam_token",payload:a},g.a.domainHrmFe)}"hrm_refresh_iam_token"===e.data.type&&(t.is_refresh_token=!0)}})},SET_SHOW_MODAL_CHANGE_ROUND:function(t,e,a){var n=document.getElementById(a);if(t.isShowModalChangeRound=e,n)if(v.a.isInIframe())n.contentWindow.postMessage({type:"hrm_authentication_response",payload:{access_token:D.a.getToken(),refresh_token:D.a.getRefreshToken()}},g.a.domainHrmFe);else{var i=localStorage.getItem(g.a.oidc.tokenIamStorage);n.contentWindow.postMessage({type:"hrm_iam_token",payload:i},g.a.domainHrmFe)}},SEND_MESSAGE_TO_DAS2:function(t,e){if(e){var a=document.getElementById(e),n=localStorage.getItem(g.a.oidc.tokenIamStorage);a.contentWindow.postMessage({type:"das2_iam_token",payload:n},g.a.domainDas2Fe)}},LISTEN_MESSAGE_FROM_DAS2:function(t){window.addEventListener("message",function(e){if(e.origin===g.a.domainDas2Fe){if("das2_authentication_request"===e.data.type){var a=localStorage.getItem(g.a.oidc.tokenIamStorage);e.source.postMessage({type:"das2_iam_token",payload:a},g.a.domainDas2Fe)}"das2_refresh_iam_token"===e.data.type&&(t.is_refresh_token=!0)}})}},actions:{setEvent:function(t,e){(0,t.commit)("ADD_EVENT",e)},sendMessageToHrm:function(t,e){(0,t.commit)("SEND_MESSAGE",e)},listenMessageFromHrm:function(t,e){(0,t.commit)("LISTEN_MESSAGE",e)},setShowModalChangeRound:function(t,e,a){(0,t.commit)("SET_SHOW_MODAL_CHANGE_ROUND",e,a)},senMessageToDas2:function(t,e){(0,t.commit)("SEND_MESSAGE_TO_DAS2",e)},listenMessageFromDas2:function(t,e){(0,t.commit)("LISTEN_MESSAGE_FROM_DAS2",e)}}},P=a("Gu7T"),E=a.n(P),L=a("SQMU"),A=a("CpaI"),O={namespaced:!0,state:{realProvinces:null,provinces:null,districts:[],communes:[]},getters:{getProvinces:function(t){var e=this;return m()(h.a.mark(function a(){var n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t.provinces){e.next=7;break}return e.next=3,L.a.getAllProvince();case 3:if(!(n=e.sent).data.success){e.next=7;break}return t.provinces=n.data.data,e.abrupt("return",t.provinces);case 7:return e.abrupt("return",t.provinces||[]);case 8:case"end":return e.stop()}},a,e)}))()},getRealProvinces:function(t){var e=this;return m()(h.a.mark(function a(){var n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t.realProvinces){e.next=7;break}return e.next=3,A.a.getAllProvinceHrmV2();case 3:if(!(n=e.sent).data.success){e.next=7;break}return t.realProvinces=n.data.data,e.abrupt("return",t.realProvinces);case 7:return e.abrupt("return",t.realProvinces||[]);case 8:case"end":return e.stop()}},a,e)}))()}},actions:{setProvinces:function(t,e){t.commit("setProvinces",e)},setRealProvinces:function(t,e){t.commit("setProvinces",e)}},mutations:{setProvinces:function(t,e){t.provinces=[].concat(E()(e))},setRealProvinces:function(t,e){t.realProvinces=[].concat(E()(e))}}},N=a("Dd8w"),R=a.n(N),U=a("xF2Z"),$=a("Zx67"),H=a.n($),B=a("Zrlr"),j=a.n(B),F=a("zwoO"),q=a.n(F),Y=a("Pf15"),z=a.n(Y),G=function(t){function e(){return j()(this,e),q()(this,(e.__proto__||H()(e)).apply(this,arguments))}return z()(e,t),e}(a("MUME").a);G.alias={1:"BGĐ",2:"IT",3:"PA",4:"Sale",5:"KT",7:"HR",8:"Quản lý VH",9:"Nội vùng",10:"Liên vùng",11:"VH xe tải",12:"B2C",13:"C2C",14:"COD",15:"PTST",16:"Pháp chế",17:"Bưu cục",18:"OnlyCheckin",19:"Trợ lý",20:"Truyền thông",21:"Marketing",22:"PDA",23:"TTVH",24:"TC",25:"KTNB",26:"QLCU",27:"HC",28:"MBTC",29:"Xfast"};var K=G,V={namespaced:!0,state:{positions:null},getters:{allPositions:function(t){return t.positions},positionsWithDepartmentAlias:function(t){var e=t.positions.map(function(t){return t.name}),a=e.filter(function(t,a){return e.indexOf(t)!==a});return t.positions.map(function(t){var e=K.alias[t.department_id],n=R()({},t);return n.name=a.includes(t.name)&&e?t.name+" ("+e+")":t.name,n})}},actions:{getPositions:function(t,e){var a=this;return m()(h.a.mark(function e(){var n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t.state.positions){e.next=5;break}return e.next=3,U.a.getPositionList();case 3:(n=e.sent).data.success&&t.commit("setPositions",n.data.data);case 5:case"end":return e.stop()}},e,a)}))()},getPositionByDepartment:function(t,e){var a=this;return m()(h.a.mark(function n(){var i;return h.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(null!==t.state.positions){a.next=5;break}return a.next=3,U.a.getAllPositionByDepartmentIds(e);case 3:(i=a.sent).data.success&&t.commit("setPositions",i.data.data);case 5:case"end":return a.stop()}},n,a)}))()},setPositions:function(t,e){t.commit("setPositions",e)}},mutations:{setPositions:function(t,e){t.positions=[].concat(E()(e))}}},Q=a("Saf8"),X=function(){return Q.a.get("work-history/get-change-types")},W=function(t){return Q.a.get("work-history/get-change-reasons",{params:t})},J={namespaced:!0,state:{workChangeTypes:[],workChangeReasons:[]},getters:{listWorkChangeTypes:function(t){return t.workChangeTypes},listWorkChangeReasons:function(t){return t.workChangeReasons}},actions:{getListWorkChangeType:function(t,e){var a=this;return m()(h.a.mark(function e(){var n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v.a.isEmpty(t.state.workChangeTypes)){e.next=5;break}return e.next=3,X();case 3:(n=e.sent).data.success&&t.commit("setChangeTypes",n.data.data);case 5:case"end":return e.stop()}},e,a)}))()},getListWorkChangeReason:function(t,e){var a=this;return m()(h.a.mark(function e(){var n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v.a.isEmpty(t.state.workChangeReasons)){e.next=5;break}return e.next=3,W();case 3:(n=e.sent).data.success&&t.commit("setChangeReasons",n.data.data);case 5:case"end":return e.stop()}},e,a)}))()}},mutations:{setChangeTypes:function(t,e){t.workChangeTypes=[].concat(E()(e))},setChangeReasons:function(t,e){t.workChangeReasons=[].concat(E()(e))}}};r.default.use(l.a);var Z=new l.a.Store({modules:{Event:I,education:{namespaced:!0,state:{permissions:{permissionConfirm:!1,permissionHr:!1,permissionVh:!1,permissionIt:!1}},getters:{getPermissions:function(t){return t.permissions}},mutations:{setPermissions:function(t,e){t.permissions.permissionIt=e.permissionIt}},actions:{setPermissions:function(t,e){t.commit("setPermissions",e)}}},location:O,position:V,workHistory:J},state:{userInfo:{},tokenData:{}},getters:n,actions:i,mutations:s});e.a=Z},JJbb:function(t,e,a){"use strict";var n=a("mtWM"),i=a.n(n),s=a("4WGu"),o=a("fEi7"),r=a("hC/b"),l=s.a.oidc.tokenIamStorage,c=JSON.parse(localStorage.getItem(l)),d="";c&&c.accessToken&&(d=c.accessToken.accessToken);var u={Authorization:s.a.bearerKeyEcom+" "+d};r.a.isInIframe()&&(u.GchatToken=o.a.getToken());var h=i.a.create({baseURL:s.a.baseApiErpUrl,headers:u});e.a=h},JU5l:function(t,e){},JY3m:function(t,e){},JanS:function(t,e){},JeF4:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAASCAYAAACEnoQPAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAlSURBVHgB7csxEQAACAOxgqX694IT8AAb99kTZbeWUgdkMvlPHggrAmksS3/rAAAAAElFTkSuQmCC"},Jg0L:function(t,e){},JmUl:function(t,e,a){"use strict";var n=a("Gu7T"),i=a.n(n),s=a("Dd8w"),o=a.n(s),r=a("mvHQ"),l=a.n(r),c=a("Xxa5"),d=a.n(c),u=a("exGp"),h=a.n(u),p=a("hC/b"),m=a("NHnr"),f=a("bJ+M"),g=a("7zFw"),v=a("SLMx"),_=a("0XQL"),b=a("Zx67"),y=a.n(b),C=a("Zrlr"),w=a.n(C),k=a("zwoO"),x=a.n(k),S=a("Pf15"),M=a.n(S),T=function(t){function e(){return w()(this,e),x()(this,(e.__proto__||y()(e)).apply(this,arguments))}return M()(e,t),e}(a("MUME").a);T.listExplainAction=["explain_not_contacted","explain_not_interviewed","explain_not_take_job"];var D=T,I=a("pFYg"),P=a.n(I),E={props:{logs:{},appendAction:{},itemStyle:{type:Object,default:function(t){return{padding:"0 0 20px",fontSize:"14px"}}},timeField:{default:"created"},messageField:{default:"desc"},timeFormat:{type:Function},timeLogClass:{}},methods:{getLogMessage:function(t){return"object"===(void 0===t?"undefined":P()(t))&&null!==t?t.message:t}}},L=a("XyMi");var A=function(t){a("e1UT")},O=Object(L.a)(E,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"ant-timeline"},t._l(t.logs,function(e,n){return a("li",{key:"log-"+n,staticClass:"ant-timeline-item"},[a("div",{staticClass:"ant-timeline-item-tail"}),t._v(" "),a("div",{staticClass:"ant-timeline-item-head ant-timeline-item-head-blue"}),t._v(" "),a("div",{staticClass:"ant-timeline-item-content"},[a("span",{staticClass:"user-log"},[t._v(t._s(t.getLogMessage(e)))])])])}),0)},[],!1,A,"data-v-494a51bf",null).exports,N={name:"ModalRejectCandidate",props:{curCandidate:{type:Object,required:!1,default:null}},data:function(){return{reason:null,reasonRejectTag:[],tagReasons:[{name:"Không liên hệ được",active:!1,alias:2},{name:"Không phù hợp",active:!1,alias:7},{name:"Hủy ứng tuyển",active:!1,alias:3},{name:"Không đi phỏng vấn",active:!1,alias:4},{name:"Không nhận việc",active:!1,alias:6},{name:"Đủ nhu cầu",active:!1,alias:8}],saveOk:!1}},computed:{isShowPreviewContent:function(){var t=this.reasonRejectTag?this.reasonRejectTag.alias:"";return[7,8].includes(t)}},methods:{closeModalDeny:function(){this.$bvModal.hide("modal-reject-candidate")},checkStrLenReason:function(){if(this.reason&&this.reason.length<10)return p.a.showMessage("Nhập lý do khác không được ít hơn 10 ký tự!","warning"),!1},chooseTagReason:function(t){for(var e in this.tagReasons)this.tagReasons[e].active&&this.tagReasons[e].alias!==t.alias&&(this.tagReasons[e].active=!1);t&&(t.active=!t.active),t.active?this.reasonRejectTag=t:this.reasonRejectTag=null},resetModal:function(){this.reason=null,this.reasonRejectTag=[],this.saveOk=!1,this.tagReasons=this.tagReasons.map(function(t){return{name:t.name,active:!1,alias:t.alias}}),this.$emit("hideModal")},rejectCandidate:function(){p.a.isEmpty(this.reason)?p.a.showMessage("Vui lòng nhâp nội dung giải thích!","warning"):p.a.isEmpty(this.reasonRejectTag)?p.a.showMessage("Vui lòng chọn tag giải thích!","warning"):this.$emit("rejectCandidate",{reason:this.reason,reasonRejectTag:this.reasonRejectTag.alias})},getPreviewSmsContent:function(){var t=this.reasonRejectTag?this.reasonRejectTag.alias:"",e=this.curCandidate&&this.curCandidate.job?this.curCandidate.job.name:"";return 8===t?"Cảm ơn bạn đã ứng tuyển vị trí "+e+" tại GHTK. Hiện tại GHTK đã tuyển đủ vị trí này, chúng tôi sẽ liên hệ với bạn sớm nhất khi có nhu cầu.":7===t?"Cảm ơn bạn đã ứng tuyển vị trí "+e+" tại GHTK. Sau khi cân nhắc kỹ, thật tiếc chúng tôi chưa thể hợp tác với bạn cho vị trí này. Hi vọng sẽ có cơ hội phù hợp lần sau.":""}}};var R=function(t){a("Gq70"),a("Nc17")},U=Object(L.a)(N,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{"modal-class":"modal-custom",size:"md",centered:"",static:"",id:"modal-reject-candidate","hide-footer":"","hide-header":""},on:{hide:function(e){return t.resetModal()}}},[a("div",{staticClass:"modal-title-contact"},[a("span",[t._v("Thông báo")])]),t._v(" "),a("div",{staticClass:"modal-content-contact"},[a("div",{staticClass:"mb-2 d-flex justify-content-center"},[a("span",{staticClass:"justify-content-center"},[t._v("Chọn tag và giải thích lý do từ chối ứng viên")])]),t._v(" "),a("div",{staticClass:"tag-reason mb-2"},t._l(t.tagReasons,function(e,n){return a("b-btn",{key:"tag_reason"+n,staticClass:"btn-radius pd-5 btn-filter-tag",class:e.active?"btn-ghtk":"btn-ghtk-disable",on:{click:function(a){return t.chooseTagReason(e)}}},[t._v("\n              "+t._s(e.name)+"\n          ")])}),1),t._v(" "),a("div",[a("b-form-group",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reason,expression:"reason"}],staticClass:"rounded form-control",attrs:{name:"reject-reason-input",rows:"4",placeholder:"Nhập nội dung giải thích"},domProps:{value:t.reason},on:{blur:function(e){return t.checkStrLenReason()},input:function(e){e.target.composing||(t.reason=e.target.value)}}})])],1),t._v(" "),t.isShowPreviewContent?a("div",[a("div",{staticClass:"alert-title"},[t._v("Preview nội dung tin nhắn gửi tới ứng viên")]),t._v(" "),a("div",{staticClass:"preview-sms",domProps:{textContent:t._s(t.getPreviewSmsContent())}})]):t._e()]),t._v(" "),a("div",{staticClass:"text-center mt-3 mb-2"},[a("b-btn",{staticClass:"button-deny-modal",attrs:{variant:"secondary"},on:{click:function(e){return t.closeModalDeny()}}},[t._v("Đóng")]),t._v(" "),a("b-btn",{staticClass:"button-deny-modal",attrs:{variant:"ghtk",disabled:t.saveOk,name:"candidate-manager-btn-deny-modal",id:"candidate-manager-btn-deny-modal"},on:{click:function(e){return t.rejectCandidate()}}},[t._v("\n          Xác nhận\n      ")])],1)])},[],!1,R,"data-v-0ee90068",null).exports,$={name:"ModalNote",props:{modalId:{default:"modal-note"}},data:function(){return{content:null}},methods:{resetModal:function(){this.content=null,this.$emit("hideModal")},note:function(){p.a.isEmpty(this.note)?p.a.showMessage("Vui lòng nhâp nội dung ghi chú!","warning"):this.$emit("makeNote",this.content)},closeModalNote:function(){this.$bvModal.hide(this.modalId),this.resetModal()}}};var H=function(t){a("BPJG"),a("NKgQ")},B=Object(L.a)($,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{"modal-class":"modal-custom",centered:"",static:"",id:t.modalId,"hide-footer":"","hide-header":""},on:{hide:function(e){return t.resetModal()}}},[a("div",{staticClass:"modal-title"},[a("span",[t._v("Ghi chú")])]),t._v(" "),a("div",{staticClass:"modal-note-candidate"},[a("div",[a("b-form-textarea",{attrs:{id:"textarea-small",size:"sm",placeholder:"Nhập ghi chú",rows:"4"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)]),t._v(" "),a("div",{staticClass:"text-center mt-3 mb-2"},[a("b-btn",{staticClass:"button-deny-modal",attrs:{variant:"secondary"},on:{click:function(e){return t.closeModalNote()}}},[t._v("Đóng")]),t._v(" "),a("b-btn",{staticClass:"button-deny-modal",attrs:{variant:"ghtk",id:"candidate-btn-save-add-note",name:"candidate-btn-save-add-note"},on:{click:function(e){return t.note()}}},[t._v("Lưu")])],1)])},[],!1,H,"data-v-905d7ae8",null).exports;var j=function(t){a("BKHo"),a("EUVc")},F=Object(L.a)({name:"ModalContactCandidate",props:{candidate:{default:null}},data:function(){return{}},methods:{closeModalContact:function(){this.$bvModal.hide("modal-contact-candidate")},resetModal:function(){this.$emit("hideModal")}}},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{"modal-class":"modal-custom",size:"sm",centered:"",static:"",id:"modal-contact-candidate","hide-footer":"","hide-header":""},on:{hide:function(e){return t.resetModal()}}},[a("div",{staticClass:"modal-title-contact"},[a("span",[t._v("Gọi ứng viên")])]),t._v(" "),t.candidate?a("div",{staticClass:"modal-content-contact"},[a("div",[a("b",[t._v("Họ tên: ")]),a("span",[t._v(t._s(t.candidate.name))])]),t._v(" "),a("div",[a("b",[t._v("Vị trí: ")]),t.candidate.job?a("span",[t._v(t._s(t.candidate.job.name))]):t._e()]),t._v(" "),a("div",[a("b",[t._v("Số điện thoại: ")]),t.candidate.phone?a("span",[t._v(t._s(t.candidate.phone))]):t._e()])]):t._e(),t._v(" "),a("div",{staticClass:"text-center mt-2 mb-2"},[a("b-btn",{staticClass:"button-close-modal-contact",attrs:{variant:"ghtk"},on:{click:function(e){return t.closeModalContact()}}},[t._v("Đóng")])],1)])},[],!1,j,"data-v-2430a063",null).exports,q=a("fZjL"),Y=a.n(q),z=a("7+uW"),G=a("JffR"),K=a.n(G),V=a("sUu7");z.default.use(V.a);var Q={name:"ModalEvaluateCandidate",props:{reviewType:{default:null},candidate:{default:null}},created:function(){this.$validator.localize("vi",{messages:K.a.messages,attributes:{work_experience:"Kinh nghiệm làm việc",work_form:"Hình thức làm việc",origin:"Xuất xứ",desired_salary:"Kỳ vọng lương",family_circumstances:"Hoàn cảnh gia đình",overall_rating:"Đánh giá"}}),this.$validator.localize("vi")},data:function(){return{title:"Đánh giá ứng viên",work_experience:{selected:null,options:[{value:null,text:"Hãy chọn kinh nghiệm làm việc"},{value:"have_experience",text:"Đã có kinh nghiệm"},{value:"no_experience",text:"Chưa có kinh nghiệm"},{value:"leave_go_back_work",text:"Nghỉ việc đi làm lại"}]},work_form:{selected:null,options:[{value:null,text:"Hãy chọn hình thức làm việc"},{value:"student_part_time",text:"Sinh viên làm thêm"},{value:"labor_part_time",text:"Lao động làm thêm"},{value:"full_time",text:"Toàn thời gian"}]},origin:{selected:null,options:[{value:null,text:"Hãy chọn xuất xứ"},{value:"in_province",text:"Bản địa"},{value:"out_province",text:"Ngoại tỉnh"}]},desiredSalary:null,familyCircumstances:null,overall_rating:null,form:{candidate_id:null,review_type:null,experience:null,work_form:null,origin:null,desired_salary:null,family_circumstances:null,overall_rating:null,job_driverx_id:null}}},methods:{initModal:function(){this.candidate.id&&this.reviewType&&this.getCandidateReview()},resetForm:function(){var t=this;this.work_experience.selected=null,this.work_form.selected=null,this.origin.selected=null,this.desiredSalary=null,this.familyCircumstances=null,this.overall_rating=null,this.form={candidate_id:null,review_type:null,work_experience:null,work_form:null,origin:null,desired_salary:null,family_circumstances:null,overall_rating:null,job_driverx_id:null},this.$nextTick(function(){t.$validator.reset()})},submit:function(){var t=this;this.$validator.validateAll().then(function(e){e&&(t.form={candidate_id:t.candidate.id,review_type:t.reviewType,work_experience:t.work_experience.selected,work_form:t.work_form.selected,origin:t.origin.selected,desired_salary:t.desiredSalary?t.desiredSalary.match(/\d/g).join(""):0,family_circumstances:t.familyCircumstances,overall_rating:t.overall_rating},g.a.reviewCandidate(t.form).then(function(e){e.data.success?(p.a.showMessage(e.data.message?e.data.message:"Successfully","success"),t.closeModal(),t.candidate.logs=t.candidate.logs||[],t.candidate.logs.push(e.data.data.log),t.$emit("reviewCandidateSuccess")):p.a.showMessage(e.data.message?e.data.message:"Failed","warning")}).catch(function(t){console.log(t),p.a.showMessage("Đã có lỗi xảy ra !","warning")}))})},closeModal:function(){this.$bvModal.hide("modal-review-candidate")},formatCurrency:function(t){if(![38,40,37,39,8,46].includes(t.keyCode)){var e=String.fromCharCode(t.keyCode);/[0-9|/]/.test(e)||t.preventDefault();var a=this.desiredSalary?this.desiredSalary.toString()+e:e;a=(a=a?a.toString().replace(/[\D\s\._\-]+/g,""):0)?parseInt(a,10):0,this.desiredSalary=a.toLocaleString("vi-VN",{style:"currency",currency:"VND"}),t.preventDefault()}},toCurrency:function(t){return(t=(t=t?t.toString().replace(/[\D\s\._\-]+/g,""):0)?parseInt(t,10):0).toLocaleString("vi-VN",{style:"currency",currency:"VND"})},getCandidateReview:function(){var t=this;g.a.getCandidateReview({candidate_id:this.candidate.id,review_type:this.reviewType}).then(function(e){e.data.success?e.data.data&&Y()(e.data.data).length&&(t.title="Chỉnh sửa đánh giá ứng viên",t.work_experience.selected=e.data.data.work_experience,t.work_form.selected=e.data.data.work_form,t.origin.selected=e.data.data.origin,t.desiredSalary=t.toCurrency(e.data.data.desired_salary),t.familyCircumstances=e.data.data.family_circumstances,t.overall_rating=e.data.data.overall_rating):(p.a.showMessage(e.data.message?e.data.message:"Failed","warning"),t.closeModal())}).catch(function(t){console.log(t),p.a.showMessage("Đã có lỗi xảy ra !","warning")})}}};var X=function(t){a("ThyM")},W=Object(L.a)(Q,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{id:"modal-review-candidate",title:t.title,size:"lg",static:""},on:{shown:t.initModal,hide:t.resetForm}},[a("b-alert",{attrs:{show:"",variant:"warning"}},[a("b",[t._v("Lưu ý:")]),t._v(" "),a("div",[t._v("Vui lòng điền đánh giá ứng viên trước khi chuyển trạng thái ứng viên")])]),t._v(" "),a("div",{staticClass:"title"},[a("h5",{staticClass:"font-weight-bold title__content"},[t._v("THÔNG TIN ĐÁNH GIÁ")])]),t._v(" "),a("form",{staticClass:"form__evaluate",attrs:{autocomplete:"off"}},[a("b-form-row",[a("b-col",{attrs:{md:"6"}},[a("b-form-group",{attrs:{label:"Kinh nghiệm","label-class":"font-weight-bold","label-for":"input-experience"}},[a("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{input:!0,danger:t.errors.has("work_experience")},attrs:{options:t.work_experience.options,"value-field":"value",name:"work_experience"},model:{value:t.work_experience.selected,callback:function(e){t.$set(t.work_experience,"selected",e)},expression:"work_experience.selected"}}),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("work_experience"),expression:"errors.has('work_experience')"}],staticClass:"fa fa-warning"}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("work_experience"),expression:"errors.has('work_experience')"}],staticClass:"help field-text danger"},[t._v(t._s(t.errors.first("work_experience")))])],1)],1),t._v(" "),a("b-col",{attrs:{md:"6"}},[a("b-form-group",{attrs:{label:"Hình thức","label-class":"font-weight-bold","label-for":"input-form"}},[a("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{input:!0,danger:t.errors.has("work_form")},attrs:{options:t.work_form.options,"value-field":"value",name:"work_form"},model:{value:t.work_form.selected,callback:function(e){t.$set(t.work_form,"selected",e)},expression:"work_form.selected"}}),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("work_form"),expression:"errors.has('work_form')"}],staticClass:"fa fa-warning"}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("work_form"),expression:"errors.has('work_form')"}],staticClass:"help field-text danger"},[t._v(t._s(t.errors.first("work_form")))])],1)],1)],1),t._v(" "),a("b-form-row",[a("b-col",{attrs:{md:"6"}},[a("b-form-group",{attrs:{label:"Xuất xứ","label-class":"font-weight-bold","label-for":"input-origin"}},[a("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{input:!0,danger:t.errors.has("origin")},attrs:{options:t.origin.options,"value-field":"value",name:"origin"},model:{value:t.origin.selected,callback:function(e){t.$set(t.origin,"selected",e)},expression:"origin.selected"}}),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("origin"),expression:"errors.has('origin')"}],staticClass:"fa fa-warning"}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("origin"),expression:"errors.has('origin')"}],staticClass:"help field-text danger"},[t._v(t._s(t.errors.first("origin")))])],1)],1),t._v(" "),a("b-col",{attrs:{md:"6"}},[a("b-form-group",{attrs:{label:"Kì vọng lương","label-class":"font-weight-bold","label-for":"input-form",type:"text"}},[a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{input:!0,danger:t.errors.has("desired_salary")},attrs:{disabled:!1,name:"desired_salary"},on:{keypress:function(e){return t.formatCurrency(e)}},model:{value:t.desiredSalary,callback:function(e){t.desiredSalary=e},expression:"desiredSalary"}}),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("desired_salary"),expression:"errors.has('desired_salary')"}],staticClass:"fa fa-warning"}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("desired_salary"),expression:"errors.has('desired_salary')"}],staticClass:"help field-text danger"},[t._v(t._s(t.errors.first("desired_salary")))])],1)],1)],1),t._v(" "),a("b-form-row",[a("b-col",{attrs:{md:"12"}},[a("b-form-group",{attrs:{label:"Hoàn cảnh gia đình","label-class":"font-weight-bold","label-for":"input-family-circumstances"}},[a("b-form-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{input:!0,danger:t.errors.has("family_circumstances")},attrs:{id:"input-family-circumstances",rows:"3","max-rows":"6",name:"family_circumstances"},model:{value:t.familyCircumstances,callback:function(e){t.familyCircumstances=e},expression:"familyCircumstances"}}),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("family_circumstances"),expression:"errors.has('family_circumstances')"}],staticClass:"fa fa-warning"}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("family_circumstances"),expression:"errors.has('family_circumstances')"}],staticClass:"help field-text danger"},[t._v(t._s(t.errors.first("family_circumstances")))])],1)],1)],1),t._v(" "),a("b-form-row",[a("b-col",{attrs:{md:"12"}},[a("b-form-group",{attrs:{label:"Đánh giá","label-class":"font-weight-bold","label-for":"input-evaluate"}},[a("b-form-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{input:!0,danger:t.errors.has("overall_rating")},attrs:{id:"input-evaluate",rows:"3","max-rows":"6",name:"overall_rating"},model:{value:t.overall_rating,callback:function(e){t.overall_rating=e},expression:"overall_rating"}}),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("overall_rating"),expression:"errors.has('overall_rating')"}],staticClass:"fa fa-warning"}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("overall_rating"),expression:"errors.has('overall_rating')"}],staticClass:"help field-text danger"},[t._v(t._s(t.errors.first("overall_rating")))])],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"w-100 text-center",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("b-btn",{staticClass:"btn-ghtk",attrs:{variant:"success"},on:{click:function(e){return t.submit()}}},[t._v(" Lưu thông tin ")]),t._v(" "),a("b-btn",{on:{click:function(e){return t.closeModal()}}},[t._v(" Hủy ")])],1)],1)},[],!1,X,"data-v-c801d47a",null).exports,J=a("woOf"),Z=a.n(J),tt=a("d7EF"),et=a.n(tt),at=a("PJh5"),nt=a.n(at),it=a("VvlD"),st=a("IC97"),ot=a("B+20"),rt=a.n(ot),lt=a("a/7L"),ct=a("xT3c"),dt=a("NYxO"),ut={name:"ModalMakeAppoint",components:{SingleSelectStation:lt.a,Datepicker:st.a,flatPickr:rt.a},props:{candidate:{type:Object,default:function(t){return{}}},textActionSave:{type:String,default:function(t){return"Lưu thông tin"}},nextStatus:{type:String},appointmentType:{type:String,default:""}},data:function(t){return{appointmentDate:null,appointmentHour:null,appointmentMinute:null,appointmentTime:null,appointmentStation:null,appointmentStationExpected:null,messageSms:"",stationId:null,stationExpectedId:null,stationName:null,stationLat:null,stationLng:null,sendSms:!1,dataCandidate:null,appointmentHourOptions:[],appointmentMinuteOptions:it.a.getListMinuteOptions(),linkGoogleMap:"https://www.google.com/maps?q=",statuses:{contact:{id:"contact",name:"Cần liên hệ",sendSmsSuccessMsg:"Cập nhật thời gian cần liên hệ thành công",sendSmsFailMsg:"Cập nhật thời gian cần liên hệ thất bại"},interview:{id:"interview",name:"Hẹn phỏng vấn",sendSmsSuccessMsg:"Gửi tin nhắn đến ứng viên thành công",sendSmsFailMsg:"Không gửi được tin nhắn đến ứng viên !"},expect_join:{id:"expect_join",name:"Hẹn nhận việc",sendSmsSuccessMsg:"Cập nhật thời gian hẹn nhận việc thành công",sendSmsFailMsg:"Cập nhật thời gian hẹn nhận việc thất bại"}},mapAppointmentType:{contact:"expected_contact",interview:"expected_interview",expect_join:"expected_join"}}},computed:o()({},Object(dt.c)({curUser:"userInfo"}),{convertedMessage:function(){var t=this.appointmentDate?p.a.format_date(this.appointmentDate,"DD-MM-YYYY"):"",e=this.appointmentTime?this.appointmentTime:"",a=this.stationId?this.stationName:"",n=this.appointmentStation?this.appointmentStation:"",i=p.a.removeVietnameseAccent(this.messageSms.replace(":date",t).replace(":time",e).replace(":station",a).replace(":address",n)).split(":link_map."),s=et()(i,2);return[s[0],s[1]]},disabledSave:function(){return!!this.appointmentDate&&(!!this.appointmentHour&&(!!this.appointmentMinute&&(!!this.appointmentTime&&(!(!this.stationId&&"contact"!==this.appointmentType)&&!(!this.stationExpectedId&&"interview"===this.appointmentType)))))}}),watch:{candidate:{immediate:!0,handler:function(){this.dataCandidate=Z()({},this.candidate)}},appointmentHour:function(t,e){t&&(this.appointmentTime=t+"h"+this.appointmentMinute)},appointmentMinute:function(t,e){t&&(this.appointmentTime=this.appointmentHour+"h"+t)}},created:function(){this.appointmentHourOptions=this.getAppointmentHourOptions(),this.candidate&&(this.dataCandidate=Z()({},this.candidate))},methods:{fetchDataAppointment:function(){var t=this;return h()(d.a.mark(function e(){var a,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={candidate_id:t.candidate.id,type:t.mapAppointmentType[t.appointmentType]},e.next=3,g.a.getSchedule(a);case 3:if(!(n=e.sent).data.success){e.next=17;break}if(a=n.data.data,t.stationId=a.station_id?a.station_id:null,"expect_join"!==t.appointmentType){e.next=10;break}return e.next=10,t.handleStationExpectedJoin();case 10:t.stationExpectedId=a.station_expected_id?a.station_expected_id:null,t.appointmentDate=a.appointment_date?a.appointment_date:"",t.appointmentHour=a.appointment_hour?a.appointment_hour:"",t.appointmentMinute=a.appointment_minute?a.appointment_minute:"",t.messageSms=a.message,e.next=20;break;case 17:t.stationId=t.dataCandidate.station_id,t.stationExpectedId=t.dataCandidate.station_expected_id,console.log(n.data.message||"Không lấy được job");case 20:t.createStationInfo();case 21:case"end":return e.stop()}},e,t)}))()},initModal:function(){this.fetchDataAppointment()},setAppointTime:function(t){if(t){var e=t.split("h");2===e.length&&(this.appointmentHour=e[0],this.appointmentMinute=e[1])}},getAppointmentHourOptions:function(){return it.a.getListHourOptions().filter(function(t){var e=parseInt(t.value);return[8,9,10,11,14,15,16,17].includes(e)})},validateFromSendSmsToCandidate:function(){if(!this.appointmentDate)return alert("Vui lòng nhập ngày hẹn gặp !"),!1;if(!this.appointmentHour)return alert("Vui lòng nhập giờ hẹn gặp !"),!1;if(!this.appointmentMinute)return alert("Vui lòng nhập phút hẹn gặp !"),!1;if(!this.appointmentTime)return alert("Vui lòng nhập đầy đủ khoảng thời gian có thể hẹn gặp !"),!1;if(!this.stationId&&"contact"!==this.appointmentType)return alert("Vui lòng chọn kho hẹn gặp !"),!1;if(!this.stationExpectedId&&"interview"===this.appointmentType)return alert("Vui lòng chọn kho dự kiến nhận việc !"),!1;if(this.sendSms){if(!this.appointmentStation)return alert("Vui lòng nhập địa điểm hẹn gặp !"),!1;if(!this.appointmentTime)return alert("Vui lòng nhập giờ hẹn gặp !"),!1}return!0},formatDateToString:function(t){return[t.toLocaleString("default",{year:"numeric"}),t.toLocaleString("default",{month:"2-digit"}),t.toLocaleString("default",{day:"2-digit"})].join("-")},sendSmsToCandidate:function(){var t=this;if(!this.validateFromSendSmsToCandidate())return!1;var e={candidate_id:this.dataCandidate.id};e.appointment_date=this.appointmentDate,e.appointment_time=p.a.format_date(this.appointmentDate)+" "+this.appointmentHour+":"+this.appointmentMinute,e.send_message=this.sendSms?this.sendSms:0,e.station_id=this.stationId,e.station_expected_id=this.stationExpectedId,"contact"===this.appointmentType?e.type="expected_contact":"interview"===this.appointmentType?e.type="expected_interview":e.type="expected_join",g.a.createSchedule(e).then(function(e){e.data.success?(t.$emit("updateAppointmentOk"),p.a.showMessage(e.data.message||t.statuses[t.appointmentType].sendSmsSuccessMsg,"success"),t.closeModal()):p.a.showMessage(e.data.message||t.statuses[t.appointmentType].sendSmsFailMsg,"warning")}).catch(function(t){console.log(t),p.a.showMessage("Đã có lỗi xảy ra !","warning")})},expectJoinFrom:function(){var t=new Date;return t.setDate(t.getDate()-1),t},selectStation:function(t){if(!t||!t.id)return this.appointmentStation=null,this.stationId=null,this.stationName=null,this.stationLat=null,void(this.stationLng=null);this.stationId=t.id,this.createStationInfo()},removeStation:function(){this.appointmentStation=null,this.stationId=null,this.stationName=null,this.stationLat=null,this.stationLng=null},createStationInfo:function(){var t=this;this.stationId&&ct.a.getStationInfo({station_id:this.stationId}).then(function(e){e.data.success?(t.appointmentStation=e.data.data.address,t.stationName=e.data.data.name,t.stationLat=e.data.data.lat,t.stationLng=e.data.data.lng,t.handleStationExpected()):(t.appointmentStation=null,t.stationName=null,t.stationLat=null,t.stationLng=null)}).catch(function(e){t.appointmentStation=null,t.stationName=null,t.stationLat=null,t.stationLng=null})},formatDate:function(t,e){return nt()(t||null).format(e||"DD-MM-YYYY")},closeModal:function(){this.$bvModal.hide(this.id),this.resetData()},resetData:function(){this.$emit("closeModal"),this.appointmentHour=null,this.appointmentMinute=null,this.appointmentTime=null,this.appointmentStation=null,this.appointmentStationExpected=null,this.appointmentDate=null,this.sendSms=null},handleStationExpected:function(){"interview"===this.appointmentType&&(null===this.stationExpectedId?(this.stationExpectedId=this.stationId,this.appointmentStationExpected=this.appointmentStation):this.selectStationExpected({id:this.stationExpectedId}))},selectStationExpected:function(t){var e=this;this.stationExpectedId=t.id,null!==this.stationExpectedId&&ct.a.getStationInfo({station_id:this.stationExpectedId}).then(function(t){t.data.success?e.appointmentStationExpected=t.data.data.address:e.appointmentStationExpected=null}).catch(function(t){e.appointmentStationExpected=null})},removeStationExpected:function(){this.stationExpectedId=null,this.appointmentStationExpected=null},handleStationExpectedJoin:function(){var t=this;return h()(d.a.mark(function e(){var a,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t.stationId){e.next=6;break}return a={candidate_id:t.candidate.id,type:"expected_interview"},e.next=4,g.a.getSchedule(a);case 4:(n=e.sent).data.success?(a=n.data.data,t.stationId=a.station_expected_id?a.station_expected_id:null):t.stationId=t.dataCandidate.station_id;case 6:case"end":return e.stop()}},e,t)}))()}}};var ht=function(t){a("OEkN"),a("OTLl")},pt=Object(L.a)(ut,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-make-appoint"},[a("b-modal",{attrs:{id:"modal-make-appoint",title:t.statuses&&t.statuses[t.appointmentType]?t.statuses[t.appointmentType].name:"",size:"lg",static:""},on:{shown:t.initModal,hide:t.resetData}},[t.candidate&&["contact","expect_join","interview"].includes(t.appointmentType)?a("div",[a("form",{attrs:{action:"",autocomplete:"off"}},[a("b-form-row",[a("b-col",{attrs:{md:"8"}},[a("b-form-group",{attrs:{label:"Ngày hẹn gặp"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Ngày hẹn gặp "),a("span",{staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("datepicker",{staticClass:"dp-fixed-width",attrs:{name:"join-date",format:"dd-MM-yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,placeholder:"--/--/----","calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0,"disabled-dates":{to:t.expectJoinFrom()}},model:{value:t.appointmentDate,callback:function(e){t.appointmentDate=e},expression:"appointmentDate"}})],1)],1),t._v(" "),a("b-col",{attrs:{md:"4"}},[a("b-form-group",{attrs:{label:"Thời gian hẹn gặp (Giờ, phút)"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Thời gian hẹn gặp (Giờ, phút) "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.sendSms,expression:"sendSms"}],staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("b-form-row",[a("b-col",{attrs:{md:"6"}},[a("b-select",{attrs:{placeholder:"Giờ",options:t.appointmentHourOptions},model:{value:t.appointmentHour,callback:function(e){t.appointmentHour=e},expression:"appointmentHour"}})],1),t._v(" "),a("b-col",{attrs:{md:"6"}},[a("b-select",{attrs:{placeholder:"Phút",options:t.appointmentMinuteOptions},model:{value:t.appointmentMinute,callback:function(e){t.appointmentMinute=e},expression:"appointmentMinute"}})],1)],1)],1)],1)],1),t._v(" "),"contact"!==t.appointmentType?a("b-form-group",{attrs:{"label-cols-md":"12",label:"Kho hẹn gặp"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Kho hẹn gặp "),a("span",{staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("single-select-station",{attrs:{"custom-class":"","station-id":t.stationId},on:{select:t.selectStation,remove:t.removeStation}})],1):t._e(),t._v(" "),"contact"!==t.appointmentType?a("b-form-group",{attrs:{"label-cols-md":"12",label:"Địa chỉ kho"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Địa chỉ kho "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.sendSms,expression:"sendSms"}],staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("b-input",{attrs:{disabled:"disabled",placeholder:"Địa chỉ kho"},model:{value:t.appointmentStation,callback:function(e){t.appointmentStation=e},expression:"appointmentStation"}})],1):t._e(),t._v(" "),"interview"===t.appointmentType?a("b-form-group",{attrs:{"label-cols-md":"12",label:"Kho dự kiến làm việc"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Kho dự kiến làm việc "),a("span",{staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("single-select-station",{attrs:{"custom-class":"","station-id":t.stationExpectedId},on:{select:t.selectStationExpected,remove:t.removeStationExpected}})],1):t._e(),t._v(" "),"interview"===t.appointmentType?a("b-form-group",{attrs:{"label-cols-md":"12",label:"Địa chỉ kho dự kiến làm việc"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Địa chỉ kho dự kiến làm việc"),a("span",{directives:[{name:"show",rawName:"v-show",value:t.sendSms,expression:"sendSms"}],staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("b-input",{attrs:{disabled:"disabled",placeholder:"Địa chỉ kho"},model:{value:t.appointmentStationExpected,callback:function(e){t.appointmentStationExpected=e},expression:"appointmentStationExpected"}})],1):t._e()],1)]):t._e(),t._v(" "),"contact"!==t.appointmentType?a("b-checkbox",{staticClass:"mb-1",attrs:{id:"checkbox-send-sms",name:"checkbox-send-sms",value:!0,"unchecked-value":!1},model:{value:t.sendSms,callback:function(e){t.sendSms=e},expression:"sendSms"}},[t._v("\n        Gửi tin nhắn hẹn "+t._s("interview"===t.appointmentType?"phỏng vấn":"nhận việc")+" tới ứng viên\n      ")]):t._e(),t._v(" "),t.sendSms&&"contact"!==t.appointmentType?a("div",[a("label",{staticClass:"font-weight-bold m-2 mb-3",attrs:{for:"message-sms"}},[t._v("Xem trước nội dung tin nhắn ")]),t._v(" "),a("div",{attrs:{id:"message-sms"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.convertedMessage[0]||!t.convertedMessage[1],expression:"!convertedMessage[0] || !convertedMessage[1]"}]},[t._v("\n            "+t._s(t.convertedMessage[0])+"\n            "),a("a",{attrs:{href:this.linkGoogleMap+this.stationLat+","+this.stationLng}},[t._v(t._s(this.linkGoogleMap+this.stationLat+","+this.stationLng))]),t._v(" "),a("br"),a("br"),t._v("\n            "+t._s(t.convertedMessage[1])+"\n          ")])])]):t._e(),t._v(" "),a("div",{staticClass:"w-100 text-center",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("b-btn",{attrs:{variant:"success",id:"modal-make-appoint-btn-update",name:"modal-make-appoint-btn-update",disabled:!t.disabledSave},on:{click:t.sendSmsToCandidate}},[a("i",{directives:[{name:"show",rawName:"v-show",value:!!t.sendSms,expression:"!!sendSms"}],staticClass:"fas fa-paper-plane"}),t._v(" "+t._s(t.textActionSave))])],1)],1)],1)},[],!1,ht,"data-v-b7f29d5a",null).exports,mt=a("gRE1"),ft=a.n(mt),gt=a("zfKv"),vt=a("csCE"),_t=a("DkPr"),bt=a("YlZe"),yt=a("pedj"),Ct=a("klKj"),wt=a("+cgA"),kt=a("5vjp"),xt=a("VO+t"),St=a("IIaH"),Mt=a("Hci3"),Tt=a("agCp"),Dt=a("phbQ"),It=a("9Wgl"),Pt=a("oXjO"),Et=a("jykp");z.default.use(V.a);var Lt={name:"ModalCreateUser",components:{SingleSelectStation:lt.a,SingleSelectWorkTypeForUser:gt.a,SingleSelectDepartment:vt.a,SingleSelectDuty:_t.a,SingleSelectPosition:bt.a,SingleSelectShift:xt.a,SelectShift:Mt.a,FileViewUpload:yt.a,Datepicker:st.a,FileCandidate:Ct.a,SelectUser:wt.a,SelectModule:kt.a,DefaultWorkDetail:St.a},props:{id:{type:String,default:"modal-quick-create-user"},candidate:{type:Object,default:function(){return{name:null}}},jobId:{type:String,default:""},candidateJobId:{type:String,default:""}},data:function(t){return{departmentSuggest:Pt.a,phone:null,position_name:null,createOk:null,userId:null,username:null,codAlias:null,disableCreateBtn:!1,group_id_by_position:null,default_work:[],user:{candidate_id:null,station_id:null,department_id:14,position_job:null,work_type_id:null,duty_id:6,module_id:null,current_address:null,permanent_address:null,identify_id:null,onboard_date:null,group_id:null,shift:null},suggestLeaderEmployeeOK:!1,leaders:null,employees:null,searchData:{selectLeader:[],selectEmployee:[],loadingSearch:!1},oldProfile:{station_id:null,username:null,user_id:null,group_id:null,shift:{from:null,shiftInterval:null,to:null}},is_onsite:!1,show_defaultwork:!1,whStaffPositions:It.a.WH_STAFF_GROUPS}},computed:o()({},Object(dt.c)({curUser:"userInfo"}),{isHr:function(){return this.curUser&&this.curUser.Group&&[3,15].includes(+this.curUser.Group.id)},hadProfile:function(){return!1},getStaffLeaderWatcher:function(){return this.user.department_id+"_"+this.user.position_job+"_"+this.user.station_id+"_"+this.user.module_id+"_"+this.user.duty_id},requiredShift:function(){return Et.a.checkGroupWHStaff(this.user.group_id)}}),watch:{candidate:{immediate:!0,handler:function(){this.candidate&&(this.user.identify_id=this.candidate.identify_id||null,this.user.onboard_date=this.candidate.expected_join_date,this.user.permanent_address=this.candidate.address)},deep:!0},user:{handler:function(t){this.whStaffPositions.includes(parseInt(this.user.group_id))&&Number(this.user.position_job)!==It.a.WH_STAFF_BIG_SIZE_POSITIONS?this.show_defaultwork=!0:this.show_defaultwork=!1,+this.user.position_job==+It.a.WH_STAFF_ONSITE_POSITIONS?this.is_onsite=!0:this.is_onsite=!1},deep:!0},getStaffLeaderWatcher:function(){this.user.department_id&&this.user.position_job&&this.user.station_id&&this.user.duty_id&&this.suggestManagerEmployeeForUser()},hadProfile:function(t,e){this.createOk||(p.a.resetData(this.oldProfile,null,2),t&&this.getShiftByProfile())}},methods:{closeUserSms:function(){this.$bvModal.hide("success-create-account"),this.$bvModal.hide(this.id)},confirmCreateAccount:function(){var t=this;return h()(d.a.mark(function e(){var a,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.validate()){e.next=2;break}return e.abrupt("return",!1);case 2:if(t.user.candidate_id=t.candidate.id,!(a=t.validData())||"string"!=typeof a){e.next=7;break}return alert("Vui lòng nhập đúng và đầy đủ thông tin \n"+a),e.abrupt("return");case 7:if(!1!==a){e.next=10;break}return alert("Vui lòng nhập đúng và đầy đủ thông tin !"),e.abrupt("return");case 10:return e.prev=10,e.next=13,g.a.getPhoneCandidate({user_id:t.candidate.user_id});case 13:(n=e.sent).data.success?(t.phone=n.data.data.phone,t.$bvModal.show("confirm-create-account")):p.a.showMessage(n.data.message||"Không lấy được số điện thoại của ứng viên !","warning"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(10),console.log(e.t0);case 20:case"end":return e.stop()}},e,t,[[10,17]])}))()},formatDateToString:function(t){return[t.toLocaleString("default",{year:"numeric"}),t.toLocaleString("default",{month:"2-digit"}),t.toLocaleString("default",{day:"2-digit"})].join("-")},formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD-MM-YYYY HH:mm:ss";return nt()(t).format(e)},compareDate:function(t,e){return e||(e=new Date),t=new Date(t),e=new Date(e),t.getTime()>e.getTime()},initData:function(){this.candidate&&(this.user.identify_id=this.candidate.identify_id||null,this.user.onboard_date=this.candidate.expected_join_date)},validate:function(){return this.user.position_job?this.user.work_type_id?!!this.user.station_id||(p.a.showMessage("Vui lòng chọn nơi làm việc"),!1):(p.a.showMessage("Vui lòng chọn hình thức"),!1):(p.a.showMessage("Vui lòng chọn vị trí"),!1)},createAcc:function(){var t=this;return h()(d.a.mark(function e(){var a,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$startLoading(),a={},t.user.onboard_date&&(a.onboard_date=t.formatDateToString(t.user.onboard_date)),t.requiredShift&&t.user.shift&&(a.from_shift=t.user.shift.from,a.to_shift=t.user.shift.to),a.candidate_id=t.user.candidate_id?t.user.candidate_id:null,a.station_id=t.user.station_id?t.user.station_id:null,a.department_id=t.user.department_id?t.user.department_id:null,a.position_job=t.user.position_job?t.user.position_job:null,a.duty_id=t.user.duty_id?t.user.duty_id:null,a.module_id=t.user.module_id?t.user.module_id:null,a.current_address=t.user.current_address?t.user.current_address:null,a.permanent_address=t.user.permanent_address?t.user.permanent_address:null,a.identify_id=t.user.identify_id?t.user.identify_id:null,a.group_id=t.user.group_id?t.user.group_id:null,a.work_type_id=t.user.work_type_id?t.user.work_type_id:null,t.show_defaultwork&&(a.default_work=t.default_work),n=[],n=t.searchData.selectLeader.map(function(t){return t.id}).join(","),a.leader_ids=n,t.disableCreateBtn=!0,g.a.createAccount(a,t.user.candidate_id).then(function(e){e.data.success?(p.a.showMessage(e.data.message||"Tạo tài khoản cho nhân viên thành công","success"),t.createOk=!0,t.username=e.data.data.username,t.codAlias=e.data.data.cod_alias,t.$bvModal.hide("confirm-create-account"),t.$bvModal.show("success-create-account")):(p.a.showMessage(e.data.message||"Không thể tạo tài khoản cho nhân viên","warning"),t.createOk=null)}).catch(function(e){t.createOk=null,p.a.showMessage("Có lỗi xảy ra, không thể tạo tài khoản !","warning")}).finally(function(e){t.disableCreateBtn=!1,t.$stopLoading()});case 21:case"end":return e.stop()}},e,t)}))()},validData:function(){if(this.show_defaultwork)return!this.default_work||p.a.isEmpty(this.default_work)?void p.a.showMessage("Vui lòng chọn công việc mặc định !","warning"):this.validateTimeConfig(this.default_work);if(this.requiredShift&&(!this.user.shift||!this.user.shift.from))return"- Thiếu thông tin ca làm việc\n";if(!this.hadProfile){var t={candidate_id:"Ứng viên",position_job:"Vị trí làm việc",station_id:"Kho làm việc",work_type_id:"Kiểu nhân viên",identify_id:"Số CMND/CCCD"},e="";for(var a in t)this.user[a]||(e+="- "+t[a]+"\n");return this.user.identify_id&&9!==this.user.identify_id.length&&12!==this.user.identify_id.length&&(e+="- Số CMND/CCCD không hợp lệ\n"),this.searchData.selectLeader&&Array.isArray(this.searchData.selectLeader)&&this.searchData.selectLeader.length?e:"- Người quản lý\n"}},resetData:function(){this.createOk&&this.$emit("createUserSuccess"),this.user.candidate_id=null,this.user.station_id=null,this.user.departmnet_id=null,this.user.position_job=null,this.user.work_type_id=null,this.user.current_address=null,this.user.permanent_address=null,this.user.onboard_date=null,this.user.identify_id=null,this.user.shift=null,this.createOk=null,this.disableCreateBtn=null,this.username=null,this.userId=null,this.codAlias=null,this.leaders=null,this.employees=null},selectPosition:function(t){t?(this.user.position_job=t.id,this.position_name=t.name,this.user.group_id=t.group_id):(this.user.position_job=null,this.position_name=null,this.user.group_id=null)},handleSelectedShift:function(t){this.user.shift=t},expectJoinFrom:function(t){if(t)return(t=new Date(t)).setDate(t.getDate()-1),t},setTakeJobdate:function(t){t instanceof Date&&(this.user.onboard_date=t.toDateString()),t instanceof String&&(this.user.onboard_date=t)},selectModule:function(t){this.user.module_id=t?t.id:null},validValue:function(t,e,a){p.a.validValue(t,e,a)},selectedLeader:function(t){this.searchData.selectLeader=t},selectedEmployee:function(t){this.searchData.selectEmployee=t},suggestManagerEmployeeForUser:function(){var t=this;this.$startLoading();var e={user_id:this.user.id,station_id:this.user.station_id,module_id:this.user.module_id,department_id:this.user.department_id,position_id:this.user.position_job,duty_id:this.user.duty_id,work_type_id:this.user.work_type_id};(ft()(Pt.a).includes(parseInt(e.department_id))?Dt.a.suggestManagerEmployee(e):Tt.a.suggestManagerEmployeeForUser(e)).then(function(a){a.data.success?(e.auto_update&&p.a.showMessage(a.data.message||"Cập nhật quản lý, nhân viên cho User thành công","success"),a.data.data&&a.data.data.leaders&&(t.leaders=a.data.data.leaders),a.data.data&&a.data.data.employees&&(t.employees=a.data.data.employees),t.suggestLeaderEmployeeOK=!0):p.a.showMessage(a.data.message||"Không lấy được gợi ý quản lý, nhân viên cho User !","warning")}).catch(function(t){p.a.showMessage("Không lấy được gợi ý, vui lòng thử lại sau !","warning"),console.log(t)}).then(function(e){t.$stopLoading()})},getShiftByProfile:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e||(e=this.candidate.master_profile_id),e&&Tt.a.getShiftByProfile({masterProfileId:e}).then(function(e){e.data.success&&e.data.data&&(t.oldProfile.group_id=e.data.data.group_id||null,t.oldProfile.user_id=e.data.data.id||null,t.oldProfile.station_id=e.data.data.station_id||null,t.oldProfile.username=e.data.data.username||null,e.data.data.shift&&(t.oldProfile.shift=e.data.data.shift))}).catch(function(t){console.log(t)})},updateManagerEmployeeOfUser:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=[],a=[];Array.isArray(this.searchData.selectLeader)&&(e=this.searchData.selectLeader.map(function(t){return t.id})),Array.isArray(this.searchData.selectEmployee)&&(a=this.searchData.selectEmployee.map(function(t){return t.id}));var n={userId:this.userId,leaders:e,employees:a};e&&e.length&&!n.userId?p.a.showMessage("Không có User ID, không thể cập nhật quản lý, nhân viên cho user !","warning"):Tt.a.updateManagerEmployeeOfUser(n).then(function(e){e.data.success?t&&p.a.showMessage(e.data.message||"Cập nhật quản lý và nhân viên cho User thành công.","success"):"permission"===e.data.err_type?p.a.showMessage("Bạn không có quyền cập nhật quản lý và nhân viên cho User !","warning"):p.a.showMessage(e.data.message||"Không thể cập nhật quản lý và nhân viên cho User !","warning")}).catch(function(t){console.log(t),p.a.showMessage("Không thể cập nhật quản lý và nhân viên cho User !","warning")})},updateDefaultWorkConfig:function(t){this.default_work=t},validateTimeConfig:function(t){for(var e=0;e<t.length;e++)if(void 0!==t[e]){if(nt()(t[e].to_date).format("YYYY-MM-DD")<nt()(t[e].from_date).format("YYYY-MM-DD"))return p.a.showMessage("Ngày kết thúc phải lớn hơn hoặc bằng ngày bắt đầu","warning"),!1;if(p.a.isEmpty(t[e].alias_job))return p.a.showMessage("Vui lòng chọn công việc mặc định !","warning"),!1;if(void 0!==t[e+1]&&nt()(t[e].to_date).format("YYYY-MM-DD")>=nt()(t[e+1].from_date).format("YYYY-MM-DD"))return p.a.showMessage("Thời gian config công việc mặc định không hợp lệ. Thời gian config sau không được đè lên thời gian config trước","warning"),!1}return!0},created:function(){this.default_work=[{from_date:nt()().format("YYYY-MM-DD"),to_date:null,alias_job:[]}]}}};var At=function(t){a("6aA6"),a("uSev")},Ot=Object(L.a)(Lt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"small-scrollbar"},[t.candidate?a("b-modal",{attrs:{id:t.id,title:"Tạo tài khoản nhanh","modal-class":"modal-xl",static:"","ok-only":"","footer-class":"justify-content-center"},on:{hide:t.resetData,shown:function(e){return t.initData()}}},[a("div",{staticClass:"form-create-user"},[a("b-form-row",[a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Tên nhân viên"}},[a("b-input",{attrs:{disabled:!0},model:{value:t.candidate.name,callback:function(e){t.$set(t.candidate,"name",e)},expression:"candidate.name"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4",attrs:{label:"CMND/CCCD"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.identify_id,expression:"user.identify_id"}],staticClass:"form-control",attrs:{type:"number",disabled:!1},domProps:{value:t.user.identify_id},on:{input:[function(e){e.target.composing||t.$set(t.user,"identify_id",e.target.value)},function(e){return t.validValue(t.user,"identify_id",{length:12})}]}})])],1),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col-md-6",attrs:{label:"Địa chỉ hiện tại"}},[a("b-textarea",{model:{value:t.user.current_address,callback:function(e){t.$set(t.user,"current_address",e)},expression:"user.current_address"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-6",attrs:{label:"Địa chỉ thường trú"}},[a("b-textarea",{model:{value:t.user.permanent_address,callback:function(e){t.$set(t.user,"permanent_address",e)},expression:"user.permanent_address"}})],1)],1),t._v(" "),a("div",[a("div",{staticClass:"font-weight-bold working-header"},[t._v("THÔNG TIN CÔNG VIỆC")]),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col-md-4 col-lg-3",attrs:{label:"Chọn bộ phận"}},[a("single-select-department",{attrs:{"is-disabled":!1,"department-id":t.user.department_id},on:{handleSelectedDepartment:function(e){return t.user.department_id=e?e.id:null}}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4 col-lg-3",attrs:{label:"Chọn vị trí"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Chọn vị trí "),a("span",{staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("single-select-position",{attrs:{"department-id":t.user.department_id,"is-disabled":!1,"position-job":t.user.position_job},on:{handleSelectedPosition:t.selectPosition}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4 col-lg-3",attrs:{label:"Kiểu nhân viên"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Hình thức "),a("span",{staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("single-select-work-type-for-user",{attrs:{"position-job":t.user.position_job,"work-type-id":t.user.work_type_id},on:{handleSelectedWorkType:function(e){return t.user.work_type_id=e?e.id:null}}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4 col-lg-3",attrs:{label:"Chọn kho"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Chọn nơi làm việc "),a("span",{staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("single-select-station",{attrs:{"custom-class":"","station-id":t.user.station_id,selectLabel:"",placeholder:"Nơi làm việc"},on:{handleSelectedStation:function(e){return t.user.station_id=e?e.id:null}}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4 col-lg-3",attrs:{label:"Module tính lương"}},[a("SelectModule",{attrs:{"custom-class":"","station-id":t.user.station_id,"module-id":t.user.module_id,selectLabel:""},on:{handleSelectedModule:t.selectModule}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4 col-lg-3",attrs:{label:"Chọn chức vụ"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Chọn chức vụ "),a("span",{staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("single-select-duty",{attrs:{"duty-id":t.user.duty_id,"is-disabled":!0},on:{handleSelected:function(e){return t.user.duty_id=e?e.id:null}}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4 col-lg-3",attrs:{label:"Ngày vào"}},[a("Datepicker",{attrs:{format:"dd-MM-yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,placeholder:"--/--/----","calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0,"disabled-dates":{to:t.expectJoinFrom(t.candidate.apply_date||t.candidate.created)}},model:{value:t.user.onboard_date,callback:function(e){t.$set(t.user,"onboard_date",e)},expression:"user.onboard_date"}})],1),t._v(" "),t.requiredShift||t.user.shift?a("b-form-group",{staticClass:"col-md-4 col-lg-3"},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Ca làm việc"),a("span",{staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("select-shift",{on:{select:t.handleSelectedShift}})],1):t._e()],1)],1),t._v(" "),a("div",{staticClass:"seperate mb-3"}),t._v(" "),a("b-form-row",{staticClass:"mb-2"},[a("b-form-group",{staticClass:"col-md-12"},[a("template",{slot:"label"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[t._v("Thêm người quản lý "),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.hadProfile,expression:"!hadProfile"}],staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("div",{staticClass:"col-md-6 text-right"},[t.suggestLeaderEmployeeOK?a("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:function(e){t.leaders=null,t.employees=null,t.suggestLeaderEmployeeOK=!1}}},[t._v("Xóa gợi ý")]):a("button",{staticClass:"btn btn-outline-ghtk btn-sm",on:{click:function(e){return t.suggestManagerEmployeeForUser()}}},[t._v("Lấy gợi ý quản lý, nhân viên")])])])]),t._v(" "),a("SelectUser",{attrs:{users:t.leaders},on:{onChange:t.selectedLeader}})],2)],1)],1),t._v(" "),t.createOk?t._e():a("div",{staticClass:"w-100 text-center",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("b-btn",{attrs:{variant:"outline-ghtk",disabled:t.disableCreateBtn,id:"driver-create-user-btn-create",name:"driver-create-user-btn-create"},on:{click:t.confirmCreateAccount}},[t._v("Tạo Tài khoản")]),t._v(" "),a("b-btn",{attrs:{variant:"outline-danger"},on:{click:function(e){return t.$bvModal.hide(t.id)}}},[t._v("Hủy")])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.show_defaultwork,expression:"show_defaultwork"}]},[a("b-form-group",{staticClass:"col-md-12 p-0",attrs:{label:"Công việc mặc định"}},[a("b-form-checkbox-group",{attrs:{id:"checkbox-default-work",name:"select-default-work"},model:{value:t.default_work,callback:function(e){t.default_work=e},expression:"default_work"}},[a("default-work-detail",{attrs:{"config-default-work":t.default_work,"is-onsite":t.is_onsite},on:{"update-config":function(e){return t.updateDefaultWorkConfig(e)}}})],1)],1)],1)]):t._e(),t._v(" "),a("b-modal",{attrs:{"header-class":"text-center justify-content-center d-flex","modal-class":"modal-custom",static:"",centered:"",id:"confirm-create-account",title:"Thông báo","hide-footer":"","footer-class":"justify-content-center"}},[a("div",{staticClass:"noti-modal"},[a("div",{staticClass:"m-3"},[a("span",{staticClass:"text-ghtk"},[t._v("Lưu ý")]),t._v(": Tài khoản đăng nhập app GHTK của ứng viên bao gồm: tên đăng nhập và mật khẩu sẽ được gửi về tin nhắn SMS qua số điện thoại của ứng viên:\n        "),a("b",[t._v(t._s(t.phone))]),t._v(".\n        "),a("p",{staticClass:"mt-2"},[t._v("Bạn vui lòng kiểm tra lại số điện thoại ứng viên trước khi xác nhận tạo tài khoản.")])]),t._v(" "),a("div",{staticClass:"w-100 text-center mb-4 mt-4"},[a("b-btn",{attrs:{variant:"outline-ghtk mr-2"},on:{click:function(e){return t.$bvModal.hide("confirm-create-account")}}},[t._v("Hủy")]),t._v(" "),a("b-btn",{attrs:{variant:"ghtk"},on:{click:function(e){return t.createAcc()}}},[t._v("Xác nhận tạo tài khoản")])],1)])]),t._v(" "),a("b-modal",{attrs:{"header-class":"text-center justify-content-center d-flex","modal-class":"modal-custom",static:"",centered:"",id:"success-create-account",title:"Thông báo","hide-footer":"","footer-class":"justify-content-center"},on:{hide:t.closeUserSms}},[t.createOk?a("div",{staticClass:"m-3 noti-modal",attrs:{show:""}},[t.hadProfile?a("div",[a("div",[a("router-link",{staticClass:"link",attrs:{to:{name:"edit-master-profile",params:{id:t.candidate.master_profile_id||t.candidate.resign_info.master_profile_id}},target:"_blank"}},[t._v("\n            Master Profile\n          ")]),t._v("\n          đã được mở về trạng thái "),a("b",[t._v("Chờ nhận việc")])],1),t._v(" "),a("div",[t._v("\n          Tài khoản chính\n          "),a("router-link",{staticClass:"link",attrs:{to:{name:"edit-user",params:{id:t.userId}},target:"_blank"}},[t._v("\n            "+t._s(t.username)+"\n          ")]),t._v(" "),t.candidate.onboard_date&&t.compareDate(t.candidate.onboard_date)?a("span",[t._v(" sẽ được mở về trạng thái "),a("b",[t._v("Đang hoạt động")]),t._v(" vào 0h ngày "+t._s(t.formatDate(t.candidate.onboard_date,"DD-MM-YYYY")))]):a("span",[t._v(" đã được mở về trạng thái "),a("b",[t._v("Đang hoạt động")])])],1)]):a("div",[a("div",[t._v("Đã tạo thành công tài khoản cho ứng viên "),a("b",[t._v(t._s(t.candidate.name))])]),t._v(" "),a("ul",[a("li",[a("b",[t._v("Mã COD")]),t._v(": "+t._s(t.codAlias))]),t._v(" "),a("li",[a("b",[t._v("Tên đăng nhập (username)")]),t._v(": "+t._s(t.username))]),t._v(" "),a("li",[a("b",[t._v("Mật khẩu")]),t._v(": Đã gửi về tin nhắn SMS qua số điện thoại đến ứng viên")])]),t._v(" "),a("p",[a("i",{staticClass:"fa fa-info-circle mr-1 text-ghtk",attrs:{"aria-hidden":"true"}}),t._v(" Kiểm tra mục log của ứng viên để lấy Username")])])]):a("div",{staticClass:"m-3 noti-modal",attrs:{show:!0}},[t.hadProfile?a("span",[a("h6",{staticClass:"mb-2"},[t._v("Lưu ý:")]),t._v("\n            Nhân viên này đã có\n            "),a("router-link",{staticClass:"link",attrs:{to:{name:"edit-master-profile",params:{id:t.candidate.master_profile_id||t.candidate.resign_info.master_profile_id}},target:"_blank"}},[t._v("Master Profile")]),t._v("\n            . Việc tạo tài khoản nhanh sẽ tự động mở "),a("b",[t._v("Master Profile")]),t._v(" về trạng thái\n            "),a("b",[t._v(t._s(t.isHr?"Đang làm việc":"Chờ nhận việc"))]),a("br"),t._v("\n            Mở "),a("b",[t._v("Tài khoản chính")]),t._v(" về trạng thái "),a("b",[t._v("Đang hoạt động")])],1):a("span",[a("h6",{staticClass:"mb-2"},[t._v("Lưu ý:")]),t._v("\n            Việc tạo tài khoản nhanh sẽ tự động tạo "),a("b",[t._v("Master Profile")]),t._v(" và "),a("b",[t._v("tài khoản "+t._s(t.position_name))]),t._v(" cho ứng viên\n          ")])]),t._v(" "),a("div",{staticClass:"w-100 text-center mb-4 mt-4"},[a("b-btn",{attrs:{variant:"ghtk"},on:{click:t.closeUserSms}},[t._v("Đóng")])],1)])],1)},[],!1,At,"data-v-4ef624cd",null).exports,Nt={name:"ModalViewDocument",components:{ViewDocument:a("6tFF").a},props:{currentDocument:{type:Array,default:function(t){return[]}}},methods:{}};var Rt=function(t){a("PXwp")},Ut=Object(L.a)(Nt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{"modal-class":"modal-custom",size:"lg",title:"Hồ sơ","header-class":"justify-content-center",centered:"",static:"",id:"modal-view-document","hide-footer":""}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"p-4 d-flex flex-wrap"},t._l(t.currentDocument||[],function(e){return a("div",{staticClass:"pb-2 col-md-4"},[a("strong",{staticClass:"pb-2"},[t._v(t._s(e.document_name||"Hồ sơ")+" ")]),t._v(" "),e.url.length>0?a("ViewDocument",{staticClass:"mt-2",attrs:{document:e}}):a("p",{staticClass:"font-italic"},[t._v("(Chưa có)")])],1)}),0)])])},[],!1,Rt,"data-v-cb907ae6",null).exports,$t={props:{candidateId:{type:Number},documents:{type:Object,default:function(){return{count_required:0,count_current:0,status:""}}}},data:function(){return{loadingDocument:!1}},methods:{getDocument:function(){var t=this;return h()(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingDocument=!0,e.abrupt("return",g.a.getDocument({candidate_id:t.candidateId}).then(function(t){if(t.data.success)return t.data.data;p.a.showMessage(t.data.message||"Có lỗi khi lấy document!")}).catch(function(t){p.a.showMessage(t.message||"Lỗi xảy ra, vui lòng liên hệ IT để được hỗ trợ!","error")}).finally(function(){t.loadingDocument=!1}));case 2:case"end":return e.stop()}},e,t)}))()},showDocument:function(){var t=this;return h()(d.a.mark(function e(){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDocument();case 2:a=e.sent,t.$emit("showDocumentCandidate",a);case 4:case"end":return e.stop()}},e,t)}))()}}};var Ht=function(t){a("Uqgu")},Bt={name:"ListCandidate",components:{ModalViewDocument:Ut,ModalNote:B,ModalRejectCandidate:U,TimeLine:O,ModalContactCandidate:F,ModalReviewCandidate:W,ModalMakeAppoint:pt,ModalCreateUser:Ot,Document:Object(L.a)($t,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.loadingDocument?a("i",{staticClass:"fas fa-spinner fa-pulse text-success ml-auto mr-1"}):t.documents?a("div",[a("span",[t._v("Hồ sơ:")]),t._v(" "),0==(t.documents.count_required||0)?a("strong",[t._v("Không yêu cầu")]):a("span",[a("strong",[t._v(t._s(t.documents.count_current||0)+"/"+t._s(t.documents.count_required||0)+" - "+t._s(t.documents.status||"")+" ")]),t._v(" "),a("span",{staticClass:"ghtk-color cursor-pointer",on:{click:function(e){return t.showDocument()}}},[t._v("(Xem)")])])]):t._e()])},[],!1,Ht,"data-v-4fd6c400",null).exports},props:{listCandidates:{default:[]},newCandidates:{type:Array,default:function(){return[]}},candidateJobId:{default:""},jobId:{default:""},permissions:{default:function(){return[]}},originTags:{default:function(){return[]}},originGlobalTags:{default:function(){return[]}},isCloseShift:{default:!1}},data:function(){return{disabledClassOldCandidate:!0,dataListCandidates:this.listCandidates,totalCandidate:0,showDocumentInfo:!0,currentDocument:[],statuses:[{id:"contact",name:"Cần liên hệ"},{id:"interview",name:"Hẹn phỏng vấn"},{id:"expect_join",name:"Hẹn nhận việc"},{id:"saveinfo",name:"Từ chối"}],curCandidate:{id:null,status:null,evaluate:null,apply_date:null,name:null,station_id:null,register_place:null,phone:null},typeCandidateJob:"taken_job",appointmentType:null,appointmentTime:null,recordId:null,reviewType:null,attachPermission:!0,reasonRejectTag:[],openTagModal:!1,tags:this.originTags,globalTags:this.originGlobalTags,tableName:"sgw_candidates",scope:"private",currentJobDriverX:null,defaultAvatar:"https://cache.giaohangtietkiem.vn/d/b04440d8dc4a05f744f1680ad42ecd1c.jpg?width=450&height=450",documents:[]}},created:function(){var t=this;return h()(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m.eventBus.$on("afterExplainCandidateSuccess",t.afterExplainCandidateSuccess),t.isCloseShift){e.next=6;break}return e.next=4,t.getCountDocument();case 4:t.showDocumentInfo=!1,t.$nextTick(function(){t.showDocumentInfo=!0});case 6:case"end":return e.stop()}},e,t)}))()},mounted:function(){},destroyed:function(){m.eventBus.$off("afterExplainCandidateSuccess",this.afterExplainCandidateSuccess)},watch:{originTags:function(t){this.tags=t},listCandidates:function(){var t=this;return h()(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.totalCandidate!==t.listCandidates.length&&(t.totalCandidate=t.listCandidates.length,t.isCloseShift&&t.sortListCandidates()),e.next=3,t.getCountDocument();case 3:t.showDocumentInfo=!1,t.$nextTick(function(){t.showDocumentInfo=!0});case 5:case"end":return e.stop()}},e,t)}))()},originGlobalTags:function(t){this.globalTags=t}},methods:{getDocument:function(t){try{return JSON.parse(l()(this.documents))[t]}catch(t){return{count_required:0,count_current:0,status:""}}},getCountDocument:function(){var t=this;return h()(d.a.mark(function e(){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=t.isCloseShift?t.newCandidates.map(function(t){return t.id}):t.listCandidates.map(function(t){return t.id})).length>0)){e.next=6;break}return t.loadingDocument=!0,e.next=5,g.a.getCountDocument({candidate_id:a}).then(function(e){if(e.data.success)for(var a in e.data.data)t.documents[a]=e.data.data[a];else p.a.showMessage(e.data.message||"Có lỗi khi lấy document!")}).catch(function(t){p.a.showMessage(t.message||"Lỗi xảy ra, vui lòng liên hệ IT để được hỗ trợ!","error")});case 5:t.loadingDocument=!1;case 6:case"end":return e.stop()}},e,t)}))()},getListCandidates:function(){return this.isCloseShift?this.dataListCandidates:this.listCandidates},showDocument:function(t){this.currentDocument=t,this.$bvModal.show("modal-view-document")},resetCandidate:function(){this.curCandidate=null},getStatusName:function(t){return this.statuses.find(function(e){return e.id===t}).name},reloadCandidates:function(){this.$bvModal.hide(""),this.$emit("reloadCandidates")},formatDateTime:function(t){var e=new Date(t),a=e.getHours(),n=e.getMinutes();return"Hẹn "+(a+"h"+(n=n<10?"0"+n:n))+" "+e.getDate()+"-"+(e.getMonth()+1)+"-"+e.getFullYear()},getAppointment:function(t){return"contact"===t.status&&t.appointments.expected_contact?this.formatDateTime(t.appointments.expected_contact.appointment_time):"interview"===t.status&&t.appointments.expected_interview?this.formatDateTime(t.appointments.expected_interview.appointment_time):"expect_join"===t.status&&t.appointments.expected_join?this.formatDateTime(t.appointments.expected_join.appointment_time):""},isInStatusMain:function(t){return["contact","interview","expect_join"].includes(t.status)},openModalRejectCandidate:function(t){this.curCandidate=t,this.$bvModal.show("modal-reject-candidate")},refreshModelTags:function(t){this.$emit("refreshModelTags",t)},addTagForCandidate:function(t){var e=t.tag,a=t.log;this.curCandidate.tags=this.curCandidate.tags||[],this.curCandidate.logs=this.curCandidate.logs||[],this.curCandidate.tags.push(e),this.curCandidate.logs.push(a)},makeAppointment:function(t){this.appointmentType=t.status,this.openModalMakeAppoint(t)},openModalMakeAppoint:function(t){this.curCandidate=t,this.$bvModal.show("modal-make-appoint")},closeModalMakeAppoint:function(){this.resetDataModalMakeAppointment(),this.$bvModal.hide("modal-make-appoint")},isHasPermission:function(t){return this.permissions.includes(t)},showModalJob:function(t,e){this.curCandidate=t,this.typeCandidateJob=e,this.$bvModal.show("modal-show-job")},openModalNote:function(t){this.curCandidate=t,this.$bvModal.show("candidate-note-modal")},noteCandidate:function(t){var e=this;return h()(d.a.mark(function a(){var n,i;return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n={candidate_id:e.curCandidate.id,note:t},a.prev=1,a.next=4,g.a.noteCandidate(n);case 4:(i=a.sent).data.success?(e.reloadCandidates(),p.a.showMessage(i.data.message,"success")):p.a.showMessage(i.data.message||"Không từ chối được ứng viên !","warning"),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.log(a.t0);case 11:return a.prev=11,e.$bvModal.hide("candidate-note-modal"),a.finish(11);case 14:case"end":return a.stop()}},a,e,[[1,8,11,14]])}))()},openTagManage:function(t){this.$emit("openTagOfCandidate",t)},openModalContact:function(t){var e=this;return h()(d.a.mark(function a(){var n;return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,g.a.getPhoneCandidate({user_id:t.user_id});case 3:(n=a.sent).data.success?(e.curCandidate=o()({phone:n.data.data.phone},t),e.$bvModal.show("modal-contact-candidate")):p.a.showMessage(n.data.message||"Không lấy được số điện thoại của ứng viên !","warning"),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,e,[[0,7]])}))()},detachTag:function(t,e){var a=this;return h()(d.a.mark(function n(){var i;return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!confirm("Bạn có chắc muốn bỏ gắn tag "+e.name+" ?")){a.next=13;break}return a.prev=1,a.next=4,g.a.detachTag({tag_id:e.tag_id,candidate_id:t.id});case 4:(i=a.sent).data.success?(p.a.showMessage(i.data.message,"success"),t.tags=t.tags.filter(function(t){return t.tag_id!==e.tag_id})):p.a.showMessage(i.data.message,"warning"),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),p.a.showMessage(a.t0.message,"warning");case 11:return a.prev=11,a.finish(11);case 13:case"end":return a.stop()}},n,a,[[1,8,11,13]])}))()},openLink:function(t){window.open(t,"_blank")},mappingStatusCandidateWithCandidateJob:function(t){return"new"===t?"contact":"selected"===t?"expect_join":"interview"===t?"interview":"save_info"===t?"saveinfo":"taken"===t?"take_job":null},updateAppointmentOk:function(){this.reloadCandidates(),this.closeModalMakeAppoint()},showModalCandidateJob:function(t){if(this.curCandidate=t.candidate,"saveinfo"===t.status){if(!t.reason)return void alert("Vui lòng nhập lý do từ chối");this.reasonRejectJob=t.reason||null,this.updateStatusCandidate(this.curCandidate,t.status)}else this.jobId=t.job.job_id,this.candidateJobId=t.job.id,this.$bvModal.hide("modal-show-job"),this.$bvModal.show("modal-quick-create-user")},showModalCreateUser:function(t){this.curCandidate=t,this.$bvModal.show("modal-quick-create-user")},hideModalCreateUser:function(){this.$bvModal.hide("modal-quick-create-user"),this.reloadCandidates()},createUserSuccess:function(t){this.$emit("createUserSuccess",t)},closeTagManage:function(){this.recordId=null,this.openTagModal=!1},rejectCandidate:function(t){var e=this,a=t.reason,n=t.reasonRejectTag;return h()(d.a.mark(function t(){var i,s;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i={tag_id:n,reason:a},t.prev=1,t.next=4,g.a.rejectCandidate(i,e.curCandidate.id);case 4:(s=t.sent).data.success?(p.a.showMessage(s.data.message,"success"),e.reloadCandidates()):p.a.showMessage(s.data.message||"Không từ chối được ứng viên !","warning"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:return t.prev=11,e.curCandidate=null,e.$bvModal.hide("modal-reject-candidate"),t.finish(11);case 15:case"end":return t.stop()}},t,e,[[1,8,11,15]])}))()},toggleTagManage:function(t,e){this.recordId=t,this.openTagModal=e},refreshHrTags:function(){var t=this;return h()(d.a.mark(function e(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},e,t)}))()},toChannelChat:function(t){var e=this;return h()(d.a.mark(function a(){var n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.toChannelChat({candidate_id:t});case 3:(n=e.sent).data.success?window.open(n.data.data.link):p.a.showMessage(n.data.message||"Không lấy được kênh chat của ứng viên !","warning"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:return e.prev=10,e.finish(10);case 12:case"end":return e.stop()}},a,e,[[0,7,10,12]])}))()},getTags:function(){var t=this;return h()(d.a.mark(function e(){var a,n,i;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.getList({scope:"private",table_name:"sgw_candidates"});case 3:return a=e.sent,n=a.data,t.tags=n.success?n.data.map(function(t){return{id:t.id,name:t.name,table_name:t.table_name}}):[],e.next=8,v.a.getList({scope:"global",table_name:"sgw_candidates"});case 8:i=e.sent,t.globalTags=i.data.success?i.data.data.map(function(t){return{id:t.id,name:t.name,table_name:t.table_name}}):[],e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:return e.prev=15,e.finish(15);case 17:case"end":return e.stop()}},e,t,[[0,12,15,17]])}))()},validateFormUpdateStatus:function(t,e){if(!(arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)&&t.status===e)return!1;if("saveinfo"===e){if(!this.reasonRejectJob&&this.reasonRejectTag.length<1)return p.a.showMessage("Vui lòng chọn tag hoặc điền lý do từ chối!","warning"),!1;if(this.reasonRejectJob&&this.reasonRejectJob.length<10)return p.a.showMessage("Nhập lý do khác không được ít hơn 10 ký tự!","warning"),!1}return!0},getClassTagStatus:function(t,e){var a="candidate-status-item";return t===e&&(a+=" active"),a},onClickTagStatus:function(t,e){p.a.isEmpty(t.profile_status)||t.profile_status===_.a.DISABLE_STATUS?this.handleSelectTagStatus(t,e):p.a.showMessage("Bạn không thể chuyển trạng thái vì tài khoản ứng viên đã được duyệt","warning")},handleSelectTagStatus:function(t,e){var a=this;return h()(d.a.mark(function n(){var i;return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a.recordId=t?t.id:null,a.curCandidate=t,a.appointmentType=e,i=t.status,"interview"===e?(t.appointments.expected_interview&&(a.appointmentTime=t.appointments.expected_interview.appointment_time),"contact"===i?(a.reviewType="contact_interview",a.reviewCandidate(t.id)):a.openModalMakeAppoint(t)):"expect_join"===e?(t.appointments.expected_join&&(a.appointmentTime=t.appointments.expected_join.appointment_time),"contact"===i?(a.reviewType="contact_expect_join",a.reviewCandidate(t.id)):"interview"===i?(a.reviewType="interview_expect_join",a.reviewCandidate(t.id)):a.openModalMakeAppoint(t)):"contact"===e&&(t.appointments.expected_contact&&(a.appointmentTime=t.appointments.expected_contact.appointment_time),a.openModalMakeAppoint(t));case 5:case"end":return n.stop()}},n,a)}))()},reviewCandidate:function(){this.$bvModal.show("modal-review-candidate")},updateStatusCandidate:function(t,e){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return h()(d.a.mark(function s(){var o,r,l;return d.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(o=a.listCandidates.findIndex(function(e){return e.id===t.id}),a.validateFormUpdateStatus(t,e,n)){s.next=3;break}return s.abrupt("return",!1);case 3:return r={},r="saveinfo"===e&&(a.reasonRejectJob||a.reasonRejectTag)?{id:t.id,newStatus:e,reason:a.reasonRejectJob||null,reasonTag:a.reasonRejectTag||[],jobDriverXId:n?n.job_id:null}:{id:t.id,newStatus:e,jobDriverXId:n?n.job_id:null},a.saveOk=!0,s.prev=6,s.next=9,f.a.updateStatusCandidate(r);case 9:(l=s.sent).data.success?(a.listCandidates[o].status=e,a.listCandidates[o].logs=t.logs||[],a.listCandidates[o].logs=[].concat(i()(t.logs),i()(l.data.data.candidate_log)),p.a.showMessage(l.data.message,"success")):p.a.showMessage(l.data.message||"Không cập nhật được trạng thái cho ứng viên !","warning"),s.next=16;break;case 13:s.prev=13,s.t0=s.catch(6),console.log(s.t0);case 16:return s.prev=16,a.curCandidate=null,a.saveOk=!1,a.loading=!1,a.reasonRejectJob=null,a.reasonRejectTag=[],a.$bvModal.hide("modal-show-job"),a.$bvModal.hide("modal-deny-candidate"),s.finish(16);case 25:case"end":return s.stop()}},s,a,[[6,13,16,25]])}))()},onDetach:function(t,e,a){var n=this;return h()(d.a.mark(function i(){var s;return d.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,!confirm("Bạn có chắc muốn bỏ gắn tag "+e.name+" ?")){i.next=6;break}return i.next=4,v.a.detach({table_name:n.tableName,record_id:t.id,hr_tag_id:e.id});case 4:(s=i.sent).data.success?(t.tags.splice(a,1),t.logs.push(s.data.candidate_log)):p.a.showMessage(s.data.message,"warning");case 6:i.next=11;break;case 8:i.prev=8,i.t0=i.catch(0),p.a.showMessage(i.t0.message,"warning");case 11:case"end":return i.stop()}},i,n,[[0,8]])}))()},resetDataModalMakeAppointment:function(){this.curCandidate=null,this.appointmentType=null,this.recordId=null,this.currentJobDriverX=null,this.appointmentTime=null},onClickExplanation:function(t){this.$emit("explanation",t)},afterExplainCandidateSuccess:function(t){this.sortListCandidates()},sortListCandidates:function(){for(var t=[],e=[],a=0;a<this.listCandidates.length;a++)this.listCandidates[a].explained?t.push(this.listCandidates[a]):e.push(this.listCandidates[a]);for(var n=0;n<t.length;n++)t[n].lastExplainedLog=this.getLastExplainedLog(t[n].logs);t.sort(function(t,e){return t.lastExplainedLog.datetime>e.lastExplainedLog.datetime?1:t.lastExplainedLog.datetime<e.lastExplainedLog.datetime?-1:0}),this.dataListCandidates=e.concat(t)},getLastExplainedLog:function(t){if(p.a.isEmpty(t))return null;for(var e=t.length,a=null,n=0;n<e;n++)D.listExplainAction.includes(t[n].action)&&(null===a||a.datetime<t[n].datetime)&&(a=t[n]);return a}}};var jt=function(t){a("g0Nb")},Ft=Object(L.a)(Bt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("table",{staticClass:"table-candidate-list table",staticStyle:{"max-height":"68vh"}},[t._m(0),t._v(" "),a("tbody",t._l(t.getListCandidates(),function(e,n){return a("tr",{key:n,staticClass:"table-candidate-content"},[a("td",{staticClass:"info-col-content"},[a("div",{staticClass:"candidate-info-wrap"},[a("div",{staticClass:"candidate-info-container"},[a("div",{staticClass:"d-flex",staticStyle:{flex:"1"}},[a("div",{staticClass:"image-user"},[a("img",{attrs:{src:e.avatar||t.defaultAvatar,alt:""}})]),t._v(" "),a("div",{staticClass:"candidate-info"},[a("div",[a("strong",[t._v(t._s(e.name))]),t._v(" "),a("strong",{staticStyle:{color:"#069255"}},[t._v(t._s(t.getAppointment(e)))])]),t._v(" "),e.job?a("div",[a("span",[t._v(t._s(e.job.name||""))])]):t._e(),t._v(" "),a("div",[a("span",[t._v("Khu vực đăng ký: ")]),t._v(" "),e.job_district?a("span",[t._v(t._s(e.job_district.name))]):t._e(),t._v(" "),e.job_province?a("span",[t._v(t._s(e.job_province.name))]):t._e()]),t._v(" "),t.showDocumentInfo?a("Document",{attrs:{candidateId:e.id,documents:t.getDocument(e.id)},on:{showDocumentCandidate:t.showDocument}}):t._e()],1)]),t._v(" "),a("div",{staticClass:"candidate-info-action"},[a("div",[a("b-btn",{class:t.disabledClassOldCandidate?"d-none":"action-btn btn-pill btn-sm candidate-info-action__btn",attrs:{disabled:t.disabledClassOldCandidate,variant:"outline-ghtk",id:"candidate-btn-view",name:"candidate-btn-view"},on:{click:function(a){return t.openLink("/adm/recruitment/candidate/edit/"+e.id)}}},[t._v("\n                  Xem\n                ")])],1),t._v(" "),a("div",[a("b-btn",{class:t.disabledClassOldCandidate?"d-none":"action-btn btn-pill btn-sm mt-2 candidate-info-action__btn",attrs:{disabled:t.disabledClassOldCandidate,variant:"outline-ghtk",id:"candidate-btn-call",name:"candidate-btn-call"},on:{click:function(a){return t.openModalContact(e)}}},[t._v("\n                  Gọi\n                ")])],1),t._v(" "),a("div",[a("b-btn",{class:t.disabledClassOldCandidate?"d-none":"action-btn btn-pill btn-sm mt-2 candidate-info-action__btn",attrs:{disabled:t.disabledClassOldCandidate,variant:"outline-ghtk",id:"candidate-btn-call",name:"candidate-btn-call"},on:{click:function(a){return t.toChannelChat(e.id)}}},[t._v("\n                  Chat\n                ")])],1)])]),t._v(" "),a("div",{staticClass:"candidate-tag"},[t._l(t.statuses.filter(function(t){return"saveinfo"!==t.id}),function(n){return a("div",{key:n.id,class:t.disabledClassOldCandidate?"d-none":"candidate-status-box"},[a("div",{on:{click:function(a){return t.onClickTagStatus(e,n.id)}}},[a("div",{class:t.getClassTagStatus(e.status,n.id)},[t._v(t._s(n.name))])])])}),t._v(" "),t._l(e.tags,function(n){return a("div",{key:n.id,class:t.disabledClassOldCandidate?"d-none":"candidate-tag-box"},[a("div",{staticClass:"candidate-tag-item"},[t._v(t._s(n.name))]),t._v(" "),a("i",{staticClass:"candidate-delete-tag fa fa-times-circle",on:{click:function(a){return t.detachTag(e,n)}}})])}),t._v(" "),a("b-button",{staticClass:"d-none tag-manage",attrs:{disabled:t.disabledClassOldCandidate,pill:"",size:"sm",variant:"outline-secondary"},on:{click:function(a){return t.openTagManage(e)}}},[t._v("+ Tag")])],2)])]),t._v(" "),a("td",{staticClass:"log-col-content"},[a("time-line",{attrs:{"item-style":{padding:"0px",fontSize:"14px"},"message-field":"message",logs:e.logs,"time-field":"time"}})],1),t._v(" "),a("td",{staticClass:"text-center action-col-content"},[a("div",[t.isInStatusMain(e)&&!e.explained?a("b-btn",{class:t.disabledClassOldCandidate?"d-none":"action-btn btn-sm w-50",attrs:{disabled:t.disabledClassOldCandidate,variant:"outline-ghtk"},on:{click:function(a){return t.makeAppointment(e)}}},[t._v("Hẹn lịch")]):t._e(),t._v(" "),"expect_join"!==e.status||e.explained?t._e():a("b-btn",{class:t.disabledClassOldCandidate?"d-none":"action-btn mt-2 btn-sm w-50",attrs:{disabled:t.disabledClassOldCandidate,variant:"outline-ghtk"},on:{click:function(a){return t.showModalCreateUser(e)}}},[t._v("Duyệt")]),t._v(" "),a("b-btn",{class:t.disabledClassOldCandidate?"d-none":"action-btn mt-2 btn-sm w-50",attrs:{disabled:t.disabledClassOldCandidate,variant:"outline-ghtk"},on:{click:function(a){return t.openModalNote(e)}}},[t._v("Ghi chú")]),t._v(" "),t.isInStatusMain(e)&&!e.explained?a("b-btn",{class:t.disabledClassOldCandidate?"d-none":"action-btn mt-2 btn-sm w-50",attrs:{disabled:t.disabledClassOldCandidate,variant:"outline-danger"},on:{click:function(a){return t.openModalRejectCandidate(e)}}},[t._v("Từ chối")]):t._e(),t._v(" "),t.isCloseShift&&t.isInStatusMain(e)&&!e.explained?a("b-btn",{staticClass:"action-btn mt-2 btn-sm w-50",attrs:{variant:"outline-danger"},on:{click:function(a){return t.onClickExplanation(e)}}},[t._v("Giải trình")]):t._e()],1)])])}),0)]),t._v(" "),a("ModalRejectCandidate",{attrs:{curCandidate:t.curCandidate},on:{rejectCandidate:t.rejectCandidate,hideModal:t.resetCandidate}}),t._v(" "),a("ModalNote",{attrs:{"modal-id":"candidate-note-modal"},on:{makeNote:t.noteCandidate,hideModal:t.resetCandidate}}),t._v(" "),a("ModalContactCandidate",{attrs:{candidate:t.curCandidate},on:{hideModal:t.resetCandidate}}),t._v(" "),a("ModalReviewCandidate",{attrs:{candidate:t.curCandidate,reviewType:t.reviewType},on:{reviewCandidateSuccess:function(e){return t.openModalMakeAppoint(t.curCandidate)}}}),t._v(" "),a("ModalMakeAppoint",{attrs:{id:"modal-make-appoint","appointment-type":t.appointmentType,"next-status":t.appointmentType,candidate:t.curCandidate,idStation:t.curCandidate?t.curCandidate.station_id:"","text-action-save":"Cập nhật thông tin"},on:{updateAppointmentOk:t.updateAppointmentOk,closeModal:t.resetDataModalMakeAppointment}}),t._v(" "),a("ModalCreateUser",{attrs:{id:"modal-quick-create-user",candidate:t.curCandidate,jobId:t.jobId||"",candidateJobId:t.candidateJobId||""},on:{createUserSuccess:t.hideModalCreateUser}}),t._v(" "),a("ModalViewDocument",{attrs:{currentDocument:t.currentDocument}})],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",{staticClass:"header-row"},[e("th",{staticClass:"text-center candidate-col"},[this._v("Thông tin ứng viên")]),this._v(" "),e("th",{staticClass:"text-center log-col"},[this._v("Chi tiết log")]),this._v(" "),e("th",{staticClass:"text-center action-col"},[this._v("Thao tác")])])])}],!1,jt,"data-v-fceaef44",null);e.a=Ft.exports},"KRb+":function(t,e){},KaSS:function(t,e){},KkPa:function(t,e){},LTTd:function(t,e){},Lo5R:function(t,e,a){"use strict";var n=a("mvHQ"),i=a.n(n),s=a("Dd8w"),o=a.n(s),r=a("Gu7T"),l=a.n(r),c=a("CpaI"),d=a("RUzx"),u={name:"single-select-poi-identity-card",components:{Multiselect:a.n(d).a},props:{placeholder:{type:String,default:"Chọn nơi cấp"},provinceId:{},isDisabled:{type:Boolean},state:{type:Boolean,default:null}},data:function(){return{option:null,options:[]}},created:function(){this.getAllOption()},watch:{option:function(t,e){this.$emit("handleSelectedProvince",t)},provinceId:function(t,e){t?this.setSelectedOption():this.option=null},unselect:function(t,e){t&&(this.option=null)},reset:function(){this.option=null}},methods:{setSelectedOption:function(){var t=this;this.options&&this.options.length&&this.provinceId&&(this.option=this.options.find(function(e){return parseInt(e.id)===parseInt(t.provinceId)})||null)},addExtendOption:function(){this.options=[].concat([{id:"-1",name:"Cục Cảnh sát ĐKQL cư trú và DLQG về dân cư",prefix:"",start_date:null,end_date:null},{id:"-2",name:"Cục Cảnh sát quản lý hành chính về trật tự xã hội",prefix:"",start_date:null,end_date:null},{id:"-3",name:"Bộ công an",prefix:"",start_date:null,end_date:null}],l()(this.options))},setDisplayName:function(){this.options=this.options.map(function(t){var e=null===t.end_date||new Date(t.end_date)>new Date?t.prefix+" "+t.name:t.prefix+" "+t.name+" (Cũ)";return o()({},t,{name:e})})},getAllOption:function(){var t=this,e=sessionStorage.getItem("allPoiIdentityCard");e?this.options=JSON.parse(e):c.a.getAllProvinceHrmV2().then(function(e){e.data.success&&(t.options=e.data.data,t.addExtendOption(),t.setDisplayName(),t.setSelectedOption(),sessionStorage.setItem("allPoiIdentityCard",i()(t.options)))}).catch(function(t){console.log(t)}),this.setSelectedOption()}}},h=a("XyMi");var p=function(t){a("5s6c")},m=Object(h.a)(u,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{class:{stateTrue:!0===t.state,stateFalse:!1===t.state},attrs:{options:t.options,placeholder:t.placeholder,disabled:t.isDisabled,label:"name","track-by":"id",selectedLabel:"",deselectLabel:"X",selectLabel:"Chọn",searchable:!0},on:{select:function(e){t.$emit("select",e)},remove:function(e){t.$emit("remove",e)}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,p,"data-v-2ee20b78",null);e.a=m.exports},Ls4C:function(t,e,a){"use strict";var n=a("HMpe"),i={name:"perfect-scrollbar",props:{options:{default:function(){}}},mounted:function(){this.$ps=new n.a(this.$el,this.options)},beforeDestroy:function(){this.$ps&&(this.$ps.destroy(),this.$ps=null)}},s=a("XyMi");var o=function(t){a("d8s/")},r=Object(s.a)(i,function(){var t=this.$createElement;return(this._self._c||t)("div",[this._t("default")],2)},[],!1,o,null,null);e.a=r.exports},LyYT:function(t,e){},MFZ1:function(t,e){},MIOM:function(t,e){},MONG:function(t,e){},MRVo:function(t,e){},MUME:function(t,e,a){"use strict";var n=a("fZjL"),i=a.n(n),s=a("pFYg"),o=a.n(s),r=a("Zrlr"),l=a.n(r),c=a("wxAW"),d=a.n(c),u=function(){function t(e){l()(this,t),"object"===(void 0===e?"undefined":o()(e))&&null!==e&&this.from(e)}return d()(t,[{key:"from",value:function(t){var e=this;i()(t).forEach(function(a){e[a]=t[a]})}}]),t}();e.a=u},MUl9:function(t,e){},MZqL:function(t,e,a){"use strict";var n=a("fZjL"),i=a.n(n),s=a("Dd8w"),o=a.n(s),r=a("NYxO"),l=this,c={name:"modal-check-before-approve-contract",props:{idModal:{type:String,default:"check-before-approve-modal-new"},isShow:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},dataCheck:{}},data:function(){return{dataCheckBeforeApprove:[],isShowModal:l.isShow}},computed:o()({},Object(r.c)({userInfo:"userInfo"}),{canApproveNotQualifyContract:function(){return!(!this.userInfo||!this.userInfo.ErpPosition)&&[110,271,270,272,269,286,154].includes(parseInt(this.userInfo.ErpPosition.id))}}),watch:{isShow:function(t,e){this.isShowModal=t,this.$emit("toggleModal",t)},dataCheck:{deep:!0,handler:function(t){this.setDataCheckBeforeApprove(t)}}},methods:{setDataCheckBeforeApprove:function(t){var e=this;this.dataCheckBeforeApprove=[],i()(t).forEach(function(a){t[a].success||e.dataCheckBeforeApprove.push(t[a].message)})},hideCheckConditionApproveModal:function(){this.isShowModal=!1,this.$emit("toggleModal",!1)},continueApprove:function(){this.$emit("continueApprove")}}},d=a("XyMi"),u=Object(d.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{static:"","hide-footer":"",id:t.idModal},on:{hide:t.hideCheckConditionApproveModal},model:{value:t.isShowModal,callback:function(e){t.isShowModal=e},expression:"isShowModal"}},[a("div",{staticClass:"w-100 text-center font-18",attrs:{slot:"modal-header"},slot:"modal-header"},[t._v("\n    Thông báo\n  ")]),t._v(" "),a("div",[a("div",{staticClass:"font-weight-bold"},[t._v("Nhân viên chưa đủ điều kiện để duyệt hợp đồng lao động:")]),t._v(" "),t._l(t.dataCheckBeforeApprove,function(e,n){return a("div",{key:n},[t._v(t._s(n+1)+" . "+t._s(e))])}),t._v(" "),t.canApproveNotQualifyContract?t._e():a("div",{staticClass:"mt-2"},[a("i",[t._v("Vui lòng liên hệ Quản lý khu vực để duyệt hợp đồng.")])]),t._v(" "),a("div",{staticClass:"w-100 text-center mt-3"},[t.canApproveNotQualifyContract?a("b-btn",{staticClass:"btn-ghtk mr-2",on:{click:function(e){return t.continueApprove()}}},[t._v("Tiếp tục duyệt")]):t._e(),t._v(" "),a("b-btn",{staticClass:"btn-outline-ghtk",on:{click:function(e){return t.hideCheckConditionApproveModal()}}},[t._v("Đóng")])],1)],2)])},[],!1,null,null,null);e.a=u.exports},MpJk:function(t,e,a){"use strict";a.d(e,"b",function(){return n});var n=[{value:null,text:"Chọn loại thay đổi"},{value:"suspend",text:"Đình chỉ"},{value:"off_no_salary",text:"Nghỉ không lương dài hạn"},{value:"pause",text:"Tạm hoãn hợp đồng"},{value:"normal_quit",text:"Nghỉ việc đúng quy trình"},{value:"arbitrarily_quit",text:"Nghỉ ngang"},{value:"fired",text:"Cho thôi việc"},{value:"comeback",text:"Đi làm lại"}];e.a={pausWorkOptions:n,suspendOptions:[{value:null,text:"Chọn lý do"},{value:"Giải quyết sự vụ",text:"Giải quyết sự vụ"},{value:"Khác",text:"Khác"}],unpaidLeaveOptions:[{value:null,text:"Chọn lý do"},{value:"Nghỉ ốm đau dài hạn",text:"Nghỉ ốm đau dài hạn"},{value:"Nghỉ thai sản",text:"Nghỉ thai sản"},{value:"Nghỉ việc riêng",text:"Nghỉ việc riêng"},{value:"Khác",text:"Khác"}],pauseContract:[{value:null,text:"Chọn lý do"},{value:"Thực hiện nghĩa vụ quân sự, dân quân tự vệ",text:"Thực hiện nghĩa vụ quân sự, dân quân tự vệ"},{value:"Bị tạm giữ, tạm giam theo quy định pháp luật",text:"Bị tạm giữ, tạm giam theo quy định pháp luật"},{value:"Chấp hành biện pháp giáo dục, cai nghiện",text:"Chấp hành biện pháp giáo dục, cai nghiện"},{value:"Dưỡng thai theo chỉ định của bác sĩ",text:"Dưỡng thai theo chỉ định của bác sĩ"},{value:"Bổ nhiệm làm quản lý DN nhà nước",text:"Bổ nhiệm làm quản lý DN nhà nước"},{value:"Do dịch bệnh",text:"Do dịch bệnh"}],normalLeaveOptions:[{value:null,text:"Chọn lý do"},{value:"Sức khỏe không đảm bảo",text:"Sức khỏe không đảm bảo"},{value:"Không đáp ứng được thời gian, địa điểm",text:"Không đáp ứng được thời gian, địa điểm"},{value:"Không phù hợp với tính chất công việc",text:"Không phù hợp với tính chất công việc"},{value:"Không phù hợp với môi trường, văn hóa",text:"Không phù hợp với môi trường, văn hóa"},{value:"Việc cá nhân/gia đình",text:"Việc cá nhân/gia đình"},{value:"Định hướng công việc mới",text:"Định hướng công việc mới"},{value:"Chế độ, thu nhập không đảm bảo",text:"Chế độ, thu nhập không đảm bảo"},{value:"Hết HĐ/Thời vụ",text:"Hết HĐ/Thời vụ"},{value:"Nghỉ sinh (vi phạm thỏa thuận)",text:"Nghỉ sinh (vi phạm thỏa thuận)"},{value:"Khác",text:"Khác"}],firedOptions:[{value:null,text:"Chọn lý do"},{value:"Thái độ làm việc kém",text:"Thái độ làm việc kém"},{value:"Cho nghỉ gian lận",text:"Cho nghỉ gian lận"},{value:"Năng lực yếu kém",text:"Năng lực yếu kém"},{value:"Khác",text:"Khác"}],reactivateOptions:[{value:null,text:"Chọn lý do"},{value:"Hết Hạn nghỉ không lương dài hạn",text:"Hết hạn nghỉ không lương dài hạn"},{value:"Hết hạn tạm hoãn hợp đồng",text:"Hết hạn tạm hoãn hợp đồng"},{value:"Nghỉ việc đi làm lại",text:"Nghỉ việc đi làm lại"}],paidOptions:[{value:null,text:"Chọn nội dung"},{value:"Trả đủ lương",text:"Trả đủ lương"},{value:"Không trả lương",text:"Không trả lương"},{value:"Phạt lương",text:"Phạt lương"},{value:"Giam lương",text:"Giam lương"}],depositOptions:[{value:null,text:"Chọn nội dung"},{value:"Trả đủ cọc",text:"Trả đủ cọc"},{value:"Không trả cọc",text:"Không trả cọc"},{value:"Phạt cọc",text:"Phạt cọc"},{value:"Giam cọc",text:"Giam cọc"}],insuranceOptions:[{value:null,text:"Chọn loại bảo hiểm"},{value:"GH1",text:"Giảm hẳn (đóng BHYT)"},{value:"GH2",text:"Giảm hẳn ( không đóng BHYT)"},{value:"KL1",text:"Nghỉ không lương (đóng BHYT)"},{value:"KL2",text:"Nghỉ không lương (không đóng BHYT)"},{value:"OF1",text:"Nghỉ do ốm đau (đóng BHYT)"},{value:"OF2",text:"Nghỉ do ốm đau (không đóng BHYT)"},{value:"ON",text:"Đi làm lại"},{value:"TM",text:"Tăng mới"},{value:"TS1",text:"Thai sản (đóng BHYT)"},{value:"TS2",text:"Thai sản (không đóng BHYT)"},{value:"TL",text:"Tăng tham gia TNLÐ, BNN"},{value:"HD",text:"Đóng đủ BHXH"},{value:"NV",text:"Đã ngừng đóng BHXH"},{value:"CD1",text:"Điều chỉnh chức danh đóng mức 32%"},{value:"CD2",text:"Điều chỉnh chức danh đóng mức 0,5%"},{value:"DC1",text:"Điều chỉnh lương đóng mức 32%"},{value:"DC2",text:"Điều chỉnh lương đóng mức 0,5%"}],immediatelyResign:[{value:null,text:"Chọn lý do"},{value:"Không có đơn xin nghỉ việc",text:"Không có đơn xin nghỉ việc"},{value:"Có đơn xin nghỉ trước thời hạn quy định, nhưng không được xét duyệt",text:"Có đơn xin nghỉ trước thời hạn quy định, nhưng không được xét duyệt"}],cancelResignOptions:[{value:null,text:"Chọn lý do"},{value:"off_no_salary_expired",text:"Hết hạn nghỉ không lương dài hạn"},{value:"pause_contract_expired",text:"Hết hạn tạm hoãn hợp đồng"},{value:"comeback",text:"Nghỉ việc đi làm lại"}]}},MxZi:function(t,e){},N1kN:function(t,e){},"N2/x":function(t,e,a){"use strict";var n=a("pFYg"),i=a.n(n),s=a("hC/b"),o={name:"visual-data",props:{data:{},format:{},allowEdit:{default:!1,type:Boolean}},data:function(t){return{expandStatus:{},editting:!1}},computed:{type:function(){return this.data?"object"===i()(this.data)?Array.isArray(this.data)?"array":"object":i()(this.data):"string"},formatedData:function(){return"money"===this.format?s.a.formatMoney(this.data):"date"===this.format?s.a.formatDate(this.data,"DD/MM/YYYY"):"time"===this.format?s.a.formatDate(this.data,"HH:mm:ss"):"datetime"===this.format?s.a.formatDate(this.data,"DD/MM/YYYY HH:mm:ss"):this.data},display:function(){return["array","object"].includes(this.type)?"block":"inline"}},methods:{expand:function(t){void 0===this.expandStatus[t]&&this.$set(this.expandStatus,t,!0),this.expandStatus[t]=!this.expandStatus[t]}}},r=a("XyMi");var l=function(t){a("WFm5")},c={name:"log-change",components:{VisualData:Object(r.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.data?a("div",{class:"d-"+t.display},[["array","object"].includes(t.type)?[t.data.config_visual&&t.data.config_visual.reduce?a("span",[a("b",[t._v(t._s(t.data[t.data.config_visual.desc_field||"desc"]||null)+": ")]),t._v(" "),a("visual-data",{staticClass:"pl-1",attrs:{data:t.data[t.data.config_visual.value_field||"value"]||null,format:t.data.config_visual.format||null,allowEdit:t.allowEdit}})],1):t._l(t.data,function(e,n){return a("div",{key:n},[e&&["array","object"].includes(typeof e)?a("span",[a("span",{staticClass:"expandable text-underline-hover cursor-pointer",on:{click:function(e){return t.expand(n)}}},[a("b",[t._v(t._s(t.expandStatus[n]?"−":"+"))]),t._v(" "+t._s(n)+"\n          ")]),t._v(":\n        ")]):a("span",[t._v(t._s(n)+":")]),t._v(" "),e?[!1===t.expandStatus[n]&&["array","object"].includes(typeof e)?a("span",{staticClass:"expandable cursor-pointer",on:{click:function(e){return t.expand(n)}}},[t._v("[....]")]):a("visual-data",{staticClass:"pl-3",attrs:{data:e,allowEdit:t.allowEdit}})]:t._e()],2)})]:a("span",[t.editting?a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data,expression:"data"}],attrs:{type:"text"},domProps:{value:t.data},on:{keypress:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.editting=!1},input:function(e){e.target.composing||(t.data=e.target.value)}}})]):a("span",[t._v(t._s(t.formatedData)+" "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.allowEdit,expression:"allowEdit"}],staticClass:"fas fa-pencil-alt ml-1 text-ghtk-action",on:{click:function(e){t.editting=!0}}})])])],2):t._e()},[],!1,l,"data-v-35f72e24",null).exports},props:{logs:{default:function(t){return{}}}}},d=Object(r.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"table table-sm table-bordered"},[t._m(0),t._v(" "),t.logs.new?a("tbody",t._l(t.logs.new,function(e,n){return a("tr",{key:n},[a("td",{staticClass:"old-data"},[a("VisualData",{attrs:{data:t.logs.old[n]}})],1),t._v(" "),a("td",{staticClass:"new-data"},[a("VisualData",{attrs:{data:e}})],1)])}),0):t._e()])},[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Thông tin cũ")]),this._v(" "),e("th",[this._v("Thông tin thay đổi")])])])}],!1,null,null,null);e.a=d.exports},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),i=a("mCOD"),s=a("NYxO"),o={name:"app",metaInfo:{title:"Index",titleTemplate:"%s - GHTK Admin"},components:{LoadingMiniBottom:i.a},computed:Object(s.c)({userInfo:"userInfo"}),created:function(){this.$store.dispatch("getUserInfo")},updated:function(){setTimeout(function(){return document.body.classList.remove("app-loading")},1)}},r=a("XyMi");var l=function(t){a("4OiV"),a("rFiI"),a("1uPn"),a("YYaX"),a("Rw57"),a("+MVp")},c=Object(r.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view"),t._v(" "),a("notifications",{attrs:{group:"default"}}),t._v(" "),a("notifications",{attrs:{group:"toast",position:"bottom right"}}),t._v(" "),a("loading-mini-bottom",{attrs:{enable:t.$parent.showLoading}}),t._v(" "),a("div",{staticClass:"d-none",attrs:{id:"code-name"}},[t._v(t._s(t.userInfo&&t.userInfo.hasOwnProperty("User")?t.userInfo.User.id:""))])],1)},[],!1,l,null,null).exports,d=a("YaEn"),u=a("Tqaz"),h=a("CLX7"),p=a.n(h),m=a("IcnI"),f=a("xtwg"),g=a("Zgw8"),v=a("ViqS"),_=a.n(v),b=function(t,e,a){var n=t.innerHTML;a.data&&a.data.domProps&&a.data.domProps.innerHTML&&(n=a.data.domProps.innerHTML);var i=e.modifiers.format||"0,0.0",s=_()(n).format(i);return s=s.toString().replace(/\.0$/,""),t.innerHTML=s,t.innerHTML},y={bind:b,update:b},C={inserted:function(t,e){t.addEventListener("scroll",function a(n){e.value(n,t)&&t.removeEventListener("scroll",a)})}},w={inserted:function(t,e){t.addEventListener("resize",function a(n){e.value(n,t)&&t.removeEventListener("resize",a)})}},k=document.createElement("div");function x(t,e){try{e.value?t.insertBefore(k,t.firstChild):k.parentNode&&t.removeChild(k)}catch(t){}}k.setAttribute("class","loading-container"),k.innerHTML='<div class="loading-container__wrapper-loader"><div class="loading-container__loader">Loading...</div></div>';var S={bind:function(t,e){x(t,e)},update:function(t,e){e.modifiers&&e.modifiers.right&&t.classList.add("loading-container-wrapper","loading_right"),x(t,e)}},M={install:function(t){t.directive("loading",S),t.mixin({data:function(){return{showLoading:!1}}}),t.prototype.$startLoading=function(){this.$root.showLoading=!0},t.prototype.$stopLoading=function(){this.$root.showLoading=!1}}},T=a("pLTS"),D=a.n(T);a.d(e,"eventBus",function(){return I}),g.a.Defaults.modifiers.computeStyle.gpuAcceleration=!1,n.default.config.productionTip=!1,n.default.use(u.b),n.default.use(p.a),n.default.use(M),n.default.use(D.a),n.default.config.devtools=!0,n.default.directive("numeral",y),n.default.directive("scroll",C),n.default.directive("resize",w),n.default.mixin({data:f.a});var I=new n.default;e.default=new n.default({el:"#app",store:m.a,router:d.a,template:"<App/>",components:{App:c}})},NICC:function(t,e,a){"use strict";var n=a("mvHQ"),i=a.n(n),s=a("Dd8w"),o=a.n(s),r=a("hC/b"),l=a("7+uW"),c=a("sUu7"),d=a("a/7L"),u=a("ufke"),h=a("csCE"),p=a("DkPr"),m=a("YlZe"),f=a("pedj"),g=a("IC97"),v=a("Qg+Y"),_=a("+cgA"),b=a("5vjp"),y=a("VO+t"),C=a("xF2Z"),w=a("agCp"),k=a("NYxO"),x=a("PJh5"),S=a.n(x);l.default.use(c.a);var M={name:"modal-driverx-create-user",components:{SingleSelectStation:d.a,SingleSelectWorkType:u.a,SingleSelectDepartment:h.a,SingleSelectDuty:p.a,SingleSelectPosition:m.a,SingleSelectShift:y.a,FileViewUpload:f.a,Datepicker:g.a,FileCandidate:v.a,SelectUser:_.a,SelectModule:b.a},props:{id:{type:String,default:"modal-quick-create-user"},candidate:{type:Object,default:function(t){return{}}},jobId:{type:String,default:""},candidateJobId:{type:String,default:""}},data:function(t){return{position_name:null,createOk:null,userId:null,username:null,password:null,codAlias:null,disableCreateBtn:!1,group_id_by_position:null,user:{candidate_id:null,station_id:null,department_id:14,position_job:null,work_type_id:null,duty_id:6,module_id:null,detail_now:null,detail_resident:null,identify_id:null,take_job_date:null,group_id:null,shift:null},suggestLeaderEmployeeOK:!1,leaders:null,employees:null,searchData:{selectLeader:[],selectEmployee:[],loadingSearch:!1},oldProfile:{station_id:null,username:null,user_id:null,group_id:null,shift:{from:null,shiftInterval:null,to:null}}}},computed:o()({},Object(k.c)({curUser:"userInfo"}),{isHr:function(){return this.curUser&&this.curUser.Group&&[3,15].includes(+this.curUser.Group.id)},hadProfile:function(){return+this.candidate.master_profile_id||this.candidate.resign_info&&+this.candidate.resign_info.master_profile_id},getStaffLeaderWatcher:function(){return this.user.department_id+"_"+this.user.position_job+"_"+this.user.station_id+"_"+this.user.module_id+"_"+this.user.duty_id},requiredShift:function(){return 23==+this.user.group_id}}),watch:{candidate:{immediate:!0,handler:function(){this.candidate&&(this.user.identify_id=this.candidate.identify_id||null,this.user.take_job_date=this.candidate.expected_join_date,this.user.detail_resident=this.candidate.address)},deep:!0},getStaffLeaderWatcher:function(){this.user.department_id&&this.user.position_job&&this.user.station_id&&this.user.duty_id&&this.suggestManagerEmployeeForUser()},hadProfile:function(t,e){this.createOk||(r.a.resetData(this.oldProfile,null,2),t&&this.getShiftByProfile())}},methods:{formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD-MM-YYYY HH:mm:ss";return S()(t).format(e)},compareDate:function(t,e){return e||(e=new Date),t=new Date(t),e=new Date(e),t.getTime()>e.getTime()},initData:function(){this.candidate&&(this.user.identify_id=this.candidate.identify_id||null,this.user.take_job_date=this.candidate.expected_join_date)},validate:function(){return this.user.position_job?this.user.work_type_id?!!this.user.station_id||(r.a.showMessage("Vui lòng chọn nơi làm việc"),!1):(r.a.showMessage("Vui lòng chọn hình thức"),!1):(r.a.showMessage("Vui lòng chọn vị trí"),!1)},createAcc:function(){var t=this;if(!this.validate())return!1;this.user.candidate_id=this.candidate.id;var e=this.validData();if(e&&"string"==typeof e)alert("Vui lòng nhập đúng và đầy đủ thông tin \n"+e);else if(!1!==e){this.$startLoading();var a=new FormData;for(var n in this.user)this.user[n]instanceof Date?a.append(n,this.user[n].toDateString()):this.user[n]instanceof Object?a.append(n,i()(this.user[n])):this.user[n]?a.append(n,this.user[n]):a.append(n,"");this.jobId&&a.append("jobId",this.jobId),this.candidateJobId&&a.append("candidateJobId",this.candidateJobId),this.disableCreateBtn=!0,C.a.quickCreateUser(a).then(function(e){e.data.success?(t.createOk=!0,t.candidate.status="take_job",t.candidate.master_profile_id=e.data.data.master_profile_id||null,t.username=e.data.data.username,t.userId=e.data.data.userId,t.updateManagerEmployeeOfUser(),t.codAlias=e.data.data.cod_alias,t.password=e.data.data.password,t.candidate.identify_id=t.user.identify_id,t.candidate.take_job_date=t.user.take_job_date,t.candidate.logs||(t.candidate.logs=[]),t.candidate.logs.push(e.data.data.log_candidate),t.$emit("createUserSuccess",{candidate_id:e.data.candidate_id,candidate:e.data.candidate}),r.a.showMessage(e.data.message||"Tạo tài khoản cho nhân viên thành công","success")):(r.a.showMessage(e.data.message||"Không thể tạo tài khoản cho nhân viên","warning"),t.createOk=null)}).catch(function(e){t.createOk=null,r.a.showMessage("Có lỗi xảy ra, không thể tạo tài khoản !","warning")}).finally(function(e){t.disableCreateBtn=!1,t.$stopLoading()})}else alert("Vui lòng nhập đúng và đầy đủ thông tin !")},validData:function(){if(this.requiredShift&&(!this.user.shift||!this.user.shift.from))return"- Thiếu thông tin ca làm việc\n";if(!this.hadProfile){var t={candidate_id:"Ứng viên",position_job:"Vị trí làm việc",station_id:"Kho làm việc",work_type_id:"Kiểu nhân viên",identify_id:"Số CMND/CCCD"},e="";for(var a in t)this.user[a]&&this.user[a].length||(e+="- "+t[a]+"\n");return this.user.identify_id&&9!==this.user.identify_id.length&&12!==this.user.identify_id.length&&(e+="- Số CMND/CCCD không hợp lệ\n"),this.searchData.selectLeader&&Array.isArray(this.searchData.selectLeader)&&this.searchData.selectLeader.length?e:"- Người quản lý\n"}},resetData:function(){this.user.candidate_id=null,this.user.station_id=null,this.user.departmnet_id=null,this.user.position_job=null,this.user.work_type_id=null,this.user.detail_now=null,this.user.detail_resident=null,this.user.take_job_date=null,this.user.identify_id=null,this.user.shift=null,this.createOk=null,this.disableCreateBtn=null,this.username=null,this.userId=null,this.password=null,this.codAlias=null,this.leaders=null,this.employees=null},selectPosition:function(t){t?(this.user.position_job=t.id,this.position_name=t.name,this.user.group_id=t.group_id):(this.user.position_job=null,this.position_name=null,this.user.group_id=null)},handleSelectedShift:function(t){this.user.shift=t},expectJoinFrom:function(t){if(t)return(t=new Date(t)).setDate(t.getDate()-1),t},setTakeJobdate:function(t){t instanceof Date&&(this.user.take_job_date=t.toDateString()),t instanceof String&&(this.user.take_job_date=t)},selectModule:function(t){this.user.module_id=t?t.id:null},validValue:function(t,e,a){r.a.validValue(t,e,a)},selectedLeader:function(t){this.searchData.selectLeader=t},selectedEmployee:function(t){this.searchData.selectEmployee=t},suggestManagerEmployeeForUser:function(){var t=this;this.$startLoading();var e={user_id:this.user.id,station_id:this.user.station_id,module_id:this.user.module_id,department_id:this.user.department_id,position_id:this.user.position_job,duty_id:this.user.duty_id,work_type_id:this.user.work_type_id};w.a.suggestManagerEmployeeForUser(e).then(function(a){a.data.success?(e.auto_update&&r.a.showMessage(a.data.message||"Cập nhật quản lý, nhân viên cho User thành công","success"),a.data.data&&a.data.data.leaders&&(t.leaders=a.data.data.leaders),a.data.data&&a.data.data.employees&&(t.employees=a.data.data.employees),t.suggestLeaderEmployeeOK=!0):r.a.showMessage(a.data.message||"Không lấy được gợi ý quản lý, nhân viên cho User !","warning")}).catch(function(t){r.a.showMessage("Không lấy được gợi ý, vui lòng thử lại sau !","warning"),console.log(t)}).then(function(e){t.$stopLoading()})},getShiftByProfile:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e||(e=this.candidate.master_profile_id),e&&w.a.getShiftByProfile({masterProfileId:e}).then(function(e){e.data.success&&e.data.data&&(t.oldProfile.group_id=e.data.data.group_id||null,t.oldProfile.user_id=e.data.data.id||null,t.oldProfile.station_id=e.data.data.station_id||null,t.oldProfile.username=e.data.data.username||null,e.data.data.shift&&(t.oldProfile.shift=e.data.data.shift))}).catch(function(t){console.log(t)})},updateManagerEmployeeOfUser:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=[],a=[];Array.isArray(this.searchData.selectLeader)&&(e=this.searchData.selectLeader.map(function(t){return t.id})),Array.isArray(this.searchData.selectEmployee)&&(a=this.searchData.selectEmployee.map(function(t){return t.id}));var n={userId:this.userId,leaders:e,employees:a};e&&e.length&&!n.userId?r.a.showMessage("Không có User ID, không thể cập nhật quản lý, nhân viên cho user !","warning"):w.a.updateManagerEmployeeOfUser(n).then(function(e){e.data.success?t&&r.a.showMessage(e.data.message||"Cập nhật quản lý và nhân viên cho User thành công.","success"):"permission"===e.data.err_type?r.a.showMessage("Bạn không có quyền cập nhật quản lý và nhân viên cho User !","warning"):r.a.showMessage(e.data.message||"Không thể cập nhật quản lý và nhân viên cho User !","warning")}).catch(function(t){console.log(t),r.a.showMessage("Không thể cập nhật quản lý và nhân viên cho User !","warning")})}}},T=a("XyMi");var D=function(t){a("6aA6"),a("mMWI")},I=Object(T.a)(M,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"small-scrollbar"},[a("b-modal",{attrs:{id:t.id,title:"Tạo tài khoản nhanh","modal-class":"modal-xl",static:"","ok-only":"","footer-class":"justify-content-center"},on:{hide:t.resetData,shown:function(e){return t.initData()}}},[a("div",{staticClass:"form-create-user"},[t.createOk?a("b-alert",{attrs:{show:""}},[t.hadProfile&&!t.password?a("div",[a("div",[a("router-link",{staticClass:"link",attrs:{to:{name:"edit-master-profile",params:{id:t.candidate.master_profile_id||t.candidate.resign_info.master_profile_id}},target:"_blank"}},[t._v("\n                Master Profile\n              ")]),t._v("\n              đã được mở về trạng thái "),a("b",[t._v("Chờ nhận việc")])],1),t._v(" "),a("div",[t._v("\n              Tài khoản chính\n              "),a("router-link",{staticClass:"link",attrs:{to:{name:"edit-user",params:{id:t.userId}},target:"_blank"}},[t._v("\n                "+t._s(t.username)+"\n              ")]),t._v(" "),t.candidate.take_job_date&&t.compareDate(t.candidate.take_job_date)?a("span",[t._v(" sẽ được mở về trạng thái "),a("b",[t._v("Đang hoạt động")]),t._v(" vào 0h ngày "+t._s(t.formatDate(t.candidate.take_job_date,"DD-MM-YYYY")))]):a("span",[t._v(" đã được mở về trạng thái "),a("b",[t._v("Đang hoạt động")])])],1)]):a("div",[a("div",[t._v("Đã tạo thành công tài khoản "),a("b",[t._v(t._s(t.position_name))]),t._v(" cho ứng viên "),a("b",[t._v(t._s(t.candidate.name))])]),t._v(" "),a("div",[t._v("- Tên đăng nhập: "),a("b",[t._v(t._s(t.username))])]),t._v(" "),a("div",[t._v("- Mật khẩu: "),a("b",[t._v(t._s(t.password))])]),t._v(" "),a("div",[t._v("- Mã COD: "),a("b",[t._v(t._s(t.codAlias))])]),t._v(" "),a("div",{staticClass:"text-success mt-2"},[a("i",{staticClass:"fas fa-info-circle"}),t._v(" Kiểm tra log của ứng viên để lấy "),a("b",[t._v("Username")]),t._v(" và "),a("b",[t._v("Mật khẩu")]),t._v(" nếu không nhớ")])])]):a("b-alert",{attrs:{show:!0,variant:"warning"}},[t.hadProfile?a("span",[a("h6",{staticClass:"mb-2"},[t._v("Lưu ý:")]),t._v("\n            Nhân viên này đã có\n            "),a("router-link",{staticClass:"link",attrs:{to:{name:"edit-master-profile",params:{id:t.candidate.master_profile_id||t.candidate.resign_info.master_profile_id}},target:"_blank"}},[t._v("Master Profile")]),t._v("\n            . Việc tạo tài khoản nhanh sẽ tự động mở "),a("b",[t._v("Master Profile")]),t._v(" về trạng thái\n            "),a("b",[t._v(t._s(t.isHr?"Đang làm việc":"Chờ nhận việc"))]),a("br"),t._v("\n            Mở "),a("b",[t._v("Tài khoản chính")]),t._v(" về trạng thái "),a("b",[t._v("Đang hoạt động")])],1):a("span",[a("h6",{staticClass:"mb-2"},[t._v("Lưu ý:")]),t._v("\n            Việc tạo tài khoản nhanh sẽ tự động tạo "),a("b",[t._v("Master Profile")]),t._v(" và "),a("b",[t._v("tài khoản "+t._s(t.position_name))]),t._v(" cho ứng viên\n          ")])]),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Tên nhân viên"}},[a("b-input",{attrs:{disabled:!0},model:{value:t.candidate.name,callback:function(e){t.$set(t.candidate,"name",e)},expression:"candidate.name"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Số điện thoại"}},[a("b-input",{attrs:{disabled:!0},model:{value:t.candidate.phone,callback:function(e){t.$set(t.candidate,"phone",e)},expression:"candidate.phone"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4",attrs:{label:"CMND/CCCD"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.identify_id,expression:"user.identify_id"}],staticClass:"form-control",attrs:{type:"number",disabled:!1},domProps:{value:t.user.identify_id},on:{input:[function(e){e.target.composing||t.$set(t.user,"identify_id",e.target.value)},function(e){return t.validValue(t.user,"identify_id",{length:12})}]}})])],1),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col-md-6",attrs:{label:"Địa chỉ hiện tại"}},[a("b-textarea",{model:{value:t.user.detail_now,callback:function(e){t.$set(t.user,"detail_now",e)},expression:"user.detail_now"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-6",attrs:{label:"Địa chỉ thường trú"}},[a("b-textarea",{model:{value:t.user.detail_resident,callback:function(e){t.$set(t.user,"detail_resident",e)},expression:"user.detail_resident"}})],1)],1),t._v(" "),a("div",[a("div",{staticClass:"font-weight-bold working-header"},[t._v("THÔNG TIN CÔNG VIỆC")]),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col-md-4 col-lg-3",attrs:{label:"Chọn bộ phận"}},[a("single-select-department",{attrs:{"is-disabled":!1,"department-id":t.user.department_id},on:{handleSelectedDepartment:function(e){return t.user.department_id=e?e.id:null}}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4 col-lg-3",attrs:{label:"Chọn vị trí"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Chọn vị trí "),a("span",{staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("single-select-position",{attrs:{"department-id":t.user.department_id,"is-disabled":!1,"position-job":t.user.position_job},on:{handleSelectedPosition:t.selectPosition}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4 col-lg-3",attrs:{label:"Kiểu nhân viên"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Hình thức "),a("span",{staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("single-select-work-type",{attrs:{"position-job":t.user.position_job,"work-type-id":t.user.work_type_id},on:{handleSelectedWorkType:function(e){return t.user.work_type_id=e?e.id:null}}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4 col-lg-3",attrs:{label:"Chọn kho"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Chọn nơi làm việc "),a("span",{staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("single-select-station",{attrs:{"custom-class":"","station-id":t.user.station_id,selectLabel:"",placeholder:"Nơi làm việc"},on:{handleSelectedStation:function(e){return t.user.station_id=e?e.id:null}}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4 col-lg-3",attrs:{label:"Module tính lương"}},[a("SelectModule",{attrs:{"custom-class":"","station-id":t.user.station_id,"module-id":t.user.module_id,selectLabel:""},on:{handleSelectedModule:t.selectModule}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4 col-lg-3",attrs:{label:"Chọn chức vụ"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Chọn chức vụ "),a("span",{staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("single-select-duty",{attrs:{"duty-id":t.user.duty_id,"is-disabled":!0},on:{handleSelected:function(e){return t.user.duty_id=e?e.id:null}}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4 col-lg-3",attrs:{label:"Ngày vào"}},[a("Datepicker",{attrs:{format:"dd-MM-yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,placeholder:"--/--/----","calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0,"disabled-dates":{to:t.expectJoinFrom(t.candidate.apply_date||t.candidate.created)}},model:{value:t.user.take_job_date,callback:function(e){t.$set(t.user,"take_job_date",e)},expression:"user.take_job_date"}})],1),t._v(" "),t.requiredShift||t.user.shift?a("b-form-group",{staticClass:"col-md-4 col-lg-3"},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Ca làm việc"),a("span",{staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("single-select-shift",{on:{handleSelectedShift:t.handleSelectedShift}})],1):t._e()],1)],1),t._v(" "),a("div",{staticClass:"seperate mb-3"}),t._v(" "),a("b-form-row",{staticClass:"mb-2"},[a("b-form-group",{staticClass:"col-md-12"},[a("template",{slot:"label"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[t._v("Thêm người quản lý "),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.hadProfile,expression:"!hadProfile"}],staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("div",{staticClass:"col-md-6 text-right"},[t.suggestLeaderEmployeeOK?a("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:function(e){t.leaders=null,t.employees=null,t.suggestLeaderEmployeeOK=!1}}},[t._v("Xóa gợi ý")]):a("button",{staticClass:"btn btn-outline-ghtk btn-sm",on:{click:function(e){return t.suggestManagerEmployeeForUser()}}},[t._v("Lấy gợi ý quản lý, nhân viên")])])])]),t._v(" "),a("SelectUser",{attrs:{users:t.leaders},on:{onChange:t.selectedLeader}})],2)],1)],1),t._v(" "),t.createOk?t._e():a("div",{staticClass:"w-100 text-center",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("b-btn",{attrs:{variant:"outline-ghtk",disabled:t.disableCreateBtn,id:"driver-create-user-btn-create",name:"driver-create-user-btn-create"},on:{click:t.createAcc}},[t._v("Tạo Tài khoản")]),t._v(" "),a("b-btn",{attrs:{variant:"outline-danger"},on:{click:function(e){return t.$bvModal.hide(t.id)}}},[t._v("Hủy")])],1)])],1)},[],!1,D,"data-v-69ec7ba9",null);e.a=I.exports},NKgQ:function(t,e){},NMPq:function(t,e){},NNGF:function(t,e){},Nc17:function(t,e){},NpTJ:function(t,e){},Nzzg:function(t,e){},O6r3:function(t,e,a){"use strict";var n=a("PikB"),i=a("JJbb"),s=a("Saf8"),o=a("4pAE");e.a={createTrainingTest:function(t){return n.a.post("/AdTraining/createTrainingTest",t)},getTrainingTests:function(t){return n.a.get("/AdTraining/getTrainingTests",{params:t})},deleteTrainingTest:function(t){return n.a.post("/AdTraining/deleteTrainingTest",t)},getTrainingTest:function(t){return n.a.get("/AdTraining/getTrainingTest",{params:t})},createTrainingPage:function(t){return n.a.post("/AdTraining/createTrainingPage",t)},deleteTrainingPage:function(t){return n.a.post("/AdTraining/deleteTrainingPage",t)},editTrainingPage:function(t){return n.a.post("/AdTraining/editTrainingPage",t)},editTrainingQuestion:function(t){return n.a.post("/AdTraining/editTrainingQuestion",t)},createTrainingQuestion:function(t){return n.a.post("/AdTraining/createTrainingQuestion",t)},deleteTrainingQuestion:function(t){return n.a.post("/AdTraining/deleteTrainingQuestion",t)},getTrainingTestInfo:function(t){return n.a.post("/AdTraining/getTrainingTestInfo",t)},updateTrainingTest:function(t){return n.a.post("/AdTraining/updateTrainingTest",t)},getCategories:function(){return n.a.post("/AdTraining/getCategories")},createTrainingSyllabus:function(t){return i.a.post("ErpTrainingSyllabus/createTrainingSyllabus",t)},getListSubSyllabus:function(t){return o.a.get("erp/ErpTrainingSyllabus/getListSubSyllabus",{params:t})},getAllSyllabus:function(t){return o.a.get("erp/ErpTrainingSyllabus/getAllSyllabus",{params:t})},getAllTest:function(t){return i.a.get("/ErpTrainingSyllabus/getAllTest",{params:t})},getPeriodTestResult:function(t){return o.a.get("/erp/ErpTpClass/getPeriodTestResult",{params:t})},getSyllabuses:function(t){return i.a.get("/ErpTrainingSyllabus/getSyllabuses",{params:t})},getSyllabusesCreateClass:function(t){return o.a.get("erp/ErpTrainingSyllabus/getSyllabusesCreateClass",{params:t})},editSyllabus:function(t){return i.a.post("/ErpTrainingSyllabus/editSyllabus",t)},generateTestPdf:function(t){return i.a.post("/ErpTrainingSyllabus/generateTestPdf",t)},getClasses:function(t){return o.a.get("erp/ErpTpClass/getClasses",{params:t})},getLogsClass:function(t){return o.a.get("/education/api/log/class",{params:t})},getTrainingProgram:function(t){return o.a.get("erp/ErpTrainingSyllabus/getTrainingProgram",{params:t})},addClass:function(t){return i.a.post("/ErpTpClass/addClass",t)},updateClass:function(t){return i.a.post("/ErpTpClass/updateClass",t)},confirmClass:function(t){return i.a.post("/ErpTpClass/confirmClass",t)},createClass:function(t){return s.a.post("/class/create",t)},cancelClass:function(t){return s.a.post("/class/cancel",t)},deleteStudent:function(t){return s.a.delete("/class/delete-student",{params:t})},rollUpListStudent:function(t){return i.a.post("/ErpTpClass/rollUpListStudent",t)},rollUpStudent:function(t){return o.a.post("erp/ErpTpClass/rollUpStudent",t)},cancelRollupStudent:function(t){return o.a.post("erp/ErpTpClass/cancelRollupStudent",t)},addClassNote:function(t){return o.a.post("erp/ErpTpClass/addClassNote",t)},addAcademyNote:function(t){return i.a.post("/ErpTpClass/addAcademyNote",t)},completePeriod:function(t){return o.a.post("/erp/ErpTpClass/completePeriod",t)},getSendTestInfo:function(t){return o.a.get("/erp/ErpTpClass/getSendTestInfo",{params:t})},getListStudentNoClass:function(t){return i.a.get("/ErpTpClass/getListStudentNoClass",{params:t})},canAddStudentToClass:function(t){return i.a.get("/ErpTpClass/canAddStudentToClass",{params:t})},canAddLecturerToClass:function(t){return i.a.get("/ErpTpClass/canAddLecturerToClass",{params:t})},addStudentToClass:function(t){return i.a.post("/ErpTpClass/addStudentToClass",t)},getListStudentNoEnoughClass:function(t){return i.a.get("/ErpTpClass/getListStudentNoEnoughClass",{params:t})},sendMessageRollup:function(t){return i.a.post("/ErpTpClass/sendMessageRollup",t)},confirmChooseClass:function(t){return i.a.post("/ErpTpClass/confirmChooseClass",t)},senMessageTest:function(t){return i.a.post("/ErpTpClass/senMessageTest",t)},apiGetListClass:function(t){return o.a.get("/erp/ErpTpClass/apiGetListClass",{params:t})},getListClass:function(t){return i.a.get("ErpTpClass/getListClass")},getStudentOfTrainingProgram:function(t){return i.a.get("ErpTpClass/getStudentOfTrainingProgram",{params:t})},getStudentByClassId:function(t){return o.a.get("/erp/ErpTpClass/getStudentByClassId",{params:t})},getClassListWaitingConfirm:function(t){return o.a.get("/erp/ErpTpClass/getClassListWaitingConfirm",{params:t})},getStatisticClass:function(t){return o.a.get("/erp/ErpTpClass/getStatisticClass",{params:t})},getClassByUserId:function(t){return o.a.get("/erp/ErpTpClass/getClassByUserId",{params:t})},reviewStudentAtEndCourse:function(t){return i.a.post("/ErpTpClass/reviewStudentAtEndCourse",t)},getQuestions:function(t){return i.a.get("/ErpTrainingQuestions/getQuestions",{params:t})},getTrainingCategories:function(t){return i.a.get("/ErpTrainingQuestions/getCategories",{params:t})},getListRookie:function(t){return i.a.get("/ErpNewStaff/getDataNewStaff",{params:t})},getStatisticRookie:function(t){return i.a.get("/ErpNewStaff/getCountNewStaff",{params:t})},getListLogOperate:function(t){return i.a.get("/ErpNewStaff/getLogDetail",{params:t})},getListLogRookie:function(t){return o.a.get("/erp/ErpTpClass/getLogsOfStudentsInClasses",{params:t})},getListExplanationReason:function(t){return o.a.get("/erp/ErpTrainingSyllabus/getListExplanationReason",{params:t})},getDataConfirmShift:function(t){return i.a.get("/ErpTrainingSyllabus/getDataConfirmShift",{params:t})},explainLockShift:function(t){return i.a.post("/ErpTrainingSyllabus/explainLockShift",t)},getPeriodTest:function(t){return o.a.get("/erp/period-test/show-test",{params:t})},getUserTest:function(t){return s.a.get("/class/user-test",{params:t})},getListStudents:function(t){return o.a.get("erp/ErpTpClass/getListStudentOfClass",{params:t})},createAppointment:function(t){return s.a.post("/appointment/create",t)},updateAppointment:function(t){return s.a.put("/appointment/update",t)},removeAppointment:function(t){return s.a.delete("/appointment/delete",{params:t})},getEvaluateByUserAndPeriod:function(t){return s.a.get("/student/get-evaluate",{params:t})},createEvaluate:function(t){return s.a.post("/student/create-evaluate",t)},apiSuggestStudents:function(t){return s.a.get("/class/suggest-student-of-class",{params:t})}}},O7cK:function(t,e){},OEkN:function(t,e){},OTLl:function(t,e){},OfDR:function(t,e){},OkkX:function(t,e){},Osgx:function(t,e,a){"use strict";var n=a("Xxa5"),i=a.n(n),s=a("exGp"),o=a.n(s),r=a("3m8s"),l=a("hC/b"),c={name:"ModalPenaltyConfirm",props:{action:{type:String,default:""},title:{type:String,default:""},dataPenalty:{type:Object,default:function(t){return{}}}},computed:{helper:function(t){return l.a}},data:function(){return{loadingComponent:!1,reward:{},reason:""}},methods:{emitSuccess:function(){this.$bvModal.hide("modal-action-penalty-confirm"),this.$emit("reloadListFstar")},submit:function(){var t=this;return o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.loadingComponent=!0,"cancel"!==t.action){e.next=4;break}return e.next=4,t.submitCancelPenalty();case 4:t.loadingComponent=!1;case 5:case"end":return e.stop()}},e,t)}))()},submitCancelPenalty:function(){var t=this;return o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.reason){e.next=4;break}return l.a.showMessage("Vui lòng nhập lý do bỏ phạt","warning"),t.loadingComponent=!1,e.abrupt("return");case 4:return e.next=6,r.a.cancelPenalty({id:t.dataPenalty.id,reason:t.reason}).then(function(e){e.data.success?t.emitSuccess():l.a.showMessage(e.data.message,"error")}).catch(function(t){l.a.showMessage(t.response.data.message,"error")});case 6:case"end":return e.stop()}},e,t)}))()}}},d=a("XyMi");var u=function(t){a("8l7q")},h=Object(d.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{attrs:{id:"modal-action-penalty-confirm",title:t.title,scrollable:"","hide-footer":"","header-class":"justify-content-center",centered:""},on:{show:function(e){t.reason=""}}},[a("div",{staticClass:"mb-4 text-center"},[t._v("\n      Bạn vui lòng nhập lý do bỏ phạt "),a("span",{staticClass:"text-danger"},[t._v("*")]),t._v(" "),a("b-textarea",{staticClass:"mt-2",attrs:{rows:"5",placeholder:"Nhập lý do gỡ phạt"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}})],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingComponent,expression:"loadingComponent"}],staticClass:"mt-1 text-center"},[a("button",{staticClass:"btn btn-outline-success mr-4 w-25",attrs:{"data-style":"zoom-out"},on:{click:function(e){t.$bvModal.hide("modal-action-penalty-confirm"),t.reason=""}}},[t._v("\n        Hủy\n      ")]),t._v(" "),a("button",{staticClass:"btn btn-success ml-4 w-25",attrs:{"data-style":"zoom-out"},on:{click:t.submit}},[t._v("\n        Xác nhận\n      ")])])])],1)},[],!1,u,"data-v-b83e401a",null);e.a=h.exports},P1TD:function(t,e){},PMWW:function(t,e){},POKh:function(t,e,a){"use strict";var n={props:{initial:{type:Boolean,default:!1}},data:function(){return{size:{width:-1,height:-1}}},methods:{reset:function(){var t=this.$el.firstChild,e=this.$el.lastChild;t.scrollLeft=1e5,t.scrollTop=1e5,e.scrollLeft=1e5,e.scrollTop=1e5},update:function(){this.size.width=this.$el.offsetWidth,this.size.height=this.$el.offsetHeight}},watch:{size:{deep:!0,handler:function(t){this.reset(),this.$emit("resize",{width:this.size.width,height:this.size.height})}}},render:function(t){var e="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",a="position: absolute; left: 0; top: 0;";return t("div",{style:e+"animation-name: resizeSensorVisibility;",on:{"~animationstart":this.update}},[t("div",{style:e,on:{scroll:this.update}},[t("div",{style:a+"width: 100000px; height: 100000px;"})]),t("div",{style:e,on:{scroll:this.update}},[t("div",{style:a+"width: 200%; height: 200%;"})])])},beforeDestroy:function(){this.$emit("resize",{width:0,height:0}),this.$emit("resizeSensorBeforeDestroy")},mounted:function(){if(!0===this.initial&&this.$nextTick(this.update),this.$el.offsetParent!==this.$el.parentNode&&(this.$el.parentNode.style.position="relative"),"attachEvent"in this.$el&&!("AnimationEvent"in window)){var t=function(){this.update(),e()}.bind(this),e=function(){this.$el.detachEvent("onresize",t),this.$off("resizeSensorBeforeDestroy",e)}.bind(this);this.$el.attachEvent("onresize",t),this.$on("resizeSensorBeforeDestroy",e),this.reset()}}},i=a("XyMi");var s=function(t){a("QVoI")},o=Object(i.a)(n,void 0,void 0,!1,s,null,null);e.a=o.exports},PXwp:function(t,e){},PZjF:function(t,e,a){"use strict";var n=a("agCp"),i=a("pedj"),s=a("hC/b"),o={name:"modal-detail-file",props:{title:{type:String,default:"Thông tin file"},id:{type:String,default:"detail-file"},contractId:{default:null},edit:{default:!0},signed:{default:!0}},components:{FileViewUpload:i.a},data:function(){return{files:[],fileAdd:[],fileDelete:[],loading:!1}},watch:{},methods:{uploadFile:function(){var t=this,e=this.contractId,a=this.signed;if(e){var i=new FormData;for(var o in i.append("contract_id",e),i.append("signed",a?1:0),this.fileDelete)i.append("fileDelete["+o+"]",this.fileDelete[o]);for(var r in this.fileAdd)i.append("fileAdd["+r+"]",this.fileAdd[r]);this.fileAdd.length<1&&this.files.length===this.fileDelete.length?s.a.showMessage("Vui lòng chọn file hợp đồng để upload !","warning"):(this.$startLoading(),n.a.uploadFileContract(i).then(function(e){e.data.success?(t.$emit("updateOk",e.data.data),t.files=e.data.data,t.fileAdd=[],t.fileDelete=[],t.$bvModal.hide(t.id),s.a.showMessage(e.data.message,"success")):s.a.showMessage(e.data.message||"Không xác nhận ký hợp đồng được, vui lòng liên hệ IT để được hỗ trợ !","warning")}).catch(function(t){s.a.showMessage("Không xác nhận ký hợp đồng được, vui lòng liên hệ IT để được hỗ trợ !","warning"),console.log(t)}).then(function(e){t.$stopLoading()}))}},getFileContractSigned:function(){if(!this.contractId)return this.files=[],this.fileAdd=[],void(this.fileDelete=[]);this.getFileContract()},getFileContract:function(){var t=this,e=this.contractId;if(e){this.loading=!0;var a={contract_id:e};n.a.getFileContractNew(a).then(function(e){e.data.success?(t.files=e.data.data,t.fileAdd=[],t.fileDelete=[]):s.a.showMessage(e.data.message||"Không thể lấy danh sách file!","warning")}).catch(function(t){s.a.showMessage("Không thể lấy danh sách file!","warning"),console.log(t)}).finally(function(e){t.loading=!1})}}}},r=a("XyMi"),l=Object(r.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{"hide-footer":"","modal-class":"modal-lg-custom",title:t.title,id:t.id,centered:"",static:""},on:{show:t.getFileContract}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit,expression:"edit"}]},[a("b",[t._v("Vui lòng nhập file HĐ đã ký "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("div",{staticClass:"seperate-sm mb-2"})]),t._v(" "),a("file-view-upload",{attrs:{"file-add":t.fileAdd,"file-delete":t.fileDelete,files:t.files,edit:t.edit,accept:"image/*, .pdf, .doc, .docx",loading:t.loading,"input-id":t.id+"-file-contract","is-data-encrypt":!0}},[a("b-btn",{attrs:{slot:"update-btn-content",variant:"ghtk"},on:{click:t.uploadFile},slot:"update-btn-content"},[t._v("Xác nhận đã ký")])],1)],1)},[],!1,null,null,null);e.a=l.exports},PbY7:function(t,e,a){"use strict";var n=a("Zx67"),i=a.n(n),s=a("Zrlr"),o=a.n(s),r=a("wxAW"),l=a.n(r),c=a("zwoO"),d=a.n(c),u=a("Pf15"),h=a.n(u),p=function(t){function e(){return o()(this,e),d()(this,(e.__proto__||i()(e)).apply(this,arguments))}return h()(e,t),l()(e,null,[{key:"redirectProfile",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.codGroupIds.includes(+t)&&e?window.open(this.profileUrl+e,"_blank"):a&&window.open(this.profileMasterUrl+a,"_blank")}}]),e}(a("MUME").a);p.optionsReport=[{value:"10",text:"Miền Bắc"},{value:"20",text:"Miền Trung"},{value:"30",text:"Miền Nam"}],p.optionsPerpage=[{value:"25",text:"25"},{value:"50",text:"50"},{value:"75",text:"75"},{value:"100",text:"100"}],p.codGroupIds=[12,14,17,18],p.profileUrl="/adm/profile/staff/",p.profileMasterUrl="/adm/profile/master/edit/",p.pointTypes={DCC5:{value:1,text:"Địa chỉ Cấp 5"},MP_SHOP:{value:3,text:"MP"},PICK_ADDRESS:{value:2,text:"Shop"}},p.PICKING_CART=1,p.DELIVERY_CART=2,e.a=p},PikB:function(t,e,a){"use strict";a.d(e,"b",function(){return g});var n=a("Xxa5"),i=a.n(n),s=a("exGp"),o=a.n(s),r=a("mtWM"),l=a.n(r),c=a("4WGu"),d=a("hC/b"),u=a("fEi7"),h=a("vfns"),p=!d.a.isInIframe(),m=l.a.create({baseURL:c.a.baseApiUrl});m.interceptors.request.use(function(t){var e=new h.a("local").get(c.a.oidc.tokenIamStorage);if(e&&e.accessToken&&(t.headers.Authorization=c.a.bearerKeyEcom+" "+e.accessToken.accessToken),!p){var a=u.a.getToken();a&&(t.headers.GchatToken=a)}return t});var f,g=(f=o()(i.a.mark(function t(e,a){var n,s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=a||"data",t.prev=1,t.next=4,e;case 4:if(!(n=t.sent).data||"[object Object]"===Object.prototype.toString.call(n.data)){t.next=7;break}throw new Error("Server trả về không đúng định dạng");case 7:if(void 0===n.data.success||n.data.success){t.next=11;break}if(s=n.data.message||n.data.msg||"Đã có lỗi xảy ra khi gọi API",!n.data.message){t.next=11;break}throw new Error(s.toString());case 11:if(!a||!Array.isArray(n.data)){t.next=13;break}throw new Error("Server trả về không đúng định dạng");case 13:return t.abrupt("return",n.data[a]);case 16:if(t.prev=16,t.t0=t.catch(1),!(t.t0 instanceof Error)){t.next=20;break}throw t.t0.toString();case 20:if("[object Object]"!==Object.prototype.toString.call(t.t0)||!t.t0.data||!t.t0.data.message){t.next=22;break}throw t.t0.data.message;case 22:throw t.t0.toString();case 23:case"end":return t.stop()}},t,this,[[1,16]])})),function(t,e){return f.apply(this,arguments)});e.a=m},"Q8B+":function(t,e){},QADr:function(t,e){},QVoI:function(t,e){},"QX/V":function(t,e){},"Qg+Y":function(t,e,a){"use strict";var n=a("hC/b"),i=a("pedj"),s=a("bJ+M"),o={name:"file-candidate",components:{FileViewUpload:i.a},props:{idCandidate:{default:null},fileExist:{type:Object,default:function(t){return{avatar_file:[],personal_id_file:[],curriculum_vitae_file:[],guarantee_file:[],contract_file:[],asset_responsibility_file:[],commitment_cheat_file:[],commitment_security_file:[],driver_license_file:[]}}},fileAdd:{type:Object,default:function(t){return{avatar_file:[],personal_id_file:[],curriculum_vitae_file:[],guarantee_file:[],contract_file:[],asset_responsibility_file:[],commitment_cheat_file:[],commitment_security_file:[],driver_license_file:[]}}},edit:{default:!0},allowDelete:{default:!1}},data:function(t){return{}},created:function(){this.idCandidate&&this.getFileCandidate()},watch:{idCandidate:function(t,e){t&&this.getFileCandidate(t)}},methods:{getFileCandidate:function(t){var e=this;t||(t=this.idCandidate||null),t&&s.a.getFileCandidate({candidate_id:t}).then(function(t){t.data.success?(e.fileExist||(e.fileExist={}),e.fileExist.avatar_file=t.data.data.avatar_file||[],e.fileExist.personal_id_file=t.data.data.personal_id_file||[],e.fileExist.curriculum_vitae_file=t.data.data.curriculum_vitae_file||[],e.fileExist.guarantee_file=t.data.data.guarantee_file||[],e.fileExist.contract_file=t.data.data.contract_file||[],e.fileExist.asset_responsibility_file=t.data.data.asset_responsibility_file||[],e.fileExist.commitment_cheat_file=t.data.data.commitment_cheat_file||[],e.fileExist.commitment_security_file=t.data.data.commitment_security_file||[]):n.a.showMessage(t.data.message||"Không lấy được file hồ sơ ứng viên !","warning")}).catch(function(t){n.a.showMessage("Đã có lỗi xảy ra, không lấy được file hồ sơ ứng viên !","warning")})}}},r=a("XyMi");var l=function(t){a("wfYm")},c=Object(r.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-form-row",{staticClass:"form-file"},[a("b-form-group",{staticClass:"col-md-6 border rounded",attrs:{label:"CMND/CCCD"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("CMND/CCCD "),a("span",{directives:[{name:"show",rawName:"v-show",value:!!t.edit,expression:"!!edit"}],staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("file-view-upload",{attrs:{"input-id":"CMND/CCCD","input-style":{width:"5rem"},"allow-delete":t.allowDelete,"hide-upload-button":!0,height:"5rem",edit:t.edit,files:t.fileExist.personal_id_file,"file-add":t.fileAdd.personal_id_file,"is-thumbnail":!0}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-6 border rounded",attrs:{label:"Giấy bảo lãnh trách nhiệm dân sự"}},[a("file-view-upload",{attrs:{"input-id":"guarantee_file","input-style":{width:"5rem"},"allow-delete":t.allowDelete,"hide-upload-button":!0,height:"5rem",edit:t.edit,files:t.fileExist.guarantee_file,"file-add":t.fileAdd.guarantee_file}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-12 border rounded",attrs:{label:"Sổ hộ khẩu"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Sổ hộ khẩu "),a("span",{directives:[{name:"show",rawName:"v-show",value:!!t.edit,expression:"!!edit"}],staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("file-view-upload",{attrs:{"input-id":"curriculum_vitae_file","input-style":{width:"5rem"},"allow-delete":t.allowDelete,"hide-upload-button":!0,height:"5rem",edit:t.edit,files:t.fileExist.curriculum_vitae_file,"file-add":t.fileAdd.curriculum_vitae_file}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-6 border rounded",attrs:{label:"Hợp đồng dịch vụ"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Hợp đồng dịch vụ "),a("span",{directives:[{name:"show",rawName:"v-show",value:!!t.edit,expression:"!!edit"}],staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("file-view-upload",{attrs:{"input-id":"contract_file","input-style":{width:"5rem"},"allow-delete":t.allowDelete,"hide-upload-button":!0,height:"5rem",edit:t.edit,files:t.fileExist.contract_file,"file-add":t.fileAdd.contract_file}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-6 border rounded",attrs:{label:"Hợp đồng trách nhiệm vật chất"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Hợp đồng trách nhiệm vật chất "),a("span",{directives:[{name:"show",rawName:"v-show",value:!!t.edit,expression:"!!edit"}],staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("file-view-upload",{attrs:{"input-id":"asset_responsibility_file","input-style":{width:"5rem"},"allow-delete":t.allowDelete,"hide-upload-button":!0,height:"5rem",edit:t.edit,files:t.fileExist.asset_responsibility_file,"file-add":t.fileAdd.asset_responsibility_file}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-6 border rounded",attrs:{label:"Cam kết không gian lận"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Cam kết không gian lận "),a("span",{directives:[{name:"show",rawName:"v-show",value:!!t.edit,expression:"!!edit"}],staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("file-view-upload",{attrs:{"input-id":"commitment_cheat_file","input-style":{width:"5rem"},"allow-delete":t.allowDelete,"hide-upload-button":!0,height:"5rem",edit:t.edit,files:t.fileExist.commitment_cheat_file,"file-add":t.fileAdd.commitment_cheat_file}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-6 border rounded",attrs:{label:"Cam kết bảo mật thông tin"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Cam kết bảo mật thông tin "),a("span",{directives:[{name:"show",rawName:"v-show",value:!!t.edit,expression:"!!edit"}],staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("file-view-upload",{attrs:{"input-id":"commitment_security_file","input-style":{width:"5rem"},"allow-delete":t.allowDelete,"hide-upload-button":!0,height:"5rem",edit:t.edit,files:t.fileExist.commitment_security_file,"file-add":t.fileAdd.commitment_security_file}})],1)],1)},[],!1,l,"data-v-3f01ea08",null);e.a=c.exports},QqLn:function(t,e,a){"use strict";var n=a("RUzx"),i=a.n(n),s=a("xF2Z"),o={name:"single-select-position",components:{Multiselect:i.a},props:{id:"single-select-position",isDisabled:{type:Boolean},departmentName:{},departmentId:{},positionId:{},positionName:{},multiple:!1},data:function(){return{option:null,options:[]}},created:function(){this.getList()},watch:{departmentName:function(t,e){this.option=null,this.options=[],this.getPositionListByDepartment(t)},departmentId:function(t,e){this.option=null,this.options=[],this.getPositionListByDepartment(t)},option:function(t,e){this.$emit("handleSelectedPosition",t)},positionId:function(t,e){t&&this.setSelectedOption()},positionName:function(t,e){t&&this.setSelectedOption()}},methods:{setSelectedOption:function(){var t=this;this.options.length>0&&this.positionId&&(this.option=this.options.find(function(e){return e.id===t.positionId})),this.options.length>0&&this.positionName&&(this.option=this.options.find(function(e){return e.name===t.positionName}))},getList:function(){var t=this;s.a.getPositionList().then(function(e){e.data.success&&(t.options=e.data.data)}).catch(function(t){console.log(t)})},getPositionListByDepartment:function(t){var e=this,a={department:t};s.a.getPositionListByDepartment(a).then(function(t){t.data.success&&(e.options=t.data.data,e.setSelectedOption())}).catch(function(t){console.log(t)})}}},r=a("XyMi"),l=Object(r.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("multiselect",{attrs:{id:t.id,options:t.options,placeholder:"Chọn vị trí làm việc",label:"name","track-by":"name",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn",searchable:!0,multiple:t.multiple,disabled:t.isDisabled},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")])])],1)},[],!1,null,null,null);e.a=l.exports},"R1Q+":function(t,e,a){"use strict";var n="0.1.0-beta",i=a("//Fk"),s=a.n(i),o=a("mvHQ"),r=a.n(o),l={stringToBase64Url:function(t){var e=btoa(t);return this.base64ToBase64Url(e)},base64ToBase64Url:function(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},base64UrlToBase64:function(t){return t.replace(/-/g,"+").replace(/_/g,"/")},base64UrlToString:function(t){var e=this.base64UrlToBase64(t);switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Not a valid Base64Url"}var a=atob(e);try{return decodeURIComponent(escape(a))}catch(t){return a}},stringToBuffer:function(t){for(var e=new Uint8Array(t.length),a=0;a<t.length;a++)e[a]=t.charCodeAt(a);return e},base64UrlDecode:function(t){return atob(this.base64UrlToBase64(t))},bind:function(t,e){var a=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return n=a.concat(n),t.apply(e,n)}},isAbsoluteUrl:function(t){return/^(?:[a-z]+:)?\/\//i.test(t)},isString:function(t){return"[object String]"===Object.prototype.toString.call(t)},isObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)},isNumber:function(t){return"[object Number]"===Object.prototype.toString.call(t)},isoToUTCString:function(t){var e=t.match(/\d+/g),a=Date.UTC(e[0],e[1]-1,e[2],e[3],e[4],e[5]);return new Date(a).toUTCString()},toQueryParams:function(t){var e=[];if(null!==t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&void 0!==t[a]&&null!==t[a]&&e.push(a+"="+encodeURIComponent(t[a]));return e.length?"?"+e.join("&"):""},genRandomString:function(t){for(var e="abcdefghijklnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",a="",n=0,i=e.length;n<t;++n)a+=e[Math.floor(Math.random()*i)];return a},extend:function(){var t=arguments[0];return[].slice.call(arguments,1).forEach(function(e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&void 0!==e[a]&&(t[a]=e[a])}),t},removeNils:function(t){var e={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var n=t[a];null!==n&&void 0!==n&&(e[a]=n)}return e},clone:function(t){if(t){var e=r()(t);if(e)return JSON.parse(e)}return t},omit:function(t){var e=Array.prototype.slice.call(arguments,1),a={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&-1===e.indexOf(n)&&(a[n]=t[n]);return this.clone(a)},find:function(t,e){for(var a=t.length;a--;){var n=t[a],i=!0;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&n[s]!==e[s]){i=!1;break}if(i)return n}},getNativeConsole:function(){return"undefined"!=typeof window?window.console:"undefined"!=typeof console?console:void 0},getConsole:function(){var t=this.getNativeConsole();return t&&t.log?t:{log:function(){}}},warn:function(t){this.getConsole().log("[gmjs-sdk] WARN: "+t)},removeTrailingSlash:function(t){if(t){var e=t.replace(/^\s+|\s+$/gm,"");return e=e.replace(/\/+$/,"")}},isIE11OrLess:function(){return!!document.documentMode&&document.documentMode<=11},isFunction:function(t){return!!t&&"[object Function]"==={}.toString.call(t)},delay:function(t){return new s.a(function(e){setTimeout(e,t)})},isPromise:function(t){return t&&t.finally&&"function"==typeof t.finally},debugLS:function(t,e){localStorage.setItem(t,r()(e))}};function c(t,e){this.name="AuthApiError",this.message=t.error_summary,this.errorSummary=t.error_summary,this.errorCode=t.error_code,this.errorId=t.error_id,e&&(this.xhr=e)}function d(t,e){this.name="AuthSdkError",this.message=t,this.errorSummary=t,this.errorCode="INTERNAL",this.errorId="INTERNAL",e&&(this.xhr=e)}function u(t,e){this.name="OAuthError",this.message=e,this.errorCode=t,this.errorSummary=e}function h(t,e){if("string"!=typeof e||!e.length)throw new d('"storageName" is required');function a(){var a=t.getItem(e);a=a||"{}";try{return JSON.parse(a)}catch(t){throw new d("Unable to parse storage string: "+e)}}function n(a){try{var n=r()(a);t.setItem(e,n)}catch(t){throw new d("Unable to set storage: "+e)}}return{getStorage:a,setStorage:n,clearStorage:function(t){if(!t)return n({});var e=a();delete e[t],n(e)},updateStorage:function(t,e){var i=a();i[t]=e,n(i)}}}c.prototype=new Error,d.prototype=new Error,u.prototype=new Error;var p={STATE_TOKEN_KEY_NAME:"ghtkStateToken",DEFAULT_POLLING_DELAY:500,DEFAULT_MAX_CLOCK_SKEW:300,DEFAULT_CACHE_DURATION:86400,REDIRECT_OAUTH_PARAMS_COOKIE_NAME:"ghtk-oauth-params",TOKEN_STORAGE_NAME:"ghtk-token-storage",CACHE_STORAGE_NAME:"ghtk-cache-storage",PKCE_STORAGE_NAME:"ghtk-pkce-storage",AUTHN_STATE_STORAGE_NAME:"ghtk-authn-state-storage",SIGNED_IN_STORAGE_NAME:"signed-in-storage",TRANSACTION_STATUS:{},STATE:{UNKNOWN:"unknown",UNKNOWN_AUTHN_STATE:"unknown:authn_state",UNKNOWN_ERROR_STATE:"unknown:error_state",REQUIRE_CAPTCHA:"require_captcha",AUTHN:{SUCCESS:"authn_state:success",MFA_REQUIRED:"authn_state:mfa_required",MFA_CHALLENGE:"authn_state:mfa_challenge",MFA_ENROLL:"authn_state:mfa_enroll",MFA_ENROLL_ACTIVE:"authn_state:mfa_enroll_active",RECOVERY:"authn_state:recovery",RECOVERY_CHALLENGE:"authn_state:recovery_challenge",PASSWORD_RESET:"authn_state:password_reset",PASSWORD_EXPIRED:"authn_state:password_expired",UNAUTHENTICATED:"authn_state:unauthenticated"},ERROR:{CLIENT:{INVALID_API_CONDITION:"error_state:400:invalid_api_condition",ILLEGAL_REQUEST_PARAM:"error_state:400:illegal_request_param",ILLEGAL_REQUEST:"error_state:400:illegal_request",INVALID_CAPTCHA:"error_state:400:invalid_captcha",RESOURCE_DUPLICATED:"error_state:400:resource_duplicated",EXCEED_SECONDARY_CONTACT_LIMIT:"error_state:400:exceed_secondary_contact_limit",AUTHN_FAIL:"error_state:401:authn_fail",PASSWORD_EXPIRED:"error_state:401:password_expired",LOGIN_REQUIRED:"error_state:401:login_required",CONSENT_REQUIRED:"error_state:401:consent_required",INVALID_TOKEN:"error_state:401:invalid_token",INVALID_AUTHZ_CODE:"error_state:401:invalid_authz_code",INVALID_PKCE_CODE:"error_state:401:invalid_pkce_code",INVALID_RECOVERY_TOKEN:"error_state:401:invalid_recovery_token",INVALID_REFRESH_TOKEN:"error_state:401:invalid_refresh_token",PERMISSION_DENIED:"error_state:403:permission_denied",EXCEED_SESSION_LIMIT:"error_state:403:exceed_session_limit",PASSWORD_POLICY_VIOLATION:"error_state:403:password_policy_violation",SECURITY_POLICY_VIOLATION:"error_state:403:security_policy_violation",INVALID_SESSION:"error_state:403:invalid_session",INVALID_AUTHN_TOKEN:"error_state:403:invalid_authn_token",ILLEGAL_AUTHN_STATE:"error_state:403:illegal_authn_state",INVALID_PASSCODE:"error_state:403:invalid_passcode",INVALID_CLIENT:"error_state:403:invalid_client",INVALID_TEMP_ACCESS_CODE:"error_state:403:invalid_temp_access_code",EXCEED_DIRECT_TOKEN_LIMIT:"error_state:403:exceed_direct_token_limit",EXCEED_TEMP_ACCESS_LIMIT:"error_state:403:exceed_temp_access_limit",RESOURCE_NOT_FOUND:"error_state:404:resource_not_found",EMAIL_TOO_MANY_REQUEST:"error_state:429:email_too_many_request",SMS_TOO_MANY_REQUEST:"error_state:429:sms_too_many_request",TOO_MANY_REQUEST:"error_state:429:too_many_request"},SERVER:{INTERNAL_ERROR:"error_state:500:internal_error",NOTIFY_SMS_FAIL:"error_state:500:notify_sms_fail",NOTIFY_EMAIL_FAIL:"error_state:500:notify_email_fail",BAD_GATEWAY:"error_state:502:bad_gateway",SERVICE_UNAVAILABLE:"error_state:503:service_unavailable",GATEWAY_TIMEOUT:"error_state:504:gateway_timeout"}}}},m={browserHasLocalStorage:function(){try{var t=this.getLocalStorage();return this.testStorage(t)}catch(t){return!1}},browserHasSessionStorage:function(){try{var t=this.getSessionStorage();return this.testStorage(t)}catch(t){return!1}},getPKCEStorage:function(t){return!(t=t||{}).preferLocalStorage&&this.browserHasSessionStorage()?h(this.getSessionStorage(),p.PKCE_STORAGE_NAME):this.browserHasLocalStorage()?h(this.getLocalStorage(),p.PKCE_STORAGE_NAME):h(this.getInMemoryStorage(),p.PKCE_STORAGE_NAME)},getHttpCache:function(){return this.browserHasLocalStorage()?h(this.getLocalStorage(),p.CACHE_STORAGE_NAME):this.browserHasSessionStorage()?h(this.getSessionStorage(),p.CACHE_STORAGE_NAME):h(this.getInMemoryStorage(),p.CACHE_STORAGE_NAME)},getOauthParamsStorage:function(){return this.browserHasLocalStorage()?h(this.getLocalStorage(),p.REDIRECT_OAUTH_PARAMS_COOKIE_NAME):this.browserHasSessionStorage()?h(this.getSessionStorage(),p.REDIRECT_OAUTH_PARAMS_COOKIE_NAME):h(this.getInMemoryStorage(),p.REDIRECT_OAUTH_PARAMS_COOKIE_NAME)},testStorage:function(t){var e="ghtk-test-storage";try{return t.setItem(e,e),t.removeItem(e),!0}catch(t){return!1}},getLocalStorage:function(){return localStorage},getSessionStorage:function(){return sessionStorage},getInMemoryStorage:function(){var t={};return{getItem:function(e){return t[e]},setItem:function(e,a){t[e]=a}}}},f=a("pFYg"),g=a.n(f),v=a("mtWM"),_=a.n(v);function b(t){var e=t.data,a="object"===(void 0===e?"undefined":g()(e)),n=!1;"OK"===t.statusText?n=!0:t.status>=200&&t.status<=299&&(n=!0);var i={status:t.status,statusText:t.statusText,ok:n,headers:t.headers,dataType:"",dataJSON:{},rawData:{}};return a&&(i.dataType="json",i.dataJSON=e.data,i.rawData=e),i}function y(t,e){this.name="AxiosRequestError",this.message=t,e&&(this.xhr=e)}function C(t,e,a){var n=a.data,i=a.headers||{},s=a.xsrfHeaderName||"X-CSRF-Token",o=a.xsrfCookieName||"_ghtk_csrf";return"application/json"===(i["Content-Type"]||i["content-type"]||"")&&n&&"string"!=typeof n&&(n=r()(n)),_()(e,{method:t,headers:a.headers,data:n,withCredentials:a.withCredentials,xsrfCookieName:o,xsrfHeaderName:s}).then(function(t){return b(t)}).catch(function(t){if(t.response)return b(t.response);if(t.request){var e="The request was made but no response was received";throw t.isAxiosError&&(e=e+". Error: "+t.message),new y(e,t)}var a="Something happened in setting up the request that triggered an Error";throw t.isAxiosError&&(a=a+". Error: "+t.message),new y(a,t)})}y.prototype=new Error;var w=a("Xxa5"),k=a.n(w),x=a("exGp"),S=a.n(x),M=a("fZjL"),T=a.n(M),D=a("WreF"),I=a.n(D),P=a("CAzn"),E=a("GCDA"),L={assertValidConfig:function(t){if(!t)throw new d("No arguments passed to constructor. Required usage: new GhtkAuth(args)");if(!t.issuer)throw new d('No issuer passed to constructor. Required usage: new GhtkAuth({issuer: "https://auth.ghtk.vn"})');if(!new RegExp("^http?s?://.+").test(t.issuer))throw new d('Issuer must be a valid URL. Required usage: new GhtkAuth({issuer: "https://auth.ghtk.vn"})')},getUserAgent:function(t,e){var a=t.userAgent||{};return a.value?a.value:a.template?a.template.replace("$GHTK_AUTH_JS",e):e}},A=a("Zrlr"),O=a.n(A),N=a("wxAW"),R=a.n(N),U={setCookie:function(t,e,a){var n="";if(a){var i=new Date;i.setTime(i.getTime()+1e3*a),n="; expires="+i.toUTCString()}document.cookie=t+"="+(e||"")+n+"; path=/"},getCookie:function(t){for(var e=t+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var i=a[n];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(e))return i.substring(e.length,i.length)}return null}},$=new(function(){function t(){O()(this,t),this.singedInStorage=h(this.getStorageEngine(),p.SIGNED_IN_STORAGE_NAME),this.authnStateStorage=h(this.getStorageEngine(),p.AUTHN_STATE_STORAGE_NAME)}return R()(t,[{key:"getStorageEngine",value:function(){return m.browserHasLocalStorage()?m.getLocalStorage():m.browserHasSessionStorage()?m.getSessionStorage():m.getInMemoryStorage()}},{key:"getSession",value:function(){return this.singedInStorage.getStorage().session||{signedIn:!1,expiresAt:-1}}},{key:"setSession",value:function(t){this.singedInStorage.updateStorage("session",t)}},{key:"getAccount",value:function(){return this.singedInStorage.getStorage().account||{id:"",info:{}}}},{key:"setAccount",value:function(t){this.singedInStorage.updateStorage("account",t)}},{key:"getAccountFactors",value:function(){return this.singedInStorage.getStorage().mfa||{factors:[],selected:{id:"",profile:{},type:"",ui:{}}}}},{key:"setAccountFactors",value:function(t){this.singedInStorage.updateStorage("mfa",t)}},{key:"getRecoveryQuestion",value:function(){return this.singedInStorage.getStorage().recoveryQuestion||""}},{key:"setRecoveryQuestion",value:function(t){this.singedInStorage.updateStorage("recoveryQuestion",t)}},{key:"clearRecoveryQuestion",value:function(){this.singedInStorage.clearStorage("recoveryQuestion")}},{key:"resetRedirectionCounter",value:function(){U.setCookie("authRedirectCounter",0,0)}},{key:"increaseRedirectionCounter",value:function(){var t=this.getRedirectionCounter();U.setCookie("authRedirectCounter",t+1,5)}},{key:"getRedirectionCounter",value:function(){return U.getCookie("authRedirectCounter")||0}},{key:"getAuthnState",value:function(){return this.authnStateStorage.getStorage()||{name:"",token:"",expiresAt:-1}}},{key:"setAuthnState",value:function(t){null!==t?this.authnStateStorage.setStorage(t||{}):this.authnStateStorage.clearStorage()}},{key:"setOnOauthCallbackJustNow",value:function(){U.setCookie("_oncbjn",1,10)}},{key:"isOnOauthCallbackJustNow",value:function(){return!!U.getCookie("_oncbjn")||!1}}]),t}());function H(t,e){var a=(e=e||{}).url,n=e.method,i=e.args,o=e.saveAuthnState,r=e.accessToken,u=!1!==e.withCredentials,h=t.options.storageUtil.getHttpCache();if(e.cacheResponse){var m=h.getStorage()[a];if(m&&Date.now()/1e3<m.expiresAt)return s.a.resolve(m.response)}var f={Accept:"application/json","Content-Type":"application/json","X-Ghtk-User-Agent-Extended":t.userAgent};l.extend(f,t.options.headers,e.headers),r&&l.isString(r)&&(f.Authorization="Bearer "+r);var g={headers:f,data:i||void 0,withCredentials:u};return t.options.httpRequestClient(n,a,g).then(function(t){if(t.ok){var n=t.dataJSON;if(o&&(n.state&&n.state.token||$.setAuthnState(null)),n&&n.state&&$.setAuthnState(n.state),n&&e.cacheResponse){var i=e.cacheResponseDuration||p.DEFAULT_CACHE_DURATION;h.updateStorage(a,{expiresAt:Math.floor(Date.now()/1e3)+i,response:t})}}else if(t.status>=100&&t.status<=199);else if(t.status>=300&&t.status<=399);else if(t.status>=400&&t.status<=499)403===t.status&&t.rawData&&t.rawData.detail&&"invalid_authn_token"===t.rawData.detail.error_code&&$.setAuthnState(null);else if(!(t.status>=500&&t.status<=599))throw new c("Unknown error",t);return t}).catch(function(t){if("AuthApiError"!==t.name)throw new d(t.name+"::"+t.message,t.xhr);throw t})}var B={httpRequest:H,get:function(t,e,a){var n={url:e=l.isAbsoluteUrl(e)?e:t.getIssuerOrigin()+e,method:"GET"};return l.extend(n,a),H(t,n)},post:function(t,e,a,n){var i={url:e=l.isAbsoluteUrl(e)?e:t.getIssuerOrigin()+e,method:"POST",args:a,saveAuthnState:!0};return l.extend(i,n),H(t,i)}},j={generateState:function(){return l.genRandomString(64)},isToken:function(t){return!(!t||!t.accessToken&&!t.idToken||!Array.isArray(t.scopes))},addListener:function(t,e,a){t.addEventListener?t.addEventListener(e,a):t.attachEvent("on"+e,a)},removeListener:function(t,e,a){t.removeEventListener?t.removeEventListener(e,a):t.detachEvent("on"+e,a)},loadFrame:function(t){var e=document.createElement("iframe");return e.style.display="none",e.src=t,document.body.appendChild(e)},loadPopup:function(t,e){var a=e.popupTitle||"External Identity Provider User Authentication",n="toolbar=no, scrollbars=yes, resizable=yes, top=100, left=500, width=600, height=600";if(l.isIE11OrLess()){var i=window.open("/",a,n);return i.location.href=t,i}return window.open(t,a,n)},getWellKnown:function(t,e){var a=e||t.options.issuer;return B.get(t,a+"/api/v1/oauth2/.well-known/oauth-authorization-server",{cacheResponse:!0})},getKey:function(t,e,a){var n=m.getHttpCache();return this.getWellKnown(t,e).then(function(e){var i=(e=e.dataJSON).jwks_uri,s=n.getStorage()[i];if(s&&Date.now()/1e3<s.expiresAt){var o=l.find(s.response.dataJSON.keys,{kid:a});if(o)return o}return n.clearStorage(i),B.get(t,i,{cacheResponse:!0}).then(function(t){var e=l.find(t.dataJSON.keys,{kid:a});if(e)return e;throw new d("The key id, "+a+", was not found in the server's keys")})})},validateClaims:function(t,e,a){var n=a.clientId,i=a.issuer;if(!e||!i||!n)throw new d("The jwt, iss, and aud arguments are all required");var s=Math.floor(Date.now()/1e3);if(e.iss!==i)throw new d("The issuer ["+e.iss+"] does not match ["+i+"]");if(e.aud!==n)throw new d("The audience ["+e.aud+"] does not match ["+n+"]");if(e.iat>e.exp)throw new d("The JWT expired before it was issued");if(s-t.options.maxClockSkew>e.exp)throw new d("The JWT expired and is no longer valid");if(e.iat>s+t.options.maxClockSkew)throw new d("The JWT was issued in the future")},getOAuthUrls:function(t,e){if(arguments.length>2)throw new d('As of version 3.0, "getOAuthUrls" takes only a single set of options');e=e||{};var a=l.removeTrailingSlash(e.authorizeUrl)||t.options.authorizeUrl,n=l.removeTrailingSlash(e.issuer)||t.options.issuer,i=l.removeTrailingSlash(e.userinfoUrl)||t.options.userinfoUrl,s=l.removeTrailingSlash(e.tokenUrl)||t.options.tokenUrl,o=l.removeTrailingSlash(e.logoutUrl)||t.options.logoutUrl,r=l.removeTrailingSlash(e.revokeUrl)||t.options.revokeUrl;return{issuer:n,authorizeUrl:a=a||n+"/api/v1/oauth2/authorize",userinfoUrl:i=i||n+"/api/v1/oauth2/userinfo",tokenUrl:s=s||n+"/api/v1/oauth2/token",revokeUrl:r=r||n+"/api/v1/oauth2/revoke",logoutUrl:o=o||n+"/api/v1/logout"}},urlParamsToObject:function(t){var e=/\+/g,a=/([^&=]+)=?([^&]*)/g,n=t;"#"===n.charAt(0)&&"/"===n.charAt(1)&&(n=n.substring(2)),"#"!==n.charAt(0)&&"?"!==n.charAt(0)||(n=n.substring(1));for(var i={},s=void 0;s=a.exec(n);){var o=s[1],r=s[2];i[o]="id_token"===o||"access_token"===o||"code"===o?r:decodeURIComponent(r.replace(e," "))}return i},hasTokensInHash:function(t){return/((id|access)_token=)/i.test(t)},hasCodeInUrl:function(t){return/([?&]+code=)/i.test(t)},isLoginRedirect:function(t){var e=t.options;return e.pkce||"code"===e.responseType||"query"===e.responseMode?"fragment"===e.responseMode?this.hasCodeInUrl(window.location.hash):this.hasCodeInUrl(window.location.search):this.hasTokensInHash(window.location.hash)}},F=a("c/Tr"),q=a.n(F),Y=43,z=128;function G(t){return("0"+t.toString(16)).substr(-2)}function K(t,e){return e=e||{},t.options.storageUtil.getPKCEStorage(e)}var V,Q={DEFAULT_CODE_CHALLENGE_METHOD:"S256",generateVerifier:function(t){var e,a,n=t||"";return n.length<Y&&(n+=(e=Y-n.length,a=new Uint8Array(Math.ceil(e/2)),crypto.getRandomValues(a),q()(a,G).join("").slice(0,e))),encodeURIComponent(n).slice(0,z)},clearMeta:function(t){K(t).clearStorage()},saveMeta:function(t,e){K(t).setStorage(e)},loadMeta:function(t){var e=K(t),a=e.getStorage();if(!a.codeVerifier&&!(a=(e=K(t,{preferLocalStorage:!0})).getStorage()).codeVerifier)throw new d("Could not load PKCE codeVerifier from storage");return a},computeChallenge:function(t){var e=(new TextEncoder).encode(t);return crypto.subtle.digest("SHA-256",e).then(function(t){var e=String.fromCharCode.apply(null,new Uint8Array(t));return l.stringToBase64Url(e)})},getToken:function(t,e,a){!function(t){if(!t.clientId)throw new d("A clientId must be specified in the GhtkAuth constructor to get a token");if(!t.redirectUri)throw new d("The redirectUri passed to /authorize must also be passed to /token");if(!t.authorizationCode)throw new d("An authorization code (returned from /authorize) must be passed to /token");if(!t.codeVerifier)throw new d('The "codeVerifier" (generated and saved by your app) must be passed to /token')}(e);var n,i,s=(n=e,i=l.removeNils({client_id:n.clientId,redirect_uri:n.redirectUri,grant_type:"authorization_code",code:n.authorizationCode,code_verifier:n.codeVerifier}),l.toQueryParams(i).slice(1));return B.httpRequest(t,{url:a.tokenUrl,method:"POST",args:s,withCredentials:!1,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}};function X(t){var e=t.split("."),a=void 0;try{a={header:JSON.parse(l.base64UrlToString(e[0])),payload:JSON.parse(l.base64UrlToString(e[1])),signature:e[2]}}catch(t){throw new d("Malformed token")}return a}function W(t,e,a){return s.a.resolve().then(function(){if(!e||!e.idToken)throw new d("Only idTokens may be verified");var n={clientId:t.options.clientId,issuer:t.options.issuer,ignoreSignature:t.options.ignoreSignature};l.extend(n,a);var i=X(e.idToken);return j.validateClaims(t,i.payload,n),e})}function J(t,e){if(t.error||t.error_description)throw new u(t.error,t.error_description);if(t.state!==e.state)throw new d("OAuth flow response state doesn't match request state")}function Z(t,e,a,n){n=n||{};var i=e.responseType;Array.isArray(i)||(i=[i]);var o=l.clone(e.scopes),r=e.clientId||t.options.clientId,u=!1!==t.options.pkce;return s.a.resolve().then(function(){return J(a,e),a.code&&u?(i=["token"],-1!==o.indexOf("openid")&&i.push("id_token"),function(t,e,a,n){var i=Q.loadMeta(t),s={clientId:e.clientId,authorizationCode:a,codeVerifier:i.codeVerifier,redirectUri:i.redirectUri};return Q.getToken(t,s,n).then(function(t){if(t.ok)return J(t,s),t.dataJSON;throw new c("Error when exchange code for token",t.dataJSON)}).finally(function(){})}(t,e,a.code,n)):a}).then(function(a){var i={},s=a.expires_in,l=a.token_type,c=a.access_token,d=a.id_token;if(c&&(i.accessToken={value:c,accessToken:c,expiresAt:Number(s)+Math.floor(Date.now()/1e3),tokenType:l,scopes:o,authorizeUrl:n.authorizeUrl,userinfoUrl:n.userinfoUrl}),d){var u=t.token.decode(d),h={value:d,idToken:d,claims:u.payload,expiresAt:u.payload.exp,scopes:o,authorizeUrl:n.authorizeUrl,issuer:n.issuer,clientId:r},p={clientId:r,issuer:n.issuer,nonce:e.nonce,accessToken:c};return void 0!==e.ignoreSignature&&(p.ignoreSignature=e.ignoreSignature),W(t,h,p).then(function(){return i.idToken=h,i})}return i}).then(function(t){if(-1!==i.indexOf("token")&&!t.accessToken)throw new d('Unable to parse OAuth flow response: response type "token" was requested but "access_token" was not returned.');return{tokens:t,state:a.state,code:a.code}})}function tt(t){var e=function(t){if(!t.clientId)throw new d("A clientId must be specified in the GhtkAuth constructor to get a token");if(l.isString(t.responseType)&&-1!==t.responseType.indexOf(" "))throw new d("Multiple OAuth responseTypes must be defined as an array");var e=l.removeNils({client_id:t.clientId,code_challenge:t.codeChallenge,code_challenge_method:t.codeChallengeMethod,redirect_uri:t.redirectUri,response_mode:t.responseMode,response_type:t.responseType,state:t.state});return["response_type"].forEach(function(t){Array.isArray(e[t])&&(e[t]=e[t].join(" "))}),e.scope=t.scopes.join(" "),e}(t);return l.toQueryParams(e)}function et(t,e){if(j.isLoginRedirect(t))return s.a.reject(new d("The app should not attempt to call getToken on callback. Authorize flow is already in process. Use parseFromUrl() to receive tokens."));e=l.clone(e)||{};var a=function(t){return{pkce:t.options.pkce,clientId:t.options.clientId,redirectUri:t.options.redirectUri||window.location.href,responseType:["token","id_token"],responseMode:t.options.responseMode,state:j.generateState(),scopes:["openid"],ignoreSignature:t.options.ignoreSignature}}(t);if(l.extend(a,e),!1===a.pkce)return s.a.resolve(a);if(!t.features.isPKCESupported()){var n="PKCE requires a modern browser with encryption support running in a secure context.";return t.features.isHTTPS()||(n+="\nThe current page is not being served with HTTPS protocol. PKCE requires secure HTTPS protocol."),t.features.hasTextEncoder()||(n+='\n"TextEncoder" is not defined. To use PKCE, you may need to include a polyfill/shim for this browser.'),s.a.reject(new d(n))}return a.codeChallengeMethod||(a.codeChallengeMethod=Q.DEFAULT_CODE_CHALLENGE_METHOD),a.responseType="code",j.getWellKnown(t,null).then(function(t){if(!t.ok)throw new c(t.dataJSON,t);if(-1===(t.dataJSON.code_challenge_methods_supported||[]).indexOf(a.codeChallengeMethod))throw new d("Invalid code_challenge_method")}).then(function(){var e=Q.generateVerifier(a.codeVerifier),n={codeVerifier:e,redirectUri:a.redirectUri};return Q.saveMeta(t,n),Q.computeChallenge(e)}).then(function(t){var e=l.clone(a)||{};return l.extend(e,a,{codeChallenge:t}),e})}function at(t,e){return arguments.length>2?s.a.reject(new d('As of version 3.0, "getWithRedirect" takes only a single set of options')):(e=l.clone(e)||{},et(t,e).then(function(a){l.debugLS("debug_oauthParams",a);var n=j.getOAuthUrls(t,e),i=n.authorizeUrl+tt(a);m.getOauthParamsStorage().setStorage({clientId:a.clientId,responseType:a.responseType,state:a.state,scopes:a.scopes,urls:n}),l.delay(100).then(function(){t.token.getWithRedirect._setLocation(i)})}))}var nt={revokeToken:function(t,e){return s.a.resolve().then(function(){if(!e||!e.accessToken)throw new d("A valid access token object is required");var a=t.options.clientId;if(!a)throw new d("A clientId must be specified in the GhtkAuth constructor to revoke a token");var n=j.getOAuthUrls(t).revokeUrl,i=e.accessToken,s=l.toQueryParams({token_type_hint:"access_token",token:i}).slice(1),o=btoa(a+":");return B.post(t,n,s,{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+o}})})},getWithRedirect:at,parseFromUrl:function(t,e){e=e||{},l.isString(e)&&(e={url:e});var a=t.options.pkce?"fragment":"query",n=e.url,i=e.responseMode||t.options.responseMode||a,o=t.token.parseFromUrl._getLocation(),r=void 0;if(!(r="query"===i?n?n.substring(n.indexOf("?")):o.search:n?n.substring(n.indexOf("#")):o.hash))return s.a.reject(new d("Unable to parse a token from the url"));try{var c=m.getOauthParamsStorage().getStorage(),u=c.urls;return s.a.resolve(j.urlParamsToObject(r)).then(function(e){return Z(t,c,e,u)})}catch(t){return s.a.reject(new d("Unable to parse the "+p.REDIRECT_OAUTH_PARAMS_COOKIE_NAME+" : "+t.message))}},decodeToken:X,renewToken:function(t,e){return j.isToken(e)?at(t,{responseType:t.options.pkce?"code":e.accessToken?"token":"id_token",scopes:e.scopes,authorizeUrl:e.authorizeUrl,userinfoUrl:e.userinfoUrl,issuer:e.issuer}):s.a.reject(new d("Renew must be passed a token with an array of scopes and an accessToken or idToken"))},getUserInfo:(V=S()(k.a.mark(function t(e,a,n){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=4;break}return t.next=3,e.tokenManager.get("accessToken");case 3:a=t.sent;case 4:if(n){t.next=8;break}return t.next=7,e.tokenManager.get("idToken");case 7:n=t.sent;case 8:if(a&&(j.isToken(a)||a.accessToken||a.userinfoUrl)){t.next=10;break}return t.abrupt("return",s.a.reject(new d("getUserInfo requires an access token object")));case 10:if(n&&(j.isToken(n)||n.idToken)){t.next=12;break}return t.abrupt("return",s.a.reject(new d("getUserInfo requires an ID token object")));case 12:return t.abrupt("return",B.httpRequest(e,{url:a.userinfoUrl,method:"GET",accessToken:a.accessToken}).then(function(t){return t.sub===n.claims.sub?t:s.a.reject(new d("getUserInfo request was rejected due to token mismatch"))}).catch(function(t){if(t.xhr&&(401===t.xhr.status||403===t.xhr.status)){var e=void 0;if(t.xhr.headers&&l.isFunction(t.xhr.headers.get)&&t.xhr.headers.get("WWW-Authenticate")?e=t.xhr.headers.get("WWW-Authenticate"):l.isFunction(t.xhr.getResponseHeader)&&(e=t.xhr.getResponseHeader("WWW-Authenticate")),e){var a=e.match(/error="(.*?)"/)||[],n=e.match(/error_description="(.*?)"/)||[],i=a[1],s=n[1];i&&s&&(t=new u(i,s))}}throw t}));case 13:case"end":return t.stop()}},t,this)})),function(t,e,a){return V.apply(this,arguments)}),verifyToken:W,handleOAuthResponse:Z,prepareOauthParams:et};function it(){this.queue=[],this.running=!1}function st(t){this.localOffset=parseInt(t||0)}l.extend(it.prototype,{push:function(){var t=this,e=Array.prototype.slice.call(arguments),a=e[0],n=e[1];return e=e.slice(2),new s.a(function(i,s){t.queue.push({method:a,thisObject:n,args:e,resolve:i,reject:s}),t.run()})},run:function(){var t=this;if(!this.running&&0!==this.queue.length){this.running=!0;var e=this.queue.shift(),a=e.method.apply(e.thisObject,e.args);l.isPromise(a)?a.then(e.resolve,e.reject).finally(function(){t.running=!1,t.run()}):(e.resolve(a),this.running=!1,this.run())}}}),l.extend(st.prototype,{now:function(){return(Date.now()+this.localOffset)/1e3}}),st.create=function(){return new st(0)};var ot={autoRenew:!1,storage:"localStorage",expireEarlySeconds:30};function rt(t,e){return e.expiresAt-t.options.expireEarlySeconds}function lt(t,e){t.emitter.emit("error",e)}function ct(t,e){clearTimeout(t.expireTimeouts[e]),delete t.expireTimeouts[e],delete t.renewPromise[e]}function dt(t,e,a,n){var i=rt(e,n),s=1e3*Math.max(i-e.clock.now(),0);ct(e,a);var o=setTimeout(function(){!function(t,e,a){t.emitter.emit("expired",e,a)}(e,a,n)},s);e.expireTimeouts[a]=o}function ut(t,e,a,n,i){var s=a.getStorage();s[n]=i,a.setStorage(s),dt(0,e,n,i)}function ht(t,e){return t.getStorage()[e]}function pt(t,e,a,n){return new s.a(function(i,s){if(e.options.autoRenew&&j.isLoginRedirect(t))return s(new d("The app should not attempt to call authorize API on callback. Authorize flow is already in process. Use parseFromUrl() to receive tokens."));var o=ht(a,n);return o&&function(t,e){return rt(t,e)<=t.clock.now()}(e,o)?i(e.options.autoRenew?ft(t,e,a,n):mt(e,a,n)):i(o)})}function mt(t,e,a){ct(t,a);var n=e.getStorage();delete n[a],e.setStorage(n)}function ft(t,e,a,n){var i=e.renewPromise[n];if(i)return i;var o=void 0;try{if(!(o=ht(a,n)))throw new d("The tokenManager has no token for the key: "+n)}catch(t){return s.a.reject(t)}return ct(e,n),e.renewPromise[n]=t.token.renew(o).then(function(t){var i=ht(a,n);if(i)return ut(0,e,a,n,t),e.emitter.emit("renewed",n,t,i),t}).catch(function(t){throw"OAuthError"!==t.name&&"AuthSdkError"!==t.name||(mt(e,a,n),t.tokenKey=n,t.accessToken=!!o.accessToken,lt(e,t)),t}).finally(function(){delete e.renewPromise[n]}),e.renewPromise[n]}function gt(t,e){!function(t){var e=t.expireTimeouts;for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&ct(t,a)}(t),e.clearStorage()}function vt(t,e){"localStorage"!==(e=l.extend({},ot,l.removeNils(e))).storage||m.browserHasLocalStorage()||(l.warn("This browser doesn't support localStorage. Switching to sessionStorage."),e.storage="sessionStorage"),"sessionStorage"!==e.storage||m.browserHasSessionStorage()||l.warn("This browser doesn't support sessionStorage.");var a=void 0;if("object"===g()(e.storage))a=e.storage;else switch(e.storage){case"localStorage":a=localStorage;break;case"sessionStorage":a=sessionStorage;break;case"memory":a=m.getInMemoryStorage();break;default:throw new d("Unrecognized storage option")}var n=h(a,e.storageKey||p.TOKEN_STORAGE_NAME),i={clock:st.create(t,e),options:e,emitter:t.emitter,expireTimeouts:{},renewPromise:{}};this.add=l.bind(ut,this,t,i,n),this.get=l.bind(pt,this,t,i,n),this.remove=l.bind(mt,this,i,n),this.clear=l.bind(gt,this,i,n),this.renew=l.bind(ft,this,t,i,n),this.on=l.bind(i.emitter.on,i.emitter),this.off=l.bind(i.emitter.off,i.emitter),function(t,e,a){try{var n=a.getStorage();for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&dt(0,e,i,n[i])}catch(t){return void lt(e,t)}}(0,i,n)}function _t(t){var e=this;L.assertValidConfig(t),this.options={clientId:t.clientId,issuer:l.removeTrailingSlash(t.issuer),authorizeUrl:l.removeTrailingSlash(t.authorizeUrl),userinfoUrl:l.removeTrailingSlash(t.userinfoUrl),tokenUrl:l.removeTrailingSlash(t.tokenUrl),revokeUrl:l.removeTrailingSlash(t.revokeUrl),logoutUrl:l.removeTrailingSlash(t.logoutUrl),pkce:!1!==t.pkce,redirectUri:t.redirectUri,postLogoutRedirectUri:t.postLogoutRedirectUri,responseMode:t.responseMode,httpRequestClient:t.httpRequestClient,storageUtil:t.storageUtil,headers:t.headers,onSessionExpired:t.onSessionExpired},this.userAgent=L.getUserAgent(t,"ghtk-auth-js/"+n),t.maxClockSkew||0===t.maxClockSkew?this.options.maxClockSkew=t.maxClockSkew:this.options.maxClockSkew=p.DEFAULT_MAX_CLOCK_SKEW,e._tokenQueue=new it,e.token={getWithRedirect:l.bind(nt.getWithRedirect,null,e),prepareOauthParams:l.bind(nt.prepareOauthParams,null,e),parseFromUrl:l.bind(nt.parseFromUrl,null,e),decode:nt.decodeToken,revoke:l.bind(nt.revokeToken,null,e),renew:l.bind(nt.renewToken,null,e),getUserInfo:l.bind(nt.getUserInfo,null,e),verify:l.bind(nt.verifyToken,null,e),isLoginRedirect:l.bind(j.isLoginRedirect,null,e)},T()(e.token).forEach(function(t){if("decode"!==t){var a=e.token[t];e.token[t]=l.bind(it.prototype.push,e._tokenQueue,a,null)}}),e.token.getWithRedirect._setLocation=function(t){window.location=t},e.token.parseFromUrl._getHistory=function(){return window.history},e.token.parseFromUrl._getLocation=function(){return window.location},e.token.parseFromUrl._getDocument=function(){return window.document},e.fingerprint._getUserAgent=function(){return navigator.userAgent};var a=/windows phone|iemobile|wpdesktop/i;e.features.isFingerprintSupported=function(){var t=e.fingerprint._getUserAgent();return t&&!a.test(t)},e.emitter=new I.a,e.tokenManager=new vt(e,t.tokenManager),e.tokenManager.on("error",this._onTokenManagerError,this)}var bt,yt,Ct,wt,kt,xt,St,Mt,Tt,Dt,It,Pt=_t.prototype;function Et(t){if(!(this instanceof Et))return new Et(t);t&&(t.storageUtil=m,t.httpRequestClient=C),l.bind(_t,this)(t)}Pt._onTokenManagerError=function(t){"login_required"===t.errorCode&&t.accessToken&&(this.options.onSessionExpired?this.options.onSessionExpired():console.error("Session has expired or was closed outside the application."))},Pt.features={},Pt.features.isTokenVerifySupported=function(){return"undefined"!=typeof crypto&&crypto.subtle&&"undefined"!=typeof Uint8Array},Pt.features.hasTextEncoder=function(){return"undefined"!=typeof TextEncoder},Pt.features.isPKCESupported=function(){return Pt.features.isTokenVerifySupported()&&Pt.features.hasTextEncoder()},Pt.features.isHTTPS=function(){return"https:"===window.location.protocol},Pt.features.isLocalhost=function(){return"localhost"===window.location.hostname},Pt.getIssuerOrigin=function(){return this.options.issuer},Pt.signIn=function(){var t=S()(k.a.mark(function t(e){var a,n,i,s,o,r;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=function(t){return B.post(a,"/api/v1/authn",e,t)},a=this,e=l.clone(e||{}),i={},t.next=6,a.fingerprint();case 6:return(s=t.sent)&&(i={headers:{"X-Device-Fingerprint":s}}),t.prev=8,t.next=11,n(i);case 11:return o=t.sent,r=this.getTransactionStateFromSignInResponse(o),this.storeAuthnData(o),t.abrupt("return",r);case 17:return t.prev=17,t.t0=t.catch(8),t.abrupt("return",p.STATE.UNKNOWN_ERROR_STATE);case 20:case"end":return t.stop()}},t,this,[[8,17]])}));return function(e){return t.apply(this,arguments)}}(),Pt.storeAuthnData=function(t){var e=t.dataJSON;e&&(e.ss_expires_at&&$.setSession({signedIn:!0,expiresAt:e.ss_expires_at}),$.setAccount({id:e.account_id,info:e.account_info}),$.setAccountFactors({factors:e.account_factors}))},Pt.getTransactionStateFromSignInResponse=function(t){var e=p.STATE.UNKNOWN;if(t.ok){var a="";switch(t.rawData.data&&t.rawData.data.state&&t.rawData.data.state.name&&(a=t.rawData.data.state.name),a){case"success":e=p.STATE.AUTHN.SUCCESS;break;case"mfa_required":e=p.STATE.AUTHN.MFA_REQUIRED;break;case"mfa_challenge":e=p.STATE.AUTHN.MFA_CHALLENGE;break;case"mfa_enroll":e=p.STATE.AUTHN.MFA_ENROLL;break;case"mfa_enroll_active":e=p.STATE.AUTHN.MFA_ENROLL_ACTIVE;break;case"recovery":e=p.STATE.AUTHN.RECOVERY;break;case"recovery_challenge":e=p.STATE.AUTHN.RECOVERY_CHALLENGE;break;case"password_reset":e=p.STATE.AUTHN.PASSWORD_RESET;break;case"password_expired":e=p.STATE.AUTHN.PASSWORD_EXPIRED;break;case"unauthenticated":e=p.STATE.AUTHN.UNAUTHENTICATED;break;default:e=p.STATE.UNKNOWN_AUTHN_STATE}}else if(t.status>=400&&t.status<=499&&t.headers["captcha-require"]&&"1"===t.headers["captcha-require"]&&(e=p.STATE.REQUIRE_CAPTCHA),t.status>=400){var n="";switch(t.rawData.detail&&t.rawData.detail.error_code&&(n=t.rawData.detail.error_code),e=p.STATE.UNKNOWN_ERROR_STATE,t.status){case 400:"invalid_api_condition"===n?e=p.STATE.ERROR.CLIENT.INVALID_API_CONDITION:"illegal_request_param"===n?e=p.STATE.ERROR.CLIENT.ILLEGAL_REQUEST_PARAM:"illegal_request"===n?e=p.STATE.ERROR.CLIENT.ILLEGAL_REQUEST:"invalid_captcha"===n?e=p.STATE.ERROR.CLIENT.INVALID_CAPTCHA:"resource_duplicated"===n?e=p.STATE.ERROR.CLIENT.RESOURCE_DUPLICATED:"exceed_secondary_contact_limit"===n&&(e=p.STATE.ERROR.CLIENT.EXCEED_SECONDARY_CONTACT_LIMIT);break;case 401:"authn_fail"===n?e=p.STATE.ERROR.CLIENT.AUTHN_FAIL:"password_expired"===n?e=p.STATE.ERROR.CLIENT.PASSWORD_EXPIRED:"login_required"===n?e=p.STATE.ERROR.CLIENT.LOGIN_REQUIRED:"consent_required"===n?e=p.STATE.ERROR.CLIENT.CONSENT_REQUIRED:"invalid_token"===n?e=p.STATE.ERROR.CLIENT.INVALID_TOKEN:"invalid_authz_code"===n?e=p.STATE.ERROR.CLIENT.INVALID_AUTHZ_CODE:"invalid_pkce_code"===n?e=p.STATE.ERROR.CLIENT.INVALID_PKCE_CODE:"invalid_recovery_token"===n?e=p.STATE.ERROR.CLIENT.INVALID_RECOVERY_TOKEN:"invalid_refresh_token"===n?e=p.STATE.ERROR.CLIENT.INVALID_REFRESH_TOKEN:"invalid_temp_access_code"===n&&(e=p.STATE.ERROR.CLIENT.INVALID_TEMP_ACCESS_CODE);break;case 403:"permission_denied"===n?e=p.STATE.ERROR.CLIENT.PERMISSION_DENIED:"exceed_session_limit"===n?e=p.STATE.ERROR.CLIENT.EXCEED_SESSION_LIMIT:"password_policy_violation"===n?e=p.STATE.ERROR.CLIENT.PASSWORD_POLICY_VIOLATION:"security_policy_violation"===n?e=p.STATE.ERROR.CLIENT.SECURITY_POLICY_VIOLATION:"invalid_session"===n?e=p.STATE.ERROR.CLIENT.INVALID_SESSION:"invalid_authn_token"===n?e=p.STATE.ERROR.CLIENT.INVALID_AUTHN_TOKEN:"illegal_authn_state"===n?e=p.STATE.ERROR.CLIENT.ILLEGAL_AUTHN_STATE:"invalid_passcode"===n?e=p.STATE.ERROR.CLIENT.INVALID_PASSCODE:"invalid_client"===n?e=p.STATE.ERROR.CLIENT.INVALID_CLIENT:"exceed_direct_token_limit"===n?e=p.STATE.ERROR.CLIENT.EXCEED_DIRECT_TOKEN_LIMIT:"exceed_temp_access_limit"===n&&(e=p.STATE.ERROR.CLIENT.EXCEED_TEMP_ACCESS_LIMIT);break;case 404:"resource_not_found"===n&&(e=p.STATE.ERROR.CLIENT.RESOURCE_NOT_FOUND);break;case 429:"email_too_many_request"===n?e=p.STATE.ERROR.CLIENT.EMAIL_TOO_MANY_REQUEST:"sms_too_many_request"===n?e=p.STATE.ERROR.CLIENT.SMS_TOO_MANY_REQUEST:"too_many_request"===n&&(e=p.STATE.ERROR.CLIENT.TOO_MANY_REQUEST);break;case 500:"internal_error"===n?e=p.STATE.ERROR.SERVER.INTERNAL_ERROR:"notify_sms_fail"===n?e=p.STATE.ERROR.SERVER.NOTIFY_SMS_FAIL:"notify_email_fail"===n&&(e=p.STATE.ERROR.SERVER.NOTIFY_EMAIL_FAIL);break;case 502:e=p.STATE.ERROR.SERVER.BAD_GATEWAY;break;case 503:e=p.STATE.ERROR.SERVER.SERVICE_UNAVAILABLE;break;case 504:e=p.STATE.ERROR.SERVER.GATEWAY_TIMEOUT}}return e},Pt.closeSession=function(t){return this.tokenManager.clear(),B.get(this,"/api/v1/logout",{accessToken:t}).catch(function(t){if("AuthApiError"!==t.name)throw t})},Pt.revokeAccessToken=function(){var t=S()(k.a.mark(function t(e){var a;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=this,e){t.next=5;break}return t.next=4,a.tokenManager.get("accessToken");case 4:e=t.sent;case 5:if(e){t.next=7;break}return t.abrupt("return",s.a.resolve());case 7:return t.abrupt("return",a.token.revoke(e));case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),Pt.signOut=(bt=S()(k.a.mark(function t(e){var a,n,i,s,o;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=l.extend({},e),a=window.location.origin,n=e.postLogoutRedirectUri||this.options.postLogoutRedirectUri||a,i=e.accessToken,s=!1!==e.revokeAccessToken,o=this,!s||void 0!==i){t.next=10;break}return t.next=9,o.tokenManager.get("accessToken");case 9:i=t.sent;case 10:if(o.tokenManager.clear(),$.setAccountFactors({}),$.setAccount({}),$.setSession({}),$.setAuthnState(null),!s||!i){t.next=18;break}return t.next=18,o.revokeAccessToken(i);case 18:if(!i||!i.isTempAccessLogin){t.next=22;break}window.location="/",t.next=23;break;case 22:return t.abrupt("return",o.closeSession(i).then(function(){localStorage.clear(),n===a?window.location.reload():window.location.assign(n)}));case 23:case"end":return t.stop()}},t,this)})),function(t){return bt.apply(this,arguments)}),Pt.otpChallenge=(yt=S()(k.a.mark(function t(e,a){var n,i;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.post(this,"/api/v1/authn/factors/"+e+"/challenge",a);case 3:return n=t.sent,i=this.getTransactionStateFromSignInResponse(n),this.storeAuthnData(n),t.abrupt("return",i);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",p.STATE.UNKNOWN_ERROR_STATE);case 12:case"end":return t.stop()}},t,this,[[0,9]])})),function(t,e){return yt.apply(this,arguments)}),Pt.otpVerify=(Ct=S()(k.a.mark(function t(e,a){var n,i;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.post(this,"/api/v1/authn/factors/"+e+"/verify",a);case 3:return n=t.sent,i=this.getTransactionStateFromSignInResponse(n),this.storeAuthnData(n),t.abrupt("return",i);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",p.STATE.UNKNOWN_ERROR_STATE);case 12:case"end":return t.stop()}},t,this,[[0,9]])})),function(t,e){return Ct.apply(this,arguments)}),Pt.forgotPassword=(wt=S()(k.a.mark(function t(e){var a;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.post(this,"/api/v1/authn/recovery/password",e);case 3:return(a=t.sent).ok&&$.setAuthnState(a.dataJSON.state),t.abrupt("return",this.getTransactionStateFromSignInResponse(a));case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",p.STATE.UNKNOWN_ERROR_STATE);case 11:case"end":return t.stop()}},t,this,[[0,8]])})),function(t){return wt.apply(this,arguments)}),Pt.verifyRecoveryToken=(kt=S()(k.a.mark(function t(e,a){var n,i;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.post(this,"/api/v1/authn/recovery/factors/"+e+"/verify",a);case 3:return n=t.sent,i=this.getTransactionStateFromSignInResponse(n),n.ok&&($.setAuthnState(n.dataJSON.state),i===p.STATE.AUTHN.RECOVERY&&$.setRecoveryQuestion(n.dataJSON.recovery_question)),t.abrupt("return",i);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",p.STATE.UNKNOWN_ERROR_STATE);case 12:case"end":return t.stop()}},t,this,[[0,9]])})),function(t,e){return kt.apply(this,arguments)}),Pt.verifyRecoveryQuestion=(xt=S()(k.a.mark(function t(e){var a;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.post(this,"/api/v1/authn/recovery/answer",e);case 3:return(a=t.sent).ok&&$.setAuthnState(a.dataJSON.state),t.abrupt("return",this.getTransactionStateFromSignInResponse(a));case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",p.STATE.UNKNOWN_ERROR_STATE);case 11:case"end":return t.stop()}},t,this,[[0,8]])})),function(t){return xt.apply(this,arguments)}),Pt.resetPassword=(St=S()(k.a.mark(function t(e){var a;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.post(this,"/api/v1/authn/credentials/reset_password",e);case 3:return(a=t.sent).ok&&$.setAuthnState(a.dataJSON.state),t.abrupt("return",this.getTransactionStateFromSignInResponse(a));case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",p.STATE.UNKNOWN_ERROR_STATE);case 11:case"end":return t.stop()}},t,this,[[0,8]])})),function(t){return St.apply(this,arguments)}),Pt.changePassword=(Mt=S()(k.a.mark(function t(e){var a,n;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.post(this,"/api/v1/authn/credentials/change_password",e);case 3:return a=t.sent,n=this.getTransactionStateFromSignInResponse(a),this.storeAuthnData(a),t.abrupt("return",n);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",p.STATE.UNKNOWN_ERROR_STATE);case 12:case"end":return t.stop()}},t,this,[[0,9]])})),function(t){return Mt.apply(this,arguments)}),Pt.authWithTempAccess=(Tt=S()(k.a.mark(function t(e,a,n,i){var s,o;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(s=new URLSearchParams).set("short_code",e),s.set("code_challenge",a),s.set("code_challenge_method",n),s.set("state",i),t.next=7,B.get(this,"/api/v1/oauth2/temp_access?"+s.toString());case 7:return o=t.sent,t.abrupt("return",o.dataJSON.redirect_uri);case 9:case"end":return t.stop()}},t,this)})),function(t,e,a,n){return Tt.apply(this,arguments)}),Pt.getTempAccessInfo=(Dt=S()(k.a.mark(function t(e){var a;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.get(this,"/api/v1/oauth2/temp_access_info/"+e);case 2:return a=t.sent,t.abrupt("return",a.dataJSON.temp_access_redirect_uri);case 4:case"end":return t.stop()}},t,this)})),function(t){return Dt.apply(this,arguments)}),Pt.getLoginSettings=S()(k.a.mark(function t(){var e;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.get(this,"/api/v1/authn/login_setting");case 2:return e=t.sent,t.abrupt("return",e.dataJSON);case 4:case"end":return t.stop()}},t,this)})),Pt.introspectAccessToken=(It=S()(k.a.mark(function t(e,a,n){var i;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.post(this,"/api/v1/oauth2/introspect",{token:e,token_type_hint:a},{cacheResponse:!0,cacheResponseDuration:120,headers:{Authorization:"Basic "+btoa(n)}});case 2:return!0!==(i=t.sent).dataJSON.active&&this.options.storageUtil.getHttpCache().clearStorage(this.getIssuerOrigin()+"/api/v1/oauth2/introspect"),t.abrupt("return",i);case 5:case"end":return t.stop()}},t,this)})),function(t,e,a){return It.apply(this,arguments)}),Pt.fingerprint=S()(k.a.mark(function t(){var e=this;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.features.isFingerprintSupported()){t.next=3;break}return t.abrupt("return",s.a.reject(new d("Fingerprinting is not supported on this device")));case 3:return t.abrupt("return",new s.a(function(t,a){var n,i=(n=S()(k.a.mark(function t(){var e,n,i;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={excludes:{plugins:!0,localStorage:!0,adBlock:!0,screenResolution:!0,availableScreenResolution:!0,enumerateDevices:!0,pixelRatio:!0,doNotTrack:!0},preprocessor:function(t,e){if("userAgent"===t){var a=new E(e);return a.getOS().name+" :: "+a.getBrowser().name+" :: "+a.getEngine().name}return e}},t.prev=1,t.next=4,P.getPromise(e);case 4:return n=t.sent,i=n.map(function(t){return t.value}),t.abrupt("return",String(P.x64hash128(i.join(""),31)));case 9:t.prev=9,t.t0=t.catch(1),a(t.t0);case 12:case"end":return t.stop()}},t,this,[[1,9]])})),function(){return n.apply(this,arguments)});window.requestIdleCallback?requestIdleCallback(S()(k.a.mark(function a(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,i();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}},a,e)}))):setTimeout(S()(k.a.mark(function a(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,i();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}},a,e)})),500)}));case 4:case"end":return t.stop()}},t,this)})),Et.prototype=_t.prototype,Et.prototype.constructor=Et,Et.features=_t.prototype.features;var Lt=new(function(){function t(){O()(this,t),this.onTokenInvalidFn=function(){m.getHttpCache().clearStorage(),window.location.reload()}}return R()(t,[{key:"onTokenInvalid",value:function(t){this.onTokenInvalidFn=t}},{key:"catchResponse",value:function(t){if(401===(t.status||t.response.status)&&this.onTokenInvalidFn(t),t instanceof Error)throw t;return t}}]),t}()),At=a("Dd8w"),Ot=a.n(At),Nt=Object.prototype.toString;function Rt(t,e,a,n){if(a="array"===a?"object":a,t&&g()(t[e])!==a)throw new Error(n)}function Ut(t,e,a){if((void 0===t?"undefined":g()(t))!==e)throw new Error(a)}function $t(t,e,a){if(-1===e.indexOf(t))throw new Error(a)}var Ht={check:function(t,e,a){if(e.optional&&!t||Ut(t,e.type,e.message),"object"===e.type&&a)for(var n=T()(a),i=0;i<n.length;i++){var s=n[i];a[s].optional&&!t[s]||a[s].condition&&!a[s].condition(t)||(Rt(t,s,a[s].type,a[s].message),a[s].values&&$t(t[s],a[s].values,a[s].value_message))}},attribute:Rt,variable:Ut,value:$t,isArray:function(t){return this.supportsIsArray()?Array.isArray(t):"[object Array]"===Nt.call(t)},supportsIsArray:function(){return null!=Array.isArray}},Bt=a("Ri6o"),jt=a.n(Bt),Ft=function(){function t(e){O()(this,t),Ht.check(e,{type:"object",message:"Invalid config",optional:!1},{clientId:{required:!0,type:"string",message:"clientId option is required"}}),this.config=e,this.ghtkAuth=new Et(this.config)}return R()(t,[{key:"getTokenHeader",value:function(){return JSON.parse(atob(this.accessToken.split(".")[0]))}},{key:"getKid",value:function(){return this.getTokenHeader().kid}},{key:"getAlgorithm",value:function(){return this.getTokenHeader().alg}},{key:"getPublicKeyPair",value:function(){var t=S()(k.a.mark(function t(){var e;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.getKey(this.ghtkAuth,null,this.getKid());case 2:return e=t.sent,t.abrupt("return",jt.a.KEYUTIL.getKey(e));case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"setAccessToken",value:function(t){return this.accessToken=t,this}},{key:"isValid",value:function(){var t=S()(k.a.mark(function t(){var e,a;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.getAlgorithm()&&this.getKid()){t.next=2;break}return t.abrupt("return",!1);case 2:return!0,t.next=5,this.getPublicKeyPair();case 5:if(e=t.sent,!jt.a.KJUR.jws.JWS.verifyJWT(this.accessToken,e,{alg:[this.getAlgorithm()]})&&!$.isOnOauthCallbackJustNow()){t.next=20;break}return t.prev=8,t.next=11,this.ghtkAuth.introspectAccessToken(this.accessToken,"access_token",this.config.clientId+":");case 11:return a=t.sent,t.abrupt("return",!0===a.dataJSON.active);case 15:if(t.prev=15,t.t0=t.catch(8),!t.t0.xhr||401!==t.t0.xhr.status){t.next=19;break}return t.abrupt("return",!1);case 19:throw new Error(t.t0);case 20:return t.abrupt("return",!1);case 21:case"end":return t.stop()}},t,this,[[8,15]])}));return function(){return t.apply(this,arguments)}}()}]),t}(),qt=function(){function t(e){if(O()(this,t),this.config=Ot()({transitionTimeout:10},e),!this.config.clientId)throw new Error("Missing client id");this.ghtkAuth=new Et(this.config),this.setIsAuthenticatedChecker(this.defaultAuthenticatedChecker),this.tokenChecker=new Ft(this.config)}return R()(t,[{key:"setIsAuthenticatedChecker",value:function(t){return this.isAuthenticatedChecker=t,this}},{key:"defaultAuthenticatedChecker",value:function(){var t=S()(k.a.mark(function t(){var e,a;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=!1,t.next=3,this.ghtkAuth.tokenManager.get("accessToken");case 3:if(!((a=t.sent)&&a.accessToken&&a.accessToken.length)){t.next=8;break}return t.next=7,this.tokenChecker.setAccessToken(a.accessToken).isValid();case 7:e=t.sent;case 8:return t.abrupt("return",e);case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"isAuthenticated",value:function(){var t=S()(k.a.mark(function t(){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isAuthenticatedChecker();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"buildAuthRedirectParams",value:function(t){var e=t||{},a=e.scopes;!a&&e.scope&&(a=Array.isArray(e.scope)?e.scope:e.scope.split(/\s+/));var n=e.responseType||e.response_type;return"string"==typeof n&&n.indexOf(" ")>=0&&(n=n.split(/\s+/)),Ot()({clientId:e.clientId||e.client_id,redirectUri:e.redirectUri||e.redirect_uri,responseType:n,scopes:a},e)}},{key:"run",value:function(){var t=S()(k.a.mark(function t(e,a){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isAuthenticated();case 2:if(t.sent){t.next=5;break}return zt(!0)||Yt(e||window.location.href.replace(window.location.origin,"")),t.abrupt("return",this.ghtkAuth.token.getWithRedirect(this.buildAuthRedirectParams(this.config)));case 5:setTimeout(a,this.config.transitionTimeout);case 6:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}()}]),t}();function Yt(t){t?m.getLocalStorage().setItem("referrerPath",t):m.getLocalStorage().removeItem("referrerPath")}function zt(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=m.getLocalStorage().getItem("referrerPath")||"";return t||m.getLocalStorage().removeItem("referrerPath"),e}var Gt=function(t){return new qt(t)},Kt=function(){function t(e){O()(this,t),this.config=e,this.ghtkAuth=new Et(this.config)}return R()(t,[{key:"handle",value:function(){var t=S()(k.a.mark(function t(e){var a,n,i,s;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw new Error("Missing short code");case 2:return t.next=4,this.ghtkAuth.token.prepareOauthParams(this.config);case 4:return a=t.sent,m.getOauthParamsStorage().setStorage({clientId:a.clientId,responseType:a.responseType,state:a.state,scopes:a.scopes,urls:j.getOAuthUrls(this.ghtkAuth,this.config),isTempAccessLogin:!0}),n=a.codeChallenge,i=a.codeChallengeMethod,s=a.state,t.next=11,this.ghtkAuth.authWithTempAccess(e,n,i,s);case 11:window.location=t.sent;case 12:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),t}(),Vt=function(t){return new Kt(t)},Qt=function(){function t(e){O()(this,t),this.config=e,Ht.check(e,{type:"object",message:"input config is not valid"},{authnUrl:{required:!0,type:"string",message:"authnUrl option is required"}}),this.ghtkAuth=new Et(this.config)}return R()(t,[{key:"getRefererPath",value:function(){return zt()}},{key:"getAuthnUrl",value:function(){return this.config.authnUrl||""}},{key:"handle",value:function(){var t=S()(k.a.mark(function t(){var e,a,n,i;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.ghtkAuth.token.parseFromUrl();case 3:return(e=t.sent).tokens.idToken&&this.ghtkAuth.tokenManager.add("idToken",e.tokens.idToken),e.tokens.accessToken&&(a=m.getOauthParamsStorage().getStorage(),n=e.tokens.accessToken,this.ghtkAuth.tokenManager.add("accessToken",{accessToken:n.accessToken,expiresAt:n.expiresAt,tokenType:n.tokenType,isTempAccessLogin:a.isTempAccessLogin})),t.next=8,l.delay(1500);case 8:return $.setOnOauthCallbackJustNow(),t.abrupt("return",!0);case 12:if(t.prev=12,t.t0=t.catch(0),"OAuthError"!==t.t0.name||"invalid_session"!==t.t0.errorCode){t.next=22;break}if(!($.getRedirectionCounter()>=1)){t.next=18;break}return window.location=this.getAuthnUrl()+"/sign-out",t.abrupt("return",!1);case 18:return $.increaseRedirectionCounter(),i=encodeURI(""+window.location.origin+this.getRefererPath()),this.getAuthnUrl().indexOf("?")>=0?window.location=this.getAuthnUrl()+"&continue="+i:window.location=this.getAuthnUrl()+"?continue="+i,t.abrupt("return",!1);case 22:throw t.t0;case 23:case"end":return t.stop()}},t,this,[[0,12]])}));return function(){return t.apply(this,arguments)}}()}]),t}(),Xt=function(t){return new Qt(t)},Wt=a("Zx67"),Jt=a.n(Wt),Zt=a("zwoO"),te=a.n(Zt),ee=a("Pf15"),ae=a.n(ee),ne=function(){function t(){O()(this,t)}return R()(t,[{key:"setConfig",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];throw new Error("Not implement yet")}},{key:"render",value:function(t){throw new Error("Not implement yet")}},{key:"getRequestData",value:function(){throw new Error("Not implement yet")}}]),t}(),ie={serviceUrl:"",answerLabel:"Mã captcha",answerPlaceholder:"Nhập mã captcha đang hiện",showLabel:!1},se=function(t){function e(){return O()(this,e),te()(this,(e.__proto__||Jt()(e)).apply(this,arguments))}return ae()(e,t),R()(e,[{key:"setConfig",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie;this.config=Ot()({},ie,t),Ht.check(this.config,{type:"object",message:"config is not valid"},{serviceUrl:{type:"string",required:!0,message:"Invalid serviceUrl"},answerLabel:{type:"string",message:"Invalid answerLabel"},answerPlaceholder:{type:"string",message:"Invalid answerPlaceholder"},showLabel:{type:"boolean",message:"Invalid showLabel"}}),this.init()}},{key:"init",value:function(){this.captcha={},this.answer=""}},{key:"reload",value:function(){var t=S()(k.a.mark(function t(){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.init(),t.next=3,this.render(this.placeElement);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=S()(k.a.mark(function t(e){var a,n,i,s,o=this;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw Error("Invalid place element");case 2:return this.placeElement=e,t.next=5,this.generateCaptcha();case 5:this.captcha=t.sent,a=this.config.answerLabel||ie.answerLabel,n=this.config.answerPlaceholder||ie.answerPlaceholder,i='<label for="captcha-answer">'+a+"</label>",e.innerHTML='\n      <div id="custom-captcha">\n        '+(this.config.showLabel?i:"")+'\n        <div class="captcha-image-wrapper" title="Reload" style="cursor: pointer;text-align: center;background: #efefef">\n            <img src="'+this.captcha.data+'" class="captcha-image" style="max-width: 100%"/>\n        </div>\n        <div class="captcha-answer-wrapper">\n            <input \n             name="captcha-answer"\n             class="captcha-answer form-control"\n             placeholder="'+n+'" \n             id="captcha-answer"\n            />\n        </div>\n      </div>\n    ',e.getElementsByClassName("captcha-answer").item(0).addEventListener("change",function(t){var e=t.target;o.answer=e.value}),e.getElementsByClassName("captcha-image-wrapper").item(0).addEventListener("click",this.reload.bind(this)),clearTimeout(this.timeoutId),s=324e5,this.timeoutId=setTimeout(this.reload.bind(this),s);case 15:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getRequestData",value:function(){return{answer:this.answer||"",id:this.captcha.id}}},{key:"generateCaptcha",value:function(){var t=S()(k.a.mark(function t(){var e;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.a.get(this.config.serviceUrl+"/api/v1/custom-captcha/generate");case 2:return e=t.sent,t.abrupt("return",e.data.data);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),e}(ne),oe={sitekey:""},re=function(t){function e(){return O()(this,e),te()(this,(e.__proto__||Jt()(e)).apply(this,arguments))}return ae()(e,t),R()(e,[{key:"setConfig",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe;this.config=Ot()({},oe,t),Ht.check(this.config,{type:"object",message:"Config is not valid"},{sitekey:{type:"string",required:!0,message:"Invalid sitekey"}})}},{key:"render",value:function(){var t=S()(k.a.mark(function t(e){var a;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===this.widgetId){t.next=3;break}return window.grecaptcha.reset(this.widgetId),t.abrupt("return");case 3:return e.classList.add("recaptcha-container"),t.next=6,this.injectRecaptchaScript();case 6:this.widgetId=window.grecaptcha.render(e,this.config),document.getElementById("style-recaptcha-responsive")||((a=document.createElement("style")).id="style-recaptcha-responsive",a.innerHTML="@media screen and (max-width: 429px) {\n        .recaptcha-container {\n          transform:scale(0.70);\n          -webkit-transform:scale(0.70);\n          transform-origin:0 0;\n          -webkit-transform-origin:0 0;\n        }\n      }",this.getHeadElement().appendChild(a));case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getRequestData",value:function(){return void 0!==this.widgetId?{g_recaptcha_response:window.grecaptcha.getResponse(this.widgetId)}:{}}},{key:"getHeadElement",value:function(){return document.getElementsByTagName("head").item(0)}},{key:"injectRecaptchaScript",value:function(){var t=this;if("object"!==g()(window.grecaptcha)){var e=document.createElement("script");return e.async=!0,e.defer=!0,e.type="text/javascript",e.src="https://www.google.com/recaptcha/api.js?render=explicit",e.id="gmjs-recaptcha",new s.a(function(a,n){var i=void 0,s=setTimeout(function(){clearInterval(i),n("Load google recaptcha timeout")},2e4);e.onload=function(){clearInterval(i),i=setInterval(function(){"function"==typeof window.grecaptcha.render&&(clearInterval(i),clearTimeout(s),a(!0))},200)},t.getHeadElement().appendChild(e)})}}}]),e}(ne),le=function(){function t(){O()(this,t),this.CaptchaTypeCustom="custom",this.CaptchaTypeReCaptcha="recaptcha"}return R()(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=null;switch(t){case this.CaptchaTypeCustom:a=new se;break;case this.CaptchaTypeReCaptcha:a=new re;break;default:throw new Error("Captcha type not supported")}return a.setConfig(e),a}}]),t}();a.d(e,!1,function(){return Lt}),a.d(e,!1,function(){return $}),a.d(e,"a",function(){return Gt}),a.d(e,"c",function(){return Xt}),a.d(e,!1,function(){return Vt}),a.d(e,"b",function(){return Et}),a.d(e,!1,function(){return p}),a.d(e,!1,function(){return le}),a.d(e,!1,function(){return U})},RAk5:function(t,e){},RFey:function(t,e){},RP6o:function(t,e,a){"use strict";var n={name:"Progress",props:{processing:{type:Array,default:function(t){return[]}},title:{type:String,default:""},customClass:{type:String,default:""}}},i=a("XyMi");var s=function(t){a("jMTq")},o=Object(i.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("p",{class:t.title},[a("b",[t._v("Tiến độ đề xuất")])]),t._v(" "),a("ul",{staticClass:"ant-timeline"},t._l(t.processing,function(e,n){return a("li",{key:n,staticClass:"ant-timeline-item",class:t.customClass},[n<t.processing.length-1?a("div",{staticClass:"ant-timeline-item-tail"}):t._e(),t._v(" "),1===e.active?a("div",{staticClass:"ant-timeline-item-head-active ant-timeline-item-head-blue"},[a("div",{staticClass:"checkmark"})]):a("div",{staticClass:"ant-timeline-item-head"},[a("div",{staticClass:"checkmark"})]),t._v(" "),a("div",{staticClass:"ant-timeline-item-content"},[a("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.status_name))])])])}),0)])},[],!1,s,"data-v-b2f333ea",null);e.a=o.exports},RaU2:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAOCAYAAAD0f5bSAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABsSURBVHgBpZKJDYAgDEV/nYQRGMUR3Fg3wA0coZakicRAodCEK/zX9CJm3gFcRHSjY6KNcoR8eXTFHqC6s3w0warGAk2ntc+RKP6iYzTfEuQWsGHV3OG5C+Eu+VRzZUvOMUrQhO0+fGDIA/4CTc4wfMnAR6AAAAAASUVORK5CYII="},Rw57:function(t,e){},Rwp6:function(t,e,a){"use strict";!function(){if("undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style"),a=" *[data-v-5928e1c7] { -webkit-box-sizing: border-box; box-sizing: border-box; } .fullscreen-v-img[data-v-5928e1c7] { z-index: 9999; height: 100%; width: 100%; position: fixed; top: 0; left: 0; overflow: hidden; background-color: rgba(0, 0, 0, 0.7); -ms-touch-action: none; touch-action: none; } .content-v-img img[data-v-5928e1c7] { width: auto; height: auto; max-width: 100%; max-height: 100%; position: absolute; top: 0; left: 0; right: 0; bottom: 0; margin: auto; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; } .header-v-img[data-v-5928e1c7], .footer-v-img[data-v-5928e1c7] { position: absolute; width: 100%; background-color: rgba(0, 0, 0, 0.3); height: 50px; z-index: 9999; display: flex; align-items: center; } .header-v-img[data-v-5928e1c7] { justify-content: space-between; } .footer-v-img[data-v-5928e1c7] { bottom: 0; justify-content: center; height: 70px; /* scrolling thumbnails on mobile */ overflow-x: auto; } .footer-v-img img[data-v-5928e1c7] { width: 60px; height: 60px; cursor: pointer; -webkit-transition: transform 0.2s ease-out; transition: transform 0.2s ease-out; object-fit: cover; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; } .footer-v-img img.is-selected[data-v-5928e1c7] { transform: scale(1.1); } .footer-v-img img[data-v-5928e1c7]:not(:last-child) { margin-right: 7px; } .title-v-img[data-v-5928e1c7] { font-family: 'Avenir', Helvetica, Arial, sans-serif; font-size: 18px; font-weight: 400; color: white; text-align: center; max-height: 100%; overflow: auto; } .count-v-img[data-v-5928e1c7], .buttons-v-img[data-v-5928e1c7] { width: 80px; font-family: 'Avenir', Helvetica, Arial, sans-serif; } .count-v-img[data-v-5928e1c7] { font-size: 15px; color: white; margin-left: 10px; } .buttons-v-img[data-v-5928e1c7] { margin-right: 10px; text-align: right; } .buttons-v-img span path[data-v-5928e1c7] { fill: #e5e6eb; -webkit-transition: fill 0.4s ease-in-out; transition: fill 0.4s ease-in-out; } .buttons-v-img span[data-v-5928e1c7] { cursor: pointer; color: #e5e6eb; font-size: 30px; -webkit-transition: color 0.4s ease-in-out; transition: color 0.4s ease-in-out; text-decoration: none; text-align: center; } .buttons-v-img span[data-v-5928e1c7]:not(:last-child) { margin-right: 8px; } .buttons-v-img span svg[data-v-5928e1c7] { height: 20px; width: 15px; } .buttons-v-img span:hover svg path[data-v-5928e1c7] { fill: white; } .buttons-v-img span[data-v-5928e1c7]:hover { color: white; } .prev-v-img svg[data-v-5928e1c7], .next-v-img svg[data-v-5928e1c7] { margin: 5px auto; } .prev-v-img[data-v-5928e1c7], .next-v-img[data-v-5928e1c7] { color: white; width: 35px; height: 35px; position: absolute; top: 50%; margin-top: -12.5px; font-size: 15px; font-family: 'Avenir', Helvetica, Arial, sans-serif; text-align: center; background-color: rgba(0, 0, 0, 0.3); z-index: 1000; opacity: 0.3; -webkit-transition: opacity 0.3s ease-in-out; transition: opacity 0.3s ease-in-out; cursor: pointer; } .prev-v-img[data-v-5928e1c7]:hover, .next-v-img[data-v-5928e1c7]:hover { opacity: 1; } .prev-v-img[data-v-5928e1c7] { left: 10px; } .next-v-img[data-v-5928e1c7] { right: 10px; } .v-img-fade-enter[data-v-5928e1c7], .v-img-fade-leave-to[data-v-5928e1c7] { opacity: 0; } .v-img-fade-enter-active[data-v-5928e1c7], .v-img-fade-leave-active[data-v-5928e1c7] { -webkit-transition: opacity 0.3s ease-in-out; transition: opacity 0.3s ease-in-out; } ";e.type="text/css",e.styleSheet?e.styleSheet.cssText=a:e.appendChild(document.createTextNode(a)),t.appendChild(e)}}();var n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{appear:"",name:"v-img-fade"}},[t.closed?t._e():a("div",{staticClass:"fullscreen-v-img",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.close(e)}}},[a("div",{staticClass:"header-v-img"},[a("span",{staticClass:"count-v-img"},[t.images.length>1?a("span",[t._v(t._s(t.currentImageIndex+1)+"/"+t._s(t.images.length)+" ")]):t._e()]),a("span",{staticClass:"title-v-img"},[t._v(t._s(t.titles[t.currentImageIndex]))]),a("div",{staticClass:"buttons-v-img"},[t.sourceButtons[t.currentImageIndex]?a("span",[a("a",{attrs:{href:t.images[t.currentImageIndex],target:"_blank"}},[a("svg",{staticStyle:{"enable-background":"new 0 0 475.078 475.077"},attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Capa_1",x:"0px",y:"0px",width:"512px",height:"512px",viewBox:"0 0 475.078 475.077","xml:space":"preserve"}},[a("path",{attrs:{d:"M467.083,318.627c-5.324-5.328-11.8-7.994-19.41-7.994H315.195l-38.828,38.827c-11.04,10.657-23.982,15.988-38.828,15.988    c-14.843,0-27.789-5.324-38.828-15.988l-38.543-38.827H27.408c-7.612,0-14.083,2.669-19.414,7.994    C2.664,323.955,0,330.427,0,338.044v91.358c0,7.614,2.664,14.085,7.994,19.414c5.33,5.328,11.801,7.99,19.414,7.99h420.266    c7.61,0,14.086-2.662,19.41-7.99c5.332-5.329,7.994-11.8,7.994-19.414v-91.358C475.078,330.427,472.416,323.955,467.083,318.627z     M360.025,414.841c-3.621,3.617-7.905,5.424-12.854,5.424s-9.227-1.807-12.847-5.424c-3.614-3.617-5.421-7.898-5.421-12.844    c0-4.948,1.807-9.236,5.421-12.847c3.62-3.62,7.898-5.431,12.847-5.431s9.232,1.811,12.854,5.431    c3.613,3.61,5.421,7.898,5.421,12.847C365.446,406.942,363.638,411.224,360.025,414.841z M433.109,414.841    c-3.614,3.617-7.898,5.424-12.848,5.424c-4.948,0-9.229-1.807-12.847-5.424c-3.613-3.617-5.42-7.898-5.42-12.844    c0-4.948,1.807-9.236,5.42-12.847c3.617-3.62,7.898-5.431,12.847-5.431c4.949,0,9.233,1.811,12.848,5.431    c3.617,3.61,5.427,7.898,5.427,12.847C438.536,406.942,436.729,411.224,433.109,414.841z",fill:"#FFFFFF"}}),a("path",{attrs:{d:"M224.692,323.479c3.428,3.613,7.71,5.421,12.847,5.421c5.141,0,9.418-1.808,12.847-5.421l127.907-127.908    c5.899-5.519,7.234-12.182,3.997-19.986c-3.23-7.421-8.847-11.132-16.844-11.136h-73.091V36.543c0-4.948-1.811-9.231-5.421-12.847    c-3.62-3.617-7.901-5.426-12.847-5.426h-73.096c-4.946,0-9.229,1.809-12.847,5.426c-3.615,3.616-5.424,7.898-5.424,12.847V164.45    h-73.089c-7.998,0-13.61,3.715-16.846,11.136c-3.234,7.801-1.903,14.467,3.999,19.986L224.692,323.479z",fill:"#FFFFFF"}})])])]):t._e(),a("span",{on:{click:t.close}},[t._v("×")])])]),a("transition",{attrs:{appear:"",name:"v-img-fade"}},[t.visibleUI&&1!==t.images.length?a("span",{staticClass:"prev-v-img",on:{click:t.prev}},[a("svg",{attrs:{width:"25",height:"25",viewBox:"0 0 1792 1915",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M1664 896v128q0 53-32.5 90.5t-84.5 37.5h-704l293 294q38 36 38 90t-38 90l-75 76q-37 37-90 37-52 0-91-37l-651-652q-37-37-37-90 0-52 37-91l651-650q38-38 91-38 52 0 90 38l75 74q38 38 38 91t-38 91l-293 293h704q52 0 84.5 37.5t32.5 90.5z",fill:"#fff"}})])]):t._e()]),a("transition",{attrs:{appear:"",name:"v-img-fade"}},[t.visibleUI&&1!==t.images.length?a("span",{staticClass:"next-v-img",on:{click:t.next}},[a("svg",{attrs:{width:"25",height:"25",viewBox:"0 0 1792 1915",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M1600 960q0 54-37 91l-651 651q-39 37-91 37-51 0-90-37l-75-75q-38-38-38-91t38-91l293-293h-704q-52 0-84.5-37.5t-32.5-90.5v-128q0-53 32.5-90.5t84.5-37.5h704l-293-294q-38-36-38-90t38-90l75-75q38-38 90-38 53 0 91 38l651 651q37 35 37 90z",fill:"#fff"}})])]):t._e()]),t.thumbnails&&t.images.length>1?a("div",{staticClass:"footer-v-img"},t._l(t.images,function(e,n){return a("img",{key:n,class:{"is-selected":t.currentImageIndex==n},attrs:{src:e},on:{click:function(e){t.select(n)}}})})):t._e(),a("div",{staticClass:"content-v-img"},[a("img",{attrs:{src:t.images[t.currentImageIndex]},on:{click:t.next}})])],1)])},staticRenderFns:[],_scopeId:"data-v-5928e1c7",data:function(){return{images:[],titles:[],sourceButtons:[],visibleUI:!0,currentImageIndex:0,closed:!0,uiTimeout:null,handlers:{},thumbnails:!1}},watch:{closed:function(t){t&&this.handlers.closed&&this.handlers.closed(),!t&&this.handlers.opened&&this.handlers.opened()}},methods:{fireChangeEvent:function(){this.handlers.changed&&this.handlers.changed(this.currentImageIndex)},close:function(){this.closed||(document.querySelector("body").classList.remove("body-fs-v-img"),this.images=[],this.currentImageIndex=0,this.closed=!0)},next:function(){!this.closed&&this.images.length>1&&(this.currentImageIndex+1<this.images.length?this.currentImageIndex++:this.currentImageIndex=0,this.fireChangeEvent())},select:function(t){this.currentImageIndex=t},prev:function(){!this.closed&&this.images.length>1&&(this.currentImageIndex>0?this.currentImageIndex--:this.currentImageIndex=this.images.length-1,this.fireChangeEvent())},showUI:function(){var t=this;this.closed||(clearTimeout(this.uiTimeout),this.visibleUI=!0,this.uiTimeout=setTimeout(function(){t.visibleUI=!1},3500))}},created:function(){var t=this;window.addEventListener("keyup",function(e){27!==e.keyCode&&81!==e.keyCode||t.close(),39!==e.keyCode&&76!==e.keyCode||t.next(),37!==e.keyCode&&72!==e.keyCode||t.prev()}),window.addEventListener("scroll",function(){t.close()}),window.addEventListener("mousemove",function(){t.showUI()})}},i=(function(){function t(t){this.value=t}function e(e){function a(i,s){try{var o=e[i](s),r=o.value;r instanceof t?Promise.resolve(r.value).then(function(t){a("next",t)},function(t){a("throw",t)}):n(o.done?"return":"normal",o.value)}catch(t){n("throw",t)}}function n(t,e){switch(t){case"return":i.resolve({value:e,done:!0});break;case"throw":i.reject(e);break;default:i.resolve({value:e,done:!1})}(i=i.next)?a(i.key,i.arg):s=null}var i,s;this._invoke=function(t,e){return new Promise(function(n,o){var r={key:t,arg:e,resolve:n,reject:o,next:null};s?s=s.next=r:(i=s=r,a(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}(),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t}),s=function(t,e,a){var n="pointer",i=e.arg||null,s=void 0,o=void 0,r=t.src,l=void 0,c=void 0,d={};return a.altAsTitle&&(l=t.alt),s=a.openOn,o=a.sourceButton,c=a.thumbnails,void 0!==e.value&&(n=e.value.cursor||n,i=e.value.group||i,s=e.value.openOn||s,r=e.value.src||r,l=e.value.title||l,d.opened=e.value.opened,d.closed=e.value.closed,d.changed=e.value.changed,void 0!==e.value.sourceButton&&(o=e.value.sourceButton),void 0!==e.value.thumbnails&&(c=e.value.thumbnails)),t.setAttribute("data-vue-img-src",r),i&&t.setAttribute("data-vue-img-group",i),l&&t.setAttribute("data-vue-img-title",l),o&&t.setAttribute("data-vue-img-source-button",o),c&&t.setAttribute("data-vue-img-thumbnails",c),r||console.error("v-img element missing src parameter."),t.style.cursor=n,{cursor:n,src:r,group:i,title:l,events:d,sourceButton:o,openOn:s,thumbnails:c}},o=function(t,e){var a=t.extend(n);e=i({altAsTitle:!1,sourceButton:!1,thumbnails:!1,openOn:"click"},e),t.directive("img",{update:function(t,a,n,i){var o=void 0,r=void 0;i.data.attrs&&n.data.attrs&&(r=i.data.attrs.src!==n.data.attrs.src,e.altAsTitle&&(o=i.data.attrs.alt!==n.data.attrs.alt));var l=a.oldValue!==a.value;(r||o||l)&&s(t,a,e)},bind:function(n,i){var o=s(n,i,e),r=window.vueImg;if(!r){var l=document.createElement("div");l.setAttribute("id","imageScreen"),document.querySelector("body").appendChild(l),r=window.vueImg=(new a).$mount("#imageScreen")}n.addEventListener(o.openOn,function(){var e=void 0;e=n.dataset.vueImgGroup?[].concat(function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}(document.querySelectorAll('img[data-vue-img-group="'+n.dataset.vueImgGroup+'"]'))):[n],t.set(r,"images",e.map(function(t){return t.dataset.vueImgSrc})),t.set(r,"titles",e.map(function(t){return t.dataset.vueImgTitle})),t.set(r,"sourceButtons",e.map(function(t){return"true"===t.dataset.vueImgSourceButton})),t.set(r,"thumbnails","true"===n.dataset.vueImgThumbnails),t.set(r,"currentImageIndex",e.indexOf(n)),t.set(r,"handlers",o.events),t.set(r,"closed",!1)})}})};"undefined"!=typeof window&&window.Vue&&window.Vue.use(o),e.a=o},S0H1:function(t,e){},S7x4:function(t,e){},"SAS+":function(t,e){},SDcQ:function(t,e){},SJNa:function(t,e){},SLMx:function(t,e,a){"use strict";var n=a("JJbb");e.a={getList:function(t){return n.a.get("/ErpHrTag/getList",{params:t})},create:function(t){return n.a.post("/ErpHrTag/create",t)},attach:function(t){return n.a.post("/ErpHrTag/attach",t)},detach:function(t){return n.a.post("/ErpHrTag/detach",t)},delete:function(t){return n.a.post("/ErpHrTag/delete",t)}}},SLYf:function(t,e){},SMfO:function(t,e){},SNri:function(t,e,a){"use strict";var n=a("JJbb");e.a={getHouseholdMember:function(t){return n.a.get("ErpStaffInfo/getHouseholdMember",{params:t})},getGuardian:function(t){return n.a.get("ErpStaffInfo/getGuardian",{params:t})},getVisitHomeInfo:function(t){return n.a.get("ErpStaffInfo/getVisitHomeInfo",{params:t})},updateVisitHomeInfo:function(t){return n.a.post("ErpStaffInfo/updateVisitHomeInfo",t)},getChildrenInfo:function(t){return n.a.get("ErpStaffInfo/getChildrenInfo",{params:t})},updateChildrenInfo:function(t){return n.a.post("ErpStaffInfo/updateChildrenInfo",t)}}},SQMU:function(t,e,a){"use strict";var n=a("JJbb"),i=a("Saf8");e.a={getAllProvince:function(){return i.a.get("ErpDependentPerson/getAllProvince")},getListDistrictByProvinceCode:function(t){return i.a.get("ErpDependentPerson/getListDistrictByProvinceCode",{params:t})},getListCommuneByDistrictCode:function(t){return i.a.get("ErpDependentPerson/getListCommuneByDistrictCode",{params:t})},getDependantById:function(t){return i.a.get("ErpDependentPerson/getDependantById",{params:t})},getFileByDependantId:function(t){return i.a.get("ErpDependentPerson/getFileByDependantId",{params:t})},checkUserByStaffCode:function(t){return i.a.get("ErpDependentPerson/checkUserByStaffCode",{params:t})},checkDependantByMst:function(t){return n.a.get("ErpDependentPerson/checkDependantByMst",{params:t})},checkDependantByCMND:function(t){return n.a.get("ErpDependentPerson/checkDependantByCMND",{params:t})},dependantPersonCheckOld:function(t){return n.a.get("ErpDependentPerson/dependentPersonCheck",{params:t})},dependantPersonCheck:function(t){return i.a.get("ErpDependentPerson/dependentPersonCheck",{params:t})},addDependantPerson:function(t){return i.a.post("ErpDependentPerson/addDependentPerson",t)},updateFileDependant:function(t){return i.a.post("ErpDependentPerson/updateFileDependant",t)},getDependantOfProfile:function(t){return i.a.get("ErpDependentPerson/getDependantOfProfile",{params:t})},updateRegisterStatusDependant:function(t){return i.a.put("ErpDependentPerson/updateRegisterStatusDependant",t)},downloadDKNPT:function(){return n.a.get("ErpDependentPerson/download20DKNPT")},downloadXNNPTTNCN:function(){return n.a.get("ErpDependentPerson/download09XNNPTTNCN")},countUserHasDependant:function(){return n.a.get("ErpDependentPerson/countUserHasDependant")},deleteDependant:function(t){return i.a.post("ErpDependentPerson/disableDependant",t)},getHistoryDependant:function(t){return i.a.get("ErpDependentPerson/getHistoryDependant",{params:t})},exportDependant:function(t){return n.a.get("ErpDependentPerson/exportDependant",{params:t})},checkCanUpdateRegisterStatus:function(t){return i.a.get("ErpDependentPerson/checkCanUpdateRegisterStatus",{params:t})},getDependantForQuickUpdate:function(t){return i.a.get("ErpDependentPerson/getDependantForQuickUpdate",{params:t})},checkDependantByName:function(t){return i.a.get("ErpDependentPerson/checkDependantByName",{params:t})},updateNote:function(t){return i.a.put("ErpDependentPerson/updateNote",t)}}},Saf8:function(t,e,a){"use strict";var n,i=a("Xxa5"),s=a.n(i),o=a("//Fk"),r=a.n(o),l=a("exGp"),c=a.n(l),d=a("mtWM"),u=a.n(d),h=a("4WGu"),p=a("fEi7"),m=a("vfns"),f=a("hC/b"),g=a("R1Q+"),v=this,_=new m.a("local"),b=new m.a("session",!1),y=!f.a.isInIframe(),C=0,w=1,k=(n=c()(s.a.mark(function t(e){var a,n,i,o,l;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e.response,n=a.status,i=a.data,t.t0=n,t.next=400===t.t0?4:401===t.t0?5:402===t.t0?31:404===t.t0?32:405===t.t0?33:419===t.t0?34:500===t.t0?35:36;break;case 4:return t.abrupt("break",37);case 5:if(y){t.next=16;break}if(!(1109===i.code||i.errors&&i.errors.includes(1109))){t.next=9;break}return t.next=9,p.a.refreshToken();case 9:if(!(o=p.a.getToken())||0!==C){t.next=14;break}return++C,e.config.headers.GchatToken=o,t.abrupt("return",u.a.request(e.config));case 14:t.next=30;break;case 16:if(!w){t.next=30;break}return _.remove(h.a.oidc.tokenIamStorage),b.set("isReload",!0),l=Object(g.a)(h.a.oidc),t.prev=20,t.next=23,l.run(window.location.href);case 23:t.next=27;break;case 25:t.prev=25,t.t1=t.catch(20);case 27:return t.prev=27,w=0,t.finish(27);case 30:case 31:case 32:case 33:case 34:case 35:case 36:return t.abrupt("break",37);case 37:return t.abrupt("return",r.a.reject(e));case 38:case"end":return t.stop()}},t,v,[[20,25,27,30]])})),function(t){return n.apply(this,arguments)}),x=u.a.create({baseURL:h.a.baseApiHrmNewUrl});x.interceptors.request.use(function(t){var e=_.get(h.a.oidc.tokenIamStorage);if(e&&e.accessToken&&(t.headers.Authorization=h.a.bearerKey+" "+e.accessToken.accessToken),!y){var a=p.a.getToken();a&&(t.headers.GchatToken=a)}return t}),x.interceptors.response.use(function(t){return C=0,t},k),e.a=x},Scpf:function(t,e){},Se4l:function(t,e){},SfeN:function(t,e){},SvPV:function(t,e){},Szb1:function(t,e){},"T+SE":function(t,e){},TKj7:function(t,e){},"TL6+":function(t,e){},TLuY:function(t,e){},TSRk:function(t,e){},TVVD:function(t,e,a){"use strict";var n=a("mvHQ"),i=a.n(n),s=a("Gu7T"),o=a.n(s),r=a("RUzx"),l=a.n(r),c=a("YJw0"),d=a("hC/b"),u={name:"select-order-type",props:{customClass:{default:null},type:{},typeOptions:{type:Array,default:function(t){return[]}},disabled:{default:!1,type:Boolean},multiple:{default:!1,type:Boolean},hideSelect:{default:!1,type:Boolean},autoClose:{default:!0,type:Boolean},placeholder:{default:"Chọn loại đề xuất"},state:{type:Boolean,default:null},hasGroup:{type:Boolean,default:!0},groupAlias:{type:String,default:null},groupSelect:{type:Boolean,default:!1},appendCategory:{default:!1},appendGroup:{default:!1,type:Boolean}},components:{Multiselect:l.a},created:function(){this.getType()},data:function(t){return{option:null,options:[],allOptions:[]}},watch:{groupAlias:function(){this.buildOption(this.allOptions)},type:function(){this.setList()}},methods:{setList:function(){var t=this;if(this.type&&this.options&&Array.isArray(this.options)&&this.options.length)if(this.multiple){this.option=[];var e=this.type.split(","),a=null;this.hasGroup?this.options.forEach(function(n){var i;Array.isArray(n.types)&&((a=n.types.filter(function(t){return e.includes(t.id+"")||e.includes(+t.id)}))&&a.length&&(i=t.option).push.apply(i,o()(a)))}):(a=this.options.filter(function(t){return e.includes(t.id+"")||e.includes(+t.id)}))&&(this.option=a)}else{var n=this.options.find(function(e){return+e.id==+t.type});n&&(this.option=n)}else this.option=null},getType:function(){var t=this;if(!d.a.isEmpty(this.typeOptions)||sessionStorage.getItem("hrOrderType"))return this.buildOption(d.a.isEmpty(this.typeOptions)?JSON.parse(sessionStorage.getItem("hrOrderType")):this.typeOptions),void this.setList();c.a.getType().then(function(e){e.data.success&&(sessionStorage.setItem("hrOrderType",i()(e.data.data)),t.buildOption(e.data.data),t.setList())}).catch(function(t){console.log(t),d.a.showMessage("Có lỗi xảy ra, không lấy được danh sách loại khai báo !")})},buildOption:function(t){var e=this;if(t&&Array.isArray(t)&&t.length){this.allOptions=t,this.options=[];var a=null;this.groupAlias&&(a=this.groupAlias.split(",")),this.allOptions.forEach(function(t){var n;a&&!a.includes(t.alias)||(e.hasGroup?(e.appendCategory&&(t.group=t.group+" ("+t.category_name+")"),e.appendGroup&&t.types.map(function(t){t.name=t.name+" ("+t.group_name+")"}),e.options.push(t)):((e.appendGroup||e.appendCategory)&&t.types.map(function(t){t.name=t.name+" ("+(e.appendGroup?t.group_name:"")+(e.appendCategory&&e.appendGroup?"-":"")+(e.appendCategory?t.category_name:"")+")"}),(n=e.options).push.apply(n,o()(t.types))))})}}}},h=a("XyMi");var p=function(t){a("YTZm")},m=Object(h.a)(u,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{class:t.customClass,attrs:{options:t.options,"group-values":t.hasGroup?"types":null,"group-label":t.hasGroup?"group":null,"group-select":t.hasGroup&&t.groupSelect,disabled:t.disabled,multiple:t.multiple,placeholder:t.placeholder,label:"name","track-by":"id",selectedLabel:"",deselectLabel:"X",selectLabel:"",selectGroupLabel:"",deselectGroupLabel:"X","hide-selected":t.hideSelect,"close-on-select":t.autoClose},on:{input:function(e){t.$emit("input",e)},select:function(e){t.$emit("select",e)}},scopedSlots:t._u([{key:"option",fn:function(e){return[a("span",{class:!e.option.$isLabel&&t.hasGroup&&"pl-2 border-left border-secondary"},[t._v(" "+t._s(e.option.name||e.option.$groupLabel))])]}}]),model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,p,"data-v-2a948eb8",null);e.a=m.exports},TYZh:function(t,e){},TZgx:function(t,e){},ThyM:function(t,e){},Ti7d:function(t,e){},TiAa:function(t,e){},TkZg:function(t,e){},TwHU:function(t,e,a){"use strict";a.d(e,"b",function(){return n}),a.d(e,"f",function(){return i}),a.d(e,"d",function(){return s}),a.d(e,"c",function(){return o}),a.d(e,"a",function(){return r}),a.d(e,"e",function(){return l});var n=[{value:null,text:"Chọn phương thức ràng buộc"},{value:"config",text:"Config"},{value:"auto",text:"Tự động"}],i=[{value:null,text:"Chọn loại hồ sơ"},{value:"Lý lịch cá nhân",text:"Lý lịch cá nhân"},{value:"Hợp đồng",text:"Hợp đồng"},{value:"Cam kết / Tuân thủ",text:"Cam kết / Tuân thủ"},{value:"Hồ sơ công tác",text:"Hồ sơ công tác"},{value:"Hồ sơ thuế",text:"Hồ sơ thuế"}],s=[{id:0,name:"Không có thông tin"},{id:1,name:"01"},{id:2,name:"02"},{id:3,name:"03"},{id:4,name:"04"},{id:5,name:"05"},{id:6,name:"06"},{id:7,name:"07"},{id:8,name:"08"},{id:9,name:"09"},{id:10,name:"10"}],o=[{value:"",text:"-"},{value:"anh_dau_do",text:"Ảnh, dấu đỏ"},{value:"dau_do",text:"Dấu đỏ"}],r=[{text:"Đúng/đủ thông tin & dấu mộc đỏ + Đúng NBL + NBL đồng ý bảo lãnh",value:"approved_license"},{text:"Đủ thông tin & Có ảnh NBL và CCCD + Đúng NBL + NBL đồng ý bảo lãnh",value:"approved_image"}],l=[{text:"Mờ, mất góc",value:"broken_license"},{text:"Không có mộc đỏ",value:"miss_license"},{text:"Không có ảnh NBL và CCCD",value:"miss_image"},{text:"Sai mẫu giấy BL/ Thiếu thông tin",value:"wrong_license_miss_info"},{text:"NBL không đồng ý bảo lãnh",value:"rejected_guarant"},{text:"NBL không đủ năng lực bảo lãnh",value:"pending_suspect miss_capacity"},{text:"Không liên hệ được NBL",value:"miss_contact"},{text:"Sai thông tin NBL",value:"wrong_info_guardian"}]},TyzE:function(t,e,a){"use strict";var n=a("mvHQ"),i=a.n(n),s=a("Gu7T"),o=a.n(s),r=a("Dd8w"),l=a.n(r),c=a("RUzx"),d=a.n(c),u=a("CpaI"),h=a("fwrr"),p={name:"multi-select-province",props:{limit:{default:5},provinceIds:{},autoClose:{default:!1},hideSelect:{default:!1},displayAll:{default:!1},isDisabled:{default:!1},placeholder:{default:"Chọn tỉnh"},preLoad:{default:!0},region:{default:null},customClass:{default:"multiselect-primary"},reset:{default:null},withRegions:{default:!0},triggerDuplicateChange:{default:!1}},components:{Multiselect:d.a},data:function(){return{provinceOption:null,provinceOptions:[]}},created:function(){this.preLoad&&this.getListProvince()},watch:{provinceIds:function(t,e){this.triggerDuplicateChange||(t?this.setList():this.provinceOption=null)},provinceOption:function(t,e){if(this.displayAll)if(!0===(t&&-1===t.id||t&&t.length>1&&-1!==t.findIndex(function(t){return-1===t.id}))){var a=this.provinceOption&&""!==this.provinceOption?this.provinceOption.filter(function(t){return!isNaN(t.id)}):"";this.$emit("handleProvinceSelected",a)}else this.$emit("handleProvinceSelected",t);else this.$emit("handleProvinceSelected",t)},triggerDuplicateChange:function(t,e){this.$emit("handleTriggerDuplicateChange",t)},region:function(t,e){this.getListProvince()},reset:function(){this.provinceOption=null}},methods:{setList:function(){var t=this;if(this.provinceIds){this.provinceOption=[];for(var e=this.provinceIds.toString().split(","),a=!0,n=["MN","MB","MT","HN","HCM"],i=0;i<n.length;i++){var s=n[i];e.includes(s)||(a=!1)}return a?(this.provinceOption=[],void this.provinceOption.push({id:-1,name:"Toàn quốc"})):void e.forEach(function(e){var a=t.provinceOptions.find(function(t){return+t.id==+e});a&&t.provinceOption.push(a)})}this.displayAll||this.provinceIds||(this.provinceOption=null)},setDisplayName:function(){this.provinceOptions=this.provinceOptions.map(function(t){var e=null===t.end_date||new Date(t.end_date)>new Date?t.prefix+" "+t.name:t.prefix+" "+t.name+" (Cũ)";return l()({},t,{name:e})})},getAllProvince:function(){var t=this,e=[{id:-1,name:"Toàn quốc"},{id:"MB",name:"Miền bắc"},{id:"MN",name:"Miền Nam"},{id:"MT",name:"Miền Trung"},{id:"HCM",name:"TP. Hồ Chí Minh"},{id:"HN",name:"TP. Hà Nội"}];if(sessionStorage.getItem("allProvinces")){var a=JSON.parse(sessionStorage.getItem("allProvinces"));return this.displayAll?this.provinceOptions=this.withRegions?[].concat(e,o()(a)):[].concat(o()(a)):this.provinceOptions=a,this.setDisplayName(),void this.setList()}u.a.getAllProvinceHrmV2().then(function(a){a.data.success&&(t.displayAll?t.provinceOptions=t.withRegions?[].concat(e,o()(a.data.data)):[].concat(o()(a.data.data)):(t.provinceOptions=a.data.data,sessionStorage.setItem("allProvinces",i()(t.provinceOptions))),t.setDisplayName(),t.setList())}).catch(function(t){console.log(t)})},getProvinceByRegion:function(){var t=this,e=this.region.constructor===Array?this.region.join():this.region;h.a.getProvinceByRegion({regions:e}).then(function(e){e&&e.data&&(t.provinceOptions=e.data.data.ProvinceListingV2.data,t.triggerDuplicateChange=!1,t.setDisplayName(),t.setList(),t.$emit("handleProvinceOption",t.provinceOptions.map(function(t){return t.id})))}).catch(function(t){console.log(t)})},getListProvince:function(){this.region?this.getProvinceByRegion():this.getAllProvince()},handleInput:function(t){if(this.displayAll)if(null==t||0===t.length||t.findIndex(function(t){return-1===t.id})===t.length-1)this.provinceOption=[{id:-1,name:"Toàn quốc"}];else{var e=t.filter(function(t){return-1!==t.id});this.provinceOption=e}else this.$emit("input",t)}}},m=a("XyMi");var f=function(t){a("ldSf")},g=Object(m.a)(p,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{class:t.customClass,attrs:{options:t.provinceOptions,multiple:!0,limit:t.limit,placeholder:t.placeholder,label:"name","track-by":"id",selectedLabel:"","deselect-label":"X",selectLabel:"","close-on-select":t.autoClose,"hide-selected":t.hideSelect,disabled:t.isDisabled},on:{input:function(e){return t.handleInput(t.provinceOption)}},model:{value:t.provinceOption,callback:function(e){t.provinceOption=e},expression:"provinceOption"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,f,"data-v-2fb75449",null);e.a=g.exports},"U2/b":function(t,e,a){"use strict";var n=a("IC97"),i=a("pedj"),s=a("o1vX"),o=a("hC/b"),r={name:"list-children",components:{Datepicker:n.a,FileViewUpload:i.a,SensitiveFormInput:s.a},props:{edit:{type:Boolean,default:!1},children:{type:Array,default:function(t){return[]}},fileOption:{type:Object,default:function(t){return{edit:!1}}}},data:function(){return{}},computed:{helper:function(t){return o.a},genderOption:function(){return[{text:"Giới tính",value:null},{text:"Nam",value:"male"},{text:"Nữ",value:"female"}]},genderDesc:function(){return{male:"Nam",female:"Nữ",other:"Khác"}}},methods:{viewSensitiveData:function(t,e){this.$emit("viewSensitiveData",t,e)}}},l=a("XyMi"),c=Object(l.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tbody",t._l(t.children,function(e,n){return a("tr",{key:n},[a("td",[t.edit?a("b-input",{attrs:{type:"text",placeholder:"Họ tên"},model:{value:e.name,callback:function(a){t.$set(e,"name","string"==typeof a?a.trim():a)},expression:"child.name"}}):a("span",[t._v(t._s(e.name))])],1),t._v(" "),a("td",[t.edit?a("Datepicker",{attrs:{placeholder:"Ngày sinh",format:"dd-MM-yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,required:!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},model:{value:e.birthday,callback:function(a){t.$set(e,"birthday",a)},expression:"child.birthday"}}):a("span",[t._v(t._s(t.helper.formatDate(e.birthday)))])],1),t._v(" "),a("td",[t.edit?a("b-form-select",{attrs:{options:t.genderOption,placeholder:"Giới tính"},model:{value:e.gender,callback:function(a){t.$set(e,"gender",a)},expression:"child.gender"}}):a("span",[t._v(t._s(t.genderDesc[e.gender]||""))])],1),t._v(" "),a("td",[e.hasOwnProperty("personal_id_number_hidden")&&e.personal_id_number_hidden?a("SensitiveFormInput",{attrs:{"data-input":e.personal_id_number_hidden,"user-id":"0",type:"child.mobile",source:"list-children"},on:{returnRawData:function(e){return t.viewSensitiveData(n,"personal_id_number_hidden")}}}):t.edit?a("b-input",{attrs:{type:"text",placeholder:"CMND"},model:{value:e.personal_id_number,callback:function(a){t.$set(e,"personal_id_number","string"==typeof a?a.trim():a)},expression:"child.personal_id_number"}}):a("span",[t._v(t._s(e.personal_id_number))])],1),t._v(" "),a("td",[a("FileViewUpload",{staticClass:"d-inline-block tracking-action tracking-child",attrs:{"input-id":"file_birth_certificate_"+n+"_"+t.fileOption.edit,"input-style":{width:"3.75rem"},hideUploadButton:!0,height:"3.75rem",edit:t.fileOption.edit,"input-placeholder":"Thêm ảnh",files:e.birth_certificate,"file-add":e.birth_certificate_add,"file-delete":e.birth_certificate_delete}})],1),t._v(" "),a("td",[t.edit?a("b-btn",{attrs:{variant:"default md-btn-flat icon-btn",size:"sm"},on:{click:function(e){return t.$emit("remove",n)}}},[a("i",{staticClass:"ion ion-md-close"})]):t._e()],1)])}),0)},[],!1,null,null,null);e.a=c.exports},U8sS:function(t,e){},UflE:function(t,e){},UjNx:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAARCAYAAADQWvz5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAG/SURBVHgBlVTbUQIxFD13ZUbxa0vACrQD90sRnRErACuQrYClgkAF0oE6oyOfsQKxArADPhxhHNx4kg1vGOF8hNzk7rknNzkINkEVI0BOIHLsYoNPINWIO3pduqwlEKlzK4KRD650yRLyN2T2Ked9GHO7TLhI1CrWYYKEiS1gmCDWg6UiBX6SsFAFkia46zSwquSihmbJQJWq+A+qWM1yz2uLimwlCd6ppIH4tYltoC5rEMMTfB9Z5YHnSzgMtiaxiF+Ya9i/Q6cq8LpOeSsN7AoTPPHbSkakyrwRKXDan8lmD1QU+nmUPQU755o6K0/3YDSHgo2paOQXxxmRuiizX/cTySzQzmILrknuAchnxEj9rR6EOQ4Mfhj8esJ9DTO+Ab60T67C5LzUtM3jsODQ71GNw8gTqlLfXf+uyJ5Bz+n2S5SPa+wK5wDoOSJ6yFpi2sRt1NgTBCFM6m7bH17YB7ytWGITWsUKfahIEtNz/RnR5B05RfkqXBNNc5I0U8F9yfM1S83lzz1g8fboOVdDSCBUZQaeTDP2ZObE/a1Y5aCx42c9X8N7zRrVJu49ThPUVcTeRRm5A+0g3WWCCf4A+TmqFpOQ+9AAAAAASUVORK5CYII="},UkVX:function(t,e){},Uqgu:function(t,e){},UxYm:function(t,e){},UzzI:function(t,e){},"V+II":function(t,e){},VDNj:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("pFYg"),i=a.n(n),s=a("RRo+"),o=a.n(s),r=a("gRE1"),l=a.n(r),c=a("W3Iv"),d=a.n(c),u=a("d7EF"),h=a.n(u),p=a("fZjL"),m=a.n(p),f=a("BO1k"),g=a.n(f),v=a("Xxa5"),_=a.n(v),b=a("exGp"),y=a.n(b),C=a("mvHQ"),w=a.n(C),k=a("Dd8w"),x=a.n(k),S=a("IC97"),M=a("D52M"),T=a("a/7L"),D=a("TVVD"),I=a("FcGS"),P=a("Hv3x"),E=a("pedj"),L=a("YlZe"),A=a("RUzx"),O=a.n(A),N={name:"select-gender",props:{gender:{type:String,default:null},autoClose:{default:!0},hideSelect:{default:!0},placeholder:{default:"Chọn giới tính"},multiple:{default:!1,type:Boolean},state:{type:Boolean,default:null}},components:{Multiselect:O.a},data:function(){return{option:null,options:[{value:"male",desc:"Nam"},{value:"female",desc:"Nữ"},{value:"other",desc:"Khác"}]}},watch:{gender:{immediate:!0,handler:function(t,e){t?this.set():this.option=null}}},methods:{set:function(){var t=this;if(this.multiple){var e=this.gender.split(",");this.option=this.options.filter(function(t){return e.includes(t.value)})}else{var a=this.options.find(function(e){return e.value===t.gender});this.option=a||null}}}},R=a("XyMi");var U=function(t){a("XhUp")},$=Object(R.a)(N,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("multiselect",{staticClass:"multiselect-primary",class:{stateTrue:!0===t.state,stateFalse:0==t.state},attrs:{options:t.options,multiple:t.multiple,placeholder:t.placeholder,label:"desc","track-by":"value",selectedLabel:"",deselectLabel:"X",selectLabel:"","hide-selected":t.hideSelect,"close-on-select":t.autoClose},on:{input:function(e){t.$emit("change",e)},select:function(e){t.$emit("select",e)}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])],1)},[],!1,U,"data-v-67a2b48e",null).exports,H=a("8usR"),B=a("2QYU"),j=a("F/2K"),F=a("qOi5"),q=a("+rLF"),Y=a("ibkE"),z=a("PZjF"),G=a("X1Jv"),K={name:"select-administrative-province",props:{provinceCode:{default:null},autoClose:{default:!0},hideSelect:{default:!1},placeholder:{default:"Chọn tỉnh hành chính"},multiple:{default:!1,type:Boolean},state:{type:Boolean,default:null}},components:{Multiselect:O.a},data:function(t){return{option:null,options:[]}},created:function(){this.getAdministrativeProvinces()},watch:{provinceCode:function(t,e){t?this.setList():this.option=null}},methods:{setList:function(){var t=this;if(this.provinceCode&&this.multiple)return this.option=[],void this.provinceCode.split(",").forEach(function(e){var a=t.options.find(function(t){return t.code===e});a&&t.option.push(a)});if(this.provinceCode){this.option=null;var e=this.options.find(function(e){return e.code===t.provinceCode});e&&(this.option=e)}},getAdministrativeProvinces:function(){var t=this;if(sessionStorage.getItem("administrativeProvinces"))return this.options=JSON.parse(sessionStorage.getItem("administrativeProvinces")),void this.setList();G.a.getAdministrativeArea().then(function(e){e.data.success&&(t.options=e.data.data,t.setList(),sessionStorage.setItem("administrativeProvinces",w()(t.options)))}).catch(function(t){console.log(t)})}}};var V=function(t){a("4yWF")},Q=Object(R.a)(K,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{class:{stateTrue:!0===t.state,stateFalse:0==t.state},attrs:{options:t.options,multiple:t.multiple,placeholder:t.placeholder,label:"name","track-by":"code",selectedLabel:"",deselectLabel:"X",selectLabel:"","hide-selected":t.hideSelect,"close-on-select":t.autoClose},on:{select:function(e){t.$emit("select",e)},input:function(e){t.$emit("input",e)}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,V,"data-v-063f2165",null).exports,X={name:"select-hospital",props:{provinceCode:{default:null},hospitalCode:{type:String,default:null},autoClose:{default:!0},hideSelect:{default:!1},placeholder:{default:"Chọn bệnh viện"},multiple:{default:!1,type:Boolean},state:{type:Boolean,default:null},preloadAll:{default:!1}},components:{Multiselect:O.a},data:function(t){return{option:null,options:[]}},created:function(){this.preloadAll&&this.getHospital()},watch:{provinceCode:{immediate:!0,handler:function(t,e){t&&this.getHospitals(t)}},hospitalCode:function(t,e){t&&this.options&&this.options.length?this.setList():this.option=null}},methods:{setList:function(){var t=this;if(this.hospitalCode&&this.multiple)return this.option=[],void this.hospitalCode.split(",").forEach(function(e){var a=t.options.find(function(t){return t.code===e});a&&t.option.push(a)});if(this.hospitalCode){this.option=null;var e=this.options.find(function(e){return e.code===t.hospitalCode});e&&(this.option=e)}},getHospitals:function(t){var e=this;G.a.getHospitals({province_code:t}).then(function(t){t.data.success&&(e.options=t.data.data,e.setList())}).catch(function(t){console.log(t)})}}};var W=function(t){a("cQX6")},J=Object(R.a)(X,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{class:{stateTrue:!0===t.state,stateFalse:0==t.state},attrs:{options:t.options,multiple:t.multiple,placeholder:t.placeholder,label:"name","track-by":"code",selectedLabel:"",deselectLabel:"X",selectLabel:"","hide-selected":t.hideSelect,"close-on-select":t.autoClose},on:{select:function(e){t.$emit("select",e)},input:function(e){t.$emit("input",e)}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,W,"data-v-7fec248d",null).exports,Z=a("U2/b"),tt=a("MZqL"),et=a("Ypg3"),at=a("jwCl"),nt=a("MpJk"),it=a("YJw0"),st=a("cFmi"),ot=a("Y/vs"),rt=a("phbQ"),lt=a("agCp"),ct=a("oonE"),dt=a("7FTm"),ut=a("hC/b"),ht=a("PJh5"),pt=a.n(ht),mt=a("NYxO"),ft=a("XbZs"),gt=a("o1vX"),vt=a("u1Qr"),_t={name:"update-order",props:{approve_report_wrong_identity:{default:!1},idOrder:{default:null},profileId:{default:null},modalStyle:{default:!1,type:Boolean},orderType:{dafault:null},edit:{type:Boolean,default:!0},displayFrom:null},components:{SensitiveLabel:vt.a,SensitiveFormInput:gt.a,ApproveResignWorkModal:ft.a,SingleSelectStation:T.a,SelectOrderType:D.a,SelectOrderStatus:P.a,SelectOrderGroup:I.a,Datepicker:S.a,Multiselect:O.a,SingleSelectWorkChangeType:et.a,SingleSelectWorkChangeReason:at.a,FileViewUpload:E.a,SingleSelectPosition:L.a,SelectGender:$,SelectEthnic:H.a,SingleSelectRelation:B.a,SingleSelectProvince:j.a,SingleSelectDistrict:F.a,SingleSelectSubDistrict:q.a,SelectContractType:Y.a,ModalDetailFile:z.a,SelectAdministrativeProvince:Q,SelectHospital:J,ListChildren:Z.a,ModalCheckBeforeApproveContract:tt.a,PauseWorkConst:nt.a},created:function(){this.getUserPermissions(),this.getType(),this.idOrder?this.detailOrder(this.idOrder):this.profileId&&(this.getProfileInfo(this.profileId),this.employee.masterProfile.id=this.profileId,this.employee.masterProfile.staff_code=this.profileId)},data:function(t){return{editData:!1,permissions:{can_update_tick_has_kpi:!0},loading:{ProfileInfo:!1,orderInfo:!1},loadingModal:!1,eligibleCreate:!0,legalCreate:!0,isRelateOrder:null,duty:null,censor:null,rejectReason:null,language:{vi:M.a},contractType:ct.a.typeOptions,birthTypeOptions:dt.a.birthTypeOptions,birthdayStatusOptions:dt.a.birthdayStatusOptions,insuranceBookStatusOptions:dt.a.insuranceBookStatusOptions,genderOptions:dt.a.genderOptions,nationalityOptions:dt.a.nationalityOptions,salaryAreaOptions:dt.a.salaryAreaOptions,fileTypeOptions:dt.a.fileTypeOptions,flowAction:dt.a.flowAction,statusDesc:dt.a.statusDesc,salaryDateOps:ct.a.salaryDateOps,resignTypeOptions:[{value:null,text:""},{value:"nghi_dung_quy_trinh",text:"Nghỉ đúng quy trình"},{value:"nghi_ngang",text:"Nghỉ ngang"},{value:"cho_thoi_viec",text:"Cho thôi việc"},{value:"nghi_truoc_han",text:"Nghỉ trước hạn"}],fieldDesc:[],orderTypeOption:[],modifyConfig:{7:{oldInput:{class:"col-md-4",disable:!1,label:"Mức đóng BHXH cũ"},newInput:{class:"col-md-4",disable:!1,label:"Mức đóng BHXH mới"},inputFile:!1,showTimeChange:!0},8:{oldInput:{class:"col-md-4",disable:!1,label:"Nơi làm cũ"},newInput:{class:"col-md-4",disable:!1,label:"Nơi làm mới"},inputFile:!1,showTimeChange:!0},9:{oldInput:{class:"col-md-4",disable:!1,label:"Vị trí cũ"},newInput:{class:"col-md-4",disable:!1,label:"Vị trí mới"},inputFile:!1,showTimeChange:!0},10:{oldInput:{class:"col-md-4",disable:!1,label:"Giới tính sai"},newInput:{class:"col-md-4",disable:!1,label:"Giới tính đúng"},inputFile:!0,showTimeChange:!0},13:{oldInput:{class:"col-md-4",disable:!1,label:"Họ và tên sai"},newInput:{class:"col-md-4",disable:!1,label:"Họ và tên đúng"},inputFile:!0,showTimeChange:!0},11:{oldInput:{class:"col-md-4",disable:!1,label:"Quốc tịch sai"},newInput:{class:"col-md-4",disable:!1,label:"Quốc tịch đúng"},inputFile:!0,showTimeChange:!0},12:{oldInput:{class:"col-md-4",disable:!1,label:"Ngày sinh sai"},newInput:{class:"col-md-4",disable:!1,label:"Ngày sinh đúng"},inputFile:!0,showTimeChange:!0},28:{oldInput:{class:"col-md-4",disable:!1,label:"CMND/CCCD cũ"},newInput:{class:"col-md-4",disable:!1,label:"CMND/CCCD mới"},inputFile:!0,showTimeChange:!1},29:{oldInput:{class:"col-md-4",disable:!1,label:"Số điện thoại cũ"},newInput:{class:"col-md-4",disable:!1,label:"Số điện thoại mới"},inputFile:!1,showTimeChange:!1},31:{oldInput:{class:"col-md-12",disable:!1,label:"Thường trú cũ"},newInput:{class:"col-md-12",disable:!1,label:"Thường trú mới"},inputFile:!1,showTimeChange:!1},32:{oldInput:{class:"col-md-4",disable:!1,label:"Tỉ lệ cũ (%)"},newInput:{class:"col-md-4",disable:!1,label:"Tỉ lệ mới (%)"},showTimeChange:!0,inputFile:!0}},order:{id:null,profile_id:null,order_category:null,order_group:null,order_type_id:null,order_type_alias:null,order_type_name:null,group_name:null,from_month:null,to_month:null,start_date:null,new_value:null,old_value:null,status:null,deadline:null,note:null,additional_info:{insurance_register:null,insurance_book_number:null,number_household:null,salary_pay_amount:null,pay_rate:null,resp_allowance:null,complementary_allowance:null,salary_area:null,area_code:null,min_salary_area:null,province_hospital_register:null,hospital_register:null,old_resident_province:null,new_resident_province:null,old_resident_district:null,new_resident_district:null,old_resident_commune:null,new_resident_commune:null,old_resident_detail:null,new_resident_detail:null,province_hospital_register_old:null,province_hospital_register_new:null,birthday_status:null,keep_insurance_book_status:null,shk_number:null,resident_address_province:null,resident_address_district:null,resident_address_sub_district:null,resident_address_detail:null},files:[{type:null,file_exist:[],file_add:[]}],household:[],regime_data:{from:null,to:null,total:null,pause_from:null,pause_to:null,pause_total:null,birth_date:null,num_children:null,birth_type:null,wife_personal_number:null,child_health_ins_number:null},contract_info:{type_contract:null,start_date:null,end_date:null,contract_date:null,trial_salary:null,salary:null,has_kpi:null,resp_allowance:null,trans_allowance:null,meal_allowance:null,mobile_allowance:null,biztrip_allowance:null,salary_date:null},resign_info:{resign_date:null,resign_reason:null,resign_type:null,resign_fine:null,salary_option:null,deposit_option:null,resign_fine_deposit:null,salary_paid_date:null,deposit_paid_date:null}},relate_order:{id:null,group:"up",type:null},relateOrderData:{hrOrder:{},type:{}},employee:{masterProfile:{id:null,staff_code:null,region:null,fullname:null,status:null,birthday:null,gender:null,personal_id_number:null,poi_personal_id_number:null,doi_personal_id_number:null,resident_address_province:null,resident_address_district:null,resident_address_sub_district:null,resident_address_detail:null,tel:null,insurance_register:null,number_household:null,ins_book_with_comp:null,hospital_register:null,province_hospital_register:null,health_ins_number:null,join_date:null,trial_date:null,contract_date:null,trial_time:null},empProfile:{position_job:null,position_name:null,active_date:null,disable_date:null,start_date_day:null},user:{id:null,username:null,station_id:null,status_id:null,station_name:null,work_type:null},contract:{id:null,contract_number:null,type_contract:null,has_kpi:null,start_date:null,end_date:null,liquidate_date:null,status:null,contract_type_name:null},e_contract:{file:null,savis_code:null},salary:{trial_salary:null,salary:null,trial_ot_salary:null,ot_salary:null,resp_allowance:null,trans_allowance:null,meal_allowance:null,mobile_allowance:null,biztrip_allowance:null,min_salary_area:null,effect_date:null,status:null},insurance:{id:null,insurance_id:null,status:null,from:null,to:null,insurance_desc:null,company_cost:null,worker_cost:null}},showEmployeeInfo:{staff_code:{category:["insurance","contract","working_process"]},region:null,fullname:{category:["insurance","contract","working_process"]},mp_status:{category:["insurance","working_process"]},birthday:{category:["insurance"]},birthday_status:{category:["insurance"]},gender:{group:["up"]},personal_id_number:{group:["up","user_info"]},poi_personal_id_number:{group:["up","user_info"]},doi_personal_id_number:{group:["up","user_info"]},resident_address_province:{group:["up"]},resident_address_district:{group:["up"]},resident_address_sub_district:{group:["up"]},resident_address_detail:{group:["up"]},tel:{group:["up"]},insurance_register:null,number_household:null,ins_book_with_comp:null,hospital_register:null,province_hospital_register:null,health_ins_number:null,join_date:{category:["contract","working_process"]},trial_date:{category:["contract"]},contract_date:{category:["contract","working_process"]},trial_time:{category:["contract"]},position_name:{category:["insurance","contract","working_process"]},active_date:null,disable_date:null,start_date_day:{category:["contract"]},username:null,station_id:null,status_id:null,station_name:{category:["insurance","contract","working_process"]},work_type:{category:["contract","working_process"]},insurance_id:null,insurance_status:null,insurance_from:null,insurancve_to:null,insurance_desc:{category:["insurance"]},company_cost:null,worker_cost:null},showNoteInput:{category:["working_process"],group:["modify","regime","supply_bhxh","supply_bhyt"],type:[]},oldContractResolve:{id:null,plan:null,date:null},contractId:null,noti:{salary:null,oldContract:null,staffCode:null},relateInfo:[],isShowModalCheckBeforeApproveContract:!1,dataCheckBeforeApproveContract:null,isShowApproveModal:!1,configSensitiveData:{tel:!1,personal_id_number:!1},configSensitiveOrderData:{new_personal_id_number_28:!1,new_phone_29:!1,old_personal_id_number_28:!1,old_phone_29:!1,wife_personal_number:!1},configShowHouseHold:{},resignTypeChargeSalary:["arbitrarily_quit","agree_terminate_contract","fired"],salaryOptions:nt.a.paidOptions,depositOptions:nt.a.depositOptions,salaryPenaltyOptions:["Không trả lương","Phạt lương"],depositPenaltyOptions:["Không trả cọc","Phạt cọc"],holdSalaryOptions:["Giam lương"],holdDepositOptions:["Giam cọc"],depositInfo:{total_deposited_money:0}}},computed:x()({},Object(mt.c)({curUser:"userInfo"}),{orderTypeProfileWatcher:function(){return this.order.order_type_alias+"_"+ +this.order.profile_id+"_"+(this.employee.user.username||"")},profileContractWatcher:function(){return+this.order.profile_id+"_"+(this.order.contract_info.type_contract||"")+(this.order.contract_info.start_date||"")},showNote:function(){return this.showNoteInput.category.includes(this.order.order_category)||this.showNoteInput.group.includes(this.order.order_group)||this.showNoteInput.type.includes(this.order.order_type_alias)},requireContractField:function(){if("contract"!==this.order.order_group)return[];var t=[];return"new_contract"===this.order.order_type_alias&&(t.push("type_contract","start_date"),["definite","definite_24","probation"].includes(this.order.contract_info.type_contract)&&t.push("end_date")),"new_appendix"===this.order.order_type_alias&&t.push("contract_id","effect_date"),"probation"===this.order.contract_info.type_contract&&t.push("trial_salary"),["definite","definite_24","indefinite","parttime","service_contract"].includes(this.order.contract_info.type_contract)&&t.push("salary"),t},allowUpdate:function(){return"modify_ekyc_info"!==this.order.order_type_alias&&(!this.order.status||["cho_duyet","thieu_ho_so"].includes(this.order.status)||["new_contract","new_appendix"].includes(this.order.order_type_alias)&&"da_duyet"===this.order.status&&!this.relateInfo.signed)},canUpdate:function(){return this.eligibleCreate&&this.legalCreate},editSalalary:function(){return this.permissions.can_update_tick_has_kpi||!+this.order.contract_info.has_kpi||["binhvt","hungtd3","xoandt","ngoctv5"].includes(this.curUser.User.username)},showHouseHold:function(){return"TM"===this.order.order_type_alias},hasShowChangeInfo:function(){return["change_info","modify_ekyc_info"].includes(this.order.order_type_alias)},showActionApproveReportEkyc:function(){return"modify_ekyc_info"===this.order.order_type_alias&&!["tu_choi","hoan_thanh"].includes(this.order.status)}}),watch:{"order.contract_info.end_date":function(t,e){"new_contract"===this.order.order_type_alias&&this.order.contract_info.start_date&&t&&pt()(t)<=pt()(this.order.contract_info.start_date)&&(ut.a.showMessage("Ngày kết thúc của hợp đồng không được nhỏ hơn ngày bắt đầu của hợp đồng !","warning"),this.order.contract_info.end_date=null)},"order.order_type_id":function(t,e){this.order.id||(this.order.additional_info.pay_rate=1==+t||33==+t?32:2==+t?.5:null,1==+e&&(this.order.household=[]))},orderType:{immediate:!0,handler:function(t,e){this.employee.masterProfile.staff_code=null,this.checkStaffCode(),t?this.initOrderType(t):this.selectGroupOrder(null)}},idOrder:function(t,e){this.isRelateOrder=!1,this.configSensitiveOrderData={new_personal_id_number_28:!1,new_phone_29:!1,old_personal_id_number_28:!1,old_phone_29:!1,wife_personal_number:!1},this.editData=null!==t,t?this.detailOrder(t):this.resetAllData()},orderTypeProfileWatcher:function(t,e){this.eligibleCreate=!0,this.legalCreate=!0,this.resetObj(this.noti),this.order.order_type_alias&&this.order.order_type_alias&&this.order.profile_id&&this.employee.user.id&&("new_appendix"===this.order.order_type_alias&&(this.employee.contract.id?(this.order.contract_info.contract_id=this.employee.contract.id,this.order.contract_info.type_contract=this.employee.contract.type_contract,this.order.contract_info.contract_date=this.employee.contract.contract_date,this.order.contract_info.start_date=this.employee.contract.start_date,this.order.contract_info.end_date=this.employee.contract.end_date):(this.noti.staffCode="Nhân viên này chưa có hợp đồng, không thể tạo đề xuất thay đổi lương !",this.eligibleCreate=!1)),!this.idOrder&&this.eligibleCreate&&this.legalCreate&&(this.suggestData(),this.initDataFromEmployee()))},profileContractWatcher:function(t,e){"new_contract"===this.order.order_type_alias?this.checkConflicOldContract():this.noti.oldContract=""}},methods:{selectSalaryOption:function(t){this.order.resign_info.salary_option=t,this.order.resign_info.resign_fine="Không trả lương"===t?100:"Phạt lương"===t?0:null,"Giam lương"!==t&&(this.order.resign_info.salary_paid_date=null),this.order=JSON.parse(w()(this.order))},selectDepositOption:function(t){this.order.resign_info.deposit_option=t,this.order.resign_info.resign_fine_deposit="Không trả cọc"===t?100:"Phạt cọc"===t?0:null,"Giam cọc"!==t&&(this.order.resign_info.deposit_paid_date=null),this.order=JSON.parse(w()(this.order))},viewOriginSensitiveData:function(t,e){this.employee.masterProfile[e]=t,this.configSensitiveData[e]=!0},viewOriginSensitiveOrderData:function(t,e){e.includes("new")?this.order.new_value=t:this.order.old_value=t,this.configSensitiveOrderData[e]=!0},viewOriginSensitiveSpecOrderData:function(t,e){"wife_personal_number"===e&&(this.order.regime_data.wife_personal_number=t,this.configSensitiveOrderData[e]=!0)},viewOriginSensitiveHouseHold:function(t,e){var a=this;return y()(_.a.mark(function n(){return _.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a.order.household.forEach(function(a){a.key===e&&(a.personal_id=t)}),a.$set(a.configShowHouseHold,e,!0);case 2:case"end":return n.stop()}},n,a)}))()},getUserPermissions:function(t){var e=this;rt.a.getSpecialPermissions({profile_id:t}).then(function(t){t.data.success&&(e.permissions=t.data.permissions)}).catch(function(t){console.log(t)})},showMpField:function(t){return!this.order.order_category||this.showEmployeeInfo[t]&&(this.showEmployeeInfo[t].category&&this.showEmployeeInfo[t].category.includes(this.order.order_category)||this.showEmployeeInfo[t].group&&this.showEmployeeInfo[t].group.includes(this.order.order_group)||this.showEmployeeInfo[t].type&&this.showEmployeeInfo[t].type.includes(this.order.order_type_alias))},suggestEndDateContract:function(t){if(this.getAreaSalary(t,null,!0),!t)return this.order.contract_info.end_date=null,void(this.order.contract_info.contract_date=null);this.order.contract_info.contract_date=t},suggestKpi:function(t){t&&"apprenticeship"===t&&(this.order.contract_info.has_kpi=!1)},checkConflicOldContract:function(){if(!this.employee.contract.id||!this.order.contract_info.start_date||this.idOrder||this.employee.contract.end_date&&pt()(this.employee.contract.end_date).add(1,"day")<=pt()(this.order.contract_info.start_date)||this.employee.contract.liquidate_date&&pt()(this.employee.contract.liquidate_date).add(1,"day")<=pt()(this.order.contract_info.start_date)||"service_contract"===this.employee.contract.type_contract&&"service_contract"!==this.order.contract_info.type_contract)return this.noti.oldContract=null,void this.resetObj(this.oldContractResolve);this.noti.oldContract="Nhân viên này đã có hợp đồng <b>"+(this.contractType[this.employee.contract.type_contract]||"")+"</b>"+(this.employee.contract.end_date?" hết hạn vào ngày <b>"+ut.a.formatDate(this.employee.contract.end_date)+"</b>":" Không xác định thời hạn")+(this.employee.e_contract.file?" và <b>Đã ký điện tử</b>":""),this.employee.contract.end_date&&(this.noti.oldContract+="<br/> Ngày bắt đầu của hợp đồng mới <b>"+ut.a.formatDate(this.order.contract_info.start_date)+"</b> trước ngày kết thúc của hợp đồng cũ."),this.employee.e_contract.file||"active"===this.employee.contract.status&&"service_contract"!==this.employee.contract.type_contract?this.legalCreate=!1:(this.oldContractResolve.id=this.employee.contract.id,this.oldContractResolve.date=pt()(this.order.contract_info.start_date).subtract(1,"day").format("YYYY-MM-DD"))},suggestData:function(){var t=this;if(this.order.order_type_id&&this.order.order_type_alias&&this.order.profile_id&&this.employee.user.id){var e={orderId:this.order.id,orderTypeId:this.order.order_type_id,orderTypeAlias:this.order.order_type_alias,profileId:this.order.profile_id,userId:this.employee.user.id,orderCategory:this.order.orderCategory};it.a.suggestData(e).then(function(e){if(e.data.success){if(e.data.data){var a=e.data.data.saveField;if(ut.a.isEmpty(e.data.data.suggestData))a&&t.resetObj(t.order[a]),t.noti.salary="";else{var n=e.data.data.suggestData;for(var i in n)a?t.order[a][i]=n[i]:t.order[i]=n[i],"household"===i&&n[i].forEach(function(e){t.configShowHouseHold[e.id]=!0});["new_contract","new_appendix"].includes(t.order.order_type_alias)&&(t.noti.salary="Lương được hệ thống gợi ý theo lương vùng tối thiểu")}}}else e.data.data&&(e.data.data.prevent&&(t.noti.staffCode=e.data.message,t.legalCreate=!1),e.data.data.show_msg&&ut.a.showMessage(e.data.message||"Không lấy được dữ liệu gợi ý cho đề xuất !")),console.log(e.data.message||"Có lỗi khi lấy thông tin gợi ý !")}).catch(function(t){console.log(t)})}},getType:function(){var t=this;if(sessionStorage.getItem("hrOrderType"))return this.orderTypeOption=JSON.parse(sessionStorage.getItem("hrOrderType")),void this.initOrderType(this.orderType);it.a.getType().then(function(e){e.data.success&&(sessionStorage.setItem("hrOrderType",w()(e.data.data)),t.orderTypeOption=e.data.data,t.initOrderType(t.orderType))}).catch(function(t){console.log(t),ut.a.showMessage("Có lỗi xảy ra, không lấy được danh sách loại khai báo !")})},initOrderType:function(t){var e=null,a=!0,n=!1,i=void 0;try{for(var s,o=g()(this.orderTypeOption);!(a=(s=o.next()).done);a=!0){var r=s.value;if(r&&!ut.a.isEmpty(r.types)&&(e=r.types.find(function(e){return e.alias===t})))break}}catch(t){n=!0,i=t}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}this.selectTypeOrder(e)},checkStatusUpdate:function(t){if("export_contract"!==t)return"upload_contract"===t?(this.contractId=this.order.relate_record_id,this.contractId?void this.$bvModal.show("detail-file-contract-1"):void alert("Không tìm thấy ID Hợp đồng cho đề xuất này !")):void("duyet"!==t||"stop_working"!==this.order.order_group||"cho_duyet"!==this.order.status?"tu_choi"!==t?this.updateStatus(t,this.rejectReason):this.$bvModal.show("reject-reason-modal-1"):this.toggleApproveModal(!0));this.exportContract()},exportContract:function(){if(this.order.relate_record_id){var t={contract_id:this.order.relate_record_id,type:0};ot.a.exportContract(t).then(function(t){t.data.success?window.open(t.data.data):ut.a.showMessage(t.data.message||"Đã có lỗi xảy ra vui lòng thử lại sau !","warning")}).catch(function(t){console.log(t),ut.a.showMessage("Có lỗi xảy ra, không xuất được hợp đồng !","warning")})}else alert("Đề xuất này không có thông tin mã hợp đồng !")},getAreaSalary:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a||(a=this.employee.user.username),a&&ot.a.getInitSalary({username:a,type_contract:this.order.contract_info.type_contract,date:t}).then(function(t){if(t.data.success){var a=t.data.data;n&&(e.order.contract_info.end_date=a.end_date),+a.salary?e.order.contract_info.salary=e.formatMoney(a.salary):e.order.contract_info.salary=null,+a.trial_salary?e.order.contract_info.trial_salary=e.formatMoney(a.trial_salary):e.order.contract_info.trial_salary=null,+a.meal_allowance?e.order.contract_info.meal_allowance=e.formatMoney(a.meal_allowance):e.order.contract_info.meal_allowance=null,+a.resp_allowance?e.order.contract_info.resp_allowance=e.formatMoney(a.resp_allowance):e.order.contract_info.resp_allowance=null,+a.mobile_allowance?e.order.contract_info.mobile_allowance=e.formatMoney(a.mobile_allowance):e.order.contract_info.mobile_allowance=null,+a.biztrip_allowance?e.order.contract_info.biztrip_allowance=e.formatMoney(a.biztrip_allowance):e.order.contract_info.biztrip_allowance=null,+a.trans_allowance?e.order.contract_info.trans_allowance=e.formatMoney(a.trans_allowance):e.order.contract_info.trans_allowance=null,e.noti.salary="Lương được tự động lấy theo lương vùng tối thiểu"}else e.noti.salary=null,ut.a.showMessage(t.data.message||"Có lỗi xảy ra khi khởi tạo dữ liệu phụ lục hợp đồng !")}).catch(function(t){console.log(t)})},toggleApproveModal:function(t){this.isShowApproveModal=t},approveResignWork:function(){this.updateStatus("duyet",this.rejectReason)},validateResignInfo:function(t){if("duyet"===t){var e=this.order.resign_info;if(["arbitrarily_quit","agree_terminate_contract","fired"].includes(this.order.resign_info.resign_type)){if(null==e.salary_option)return ut.a.showMessage("Vui lòng chọn trường Trả lương"),!1;if(this.depositInfo.total_deposited_money>0&&null==e.deposit_option)return ut.a.showMessage("Vui lòng chọn trường Trả cọc"),!1;if(["Không trả lương","Phạt lương"].includes(e.salary_option)&&null==e.resign_fine)return ut.a.showMessage("Vui lòng nhập trường Phạt lương"),!1;if(["Không trả cọc","Phạt cọc"].includes(e.deposit_option)&&null==e.resign_fine_deposit)return ut.a.showMessage("Vui lòng nhập trường Phạt cọc"),!1;if(null==e.salary_paid_date&&"Giam lương"===e.salary_option)return ut.a.showMessage("Vui lòng nhập Ngày hoàn thành giam lương"),!1;if(null==e.salary_paid_date&&"Giam cọc"===e.salary_option)return ut.a.showMessage("Vui lòng nhập Ngày hoàn thành giam cọc"),!1;if(null!=e.salary_paid_date&&e.salary_paid_date<e.resign_date)return ut.a.showMessage("Ngày hoàn thành giam lương không được nhỏ hơn ngày nghỉ việc"),!1;if(null!=e.deposit_paid_date&&e.deposit_paid_date<e.resign_date)return ut.a.showMessage("Ngày hoàn thành giam cọc không được nhỏ hơn ngày nghỉ việc"),!1;var a=pt()(e.resign_date).clone().add(30,"days");if(null!=e.salary_paid_date)if(pt()(e.salary_paid_date).isAfter(a))return ut.a.showMessage("Ngày hoàn thành giam lương cách tối đa 30 ngày so với ngày bắt đầu nghỉ"),!1;if(null!=e.deposit_paid_date)if(pt()(e.deposit_paid_date).isAfter(a))return ut.a.showMessage("Ngày hoàn thành giam lương cách tối đa 30 ngày so với ngày bắt đầu nghỉ"),!1}}return!0},updateStatus:function(t,e){var a=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t&&this.order.id)if("tu_choi"!==t||e){if("resign"===this.order.order_type_alias&&("duyet"===t||"tu_choi"===t)){if(!this.validateResignInfo(t))return;return this.toggleApproveModal(!1),void this.approveResign(t,e)}var i={id:this.order.id,action:t,reason:e,isContinueApprove:n};this.loading.orderInfo=!0,it.a.updateStatus(i).then(function(e){e.data.success?(a.order.status=e.data.update_status,ut.a.showMessage(e.data.message||"Cập nhật trạng thái thành công !","success"),e.data.censor&&Array.isArray(e.data.censor)?a.censor=e.data.censor.map(function(t){return t.id}).toString():a.censor=null,"tu_choi"===t?a.$bvModal.hide("reject-reason-modal-1"):"duyet"===t&&n&&a.toggleModalCheckBeforeApproveContract(!1),e.data.status=e.data.update_status,e.data.id=i.id,a.modalStyle&&a.$emit("changeStatusOk",e.data),a.displayFrom&&"support-staff"===a.displayFrom&&"duyet"===t&&a.$emit("confirmSuccess")):"duyet"===t&&e.data.data&&!1===e.data.data.is_valid?(a.dataCheckBeforeApproveContract=e.data.data.data_check,a.toggleModalCheckBeforeApproveContract(!0)):ut.a.showMessage(e.data.message||"Không thể chuyển trạng thái của đề xuất !","warning")}).catch(function(t){console.log(t),ut.a.showMessage("Đã có lỗi xảy ra, không thay đổi được trạng thái đề xuất !","warning")}).then(function(t){a.rejectReason=null,a.loading.orderInfo=!1})}else alert("Vui lòng nhập lý do từ chối !")},toggleModalCheckBeforeApproveContract:function(t){this.isShowModalCheckBeforeApproveContract=t},formatDateString:function(t){return t.getFullYear()+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0")},approveResign:function(t,e){var a=this;return y()(_.a.mark(function n(){var i,s,o,r,l,c,u,p,f,v,b,y,C,w,k,x,S,M,T,D,I,P;return _.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i="duyet"===t?"approve":"reject",(s=new FormData).append("type","event"),s.append("event",i),!m()(a.order.resign_info).length){n.next=38;break}o=!0,r=!1,l=void 0,n.prev=8,c=g()(d()(a.order.resign_info));case 10:if(o=(u=c.next()).done){n.next=24;break}if(p=u.value,f=h()(p,2),v=f[0],b=f[1]){n.next=17;break}return n.abrupt("continue",21);case 17:if(!(b instanceof Date)){n.next=20;break}return s.append("data["+v+"]",a.formatDateString(b)),n.abrupt("continue",21);case 20:s.append("data["+v+"]",b);case 21:o=!0,n.next=10;break;case 24:n.next=30;break;case 26:n.prev=26,n.t0=n.catch(8),r=!0,l=n.t0;case 30:n.prev=30,n.prev=31,!o&&c.return&&c.return();case 33:if(n.prev=33,!r){n.next=36;break}throw l;case 36:return n.finish(33);case 37:return n.finish(30);case 38:if(e&&s.append("data[reason]",e),a.order.note&&s.append("data[note]",a.order.note),!Array.isArray(a.order.files)){n.next=61;break}for(y=function(t){Array.isArray(t.file_add)&&t.file_add.forEach(function(e,a){s.append("files["+t.type+"]["+a+"]",e)})},C=!0,w=!1,k=void 0,n.prev=45,x=g()(a.order.files);!(C=(S=x.next()).done);C=!0)M=S.value,y(M);n.next=53;break;case 49:n.prev=49,n.t1=n.catch(45),w=!0,k=n.t1;case 53:n.prev=53,n.prev=54,!C&&x.return&&x.return();case 56:if(n.prev=56,!w){n.next=59;break}throw k;case 59:return n.finish(56);case 60:return n.finish(53);case 61:return a.loading.orderInfo=!0,n.next=64,st.a.updateResignationProposal(a.order.id,s);case 64:T=n.sent,D=T.data.success,I=T.data.message,D?(P=T.data.data,a.order.status=P.status,ut.a.showMessage(I||"Cập nhật trạng thái thành công !","success"),P.censor&&Array.isArray(P.censor)?a.censor=P.censor.map(function(t){return t.id}).toString():a.censor=null,"tu_choi"===t&&a.$bvModal.hide("reject-reason-modal-1"),a.modalStyle&&a.$emit("changeStatusOk",P),a.displayFrom&&"support-staff"===a.displayFrom&&"duyet"===t&&a.$emit("confirmSuccess")):ut.a.showMessage(I,"warning"),a.rejectReason=null,a.loading.orderInfo=!1;case 70:case"end":return n.stop()}},n,a,[[8,26,30,38],[31,,33,37],[45,49,53,61],[54,,56,60]])}))()},showAction:function(){if(!this.order||!this.duty)return!1;if("CnB"===this.duty)return!0;if(this.approve_report_wrong_identity)return!0;if(!this.censor||"string"!=typeof this.censor)return!1;var t=this.censor.split(",");return this.curUser&&this.curUser.User&&t.includes(this.curUser.User.id+"")},resetAllData:function(){this.selectGroupOrder(null),this.order.id=null,this.order.profile_id=null,this.order.status=null,this.order.files=[{type:null,file_exist:[],file_add:[]}],this.order.deadline=null,this.resetObj(this.noti),this.censor=null,this.isRelateOrder=null,delete this.order.created_by,this.resetEmployee(),this.initOrderType(this.orderType)},resetEmployee:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;for(var e in this.employee)e!==t&&this.resetObj(this.employee[e])},checkStaffCode:function(){return this.employee.masterProfile.staff_code?this.employee.masterProfile.staff_code.length<8?(this.noti.staffCode="Mã nhân viên phải bao gồm 8 ký tự số VD: 00345678",this.resetObj(this.employee.masterProfile,"staff_code"),this.resetEmployee("masterProfile"),void this.resetData()):8===this.employee.masterProfile.staff_code.length?(this.getProfileInfo(this.employee.masterProfile.staff_code),void this.getDepositInfo(this.employee.masterProfile.staff_code)):void ut.a.validValue(this.employee.masterProfile,"staff_code",{length:8}):(this.noti.staffCode=null,this.order.profile_id=null,this.resetEmployee(),void this.resetData())},checkToMonth:function(t){this.order.from_month&&pt()(t).isBefore(this.order.from_month)&&(alert("Tháng kết thúc phải lớn hơn tháng bắt đầu"),this.order.to_month=null)},validSensitiveData:function(){var t="";return"modify"===this.order.order_group&&(28!=+this.order.order_type_id||this.configSensitiveOrderData.old_personal_id_number_28||(t+="- CMND/CCCD cũ\n"),28!=+this.order.order_type_id||this.configSensitiveOrderData.new_personal_id_number_28||(t+="- CMND/CCCD mới\n"),29!=+this.order.order_type_id||this.configSensitiveOrderData.old_phone_29||(t+="- Số điện thoại cũ\n"),29!=+this.order.order_type_id||this.configSensitiveOrderData.new_phone_29||(t+="- Số điện thoại mới\n")),24!=+this.order.order_type_id||this.configSensitiveOrderData.wife_personal_number||(t+="- CMND/CCCD vợ\n"),this.showHouseHold&&!l()(this.configShowHouseHold).every(function(t){return!0===t})&&(t+="- CMND phần phụ lục gia đình\n"),t||!0},validData:function(){var t=this,e="";if(this.order.order_group||(e+="- Loại khai báo\n"),this.order.order_type_id||(e+="- Phương án đề xuất\n"),this.order.profile_id||(e+="- Chọn người lao động\n"),this.order.order_category&&"insurance"!==this.order.order_category||(this.order.additional_info.birthday_status||(e+="- Chọn trạng thái ngày sinh\n",this.order.additional_info.birthday_status=""),this.order.start_date||("down"===this.order.order_group&&(e+="- Ngày bắt đầu nghỉ\n"),this.modifyConfig[this.order.order_type_id]&&this.modifyConfig[this.order.order_type_id].showTimeChange&&(e+="- Ngày bắt đầu điều chỉnh\n")),this.order.from_month||("up"===this.order.order_group&&(e+="- Tháng bắt đầu tăng\n"),"down"===this.order.order_group&&(e+="- Tháng bắt đầu giảm\n"),this.modifyConfig[this.order.order_type_id]&&this.modifyConfig[this.order.order_type_id].showTimeChange&&(e+="- Tháng bắt đầu điều chỉnh\n")),"modify"===this.order.order_group&&(ut.a.isEmpty(this.order.old_value)&&(7==+this.order.order_type_id&&(e+="- Mức đóng BHXH cũ\n"),8==+this.order.order_type_id&&(e+="- Nơi làm việc cũ\n"),9==+this.order.order_type_id&&(e+="- Vị trí cũ\n"),10==+this.order.order_type_id&&(e+="- Giới tính sai\n"),11==+this.order.order_type_id&&(e+="- Quốc tịch sai\n"),12==+this.order.order_type_id&&(e+="- Ngày sinh sai\n"),13==+this.order.order_type_id&&(e+="- Họ và tên sai\n"),28==+this.order.order_type_id&&(e+="- CMND/CCCD cũ\n"),30==+this.order.order_type_id&&(e+="- Nơi đăng ký KCB cũ\n")),ut.a.isEmpty(this.order.new_value)&&(7==+this.order.order_type_id&&(e+="- Mức đóng BHXH mới\n"),8==+this.order.order_type_id&&(e+="- Nơi làm việc mới\n"),9==+this.order.order_type_id&&(e+="- Vị trí mới\n"),10==+this.order.order_type_id&&(e+="- Giới tính đúng\n"),11==+this.order.order_type_id&&(e+="- Quốc tịch đúng\n"),12==+this.order.order_type_id&&(e+="- Ngày sinh đúng\n"),13==+this.order.order_type_id&&(e+="- Họ và tên đúng\n"),28==+this.order.order_type_id&&(e+="- CMND/CCCD mới\n"),30==+this.order.order_type_id&&(e+="- Nơi đăng ký KCB mới\n")),31==+this.order.order_type_id&&((ut.a.isEmpty(this.order.additional_info.new_resident_province)||ut.a.isEmpty(this.order.additional_info.new_resident_district)||ut.a.isEmpty(this.order.additional_info.new_resident_commune))&&(e+="- Thông tin thường trú mới\n"),(ut.a.isEmpty(this.order.additional_info.old_resident_province)||ut.a.isEmpty(this.order.additional_info.old_resident_district)||ut.a.isEmpty(this.order.additional_info.old_resident_commune))&&(e+="- Thông tin thường trú cũ\n"))),"up"===this.order.order_group&&[1].includes(+this.order.order_type_id)&&(this.order.additional_info.insurance_register||this.order.additional_info.insurance_book_number?this.order.additional_info.number_household||(e+="- Mã hộ gia đình\n"):this.order.household&&this.order.household.length&&(1!==this.order.household.length||this.canAddMember())||(e+="- Mã số BHXH hoặc phụ lục gia đình\n"))),"contract"===this.order.order_group&&(this.requireContractField.forEach(function(a){if(!t.order.contract_info[a])switch(a){case"contract_id":return void(e+="- ID hợp đồng cần thay đổi lương, phụ lục\n");case"salary":return void(e+="- Lương chính thức\n");case"start_date":return void(e+="- Ngày bắt đầu hợp đồng\n");case"end_date":return void(e+="- Ngày kết thúc\n");case"type_contract":return void(e+="- Loại hợp đồng\n");case"trial_salary":return void(e+="- Lương thử việc\n");case"effect_date":e+="- Ngày lương bắt đầu hiệu lực\n"}}),"new_contract"!==this.order.order_type_alias||this.idOrder||this.noti.oldContract&&!this.oldContractResolve.plan&&(e+="- phương án xử lý hợp đồng cũ\n"),"new_appendix"===this.order.order_type_alias&&(this.order.note||(e+="- Lý do thay đổi lương, phụ cấp\n"))),"stop_working"===this.order.order_group){if(!ut.a.isEmpty(this.order.resign_info)&&this.order.resign_info.resign_fine){var a=parseFloat(this.order.resign_info.resign_fine);(!o()(a)||a<0||a>100)&&(e+="- % Phạt lương phải là số nguyên từ 0 - 100\n")}if(!ut.a.isEmpty(this.order.resign_info)&&this.order.resign_info.resign_fine_deposit){var n=parseFloat(this.order.resign_info.resign_fine_deposit);(!o()(n)||n<0||n>100)&&(e+="- % Phạt lương phải là số nguyên từ 0 - 100\n")}}return e||!0},inputMoney:function(t,e){return ut.a.inputMoney(t,e)},formatMoney:function(t){return ut.a.formatMoney(t)},formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD-MM-YYYY";return ut.a.formatDate(t,e)},validInput:function(t,e,a,n,i){n&&n(t[t]),ut.a.validValue(t,e,a),i&&i(t[e])},updateOrder:function(){var t=this;if(this.editData){var e=this.validSensitiveData();if(!0!==e)return void alert("Vui lòng kiểm tra lại thông tin:\n"+e)}var a=this.validData();if(!0===a){var n=new FormData;for(var s in this.order)("object"!==i()(this.order[s])||this.order[s]instanceof Date)&&(this.order[s]?this.order[s]instanceof Date?n.append(s,this.order[s].toDateString()):n.append(s,this.order[s]):n.append(s,""));var o={};for(var r in this.order.additional_info||{})this.order.additional_info[r]&&(o[r]=this.order.additional_info[r]);n.append("additional_info",w()(o));var l={};for(var c in this.order.regime_data||{})this.order.regime_data[c]&&(l[c]=this.order.regime_data[c]);if(n.append("regime_data",w()(l)),Array.isArray(this.order.files)&&this.order.files.length){var d=!0,u=!1,h=void 0;try{for(var p,m=g()(this.order.files);!(d=(p=m.next()).done);d=!0){var f=p.value;if(Array.isArray(f.file_add))for(var v in f.file_add)f.file_add[v]&&n.append(f.type+"["+v+"]",f.file_add[v])}}catch(t){u=!0,h=t}finally{try{!d&&m.return&&m.return()}finally{if(u)throw h}}}if(Array.isArray(this.order.household)&&this.order.household.length){for(var _ in this.order.household)this.order.household[_].fullname&&this.order.household[_].relation||this.order.household.splice(_,1);this.order.household.length&&n.append("household",w()(this.order.household))}if("contract"===this.order.order_category&&n.append("contract_info",w()(this.order.contract_info)),"stop_working"===this.order.order_group){for(var b in this.order.resign_info)this.order.resign_info[b]instanceof Date&&(this.order.resign_info[b]=this.formatDateString(this.order.resign_info[b])),""===this.order.resign_info[b]&&(this.order.resign_info[b]=null);n.append("resign_info",w()(this.order.resign_info))}this.relate_order.type&&this.relate_order.group&&n.append("relate_order",w()(this.relate_order)),this.oldContractResolve.plan&&this.oldContractResolve.id&&n.append("old_contract_resolve",w()(this.oldContractResolve)),this.$route.query.sos_id&&n.append("sos_id",this.$route.query.sos_id),this.$startLoading(),it.a.updateOrder(n).then(function(e){if(e.data.success)if(ut.a.showMessage(e.data.message||"Thêm/Cập nhật đề xuất thành công","success"),t.order.id)t.isRelateOrder&&t.modalStyle?(t.resetAllData(),ut.a.cleanToast(),t.$emit("addOrderOk",e.data.data)):t.$emit("addOrderOk",e.data.data);else{var a=e.data.relateOrder;a&&a.create_new&&a.hrOrder&&a.hrOrder.id?(t.detailOrder(a.hrOrder.id),t.isRelateOrder=!0,ut.a.showToast("Vui lòng nhập dầy đủ thông tin của đề xuất phát sinh kèm theo này","warning")):t.modalStyle?(t.resetAllData(),t.$emit("addOrderOk",e.data.data)):(t.isRelateOrder=!1,t.order.id=e.data.data.id,t.relateOrderData=a)}else ut.a.showMessage(e.data.message||"Không cập nhật được thông tin đề xuất !","warning")}).catch(function(t){console.log(t)}).then(function(e){t.order.files.file_add=[],t.$stopLoading()})}else alert("Vui lòng nhập đủ thông tin:\n"+a)},detailOrder:function(t){var e=this;t||(t=this.idOrder),t&&(this.loading.orderInfo=!0,it.a.detailOrder({id:t}).then(function(t){t.data.success&&t.data.data?(e.order=t.data.data,e.duty=t.data.duty[e.order.order_category],e.censor=t.data.censor,e.fieldDesc=t.data.fieldDesc||[],e.relateInfo=t.data.relateInfo||[],t.data.data.profile_id&&(e.employee.masterProfile.staff_code=ut.a.genCode(t.data.data.profile_id,"","",8),e.getProfileInfo(e.employee.masterProfile.staff_code),e.getDepositInfo(t.data.data.profile_id)),t.data.relateOrder&&(e.relateOrderData=t.data.relateOrder)):ut.a.showMessage(t.data.message||"Không lấy được đề xuất, vui lòng thử lại sau !","warning")}).catch(function(t){ut.a.showMessage("Có lỗi xảy ra, vui lòng thử lại sau !","warning")}).then(function(t){e.showHouseHold&&e.order.household.forEach(function(t){t.hasOwnProperty("id")?t.key=t.id:t.key=t.fullname+"-"+new Date(t.birthday).toLocaleDateString("en-CA"),e.configShowHouseHold[t.key]=!1})}).then(function(t){e.loading.orderInfo=!1}))},getProfileInfo:function(t){var e=this;if(t||(t=this.profileId),t){this.idOrder||(this.order.household=[]),this.loading.profileInfo=!0;var a={profileId:t,category:this.order.order_category,group:this.order.order_group,alias:this.order.order_type_alias};it.a.getProfile(a).then(function(t){t.data.success?(e.employee=t.data.data,e.employee.masterProfile.birthday&&(e.employee.masterProfile.birthday=pt()(e.employee.masterProfile.birthday).format("DD-MM-YYYY")),e.employee.masterProfile.join_date&&(e.employee.masterProfile.join_date=pt()(e.employee.masterProfile.join_date).format("DD-MM-YYYY")),e.employee.masterProfile.trial_date&&(e.employee.masterProfile.trial_date=pt()(e.employee.masterProfile.trial_date).format("DD-MM-YYYY")),e.employee.masterProfile.contract_date&&(e.employee.masterProfile.contract_date=pt()(e.employee.masterProfile.contract_date).format("DD-MM-YYYY")),e.employee.masterProfile.doi_personal_id_number&&(e.employee.masterProfile.doi_personal_id_number=pt()(e.employee.masterProfile.doi_personal_id_number).format("DD-MM-YYYY")),e.employee.empProfile.start_date_day&&(e.employee.empProfile.start_date_day=pt()(e.employee.empProfile.start_date_day).format("DD-MM-YYYY")),e.employee.salary.salary&&ut.a.inputMoney(e.employee.salary,"salary"),e.employee.salary.trial_salary&&ut.a.inputMoney(e.employee.salary,"trial_salary"),e.employee.salary.meal_allowance&&ut.a.inputMoney(e.employee.salary,"meal_allowance"),e.employee.salary.trans_allowance&&ut.a.inputMoney(e.employee.salary,"trans_allowance"),e.employee.salary.resp_allowance&&ut.a.inputMoney(e.employee.salary,"resp_allowance"),e.employee.salary.biztrip_allowance&&ut.a.inputMoney(e.employee.salary,"biztrip_allowance"),e.employee.salary.mobile_allowance&&ut.a.inputMoney(e.employee.salary,"mobile_allowance"),e.idOrder||(e.order.profile_id=e.employee.masterProfile.id)):(ut.a.showMessage(t.data.message||"Không lấy được thông tin người lao động, vui lòng thử lại sau !","warning"),e.resetObj(e.employee.masterProfile,"staff_code"),e.resetEmployee("masterProfile"),e.resetData(),e.noti.staffCode=t.data.message||"Không tồn tại nhân viên có mã "+e.employee.masterProfile.staff_code)}).catch(function(t){ut.a.showMessage("Có lỗi xảy ra, vui lòng thử lại sau !","warning")}).then(function(t){e.loading.profileInfo=!1})}},getDepositInfo:function(t){var e=this,a={master_id:t||this.id||+this.$route.params.id};lt.a.getProfile(a).then(function(t){t.data.success&&(e.depositInfo=t.data.data.depositInfo)})},initDataFromEmployee:function(){"insurance"===this.order.order_category&&(this.employee.masterProfile&&this.employee.masterProfile.id&&(this.employee.contract&&this.employee.contract.id?["indefinite","definite","definite_24","probation"].includes(this.employee.contract.type_contract)?this.employee.contract.end_date&&pt()().isAfter(this.employee.contract.end_date)&&(this.noti.staffCode=(this.contractType[this.employee.contract.type_contract]||"Hợp đồng")+" của nhân viên này đã hết hạn"):this.noti.staffCode="Hợp đồng của nhân viên này"+(this.contractType[this.employee.contract.type_contract]?" là "+this.contractType[this.employee.contract.type_contract]:"")+" không phải hợp đồng lao động":this.noti.staffCode="Nhân viên này chưa có hợp đồng lao động"),this.order.additional_info.resp_allowance||(this.order.additional_info.resp_allowance=+this.employee.salary.resp_allowance||null,this.order.additional_info.resp_allowance&&ut.a.inputMoney(this.order.additional_info,"resp_allowance"))),this.assignOldData()},canAddMember:function(){if(!this.order.household||!this.order.household.length)return!0;var t=this.order.household[this.order.household.length-1];return t.id||t.fullname&&t.relation&&t.birthday},canAddLicenses:function(){if(!this.order.files||!this.order.files.length)return!0;var t=this.order.files[this.order.files.length-1];return!!(t&&t.type&&(t.file_add&&t.file_add.length||t.file_exist&&t.file_exist.length))},addLicenses:function(){this.order.files.push({type:null,file_add:[],file_exist:[]})},deleteLicense:function(t){this.order.files[t]&&(this.order.files[t].file_exist&&this.order.files[t].file_exist.length?ut.a.showMessage("Không thể xóa chứng từ đã upload !"):this.order.files.splice(t,1))},addFamilyMember:function(){var t=ut.a.generateUniqueId("household");this.order.household.push({fullname:"",birthday_status:"",birthday:"",gender:"",nationality:"Vietnam",ethnic:"kinh",relation:"",personal_id:"",key:t}),this.configShowHouseHold[t]=!0},deleteFamilyMember:function(t){this.order.household[t]&&(delete this.configShowHouseHold[this.order.household[t].key],this.order.household.splice(t,1))},showInputFile:function(){return"supply_bhxh"===this.order.order_group||"supply_bhyt"===this.order.order_group||"regime"===this.order.order_group||"stop_working"===this.order.order_group||this.modifyConfig[this.order.order_type_id]&&this.modifyConfig[this.order.order_type_id].inputFile},showTimeChange:function(){return"down"===this.order.order_group||this.modifyConfig[this.order.order_type_id]&&this.modifyConfig[this.order.order_type_id].showTimeChange},selectTypeOrder:function(t){t?(this.order.order_type_id=t.id,this.order.order_type_alias=t.alias,this.order.order_type_name=t.name,this.order.order_group=t.group_alias,this.order.group_name=t.group_name,this.order.order_category=t.category,"new_contract"===t.alias&&(this.relate_order.group="up",this.relate_order.type=null)):(this.order.order_type_id=null,this.order.order_type_alias=null,this.order.order_type_name=null,this.relate_order.group=null,this.relate_order.type=null),this.order.new_value=null,this.order.old_value=null,this.order.additional_info.province_hospital_register_old=null,this.order.additional_info.province_hospital_register_new=null,this.modifyConfig[this.order.order_type_id]&&!this.modifyConfig[this.order.order_type_id].inputFile&&(this.order.file=[]),this.order.regime_data.birth_date=null,this.order.regime_data.num_children=null,this.order.regime_data.birth_type=null,this.order.regime_data.wife_personal_number=null,this.order.regime_data.child_health_ins_number=null},assignOldData:function(){["new_contract","new_appendix"].includes(this.order.order_type_alias)?this.employee.contract.id&&(this.noti.salary="Lương được tự động lấy từ hợp đồng cũ",this.employee.salary.salary&&(this.order.contract_info.salary=this.employee.salary.salary),this.employee.salary.trial_salary&&(this.order.contract_info.trial_salary=this.employee.salary.trial_salary),this.employee.salary.resp_allowance&&(this.order.contract_info.resp_allowance=this.employee.salary.resp_allowance),this.employee.salary.mobile_allowance&&(this.order.contract_info.mobile_allowance=this.employee.salary.mobile_allowance),this.employee.salary.meal_allowance&&(this.order.contract_info.meal_allowance=this.employee.salary.meal_allowance),this.employee.salary.trans_allowance&&(this.order.contract_info.trans_allowance=this.employee.salary.trans_allowance),this.employee.salary.biztrip_allowance&&(this.order.contract_info.biztrip_allowance=this.employee.salary.biztrip_allowance),"new_appendix"===this.order.order_type_alias&&(this.order.contract_info.has_kpi=!!+this.employee.contract.has_kpi)):(this.noti.salary=null,this.resetObj(this.order.contract_info)),"modify_pay_amount"===this.order.order_type_alias&&(this.order.old_value=this.employee.salary.salary,this.inputMoney(this.order,"old_value")),"modify_position"===this.order.order_type_alias&&(this.order.old_value=this.employee.empProfile.position_job),"modify_workplace"===this.order.order_type_alias&&(this.order.old_value=this.employee.user.station_id),"modify_pay_rate"===this.order.order_type_alias&&(this.order.old_value=+this.employee.insurance.company_cost+ +this.employee.insurance.worker_cost)},selectGroupOrder:function(t){t?(this.order.group_name=t.name,this.order.order_group=t.alias,this.order.order_category=t.category):(this.order.group_name=null,this.order.order_group=null,this.order.order_category=null);var e=null;if(t){var a=this.orderTypeOption.find(function(e){return e.alias===t.alias})||{},n=a.types||[];1===n.length?e=n[0]:"up"===a.alias?e=n.find(function(t){return"TM"===t.alias}):"contract"===a.alias&&(e=n.find(function(t){return"new_contract"===t.alias}))}e?this.selectTypeOrder(e):(this.order.order_type_id=null,this.order.order_type_alias=null,this.order.order_type_name=null),this.resetData()},resetData:function(){this.order.new_value=null,this.order.note=null,this.order.old_value=null,this.order.start_date=null,this.order.to_month=null,this.order.from_month=null,this.order.files=[{type:null,file_add:[],file_exist:[]}],this.resetObj(this.noti,"staffCode"),this.order.additional_info?this.resetObj(this.order.additional_info):this.order.additional_info={},this.order.regime_data?this.resetObj(this.order.regime_data):this.order.regime_data={},this.order.contract_info?this.resetObj(this.order.contract_info):this.order.contract_info={},this.order.resign_info?this.resetObj(this.order.resign_info):this.order.resign_info={},this.order.household=[]},selectPosition:function(t){this.order.new_value=t&&t.id},resetObj:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;ut.a.resetData(t,e)},selectValue:function(t,e,a,n){n?t?e[a]=t[n]||null:t[n]=null:e[a]=t||null},handleSelectedWorkChangeType:function(t){this.order.resign_info.resign_type=t?t.alias:null,["arbitrarily_quit","agree_terminate_contract","fired"].includes(this.order.resign_info.resign_type)||(this.order.resign_info.salary_option=null,this.order.resign_info.deposit_option=null,this.order.resign_info.salary_paid_date=null,this.order.resign_info.deposit_paid_date=null,this.order.resign_info.resign_fine_deposit=null,this.order.resign_info.resign_fine=null)},handleSelectedWorkChangeReason:function(t){this.order.resign_info.resign_reason=t?t.alias:null},selectContractType:function(t){this.order.contract_info.type_contract=t?t.value:null,this.relate_order.group="up",this.relate_order.type=null,this.suggestEndDateContract(this.order.contract_info.start_date),this.suggestKpi(this.order.contract_info.type_contract)}}};var bt=function(t){a("VIwv")},yt=Object(R.a)(_t,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"small-scrollbar multiselect-ghtk"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.orderInfo,expression:"loading.orderInfo"}],staticClass:"mb-2 header-form"},[a("b-row",[a("b-col",{attrs:{md:"6"}},[a("h4",{directives:[{name:"show",rawName:"v-show",value:!t.modalStyle,expression:"!modalStyle"}]},[t._v("Thay đổi BHXH, BHYT, Hợp đồng")]),t._v(" "),t.showAction(t.order)&&t.flowAction[t.duty]&&!t.isRelateOrder?a("div",t._l(t.flowAction[t.duty][t.order.status]||[],function(e,n){return a("span",{key:n+"_btn"},[!e.order_group||e.order_group.includes(t.order.order_group)?a("b-btn",{staticClass:"mr-1",attrs:{variant:"outline-ghtk"},on:{click:function(a){return t.checkStatusUpdate(e.action)}}},[t._v("\n                "+t._s(e.text||t.statusDesc[e.action]&&t.statusDesc[e.action].desc)+"\n              ")]):t._e()],1)}),0):t._e(),t._v(" "),"co_ket_qua"===t.order.status&&t.curUser&&t.curUser.User&&t.curUser.User.id&&t.order.created_by&&+t.order.created_by.id==+t.curUser.User.id?a("div",[a("b-btn",{staticClass:"w-25",attrs:{variant:"outline-ghtk"},on:{click:function(e){return t.checkStatusUpdate("nhan_ban_giao")}}},[t._v("\n              Đã nhận bàn giao/thanh toán\n            ")])],1):t._e()]),t._v(" "),a("b-col",{staticClass:"text-right",attrs:{md:"6"}},[a("b-btn",{directives:[{name:"show",rawName:"v-show",value:!t.modalStyle,expression:"!modalStyle"}],attrs:{variant:"light",to:{name:"list-order"}}},[a("i",{staticClass:"fas fa-arrow-left"}),t._v(" Danh sách đề xuất")]),t._v(" "),t.allowUpdate&&t.edit?a("b-btn",{staticClass:"w-25",attrs:{variant:"ghtk",disabled:!t.canUpdate},on:{click:t.updateOrder}},[t._v("\n            "+t._s(t.order.id?"CHỈNH SỬA":"ĐỀ XUẤT")+"\n          ")]):t._e()],1)],1)],1),t._v(" "),a("div",{staticClass:"order-type"},[a("b-form-row",[a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Loại khai báo"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Loại khai báo "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("select-order-group",{attrs:{"group-options":t.orderTypeOption,group:t.order.order_group,disabled:!!t.order.id,"category-group":!0,multiple:!1},on:{input:t.selectGroupOrder}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Phương án"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Phương án "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("select-order-type",{attrs:{"type-options":t.orderTypeOption,"has-group":!1,"group-alias":t.order.order_group,type:t.order.order_type_id,disabled:!!t.order.id},on:{input:t.selectTypeOrder}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Hạn duyệt"}},[a("Datepicker",{attrs:{language:t.language.vi,format:"dd/MM/yyyy",placeholder:"dd/mm/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},model:{value:t.order.deadline,callback:function(e){t.$set(t.order,"deadline",e)},expression:"order.deadline"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Trạng thái xử lý"}},[a("select-order-status",{attrs:{status:t.order.status,disabled:!0,placeholder:""},on:{select:function(e){t.order.status=e?e.value:null}}})],1)],1)],1),t._v(" "),a("div",{staticClass:"employee-info"},[a("div",{staticClass:"header mb-3 mt-1 font-weight-bold"},[t._v("\n        Thông tin người lao động\n      ")]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.profileInfo,expression:"loading.profileInfo"}],staticClass:"position-relative"},[a("b-alert",{attrs:{show:!!t.noti.staffCode&&!t.isRelateOrder,variant:"warning"}},[a("b",[t._v("Lưu ý: ")]),t._v(" "),a("span",{domProps:{innerHTML:t._s(t.noti.staffCode)}})]),t._v(" "),a("b-form-row",[a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.showMpField("staff_code"),expression:"showMpField('staff_code')"}],staticClass:"col-md-3",attrs:{label:"Mã nhân viên",disabled:!(!t.profileId&&!t.order.id)}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Mã nhân viên "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.employee.masterProfile.staff_code,expression:"employee.masterProfile.staff_code"}],staticClass:"form-control",class:{"is-invalid":""===t.employee.masterProfile.staff_code},attrs:{type:"number"},domProps:{value:t.employee.masterProfile.staff_code},on:{input:[function(e){e.target.composing||t.$set(t.employee.masterProfile,"staff_code",e.target.value)},t.checkStaffCode]}})]),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.showMpField("fullname"),expression:"showMpField('fullname')"}],staticClass:"col-md-3",attrs:{label:"Họ và tên",disabled:""}},[a("b-input",{model:{value:t.employee.masterProfile.fullname,callback:function(e){t.$set(t.employee.masterProfile,"fullname",e)},expression:"employee.masterProfile.fullname"}})],1),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.showMpField("insurance_desc"),expression:"showMpField('insurance_desc')"}],staticClass:"col-md-3",attrs:{label:"Trạng thái BHXH hiện tại",disabled:""}},[a("b-input",{model:{value:t.employee.insurance.insurance_desc,callback:function(e){t.$set(t.employee.insurance,"insurance_desc",e)},expression:"employee.insurance.insurance_desc"}})],1),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.showMpField("mp_status"),expression:"showMpField('mp_status')"}],staticClass:"col-md-3",attrs:{label:"Trạng thái MP",disabled:""}},[a("b-input",{model:{value:t.employee.masterProfile.status,callback:function(e){t.$set(t.employee.masterProfile,"status",e)},expression:"employee.masterProfile.status"}})],1),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.showMpField("position_name"),expression:"showMpField('position_name')"}],staticClass:"col-md-3",attrs:{label:"Vị trí",disabled:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.employee.empProfile.position_name,expression:"employee.empProfile.position_name"}],staticClass:"form-control",domProps:{value:t.employee.empProfile.position_name},on:{input:function(e){e.target.composing||t.$set(t.employee.empProfile,"position_name",e.target.value)}}})]),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.showMpField("station_name"),expression:"showMpField('station_name')"}],staticClass:"col-md-3",attrs:{label:"Nơi làm việc (kho hiện tại)",disabled:""}},[a("b-input",{model:{value:t.employee.user.station_name,callback:function(e){t.$set(t.employee.user,"station_name",e)},expression:"employee.user.station_name"}})],1),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.showMpField("work_type"),expression:"showMpField('work_type')"}],staticClass:"col-md-3",attrs:{label:"Hình thức làm việc",disabled:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.employee.user.work_type,expression:"employee.user.work_type"}],staticClass:"form-control",domProps:{value:t.employee.user.work_type},on:{input:function(e){e.target.composing||t.$set(t.employee.user,"work_type",e.target.value)}}})]),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.showMpField("join_date"),expression:"showMpField('join_date')"}],staticClass:"col-md-3",attrs:{label:"Ngày vào",disabled:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.employee.masterProfile.join_date,expression:"employee.masterProfile.join_date"}],staticClass:"form-control",domProps:{value:t.employee.masterProfile.join_date},on:{input:function(e){e.target.composing||t.$set(t.employee.masterProfile,"join_date",e.target.value)}}})]),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.showMpField("trial_date"),expression:"showMpField('trial_date')"}],staticClass:"col-md-3",attrs:{label:"Ngày thử việc",disabled:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.employee.masterProfile.trial_date,expression:"employee.masterProfile.trial_date"}],staticClass:"form-control",domProps:{value:t.employee.masterProfile.trial_date},on:{input:function(e){e.target.composing||t.$set(t.employee.masterProfile,"trial_date",e.target.value)}}})]),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.showMpField("start_date_day"),expression:"showMpField('start_date_day')"}],staticClass:"col-md-3",attrs:{label:"Ngày lương chuẩn",disabled:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.employee.empProfile.start_date_day,expression:"employee.empProfile.start_date_day"}],staticClass:"form-control",domProps:{value:t.employee.empProfile.start_date_day},on:{input:function(e){e.target.composing||t.$set(t.employee.empProfile,"start_date_day",e.target.value)}}})]),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.showMpField("contract_date"),expression:"showMpField('contract_date')"}],staticClass:"col-md-3",attrs:{label:"Ngày chính thức",disabled:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.employee.masterProfile.contract_date,expression:"employee.masterProfile.contract_date"}],staticClass:"form-control",domProps:{value:t.employee.masterProfile.contract_date},on:{input:function(e){e.target.composing||t.$set(t.employee.masterProfile,"contract_date",e.target.value)}}})]),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.showMpField("trial_time"),expression:"showMpField('trial_time')"}],staticClass:"col-md-3",attrs:{label:"Thời gian thử việc (tháng)",disabled:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.employee.masterProfile.trial_time,expression:"employee.masterProfile.trial_time"}],staticClass:"form-control",domProps:{value:t.employee.masterProfile.trial_time},on:{input:function(e){e.target.composing||t.$set(t.employee.masterProfile,"trial_time",e.target.value)}}})]),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.showMpField("birthday_status"),expression:"showMpField('birthday_status')"}],staticClass:"col-md-3",attrs:{label:"Chỉ có năm sinh *"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Chỉ có năm sinh "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("b-select",{attrs:{options:t.birthdayStatusOptions,state:""!==t.order.additional_info.birthday_status&&null},model:{value:t.order.additional_info.birthday_status,callback:function(e){t.$set(t.order.additional_info,"birthday_status",e)},expression:"order.additional_info.birthday_status"}})],1),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.showMpField("birthday"),expression:"showMpField('birthday')"}],staticClass:"col-md-3",attrs:{label:"Ngày sinh",disabled:""}},[a("b-input",{model:{value:t.employee.masterProfile.birthday,callback:function(e){t.$set(t.employee.masterProfile,"birthday",e)},expression:"employee.masterProfile.birthday"}})],1),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.showMpField("gender"),expression:"showMpField('gender')"}],staticClass:"col-md-3",attrs:{label:"Giới tính",disabled:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.employee.masterProfile.gender,expression:"employee.masterProfile.gender"}],staticClass:"form-control",domProps:{value:t.employee.masterProfile.gender},on:{input:function(e){e.target.composing||t.$set(t.employee.masterProfile,"gender",e.target.value)}}})]),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.showMpField("personal_id_number"),expression:"showMpField('personal_id_number')"}],staticClass:"col-md-3",attrs:{label:"CMND/CCCD"}},[a("SensitiveFormInput",{attrs:{"data-input":t.employee.masterProfile.personal_id_number,"user-id":t.employee.user.id,type:"identity_card_number",source:"update-hr-order"},on:{returnRawData:function(e){return t.viewOriginSensitiveData(e,"personal_id_number")}}})],1),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.showMpField("doi_personal_id_number"),expression:"showMpField('doi_personal_id_number')"}],staticClass:"col-md-3",attrs:{label:"Ngày cấp",disabled:""}},[a("b-input",{model:{value:t.employee.masterProfile.doi_personal_id_number,callback:function(e){t.$set(t.employee.masterProfile,"doi_personal_id_number",e)},expression:"employee.masterProfile.doi_personal_id_number"}})],1),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.showMpField("poi_personal_id_number"),expression:"showMpField('poi_personal_id_number')"}],staticClass:"col-md-3",attrs:{label:"Nơi cấp",disabled:""}},[a("b-input",{model:{value:t.employee.masterProfile.poi_personal_id_number,callback:function(e){t.$set(t.employee.masterProfile,"poi_personal_id_number",e)},expression:"employee.masterProfile.poi_personal_id_number"}})],1),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.showMpField("resident_address_province"),expression:"showMpField('resident_address_province')"}],staticClass:"col-md-3",attrs:{label:"Tỉnh/ TP thường trú",disabled:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.employee.masterProfile.resident_address_province,expression:"employee.masterProfile.resident_address_province"}],staticClass:"form-control",domProps:{value:t.employee.masterProfile.resident_address_province},on:{input:function(e){e.target.composing||t.$set(t.employee.masterProfile,"resident_address_province",e.target.value)}}})]),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.showMpField("resident_address_district"),expression:"showMpField('resident_address_district')"}],staticClass:"col-md-3",attrs:{label:"Quận/ Huyện thường trú",disabled:""}},[a("b-input",{model:{value:t.employee.masterProfile.resident_address_district,callback:function(e){t.$set(t.employee.masterProfile,"resident_address_district",e)},expression:"employee.masterProfile.resident_address_district"}})],1),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.showMpField("resident_address_sub_district"),expression:"showMpField('resident_address_sub_district')"}],staticClass:"col-md-3",attrs:{label:"Xã/Phường thường trú",disabled:""}},[a("b-input",{model:{value:t.employee.masterProfile.resident_address_sub_district,callback:function(e){t.$set(t.employee.masterProfile,"resident_address_sub_district",e)},expression:"employee.masterProfile.resident_address_sub_district"}})],1),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.showMpField("resident_address_detail"),expression:"showMpField('resident_address_detail')"}],staticClass:"col-md-3",attrs:{label:"Chi tiết thường trú",disabled:""}},[a("b-input",{model:{value:t.employee.masterProfile.resident_address_detail,callback:function(e){t.$set(t.employee.masterProfile,"resident_address_detail",e)},expression:"employee.masterProfile.resident_address_detail"}})],1),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.showMpField("tel"),expression:"showMpField('tel')"}],staticClass:"col-md-3",attrs:{label:"Số điện thoại"}},[a("SensitiveFormInput",{attrs:{"data-input":t.employee.masterProfile.tel,"user-id":t.employee.user.id,type:"tel",source:"update-hr-order"},on:{returnRawData:function(e){return t.viewOriginSensitiveData(e,"tel")}}})],1)],1)],1)]),t._v(" "),a("b-alert",{attrs:{show:!!t.isRelateOrder,variant:"warning"}},[a("b",[t._v("Vui lòng nhập đủ thông tin cho đề xuất liên quan này")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.order.order_category||"insurance"===t.order.order_category,expression:"!order.order_category || order.order_category === 'insurance'"}]},["up"===t.order.order_group?a("div",[a("div",{staticClass:"social-insurance"},[a("div",{staticClass:"header mb-3 mt-2 font-weight-bold"},[t._v("\n          BHXH\n        ")]),t._v(" "),a("div",[a("b-form-row",[a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Mã số BHXH (nếu đã có)"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.additional_info.insurance_register,expression:"order.additional_info.insurance_register"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.order.additional_info.insurance_register},on:{input:[function(e){e.target.composing||t.$set(t.order.additional_info,"insurance_register",e.target.value)},function(e){return t.validInput(t.order.additional_info,"insurance_register",{length:10,min:0})}]}})]),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Số sổ BHXH (Với mẫu sổ cũ từ 01/8/2017 về trước)"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.additional_info.insurance_book_number,expression:"order.additional_info.insurance_book_number"}],staticClass:"form-control",attrs:{disabled:!!t.order.additional_info.insurance_register,type:"number"},domProps:{value:t.order.additional_info.insurance_book_number},on:{input:[function(e){e.target.composing||t.$set(t.order.additional_info,"insurance_book_number",e.target.value)},function(e){return t.validInput(t.order.additional_info,"insurance_book_number",{length:10,min:0})}]}})]),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Người giữ sổ BHXH"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Người giữ sổ BHXH "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("b-select",{attrs:{options:t.insuranceBookStatusOptions},model:{value:t.order.additional_info.keep_insurance_book_status,callback:function(e){t.$set(t.order.additional_info,"keep_insurance_book_status",e)},expression:"order.additional_info.keep_insurance_book_status"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:""}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Mã hộ gia đình (nếu đã có sổ BHXH) "),a("span",{directives:[{name:"show",rawName:"v-show",value:!(!t.order.additional_info.insurance_register&&!t.order.additional_info.insurance_book_number),expression:"!!(order.additional_info.insurance_register || order.additional_info.insurance_book_number)"}],staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("b-input",{attrs:{state:!((t.order.additional_info.insurance_register||t.order.additional_info.insurance_book_number)&&!t.order.additional_info.number_household)&&null},model:{value:t.order.additional_info.number_household,callback:function(e){t.$set(t.order.additional_info,"number_household",e)},expression:"order.additional_info.number_household"}})],1)],1),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Tăng từ tháng, năm"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Tăng từ tháng, năm "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("Datepicker",{attrs:{language:t.language.vi,format:"MM/yyyy",placeholder:"mm/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0,"minimum-view":"month"},model:{value:t.order.from_month,callback:function(e){t.$set(t.order,"from_month",e)},expression:"order.from_month"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Tăng đến tháng, năm"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Tăng đến tháng, năm")]),t._v(" "),a("Datepicker",{attrs:{language:t.language.vi,format:"MM/yyyy",placeholder:"mm/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0,"minimum-view":"month"},on:{input:t.checkToMonth},model:{value:t.order.to_month,callback:function(e){t.$set(t.order,"to_month",e)},expression:"order.to_month"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Mức đóng tiền lương",disabled:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.employee.salary.salary,expression:"employee.salary.salary"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.employee.salary.salary},on:{input:function(e){e.target.composing||t.$set(t.employee.salary,"salary",e.target.value)}}})]),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Tỷ lệ đóng (%)"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.additional_info.pay_rate,expression:"order.additional_info.pay_rate"}],staticClass:"form-control",attrs:{type:"number",min:"0",max:"100"},domProps:{value:t.order.additional_info.pay_rate},on:{input:function(e){e.target.composing||t.$set(t.order.additional_info,"pay_rate",e.target.value)}}})])],1),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Phụ cấp trách nhiệm"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.additional_info.resp_allowance,expression:"order.additional_info.resp_allowance"}],staticClass:"form-control",domProps:{value:t.order.additional_info.resp_allowance},on:{input:[function(e){e.target.composing||t.$set(t.order.additional_info,"resp_allowance",e.target.value)},function(e){return t.inputMoney(t.order.additional_info,"resp_allowance")}]}})]),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Các khoản bổ sung"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.additional_info.complementary_allowance,expression:"order.additional_info.complementary_allowance"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.order.additional_info.complementary_allowance},on:{input:[function(e){e.target.composing||t.$set(t.order.additional_info,"complementary_allowance",e.target.value)},function(e){return t.inputMoney(t.order.additional_info,"complementary_allowance")}]}})]),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Mã vùng sinh sống"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.additional_info.area_code,expression:"order.additional_info.area_code"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.order.additional_info.area_code},on:{input:[function(e){e.target.composing||t.$set(t.order.additional_info,"area_code",e.target.value)},function(e){return t.validInput(t.order.additional_info,"area_code",{min:0,max:4})}]}})]),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Mã vùng lương tối thiểu",disabled:!0}},[a("b-select",{attrs:{options:t.salaryAreaOptions},model:{value:t.employee.salary.min_salary_area,callback:function(e){t.$set(t.employee.salary,"min_salary_area",e)},expression:"employee.salary.min_salary_area"}})],1)],1)],1)]),t._v(" "),a("div",{staticClass:"medical-insurance"},[a("div",{staticClass:"header mb-3 mt-2 font-weight-bold"},[t._v("\n          BHYT\n        ")]),t._v(" "),a("div",[a("b-form-row",[a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Tỉnh/TP nơi KCB"}},[a("SelectAdministrativeProvince",{attrs:{"province-code":t.order.additional_info.province_hospital_register},on:{select:function(e){return t.order.additional_info.province_hospital_register=e?e.code:null}}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Bệnh viện đăng kí KCB"}},[a("SelectHospital",{attrs:{"province-code":t.order.additional_info.province_hospital_register,hospitalCode:t.order.additional_info.hospital_register},on:{select:function(e){return t.order.additional_info.hospital_register=e?e.code:null}}})],1)],1)],1)]),t._v(" "),a("div",{staticClass:"contract"},[a("div",{staticClass:"header mb-3 mt-2 font-weight-bold"},[t._v("\n          Thông tin hợp đồng\n        ")]),t._v(" "),a("div",[a("b-form-row",[a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Loại hợp đồng lao động",disabled:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.employee.contract.contract_type_name,expression:"employee.contract.contract_type_name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.employee.contract.contract_type_name},on:{input:function(e){e.target.composing||t.$set(t.employee.contract,"contract_type_name",e.target.value)}}})]),t._v(" "),a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Ngày bắt đầu hợp đồng lao động",disabled:""}},[a("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.formatDate(t.employee.contract.start_date)}})]),t._v(" "),a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Ngày kết thúc hợp đồng lao động",disabled:""}},[a("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.formatDate(t.employee.contract.end_date)}})])],1),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Vị trí",disabled:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.employee.user.group_name,expression:"employee.user.group_name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.employee.user.group_name},on:{input:function(e){e.target.composing||t.$set(t.employee.user,"group_name",e.target.value)}}})]),t._v(" "),a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Ngày bắt đầu giữ vị trí",disabled:""}},[a("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.formatDate(t.employee.empProfile.active_date)}})]),t._v(" "),a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Ngày kết thúc giữ vị trí",disabled:""}},[a("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.formatDate(t.employee.empProfile.disable_date)}})])],1)],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showHouseHold,expression:"showHouseHold"}],staticClass:"family"},[a("div",{staticClass:"header mb-3 mt-2 font-weight-bold"},[t._v("\n          Phụ lục gia đình\n          "),a("span",{staticClass:"float-right"},[a("button",{class:["btn btn-sm btn-outline-ghtk tracking-action tracking-suggest-household","tracking-uid-"+t.employee.user.id],on:{click:t.suggestData}},[t._v("Lấy gợi ý thông tin hộ khẩu")])])]),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"w-100"},[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.additional_info.shk_number,expression:"order.additional_info.shk_number"}],staticClass:"form-control",attrs:{type:"number",placeholder:"Số sổ hộ khẩu"},domProps:{value:t.order.additional_info.shk_number},on:{input:[function(e){e.target.composing||t.$set(t.order.additional_info,"shk_number",e.target.value)},function(e){return t.validInput(t.order.additional_info,"shk_number",{length:9})}]}}),t._v(" "),a("div",{staticClass:"m-0 w-20"},[a("single-select-province",{attrs:{placeholder:"Tỉnh/TP theo hộ khẩu","province-id":t.order.additional_info.resident_address_province&&t.order.additional_info.resident_address_province.id},on:{handleSelectedProvince:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return t.selectValue.apply(void 0,n.concat([t.order.additional_info],["resident_address_province"]))}}})],1),t._v(" "),a("div",{staticClass:"m-0 w-20"},[a("single-select-district",{attrs:{placeholder:"Quận huyện theo hộ khẩu","province-id":t.order.additional_info.resident_address_province&&t.order.additional_info.resident_address_province.id,"district-id":t.order.additional_info.resident_address_district&&t.order.additional_info.resident_address_district.id},on:{handleSelectedDistrict:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return t.selectValue.apply(void 0,n.concat([t.order.additional_info],["resident_address_district"]))}}})],1),t._v(" "),a("div",{staticClass:"m-0 w-20"},[a("single-select-sub-district",{attrs:{placeholder:"Phường/xã theo hộ khẩu","province-id":t.order.additional_info.resident_address_province&&t.order.additional_info.resident_address_province.id,"district-id":t.order.additional_info.resident_address_district&&t.order.additional_info.resident_address_district.id,"sub-district-id":t.order.additional_info.resident_address_commune&&t.order.additional_info.resident_address_commune.id},on:{handleSelectedSubDistrict:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return t.selectValue.apply(void 0,n.concat([t.order.additional_info],["resident_address_commune"]))}}})],1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.order.additional_info.resident_address_detail,expression:"order.additional_info.resident_address_detail",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"Địa chỉ chi tiết theo hộ khẩu"},domProps:{value:t.order.additional_info.resident_address_detail},on:{input:function(e){e.target.composing||t.$set(t.order.additional_info,"resident_address_detail",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),t._v(" "),a("table",{staticClass:"table table-bordered table-sm"},[a("thead",[a("tr",{staticClass:"bg-light"},[a("th",{staticClass:"text-center w-10"},[t._v("Họ tên")]),t._v(" "),a("th",{staticClass:"text-center w-15"},[t._v("Chỉ có tháng năm")]),t._v(" "),a("th",{staticClass:"text-center w-20"},[t._v("Ngày tháng năm sinh")]),t._v(" "),a("th",{staticClass:"text-center w-10"},[t._v("Giới tính")]),t._v(" "),a("th",{staticClass:"text-center w-10"},[t._v("Quốc tịch")]),t._v(" "),a("th",{staticClass:"text-center w-10"},[t._v("Dân tộc")]),t._v(" "),a("th",{staticClass:"text-center w-10"},[t._v("Mối QH với chủ hộ")]),t._v(" "),a("th",{staticClass:"text-center w-15"},[t._v("CMND")]),t._v(" "),a("th",{staticClass:"text-center w-5"})])]),t._v(" "),a("tbody",[t._l(t.order.household,function(e,n){return a("tr",{key:n},[a("td",[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.fullname,expression:"member.fullname",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",disabled:!!e.id},domProps:{value:e.fullname},on:{input:function(a){a.target.composing||t.$set(e,"fullname",a.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("td",[a("b-select",{attrs:{options:t.birthdayStatusOptions,disabled:!!e.id},model:{value:e.birthday_status,callback:function(a){t.$set(e,"birthday_status",a)},expression:"member.birthday_status"}})],1),t._v(" "),a("td",[a("Datepicker",{attrs:{disabled:!!e.id,language:t.language.vi,format:"dd/MM/yyyy",placeholder:"dd/mm/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},model:{value:e.birthday,callback:function(a){t.$set(e,"birthday",a)},expression:"member.birthday"}})],1),t._v(" "),a("td",[a("b-select",{attrs:{options:t.genderOptions,disabled:!!e.id},model:{value:e.gender,callback:function(a){t.$set(e,"gender",a)},expression:"member.gender"}})],1),t._v(" "),a("td",[a("b-select",{attrs:{options:t.nationalityOptions,disabled:!!e.id},model:{value:e.nationality,callback:function(a){t.$set(e,"nationality",a)},expression:"member.nationality"}})],1),t._v(" "),a("td",[a("select-ethnic",{attrs:{disabled:!!e.id,"ethnic-value":e.ethnic,placeholder:""},on:{handleSelectedEthnic:function(t){e.ethnic=t?t.value:"Vietnam"}}})],1),t._v(" "),a("td",[a("single-select-relation",{attrs:{disabled:!!e.id},model:{value:e.relation,callback:function(a){t.$set(e,"relation",a)},expression:"member.relation"}})],1),t._v(" "),a("td",[!t.configShowHouseHold[e.key]&&t.editData?a("SensitiveFormInput",{attrs:{"data-input":e.personal_id,"user-id":t.employee.user.id,"order-id":t.idOrder,type:"household-personal_id-"+e.key,source:"update-order"},on:{returnRawData:function(a){return t.viewOriginSensitiveHouseHold(a,e.key)}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.personal_id,expression:"member.personal_id"}],staticClass:"form-control",attrs:{disabled:!!e.id,type:"number"},domProps:{value:e.personal_id},on:{input:[function(a){a.target.composing||t.$set(e,"personal_id",a.target.value)},function(a){return t.validInput(e,"personal_id",{length:12})}]}})],1),t._v(" "),a("td",{staticClass:"text-center align-middle"},[a("b-btn",{attrs:{variant:"outline-danger",size:"sm",title:"Xóa thành viên"},on:{click:function(e){return t.deleteFamilyMember(n)}}},[a("i",{staticClass:"fas fa-times"})])],1)])}),t._v(" "),a("tr",[a("td",{attrs:{colspan:"8"}},[a("div",{staticClass:"text-left"},[a("b-btn",{attrs:{size:"sm",variant:"outline-ghtk",disabled:!t.canAddMember()},on:{click:function(e){return t.addFamilyMember()}}},[a("i",{staticClass:"fas fa-plus"}),t._v(" Thêm thành viên")])],1)])])],2)])],1)],1)]):a("div",[a("div",{staticClass:"insurance"},[a("div",{staticClass:"header mb-3 mt-2 font-weight-bold"},[t._v("\n            BHXH, BHYT\n          ")]),t._v(" "),a("div",[a("b-form-row",[a("b-form-group",{staticClass:"col-md-4",attrs:{disabled:"",label:"Mã số BHXH"}},[a("b-input",{model:{value:t.employee.masterProfile.insurance_register,callback:function(e){t.$set(t.employee.masterProfile,"insurance_register",e)},expression:"employee.masterProfile.insurance_register"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4",attrs:{disabled:"",label:"Mã số BHYT"}},[a("b-input",{model:{value:t.employee.masterProfile.health_ins_number,callback:function(e){t.$set(t.employee.masterProfile,"health_ins_number",e)},expression:"employee.masterProfile.health_ins_number"}})],1)],1)],1)]),t._v(" "),a("div",{staticClass:"data-type-order"},[a("div",{staticClass:"header mb-3 mt-2 font-weight-bold"},[t._v("\n            "+t._s((t.order.group_name||"")+" - "+(t.order.order_type_name||""))+"\n          ")]),t._v(" "),t.showTimeChange()?a("b-form-row",{staticClass:"time-change"},[a("b-form-group",{staticClass:"col-md-4"},[a("span",{attrs:{slot:"label",id:"popover-date-modify"},slot:"label"},[t._v("\n              "+t._s("down"===t.order.order_group?"Ngày bắt đầu nghỉ":"Ngày bắt đầu điều chỉnh")+"\n              "),a("span",{staticClass:"text-danger"},[t._v("*")]),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:"modify"===t.order.order_group,expression:"order.order_group === 'modify'"}],staticClass:"fas fa-info-circle"})]),t._v(" "),"modify"===t.order.order_group?a("b-popover",{attrs:{target:"popover-date-modify",triggers:"hover"}},[a("b",[t._v("Ngày nhân viên chuyển công tác, thay đổi mức lương...")])]):t._e(),t._v(" "),a("Datepicker",{attrs:{language:t.language.vi,format:"dd/MM/yyyy",placeholder:"dd/mm/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},model:{value:t.order.start_date,callback:function(e){t.$set(t.order,"start_date",e)},expression:"order.start_date"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Từ tháng"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Từ tháng "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("Datepicker",{attrs:{language:t.language.vi,format:"MM/yyyy",placeholder:"mm/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0,"minimum-view":"month"},model:{value:t.order.from_month,callback:function(e){t.$set(t.order,"from_month",e)},expression:"order.from_month"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Đến tháng"}},[a("Datepicker",{attrs:{language:t.language.vi,format:"MM/yyyy",placeholder:"mm/yyyy","full-month-name":!0,bootstrapStyling:!0,"monday-first":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0,"minimum-view":"month"},model:{value:t.order.to_month,callback:function(e){t.$set(t.order,"to_month",e)},expression:"order.to_month"}})],1)],1):t._e(),t._v(" "),"regime"===t.order.order_group?a("div",[a("b-form-row",[a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Từ ngày"}},[a("span",{attrs:{slot:"label",id:"popover-regime-from"},slot:"label"},[t._v("Từ ngày "),a("i",{staticClass:"fas fa-info-circle"})]),t._v(" "),a("b-popover",{attrs:{target:"popover-regime-from",triggers:"hover"}},[a("b",[t._v("Ghi theo giấy ra viện")])]),t._v(" "),a("Datepicker",{attrs:{language:t.language.vi,format:"dd/MM/yyyy",placeholder:"dd/mm/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},model:{value:t.order.regime_data.from,callback:function(e){t.$set(t.order.regime_data,"from",e)},expression:"order.regime_data.from"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Đến ngày"}},[a("span",{attrs:{slot:"label",id:"popover-regime-to"},slot:"label"},[t._v("Đến ngày "),a("i",{staticClass:"fas fa-info-circle"})]),t._v(" "),a("b-popover",{attrs:{target:"popover-regime-to",triggers:"hover"}},[a("b",[t._v("Ghi theo giấy ra viện")])]),t._v(" "),a("Datepicker",{attrs:{language:t.language.vi,format:"dd/MM/yyyy",placeholder:"dd/mm/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},model:{value:t.order.regime_data.to,callback:function(e){t.$set(t.order.regime_data,"to",e)},expression:"order.regime_data.to"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Tổng số ngày"}},[a("span",{attrs:{slot:"label",id:"popover-regime-total"},slot:"label"},[t._v("Tổng số ngày "),a("i",{staticClass:"fas fa-info-circle"})]),t._v(" "),a("b-popover",{attrs:{target:"popover-regime-total",triggers:"hover"}},[a("b",[t._v("= Đến ngày - Từ ngày - (ngày Chủ nhật, ngày lễ, tết) - (ngày phép NLĐ đã dùng)")])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.regime_data.total,expression:"order.regime_data.total"}],staticClass:"form-control",attrs:{type:"number",min:"0"},domProps:{value:t.order.regime_data.total},on:{input:function(e){e.target.composing||t.$set(t.order.regime_data,"total",e.target.value)}}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Ngày bắt đầu nghỉ tại công ty"}},[a("span",{attrs:{slot:"label",id:"popover-pause-from"},slot:"label"},[t._v("Ngày bắt đầu nghỉ tại công ty "),a("i",{staticClass:"fas fa-info-circle"})]),t._v(" "),a("b-popover",{attrs:{target:"popover-pause-from",triggers:"hover"}},[a("b",[t._v("Ghi theo ngày công thực tế")])]),t._v(" "),a("Datepicker",{attrs:{language:t.language.vi,format:"dd/MM/yyyy",placeholder:"dd/mm/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},model:{value:t.order.regime_data.pause_from,callback:function(e){t.$set(t.order.regime_data,"pause_from",e)},expression:"order.regime_data.pause_from"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Ngày đi làm lại"}},[a("span",{attrs:{slot:"label",id:"popover-pause-to"},slot:"label"},[t._v("Ngày đi làm lại "),a("i",{staticClass:"fas fa-info-circle"})]),t._v(" "),a("b-popover",{attrs:{target:"popover-pause-to",triggers:"hover"}},[a("b",[t._v("Ghi theo ngày công thực tế")])]),t._v(" "),a("Datepicker",{attrs:{language:t.language.vi,format:"dd/MM/yyyy",placeholder:"dd/mm/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},model:{value:t.order.regime_data.pause_to,callback:function(e){t.$set(t.order.regime_data,"pause_to",e)},expression:"order.regime_data.pause_to"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Tổng số ngày"}},[a("span",{attrs:{slot:"label",id:"popover-pause-total"},slot:"label"},[t._v("Tổng số ngày "),a("i",{staticClass:"fas fa-info-circle"})]),t._v(" "),a("b-popover",{attrs:{target:"popover-pause-total",triggers:"hover"}},[a("b",[t._v("= Đến ngày - Từ ngày - (ngày Chủ nhật, ngày lễ, tết) - (ngày phép NLĐ đã dùng)")])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.regime_data.pause_total,expression:"order.regime_data.pause_total"}],staticClass:"form-control",attrs:{type:"number",min:"0"},domProps:{value:t.order.regime_data.pause_total},on:{input:function(e){e.target.composing||t.$set(t.order.regime_data,"pause_total",e.target.value)}}})],1)],1),t._v(" "),25==+t.order.order_type_id?a("b-form-row",[a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Mã thẻ BHYT của con"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.regime_data.child_health_ins_number,expression:"order.regime_data.child_health_ins_number"}],staticClass:"form-control",attrs:{type:"text",min:"0"},domProps:{value:t.order.regime_data.child_health_ins_number},on:{input:[function(e){e.target.composing||t.$set(t.order.regime_data,"child_health_ins_number",e.target.value)},function(e){return t.validInput(t.order.regime_data,"child_health_ins_number",{length:15})}]}})])],1):t._e(),t._v(" "),24==+t.order.order_type_id||26==+t.order.order_type_id?a("b-form-row",[a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Ngày sinh con"}},[a("span",{attrs:{slot:"label",id:"popover-birth-date"},slot:"label"},[t._v("Ngày sinh con "),a("i",{staticClass:"fas fa-info-circle"})]),t._v(" "),a("b-popover",{attrs:{target:"popover-birth-date",triggers:"hover"}},[a("b",[t._v("Ghi theo giấy khai sinh hoặc chứng sinh")])]),t._v(" "),a("Datepicker",{attrs:{language:t.language.vi,format:"dd/MM/yyyy",placeholder:"dd/mm/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},model:{value:t.order.regime_data.birth_date,callback:function(e){t.$set(t.order.regime_data,"birth_date",e)},expression:"order.regime_data.birth_date"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Số lượng con"}},[a("span",{attrs:{slot:"label",id:"popover-num-children"},slot:"label"},[t._v("Số lượng con "),a("i",{staticClass:"fas fa-info-circle"})]),t._v(" "),a("b-popover",{attrs:{target:"popover-num-children",triggers:"hover"}},[a("b",[t._v("Ghi theo giấy ra viện")])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.regime_data.num_children,expression:"order.regime_data.num_children"}],staticClass:"form-control",attrs:{type:"number",min:"0"},domProps:{value:t.order.regime_data.num_children},on:{input:[function(e){e.target.composing||t.$set(t.order.regime_data,"num_children",e.target.value)},function(e){return t.validInput(t.order.regime_data,"num_children",{min:0,max:5})}]}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Hình thức sinh"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Hình thức sinh")]),t._v(" "),a("b-select",{attrs:{options:t.birthTypeOptions},model:{value:t.order.regime_data.birth_type,callback:function(e){t.$set(t.order.regime_data,"birth_type",e)},expression:"order.regime_data.birth_type"}})],1),t._v(" "),24==+t.order.order_type_id?a("b-form-group",{staticClass:"col-md-4",attrs:{label:"CMND/CCCD vợ"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("CMND/CCCD vợ")]),t._v(" "),!t.configSensitiveOrderData.wife_personal_number&&t.editData?a("SensitiveFormInput",{attrs:{"data-input":t.order.regime_data.wife_personal_number,"user-id":t.employee.user.id,"order-id":t.idOrder,type:"wife_personal_number",source:"update-order"},on:{returnRawData:function(e){return t.viewOriginSensitiveSpecOrderData(e,"wife_personal_number")}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.regime_data.wife_personal_number,expression:"order.regime_data.wife_personal_number"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.order.regime_data.wife_personal_number},on:{input:[function(e){e.target.composing||t.$set(t.order.regime_data,"wife_personal_number",e.target.value)},function(e){return t.validInput(t.order.regime_data,"wife_personal_number",{length:12})}]}})],1):t._e()],1):t._e()],1):t._e(),t._v(" "),a("div",{staticClass:"data-change"},[t.modifyConfig[t.order.order_type_id]?a("b-form-row",[a("b-form-group",{class:t.modifyConfig[t.order.order_type_id].oldInput.class,attrs:{disabled:t.modifyConfig[t.order.order_type_id].oldInput.disable}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.modifyConfig[t.order.order_type_id].oldInput.label))]),t._v(" "),7==+t.order.order_type_id?a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.old_value,expression:"order.old_value"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.order.old_value},on:{input:[function(e){e.target.composing||t.$set(t.order,"old_value",e.target.value)},function(e){return t.inputMoney(t.order,"old_value")}]}}):t._e(),t._v(" "),32==+t.order.order_type_id?a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.old_value,expression:"order.old_value"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.order.old_value},on:{input:[function(e){e.target.composing||t.$set(t.order,"old_value",e.target.value)},function(e){return t.validInput(t.order,"old_value",{min:0,max:32})}]}}):t._e(),t._v(" "),28==+t.order.order_type_id?[!t.configSensitiveOrderData.old_personal_id_number_28&&t.editData?a("SensitiveFormInput",{attrs:{"data-input":t.order.old_value,"user-id":t.employee.user.id,"order-id":t.idOrder,type:"old_personal_id_number_28",source:"update-order"},on:{returnRawData:function(e){return t.viewOriginSensitiveOrderData(e,"old_personal_id_number_28")}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.old_value,expression:"order.old_value"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.order.old_value},on:{input:[function(e){e.target.composing||t.$set(t.order,"old_value",e.target.value)},function(e){return t.validInput(t.order,"old_value",{length:12})}]}})]:t._e(),t._v(" "),29==+t.order.order_type_id?[!t.configSensitiveOrderData.old_phone_29&&t.editData?a("SensitiveFormInput",{attrs:{"data-input":t.order.old_value,"user-id":t.employee.user.id,"order-id":t.idOrder,type:"old_phone_29",source:"update-order"},on:{returnRawData:function(e){return t.viewOriginSensitiveOrderData(e,"old_phone_29")}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.old_value,expression:"order.old_value"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.order.old_value},on:{input:[function(e){e.target.composing||t.$set(t.order,"old_value",e.target.value)},function(e){return t.validInput(t.order,"old_value",{length:10})}]}})]:t._e(),t._v(" "),[11,13].includes(+t.order.order_type_id)?a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.order.old_value,expression:"order.old_value",modifiers:{trim:!0}}],staticClass:"form-control",domProps:{value:t.order.old_value},on:{input:function(e){e.target.composing||t.$set(t.order,"old_value",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}):t._e(),t._v(" "),[9].includes(+t.order.order_type_id)?a("single-select-position",{attrs:{"position-job":t.order.old_value}}):t._e(),t._v(" "),[10].includes(+t.order.order_type_id)?a("select-gender",{attrs:{"hide-select":!1,gender:t.order.old_value},on:{change:function(e){return t.order.old_value=e?e.value:null}}}):t._e(),t._v(" "),[12].includes(+t.order.order_type_id)?a("Datepicker",{attrs:{language:t.language.vi,format:"dd/MM/yyyy",placeholder:"dd/mm/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},model:{value:t.order.old_value,callback:function(e){t.$set(t.order,"old_value",e)},expression:"order.old_value"}}):t._e(),t._v(" "),[8].includes(+t.order.order_type_id)?a("single-select-station",{attrs:{"station-id":t.order.old_value},on:{handleSelectedStation:function(e){return t.order.old_value=e?e.id:null}}}):t._e(),t._v(" "),[31].includes(+t.order.order_type_id)?a("div",{staticClass:"input-group"},[a("single-select-province",{attrs:{"custom-class":"m-0 w-25",placeholder:"Tỉnh/TP theo hộ khẩu","province-id":t.order.additional_info.old_resident_province&&t.order.additional_info.old_resident_province.id},on:{handleSelectedProvince:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return t.selectValue.apply(void 0,n.concat([t.order.additional_info],["old_resident_province"]))}}}),t._v(" "),a("single-select-district",{attrs:{"custom-class":"m-0 w-25",placeholder:"Quận huyện theo hộ khẩu","province-id":t.order.additional_info.old_resident_province&&t.order.additional_info.old_resident_province.id,"district-id":t.order.additional_info.old_resident_district&&t.order.additional_info.old_resident_district.id},on:{handleSelectedDistrict:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return t.selectValue.apply(void 0,n.concat([t.order.additional_info],["old_resident_district"]))}}}),t._v(" "),a("single-select-sub-district",{attrs:{"custom-class":"m-0 w-25",placeholder:"Phường/xã theo hộ khẩu","province-id":t.order.additional_info.old_resident_province&&t.order.additional_info.old_resident_province.id,"district-id":t.order.additional_info.old_resident_district&&t.order.additional_info.old_resident_district.id,"sub-district-id":t.order.additional_info.old_resident_commune&&t.order.additional_info.old_resident_commune.id},on:{handleSelectedSubDistrict:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return t.selectValue.apply(void 0,n.concat([t.order.additional_info],["old_resident_commune"]))}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.order.additional_info.old_resident_detail,expression:"order.additional_info.old_resident_detail",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"Chi tiết (chỉ nhập số nhà, tên đường)"},domProps:{value:t.order.additional_info.old_resident_detail},on:{input:function(e){e.target.composing||t.$set(t.order.additional_info,"old_resident_detail",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})],1):t._e()],2),t._v(" "),a("b-form-group",{class:t.modifyConfig[t.order.order_type_id].newInput.class,attrs:{disabled:t.modifyConfig[t.order.order_type_id].newInput.disable}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.modifyConfig[t.order.order_type_id].newInput.label))]),t._v(" "),7==+t.order.order_type_id?a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.new_value,expression:"order.new_value"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.order.new_value},on:{input:[function(e){e.target.composing||t.$set(t.order,"new_value",e.target.value)},function(e){return t.inputMoney(t.order,"new_value")}]}}):t._e(),t._v(" "),32==+t.order.order_type_id?a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.new_value,expression:"order.new_value"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.order.new_value},on:{input:[function(e){e.target.composing||t.$set(t.order,"new_value",e.target.value)},function(e){return t.validInput(t.order,"new_value",{min:0,max:32})}]}}):t._e(),t._v(" "),28==+t.order.order_type_id?[!t.configSensitiveOrderData.new_personal_id_number_28&&t.editData?a("SensitiveFormInput",{attrs:{"data-input":t.order.new_value,"user-id":t.employee.user.id,"order-id":t.idOrder,type:"new_personal_id_number_28",source:"update-order"},on:{returnRawData:function(e){return t.viewOriginSensitiveOrderData(e,"new_personal_id_number_28")}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.new_value,expression:"order.new_value"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.order.new_value},on:{input:[function(e){e.target.composing||t.$set(t.order,"new_value",e.target.value)},function(e){return t.validInput(t.order,"new_value",{length:12})}]}})]:t._e(),t._v(" "),29==+t.order.order_type_id?[!t.configSensitiveOrderData.new_phone_29&&t.editData?a("SensitiveFormInput",{attrs:{"data-input":t.order.new_value,"user-id":t.employee.user.id,"order-id":t.idOrder,type:"new_phone_29",source:"update-order"},on:{returnRawData:function(e){return t.viewOriginSensitiveOrderData(e,"new_phone_29")}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.new_value,expression:"order.new_value"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.order.new_value},on:{input:[function(e){e.target.composing||t.$set(t.order,"new_value",e.target.value)},function(e){return t.validInput(t.order,"new_value",{length:10})}]}})]:t._e(),t._v(" "),[11,13].includes(+t.order.order_type_id)?a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.order.new_value,expression:"order.new_value",modifiers:{trim:!0}}],staticClass:"form-control",domProps:{value:t.order.new_value},on:{input:function(e){e.target.composing||t.$set(t.order,"new_value",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}):t._e(),t._v(" "),[9].includes(+t.order.order_type_id)?a("single-select-position",{attrs:{"position-job":t.order.new_value},on:{handleSelectedPosition:t.selectPosition}}):t._e(),t._v(" "),[10].includes(+t.order.order_type_id)?a("select-gender",{attrs:{gender:t.order.new_value,"hide-select":!1},on:{change:function(e){return t.order.new_value=e?e.value:null}}}):t._e(),t._v(" "),[12].includes(+t.order.order_type_id)?a("Datepicker",{attrs:{language:t.language.vi,format:"dd/MM/yyyy",placeholder:"dd/mm/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},model:{value:t.order.new_value,callback:function(e){t.$set(t.order,"new_value",e)},expression:"order.new_value"}}):t._e(),t._v(" "),[8].includes(+t.order.order_type_id)?a("single-select-station",{attrs:{"station-id":t.order.new_value},on:{handleSelectedStation:function(e){return t.order.new_value=e?e.id:null}}}):t._e(),t._v(" "),[31].includes(+t.order.order_type_id)?a("div",{staticClass:"input-group"},[a("single-select-province",{attrs:{"custom-class":"m-0 w-25",placeholder:"Tỉnh/TP theo hộ khẩu","province-id":t.order.additional_info.new_resident_province&&t.order.additional_info.new_resident_province.id},on:{handleSelectedProvince:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return t.selectValue.apply(void 0,n.concat([t.order.additional_info],["new_resident_province"]))}}}),t._v(" "),a("single-select-district",{attrs:{"custom-class":"m-0 w-25",placeholder:"Quận huyện theo hộ khẩu","province-id":t.order.additional_info.new_resident_province&&t.order.additional_info.new_resident_province.id,"district-id":t.order.additional_info.new_resident_district&&t.order.additional_info.new_resident_district.id},on:{handleSelectedDistrict:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return t.selectValue.apply(void 0,n.concat([t.order.additional_info],["new_resident_district"]))}}}),t._v(" "),a("single-select-sub-district",{attrs:{"custom-class":"m-0 w-25",placeholder:"Phường/xã theo hộ khẩu","province-id":t.order.additional_info.new_resident_province&&t.order.additional_info.new_resident_province.id,"district-id":t.order.additional_info.new_resident_district&&t.order.additional_info.new_resident_district.id,"sub-district-id":t.order.additional_info.new_resident_commune&&t.order.additional_info.new_resident_commune.id},on:{handleSelectedSubDistrict:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return t.selectValue.apply(void 0,n.concat([t.order.additional_info],["new_resident_commune"]))}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.order.additional_info.new_resident_detail,expression:"order.additional_info.new_resident_detail",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"Chi tiết (chỉ nhập số nhà, tên đường)"},domProps:{value:t.order.additional_info.new_resident_detail},on:{input:function(e){e.target.composing||t.$set(t.order.additional_info,"new_resident_detail",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})],1):t._e()],2)],1):30==+t.order.order_type_id?a("div",[a("b-form-row",[a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Tỉnh nơi ĐK KCB cũ"}},[a("SelectAdministrativeProvince",{attrs:{"province-code":t.order.additional_info.province_hospital_register_old},on:{select:function(e){return t.order.additional_info.province_hospital_register_old=e?e.code:null}}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Nơi ĐK KCB cũ"}},[a("SelectHospital",{attrs:{"province-code":t.order.additional_info.province_hospital_register_old,hospitalCode:t.order.old_value},on:{select:function(e){return t.order.old_value=e?e.code:null}}})],1)],1),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Tỉnh nơi ĐK KCB mới"}},[a("SelectAdministrativeProvince",{attrs:{"province-code":t.order.additional_info.province_hospital_register_new},on:{select:function(e){return t.order.additional_info.province_hospital_register_new=e?e.code:null}}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Nơi ĐK KCB mới"}},[a("SelectHospital",{attrs:{"province-code":t.order.additional_info.province_hospital_register_new,hospitalCode:t.order.new_value},on:{select:function(e){return t.order.new_value=e?e.code:null}}})],1)],1)],1):t._e()],1)],1)])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"contract"===t.order.order_category,expression:"order.order_category === 'contract'"}]},[a("div",{directives:[{name:"show",rawName:"v-show",value:"contract"===t.order.order_group,expression:"order.order_group === 'contract'"}]},[a("div",{staticClass:"contract-info"},[a("div",{staticClass:"header mb-3 mt-2 font-weight-bold"},[t._v("\n            "+t._s((t.order.group_name||"")+" - "+(t.order.order_type_name||""))+"\n          ")]),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col-md-3"},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Loại hợp đồng "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("select-contract-type",{attrs:{disabled:"new_contract"!==t.order.order_type_alias,"contract-type":t.order.contract_info.type_contract},on:{select:t.selectContractType}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3"},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Ngày bắt đầu "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("Datepicker",{attrs:{disabled:"new_contract"!==t.order.order_type_alias,language:t.language.vi,format:"dd/MM/yyyy",placeholder:"dd/mm/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":"new_contract"===t.order.order_type_alias},on:{selected:t.suggestEndDateContract},model:{value:t.order.contract_info.start_date,callback:function(e){t.$set(t.order.contract_info,"start_date",e)},expression:"order.contract_info.start_date"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3"},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Ngày kết thúc "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.requireContractField.includes("end_date"),expression:"requireContractField.includes('end_date')"}],staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("Datepicker",{attrs:{disabled:"new_contract"!==t.order.order_type_alias,language:t.language.vi,format:"dd/MM/yyyy",placeholder:"dd/mm/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":"new_contract"===t.order.order_type_alias,"disabled-dates":{to:new Date(t.order.contract_info.start_date)}},model:{value:t.order.contract_info.end_date,callback:function(e){t.$set(t.order.contract_info,"end_date",e)},expression:"order.contract_info.end_date"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3"},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Ngày ký")]),t._v(" "),a("Datepicker",{attrs:{disabled:"new_contract"!==t.order.order_type_alias,language:t.language.vi,format:"dd/MM/yyyy",placeholder:"dd/mm/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":"new_contract"===t.order.order_type_alias},model:{value:t.order.contract_info.contract_date,callback:function(e){t.$set(t.order.contract_info,"contract_date",e)},expression:"order.contract_info.contract_date"}})],1),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:"new_contract"===t.order.order_type_alias,expression:"order.order_type_alias === 'new_contract'"}],staticClass:"col-md-12"},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Lý do ký kết")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.order.note,expression:"order.note",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{list:"contract-reason-option"},domProps:{value:t.order.note},on:{input:function(e){e.target.composing||t.$set(t.order,"note",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),a("datalist",{attrs:{id:"contract-reason-option"}},[a("option",[t._v("Người lao động mới")]),t._v(" "),a("option",[t._v("Gia hạn hợp đồng")]),t._v(" "),a("option",[t._v("Thay đổi loại hợp đồng")])])])],1),t._v(" "),a("b-alert",{attrs:{variant:"warning",show:!!t.noti.oldContract}},[a("span",{domProps:{innerHTML:t._s(t.noti.oldContract)}}),a("br"),t._v(" "),t.canUpdate?a("b-form-group",{attrs:{label:"Vui lòng chọn phương án xử lý hợp đồng cũ:"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.ariaDescribedby;return[a("b-form-radio-group",{attrs:{id:"radio-group-resolve-old-contract","aria-describedby":n,name:"radio-group-resolve-old-contract",stacked:"",state:!!t.oldContractResolve.plan&&null},model:{value:t.oldContractResolve.plan,callback:function(e){t.$set(t.oldContractResolve,"plan",e)},expression:"oldContractResolve.plan"}})]}}],null,!1,2360918846)}):a("b",[t._v("Không thể tạo đề xuất !")])],1)],1),t._v(" "),a("div",{staticClass:"salary-allowance"},[a("div",{staticClass:"header mb-3 mt-2 font-weight-bold"},[t._v("\n            Lương và phúc lợi\n          ")]),t._v(" "),a("b-alert",{attrs:{show:!!t.noti.salary}},[a("b",[t._v("Thông tin:")]),t._v(" "+t._s(t.noti.salary)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.editSalalary,expression:"editSalalary"}]},[t._v(", bạn có thể chỉnh sửa lại.")]),t._v(" "),a("span",{staticClass:"float-right"},[t.employee.contract.id?a("button",{staticClass:"btn btn-sm btn-outline-ghtk",on:{click:function(e){return t.assignOldData()}}},[t._v("\n              Lấy theo HĐ cũ\n            ")]):t._e(),t._v(" "),a("button",{staticClass:"btn btn-sm btn-outline-ghtk",on:{click:function(e){return t.getAreaSalary(t.order.contract_info.start_date||t.order.contract_info.effect_date)}}},[t._v("\n              Lấy theo lương vùng\n            ")])])]),t._v(" "),"new_appendix"===t.order.order_type_alias?a("b-form-row",{staticClass:"reason-change-salary"},[a("b-form-group",{staticClass:"col-md-6",attrs:{label:"Lý do thay đổi lương, phụ cấp"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Lý do thay đổi lương, phụ cấp "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.order.note,expression:"order.note",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{list:"appendix-reason-option"},domProps:{value:t.order.note},on:{input:function(e){e.target.composing||t.$set(t.order,"note",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),a("datalist",{attrs:{id:"appendix-reason-option"}},[a("option",[t._v("Chưa có thông tin lương, phụ cấp")]),t._v(" "),a("option",[t._v("Thay đổi vùng lương tối thiểu")]),t._v(" "),a("option",[t._v("Tăng chức")]),t._v(" "),a("option",[t._v("Giáng chức")]),t._v(" "),a("option",[t._v("Thông tin lương sai")])])]),t._v(" "),a("b-form-group",{staticClass:"col-md-6"},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Ngày lương bắt đầu hiệu lực "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.requireContractField.includes("effect_date"),expression:"requireContractField.includes('effect_date')"}],staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("Datepicker",{attrs:{language:t.language.vi,format:"dd/MM/yyyy",placeholder:"dd/mm/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0,"disabled-dates":{to:new Date(t.employee.salary.effect_date||t.employee.contract.start_date),from:t.employee.contract.end_date&&new Date(t.employee.contract.end_date)}},on:{selected:t.getAreaSalary},model:{value:t.order.contract_info.effect_date,callback:function(e){t.$set(t.order.contract_info,"effect_date",e)},expression:"order.contract_info.effect_date"}})],1)],1):t._e(),t._v(" "),a("b-form-row",{staticClass:"salary"},[a("b-form-group",{staticClass:"col-md-3"},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Lương thử việc "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.requireContractField.includes("trial_salary"),expression:"requireContractField.includes('trial_salary')"}],staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.contract_info.trial_salary,expression:"order.contract_info.trial_salary"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.order.contract_info.trial_salary},on:{input:[function(e){e.target.composing||t.$set(t.order.contract_info,"trial_salary",e.target.value)},function(e){return t.inputMoney(t.order.contract_info,"trial_salary")}]}})]),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{disabled:!t.editSalalary}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Lương chính thức "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.requireContractField.includes("salary"),expression:"requireContractField.includes('salary')"}],staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.contract_info.salary,expression:"order.contract_info.salary"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.order.contract_info.salary},on:{input:[function(e){e.target.composing||t.$set(t.order.contract_info,"salary",e.target.value)},function(e){return t.inputMoney(t.order.contract_info,"salary")}]}})]),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:"new_contract"===t.order.order_type_alias,expression:"order.order_type_alias === 'new_contract'"}],staticClass:"col-md-3",attrs:{disabled:!t.order.contract_info.salary_date&&t.order.contract_info.has_kpi&&!t.editSalalary}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Ngày lương chuẩn")]),t._v(" "),a("b-select",{attrs:{options:t.salaryDateOps},model:{value:t.order.contract_info.salary_date,callback:function(e){t.$set(t.order.contract_info,"salary_date",e)},expression:"order.contract_info.salary_date"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3 text-center input-kpi"},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Tính lương theo kpi")]),t._v(" "),a("b-checkbox",{attrs:{disabled:!t.permissions.can_update_tick_has_kpi||"new_appendix"===t.order.order_type_alias,name:"checkbox-kpi",value:!0,"unchecked-value":!1},model:{value:t.order.contract_info.has_kpi,callback:function(e){t.$set(t.order.contract_info,"has_kpi",e)},expression:"order.contract_info.has_kpi"}})],1)],1),t._v(" "),a("b-form-row",{staticClass:"allowance"},[a("b-form-group",{staticClass:"col-md-2",attrs:{label:"Phụ cấp trách nhiệm"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.contract_info.resp_allowance,expression:"order.contract_info.resp_allowance"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.order.contract_info.resp_allowance},on:{input:[function(e){e.target.composing||t.$set(t.order.contract_info,"resp_allowance",e.target.value)},function(e){return t.inputMoney(t.order.contract_info,"resp_allowance")}]}})]),t._v(" "),a("b-form-group",{staticClass:"col-md-2",attrs:{label:"Phụ cấp xăng xe, ăn đêm"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.contract_info.trans_allowance,expression:"order.contract_info.trans_allowance"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.order.contract_info.trans_allowance},on:{input:[function(e){e.target.composing||t.$set(t.order.contract_info,"trans_allowance",e.target.value)},function(e){return t.inputMoney(t.order.contract_info,"trans_allowance")}]}})]),t._v(" "),a("b-form-group",{staticClass:"col-md-2",attrs:{label:"Phụ cấp ăn trưa"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.contract_info.meal_allowance,expression:"order.contract_info.meal_allowance"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.order.contract_info.meal_allowance},on:{input:[function(e){e.target.composing||t.$set(t.order.contract_info,"meal_allowance",e.target.value)},function(e){return t.inputMoney(t.order.contract_info,"meal_allowance")}]}})]),t._v(" "),a("b-form-group",{staticClass:"col-md-2",attrs:{label:"Phụ cấp điện thoại"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.contract_info.mobile_allowance,expression:"order.contract_info.mobile_allowance"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.order.contract_info.mobile_allowance},on:{input:[function(e){e.target.composing||t.$set(t.order.contract_info,"mobile_allowance",e.target.value)},function(e){return t.inputMoney(t.order.contract_info,"mobile_allowance")}]}})]),t._v(" "),a("b-form-group",{staticClass:"col-md-2",attrs:{label:"Phụ cấp khoản công tác"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.contract_info.biztrip_allowance,expression:"order.contract_info.biztrip_allowance"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.order.contract_info.biztrip_allowance},on:{input:[function(e){e.target.composing||t.$set(t.order.contract_info,"biztrip_allowance",e.target.value)},function(e){return t.inputMoney(t.order.contract_info,"biztrip_allowance")}]}})])],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"definite"===t.order.contract_info.type_contract&&!this.order.id&&"new_contract"===this.order.order_type_alias,expression:"order.contract_info.type_contract === 'definite' && !this.order.id && this.order.order_type_alias === 'new_contract'"}],staticClass:"relate-order"},[a("div",{staticClass:"header mb-3 mt-2 font-weight-bold"},[t._v("\n            BHXH\n          ")]),t._v(" "),a("b-alert",{attrs:{show:""}},[a("b",[t._v("Lưu ý:")]),t._v(" Nhân viên ký hợp đồng 12 tháng yêu cầu tạo đề xuất tăng BHXH kèm theo"),a("br"),t._v("\n            Vui lòng chọn phương án báo tăng BHXH (nếu có)\n          ")]),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Loại khai báo BHXH"}},[a("select-order-group",{attrs:{group:t.relate_order.group,disabled:!0,"category-group":!0,multiple:!1},on:{input:function(e){t.relate_order.group=e?e.alias:null}}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Phương án BHXH"}},[a("select-order-type",{attrs:{"has-group":!1,"group-alias":t.relate_order.group,type:t.relate_order.type,disabled:!!t.order.id},on:{input:function(e){t.relate_order.type=e?e.id:null}}})],1)],1)],1)])]),t._v(" "),"working_process"===t.order.order_category?a("div",[a("div",{staticClass:"header mb-3 mt-2 font-weight-bold"},[t._v("\n        "+t._s((t.order.group_name||"")+" - "+(t.order.order_type_name||""))+"\n      ")]),t._v(" "),"stop_working"===t.order.order_group?a("div",[a("div",{staticClass:"stop-working-info"},[a("b-form-row",[a("b-form-group",{staticClass:"col-md-6",attrs:{label:"Ngày bắt đầu nghỉ"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Ngày bắt đầu nghỉ "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("Datepicker",{attrs:{language:t.language.vi,format:"dd/MM/yyyy",placeholder:"dd/mm/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},model:{value:t.order.resign_info.resign_date,callback:function(e){t.$set(t.order.resign_info,"resign_date",e)},expression:"order.resign_info.resign_date"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-6",attrs:{label:"Loại nghỉ"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Loại nghỉ "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("single-select-work-change-type",{attrs:{"type-alias":t.order.resign_info.resign_type,"is-resign-type":!0},on:{handleSelectedWorkChangeType:t.handleSelectedWorkChangeType}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-6"}),t._v(" "),a("b-form-group",{staticClass:"col-md-12",attrs:{label:"Lý do nghỉ"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Lý do nghỉ "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("single-select-work-change-reason",{attrs:{"type-alias":t.order.resign_info.resign_type,"reason-alias":t.order.resign_info.resign_reason},on:{handleSelectedWorkChangeReason:t.handleSelectedWorkChangeReason}})],1),t._v(" "),t.resignTypeChargeSalary.includes(t.order.resign_info.resign_type)?[a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Trả lương"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Trả lương "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("b-form-select",{attrs:{options:t.salaryOptions},on:{change:t.selectSalaryOption},model:{value:t.order.resign_info.salary_option,callback:function(e){t.$set(t.order.resign_info,"salary_option",e)},expression:"order.resign_info.salary_option"}})],1),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.salaryPenaltyOptions.includes(t.order.resign_info.salary_option),expression:"salaryPenaltyOptions.includes(order.resign_info.salary_option)"}],staticClass:"col-md-3",attrs:{label:"% Phạt lương"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("% Phạt lương "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.order.resign_info.resign_fine,expression:"order.resign_info.resign_fine",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.order.resign_info.resign_fine},on:{input:[function(e){e.target.composing||t.$set(t.order.resign_info,"resign_fine",t._n(e.target.value))},function(e){return t.validInput(t.order.resign_info,"resign_fine",{min:0,max:100},null,null)}],blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.holdSalaryOptions.includes(t.order.resign_info.salary_option),expression:"holdSalaryOptions.includes(order.resign_info.salary_option)"}],staticClass:"col-md-3",attrs:{label:"Ngày hoàn thành giam lương"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Ngày hoàn thành giam lương "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("Datepicker",{attrs:{language:t.language.vi,format:"dd/MM/yyyy",placeholder:"dd/mm/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},model:{value:t.order.resign_info.salary_paid_date,callback:function(e){t.$set(t.order.resign_info,"salary_paid_date",e)},expression:"order.resign_info.salary_paid_date"}})],1),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.depositInfo.total_deposited_money>0||t.order.resign_info.deposit_option,expression:"depositInfo.total_deposited_money > 0 || order.resign_info.deposit_option"}],staticClass:"col-md-3",attrs:{label:"Trả cọc"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Trả cọc "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("b-form-select",{attrs:{options:t.depositOptions},on:{change:t.selectDepositOption},model:{value:t.order.resign_info.deposit_option,callback:function(e){t.$set(t.order.resign_info,"deposit_option",e)},expression:"order.resign_info.deposit_option"}})],1),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.depositPenaltyOptions.includes(t.order.resign_info.deposit_option)||t.order.resign_info.resign_fine_deposit,expression:"depositPenaltyOptions.includes(order.resign_info.deposit_option) || order.resign_info.resign_fine_deposit"}],staticClass:"col-md-3",attrs:{label:"% Phạt cọc"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("% Phạt cọc "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.order.resign_info.resign_fine_deposit,expression:"order.resign_info.resign_fine_deposit",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.order.resign_info.resign_fine_deposit},on:{input:[function(e){e.target.composing||t.$set(t.order.resign_info,"resign_fine_deposit",t._n(e.target.value))},function(e){return t.validInput(t.order.resign_info,"resign_fine_deposit",{min:0,max:100},null,null)}],blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.holdDepositOptions.includes(t.order.resign_info.deposit_option),expression:"holdDepositOptions.includes(order.resign_info.deposit_option)"}],staticClass:"col-md-3",attrs:{label:"Ngày hoàn thành giam cọc"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Ngày hoàn thành giam cọc "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("Datepicker",{attrs:{language:t.language.vi,format:"dd/MM/yyyy",placeholder:"dd/mm/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},model:{value:t.order.resign_info.deposit_paid_date,callback:function(e){t.$set(t.order.resign_info,"deposit_paid_date",e)},expression:"order.resign_info.deposit_paid_date"}})],1)]:t._e()],2)],1)]):t._e(),t._v(" "),"modify_ekyc_info"===t.order.order_type_alias?a("div",{staticClass:"card-images"},t._l(t.order.additional_info.card_images,function(t,e){return a("div",{key:e,staticClass:"card-images-item"},[a("img",{attrs:{src:t,alt:""}})])}),0):t._e(),t._v(" "),"user_info"===t.order.order_group?a("div",[t.hasShowChangeInfo?a("table",{staticClass:"table table-sm table-borderless"},[t._m(0),t._v(" "),t._l(t.order.new_value,function(e,n){return a("tr",{key:n},[a("td",["modify_ekyc_info"!==t.order.order_type_alias?[a("b",[t._v(t._s(t.fieldDesc[n]||n))]),a("br")]:t._e(),t._v(" "),t._l(e,function(e,i){return a("div",{key:"old_"+i},["list_child_household"===i?[a("table",{staticClass:"table table-sm table-borderless"},[t._m(1,!0),t._v(" "),a("ListChildren",{attrs:{children:t.order.old_value[n][i]||[]}})],1)]:[t._v("\n                  - "+t._s(t.fieldDesc[i]||i)+" :\n                  "),t.order.old_value[n][i]?a("span",["object"!=typeof t.order.old_value[n][i]?a("span",[["Số CMND/CCCD"].includes(i)?a("span",[a("SensitiveLabel",{attrs:{className:"d-inline","data-input":t.order.old_value[n][i],source:"update-order",type:"old_personal_id_number","user-id":t.employee.user.id,"order-id":t.idOrder}})],1):t._e(),t._v(" "),["Số điện thoại"].includes(i)?a("span",[a("SensitiveLabel",{attrs:{className:"d-inline","data-input":t.order.old_value[n][i],source:"update-order",type:"old_tel","user-id":t.employee.user.id,"order-id":t.idOrder}})],1):a("span",[t._v(t._s(t.order.old_value[n][i]||null))])]):a("div",{staticClass:"ml-2"},[Array.isArray(t.order.old_value[n][i])?a("table",{staticClass:"table table-sm"},[a("tr",t._l(e[0],function(e,n){return a("th",{key:"sub_header_old"+n},[t._v(t._s(t.fieldDesc[n]||n))])}),0),t._v(" "),t._l(t.order.old_value[n][i],function(n,s){return a("tr",{key:s},t._l(e[0],function(e,o){return a("td",{key:"sub_data_old"+o},[n[o]&&["personal_id_number","mobile"].includes(o)?a("span",[a("SensitiveLabel",{attrs:{className:"d-inline","data-input":n[o],source:"update-order",type:"old-"+i+"-"+o+"-"+s,"user-id":t.employee.user.id,"order-id":t.idOrder}})],1):a("span",[t._v(t._s(n[o]||null))])])}),0)})],2):a("span",t._l(t.order.old_value[n][i],function(e,n){return a("span",{key:n},[t._v("\n                      "+t._s(t.fieldDesc[n]||n)+" : "+t._s(e)+"\n                    ")])}),0)])]):t._e()]],2)})],2),t._v(" "),a("td",["modify_ekyc_info"!==t.order.order_type_alias?[a("b",[t._v(t._s(t.fieldDesc[n]||n))]),a("br")]:t._e(),t._v(" "),t._l(e,function(e,i){return a("div",{key:"new"+i},["list_child_household"===i?[a("table",{staticClass:"table table-sm table-borderless"},[t._m(2,!0),t._v(" "),a("ListChildren",{attrs:{children:e}})],1)]:[t._v("\n                  - "+t._s(t.fieldDesc[i]||i)+" :\n                  "),"object"!=typeof e?a("span",[["Số CMND/CCCD"].includes(i)?a("span",[a("SensitiveLabel",{attrs:{className:"d-inline","data-input":t.order.new_value[n][i],source:"update-order",type:"new_personal_id_number","user-id":t.employee.user.id,"order-id":t.idOrder}})],1):t._e(),t._v(" "),["Số điện thoại"].includes(i)?a("span",[a("SensitiveLabel",{attrs:{className:"d-inline","data-input":t.order.new_value[n][i],source:"update-order",type:"new_tel","user-id":t.employee.user.id,"order-id":t.idOrder}})],1):a("span",[t._v(t._s(t.order.new_value[n][i]||null))])]):a("div",{staticClass:"ml-2"},[Array.isArray(e)?a("table",{staticClass:"table table-sm"},[a("tr",t._l(e[0],function(e,n){return a("th",{key:"sub_header_new"+n},[t._v("\n                          "+t._s(t.fieldDesc[n]||n)+"\n                        ")])}),0),t._v(" "),t._l(e,function(e,n){return a("tr",{key:n},t._l(e,function(e,s){return a("td",{key:"sub_data_new"+s},[e&&["personal_id_number","mobile"].includes(s)?a("span",[a("SensitiveLabel",{attrs:{className:"d-inline","data-input":e,source:"update-order",type:"new-"+i+"-"+s+"-"+n,"user-id":t.employee.user.id,"order-id":t.idOrder}})],1):a("span",[t._v(t._s(e))])])}),0)})],2):a("span",t._l(e,function(e,n){return a("span",{key:n},[t._v("\n                      "+t._s(t.fieldDesc[n]||n)+" : "+t._s(e)+"\n                    ")])}),0)])]],2)})],2)])})],2):t._e()]):t._e()]):t._e(),t._v(" "),a("b-form-row",[a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.showNote,expression:"showNote"}],staticClass:"col-md-12",attrs:{label:"Ghi chú"}},[a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.order.note,expression:"order.note",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{name:"note",id:"note",rows:"2"},domProps:{value:t.order.note},on:{input:function(e){e.target.composing||t.$set(t.order,"note",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])],1),t._v(" "),t.showInputFile()?a("fieldset",{staticClass:"border rounded form-group"},[a("legend",{staticClass:"d-inline col-form-label label-file"},[t._v("Thêm chứng từ/File (Nếu có)")]),t._v(" "),t._l(this.order.files,function(e,n){return a("b-form-row",{key:n,staticClass:"border-bottom align-items-center"},[a("b-form-group",{staticClass:"col-md-4 mb-0"},[a("b-select",{attrs:{options:t.fileTypeOptions[t.order.order_category],placeholde:"Chọn loại chứng từ/file"},model:{value:e.type,callback:function(a){t.$set(e,"type",a)},expression:"file.type"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-7 mb-0"},[a("file-view-upload",{staticClass:"d-inline-block",attrs:{"input-id":"file_"+n,"input-style":{width:"4rem"},"allow-delete":!1,hideUploadButton:!0,height:"5rem",edit:!0,files:e.file_exist||[],"file-add":e.file_add||[]}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-1 mb-0 text-right"},[a("b-btn",{directives:[{name:"show",rawName:"v-show",value:!e.file_exist||!e.file_exist.length,expression:"!file.file_exist || !file.file_exist.length"}],attrs:{variant:"outline-danger",title:"Xóa chứng từ",size:"sm"},on:{click:function(e){return t.deleteLicense(n)}}},[a("i",{staticClass:"fas fa-times"})])],1)],1)}),t._v(" "),a("div",{staticClass:"text-left"},[a("b-btn",{attrs:{variant:"outline-ghtk",size:"sm",disabled:!t.canAddLicenses()},on:{click:function(e){return t.addLicenses()}}},[a("i",{staticClass:"fas fa-plus"}),t._v(" Thêm chứng từ/File")])],1)],2):t._e(),t._v(" "),t.showActionApproveReportEkyc?a("div",{staticClass:"text-center mt-3"},[a("b-btn",{staticClass:"w-25",attrs:{variant:"ghtk",disabled:!t.canUpdate},on:{click:function(e){return t.updateStatus("duyet",null)}}},[t._v("DUYỆT")])],1):t._e(),t._v(" "),t.allowUpdate&&t.edit?a("div",{staticClass:"text-center mt-3"},[a("b-btn",{staticClass:"w-25",attrs:{variant:"ghtk",disabled:!t.canUpdate},on:{click:t.updateOrder}},[t._v(t._s(t.order.id?"CHỈNH SỬA":"ĐỀ XUẤT"))])],1):t._e(),t._v(" "),a("b-modal",{attrs:{static:"",title:"Nhập lý do từ chối",id:"reject-reason-modal-1"}},[a("b-textarea",{model:{value:t.rejectReason,callback:function(e){t.rejectReason=e},expression:"rejectReason"}}),t._v(" "),a("div",{staticClass:"w-100 text-center",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("b-btn",{attrs:{variant:"outline-ghtk"},on:{click:function(e){return t.updateStatus("tu_choi",t.rejectReason)}}},[t._v("OK")]),t._v(" "),a("b-btn",{attrs:{variant:"outline-danger"},on:{click:function(e){return t.$bvModal.hide("reject-reason-modal-1")}}},[t._v("Hủy")])],1)],1),t._v(" "),a("approve-resign-work-modal",{attrs:{currentUserUpdateStatus:t.employee.user.username,"is-show":t.isShowApproveModal},on:{toggleModal:t.toggleApproveModal,changeAction:function(e){return t.updateStatus("duyet",t.rejectReason)}}}),t._v(" "),a("modal-detail-file",{attrs:{id:"detail-file-contract-1",title:"File hợp đồng","contract-id":t.contractId}}),t._v(" "),a("ModalCheckBeforeApproveContract",{attrs:{"data-check":t.dataCheckBeforeApproveContract,"is-show":t.isShowModalCheckBeforeApproveContract},on:{toggleModal:t.toggleModalCheckBeforeApproveContract,continueApprove:function(e){return t.updateStatus("duyet",null,!0)}}})],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("th",{staticStyle:{width:"50%"}},[this._v("Thông tin hiện tại")]),this._v(" "),e("th",[this._v("Thông tin thay đổi")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("Họ tên con")]),t._v(" "),a("th",[t._v("Ngày sinh")]),t._v(" "),a("th",[t._v("Giới tính")]),t._v(" "),a("th",[t._v("CMND(Mã số định danh cá nhân)")]),t._v(" "),a("th",[t._v("Giấy khai sinh con")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("Họ tên con")]),t._v(" "),a("th",[t._v("Ngày sinh")]),t._v(" "),a("th",[t._v("Giới tính")]),t._v(" "),a("th",[t._v("CMND(Mã số định danh cá nhân)")]),t._v(" "),a("th",[t._v("Giấy khai sinh con")])])}],!1,bt,"data-v-76dfb950",null);e.default=yt.exports},VIwv:function(t,e){},"VO+t":function(t,e,a){"use strict";var n=a("RUzx"),i={name:"single-select-shift",components:{Multiselect:a.n(n).a},props:{disabled:{default:!1},shift:{default:""}},data:function(){return{hoursPerShift:10,option:null,options:[]}},created:function(){this.getConfigShift(this.hoursPerShift)},watch:{option:function(t,e){this.$emit("handleSelectedShift",t)},shift:function(){var t=this;this.option=this.shift?this.options.find(function(e){return e.from===t.shift.from}):null}},methods:{setSelectedOption:function(){var t=this;this.options&&this.options.length&&(this.option=this.options.find(function(e){return e.from===t.shift.from}))},getConfigShift:function(t){if(t){for(var e=0;e<24;e++){var a=e+10;a>24&&(a-=24);var n={from:e<10?"0"+e+":00:00":e+":00:00",shiftInterval:e+"h - "+a+"h",to:a<10?"0"+a+":00:00":a+":00:00"};this.options.push(n)}this.shift&&this.setSelectedOption()}}}},s=a("XyMi"),o=Object(s.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"select-user-work-type"},[a("multiselect",{attrs:{options:t.options,disabled:t.disabled,label:"shiftInterval","track-by":"shiftInterval",placeholder:"Chọn ca làm việc",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn",searchable:!0},on:{select:function(e){return t.$emit("select",e)}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v("Chọn ca làm việc")])])],1)},[],!1,null,null,null);e.a=o.exports},VS1q:function(t,e){},Vec3:function(t,e,a){"use strict";var n=a("RUzx"),i=a.n(n),s=a("SLMx"),o={name:"multi-select-hr-tag",components:{Multiselect:i.a},props:{autoClose:{default:null},hideSelected:{default:null},placeholder:{default:"Chọn thẻ"},customClass:{default:"multiselect-primary"},disabled:{default:!1},tableName:{},scope:{default:"global"},reload:{default:!1},type:{default:null}},data:function(){return{option:null,options:[]}},created:function(){this.getList()},watch:{option:function(t,e){this.$emit("handleHrTagSelected",t)},reload:function(t,e){this.getList()}},methods:{getList:function(){var t=this,e={table_name:this.tableName,scope:this.scope,type:this.type||null};s.a.getList(e).then(function(e){e.data.success&&(t.options=e.data.data)}).catch(function(t){console.log(t)})}}},r=a("XyMi"),l=Object(r.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{class:t.customClass,attrs:{options:t.options,multiple:!0,placeholder:t.placeholder,label:"name","track-by":"id",selectedLabel:"",deselectLabel:"X",selectLabel:"","close-on-select":t.autoClose,"hide-selected":t.hideSelected,disabled:t.disabled},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,null,null,null);e.a=l.exports},Vt6y:function(t,e){},VvlD:function(t,e,a){"use strict";var n=a("d7EF"),i=a.n(n),s=a("PJh5"),o=a.n(s),r=a("hC/b");e.a={daysInThisMonth:function(t,e,a){var n=new Date,i=n.getDate(),s=n.getFullYear(),o=n.getMonth();if(i>20&&(o=a&&i<25?n.getMonth():n.getMonth()+1),0===o)var r=String(s-1)+"-"+String(o+12).padStart(2,"0")+"-"+String(t);else r=String(s)+"-"+String(o).padStart(2,"0")+"-"+String(t);if(o<=11)var l=String(s)+"-"+String(o+1).padStart(2,"0")+"-"+String(e);else l=String(s+1)+"-"+String(o-11).padStart(2,"0")+"-"+String(e);return{from:r,to:l}},daysInCycleEvaluation:function(){var t,e,a=new Date,n=a.getDate(),i=a.getFullYear(),s=a.getMonth();if(n>8&&n<=24){s=a.getMonth()+1,t="05",e="20";var o=String(i)+"-"+String(s).padStart(2,"0")+"-"+t,r=String(i)+"-"+String(s).padStart(2,"0")+"-"+e}return(n>24||n<=8)&&(t="21",e="04",n>24&&(s=a.getMonth()+1,o=String(i)+"-"+String(s).padStart(2,"0")+"-"+t,r=s<=11?String(i)+"-"+String(s+1).padStart(2,"0")+"-"+e:String(i+1)+"-"+String(s-11).padStart(2,"0")+"-"+e),n<=8&&(o=0===s?String(i-1)+"-"+String(s+12).padStart(2,"0")+"-"+t:String(i)+"-"+String(s).padStart(2,"0")+"-"+t,r=String(i)+"-"+String(s+1).padStart(2,"0")+"-"+e)),{from:o,to:r}},cycleEvaluationForTech:function(){var t=new Date(Date.now()-3456e5),e=0,a=0;0===t.getDay()?e=(a=t.getDate())-6:a=(e=t.getDate()-t.getDay()+1)+6;var n=new Date(t.setDate(e)).toISOString().substring(0,10),i=o()(n).add(6,"days").format("MM");new Date(t.setDate(a));return{from:n,to:new Date(t.setMonth(parseInt(i)-1)).toISOString().substring(0,10)}},getMonthSalaryByDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cod",a=t>="2018-12-20"?20:25;"cod"===e&&(a=20);var n=o()(t).format("YYYY-MM-01");o()(t).format("DD")>a&&(n=o()(t).add(1,"months").format("YYYY-MM-20"));var i=o()(n),s=i.format("YYYY"),r=i.format("MM"),l=i.format("YYYY-MM-20");return{month:r,year:s,from:i.add(-1,"months").format("YYYY-MM-21"),to:l}},getDateExpectRefund:function(){var t=new Date;t.setDate(t.getDate()+30);var e=t.getDate(),a=t.getFullYear(),n=t.getMonth()+1;return n<10&&(n="0"+String(n)),e<=10?String(a)+"-"+String(n)+"-10":e>10&&e<=25?String(a)+"-"+String(n)+"-25":12===parseInt(n)?String(a+1)+"-"+String(n-11)+"-10":parseInt(n)<9?String(a)+"-0"+String(parseInt(n)+1)+"-10":String(a)+"-"+String(parseInt(n)+1)+"-10"},getToday:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-",e=new Date;return("0"+e.getDate()).slice(-2)+t+("0"+(e.getMonth()+1)).slice(-2)+t+e.getFullYear()},getCalculatedDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ADD",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DAY",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"-",i=new Date,s=i.getDate(),o=i.getMonth(),r=i.getFullYear();if("ADD"===e)switch(a){case"DAY":s+=t;break;case"MONTH":o+=t;break;case"YEAR":r+=t}else if("MINUS"===e)switch(a){case"DAY":s-=t;break;case"MONTH":o-=t;break;case"YEAR":r-=t}var l=new Date(r,o,s);return("0"+l.getDate()).slice(-2)+n+("0"+(l.getMonth()+1)).slice(-2)+n+l.getFullYear()},checkIsOverlapRangeTime:function(t,e){var a=i()(t,2),n=a[0],s=a[1],o=i()(e,2),l=o[0],c=o[1];return r.a.isEmpty(n)||r.a.isEmpty(l)||r.a.isEmpty(s)&&r.a.isEmpty(c)||r.a.isEmpty(s)&&(n<=l||n<=c)||r.a.isEmpty(c)&&(l<=n||l<=s)||n>=l&&n<=c||s>=l&&s<=c},reverseDateFormat:function(t){var e=t.includes("-")?"-":"/";return t.split(e).reverse().join(e)},getListHourOptions:function(){for(var t=[],e=0;e<=23;e++){var a=e<10?"0"+e:e;t.push({value:a,text:a})}return t},getListMinuteOptions:function(){for(var t=[],e=0;e<=59;e++){var a=e<10?"0"+e:e;t.push({value:a,text:a})}return t}}},WFm5:function(t,e){},Wf9h:function(t,e){},Wuoy:function(t,e){},"X+KB":function(t,e){},"X0/v":function(t,e){},X1Jv:function(t,e,a){"use strict";var n=a("JJbb");e.a={getAdministrativeArea:function(t){return n.a.get("ErpCommon/getAdministrativeArea",{params:t})},getHospitals:function(t){return n.a.get("ErpCommon/getHospitals",{params:t})},getEthnic:function(t){return n.a.get("ErpCommon/getEthnic",{params:t})}}},XbZs:function(t,e,a){"use strict";var n=a("hC/b"),i=this,s={name:"approve-resign-work-modal",props:{isShow:{type:Boolean,default:!1},isDashboard:{type:Boolean,default:!1},idxCurrentOrderUpdateStatus:{type:Number,default:0},currentUserUpdateStatus:{type:String,default:""}},data:function(){return{isShowModal:i.isShow}},watch:{isShow:function(t,e){this.isShowModal=t,this.$emit("toggleModal",t)}},methods:{showModal:function(){this.$emit("toggleModal",!0)},hideModal:function(){this.$emit("toggleModal",!1),this.$stopLoading()},updateStatus:function(){this.isDashboard?(n.a.showMessage("Vui lòng vào màn xem chi tiết để duyệt đề xuất!","warning"),this.$emit("toggleModal",!1)):this.$emit("changeAction")}}},o=a("XyMi");var r=function(t){a("RFey")},l=Object(o.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{staticClass:"d-flex align-items-center",attrs:{centered:"",title:"Xác nhận duyệt đề xuất",id:"approve-modal","header-class":"justify-content-center","modal-class":"align-items-center","hide-footer":""},on:{shown:t.showModal,hidden:t.hideModal},model:{value:t.isShowModal,callback:function(e){t.isShowModal=e},expression:"isShowModal"}},[a("div",{staticClass:"text-center justify-content-center mb-4 text-black"},[t._v("Bạn có chắc chắn muốn duyệt đề xuất nghỉ việc cho user "),a("span",{staticClass:"txt-reason"},[t._v(t._s(t.currentUserUpdateStatus))]),t._v("?")]),t._v(" "),a("div",{staticClass:"w-100 justify-content-center d-flex border-0 btn__action mt-2"},[a("b-btn",{staticClass:"btn__save text-white",attrs:{name:"resign-work-btn-confirm-reject-reason",id:"resign-work-btn-confirm-reject-reason"},on:{click:function(e){return t.updateStatus()}}},[t._v("Xác nhận")])],1)])},[],!1,r,"data-v-699c8214",null);e.a=l.exports},XhUp:function(t,e){},Xhte:function(t,e){},Xxi1:function(t,e){},Xz4E:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var e=a("pFYg"),n=a.n(e),i=a("C4MV"),s=a.n(i);!function(e,a){var i=function(t){var e={};function a(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||s()(t,e,{configurable:!1,enumerable:!0,get:n})},a.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=450)}({450:function(t,e,a){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),s()(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),i=["transitionend","webkitTransitionEnd","oTransitionEnd"],o=["transition","MozTransition","webkitTransition","WebkitTransition","OTransition"],r=function(){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._el=e,this._horizontal="horizontal"===a.orientation,this._animate=!1!==a.animate&&this._supportsTransitionEnd(),this._accordion=!1!==a.accordion,this._closeChildren=Boolean(a.closeChildren),this._showDropdownOnHover=Boolean(a.showDropdownOnHover),this._rtl="rtl"===document.documentElement.getAttribute("dir")||"rtl"===document.body.getAttribute("dir"),this._lastWidth=this._horizontal?window.innerWidth:null,this._onOpen=a.onOpen||function(){},this._onOpened=a.onOpened||function(){},this._onClose=a.onClose||function(){},this._onClosed=a.onClosed||function(){},e.classList.add("sidenav"),e.classList[this._animate?"remove":"add"]("sidenav-no-animation"),this._horizontal){e.classList.add("sidenav-horizontal"),e.classList.remove("sidenav-vertical"),this._inner=e.querySelector(".sidenav-inner");var i=this._inner.parentNode;this._prevBtn=e.querySelector(".sidenav-horizontal-prev"),this._prevBtn||(this._prevBtn=document.createElement("a"),this._prevBtn.href="#",this._prevBtn.className="sidenav-horizontal-prev",i.appendChild(this._prevBtn)),this._wrapper=e.querySelector(".sidenav-horizontal-wrapper"),this._wrapper||(this._wrapper=document.createElement("div"),this._wrapper.className="sidenav-horizontal-wrapper",this._wrapper.appendChild(this._inner),i.appendChild(this._wrapper)),this._nextBtn=e.querySelector(".sidenav-horizontal-next"),this._nextBtn||(this._nextBtn=document.createElement("a"),this._nextBtn.href="#",this._nextBtn.className="sidenav-horizontal-next",i.appendChild(this._nextBtn)),this._innerPosition=0,this.update()}else{e.classList.add("sidenav-vertical"),e.classList.remove("sidenav-horizontal");var s=n||window.PerfectScrollbar;s&&(this._scrollbar=new s(e.querySelector(".sidenav-inner"),{suppressScrollX:!0,wheelPropagation:!0}))}this._bindEvents(),e.sidenavInstance=this}return n(t,[{key:"open",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._closeChildren,n=this._findUnopenedParent(this._getItem(t,!0),a);if(n){var i=this._getLink(n,!0);this._horizontal&&this._isRoot(n)?(this._onOpen(this,n,i,this._findMenu(n)),this._toggleDropdown(!0,n,a),this._onOpened(this,n,i,this._findMenu(n))):(this._animate?(this._onOpen(this,n,i,this._findMenu(n)),window.requestAnimationFrame(function(){return e._toggleAnimation(!0,n,!1)})):(this._onOpen(this,n,i,this._findMenu(n)),n.classList.add("open"),this._onOpened(this,n,i,this._findMenu(n))),this._accordion&&this._closeOther(n,a))}}},{key:"close",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._closeChildren,n=this._getItem(t,!0),i=this._getLink(t,!0);if(n.classList.contains("open")&&!n.classList.contains("disabled"))if(this._horizontal&&this._isRoot(n))this._onClose(this,n,i,this._findMenu(n)),this._toggleDropdown(!1,n,a),this._onClosed(this,n,i,this._findMenu(n));else if(this._animate)this._onClose(this,n,i,this._findMenu(n)),window.requestAnimationFrame(function(){return e._toggleAnimation(!1,n,a)});else{if(this._onClose(this,n,i,this._findMenu(n)),n.classList.remove("open"),a)for(var s=n.querySelectorAll(".sidenav-item.open"),o=0,r=s.length;o<r;o++)s[o].classList.remove("open");this._onClosed(this,n,i,this._findMenu(n))}}},{key:"toggle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._closeChildren,a=this._getItem(t,!0);this._getLink(t,!0),a.classList.contains("open")?this.close(a,e):this.open(a,e)}},{key:"closeAll",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._closeChildren,e=this._el.querySelectorAll(".sidenav-inner > .sidenav-item.open"),a=0,n=e.length;a<n;a++)this.close(e[a],t)}},{key:"setActive",value:function(t,e){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=this._getItem(t,!1);if(e&&n)for(var s=this._el.querySelectorAll(".sidenav-inner .sidenav-item.active"),o=0,r=s.length;o<r;o++)s[o].classList.remove("active");if(e&&a){var l=this._findParent(i,"sidenav-item",!1);l&&this.open(l)}for(;i;)i.classList[e?"add":"remove"]("active"),i=this._findParent(i,"sidenav-item",!1)}},{key:"setDisabled",value:function(t,e){this._getItem(t,!1).classList[e?"add":"remove"]("disabled")}},{key:"isActive",value:function(t){return this._getItem(t,!1).classList.contains("active")}},{key:"isOpened",value:function(t){return this._getItem(t,!1).classList.contains("open")}},{key:"isDisabled",value:function(t){return this._getItem(t,!1).classList.contains("disabled")}},{key:"update",value:function(){if(this._horizontal){this.closeAll();var t=Math.round(this._wrapper.getBoundingClientRect().width),e=this._innerWidth,a=this._innerPosition;t-a>e&&((a=t-e)>0&&(a=0),this._innerPosition=a),this._updateSlider(t,e,a)}else this._scrollbar&&this._scrollbar.update()}},{key:"_updateSlider",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=null!==t?t:Math.round(this._wrapper.getBoundingClientRect().width),i=null!==e?e:this._innerWidth,s=null!==a?a:this._innerPosition;0===s?this._prevBtn.classList.add("disabled"):this._prevBtn.classList.remove("disabled"),i+s<=n?this._nextBtn.classList.add("disabled"):this._nextBtn.classList.remove("disabled")}},{key:"destroy",value:function(){if(this._el){this._unbindEvents();for(var t=this._el.querySelectorAll(".sidenav-item"),e=0,a=t.length;e<a;e++)this._unbindAnimationEndEvent(t[e]),t[e].classList.remove("sidenav-item-animating"),t[e].classList.remove("open"),t[e].style.overflow=null,t[e].style.height=null;for(var n=this._el.querySelectorAll(".sidenav-menu"),i=0,s=n.length;i<s;i++)n[i].style.marginRight=null,n[i].style.marginLeft=null;this._el.classList.remove("sidenav-no-animation"),this._wrapper&&(this._prevBtn.parentNode.removeChild(this._prevBtn),this._nextBtn.parentNode.removeChild(this._nextBtn),this._wrapper.parentNode.insertBefore(this._inner,this._wrapper),this._wrapper.parentNode.removeChild(this._wrapper),this._inner.style.marginLeft=null,this._inner.style.marginRight=null),this._el.sidenavInstance=null,delete this._el.sidenavInstance,this._el=null,this._horizontal=null,this._animate=null,this._accordion=null,this._closeChildren=null,this._showDropdownOnHover=null,this._rtl=null,this._onOpen=null,this._onOpened=null,this._onClose=null,this._onClosed=null,this._scrollbar&&(this._scrollbar.destroy(),this._scrollbar=null),this._inner=null,this._prevBtn=null,this._wrapper=null,this._nextBtn=null}}},{key:"_getLink",value:function(t,e){var a=[],n=e?"sidenav-toggle":"sidenav-link";if(t.classList.contains(n)?a=[t]:t.classList.contains("sidenav-item")&&(a=this._findChild(t,[n])),!a.length)throw new Error("`"+n+"` element not found.");return a[0]}},{key:"_getItem",value:function(t,e){var a=null,n=e?"sidenav-toggle":"sidenav-link";if(t.classList.contains("sidenav-item")?this._findChild(t,[n]).length&&(a=t):t.classList.contains(n)&&(a=t.parentNode.classList.contains("sidenav-item")?t.parentNode:null),!a)throw new Error((e?"Toggable ":"")+"`.sidenav-item` element not found.");return a}},{key:"_findUnopenedParent",value:function(t,e){for(var a=[],n=null;t;)t.classList.contains("disabled")?(n=null,a=[]):(t.classList.contains("open")||(n=t),a.push(t)),t=this._findParent(t,"sidenav-item",!1);if(!n)return null;if(1===a.length)return n;for(var i=0,s=(a=a.slice(0,a.indexOf(n))).length;i<s;i++)if(a[i].classList.add("open"),this._accordion)for(var o=this._findChild(a[i].parentNode,["sidenav-item","open"]),r=0,l=o.length;r<l;r++)if(o[r]!==a[i]&&(o[r].classList.remove("open"),e))for(var c=o[r].querySelectorAll(".sidenav-item.open"),d=0,u=c.length;d<u;d++)c[d].classList.remove("open");return n}},{key:"_closeOther",value:function(t,e){for(var a=this._findChild(t.parentNode,["sidenav-item","open"]),n=0,i=a.length;n<i;n++)a[n]!==t&&this.close(a[n],e)}},{key:"_toggleAnimation",value:function(t,e,a){var n=this,i=this._getLink(e,!0),s=this._findMenu(e);this._unbindAnimationEndEvent(e);var o=Math.round(i.getBoundingClientRect().height);e.style.overflow="hidden";var r=function(){e.classList.remove("sidenav-item-animating"),e.classList.remove("sidenav-item-closing"),e.style.overflow=null,e.style.height=null,n._horizontal||n.update()};t?(e.style.height=o+"px",e.classList.add("sidenav-item-animating"),e.classList.add("open"),this._bindAnimationEndEvent(e,function(){r(),n._onOpened(n,e,i,s)}),setTimeout(function(){return e.style.height=o+Math.round(s.getBoundingClientRect().height)+"px"},50)):(e.style.height=o+Math.round(s.getBoundingClientRect().height)+"px",e.classList.add("sidenav-item-animating"),e.classList.add("sidenav-item-closing"),this._bindAnimationEndEvent(e,function(){if(e.classList.remove("open"),r(),a)for(var t=e.querySelectorAll(".sidenav-item.open"),o=0,l=t.length;o<l;o++)t[o].classList.remove("open");n._onClosed(n,e,i,s)}),setTimeout(function(){return e.style.height=o+"px"},50))}},{key:"_toggleDropdown",value:function(t,e,a){var n=this._findMenu(e);if(t){var i=Math.round(this._wrapper.getBoundingClientRect().width),s=(this._innerWidth,this._innerPosition),o=this._getItemOffset(e),r=Math.round(e.getBoundingClientRect().width);o-5<=-1*s?this._innerPosition=-1*o:o+s+r+5>=i&&(this._innerPosition=r>i?-1*o:-1*(o+r-i)),e.classList.add("open");var l=Math.round(n.getBoundingClientRect().width);o+this._innerPosition+l>i&&l<i&&l>r&&(n.style[this._rtl?"marginRight":"marginLeft"]="-"+(l-r)+"px"),this._closeOther(e,a),this._updateSlider()}else{var c=this._findChild(e,["sidenav-toggle"]);if(c.length&&c[0].removeAttribute("data-hover","true"),e.classList.remove("open"),n.style[this._rtl?"marginRight":"marginLeft"]=null,a)for(var d=n.querySelectorAll(".sidenav-item.open"),u=0,h=d.length;u<h;u++)d[u].classList.remove("open")}}},{key:"_slide",value:function(t){var e=Math.round(this._wrapper.getBoundingClientRect().width),a=this._innerWidth,n=void this._innerPosition;"next"===t?a+(n=this._getSlideNextPos())<e&&(n=e-a):(n=this._getSlidePrevPos())>0&&(n=0),this._innerPosition=n,this.update()}},{key:"_getSlideNextPos",value:function(){for(var t=Math.round(this._wrapper.getBoundingClientRect().width),e=this._innerPosition,a=this._inner.childNodes[0],n=0;a;){if(a.tagName){var i=Math.round(a.getBoundingClientRect().width);if(n+e-5<=t&&n+e+i+5>=t){i>t&&n===-1*e&&(n+=i);break}n+=i}a=a.nextSibling}return-1*n}},{key:"_getSlidePrevPos",value:function(){for(var t=Math.round(this._wrapper.getBoundingClientRect().width),e=this._innerPosition,a=this._inner.childNodes[0],n=0;a;){if(a.tagName){var i=Math.round(a.getBoundingClientRect().width);if(n-5<=-1*e&&n+i+5>=-1*e){i<=t&&(n=n+i-t);break}n+=i}a=a.nextSibling}return-1*n}},{key:"_getItemOffset",value:function(t){for(var e=this._inner.childNodes[0],a=0;e!==t;)e.tagName&&(a+=Math.round(e.getBoundingClientRect().width)),e=e.nextSibling;return a}},{key:"_bindAnimationEndEvent",value:function(t,e){var a=this,n=function(n){n.target===t&&(a._unbindAnimationEndEvent(t),e(n))},s=window.getComputedStyle(t).transitionDuration;s=parseFloat(s)*(-1!==s.indexOf("ms")?1:1e3),t._sideNavAnimationEndEventCb=n,i.forEach(function(e){return t.addEventListener(e,t._sideNavAnimationEndEventCb,!1)}),t._sideNavAnimationEndEventTimeout=setTimeout(function(){n({target:t})},s+50)}},{key:"_unbindAnimationEndEvent",value:function(t){var e=t._sideNavAnimationEndEventCb;t._sideNavAnimationEndEventTimeout&&(clearTimeout(t._sideNavAnimationEndEventTimeout),t._sideNavAnimationEndEventTimeout=null),e&&(i.forEach(function(a){return t.removeEventListener(a,e,!1)}),t._sideNavAnimationEndEventCb=null)}},{key:"_bindEvents",value:function(){var t=this;this._evntElClick=function(e){var a=e.target.classList.contains("sidenav-toggle")?e.target:t._findParent(e.target,"sidenav-toggle",!1);a&&(e.preventDefault(),"true"!==a.getAttribute("data-hover")&&t.toggle(a))},this._el.addEventListener("click",this._evntElClick),this._evntWindowResize=function(){t._horizontal?t._lastWidth!==window.innerWidth&&(t._lastWidth=window.innerWidth,t.update()):t.update()},window.addEventListener("resize",this._evntWindowResize),this._horizontal&&(this._evntPrevBtnClick=function(e){e.preventDefault(),t._prevBtn.classList.contains("disabled")||t._slide("prev")},this._prevBtn.addEventListener("click",this._evntPrevBtnClick),this._evntNextBtnClick=function(e){e.preventDefault(),t._nextBtn.classList.contains("disabled")||t._slide("next")},this._nextBtn.addEventListener("click",this._evntNextBtnClick),this._evntBodyClick=function(e){!t._inner.contains(e.target)&&t._el.querySelectorAll(".sidenav-inner > .sidenav-item.open").length&&t.closeAll()},document.body.addEventListener("click",this._evntBodyClick),this._evntHorizontalElClick=function(e){var a=e.target.classList.contains("sidenav-link")?e.target:t._findParent(e.target,"sidenav-link",!1);a&&!a.classList.contains("sidenav-toggle")&&t.closeAll()},this._el.addEventListener("click",this._evntHorizontalElClick),this._showDropdownOnHover&&(this._evntInnerMousemove=function(e){for(var a=t._findParent(e.target,"sidenav-item",!1),n=null;a;)n=a,a=t._findParent(a,"sidenav-item",!1);if(n&&!n.classList.contains("open")){var i=t._findChild(n,["sidenav-toggle"]);i.length&&(i[0].setAttribute("data-hover","true"),t.open(i[0],t._closeChildren,!0),setTimeout(function(){i[0].removeAttribute("data-hover")},500))}},this._inner.addEventListener("mousemove",this._evntInnerMousemove),this._evntInnerMouseleave=function(e){t.closeAll()},this._inner.addEventListener("mouseleave",this._evntInnerMouseleave)))}},{key:"_unbindEvents",value:function(){this._evntElClick&&(this._el.removeEventListener("click",this._evntElClick),this._evntElClick=null),this._evntWindowResize&&(window.removeEventListener("resize",this._evntWindowResize),this._evntWindowResize=null),this._evntPrevBtnClick&&(this._prevBtn.removeEventListener("click",this._evntPrevBtnClick),this._evntPrevBtnClick=null),this._evntNextBtnClick&&(this._nextBtn.removeEventListener("click",this._evntNextBtnClick),this._evntNextBtnClick=null),this._evntBodyClick&&(document.body.removeEventListener("click",this._evntBodyClick),this._evntBodyClick=null),this._evntHorizontalElClick&&(this._el.removeEventListener("click",this._evntHorizontalElClick),this._evntHorizontalElClick=null),this._evntInnerMousemove&&(this._inner.removeEventListener("mousemove",this._evntInnerMousemove),this._evntInnerMousemove=null),this._evntInnerMouseleave&&(this._inner.removeEventListener("mouseleave",this._evntInnerMouseleave),this._evntInnerMouseleave=null)}},{key:"_findMenu",value:function(t){for(var e=t.childNodes[0],a=null;e&&!a;)e.classList&&e.classList.contains("sidenav-menu")&&(a=e),e=e.nextSibling;if(!a)throw new Error("Cannot find `.sidenav-menu` element for the current `.sidenav-toggle`");return a}},{key:"_isRoot",value:function(t){return!this._findParent(t,"sidenav-item",!1)}},{key:"_findParent",value:function(t,e){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("BODY"===t.tagName.toUpperCase())return null;for(t=t.parentNode;"BODY"!==t.tagName.toUpperCase()&&!t.classList.contains(e);)t=t.parentNode;if(!(t="BODY"!==t.tagName.toUpperCase()?t:null)&&a)throw new Error("Cannot find `."+e+"` parent element");return t}},{key:"_findChild",value:function(t,e){for(var a=t.childNodes,n=[],i=0,s=a.length;i<s;i++)if(a[i].classList){for(var o=0,r=0;r<e.length;r++)a[i].classList.contains(e[r])&&o++;e.length===o&&n.push(a[i])}return n}},{key:"_supportsTransitionEnd",value:function(){if(window.QUnit)return!1;var t=document.body||document.documentElement,e=!1;return o.forEach(function(a){void 0!==t.style[a]&&(e=!0)}),e}},{key:"_innerWidth",get:function(){for(var t=this._inner.childNodes,e=0,a=0,n=t.length;a<n;a++)t[a].tagName&&(e+=Math.round(t[a].getBoundingClientRect().width));return e}},{key:"_innerPosition",get:function(){return parseInt(this._inner.style[this._rtl?"marginRight":"marginLeft"]||"0px")},set:function(t){return this._inner.style[this._rtl?"marginRight":"marginLeft"]=t+"px",t}}]),t}();e.SideNav=r}});if("object"==(void 0===i?"undefined":n()(i))){var o=["object"==n()(t)&&"object"==n()(t.exports)?t.exports:null,"undefined"!=typeof window?window:null,e&&e!==window?e:null];for(var r in i)o[0]&&(o[0][r]=i[r]),o[1]&&"__esModule"!==r&&(o[1][r]=i[r]),o[2]&&(o[2][r]=i[r])}}(this)}.call(e,a("f1Eh")(t))},"Y/vs":function(t,e,a){"use strict";var n=a("PikB");e.a={fastCreateContract:function(t){return n.a.post("AdContract/createDefaultContract",t)},getInitSalary:function(t){return n.a.get("AdContract/getInitSalary",{params:t})},exportContract:function(t){return n.a.get("AdContract/getContract",{params:t})},getPositionDetail:function(t){return n.a.get("AdPositionDetail/getPostionDetail",{params:t})},updatePositionDetail:function(t){return n.a.post("AdPositionDetail/updatePositionDetail",t)},deleteContract:function(t){return n.a.delete("AdContract/deleteContract",{params:t})},deleteAppendix:function(t){return n.a.delete("AdContract/deleteAppendix",{params:t})},updateStatusContract:function(t){return n.a.post("AdContract/updateStatusContract",t)},createChatForSigning:function(t){return n.a.post("AdContract/createChatForSigning",t)},genAppendixNumber:function(t){return n.a.post("AdContract/genAppendixNumber",t)},createAppendix:function(t){return n.a.post("AdContract/createAppendix",t)},getDetailAppendix:function(t){return n.a.get("AdContract/getDetailAppendix",{params:t})},getListAppendixOfContract:function(t){return n.a.get("AdContract/getListAppendixOfContract",{params:t})},getAppendixOfContract:function(t){return n.a.get("AdContract/getValidAppendixOfContract",{params:t})},updateAppendix:function(t){return n.a.post("AdContract/updateAppendix",t)},getLiquidateInfo:function(t){return n.a.get("AdContract/getLiquidateInfo",{params:t})},updateLiquidateInfo:function(t){return n.a.post("AdContract/updateLiquidateInfo",t)},getPermissionOnContract:function(t){return n.a.get("AdContract/getPermissionOnContract",{params:t})},getContractDetail:function(t){return n.a.get("AdContract/getContractDetail",{params:t})}}},YJw0:function(t,e,a){"use strict";var n=a("JJbb"),i=a("Saf8");e.a={listOrder:function(t){return n.a.get("/ErpHrOrder/listOrder",{params:t})},getOrderContracts:function(t){return n.a.get("/ErpHrOrder/getOrderContracts",{params:t})},getAmountContractByType:function(t){return n.a.get("/ErpHrOrder/getAmountContractByType",{params:t})},getTotal:function(t){return n.a.get("/ErpHrOrder/getTotalAmountOrder",{params:t})},createDirectChat:function(t){return n.a.get("/ErpGChat/createDirectChat",{params:t})},updateOrder:function(t){return n.a.post("/ErpHrOrder/updateOrder",t)},updateUserHandler:function(t){return n.a.post("/ErpHrOrder/updateUserHandler",t)},detailOrder:function(t){return n.a.get("/ErpHrOrder/detailOrder",{params:t})},getType:function(t){return n.a.get("/ErpHrOrder/getType",{params:t})},getProfile:function(t){return n.a.get("/ErpHrOrder/getProfile",{params:t})},sendComment:function(t){return n.a.post("/ErpHrOrder/sendComment",t)},updateStatus:function(t){return n.a.post("/ErpHrOrder/updateStatusOrder",t)},updateCensor:function(t){return n.a.post("/ErpHrOrder/updateCensor",t)},exportOrderHr:function(t){return n.a.post("/ErpHrOrder/exportOrderHr",t)},getOrderOfProfile:function(t){return n.a.post("/ErpHrOrder/getOrderOfProfile",t)},allowShowOnGchat:function(t){return n.a.post("/ErpHrOrder/checkAllowShowOnGchat",t)},getStatisticOrderHr:function(t){return n.a.get("/ErpHrOrder/getStatisticOrderHr",{params:t})},getHoliday:function(t){return n.a.get("/ErpHrOrder/getHoliday",{params:t})},suggestData:function(t){return n.a.post("/ErpHrOrder/suggestData",t)},getOrderMissDeadline:function(t){return n.a.get("/ErpHrOrder/getOrderMissDeadline",{params:t})},getLogUpdate:function(t){return n.a.get("/ErpHrOrder/getLogUpdate",{params:t})},getCensorForOrder:function(t){return n.a.get("/ErpHrOrder/getCensorForOrder",{params:t})},getAllOrderOrUserStopWork:function(t){return n.a.get("/ErpHrOrder/getAllOrderOrUserStopWork",{params:t})},getEkycImageChanges:function(t){return n.a.get("/ErpHrOrder/getEkycChanges",{params:t})},getReportLostIdentityCardOrder:function(t){return n.a.get("/ErpHrOrder/getReportLostIdentityCard",{params:t})},getCountOrderStopWork:function(t){return n.a.get("/ErpHrOrder/getCountOrderStopWork",{params:t})},getCensorForScreenStopWork:function(t){return n.a.get("/ErpHrOrder/getCensorForScreenStopWork",{params:t})},updateStaffLog:function(t){return n.a.post("/ErpHrOrder/updateStaffLog",t)},removeHandlerStepOfOrder:function(t){return i.a.post("/hr-order/remove-handler",t)},addHandlerToStepOfOrder:function(t){return i.a.post("/hr-order/add-handler",t)},updateStaffLogV2:function(t){return i.a.post("/hr-order/add-note",t)},resignationNotify:function(t){return i.a.post("/hr-order/resignation-notify",t)}}},YRij:function(t,e){},YTZm:function(t,e){},YYaX:function(t,e){},YaEn:function(t,e,a){"use strict";var n=a("Dd8w"),i=a.n(n),s=a("Xxa5"),o=a.n(s),r=a("exGp"),l=a.n(r),c=a("Gu7T"),d=a.n(c),u=a("7+uW"),h=a("/ocq"),p=a("p3jY"),m=a.n(p),f=a("xtwg"),g=a("IcnI"),v=a("vfns"),_=a("NYxO"),b={name:"app-layout-navbar",props:{sidenavToggle:{type:Boolean,default:!0}},computed:Object(_.c)({userInfo:"userInfo"}),methods:{toggleSidenav:function(){this.layoutHelpers.toggleCollapsed()},getLayoutNavbarBg:function(){return this.layoutNavbarBg}}},y=a("XyMi"),C=Object(y.a)(b,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-navbar",{staticClass:"layout-navbar align-items-lg-center container-p-x",attrs:{toggleable:"lg",variant:t.getLayoutNavbarBg()}},[t.sidenavToggle?a("b-navbar-nav",{staticClass:"align-items-lg-center mr-auto mr-lg-4"},[a("a",{staticClass:"nav-item nav-link px-0 ml-2 ml-lg-0",attrs:{href:"javascript:void(0)"},on:{click:t.toggleSidenav}},[a("i",{staticClass:"ion ion-md-menu text-large align-middle"})])]):t._e(),t._v(" "),a("b-navbar-toggle",{attrs:{target:"app-layout-navbar"}}),t._v(" "),a("b-collapse",{attrs:{"is-nav":"",id:"app-layout-navbar"}},[a("b-navbar-nav",{staticClass:"align-items-lg-center"},[a("b-nav-item",{attrs:{href:"https://admin.giaohangtietkiem.vn/admin"}},[a("i",{staticClass:"sidenav-icon ion ion-ios-home"}),t._v("Trang chủ")])],1),t._v(" "),a("b-navbar-nav",{staticClass:"align-items-lg-center ml-auto"},[t.userInfo&&t.userInfo.hasOwnProperty("User")?a("b-nav-item-dropdown",{staticClass:"demo-navbar-user",attrs:{right:!t.isRTL}},[a("template",{slot:"button-content"},[a("span",{staticClass:"d-inline-flex flex-lg-row-reverse align-items-center align-middle"},[a("img",{staticClass:"d-block rounded-circle",attrs:{src:t.userInfo.MasterProfile.image_profile,alt:"",width:"30px",height:"30px"}}),t._v(" "),a("span",{staticClass:"px-1 mr-lg-2 ml-2 ml-lg-0"},[t._v(t._s(t.userInfo.User.fullname))])])]),t._v(" "),a("b-dd-item",{attrs:{href:"/admin/logout"}},[a("i",{staticClass:"ion ion-ios-log-out text-danger"}),t._v("   Đăng xuất")]),t._v(" "),a("b-dd-item",{attrs:{to:"/profile/master/edit/"+ +(t.userInfo&&t.userInfo.MasterProfile&&t.userInfo.MasterProfile.staff_code)}},[a("i",{staticClass:"ion ion-ios-contact text-info"}),t._v("   Thông tin cá nhân\n        ")])],2):a("b-nav-item",{attrs:{href:"/admin/logout"}},[a("i",{staticClass:"ion ion-ios-log-out text-danger"}),t._v(" Đăng xuất")])],1)],1)],1)},[],!1,null,null,null).exports,w=a("w6Ui"),k={name:"app-layout-sidenav",components:{Sidenav:w.a,SidenavLink:w.e,SidenavRouterLink:w.g,SidenavMenu:w.f,SidenavHeader:w.d,SidenavBlock:w.b,SidenavDivider:w.c},props:{orientation:{type:String,default:"vertical"}},computed:i()({},Object(_.c)({userInfo:"userInfo"}),{curClasses:function(){var t=this.layoutSidenavBg;return"horizontal"!==this.orientation||-1===t.indexOf(" sidenav-dark")&&-1===t.indexOf(" sidenav-light")||(t=t.replace(" sidenav-dark","").replace(" sidenav-light","").replace("-darker","").replace("-dark","")),"bg-"+t+" "+("horizontal"!==this.orientation?"layout-sidenav":"layout-sidenav-horizontal container-p-x flex-grow-0")}}),methods:{isMenuActive:function(t){return 0===this.$route.path.indexOf(t)},isMenuOpen:function(t){return 0===this.$route.path.indexOf(t)&&"horizontal"!==this.orientation},toggleSidenav:function(){this.layoutHelpers.toggleCollapsed()}}};var x=function(t){a("u/b+")},S=Object(y.a)(k,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("sidenav",{class:t.curClasses,attrs:{orientation:t.orientation}},[a("div",{staticClass:"sidenav-inner",class:{"py-1":"horizontal"!==t.orientation}},[a("div",{staticClass:"app-brand"},[a("b-navbar-brand",{staticClass:"app-brand-logo",attrs:{to:"/"}},[a("img",{staticClass:"logo",attrs:{src:"https://cache.giaohangtietkiem.vn/d/d65b6bfede4370045a2010d9c6adaf99.png",alt:"ECOM JSC","data-aui-responsive-header-index":"0",width:36}})]),t._v(" "),a("a",{staticClass:"text-logo app-brand-text demo sidenav-text font-weight-normal ml-2",attrs:{href:"https://admin.giaohangtietkiem.vn"}},[t._v(" Giaohangtietkiem.vn")])],1),t._v(" "),a("li",{staticClass:"sidenav-header small font-weight-semibold"},[t._v("DANH MỤC")]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link sidenav-toggle",attrs:{href:"javascript:void(0)"}},[a("i",{staticClass:"sidenav-icon ion ion-md-home"}),t._v(" "),a("div",[t._v("Home")])]),t._v(" "),a("ul",{staticClass:"sidenav-menu"},[t.userInfo&&t.userInfo.Group&&[3,8,25].includes(parseInt(t.userInfo.Group.id))?a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/dashboard/erp"}},[t._v("Dashboard ERP")])],1):t._e(),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/dashboard/v2"}},[t._v("Dashboard V2")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link sidenav-toggle",attrs:{href:"javascript:void(0)"}},[a("div",[t._v("Dashboard V4")])]),t._v(" "),a("ul",{staticClass:"sidenav-menu"},[a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/dashboard/v4/overview-shop"}},[t._v("Tổng quan shop")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/dashboard/v4/overview-package"}},[t._v("Tổng quan đơn")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/dashboard/v4/overview-operation"}},[t._v("Vận hành")])],1)])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/dashboard/external/overview-external"}},[t._v("Dashboard liên vùng")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/dashboard/v5"}},[t._v("Dashboard V5")])],1)])]),t._v(" "),a("sidenav-router-link",{attrs:{to:"/area/manager",icon:"fas fa-map-marker"}},[t._v("\n        Quản lý khu vực lấy giao\n      ")]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link sidenav-toggle",attrs:{href:"javascript:void(0)"}},[a("i",{staticClass:"sidenav-icon ion ion-md-speedometer"}),t._v(" "),a("div",[t._v("Shop")])]),t._v(" "),a("ul",{staticClass:"sidenav-menu"},[a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/shops"}},[a("div",[t._v("Danh sách shop")])])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/shops/shopIncorrectBankInfo"}},[t._v("Shop sai thông tin NH")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/shops/add"}},[a("div",[t._v("Thêm Shop")])])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/shops/feedbacks/index"}},[a("div",[t._v("Yêu cầu")])])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/shops/consultants"}},[a("div",[t._v("Thống kê TeleSale")])])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/events/index"}},[a("div",[t._v("Events")])])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/shops/shopHeaders"}},[a("div",[t._v("Shop headers")])])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/reviews"}},[a("div",[t._v("Đánh giá dịch vụ")])])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/shops/leader-sale-b2c"}},[t._v("Gán leader Sale B2C")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/shops/assign-pkonsite"}},[t._v("Gán phụ kho onsite")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/shops/assign-presenter"}},[t._v("Gán người giới thiệu shop")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/shops/export-shop-vat-info"}},[t._v("Export thông tin Shop yêu cầu xuất hóa đơn VAT")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link sidenav-toggle",attrs:{href:"javascript:void(0)"}},[a("div",[t._v("Cam kết hoàn")])]),t._v(" "),a("ul",{staticClass:"sidenav-menu"},[a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/shops/return-coupon"}},[t._v("Gán cam kết hoàn")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/shops/return-coupon-result"}},[t._v("Kết quả cam kết hoàn")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/shops/return-coupon-update"}},[t._v("Điều chỉnh cam kết hoàn")])],1)])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link sidenav-toggle",attrs:{href:"javascript:void(0)"}},[a("div",[t._v("Chiết khấu mới")])]),t._v(" "),a("ul",{staticClass:"sidenav-menu"},[a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/shops/new-deduction"}},[t._v("Gán gói chiết khấu")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/shops/new-deduction-result"}},[t._v("Kết quả chiết khấu")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/shops/new-deduction-update"}},[t._v("Điều chỉnh chiết khấu")])],1)])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/shops/info-shop-debt"}},[t._v("Phiến đối soát sắp tới")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/shops/cause"}},[t._v("Quản lý Lý do đánh giá")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/shops/branch"}},[t._v("Quản lý đại lý")])],1)])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link sidenav-toggle",attrs:{href:"javascript:void(0)"}},[a("i",{staticClass:"sidenav-icon ion ion-ios-people d-block"}),t._v(" "),a("div",[t._v("COD")])]),t._v(" "),a("ul",{staticClass:"sidenav-menu"},[a("li",{staticClass:"sidenav-header small font-weight-semibold"},[t._v("CODS")]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/cods"}},[t._v("Danh sách COD")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/cods/add"}},[t._v("Thêm COD")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/cods/luong"}},[t._v("Lương COD")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/cods/statistic"}},[t._v("Báo cáo COD")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/cods/workPoints"}},[t._v("Chấm công COD")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/cods/smses"}},[t._v("Tin nhắn COD")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/assess/index"}},[t._v("COD vote")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/adm/cods/note"}},[t._v("COD Ghi chú chốt ca")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/stations"}},[t._v("Quản lý kho")])]),t._v(" "),a("li",{staticClass:"sidenav-header small font-weight-semibold"},[t._v("TUYẾN")]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/carts/index"}},[t._v("Tuyến lấy/giao hàng")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/carts/schedule"}},[t._v("Chốt tuyến")])]),t._v(" "),a("li",{staticClass:"sidenav-header small font-weight-semibold"},[t._v("MODULE")]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/modules"}},[t._v("Quản lý Module")])]),t._v(" "),a("li",{staticClass:"sidenav-header small font-weight-semibold"},[t._v("TEMPLATE")]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/notify/template"}},[t._v("Mẫu thông báo")])]),t._v(" "),a("li",{staticClass:"sidenav-header small font-weight-semibold"},[t._v("XE TẢI")]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/trucks/post-offices"}},[t._v("Bưu cục BBS chuyên tuyến")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/trucks/listTrucks"}},[t._v("Danh sách xe tải")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/trucks/addTruck"}},[t._v("Thêm xe tải")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/trucks/listTruckRoutes"}},[t._v("Danh sách tuyến")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/trucks/addTruckRoute"}},[t._v("Thêm tuyến mới")])])])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link sidenav-toggle",attrs:{href:"javascript:void(0)"}},[a("i",{staticClass:"sidenav-icon ion ion-md-planet d-block"}),t._v(" "),a("div",[t._v("Vận hành")])]),t._v(" "),a("ul",{staticClass:"sidenav-menu"},[a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin"}},[t._v("Tiếp nhận đơn hàng")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/distributespick/instantly"}},[t._v("Chốt giỏ hàng")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/checkpackages/recently"}},[t._v("Đối soát hàng")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/picking"}},[t._v("Quản lý lấy hàng")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/delivering"}},[t._v("Quản lý thu tiền")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/returning"}},[t._v("Quản lý trả hàng")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/transferring/import"}},[t._v("Quản lý chuyển kho")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/manage-list-bag-box"}},[t._v("Quản lý bao hàng")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/log-bag-order/list"}},[t._v("Quản lý log bao hàng")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/transfer_to_return?type=2"}},[t._v("Quản lý trả hàng liên vùng")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link sidenav-toggle",attrs:{href:"javascript:void(0)"}},[a("div",[t._v("Đối soát")])]),t._v(" "),a("ul",{staticClass:"sidenav-menu"},[a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/audits/refund"}},[t._v("Đối soát bồi hoàn")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/new-audit-manual"}},[t._v("Đối soát thủ công")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/audit-shopee"}},[t._v("Đối soát Shopee")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/audit-config-holiday"}},[t._v("Đối soát nghỉ lễ")])],1)])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/audits/audited"}},[t._v("Gửi email đối soát")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/auto-assign/list"}},[t._v("Quản lý chia tự động ")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link sidenav-toggle",attrs:{href:"javascript:void(0)"}},[a("div",[t._v("Chiết khấu shop")])]),t._v(" "),a("ul",{staticClass:"sidenav-menu"},[a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/deduction-manager/shop"}},[t._v("Quản lý chiết khấu shop")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/deduction-again"}},[t._v("Chạy lại chiết khấu Shop")])],1)])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/bills"}},[t._v("Hoá đơn")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/bills/billCod"}},[t._v("Hoá đơn COD")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/delivers/endOfDay"}},[t._v("Chốt ngày")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link sidenav-toggle",attrs:{href:"javascript:void(0)"}},[a("div",[t._v("Chuyển tiền realtime")])]),t._v(" "),a("ul",{staticClass:"sidenav-menu"},[a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/new-quick-transfer"}},[t._v("Chuyển tiền realtime")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/confirm-quick-transfer"}},[t._v("Xác nhận chuyển tiền realtime")])],1)])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/bills/pay-part-debt"}},[t._v("Thanh toán nợ một phần")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link sidenav-toggle",attrs:{href:"javascript:void(0)"}},[a("div",[t._v("G3PL")])]),t._v(" "),a("ul",{staticClass:"sidenav-menu"},[a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:""}},[t._v("Danh sách lộ trình")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/g3pl/booking/create"}},[t._v("Tạo lộ trình")])],1)])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link sidenav-toggle",attrs:{href:"javascript:void(0)"}},[a("div",[t._v("Sản phẩm")])]),t._v(" "),a("ul",{staticClass:"sidenav-menu"},[a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/prohibit-package/image-product"}},[t._v("Quản lí hình ảnh")])],1)])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/frail-package/list"}},[t._v("Quản lý hàng dễ vỡ")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/manage-list-cod/list"}},[t._v("Danh sách cấu hình COD")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/config-station/station"}},[t._v("Quản lý Config kho")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/manage-list-cart/list"}},[t._v("Quản lý tuyến")])],1),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("sidenav-router-link",{attrs:{to:"/smart-locker"}},[t._v("Quản lý tủ thông minh")])],1)])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link sidenav-toggle",attrs:{href:"javascript:void(0)"}},[a("i",{staticClass:"sidenav-icon ion ion-md-business d-block"}),t._v(" "),a("div",[t._v("Quản lý")])]),t._v(" "),a("ul",{staticClass:"sidenav-menu"},[a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/adm/erp/document/manage"}},[t._v("Quản lý văn bản")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/fee-manager"}},[t._v("Danh sách phí ship")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/device"}},[t._v("Thiết bị")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/deduction-manager"}},[t._v("Danh sách gói chiết khấu")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("hr",{staticClass:"sidenav-divider mb-2"})]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/adm/wifi/manage"}},[t._v("Wifi tại kho")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("hr",{staticClass:"sidenav-divider mb-2"})]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/adm/hrteam/work-manage"}},[t._v("Danh sách quản lý công việc nhân sự")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/adm/hrteam/manage"}},[t._v("Cơ cấu team nhân sự")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("hr",{staticClass:"sidenav-divider mb-2"})]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/adm/executive/manage"}},[t._v("Cơ cấu ban điều hành")])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("hr",{staticClass:"sidenav-divider mb-2"})]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/adm/parking/manage"}},[a("div",[t._v("Gửi xe")])])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/adm/hrteam/working-overtime"}},[a("div",[t._v("Tăng ca")])])])])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link sidenav-toggle",attrs:{href:"javascript:void(0)"}},[a("i",{staticClass:"sidenav-icon ion ion-ios-cube d-block"}),t._v(" "),a("div",[t._v("Kho")])]),t._v(" "),a("ul",{staticClass:"sidenav-menu"},[a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/product-categories/index"}},[a("div",[t._v("Danh mục")])])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/products/index"}},[a("div",[t._v("Sản phẩm")])])])])]),t._v(" "),a("li",{staticClass:"sidenav-divider mb-1"}),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link sidenav-toggle",attrs:{href:"javascript:void(0)"}},[a("i",{staticClass:"sidenav-icon ion ion-md-chatboxes d-block"}),t._v(" "),a("div",[t._v("Quản lý ticket")])]),t._v(" "),a("ul",{staticClass:"sidenav-menu"},[a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/issues"}},[a("div",[t._v("Ticket")])])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/issues-refund"}},[a("div",[t._v("Bồi hoàn")])])])])]),t._v(" "),a("li",{staticClass:"sidenav-item"},[a("a",{staticClass:"sidenav-link",attrs:{href:"/admin/operations/quick"}},[a("i",{staticClass:"sidenav-icon ion ion-ios-flash d-block"}),t._v(" "),a("div",[t._v("Thao tác nhanh")])])])],1)])},[],!1,x,"data-v-0e1acef6",null).exports,M=Object(y.a)({name:"app-layout-footer",methods:{getLayoutFooterBg:function(){return"bg-"+this.layoutFooterBg}}},function(){var t=this.$createElement;return(this._self._c||t)("nav",{staticClass:"layout-footer footer",class:this.getLayoutFooterBg()},[this._m(0)])},[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid d-flex flex-wrap justify-content-between text-center container-p-x pb-3"},[a("div",{staticClass:"pt-3"},[a("span",{staticClass:"footer-text font-weight-bolder"},[t._v("Giao hang tiet kiem JSC")]),t._v(" ©\n    ")]),t._v(" "),a("div",[a("a",{staticClass:"footer-link pt-3",attrs:{href:"https://giaohangtietkiem.vn/"}},[t._v("Trang chủ")]),t._v("\n      | "),a("a",{staticClass:"footer-link pt-3",attrs:{href:"https://admin.giaohangtietkiem.vn/admin"}},[t._v("Admin")]),t._v(" "),a("a",{staticClass:"footer-link pt-3 ml-4",attrs:{href:"https://giaohangtietkiem.vn/gioi-thieu/"}},[t._v("Giới thiệu")])])])}],!1,null,null,null).exports,T={name:"app-layout-2",components:{"app-layout-navbar":C,"app-layout-sidenav":S,"app-layout-footer":M},mounted:function(){this.layoutHelpers.init(),this.layoutHelpers.update(),this.layoutHelpers.setAutoUpdate(!0)},beforeDestroy:function(){this.layoutHelpers.destroy()},methods:{closeSidenav:function(){this.layoutHelpers.setCollapsed(!0)}}};var D=function(t){a("JY3m")},I=[{path:"/error",component:Object(y.a)(T,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"layout-wrapper layout-2"},[e("div",{staticClass:"layout-inner"},[e("app-layout-sidenav"),this._v(" "),e("div",{staticClass:"layout-container"},[e("app-layout-navbar"),this._v(" "),e("div",{staticClass:"layout-content"},[e("div",{staticClass:"router-transitions container-fluid flex-grow-1 container-p-y"},[e("router-view")],1),this._v(" "),e("app-layout-footer")],1)],1)],1),this._v(" "),e("div",{staticClass:"layout-overlay",on:{click:this.closeSidenav}})])},[],!1,D,"data-v-4aabc9e4",null).exports,children:[{path:"404",name:"error-404",component:function(){return a.e(156).then(a.bind(null,"UK8q"))}},{path:"403",name:"error-403",component:function(){return a.e(157).then(a.bind(null,"w7Tt"))}}]}],P={name:"app-layout-2",components:{"app-layout-navbar":C,"app-layout-sidenav":S,"app-layout-footer":M},mounted:function(){this.layoutHelpers.init(),this.layoutHelpers.update(),this.layoutHelpers.setAutoUpdate(!0)},beforeDestroy:function(){this.layoutHelpers.destroy()},methods:{closeSidenav:function(){this.layoutHelpers.setCollapsed(!0)}}};var E=function(t){a("6aA6"),a("NNGF"),a("iXC/"),a("k38u")},L=Object(y.a)(P,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"layout-wrapper layout-2"},[e("div",{staticClass:"layout-inner"},[e("app-layout-sidenav"),this._v(" "),e("div",{staticClass:"layout-container"},[e("app-layout-navbar"),this._v(" "),e("div",{staticClass:"layout-content"},[e("div",{staticClass:"router-transitions container-fluid flex-grow-1 container-p-y"},[e("router-view")],1),this._v(" "),e("app-layout-footer")],1)],1)],1),this._v(" "),e("div",{staticClass:"layout-overlay",on:{click:this.closeSidenav}})])},[],!1,E,null,null).exports,A=a("R1Q+"),O=a("fEi7"),N=a("4WGu");function R(t){var e=t.next,a=t.router;try{if(!Object(O.b)())Object(A.a)(N.a.oidc).run(a.path,e)}catch(t){}return e()}var U=[{path:"/erp/payslip",component:L,children:[{path:"deposit",name:"deposit-manager",component:function(){return new Promise(function(t){t()}).then(a.bind(null,"Batc"))}},{path:"deposit/config",name:"config-initial-deposit",component:function(){return Promise.all([a.e(0),a.e(240)]).then(a.bind(null,"lOZc"))}},{path:"deposit/config/manage",name:"config-deposit-manage",component:function(){return Promise.all([a.e(0),a.e(203)]).then(a.bind(null,"18PS"))},meta:{middleware:[R]}}]}],$=[{path:"/erp/partnership-payslip",component:L,children:[]}],H=[{path:"/staff",component:L,children:[{path:"whsearch",component:function(){return Promise.all([a.e(0),a.e(99)]).then(a.bind(null,"8QLy"))}},{path:"config",component:function(){return Promise.all([a.e(0),a.e(66)]).then(a.bind(null,"hWi/"))}}]},{path:"/contract",component:L,children:[{name:"contract-manager",path:"manager",component:function(){return Promise.all([a.e(0),a.e(64)]).then(a.bind(null,"5W0Y"))}},{name:"contract-detail",path:"detail/:id?",component:function(){return Promise.all([a.e(0),a.e(246)]).then(a.bind(null,"r/ik"))}},{name:"contract-create",path:"create/:username?",component:function(){return Promise.all([a.e(0),a.e(183)]).then(a.bind(null,"GP53"))}},{name:"appendix-detail",path:"appendix/:id",component:function(){return a.e(0).then(a.bind(null,"38Ld"))},props:!0},{name:"contract-edit",path:"edit/:id",component:function(){return Promise.all([a.e(0),a.e(162)]).then(a.bind(null,"w2dE"))}},{name:"position-detail-edit",path:"position-edit",component:function(){return a.e(116).then(a.bind(null,"9t2q"))}}]},{path:"/erp/token",component:L,children:[{name:"manage-token",path:"manage",component:function(){return a.e(121).then(a.bind(null,"z1C7"))}}]},{path:"/erp/document",component:L,children:[{name:"manage-document",path:"manage",component:function(){return Promise.all([a.e(0),a.e(61)]).then(a.bind(null,"x461"))}},{path:"add/",name:"document-add",component:function(){return Promise.all([a.e(0),a.e(13)]).then(a.bind(null,"+11z"))}},{path:"edit/:id",name:"document-edit",component:function(){return Promise.all([a.e(0),a.e(13)]).then(a.bind(null,"+11z"))}},{path:"detail/:id",name:"document-detail",component:function(){return Promise.all([a.e(0),a.e(129)]).then(a.bind(null,"oEJj"))}}]}],B=[{path:"/salary",component:L,children:[{path:"update-area",component:function(){return Promise.all([a.e(0),a.e(248)]).then(a.bind(null,"PlE7"))}}]},{path:"/salary",component:L,children:[{path:"export-work-data",component:function(){return Promise.all([a.e(0),a.e(254)]).then(a.bind(null,"USGt"))}}]},{path:"/salary",component:L,children:[{path:"update-package-area-excel",component:function(){return Promise.all([a.e(0),a.e(114)]).then(a.bind(null,"qc5g"))}}]},{path:"/salary",component:L,children:[{path:"show-area-packages",component:function(){return Promise.all([a.e(0),a.e(169)]).then(a.bind(null,"dMGj"))}}]},{path:"/salary",component:L,children:[{path:"update-area-by-cod",component:function(){return Promise.all([a.e(0),a.e(81)]).then(a.bind(null,"8Arv"))}}]},{path:"/salary",component:L,children:[{path:"extra-route-configs",component:function(){return Promise.all([a.e(0),a.e(153)]).then(a.bind(null,"tka3"))}}]},{path:"/salary",component:L,children:[{path:"collection-salary-tools",component:function(){return Promise.all([a.e(0),a.e(256)]).then(a.bind(null,"iqaO"))}}]},{path:"/salary",component:L,children:[{path:"driver-data-work-manager",component:function(){return Promise.all([a.e(0),a.e(243)]).then(a.bind(null,"rwck"))}}]},{path:"/salary",component:L,children:[{path:"wh-staff-salary-tools",component:function(){return Promise.all([a.e(0),a.e(247)]).then(a.bind(null,"d1z3"))}}]},{path:"/salary",component:L,children:[{path:"export-province-office-staff-salary",component:function(){return Promise.all([a.e(0),a.e(185)]).then(a.bind(null,"U5Ce"))}}]},{path:"/salary",component:L,children:[{path:"export-city-office-staff-salary",component:function(){return Promise.all([a.e(0),a.e(230)]).then(a.bind(null,"VMUZ"))}}]},{path:"/salary",component:L,children:[{path:"export-office-staff-online-salary",component:function(){return Promise.all([a.e(0),a.e(190)]).then(a.bind(null,"2Qvc"))}}]},{path:"/salary",component:L,children:[{path:"minimum-cod-salary",component:function(){return Promise.all([a.e(0),a.e(122)]).then(a.bind(null,"FhBO"))}}]},{path:"/salary",component:L,children:[{path:"transit-data-work-manager",component:function(){return Promise.all([a.e(0),a.e(133)]).then(a.bind(null,"B3Z7"))}}]},{path:"/salary",component:L,children:[{path:"config-checkin-cod",component:function(){return Promise.all([a.e(0),a.e(165)]).then(a.bind(null,"OTJN"))}},{path:"manage-checkin-cod",component:function(){return Promise.all([a.e(0),a.e(241)]).then(a.bind(null,"Jkfa"))}},{path:"config-checkin-pkbus",component:function(){return Promise.all([a.e(0),a.e(199)]).then(a.bind(null,"BzcA"))}},{path:"config-checkin-cod-v3",component:function(){return Promise.all([a.e(0),a.e(229)]).then(a.bind(null,"H2Jj"))}},{path:"export-data-checkin-pkV2",component:function(){return Promise.all([a.e(0),a.e(139)]).then(a.bind(null,"tGMU"))}},{path:"manage-export-excel",component:function(){return Promise.all([a.e(0),a.e(17)]).then(a.bind(null,"I732"))}},{path:"manage-salary-cod-province",component:function(){return Promise.all([a.e(0),a.e(53)]).then(a.bind(null,"z7+p"))}},{path:"config-cod-index",component:function(){return Promise.all([a.e(0),a.e(41)]).then(a.bind(null,"HPv6"))}},{path:"export-salary-lv",component:function(){return Promise.all([a.e(0),a.e(225)]).then(a.bind(null,"CXhC"))}},{path:"optimize-salary-cod-province",component:function(){return Promise.all([a.e(0),a.e(119)]).then(a.bind(null,"gARD"))}},{path:"config-salary-cod",component:function(){return Promise.all([a.e(0),a.e(128)]).then(a.bind(null,"s7JK"))}},{path:"sgw-config-pk-part-time",component:function(){return Promise.all([a.e(0),a.e(57)]).then(a.bind(null,"38cy"))}},{path:"export-salary-nv",component:function(){return Promise.all([a.e(0),a.e(196)]).then(a.bind(null,"4+Ap"))}},{path:"export-salary",component:function(){return Promise.all([a.e(0),a.e(36)]).then(a.bind(null,"77AD"))}}]},{path:"/salary",component:L,children:[{path:"export-driver-salary",component:function(){return Promise.all([a.e(0),a.e(253)]).then(a.bind(null,"d7wU"))}}]},{path:"/salary",component:L,children:[{path:"quality-config-v2",component:function(){return Promise.all([a.e(0),a.e(98)]).then(a.bind(null,"6IpU"))}}]},{path:"/salary",component:L,children:[{path:"export-bot-driver",component:function(){return Promise.all([a.e(0),a.e(255)]).then(a.bind(null,"q9f5"))}}]},{path:"/salary",component:L,children:[{path:"export-rent-truck-price",component:function(){return Promise.all([a.e(0),a.e(249)]).then(a.bind(null,"N+Ea"))}}]},{path:"/salary",component:L,children:[{path:"review-driver-ot-session",component:function(){return Promise.all([a.e(0),a.e(90)]).then(a.bind(null,"TDPP"))}}]},{path:"/salary",component:L,children:[{path:"export-transit-cod",component:function(){return Promise.all([a.e(0),a.e(250)]).then(a.bind(null,"KsUU"))}}]},{path:"/salary",component:L,children:[{path:"driver-salary-data",component:function(){return Promise.all([a.e(0),a.e(112)]).then(a.bind(null,"cVLe"))}}]},{path:"/salary",component:L,children:[{path:"driver-session-data",component:function(){return Promise.all([a.e(0),a.e(155)]).then(a.bind(null,"IzKZ"))}}]},{path:"/salary",component:L,children:[{path:"rent-truct-cost-data",component:function(){return Promise.all([a.e(0),a.e(113)]).then(a.bind(null,"i5GD"))}}]},{path:"/salary",component:L,children:[{path:"cod-start",component:function(){return Promise.all([a.e(0),a.e(239)]).then(a.bind(null,"qDtt"))}}]},{path:"/salary",component:L,children:[{path:"training-cod",component:function(){return Promise.all([a.e(0),a.e(193)]).then(a.bind(null,"tYOP"))}}]},{path:"/historytransits",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(181)]).then(a.bind(null,"fU9z"))}}]},{path:"/export-driver-session-point",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(251)]).then(a.bind(null,"7Xup"))}}]},{path:"/export-salary-pk-parttime",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(252)]).then(a.bind(null,"yIoL"))}}]},{path:"/export-salary-xlh-2021",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(237)]).then(a.bind(null,"cV4V"))}}]},{path:"/export-salary-xlh-buucuc-2021",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(176)]).then(a.bind(null,"dd/7"))}}]},{path:"/salary/export-salary-xlh-onsite-2020",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(222)]).then(a.bind(null,"keyc"))}}]},{path:"/config-driver-value",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(132)]).then(a.bind(null,"8kke"))}}]}],j=[{path:"/dashboard/v2",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(22)]).then(a.bind(null,"mZ6E"))}}]}],F=[{path:"/dashboard/gam-beta",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(59)]).then(a.bind(null,"m85R"))}}]},{path:"/dashboard/gam-beta-v2",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(111)]).then(a.bind(null,"gYWC"))}}]}],q=[{path:"/bills/billCod",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(67)]).then(a.bind(null,"1OCo"))}}]},{path:"/bills/download-manage",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(159)]).then(a.bind(null,"lvk0"))}}]},{path:"/bills/pay-part-debt",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(186)]).then(a.bind(null,"MdeZ"))}}]}],Y=[{path:"/shops/shopIncorrectBankInfo",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(49)]).then(a.bind(null,"AweK"))}}]},{path:"/shops/leader-sale-b2c",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(54)]).then(a.bind(null,"pOsA"))}}]},{path:"/shops/return-coupon",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(69)]).then(a.bind(null,"f2f5"))}}]},{path:"/shops/return-coupon-result",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(102)]).then(a.bind(null,"pyM1"))}}]},{path:"/shops/return-coupon-update",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(234)]).then(a.bind(null,"JgEH"))}}]},{path:"/shops/manage-new-deduction",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(205)]).then(a.bind(null,"IdY6"))}}]},{path:"/shops/new-deduction",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(87)]).then(a.bind(null,"WMX8"))}}]},{path:"/shops/new-deduction-result",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(180)]).then(a.bind(null,"IriR"))}}]},{path:"/shops/new-deduction-update",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(235)]).then(a.bind(null,"jsTg"))}}]},{path:"/shops/download-b2c-shop",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(167)]).then(a.bind(null,"Ulo6"))}}]},{path:"/shops/info-shop-debt",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(93)]).then(a.bind(null,"V54G"))}}]},{path:"/shops/assign-pkonsite",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(40)]).then(a.bind(null,"F6ZK"))}}]},{path:"/shops/award",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(38)]).then(a.bind(null,"qbxz"))}}]},{path:"/shops/assign-presenter",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(68)]).then(a.bind(null,"hK19"))}}]},{path:"/shops/cause",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(125)]).then(a.bind(null,"aLnZ"))}}]},{path:"/shops/branch",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(228)]).then(a.bind(null,"h8Ay"))}}]},{path:"/shops/download-zip-file-deduction",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(201)]).then(a.bind(null,"atY9"))}}]}],z=[{path:"/dashboard/v4",component:L,children:[{path:"overview-shop",component:function(){return Promise.all([a.e(0),a.e(79)]).then(a.bind(null,"DJ/P"))}},{path:"overview-package",component:function(){return Promise.all([a.e(0),a.e(80)]).then(a.bind(null,"Utsh"))}},{path:"overview-operation",component:function(){return Promise.all([a.e(0),a.e(31)]).then(a.bind(null,"JLf0"))}}]}],G=[{path:"/dashboard/external",component:L,children:[{path:"overview-external",component:function(){return Promise.all([a.e(0),a.e(45)]).then(a.bind(null,"BB29"))}}]}],K=[{path:"/audit-shopee",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(192)]).then(a.bind(null,"3rAA"))}}]},{path:"/audit/upload-manage",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(209)]).then(a.bind(null,"Mt2M"))}}]},{path:"/audit/download-manage",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(238)]).then(a.bind(null,"DSXt"))}}]},{path:"/new-audit-manual",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(204)]).then(a.bind(null,"tg2w"))}}]},{path:"/audit-config-holiday",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(182)]).then(a.bind(null,"J3Fd"))}}]}],V=[{path:"/dashboard/erp",component:L,children:[{path:"",component:function(){return a.e(144).then(a.bind(null,"Rd67"))}}]}],Q=[{path:"/dashboard/v5",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(25)]).then(a.bind(null,"bIVC"))}}]}],X=[{path:"/evaluation",component:L,children:[{path:"manage",name:"manager-evaluation",component:function(){return new Promise(function(t){t()}).then(a.bind(null,"yQeu"))}},{path:"detail/:id",name:"detail-evaluation",component:function(){return Promise.all([a.e(0),a.e(32)]).then(a.bind(null,"5WRt"))}}]}],W=[{path:"/profile",component:L,children:[{path:"masters",name:"manager-master-profile",component:function(){return Promise.all([a.e(0),a.e(42)]).then(a.bind(null,"Hgp3"))}},{path:"update-main-profile",name:"update-main-profile",component:function(){return Promise.all([a.e(0),a.e(172)]).then(a.bind(null,"wMlS"))}},{path:"master/add",name:"add-master-profile",component:function(){return a.e(174).then(a.bind(null,"58jt"))},props:{message:"Màn này hiện đã đóng, vui lòng vào màn Tuyển dụng để tiếp tục thao tác hoặc liên hệ HR kho để được hỗ trợ!"}},{path:"master/edit/:id?",name:"edit-master-profile",component:function(){return Promise.all([a.e(0),a.e(24)]).then(a.bind(null,"v4Sy"))},props:!0},{path:"user-lock",name:"manager-user-lock",component:function(){return a.e(154).then(a.bind(null,"Q76P"))}}]}],J=[{path:"/profile-company",component:L,children:[{path:"masters",name:"manager-master-company-profile",component:function(){return Promise.all([a.e(0),a.e(110)]).then(a.bind(null,"mJDL"))}},{path:"master-company/add",name:"add-master-profile-company",component:function(){return Promise.all([a.e(0),a.e(3)]).then(a.bind(null,"/dkK"))}},{path:"master-company/edit/:id",name:"edit-master-profile-company",component:function(){return Promise.all([a.e(0),a.e(3)]).then(a.bind(null,"/dkK"))}}]},{path:"/user-company",component:L,children:[{path:"add/:id?",name:"add-user-company",component:function(){return Promise.all([a.e(0),a.e(2)]).then(a.bind(null,"cz9i"))}},{path:"edit/:id",name:"edit-user-company",component:function(){return Promise.all([a.e(0),a.e(2)]).then(a.bind(null,"cz9i"))}},{path:"detail/:id",name:"detail-user-company",component:function(){return Promise.all([a.e(0),a.e(2)]).then(a.bind(null,"cz9i"))}}]},{path:"/vehicle-company",component:L,children:[{path:"add/:id?",name:"add-vehicle-company",component:function(){return Promise.all([a.e(0),a.e(1)]).then(a.bind(null,"/81R"))}},{path:"edit/:id",name:"edit-vehicle-company",component:function(){return Promise.all([a.e(0),a.e(1)]).then(a.bind(null,"/81R"))}},{path:"detail/:id",name:"detail-vehicle-company",component:function(){return Promise.all([a.e(0),a.e(1)]).then(a.bind(null,"/81R"))}},{path:"maintenance/:id",name:"edit-trucks-maintenance",component:function(){return Promise.all([a.e(0),a.e(9)]).then(a.bind(null,"/WsH"))}},{path:"maintenance/add/:id",name:"add-trucks-maintenance",component:function(){return Promise.all([a.e(0),a.e(9)]).then(a.bind(null,"/WsH"))}}]},{path:"/air-line",component:L,children:[{path:"awbs",name:"manage-awbs",component:function(){return Promise.all([a.e(0),a.e(143)]).then(a.bind(null,"AHgO"))}},{path:"awb-price",name:"awb-price",component:function(){return Promise.all([a.e(0),a.e(220)]).then(a.bind(null,"2huj"))}}]},{path:"/train",component:L,children:[{path:"train-bill",name:"train-bill",component:function(){return Promise.all([a.e(0),a.e(232)]).then(a.bind(null,"JiU8"))}}]},{path:"/truck",component:L,children:[{path:"manage/:code?",name:"manage-trucks",component:function(){return Promise.all([a.e(0),a.e(51)]).then(a.bind(null,"Tlrw"))}},{path:"config-oil-limit",name:"config-oil-limit",component:function(){return Promise.all([a.e(0),a.e(211)]).then(a.bind(null,"H4w5"))}}]},{path:"/truck-routes",component:L,children:[{path:"manage",name:"manage-truck-routes",component:function(){return Promise.all([a.e(0),a.e(207)]).then(a.bind(null,"wzns"))}},{path:"add",name:"add-truck-route",component:function(){return Promise.all([a.e(0),a.e(14)]).then(a.bind(null,"1f27"))}},{path:"edit/:id",name:"edit-truck-route",component:function(){return Promise.all([a.e(0),a.e(14)]).then(a.bind(null,"1f27"))}}]},{path:"/bag",component:L,children:[{path:"bag-config",name:"bag-config",component:function(){return Promise.all([a.e(0),a.e(84)]).then(a.bind(null,"mQWJ"))}}]},{path:"/quality-config",component:L,children:[{path:"ws-quality-config",name:"ws-quality-config",component:function(){return Promise.all([a.e(0),a.e(117)]).then(a.bind(null,"MgJZ"))}},{path:"create-ws-quality-config",name:"create-ws-quality-config",component:function(){return Promise.all([a.e(0),a.e(130)]).then(a.bind(null,"+c4M"))}}]},{path:"/module",component:L,children:[{path:"module-province",name:"module-province",component:function(){return Promise.all([a.e(0),a.e(82)]).then(a.bind(null,"z47d"))}}]},{path:"/rent-truck",component:L,children:[{path:"config-province",name:"config-province",component:function(){return Promise.all([a.e(0),a.e(137)]).then(a.bind(null,"yANC"))}},{path:"plan/add/:id?",name:"add-truck-plan",component:function(){return Promise.all([a.e(0),a.e(19)]).then(a.bind(null,"JXin"))}},{path:"edit/:id",name:"edit-truck-plan",component:function(){return Promise.all([a.e(0),a.e(19)]).then(a.bind(null,"JXin"))}}]},{path:"/rent-truck-driver",component:L,children:[{path:"add/:id?",name:"add-truck-driver",component:function(){return Promise.all([a.e(0),a.e(15)]).then(a.bind(null,"laYJ"))}},{path:"edit/:id",name:"edit-truck-driver",component:function(){return Promise.all([a.e(0),a.e(15)]).then(a.bind(null,"laYJ"))}}]}],Z=[{path:"/erp/profile",component:L,children:[{path:"template-manage",name:"template-manage",component:function(){return a.e(52).then(a.bind(null,"74rG"))}}]}],tt=[{path:"/user",component:L,children:[{path:"add/:id?",name:"add-user",component:function(){return Promise.all([a.e(0),a.e(7)]).then(a.bind(null,"3Tsc"))},props:!0},{path:"edit/:id?",name:"edit-user",component:function(){return Promise.all([a.e(0),a.e(7)]).then(a.bind(null,"3Tsc"))},props:!0,meta:{middleware:[R]}},{path:"detail/:id?",name:"detail-user",component:function(){return Promise.all([a.e(0),a.e(50)]).then(a.bind(null,"ZFhQ"))},props:!0}]}],et=[{path:"/candidate",component:L,children:[{name:"list-candidate",path:"list/:name_cmnd_phone_mail?",component:function(){return Promise.all([a.e(0),a.e(27)]).then(a.bind(null,"OFpK"))},props:!0},{name:"create-candidate",path:"create",component:function(){return Promise.all([a.e(0),a.e(8)]).then(a.bind(null,"i/Pv"))},props:!0},{name:"add-candidate",path:"add",component:function(){return Promise.all([a.e(0),a.e(18)]).then(a.bind(null,"7FE8"))},props:{Hrview:!0,type:"create"}},{name:"edit-candidate",path:"edit/:id",component:function(){return Promise.all([a.e(0),a.e(18)]).then(a.bind(null,"7FE8"))},props:{Hrview:!0,type:"edit"}},{name:"evaluate-candidate",path:"evaluate/:id",component:function(){return a.e(212).then(a.bind(null,"2XQ4"))},props:{Hrview:!0,type:"evaluate"}}]},{path:"/ref-reward",component:L,children:[{name:"ref-reward",path:"/",component:function(){return Promise.all([a.e(0),a.e(236)]).then(a.bind(null,"cwk9"))}}]}],at=[{path:"/hrteam",component:L,children:[{path:"manage",name:"manager-hrteam",component:function(){return Promise.all([a.e(0),a.e(58)]).then(a.bind(null,"FB/Y"))}},{path:"add/",name:"add-hrteam",component:function(){return Promise.all([a.e(0),a.e(6)]).then(a.bind(null,"3fZB"))}},{path:"edit/:id",name:"edit-hrteam",component:function(){return Promise.all([a.e(0),a.e(6)]).then(a.bind(null,"3fZB"))}},{path:"working-overtime",name:"working-overtime",component:function(){return Promise.all([a.e(0),a.e(166)]).then(a.bind(null,"ZqVw"))}}]}],nt=[{path:"/profile-statistic",component:L,children:[{path:"charts",name:"profile-statistic-charts",component:function(){return Promise.all([a.e(0),a.e(71)]).then(a.bind(null,"5z6Z"))}}]}],it=[{path:"/sales",component:L,children:[{path:"show-salary",component:function(){return Promise.all([a.e(0),a.e(227)]).then(a.bind(null,"+nk/"))}},{path:"team-process",component:function(){return Promise.all([a.e(0),a.e(175)]).then(a.bind(null,"KDQB"))}},{path:"check-duplicate-shop",component:function(){return Promise.all([a.e(0),a.e(202)]).then(a.bind(null,"xgCH"))}},{path:"update-shop-package",component:function(){return Promise.all([a.e(0),a.e(233)]).then(a.bind(null,"UxJK"))}},{path:"export-data-shop",component:function(){return Promise.all([a.e(0),a.e(216)]).then(a.bind(null,"HI3A"))}},{path:"manager-sale-team",component:function(){return Promise.all([a.e(0),a.e(83)]).then(a.bind(null,"HvU8"))}},{path:"manage-export-sale-salary",component:function(){return Promise.all([a.e(0),a.e(160)]).then(a.bind(null,"Nj7O"))}},{path:"manage-export-excel",component:function(){return Promise.all([a.e(0),a.e(17)]).then(a.bind(null,"I732"))}},{path:"export-sale-day",component:function(){return Promise.all([a.e(0),a.e(164)]).then(a.bind(null,"hcTv"))}},{path:"check-incident-sale",component:function(){return Promise.all([a.e(0),a.e(198)]).then(a.bind(null,"TckZ"))}},{path:"sale-formula",component:function(){return Promise.all([a.e(0),a.e(223)]).then(a.bind(null,"yr/H"))}},{path:"sale-region",component:function(){return Promise.all([a.e(0),a.e(221)]).then(a.bind(null,"F1rF"))}},{path:"support-salary-sale",component:function(){return Promise.all([a.e(0),a.e(161)]).then(a.bind(null,"IVKM"))}},{path:"export-data-shop-bbs",component:function(){return Promise.all([a.e(0),a.e(213)]).then(a.bind(null,"EndF"))}}]}],st=[{path:"/customer-cares",component:L,children:[{path:"leader-member-b2c",component:function(){return Promise.all([a.e(0),a.e(101)]).then(a.bind(null,"Lc5+"))}},{path:"export-salary",component:function(){return Promise.all([a.e(0),a.e(214)]).then(a.bind(null,"DT6O"))}},{path:"export-shop-gone-away",component:function(){return Promise.all([a.e(0),a.e(173)]).then(a.bind(null,"9ICD"))}},{path:"check-data-salary",component:function(){return Promise.all([a.e(0),a.e(163)]).then(a.bind(null,"+Chk"))}},{path:"run-export-salary-c2c",component:function(){return Promise.all([a.e(0),a.e(195)]).then(a.bind(null,"0jYE"))}},{path:"manage-shop-duplicate",component:function(){return Promise.all([a.e(0),a.e(215)]).then(a.bind(null,"sq+d"))}},{path:"export-order",component:function(){return Promise.all([a.e(0),a.e(257)]).then(a.bind(null,"4vad"))}}]}],ot=[{path:"/deduction-again",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(188)]).then(a.bind(null,"+eZl"))}}]}],rt=[{path:"/executive/manage",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(179)]).then(a.bind(null,"t3oW"))}}]}],lt=[{path:"/new-quick-transfer",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(46)]).then(a.bind(null,"P4Pu"))}}]},{path:"/confirm-quick-transfer",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(72)]).then(a.bind(null,"MdPW"))}}]}],ct=[{path:"/sos-noi-bo",component:L,children:[{path:"thong-ke",component:function(){return a.e(258).then(a.bind(null,"GFQa"))}},{path:"config-type",component:function(){return Promise.all([a.e(0),a.e(39)]).then(a.bind(null,"60O2"))}}]}],dt=[{path:"/coupon",component:L,children:[]}],ut=[{path:"/ctvtv",component:L,children:[{path:"config",name:"config-remuneration-package",component:function(){return Promise.all([a.e(0),a.e(260)]).then(a.bind(null,"FWHU"))}},{path:"campaign",name:"manager-campaign",component:function(){return Promise.all([a.e(0),a.e(96)]).then(a.bind(null,"gHaU"))}},{path:"config-campaign",name:"config-campaign",component:function(){return Promise.all([a.e(0),a.e(95)]).then(a.bind(null,"74g/"))}}]}],ht=[{path:"/position",component:L,children:[{name:"list-position",path:"manage",component:function(){return a.e(70).then(a.bind(null,"E4hU"))}}]}],pt=[{path:"/wifi",component:L,children:[{path:"manage",component:function(){return a.e(100).then(a.bind(null,"AQUk"))}}]}],mt=[{path:"/dependant-person",component:L,children:[{path:"manager/:id?",name:"manager-dependant-person",component:function(){return a.e(259).then(a.bind(null,"ziyD"))},meta:{middleware:[R]}}]}],ft=[{path:"/union",component:L,children:[{path:"manager/:id?",name:"union",component:function(){return new Promise(function(t){t()}).then(a.bind(null,"7yf7"))}}]}],gt=[{path:"/kpi/cods",component:L,children:[{path:"cod-formula-config",component:function(){return Promise.all([a.e(0),a.e(126)]).then(a.bind(null,"OLth"))}},{path:"export-salary-cod-v2",component:function(){return Promise.all([a.e(0),a.e(62)]).then(a.bind(null,"Otvh"))}},{path:"cod-ctv-config",component:function(){return a.e(245).then(a.bind(null,"OQW5"))}},{path:"payment",component:function(){return Promise.all([a.e(0),a.e(219)]).then(a.bind(null,"rngf"))}}]}];var vt=function(t){a("6aA6"),a("NNGF"),a("iXC/"),a("k38u")},_t=Object(y.a)({name:"app-layout-blank"},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"router-transitions"},[e("router-view")],1)},[],!1,vt,null,null).exports,bt=[{path:"/profile/",component:_t,children:[{path:"cods/:id",redirect:"staff/:id"},{path:"staff/:id",component:function(){return Promise.all([a.e(0),a.e(26)]).then(a.bind(null,"2V4Q"))}}]}],yt=[{path:"/kpi/ctv",component:L,children:[{path:"configs",component:function(){return Promise.all([a.e(0),a.e(29)]).then(a.bind(null,"n74h"))}},{path:"configsV2",component:function(){return Promise.all([a.e(0),a.e(28)]).then(a.bind(null,"C/Nh"))}}]}],Ct=[{path:"/kpi/modules",component:L,children:[{path:"manage",component:function(){return Promise.all([a.e(0),a.e(146)]).then(a.bind(null,"CcZd"))}},{path:"edit/:id?",name:"edit-module-user",component:function(){return Promise.all([a.e(0),a.e(147)]).then(a.bind(null,"ubnw"))},props:!0}]}],wt=[{path:"/kpi/penalties",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(63)]).then(a.bind(null,"RgqN"))}},{path:"approval-penalties",component:function(){return Promise.all([a.e(0),a.e(65)]).then(a.bind(null,"IXdN"))}},{path:"rent-truck",component:function(){return Promise.all([a.e(0),a.e(85)]).then(a.bind(null,"ovcf"))}}]}],kt=[{path:"/kpi/config-cancel-penalties",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(78)]).then(a.bind(null,"sesc"))}}]},{path:"/kpi/config-salary",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(77)]).then(a.bind(null,"qaRu"))}}]}],xt=[{path:"/salary/dashboard",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(206)]).then(a.bind(null,"QAvY"))}}]}],St=[{path:"/kpi",component:L,children:[{path:"shift-manage",component:function(){return Promise.all([a.e(0),a.e(244)]).then(a.bind(null,"rgyc"))}}]}],Mt=[{path:"/permission",component:L,children:[{name:"manager",path:"manage",component:function(){return Promise.all([a.e(0),a.e(60)]).then(a.bind(null,"UBmi"))}}]}],Tt=[{path:"/cods",component:L,children:[{path:"note",component:function(){return Promise.all([a.e(0),a.e(194)]).then(a.bind(null,"YkcY"))}},{path:"ctv",component:function(){return Promise.all([a.e(0),a.e(178)]).then(a.bind(null,"chBA"))}},{path:"ctv-check",name:"ctv-checkSalary",component:function(){return Promise.all([a.e(0),a.e(197)]).then(a.bind(null,"eGgR"))}},{path:"cod-order",name:"cod-order",component:function(){return Promise.all([a.e(0),a.e(231)]).then(a.bind(null,"VYjf"))}},{path:"cod-penalties",name:"cod-penalties",component:function(){return Promise.all([a.e(0),a.e(150)]).then(a.bind(null,"LBrG"))}}]},{path:"/manager-files",component:L,children:[{path:"/",component:function(){return Promise.all([a.e(0),a.e(158)]).then(a.bind(null,"7XC4"))}}]}],Dt=[{path:"/hr-hc",component:L,children:[{path:"manage-salary",component:function(){return Promise.all([a.e(0),a.e(210)]).then(a.bind(null,"+nQp"))}}]}],It=[{path:"/XTeam",component:L,children:[{path:"manageCoupons",component:function(){return Promise.all([a.e(0),a.e(168)]).then(a.bind(null,"m4rQ"))}}]}],Pt=[{path:"/route",component:L,children:[{path:"manage-difficult-route",name:"manage-difficult-route",beforeEnter:function(){window.location.href=N.a.domainHrmFe+"/config/difficult-route"}},{path:"manage-conf-min-wage-driver",name:"manage-conf-min-wage-driver",beforeEnter:function(){window.location.href=N.a.domainHrmFe+"/config/min-wage"}}]}],Et=[{path:"/shop-vote",component:L,children:[{path:"manage",name:"shop-vote-manage",component:function(){return a.e(170).then(a.bind(null,"02fk"))}}]}],Lt=[{path:"/hr-order",component:L,children:[{name:"list-order",path:"list/:orderCode?",component:function(){return a.e(91).then(a.bind(null,"3Ik7"))},props:!0},{name:"create-order",path:"create/:profileId?/:orderType?",component:function(){return new Promise(function(t){t()}).then(a.bind(null,"VDNj"))},props:!0},{name:"update-order",path:"update/:idOrder?",component:function(){return new Promise(function(t){t()}).then(a.bind(null,"VDNj"))},props:!0}]}],At=[{path:"/g3pl",component:L,children:[{path:"booking/create",name:"g3pl-booking-create",component:function(){return Promise.all([a.e(0),a.e(145)]).then(a.bind(null,"97XZ"))}}]}],Ot=[{path:"/prohibit-package",component:L,children:[{path:"image-product",name:"prohibit-package-image-product",component:function(){return Promise.all([a.e(0),a.e(107)]).then(a.bind(null,"He0o"))}}]}],Nt=[{path:"/log-bag-order",component:L,children:[{path:"list",component:function(){return Promise.all([a.e(0),a.e(200)]).then(a.bind(null,"DWm1"))}}]}],Rt=[{path:"/staff-review",component:L,children:[{path:"/",name:"staff-review",component:function(){return a.e(127).then(a.bind(null,"SVLh"))}}]}],Ut=[{path:"/auto-assign",component:L,children:[{path:"list",component:function(){return Promise.all([a.e(0),a.e(94)]).then(a.bind(null,"2Oyd"))}},{path:"add",component:function(){return Promise.all([a.e(0),a.e(16)]).then(a.bind(null,"6A4N"))},props:{Hrview:!0,type:"add"}},{path:"edit/:id",component:function(){return Promise.all([a.e(0),a.e(16)]).then(a.bind(null,"6A4N"))},props:{Hrview:!0,type:"edit"}},{path:"config-cart/:id",component:function(){return Promise.all([a.e(0),a.e(189)]).then(a.bind(null,"dPVz"))}}]}],$t=[{path:"/driverx",component:L,children:[{path:"jobs",name:"driverx-jobs",component:function(){return Promise.all([a.e(0),a.e(120)]).then(a.bind(null,"RRu/"))}},{path:"create",name:"driverx-create-job",component:function(){return Promise.all([a.e(0),a.e(118)]).then(a.bind(null,"AXHI"))}},{path:":id/candidates",name:"driverx-job-detail",component:function(){return Promise.all([a.e(0),a.e(92)]).then(a.bind(null,"ezAh"))}},{path:":id/edit",name:"driverx-edit-job",component:function(){return Promise.all([a.e(0),a.e(141)]).then(a.bind(null,"e2oj"))}},{path:"driver-penalties",name:"driver-penalties",component:function(){return Promise.all([a.e(0),a.e(151)]).then(a.bind(null,"HKWy"))}},{path:"training",name:"driverx-training",component:function(){return Promise.all([a.e(0),a.e(86)]).then(a.bind(null,"6/tf"))}},{path:"training/:id/builder",name:"training-builder",component:function(){return Promise.all([a.e(0),a.e(35)]).then(a.bind(null,"/v7W"))}}]}],Ht=[{path:"/work-schedule",component:L,children:[{path:"config",component:function(){return Promise.all([a.e(0),a.e(106)]).then(a.bind(null,"Ib3d"))}},{path:"manage",component:function(){return Promise.all([a.e(0),a.e(105)]).then(a.bind(null,"hR6E"))}}]}],Bt=[{path:"/dxteam",component:L,children:[{path:"manage",component:function(){return Promise.all([a.e(0),a.e(124)]).then(a.bind(null,"TjIM"))}}]}],jt=[{path:"/medal",component:L,children:[{name:"medal-manage",path:"manage",component:function(){return a.e(140).then(a.bind(null,"aZqM"))}}]}],Ft=[{path:"/frail-package",component:L,children:[{path:"list",name:"frail-package",component:function(){return Promise.all([a.e(0),a.e(75)]).then(a.bind(null,"SOJb"))}}]}],qt=[{path:"/config-capacity",component:L,children:[{path:"index",component:function(){return Promise.all([a.e(0),a.e(131)]).then(a.bind(null,"Wd9o"))}}]}],Yt=[{path:"/config-bag/list",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(88)]).then(a.bind(null,"Ba5+"))}}]}],zt=[{path:"/config-station/station",component:L,children:[{path:"",component:function(){return a.e(191).then(a.bind(null,"ef5L"))}}]}],Gt=[{path:"/trucks",component:L,children:[{path:"post-offices/",name:"post-offices-configs",component:function(){return Promise.all([a.e(0),a.e(208)]).then(a.bind(null,"qRXr"))},props:!0}]}],Kt=[{path:"/xteam-route",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(103)]).then(a.bind(null,"Wb7x"))}}]}],Vt=[{path:"/xteam-route-new",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(104)]).then(a.bind(null,"GZ0/"))}}]}],Qt=[{path:"/kpi/bonus",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(152)]).then(a.bind(null,"MYTC"))}}]}],Xt=[{path:"/manage-list-cod",component:L,children:[{path:"list",name:"manage-list-cod/list",component:function(){return Promise.all([a.e(0),a.e(76)]).then(a.bind(null,"NHJt"))}},{path:"edit/:id",name:"manage-list-cod/edit",component:function(){return Promise.all([a.e(0),a.e(20)]).then(a.bind(null,"JFX8"))}}]}],Wt=[{path:"/ekyc",component:L,children:[{path:"ekyc-reports",name:"ekyc-reports",component:function(){return a.e(123).then(a.bind(null,"i4BA"))}}]}],Jt=[{path:"/manage-list-bag-box",component:L,children:[{path:"/",name:"manage-list-bag-box/list",component:function(){return Promise.all([a.e(0),a.e(21)]).then(a.bind(null,"zu17"))}}]}],Zt=[{path:"/manage-list-cart",component:L,children:[{path:"list",name:"manage-list-cart/list",component:function(){return Promise.all([a.e(0),a.e(56)]).then(a.bind(null,"0JHB"))},props:!0},{path:"config-return-cart/edit/:id/:alias",name:"manage-list-cart/config-return-cart",component:function(){return Promise.all([a.e(0),a.e(37)]).then(a.bind(null,"tD8W"))},props:!0}]},{path:"/manage-list-cart",component:L,children:[{path:"create",name:"/create-cart",component:function(){return Promise.all([a.e(0),a.e(34)]).then(a.bind(null,"Qn1+"))}}]},{path:"/manage-list-cart",component:L,children:[{path:"edit/:id",name:"/edit-cart",component:function(){return Promise.all([a.e(0),a.e(23)]).then(a.bind(null,"FNgr"))}}]}],te=[{path:"/upload-file/tax-or-account",component:L,children:[{path:"",component:function(){return Promise.all([a.e(0),a.e(217)]).then(a.bind(null,"Unkc"))}}]}],ee=[{path:"/parking",component:L,children:[{name:"",path:"manage",component:function(){return a.e(177).then(a.bind(null,"a4E5"))}}]}],ae=[{path:"/holiday-workshift",component:L,children:[{path:"manage",component:function(){return a.e(136).then(a.bind(null,"IQpz"))}}]}],ne=[{path:"/truck-incident",component:L,children:[{path:"manage",name:"manage-truck-incident",component:function(){return Promise.all([a.e(0),a.e(142)]).then(a.bind(null,"UR4F"))}},{path:"add/:id?",name:"add-incident",component:function(){return Promise.all([a.e(0),a.e(10)]).then(a.bind(null,"8Awk"))}},{path:"edit/:id",name:"edit-incident",component:function(){return Promise.all([a.e(0),a.e(10)]).then(a.bind(null,"8Awk"))}}]}],ie=[{path:"/profile",component:_t,children:[{path:"truck/:truck_order",component:function(){return Promise.all([a.e(0),a.e(55)]).then(a.bind(null,"jVDy"))}}]}],se=[{path:"/profile",component:_t,children:[{path:"station/:nStationID",component:function(){return Promise.all([a.e(0),a.e(48)]).then(a.bind(null,"Ghkq"))}}]}],oe=[{path:"/profile-manager",component:L,children:[{path:"/config-type",name:"config-type",component:function(){return a.e(135).then(a.bind(null,"nvLO"))}},{path:"/config",name:"config-position",component:function(){return a.e(224).then(a.bind(null,"9ikb"))}},{path:"/analytic",name:"document-analytic",component:function(){return a.e(242).then(a.bind(null,"bnPs"))}}]}],re=[{path:"/smart-locker",component:L,children:[{path:"/",name:"smart-locker-config-cart",component:function(){return Promise.all([a.e(0),a.e(73)]).then(a.bind(null,"C4YC"))}}]}],le=[{path:"/income-tax",component:L,children:[{path:"/",name:"income-tax-certification-listing",component:function(){return a.e(171).then(a.bind(null,"1md6"))},meta:{middleware:[R]}}]}],ce=[{path:"/insurance",component:L,children:[{name:"list",path:"list:mp_id?",component:function(){return Promise.all([a.e(0),a.e(108)]).then(a.bind(null,"y7wr"))}}]}],de=[{path:"/kpi-config",component:L,children:[{name:"list-kpi-config",path:"list",component:function(){return a.e(74).then(a.bind(null,"rJbG"))}},{name:"update-kpi-config",path:"update/:config?",component:function(){return a.e(148).then(a.bind(null,"IM1J"))}}]}],ue=[{path:"/area",component:L,children:[{path:"manager",component:function(){return Promise.all([a.e(0),a.e(109)]).then(a.bind(null,"CXg7"))}},{path:"reason",component:function(){return Promise.all([a.e(0),a.e(149)]).then(a.bind(null,"HHAR"))}}]}],he=[{path:"/training",component:L,children:[{path:"list",name:"training-list",component:function(){return a.e(134).then(a.bind(null,"N8S3"))}},{path:"add",name:"add-training",component:function(){return Promise.all([a.e(0),a.e(115)]).then(a.bind(null,"P97F"))}},{path:":id/builder",name:"build-training",component:function(){return a.e(44).then(a.bind(null,"ehUg"))}},{path:":id/edit",name:"edit-training",component:function(){return a.e(138).then(a.bind(null,"LwT1"))}}]}],pe=[{path:"/it",component:_t,children:[{name:"test",path:"test",component:function(){return a.e(187).then(a.bind(null,"UJpl"))}}]}],me=a("bkph"),fe=a("TyzE"),ge=a("3BrW"),ve=a("Hv3x"),_e=a("/b0+"),be=a("DbLI"),ye=a("VDNj"),Ce=a("ETv2"),we=a("ih5F"),ke=a("TVVD"),xe=a("N2/x"),Se=a("YJw0"),Me=a("hC/b"),Te={name:"log-update-order",components:{LogChange:xe.a},props:{id:{default:"view-log-update"},logId:{}},data:function(t){return{logUpdate:[],loading:!1}},watch:{logId:{immediate:!0,handler:function(t,e){t?this.getLogUpdate(t):this.logUpdate=[]}}},methods:{getLogUpdate:function(t){var e=this;t&&(this.loading=!0,Se.a.getLogUpdate({log_id:t}).then(function(t){t.data.success?e.logUpdate=t.data.data||[]:Me.a.showMessage(t.data.message||"Không lấy được thông tin thay đổi !")}).catch(function(t){console.log(t),Me.a.showMessage("Có lỗi khi lấy thông tin thag dổi !")}).finally(function(t){e.loading=!1}))}}},De=Object(y.a)(Te,function(){var t=this.$createElement,e=this._self._c||t;return e("b-modal",{attrs:{title:"Thông tin thay đổi",id:"view-log-update","hide-footer":"",static:""}},[e("LogChange",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"loading"}],staticClass:"position-relative",attrs:{logs:this.logUpdate}})],1)},[],!1,null,null,null).exports,Ie=a("lBHt"),Pe=a("JJbb"),Ee=function(){return Pe.a.get("new-staff/canAccess")},Le=function(t){return Pe.a.get("new-staff/getTags",{params:t})},Ae=function(t){return Pe.a.post("new-staff/createTag",t)},Oe=function(t){return Pe.a.post("new-staff/deleteTag",t)},Ne=function(t){return Pe.a.post("new-staff/getUserTags",t)},Re=function(t){return Pe.a.post("new-staff/attachTag",t)},Ue=function(t){return Pe.a.post("new-staff/detachTag",t)},$e=function(t){return Pe.a.post("new-staff/getUserNoteInClass",t)},He=function(t){return Pe.a.post("new-staff/addNoteEducate",t)},Be=function(t){return Pe.a.get("new-staff/getUserPhoneNumber",{params:t})},je=function(t){return Pe.a.get("message/createDirectChat",{params:t})},Fe=a("oonE"),qe=a("PJh5"),Ye=a.n(qe),ze=a("PbY7"),Ge=a("MZqL"),Ke={name:"contract-sign",props:{orderCode:{default:null},categoryAlias:{default:null},groupAlias:{default:null}},components:{MultiSelectProvince:fe.a,MultiSelectStation:ge.a,SelectOrderStatus:ve.a,MultiSelectRegion:me.a,MultiSelectDepartment:_e.a,MultiSelectPosition:be.a,UpdateOrder:ye.default,Censor:we.a,LogUpdateOrder:De,TimeLine:Ce.a,ManageListCod:ze.a,SelectOrderType:ke.a,SingleSelectUser:Ie.a,ModalCheckBeforeApproveContract:Ge.a},data:function(t){return{loading:!1,loadingAmount:!1,loadingMissDeadlineOrder:!1,exporting:!1,fileExport:null,isApproving:[],dataCheckBeforeApprove:[],isShowModalCheckBeforeApprove:!1,page:{current:1,total:0,per_page:10},orderId:null,currOrder:null,isActiveTab:"all",createOrderType:null,range_deadline:null,range_created:null,filter:{subType:"all",staffCode:null,censor:null,creator:null,type:null,fromCreated:null,toCreated:null,department:null,fromDeadline:null,toDeadline:null,region:null,province:null,station:null,position:null,fullname:null,status:null},contractAmount:{new:0,resign:0,appendix:0},typeContract:Fe.a.arrayTypeContract,range_time:null,orders:[],rejectReason:null,curOrder:{idx:null,id:null},resetEmployee:!1,contractId:null,editCensorOrder:{},logUpdateId:null,codGroupIds:ze.a.codGroupIds,permission:!0}},created:function(){this.listOrder(),this.getAmountContractByType()},mounted:function(){Me.a.importLibraryTracingLogs()},beforeDestroy:function(){Me.a.removeLibraryTracingLogs()},computed:i()({helper:function(){return Me.a}},Object(_.c)({userInfo:"userInfo"}),{canApproveNotQualifyContract:function(){return!(!this.userInfo||!this.userInfo.ErpPosition)&&[110,271,270,272,269,286,154].includes(parseInt(this.userInfo.ErpPosition.id))}}),watch:{categoryAlias:function(t){t?(this.filter.category=t,this.filter.group=null,this.listOrder(!0)):this.filter.category=null},groupAlias:function(t){t&&(this.filter.category=null,this.filter.group=t,this.listOrder(!0))}},methods:{gotoGroupChat:function(t){var e=this;return l()(o.a.mark(function a(){var n,i,s,r,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.order_id){e.next=2;break}return e.abrupt("return");case 2:if(t.channel_id){e.next=13;break}return e.next=5,je({user_id:t.profile_info.user_id});case 5:if(n=e.sent,i=n.data,s=i.success,r=i.message,l=i.data,!s){e.next=11;break}t.channel_id=l.channel_id,e.next=13;break;case 11:return Me.a.showMessage(r),e.abrupt("return");case 13:window.open("https://ghtk.me/channel/internal/"+t.channel_id,"_blank");case 14:case"end":return e.stop()}},a,e)}))()},logAction:function(t,e){if(e&&e.action)if("censor"===e.action){if(["da_duyet","tu_choi","hoan_thanh","da_huy"].includes(t.status))return;this.editCensorOrder=t,this.$bvModal.show("modal-edit-censor")}else"view-log-update"===e.action&&(this.logUpdateId=e.data,this.$bvModal.show("view-log-update"))},formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HH:mm:ss DD/MM/YYYY";return Ye()(t).format(e)},isShowAction:function(t,e){return t.includes(e)},searchOrder:function(t){this.filter.subType=t,this.isActiveTab=t,this.listOrder()},genTypeContractName:function(t){var e=this.typeContract.find(function(e){return e.value===t})||null;return null!==e?e.desc:null},genCodeOrder:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"BH",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6;return Me.a.genCode(t,e,a,n)},resetUpdateStatusData:function(){this.currOrder.isApproving=!1,this.currOrder=null,this.rejectReason=null},resetCurOrder:function(){this.orderId=null,this.createOrderType=null},detailOrder:function(t,e){t?this.orderId=t:this.createOrderType=e||null,this.$bvModal.show("modal-order")},listOrder:function(){var t=this,e=null!=this.range_deadline?this.getStartEndFromTimeRange(this.range_deadline):{},a=null!=this.range_created?this.getStartEndFromTimeRange(this.range_created):{};this.filter.fromDeadline=e.from,this.filter.toDeadline=e.to,this.filter.fromCreated=a.from,this.filter.toCreated=a.to;var n=i()({},this.filter);n.perPage=this.page.per_page,n.page=this.page.current,this.loading=!0,Se.a.getOrderContracts(n).then(function(e){e.data.success?(t.orders=e.data.data,t.permission=e.data.permission,t.getTotal()):Me.a.showMessage(e.data.message||"Không lấy được danh sách đề xuất !")}).catch(function(t){console.log(t)}).finally(function(e){t.loading=!1})},getTotal:function(){var t=this,e=i()({},this.filter);e.perPage=this.page.per_page,e.page=this.page.current,Se.a.getTotal(e).then(function(e){e.data.success?t.page.total=+e.data.data:Me.a.showMessage(e.data.message||"Không lấy được số lượng đề xuất !")}).catch(function(t){console.log(t)}).then(function(t){})},getAmountContractByType:function(){var t=this,e=i()({},this.filter);this.loadingAmount=!0,Se.a.getAmountContractByType(e).then(function(e){e.data.success?t.contractAmount=e.data.data:Me.a.showMessage(e.data.message||"Không lấy được số lượng đề xuất !")}).catch(function(t){console.log(t)}).then(function(e){t.loadingAmount=!1})},checkStatusUpdate:function(t,e,a){this.currOrder=t,"tu_choi"!==a?this.updateStatus(t,a,this.rejectReason):this.$bvModal.show("reject-reason-modal")},updateStatus:function(t,e,a){var n=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t&&t.order_id)if("tu_choi"!==e||a){var s={id:t.order_id,action:e,reason:a,isContinueApprove:i};"duyet"===e&&(this.currOrder.isApproving=!0);var o=!0;i&&(o=!1),Se.a.updateStatus(s).then(function(t){n.currOrder.isApproving=!1,t.data.success?(Me.a.showMessage(t.data.message||"Cập nhật trạng thái thành công !","success"),"tu_choi"===e?n.$bvModal.hide("reject-reason-modal"):"duyet"===e&&i&&n.toggleModalCheckBeforeApprove(!1),t.data.id=s.id,n.listOrder(),o=!0):"duyet"===e&&t.data.data&&!1===t.data.data.is_valid?(o=!1,n.dataCheckBeforeApprove=t.data.data.data_check,n.toggleModalCheckBeforeApprove(!0)):Me.a.showMessage(t.data.message||"Không thể chuyển trạng thái của đề xuất !","warning")}).catch(function(t){console.log(t),Me.a.showMessage("Đã có lỗi xảy ra, không thay đổi được trạng thái đề xuất !","warning")}).finally(function(t){o&&n.resetUpdateStatusData()})}else alert("Vui lòng nhập lý do từ chối")},resetFilter:function(){for(var t in this.filter)this.filter[t]=null;this.listOrder()},openLink:function(t,e,a){"COD"===t&&window.open(N.a.baseUrl+"/profile/cods/"+a,"_blank"),window.open(N.a.baseUrl+"/profile/master/edit/"+e,"_blank")},handleProvinceSelected:function(t){this.filter.province=t?t.map(function(t){return t.id}).toString():""},handleSelectedRegion:function(t){this.filter.region=t?t.map(function(t){return t.id}).toString():""},handleStationSelected:function(t){this.filter.station=t?t.map(function(t){return t.id}).toString():""},handleDepartmentSelected:function(t){this.filter.department=t?t.map(function(t){return t.id}).toString():""},handlePositionSelected:function(t){this.filter.position=t?t.map(function(t){return t.id}).toString():""},selectOrderType:function(t){this.filter.type=t?t.map(function(t){return t.id}).toString():""},selectOrderStatus:function(t){this.filter.status=t?t.map(function(t){return t.value}).toString():""},getStartEndFromTimeRange:function(t){return{from:Ye()(t.start).format("YYYY-MM-DD"),to:Ye()(t.end).format("YYYY-MM-DD")}},redirectProfile:function(t,e){ze.a.redirectProfile(t,e)},toggleModalCheckBeforeApprove:function(t){this.isShowModalCheckBeforeApprove=t}}};var Ve=function(t){a("r30F")},Qe=Object(y.a)(Ke,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-none d-md-block main-content"},[n("b-row",{staticClass:"mx-0 header my-2 align-items-center"},[n("b-col",{attrs:{md:"4"}},[n("h4",{staticClass:"m-0"},[t._v("Quản lý hợp đồng")])]),t._v(" "),n("b-col",{staticClass:"text-right",attrs:{md:"8"}},[n("b-btn",{staticClass:"btn-radius pd-5",attrs:{id:"cm-top-header-tab-all",variant:"all"===t.isActiveTab?"ghtk":"outline-ghtk-color-custom"},on:{click:function(e){return t.searchOrder("all")}}},[t._v("Tất cả")]),t._v(" "),n("b-btn",{staticClass:"btn-radius pd-5",attrs:{id:"cm-top-header-tab-new",variant:"new"===t.isActiveTab?"ghtk":"outline-ghtk-color-custom"},on:{click:function(e){return t.searchOrder("new")}}},[t._v("\n                  Ký mới\n                  "),n("span",{directives:[{name:"show",rawName:"v-show",value:!t.loadingAmount,expression:"!loadingAmount"}]},[t._v("("+t._s(t.contractAmount.new)+")")]),t._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:t.loadingAmount,expression:"loadingAmount"}],staticClass:"fas fa-spinner fa-pulse text-ghtk"})]),t._v(" "),n("b-btn",{staticClass:"btn-radius pd-5",attrs:{id:"cm-top-header-tab-renew-contract",variant:"resign"===t.isActiveTab?"ghtk":"outline-ghtk-color-custom"},on:{click:function(e){return t.searchOrder("resign")}}},[t._v("\n                  Tái ký\n                  "),n("span",{directives:[{name:"show",rawName:"v-show",value:!t.loadingAmount,expression:"!loadingAmount"}]},[t._v("("+t._s(t.contractAmount.resign)+")")]),t._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:t.loadingAmount,expression:"loadingAmount"}],staticClass:"fas fa-spinner fa-pulse text-ghtk"})]),t._v(" "),n("b-btn",{staticClass:"btn-radius pd-5",attrs:{id:"cm-top-header-tab-appendix",variant:"appendix"===t.isActiveTab?"ghtk":"outline-ghtk-color-custom"},on:{click:function(e){return t.searchOrder("appendix")}}},[t._v("\n                  Phụ lục HĐ\n                  "),n("span",{directives:[{name:"show",rawName:"v-show",value:!t.loadingAmount,expression:"!loadingAmount"}]},[t._v("("+t._s(t.contractAmount.appendix)+")")]),t._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:t.loadingAmount,expression:"loadingAmount"}],staticClass:"fas fa-spinner fa-pulse text-ghtk"})])],1)],1),t._v(" "),n("div",{staticClass:"d-flex mt-3"},[n("div",{staticClass:"filter-select-container"},[n("b-row",{staticClass:"mx-0 filter pb-1 border-bottom"},[n("b-col",{staticClass:"mb-1",attrs:{md:"2",lg:"2"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.staffCode,expression:"filter.staffCode"}],staticClass:"form-control rounded",attrs:{placeholder:"CMND/ Mã profile"},domProps:{value:t.filter.staffCode},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.listOrder()},input:function(e){e.target.composing||t.$set(t.filter,"staffCode",e.target.value)}}})]),t._v(" "),n("b-col",{staticClass:"mb-1",attrs:{md:"2",lg:"2"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.fullname,expression:"filter.fullname"}],staticClass:"form-control rounded",attrs:{placeholder:"Họ tên"},domProps:{value:t.filter.fullname},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.listOrder()},input:function(e){e.target.composing||t.$set(t.filter,"fullname",e.target.value)}}})]),t._v(" "),n("b-col",{staticClass:"mb-1",attrs:{md:"2",lg:"2"}},[n("multi-select-department",{attrs:{"custom-class":"z-5 multiselect-ghtk multiselect-no-horizontal rounded","department-ids":t.filter.department},on:{handleDepartmentSelected:t.handleDepartmentSelected}})],1),t._v(" "),n("b-col",{staticClass:"mb-1",attrs:{md:"2",lg:"2"}},[n("multi-select-position",{attrs:{"custom-class":"z-3 multiselect-ghtk multiselect-no-horizontal rounded","position-ids":t.filter.position},on:{handlePositionSelected:t.handlePositionSelected}})],1),t._v(" "),n("b-col",{staticClass:"mb-1",attrs:{md:"2",lg:"2"}},[n("multi-select-region",{attrs:{"custom-class":"z-5 multiselect-ghtk multiselect-no-horizontal rounded","auto-close":!0,"hide-selected":!0},on:{handleSelectedRegion:t.handleSelectedRegion}})],1),t._v(" "),n("b-col",{staticClass:"mb-1",attrs:{md:"2",lg:"2"}},[n("multi-select-province",{attrs:{"custom-class":"z-5 multiselect-ghtk multiselect-no-horizontal rounded","province-ids":t.filter.province,"auto-close":!0,"hide-select":!0},on:{handleProvinceSelected:t.handleProvinceSelected}})],1),t._v(" "),n("b-col",{staticClass:"mb-1",attrs:{md:"2",lg:"2"}},[n("single-select-user",{attrs:{"custom-class":"z-5 multiselect-ghtk multiselect-no-horizontal rounded",placeholder:"Người xử lý"},on:{select:function(e){t.filter.censor=e?e.id:null}}})],1),t._v(" "),n("b-col",{staticClass:"mb-1 placeholder-contain",attrs:{md:"2",lg:"2"}},[n("v-date-picker",{staticClass:"rounded",attrs:{mode:"range",locale:"vi",color:"green","input-props":{placeholder:"Hạn xử lý ",style:"font-size:14px; line-height: unset; border-radius: 0; border-color: #e8e8e8"},popover:{visibility:"focus"}},model:{value:t.range_deadline,callback:function(e){t.range_deadline=e},expression:"range_deadline"}})],1),t._v(" "),n("b-col",{staticClass:"mb-1",attrs:{md:"2",lg:"2"}},[n("single-select-user",{attrs:{"custom-class":"multiselect-ghtk multiselect-no-horizontal rounded",placeholder:"Người tạo"},on:{select:function(e){t.filter.creator=e?e.id:null}}})],1),t._v(" "),n("b-col",{staticClass:"mb-1 placeholder-contain",attrs:{md:"2",lg:"2"}},[n("v-date-picker",{staticClass:"rounded",attrs:{mode:"range",locale:"vi",color:"green","input-props":{placeholder:"Thời gian tạo ",style:"font-size:14px; line-height: unset; border-radius: 0; border-color: #e8e8e8"},popover:{visibility:"focus"}},model:{value:t.range_created,callback:function(e){t.range_created=e},expression:"range_created"}})],1),t._v(" "),n("b-col",{staticClass:"mb-1",attrs:{md:"2",lg:"2"}},[n("select-order-type",{attrs:{"custom-class":"multiselect-ghtk multiselect-no-horizontal rounded",type:t.filter.type,"group-alias":"contract",multiple:!0,"auto-close":!0,"append-category":!0},on:{input:t.selectOrderType}})],1),t._v(" "),n("b-col",{staticClass:"mb-1",attrs:{md:"2",lg:"2"}},[n("select-order-status",{staticClass:"z-3",attrs:{"custom-class":"multiselect-ghtk multiselect-no-horizontal rounded",multiple:!0,status:t.filter.status},on:{input:t.selectOrderStatus}})],1)],1)],1),t._v(" "),n("div",{staticClass:"search-button-container"},[n("b-row",{staticClass:"mx-0 filter pb-1"},[n("b-col",{staticClass:"text-right",attrs:{md:"12"}},[n("multi-select-station",{attrs:{"custom-class":"z-3 multiselect-ghtk multiselect-no-horizontal rounded","station-ids":t.filter.station,"auto-close":!0,"hide-select":!0},on:{handleStationSelected:t.handleStationSelected}}),t._v(" "),n("b-btn",{staticClass:"mt-1",staticStyle:{"border-radius":"5px",width:"100%"},attrs:{variant:"ghtk"},on:{click:function(e){return t.listOrder()}}},[n("i",{staticClass:"fas fa-search"}),t._v(" Tìm kiếm")])],1)],1)],1)]),t._v(" "),n("div",{staticClass:"order-table row mx-0"},[n("div",{staticClass:"col col-12 table-content"},[n("table",{staticClass:"table table-hover bg-white table-order-list w-100 d-block table-responsive-sm"},[t._m(0),t._v(" "),n("tbody",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"position-relative"},[t._l(t.orders,function(e,i){return n("tr",{key:i},[n("td",[n("div",[n("strong",{class:t.codGroupIds.includes(parseInt(e.profile_info.group_id))?"text-success-hover text-underline-hover cursor-pointer":"",on:{click:function(a){return t.redirectProfile(e.profile_info.group_id,e.profile_info.user_id)}}},[t._v("\n                                "+t._s(e.profile_info.fullname)+" ("+t._s(e.profile_info.username)+")\n                                ")])]),t._v(" "),n("div",[n("span",[t._v(t._s(e.profile_info.position_name)+" - "+t._s(e.profile_info.province)+" - "+t._s(e.profile_info.station))])]),t._v(" "),n("div",[n("span",[t._v(t._s(e.profile_info.tel))])]),t._v(" "),n("div",{staticClass:"d-flex mt-3"},[n("b-btn",{staticClass:"btn-user mr-2 cm-btn-view-profile",attrs:{variant:"ghtk",name:"cm-btn-view-profile"},on:{click:function(a){return t.openLink(e.profile_info.group,e.profile_info.id,e.profile_info.user_id)}}},[t._v("Xem profile")]),t._v(" "),n("b-btn",{staticClass:"btn-user cm-btn-chat",attrs:{variant:"ghtk",name:"cm-btn-chat"},on:{click:function(a){return t.gotoGroupChat(e)}}},[n("img",{staticClass:"icon-award",attrs:{src:a("IKfy"),alt:""}}),t._v(" Chat")])],1)]),t._v(" "),n("td",[n("div",[n("strong",[t._v(t._s(t.genCodeOrder(e.order_id,"contract"===e.category?"HĐ":"BH")))]),t._v(" "),e.contract_info?n("span",[t._v("\n                                - "),n("span",[t._v(t._s(t.genTypeContractName(e.contract_info.type_contract)))]),t._v("\n                                - "),n("span",[t._v("Tính KPI: "+t._s(+e.contract_info.has_kpi?"Có":"Không"))])]):t._e(),t._v(" "),"appendix"===t.isActiveTab?n("span",[t._v(" - "+t._s(e.type.name))]):t._e()]),t._v(" "),e.contract_info?n("div",[e.contract_info.end_date&&"new_appendix"!==e.type_alias?n("span",[t._v("Thời hạn: "+t._s(t.formatDate(e.contract_info.start_date,"DD/MM/YYYY"))+" - "+t._s(t.formatDate(e.contract_info.end_date,"DD/MM/YYYY")))]):t._e(),t._v(" "),e.contract_info.end_date||"new_appendix"===e.type_alias?t._e():n("span",[t._v("Không thời hạn")]),t._v(" "),"new_appendix"===e.type_alias?n("span",{staticClass:"d-flex"},[t._v("\n                                Ngày bắt đầu hiệu lực: "+t._s(t.helper.isEmpty(e.contract_info.effect_date)?"":t.formatDate(e.contract_info.effect_date,"DD/MM/YYYY"))+"\n                              ")]):t._e()]):t._e(),t._v(" "),n("div",[n("strong",[t._v("Hạn xử lý: "+t._s(t.helper.isEmpty(e.deadline)?"":t.formatDate(e.deadline,"HH:mm:ss DD/MM/YYYY")))]),t._v(" "),n("strong",{staticClass:"d-flex"},[t._v("Trạng thái: "+t._s(e.status_desc))])]),t._v(" "),n("div",{staticClass:"mt-2"},[n("time-line",{attrs:{"item-style":{padding:"0px",fontSize:"14px"},logs:e.logs,"append-action":!["da_duyet","tu_choi","da_huy","hoan_thanh"].includes(e.status),"message-field":"message"},on:{action:function(a){for(var n=arguments.length,i=Array(n);n--;)i[n]=arguments[n];return t.logAction.apply(void 0,[e].concat(i))}}})],1)]),t._v(" "),n("td",{staticClass:"text-center"},[t.isShowAction(e.permission,"view")?n("b-btn",{staticClass:"action-btn cm-btn-view-contract",attrs:{variant:"outline-ghtk",name:"cm-btn-view-contract"},on:{click:function(a){return t.detailOrder(e.order_id)}}},[t._v("\n                              "+t._s("new_contract"===e.type_alias?"Xem hợp đồng":"Xem phụ lục")+"\n                             ")]):t._e(),t._v(" "),t.isShowAction(e.permission,"approve")&&!e.isApproving?n("b-btn",{staticClass:"action-btn mt-2 cm-btn-approve-contract",attrs:{variant:"outline-ghtk",name:"cm-btn-approve-contract"},on:{click:function(a){return t.checkStatusUpdate(e,i,"duyet")}}},[t._v("Duyệt")]):t._e(),t._v(" "),t.isShowAction(e.permission,"approve")&&e.isApproving?n("b-btn",{staticClass:"action-btn mt-2",attrs:{variant:"outline-ghtk"}},[n("i",{staticClass:"fa fa-spin fa-spinner"}),t._v(" Đang duyệt")]):t._e(),t._v(" "),t.isShowAction(e.permission,"reject")?n("b-btn",{staticClass:"action-btn mt-2 cm-btn-reject-contract",attrs:{variant:"outline-ghtk",name:"cm-btn-reject-contract"},on:{click:function(a){return t.checkStatusUpdate(e,i,"tu_choi")}}},[t._v("Từ chối")]):t._e()],1)])}),t._v(" "),n("tr",{directives:[{name:"show",rawName:"v-show",value:!t.orders||!t.orders.length,expression:"!orders || !orders.length"}]},[t._m(1)])],2)])])]),t._v(" "),n("div",{staticClass:"paging mt-2 mx-3 paging-container"},[n("div",{staticClass:"z-0 d-inline-block paginator-ghtk"},[n("b-pagination",{staticClass:"mb-1",attrs:{size:"sm",align:"left","total-rows":t.page.total,"per-page":t.page.per_page},on:{input:function(e){return t.listOrder()}},model:{value:t.page.current,callback:function(e){t.$set(t.page,"current",e)},expression:"page.current"}})],1),t._v(" "),n("b",{staticClass:"float-left"},[t._v("Trang "+t._s(t.page.current)+"/"+t._s(Math.ceil(t.page.total/t.page.per_page)))]),t._v(" "),t.permission?n("b-btn",{staticClass:"float-right mb-2",attrs:{right:"",variant:"ghtk",id:"cm-btn-create-order-contract"},on:{click:function(e){return t.detailOrder(null,"new_contract")}}},[n("span",{attrs:{slot:"button-content"},slot:"button-content"},[n("i",{staticClass:"fas fa-plus"}),t._v(" Tạo đề xuất\n                ")])]):t._e()],1),t._v(" "),n("b-modal",{attrs:{id:"modal-order",static:"","modal-class":"modal-xxl",title:"THÔNG TIN ĐỀ XUẤT","hide-footer":""},on:{hide:t.resetCurOrder}},[n("update-order",{attrs:{"id-order":t.orderId||null,"modal-style":!0,"order-type":t.createOrderType,edit:t.permission},on:{addOrderOk:function(e){return t.listOrder()},changeStatusOk:function(e){return t.listOrder()}}})],1),t._v(" "),n("b-modal",{attrs:{title:"Cập nhật người xử lý",id:"modal-edit-censor","hide-footer":""}},[n("Censor",{attrs:{order:t.editCensorOrder,"order-id":t.editCensorOrder.order_id}})],1),t._v(" "),n("LogUpdateOrder",{attrs:{"log-id":t.logUpdateId,id:"view-log-update"}}),t._v(" "),n("b-modal",{attrs:{static:"",title:"Nhập lý do từ chối",id:"reject-reason-modal"},on:{hide:t.resetUpdateStatusData}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.rejectReason,expression:"rejectReason"}],staticClass:"form-control",attrs:{name:"reject-reason-input",rows:"4"},domProps:{value:t.rejectReason},on:{input:function(e){e.target.composing||(t.rejectReason=e.target.value)}}}),t._v(" "),n("div",{staticClass:"w-100 text-center",attrs:{slot:"modal-footer"},slot:"modal-footer"},[n("b-btn",{attrs:{variant:"success"},on:{click:function(e){return t.updateStatus(t.currOrder,"tu_choi",t.rejectReason)}}},[t._v("OK")]),t._v(" "),n("b-btn",{attrs:{variant:"danger"},on:{click:function(e){return t.$bvModal.hide("reject-reason-modal")}}},[t._v("Hủy")])],1)]),t._v(" "),n("ModalCheckBeforeApproveContract",{attrs:{"data-check":t.dataCheckBeforeApprove,"is-show":t.isShowModalCheckBeforeApprove},on:{toggleModal:t.toggleModalCheckBeforeApprove,continueApprove:function(e){return t.updateStatus(t.currOrder,"duyet",t.rejectReason,!0)}}})],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",{staticClass:"header-row"},[e("th",{staticClass:"text-center candidate-col"},[this._v("Thông tin ứng viên")]),this._v(" "),e("th",{staticClass:"text-center log-col"},[this._v("Chi tiết log")]),this._v(" "),e("th",{staticClass:"text-center action-col"},[this._v("Thao tác")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"text-center align-middle no-result",attrs:{colspan:"6"}},[e("div",{staticClass:"w-100"},[this._v("Không có đề xuất nào !")])])}],!1,Ve,"data-v-7970dce4",null).exports,Xe=a("fZjL"),We=a.n(Xe),Je=a("d7EF"),Ze=a.n(Je),ta=a("W3Iv"),ea=a.n(ta),aa=a("pFYg"),na=a.n(aa),ia=a("mvHQ"),sa=a.n(ia),oa=a("a/7L"),ra=a("RUzx"),la=a.n(ra),ca=a("O6r3"),da={name:"multi-select-syllabus",components:{Multiselect:la.a},props:{syllabusIds:{},autoClose:{default:!1},hideSelect:{default:!1},limit:{default:5},multiple:{default:!0},isDisabled:{default:!1},placeholder:{default:"Chọn nội dung"},customClass:{type:String,default:"multiselect-primary"},label:{type:String,default:"content"},reset:{default:!1},activeOnly:{default:!1}},data:function(){return{option:null,options:[]}},created:function(){this.getList()},watch:{option:function(t,e){},syllabusIds:function(t,e){this.options&&this.options.length>0&&this.setList()},reset:function(t){this.getList()}},methods:{customLabel:function(t){return t.code+" - "+t.content},select:function(t){this.$emit("select",t)},remove:function(t){this.$emit("remove",t)},setList:function(){var t=this;this.syllabusIds?(this.multiple&&(this.option=[]),("string"==typeof this.syllabusIds?this.syllabusIds.split(","):this.syllabusIds).forEach(function(e){var a=t.options.find(function(t){return+t.id==+e});a&&(t.multiple?t.option.push(a):t.option=a)})):this.option=null},getList:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={},t.activeOnly&&(a.status="open"),e.next=5,ca.a.getAllSyllabus(a);case 5:(n=e.sent).data.success?(t.options=n.data.data,t.setList()):Me.a.showMessage(n.data.message,"warning"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Me.a.showMessage(e.t0.message,"warning");case 12:case"end":return e.stop()}},e,t,[[0,9]])}))()}}};var ua=function(t){a("ir9N")},ha=Object(y.a)(da,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{class:t.customClass,attrs:{options:t.options,multiple:t.multiple,placeholder:t.placeholder,label:t.label,"track-by":"id","selected-label":"","deselect-label":"X","select-label":"",disabled:t.isDisabled,limit:t.limit,"hide-selected":t.hideSelect,"close-on-select":t.autoClose,"custom-label":t.customLabel},on:{select:function(e){t.$emit("select",e)},remove:function(e){t.$emit("remove",e)},input:function(e){return t.$emit("handleSyllabusSelected",t.option)}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,ua,"data-v-69349c60",null).exports,pa=a("+cgA"),ma=a("BO1k"),fa=a.n(ma),ga=a("EAZf"),va=a.n(ga),_a=a("dAhr"),ba={name:"edit-document",components:{Viewer:va.a,pdf:_a.a},data:function(t){return{tmpFile:null,orderPeriod:1,options:[]}},props:{accept:{type:String,default:"image/*, .pdf, .doc, .docx, application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document, video/*"},fileClass:{default:function(){return[]}},numPeriod:{default:null},periods:{default:function(){return[]}}},computed:{helper:function(){return Me.a},idInput:function(){return"input-file-"+Math.random()}},watch:{orderPeriod:{immediate:!0,handler:function(t,e){this.numPeriod<parseInt(t)?Me.a.showMessage("Buổi học vượt quá cho phép!","warning"):this.$emit("changeFile",t)}},periods:{immediate:!0,handler:function(t,e){this.options=t.map(function(t){return{value:t.order_number,text:"Tài liệu buổi "+t.order_number}})}}},methods:{previewImageRender:function(t){if(Me.a.isEmpty(t))return"";var e=Me.a.getFileType(t);if("doc"===e)return"https://gs.giaohangtietkiem.vn/d/e24bec4ee88441bdb3e79466dd541152.png?height=250";if("object"===(void 0===t?"undefined":na()(t))){if("pdf"===e)return"https://gs.giaohangtietkiem.vn/d/d7d5ef9e764e4227b7aef2c11dfd1371.pngheight=250";if("video"===e)return"https://ghtk.me/images/icon-file-video.png?height=250";if("image"===e)return URL.createObjectURL(t)}else if(["pdf","video"].includes(e))return t+"?extract=thumb";return t},showPreview:function(t){return"edit"!==this.type||!Me.a.isEmpty(this.file_creators[t])},getUrl:function(t){return Me.a.isEmpty(t)?null:"string"==typeof t?t:URL.createObjectURL(t)},openLink:function(t){window.open(t,"_blank")},addFile:function(t){this.tmpFile||(this.tmpFile={});var e=t.target.files||t.dataTransfer.files;e.size&&(e=[e]);var a=this.accept.split(", "),n=!0,i=!1,s=void 0;try{for(var o,r=fa()(e);!(n=(o=r.next()).done);n=!0){var l=o.value,c=l.type.split("/"),d=l.name.split(".").pop();if(!c||c.leght<1)return;a.includes(l.type)||a.includes(c[0]+"/*")||a.includes("."+d)?this.tmpFile=l:Me.a.showMessage("Định dạng file "+l.name+"  không được hỗ trợ !","warning")}}catch(t){i=!0,s=t}finally{try{!n&&r.return&&r.return()}finally{if(i)throw s}}t.target.value=null}}};var ya=function(t){a("sd+D")},Ca=Object(y.a)(ba,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"d-flex"},[a("b",{staticClass:"text-title"},[t._v("Tài liệu buổi")]),t._v(" "),a("b-form-select",{staticClass:"btn-select-period",attrs:{options:t.options,size:"sm"},model:{value:t.orderPeriod,callback:function(e){t.orderPeriod=e},expression:"orderPeriod"}})],1),t._v(" "),a("div",{staticClass:"profile-document"},[t._l(t.fileClass,function(e,n){return[a("div",{key:e+n+"fileClass",staticClass:"profile-document__element"},[a("i",{staticClass:"icon ion-md-close-circle cursor-pointer delete-icon-document",on:{click:function(e){return t.$emit("action",{action:"delete-file",data:{idx:n}},t.orderPeriod)}}}),t._v(" "),[a("span",[["pdf","video","image","doc"].includes(t.helper.getFileType(e))?a("img",{staticClass:"image-document",class:n,attrs:{src:t.previewImageRender(e),alt:"Tài liệu buổi "+n}}):t._e()])]],2)]})],2),t._v(" "),a("input",{staticClass:"custom-file-input d-none",attrs:{type:"file",multiple:!1,accept:t.accept,id:t.idInput,name:"input_"},on:{change:function(e){return t.$emit("action",{action:"new-file",data:{file:t.tmpFile}},t.orderPeriod)},input:t.addFile}}),t._v(" "),a("div",{staticClass:"m-0 d-flex justify-content-center mt-3"},[a("label",{staticClass:"custom-label",attrs:{for:t.idInput}},[t._t("label",function(){return[a("div",{staticClass:"rounded cursor-pointer btn-ghtk px-4 py-1"},[t._v("+ Thêm tài liệu")])]})],2),t._v(" "),a("label",{staticClass:"custom-label"},[t._t("label",function(){return[a("div",{staticClass:"rounded cursor-pointer btn-ghtk px-4 py-1 ml-3",on:{click:function(e){return t.$emit("action",{action:"close"})}}},[t._v("Hoàn thành")])]})],2)])])},[],!1,ya,"data-v-62a81be5",null).exports,wa=a("HhAh"),ka=a.n(wa),xa={props:{classCode:{},customClass:{default:""},placeholder:{default:null},hideSelected:{default:!0},autoClose:{default:!0},clearOnSelect:{default:!0},disabled:{default:!1},multiple:{default:!0}},name:"multi-select-class",components:{Multiselect:la.a,trainingService:ca.a,debounce:ka.a},watch:{asyncSelected:function(){this.$emit("onChange",this.asyncSelected)},classCode:{immediate:!0,handler:function(){this.asyncSelected=this.classCode}}},data:function(){return{asyncSelected:[],asyncFound:[],asyncLoading:!1,asyncTimeout:null,message:"Nhập ít nhất 2 ký tự"}},computed:{},created:function(){},methods:{asyncFind:ka()(function(t){var e=this;if(t.length<2)return this.asyncFound=[],void(this.message="Nhập ít nhất 2 ký tự");this.asyncLoading=!0,this.asyncFound=[],ca.a.apiGetListClass({term:t}).then(function(t){t.data.hasOwnProperty("success")&&(t.data.success?e.asyncFound=t.data.data:e.message="Không tìm thấy kết quả")}).catch(function(){e.message="Không tìm thấy kết quả"}).then(function(){e.asyncLoading=!1})},500)}},Sa=Object(y.a)(xa,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-row",{staticClass:"mb-1"},[a("b-col",{attrs:{sm:"12"}},[a("multiselect",{class:t.customClass,attrs:{"select-label":"",disabled:t.disabled,label:"name","track-by":"id",placeholder:t.placeholder,options:t.asyncFound,multiple:t.multiple,searchable:!0,loading:t.asyncLoading,"internal-search":!1,"clear-on-select":t.clearOnSelect,"close-on-select":t.autoClose,"hide-selected":t.hideSelected},on:{"search-change":t.asyncFind,select:function(e){t.$emit("select",e)},remove:function(e){t.$emit("remove",e)},input:function(e){t.$emit("input",e)}},model:{value:t.asyncSelected,callback:function(e){t.asyncSelected=e},expression:"asyncSelected"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Không có kết quả phù hợp !")]),t._v(" "),a("span",{attrs:{slot:"noOptions"},slot:"noOptions"},[t._v(t._s(t.message))]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])],1)],1)},[],!1,null,null,null).exports,Ma={name:"single-select-class",components:{Multiselect:la.a},props:{classId:null,isDisabled:{type:Boolean},customClass:{type:String,default:"multiselect-primary"}},data:function(){return{option:null,options:[]}},created:function(){this.getList()},watch:{option:function(t,e){this.$emit("handleSelected",t)},classId:function(t,e){t?this.setSelectedOption():this.option=null}},methods:{getList:function(){var t=this;ca.a.getListClass().then(function(e){e.data.success&&(t.options=e.data.data,t.setSelectedOption())}).catch(function(t){console.log(t)})},setSelectedOption:function(){var t=this;this.options.length>0&&this.classId&&(this.option=this.options.find(function(e){return parseInt(e.id)===parseInt(t.classId)}))}}},Ta=Object(y.a)(Ma,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{class:t.customClass,attrs:{options:t.options,placeholder:"Chọn lớp",label:"name","track-by":"name",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn",searchable:!0,disabled:t.isDisabled},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v("Chọn lớp")])])},[],!1,null,null,null).exports,Da={DEFAULT_THUMBNAIL:"https://cache.giaohangtietkiem.vn/d/0888d0a4b6342ac2fe96d3a7aaf7657c.png"},Ia={name:"modal-delete-academy",components:{},props:["classId","userId","masterId"],data:function(t){return{note:null}},created:function(){},computed:{},watch:{},methods:{deleteAcademy:function(){var t=this;if(this.note){var e={class_id:this.classId,academy_id:this.userId,note:this.note};ca.a.deleteStudent(e).then(function(e){e.data.success?(Me.a.showMessage(e.data.message,"success"),t.hideModal(),t.$emit("refreshPage")):Me.a.showMessage(e.data.message||"Gặp lỗi khi lấy thông tin lớp học !","warning")}).catch(function(t){console.log(t)}).then(function(){t.loading=!1})}else Me.a.showMessage("Vui lòng điền lý do xóa học viên")},hideModal:function(){this.$bvModal.hide("modal-delete-academy"),this.note=null}}};var Pa=function(t){a("qfMG")},Ea=Object(y.a)(Ia,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{class:"modal-custom",attrs:{size:"sm",id:"modal-delete-academy",centered:"",title:"Ghi chú","hide-header":"","hide-footer":"",static:""},on:{hidden:t.hideModal}},[a("div",{staticClass:"modal-header-custom text-center"},[a("span",{staticClass:"text-header"},[t._v("Xóa học viên")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.hideModal()}}},[t._v("×")])]),t._v(" "),a("div",{staticClass:"class-period",attrs:{title:"Ghi chú"}},[a("div",[a("b-form-textarea",{attrs:{id:"textarea",placeholder:"Nhập lý do xóa học viên",rows:"5","max-rows":"6"},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}})],1)]),t._v(" "),a("div",{staticClass:"text-center mt-1 mb-1"},[a("b-btn",{staticClass:"btn-roll-up-student",attrs:{variant:"ghtk"},on:{click:function(e){return t.deleteAcademy()}}},[t._v("Xóa")])],1)])],1)},[],!1,Pa,"data-v-30266f34",null).exports,La={name:"ModalNoteDeleteStudent",components:{},props:{studentId:null},data:function(){return{note:""}},computed:{},watch:{},methods:{deleteAcademy:function(){this.note?(this.$emit("deleteStudent",this.note),this.hideModal()):Me.a.showMessage("Vui lòng điền lý do xóa học viên")},hideModal:function(){this.$bvModal.hide("modal-note-delete-student"),this.note=null}}};var Aa=function(t){a("+fY7")},Oa=Object(y.a)(La,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{class:"modal-custom",attrs:{size:"sm",id:"modal-note-delete-student",centered:"",title:"Ghi chú","hide-header":"","hide-footer":"",static:""},on:{hidden:t.hideModal}},[a("div",{staticClass:"modal-header-custom text-center"},[a("span",{staticClass:"text-header"},[t._v("Xóa học viên")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.hideModal()}}},[t._v("×")])]),t._v(" "),a("div",{staticClass:"class-period",attrs:{title:"Ghi chú"}},[a("div",[a("b-form-textarea",{attrs:{id:"textarea",placeholder:"Nhập lý do xóa học viên",rows:"5","max-rows":"6"},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}})],1)]),t._v(" "),a("div",{staticClass:"text-center mt-1 mb-1"},[a("b-btn",{staticClass:"btn-roll-up-student",attrs:{variant:"ghtk"},on:{click:function(e){return t.deleteAcademy()}}},[t._v("Xóa")])],1)])],1)},[],!1,Aa,"data-v-2f0d5d8a",null).exports,Na=a("Saf8"),Ra=function(t){return Na.a.post("/class/update",t)},Ua=function(t){return Na.a.post("/syllabus/can-add-student-to-class",t)},$a=function(t){return Na.a.post("class/students/add",t)},Ha=a("4pAE"),Ba=function(t){return Ha.a.post("/education/api/tp/create",t)},ja=function(t){return Ha.a.post("/education/api/tp/update",t)},Fa=function(t){return Ha.a.post("/education/api/tp/periods/create",t)},qa=function(t){return Ha.a.put("/education/api/tp/periods/update",t)},Ya=function(t){return Ha.a.post("/education/api/tp/create-master",t)},za=function(t){return Ha.a.post("/education/api/tp/update-master",t)},Ga=function(t){return Ha.a.get("/education/api/tp/detail",{params:t})},Ka=function(t){return Ha.a.get("/education/api/tp/list",{params:t})},Va=function(t){return Ha.a.get("/education/api/tp/logs",{params:t})},Qa=function(t){return Ha.a.get("/education/api/tp/lessons/docs/links",{params:t})},Xa={name:"ModalHlsPlayer",props:{cdnLink:{type:String,default:""},showModal:{type:Boolean,default:!1}},watch:{showModal:function(t){this.show=t}},computed:{helper:function(){return Me.a},streamVideo:function(){return N.a.domainHrmFe+"/hls-play?url="+this.cdnLink}},data:function(t){return{show:!1}},methods:{hideModal:function(){this.$emit("hide")}}};var Wa=function(t){a("+E3f")},Ja=Object(y.a)(Xa,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{id:"modal-hls-player",scrollable:"","hide-footer":"",size:"lg",title:"Xem video"},on:{hide:t.hideModal},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("div",{staticClass:"box-close-from"},[a("b-embed",{attrs:{type:"iframe",aspect:"16by9",src:t.streamVideo,allowfullscreen:""}})],1)])},[],!1,Wa,"data-v-50f00090",null).exports,Za={name:"view-document",components:{ModalHlsPlayer:Ja},data:function(t){return{fileResponse:null,cdnLink:null,showModalHls:!1}},props:{lessons:{default:function(){return{title:"",thumbnail:null,gdrive:null}}}},computed:{helper:function(){return Me.a}},watch:{},methods:{previewLesson:function(t){return Da.DEFAULT_THUMBNAIL},openLink:function(t){var e=this;return l()(o.a.mark(function a(){var n,i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.getLinkFiles(t.file_id);case 2:if(n=e.fileResponse[t.file_id],!(i=n.gdrive||n.direct||null)){a.next=13;break}if(!i.endsWith(".m3u8")){a.next=11;break}return e.cdnLink=i,e.showModalHls=!0,a.abrupt("return",!0);case 11:if("video"===n.type){a.next=13;break}return a.abrupt("return",window.open(i,"_blank"));case 13:Me.a.showMessage("Đang trong quá trình chuyển đổi tài liệu, bạn không thể xem tài liệu ngay lúc này!","warn");case 14:case"end":return a.stop()}},a,e)}))()},getLinkFiles:function(t){var e=this;return l()(o.a.mark(function a(){var n,i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,(n={}).file_id=[t],a.next=5,Qa(n);case 5:(i=a.sent).data.success?e.fileResponse=i.data.data:Me.a.showMessage(i.data.message,"warning"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),Me.a.showMessage(a.t0.message,"warning");case 12:case"end":return a.stop()}},a,e,[[0,9]])}))()}}};var tn=function(t){a("Aj3r")},en=Object(y.a)(Za,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"profile-document"},[t._l(t.lessons||[],function(e,n){return[a("div",{key:"fileClass-"+n,staticClass:"profile-document__element"},[a("div",{staticClass:"w-100 title-document"},[t._v("\n            "+t._s(n+1+".  "+e.title)+"\n        ")]),t._v(" "),a("span",{staticClass:"cursor-pointer",on:{click:function(a){return t.openLink(e)}}},[a("img",{staticClass:"image-document",attrs:{src:t.previewLesson(),alt:"Tài liệu buổi "+n}})])])]}),t._v(" "),a("ModalHlsPlayer",{attrs:{"cdn-link":t.cdnLink,showModal:t.showModalHls},on:{hide:function(e){t.showModalHls=!1}}})],2)},[],!1,tn,"data-v-6a5f8068",null).exports,an={name:"modal-create-class-v2",components:{ViewDocument:en,ModalDeleteAcademy:Ea,MultiSelectStation:ge.a,MultiSelectPosition:be.a,SingleSelectStation:oa.a,EditDocument:Ca,MultiSelectSyllabus:ha,MultiSelectUser:pa.a,SingleSelectUser:Ie.a,MultiSelectClass:Sa,SingleSelectClass:Ta,ModalNoteDeleteStudent:Oa},props:{title:{default:"Tạo lớp học"},id:{default:"modal-create-class"},type:{default:"create"},classInfo:{type:Object,default:function(t){return{}}},reloadClass:{},activeClass:{}},data:function(t){return{acceptFile:["pdf","video","image","doc"],lessonInfoVisible:!0,documentInfoVisible:!0,studentInfoVisible:!1,files:[],originCount:0,canDeleteOrigin:!1,idx:null,fileClass:[],fileCreators:[],tmpFileClass:[],tmpFileSyllabus:[],syllabus:null,classId:null,dataClassInfo:null,personInChange:{},syllabusDetail:null,classDetail:[],listStudents:[],listStudentsTemp:[],studentFilter:{positions:[],stations:[]},listStudentFilter:[],listClassPending:[],listClassPendingFilter:[],organOptions:[{value:"offline",text:"Offline"},{value:"online",text:"Online"}],templatePeriod:[{title:"Thời gian",field:"time"},{title:"Hình thức",field:"form"},{title:"Địa điểm",field:"station"},{title:"Giảng viên",field:"teacher_id"}],student:null,studentId:null,resetStudentSelected:!1,userStatus:3,roles:[3],organizeOptions:[{value:"offline",text:"offline"},{value:"online",text:"online"}],periodDocType:"edit",disabledConfirm:!1,loadingStudent:!1,loadingClassDetail:!1,loadingBaseClass:!1,detailClass:{nameClass:null,regionClass:null,countStudentClass:0,show:!1,open:!1,station_id:null,lecturer:null},createClass:{stationId:null,lecturer:null},numPeriod:1,numberStudent:0,stopScroll:null,reset:!0,resetFilter:!0,hideClass:!1,syllabusFilter:{id:null,userId:null,classIds:[]},hideStudent:!1,periods:[],listPosition:[],listStation:[],currentStudentId:null,listStudentAdd:[],listStudentRemove:[],listFileRemove:[],listFileAdd:[],periodDocuments:{order_number:1,files:[]},currentPage:1,totalPage:0,scrollContainer:null}},created:function(){},computed:{edit:function(){return!!this.classInfo},helper:function(){return Me.a},numberFile:function(){var t=0;return this.classDetail.forEach(function(e){t+=e.files.length}),t},maxNumLecturer:function(){var t=1;return this.syllabusDetail&&+this.syllabusDetail.is_master&&(t=this.syllabusDetail.child_syllabus.length||1),t}},watch:{syllabus:function(t,e){t&&this.getTrainingProgram(t)},classDetail:function(t,e){t&&"create"===this.type&&this.chooseStudents(),this.periods=t.map(function(t){return{class_period_id:t.id,order_number:t.order_number}})},classId:function(t,e){(e||0===We()(this.classInfo).length)&&t&&this.getClasses()},listStudents:function(t,e){var a=this;this.listStudentFilter=this.listStudents,this.listStudentFilter.forEach(function(t){a.listPosition.push(t.position_id),a.listStation.push(t.station_id)})},reloadClass:function(){this.getClassListWaitingConfirm(!0)},activeClass:function(t,e){this.setActiveClass(t)}},methods:{checkScroll:function(t){t.target.offsetWidth+t.target.scrollLeft>=t.target.scrollWidth&&parseInt(this.currentPage)<parseInt(this.totalPage)&&(this.currentPage=this.currentPage+1,this.getClassListWaitingConfirm())},noteDeleteStudent:function(t){var e=this.listStudents.find(function(t){return t.id===this.student_id},{student_id:this.currentStudentId});this.listStudentRemove.push(i()({},e,{note:t})),this.listStudentFilter=this.listStudentFilter.filter(function(t){return t.id!==this.currentStudentId},{currentStudentId:this.currentStudentId}),this.listStudents=this.listStudents.filter(function(t){return t.id!==this.currentStudentId},{currentStudentId:this.currentStudentId}),this.changeNumberStudent()},addEventToElement:function(){var t=document.getElementById("infoClass");t&&(t.onwheel=function(e){t.scrollLeft+=e.deltaY,e.preventDefault()})},getUrl:function(t){return Me.a.isEmpty(t)?null:"string"==typeof t?t:URL.createObjectURL(t)},getClasses:function(){var t=this;if(this.hideClass=!1,this.hideStudent=!1,this.classId){var e={class_id:this.classId,status:"pending",limit:1};this.loadingClassDetail=!0,ca.a.getClasses(e).then(function(e){e.data.success&&(t.dataClassInfo=e.data.data.data[0],t.checkClassInfo(t.dataClassInfo))}).catch(function(t){console.log(t)}).finally(function(){t.changeNumberStudent(),t.loadingClassDetail=!1})}},showModal:function(){this.resetFilter=!this.resetFilter,this.checkClassInfo()},getClassListWaitingConfirm:function(t){var e=this;this.hideClass=!1,this.numberStudent=0,this.createClass.stationId?(this.loadingBaseClass=!0,ca.a.getClassListWaitingConfirm({stationId:this.createClass.stationId,page:this.currentPage,tp_id:this.syllabusFilter.id,user_id:this.syllabusFilter.userId}).then(function(a){a.data.success&&(e.listClassPendingFilter=t?a.data.data:[].concat(d()(e.listClassPendingFilter),d()(a.data.data)),e.currentPage=a.data.current_page,e.totalPage=a.data.total_page,e.listClassPendingFilter.length<1?Me.a.showMessage("Không có lớp ứng với địa điểm!"):Me.a.showMessage("Lấy danh sách lớp học thành công.","success"),e.hideStudent=e.checkHideStudent(),e.setActiveClass(e.activeClass))}).catch(function(t){console.log(t)}).finally(function(t){e.loadingBaseClass=!1,e.addEventToElement()})):this.listClassPendingFilter=[]},checkClassInfo:function(t){var e=this;if(this.resetData(),this.dataClassInfo=t||this.classInfo,this.dataClassInfo&&We()(this.dataClassInfo).length>0){if(this.syllabus=this.dataClassInfo.class.tp_id,this.classId=this.dataClassInfo.class.id,this.dataClassInfo.class.curator&&(this.personInChange={id:this.dataClassInfo.class.curator.user_id,name:this.dataClassInfo.class.curator.username+" - "+this.dataClassInfo.class.curator.fullname+" - "+this.dataClassInfo.class.curator.position_name+" - "+this.dataClassInfo.class.curator.station_name}),this.dataClassInfo.class.lecturers){var a=[];this.dataClassInfo.class.lecturers.forEach(function(t){a.push({id:t.user_id,name:t.username+" - "+t.fullname+" - "+t.position_name+" - "+t.station_name})}),this.detailClass.lecturer=a,this.createClass.lecturer=a.map(function(t){return t.id}).toString()}this.detailClass.station_id=this.dataClassInfo.class.station_id,this.listPosition=[],this.listStation=[],this.dataClassInfo.listStudents.forEach(function(t){e.listStudents.push({id:t.user_id,name:t.fullname,image_profile:t.image_profile,username:t.username,position:t.position,station:t.station,position_id:t.position_id,station_id:t.station_id,in_config_tp:t.in_config_tp}),e.listPosition.push(t.position_id),e.listStation.push(t.station_id)}),this.listStudentsTemp=this.listStudents,this.dataClassInfo.class.periods&&(this.classDetail.splice(0,this.classDetail.length),this.dataClassInfo.class.periods.forEach(function(t){e.classDetail.push({id:t.ErpTpClassPeriod.id,tpPeriodId:t.ErpTpClassPeriod.tp_period_id,content:t.ErpTpPeriod.content,date:t.ErpTpClassPeriod.start_time?e.formatDate(t.ErpTpClassPeriod.start_time,"YYYY-MM-DDTH:MM"):null,organ:t.ErpTpClassPeriod.form,status:t.ErpTpClassPeriod.status,link:t.ErpTpClassPeriod.link,isDisableOrgan:e.disableForm(t.ErpTpPeriod.form),lecturers:t.ErpTpClassPeriod.teacher_id,stationId:t.Station.id,fileClass:[],fileSyllabus:[],files:t.file,fileCreators:[],order_number:t.ErpTpPeriod.order_number})}))}},action:function(t,e){if("new-file"===t.action){this.classDetail[e-1].fileClass.push(t.data.file);var a=this.classDetail[e-1].id,n=this.listFileAdd.find(function(t){return t.class_period_id===a},{classPeriodId:a});n?n.files.push(t.data.file):this.listFileAdd.push({class_period_id:a,files:[t.data.file]}),this.classDetail[e-1].files.push(t.data.file)}if("delete-file"===t.action){var i=this.classDetail[e-1].fileSyllabus.length;this.classDetail[e-1].fileClass.splice(t.data.idx,1),this.classDetail[e-1].files.splice(t.data.idx-i,1)}"close"===t.action&&this.$bvModal.hide("edit-documents")},showModalViewDoc:function(t){this.periodDocuments.order_number=t.order_number,this.periodDocuments.files=t.files,this.$bvModal.show("view-docs")},getTrainingProgram:function(t){var e=this;return l()(o.a.mark(function a(){var n,i,s,r;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n={syllabus:t},null===t&&void 0===t||"confirm"===e.type||(e.hideClass=!0),e.hideStudent=!1,e.lessonInfoVisible=!0,e.documentInfoVisible=!0,a.next=7,ca.a.getTrainingProgram(n);case 7:i=a.sent,s=i.data,e.syllabusDetail=s.data,e.numPeriod=e.syllabusDetail.tpPeriod.length||1,e.edit?e.classInfo&&We()(e.classInfo).length>0&&e.classInfo.class.id&&e.getStudentByClassId(e.classInfo.class.id):(r=[],e.syllabusDetail&&e.syllabusDetail.tpPeriod.forEach(function(t){r.push({tpPeriodId:t.id,lecturers:e.classInfo.class.lecturer,date:null,time:null,fileClass:[],originCount:t.files?t.files.length:0,organ:"all"!==t.form?t.form:null,stationId:e.classInfo.class.station_id,isDisableOrgan:e.disableForm(t.form),order_number:t.ErpTpPeriod.order_number})}),e.classDetail=r),e.changeNumberStudent();case 13:case"end":return a.stop()}},a,e)}))()},disableForm:function(t){return"all"!==t},checkData:function(){return this.syllabus?this.personInChange&&this.personInChange.id||"confirm"===this.type||"pending"===this.classInfo.class.status?this.createClass?{status:!0}:{status:!1,message:"Bạn phải điền đầy đủ thông tin các buổi học!"}:{status:!1,message:"Bạn phải chọn người phụ trách!"}:{status:!1,message:"Bạn phải chọn chương trình học!"}},addClass:function(){var t=this,e=this.checkData();if(!1!==e.status){var a=new FormData;a.append("syllabus",this.syllabus),a.append("syllabusCode",this.syllabusDetail.code),a.append("pic",this.personInChange.id),a.append("listStudents",sa()(this.listStudents)),a.append("classDetail",sa()(this.classDetail)),a.append("createClass",sa()(this.createClass)),this.disabledConfirm=!0,this.$startLoading(),ca.a.addClass(a).then(function(e){e.data.success?(t.$emit("updateOk"),Me.a.showMessage("Tạo lớp học thành công.","success"),t.hideModal()):Me.a.showMessage(e.data.message,"warning")}).catch(function(t){console.log(t)}).then(function(){t.disabledConfirm=!1,t.$stopLoading()})}else Me.a.showMessage(e.message,"warning")},formDataAppendObject:function(t,e,a){var n,i;for(n in e)i=a?a+"["+n+"]":n,"object"===na()(e[n])?this.formDataAppendObject(t,e[n],i):t.append(i,e[n])},updateClass:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.disabledConfirm=!0,a=new FormData,t.detailClass.station_id&&a.append("station_id",t.detailClass.station_id),a.append("class_id",t.dataClassInfo.class.id),t.listStudentAdd.forEach(function(t){a.append("add_student_ids[]",t.id)}),t.listStudentRemove.forEach(function(t,e){ea()(t).forEach(function(t){var n=Ze()(t,2),i=n[0],s=n[1];["id","note"].includes(i)&&a.append("remove_students["+e+"]["+i+"]",s)})}),t.listFileRemove.forEach(function(t){a.append("remove_files[]",t)}),t.listFileAdd.forEach(function(t,e){ea()(t).forEach(function(t){var n=Ze()(t,2),i=n[0],s=n[1];"files"===i?s.forEach(function(t,n){a.append("add_files["+e+"]["+i+"]["+n+"]",t)}):a.append("add_files["+e+"]["+i+"]",s)})}),t.detailClass.lecturer.forEach(function(t){a.append("lecturers_ids[]",t.id)}),e.prev=9,e.next=12,Ra(a);case 12:(n=e.sent).data.success?(t.$emit("updateOk"),t.hideModal()):Me.a.showMessage(n.data.message,"warning"),e.next=21;break;case 16:if(e.prev=16,e.t0=e.catch(9),422!=+e.t0.response.status){e.next=20;break}return e.abrupt("return",Me.a.showMessage(e.t0.response.data.message,"warning"));case 20:console.log(e.t0);case 21:return e.prev=21,t.disabledConfirm=!1,t.$stopLoading(),e.finish(21);case 25:case"end":return e.stop()}},e,t,[[9,16,21,25]])}))()},confirmClass:function(){var t=this,e={classId:this.dataClassInfo.class.id};ca.a.confirmClass(e).then(function(e){e.data.success?(Me.a.showMessage(e.data.message,"success"),t.$emit("updateOk"),t.hideModal()):(e.data.error_code&&"not_have_student"===e.data.error_code&&t.$emit("removeAllStudentOfClass",t.dataClassInfo.class.id),Me.a.showMessage(e.data.message||"Gặp lỗi khi xác nhận lớp học !","warning"))}).catch(function(t){console.log(t)}).then(function(){t.$bvModal.hide("modal-create-class"),t.loading=!1})},hideModal:function(){this.$bvModal.hide("modal-create-class"),this.detailClass={nameClass:null,regionClass:null,countStudentClass:0,show:!1,open:!1,station_id:null,lecturer:null},this.lessonInfoVisible=!1,this.documentInfoVisible=!1,this.createClass.stationId=null,this.createClass.lecturer=null,this.handleSelectedStation(null),this.syllabusDetail=null,this.resetData()},handleSyllabusSelected:function(t){this.syllabusFilter.id=t?t.id:"",this.getClassListWaitingConfirm(!0)},handleUserSelected:function(t){this.syllabusFilter.userId=t?t.id:"",this.getClassListWaitingConfirm(!0)},setActiveClass:function(t){var e=this.listClassPendingFilter.find(function(e){return+e.class_id==+t});e&&this.selectedClass(e)},selectedClass:function(t){this.lessonInfoVisible=!0,this.documentInfoVisible=!0,this.classId=t.class_id,this.detailClass.countStudentClass=t.numberStudent,this.detailClass.nameClass=t.content,this.detailClass.regionClass=t.province,this.detailClass.show=!0,this.detailClass.open=!0},handleSelectedStation:function(t){this.resetFilter=!this.resetFilter,this.createClass.stationId=t?t.id:"",this.detailClass.station_id=t?t.id:"",this.totalPage=0,this.currentPage=1,this.chooseStudents(),"confirm"===this.type&&(this.resetDataAfterSelectStation(),this.createClass.stationId&&this.getClassListWaitingConfirm(!0))},handleUnselectStation:function(){this.detailClass.station_id=null},inputLecturer:function(t){this.detailClass.lecturer=t,this.createClass.lecturer=t.map(function(t){return t.id}).toString()},handleSelectedStudent:function(t){this.student=t?t.name:null,this.studentId=t?t.id:null},addStudent:function(){var t=this;if(this.resetStudentSelected=!this.resetStudentSelected,this.student){var e=+this.studentId,a=this.listStudentRemove.find(function(t){return+t.id===e});if(this.listStudentRemove=this.listStudentRemove.filter(function(t){return+t.id!==e}),void 0!==a)return this.listStudents.push(a),void this.changeNumberStudent();this.$startLoading(),Ua({class_id:this.classId,student_id:this.studentId}).then(function(e){if(e.data.success){var a=t.student.split(" - "),n={id:t.studentId,name:a[1],username:a[0],station:a[3],position:a[2],station_id:null,position_id:null,image_profile:null,in_config_tp:1};t.listStudents.push(n),t.listStudentAdd.push(n),t.listClassPendingFilter.map(function(e){+e.class_id==+t.classId&&(e.numberStudent=parseInt(e.numberStudent)+1)})}else Me.a.showMessage(e.data.message),console.log(e.data.message)}).catch(function(t){console.log(t)}).finally(function(e){t.$stopLoading(),t.student=null,t.studentId=null,t.disabledConfirm=!1,t.numberStudent=t.listStudents.length})}},confirmDeleteStudent:function(t){this.listStudentsTemp.find(function(e){return e.id===t})?(this.currentStudentId=t,this.$bvModal.show("modal-note-delete-student")):(this.listStudents=this.listStudents.filter(function(e){return e.id!==t}),this.listStudentAdd=this.listStudentAdd.filter(function(e){return+e.id!==t}))},deleteStudent:function(t){var e=this;this.listStudents.splice(t,1),this.numberStudent=this.listStudents.length,this.listClassPendingFilter.map(function(t){return t.class_id===e.classId&&(t.numberStudent=parseInt(t.numberStudent)-1),t})},formatDate:function(t,e){return Ye()(t||null).format(e||"DD-MM-YYYY")},resetData:function(){this.syllabus=null,this.personInChange={},this.classDetail=[],this.listStudents=[],this.student=null,this.classId=null,this.studentId=null,this.currentStudentId=null,this.listStudentRemove=[],this.listStudentAdd=[],this.listFileAdd=[],this.listFileRemove=[]},checkIsFileClass:function(t,e){return e>=t.fileSyllabus.length},previewImageRender:function(){return Da.DEFAULT_THUMBNAIL},chooseStudents:function(){var t=this;if(!this.edit){var e={tpId:this.syllabus,class:this.classDetail};this.loadingStudent=!0,ca.a.getStudentOfTrainingProgram(e).then(function(e){e.data.success&&(t.listStudents=[],Array.isArray(e.data.data)&&e.data.data.forEach(function(e){t.listStudents.push({id:e.user_id,name:e.fullname,username:e.username,station:e.station_name,position:e.position_name,station_id:e.station_id,position_id:e.position_id,image_profile:e.image_profile}),t.listPosition.push(e.position_id),t.listStation.push(e.station_id)})),t.loadingStudent=!1}).catch(function(t){console.log(t)}).finally(function(){t.loadingStudent=!1})}},getStudentByClassId:function(t){var e=this;this.listPosition=[],this.listStation=[],this.hideStudent=!1,t&&ca.a.getStudentByClassId({classId:t}).then(function(t){t.data.success&&(e.listStudents=[],Array.isArray(t.data.data)&&t.data.data.forEach(function(t){e.listPosition.push(t.position_id),e.listStation.push(t.station_id),e.listStudents.push({id:t.user_id,name:t.fullname,username:t.username,station:t.station_name,position:t.position_name,station_id:t.station_id,position_id:t.position_id,image_profile:t.image_profile,in_config_tp:t.in_config_tp})}))}).catch(function(t){console.log(t)})},toggleChoose:function(){this.detailClass.open=!this.detailClass.open},showModalCreateClass:function(){this.$emit("showModalCreateClass",{stationId:this.createClass.stationId})},selectFilterStudent:function(t,e){var a=this;t?(this.studentFilter[e]=[],t.forEach(function(t){a.studentFilter[e].push(+t.id,t.name)})):this.studentFilter[e]=[],this.filterStudent()},filterStudent:function(){var t=this;this.listStudentFilter=this.listStudents.filter(function(e){var a=!t.studentFilter.positions||!t.studentFilter.positions.length||t.studentFilter.positions.includes(e.position_id)||t.studentFilter.positions.includes(e.position),n=!t.studentFilter.stations||!t.studentFilter.stations.length||t.studentFilter.stations.includes(e.station_id)||t.studentFilter.stations.includes(e.station);return a&&n})},changeFileByPeriod:function(t){this.tmpFileClass=this.classDetail[t-1].fileClass,this.tmpFileSyllabus=this.classDetail[t-1].fileSyllabus},changeNumberStudent:function(){var t=this.listStudents&&this.listStudents.length;this.disabledConfirm=0===t,this.listStudents&&this.listStudents.length>0&&(this.disabledConfirm=!1),this.numberStudent=t},resetDataAfterSelectStation:function(){this.classId=null,this.numberStudent=0,this.listStudents=[],this.hideStudent=!0},checkHideStudent:function(){var t=this,e=!0;return this.listClassPendingFilter.filter(function(a){parseInt(t.classId)===parseInt(a.class_id)&&(e=!1)}),e},getClassByUserId:function(t){var e=this;t?ca.a.getClassByUserId({student_id:t}).then(function(t){if(t.data.success){var a=t.data.data;for(var n in a)a[n]=a[n].toString();e.syllabusFilter.classIds=a}}).catch(function(t){console.log(t)}).finally(function(){e.filterClass()}):this.filterClass()}}};var nn=function(t){a("gqte")},sn=Object(y.a)(an,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{class:"modal-custom",attrs:{"modal-class":"modal-custom-1024",id:t.id,"header-class":"justify-content-center header-modal-custom header-modal-educate","hide-footer":"",static:""},on:{hidden:t.hideModal,shown:function(e){return t.showModal()}}},[a("h4",{staticClass:"w-100 m-0 text-center",attrs:{slot:"modal-header"},slot:"modal-header"},[t._v(t._s(t.title))]),t._v(" "),a("div",{staticClass:"p-3"},[a("div",{staticClass:"d-flex align-items-center justify-content-between mb-3"},[a("div",[a("b",[t._v("Địa điểm")])]),t._v(" "),a("div",{staticClass:"col-10 px-0 z-1000"},[a("SingleSelectStation",{ref:"singleSelectStation",staticClass:"multiselect-ghtk",attrs:{placeholder:"Địa điểm tổ chức lớp học",isActive:!0,stationId:t.detailClass.station_id},on:{select:function(e){return t.handleSelectedStation.apply(void 0,arguments)},remove:t.handleUnselectStation}})],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.hideClass,expression:"!hideClass"}],staticClass:"list-class mb-2"},[a("div",{staticClass:"d-flex align-items-center justify-content-between"},[a("div",[a("b",[t._v("Lớp học")])]),t._v(" "),a("div",{staticClass:"d-flex box-filter z-100 col-10 px-0 justify-content-between"},[a("div",{staticClass:"filter-training"},[a("MultiSelectSyllabus",{staticClass:"mr-2 select-class",attrs:{"custom-class":"multiselect-ghtk multiselect-no-horizontal",placeholder:"Lọc chương trình","auto-close":!0,reset:t.resetFilter,multiple:!1},on:{handleSyllabusSelected:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return t.handleSyllabusSelected.apply(void 0,n.concat(["syllabus"]))}},model:{value:t.syllabusFilter.id,callback:function(e){t.$set(t.syllabusFilter,"id",e)},expression:"syllabusFilter.id"}})],1),t._v(" "),a("div",{staticClass:"filter-student"},[a("SingleSelectUser",{attrs:{"custom-class":"multiselect-ghtk multiselect-no-horizontal",reset:t.resetFilter,placeholder:"Lọc học viên","status-id":t.userStatus,targetApi:"hrm"},on:{onChange:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return t.handleUserSelected.apply(void 0,n.concat(["student"]))}},model:{value:t.syllabusFilter.userId,callback:function(e){t.$set(t.syllabusFilter,"userId",e)},expression:"syllabusFilter.userId"}})],1),t._v(" "),a("b-btn",{staticClass:"btn-create-class",attrs:{variant:"outline-ghtk"},on:{click:t.showModalCreateClass}},[t._v("+ Thêm lớp học")])],1)]),t._v(" "),"confirm"===t.type?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingBaseClass,expression:"loadingBaseClass"}],ref:"infoClass",staticClass:"mt-2 mb-2 info-class mih-5re position-relative",attrs:{id:"infoClass"},on:{scroll:t.checkScroll}},t._l(t.listClassPendingFilter,function(e,n){return a("div",{key:n,staticClass:"base-info-class mr-2 cursor-pointer",class:parseInt(e.class_id)===parseInt(t.classId)?"border-ghtk":"",on:{click:function(a){return t.selectedClass(e)}}},[a("div",[a("b",[t._v(t._s(e.content)+" | "+t._s(e.numPeriod||0)+" buổi")])]),t._v(" "),a("div",[a("span",[t._v(t._s(e.numberStudent||0)+" học viên | ")]),t._v(" "),a("span",[e.modified?a("span",[t._v(t._s(t.formatDate(e.modified,"DD-MM-YYYY H:mm")))]):t._e()])])])}),0):t._e()]),t._v(" "),t.syllabusDetail&&!t.hideStudent?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingClassDetail,expression:"loadingClassDetail"}],staticClass:"position-relative mih-5re"},[a("div",{staticClass:"list-document mb-3"},[a("div",{staticClass:"document-info d-flex"},[t.classDetail?a("div",{staticClass:"profile-document"},[t._l(t.classDetail||[],function(e,n){return[0!==e.files.length?a("div",{key:"fileClass-"+n,staticClass:"profile-document__element"},[a("div",{staticClass:"document-type-desc"},[t._v("\n                    Tài liệu buổi "+t._s(n+1)+"\n                  ")]),t._v(" "),a("div",{staticClass:"num-img-extend"},[a("i",{staticClass:"icon ion-md-eye mr-2 cursor-pointer",on:{click:function(a){return t.showModalViewDoc(e)}}})]),t._v(" "),[a("span",[a("img",{staticClass:"image-document",attrs:{src:t.previewImageRender(),alt:"Tài liệu buổi "+n}})])]],2):t._e()]})],2):t._e()])]),t._v(" "),a("div",{staticClass:"d-flex align-items-center justify-content-between mb-3"},[a("div",[a("b",[t._v("Giảng viên")])]),t._v(" "),a("div",{staticClass:"col-10 px-0"},[a("MultiSelectUser",{attrs:{"custom-class":"multiselect-ghtk multiselect-no-horizontal",users:t.detailClass.lecturer,placeholder:"Giảng viên lớp học","status-id":t.userStatus},on:{input:function(e){return t.inputLecturer.apply(void 0,arguments)}}})],1)]),t._v(" "),t.syllabusDetail&&!t.hideStudent?a("div",{staticClass:"list-student"},[a("div",{staticClass:"mb-3 d-flex align-items-center justify-content-between mb-2"},[a("b",[t._v("Học viên | "+t._s(t.numberStudent))]),t._v(" "),a("div",{staticClass:"col-10 d-flex justify-content-between box-filter px-0"},[a("MultiSelectStation",{ref:"multiSelectStation",staticClass:"filter-input",attrs:{placeholder:"Kho",isActive:!0,listStation:t.listStation},on:{input:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return t.selectFilterStudent.apply(void 0,n.concat(["stations"]))}}}),t._v(" "),a("MultiSelectPosition",{ref:"multiSelectPosition",staticClass:"filter-input",attrs:{placeholder:"Vị trí","auto-close":!0,listPosition:t.listPosition},on:{handlePositionSelected:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return t.selectFilterStudent.apply(void 0,n.concat(["positions"]))}}}),t._v(" "),a("b-btn",{staticClass:"btn-create-class invisible",attrs:{variant:"outline-ghtk"}},[t._v("+ Thêm lớp học")])],1)]),t._v(" "),t.listStudents?a("div",[a("div",{staticClass:"info-student row mb-3 mh-25 overflow-auto"},t._l(t.listStudentFilter,function(e,n){return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingStudent,expression:"loadingStudent"}],key:n,staticClass:"col-4 d-flex mb-2 box-info-user"},[a("div",{staticClass:"student-box",class:t.dataClassInfo&&"pending"===t.dataClassInfo.class.status&&!e.in_config_tp?"student-not-in-config":""},[a("div",{staticClass:"avt-user mr-3"},[a("img",{attrs:{src:e.image_profile,alt:"avt",width:"30px"}})]),t._v(" "),a("div",{staticClass:"info-user"},[a("div",[a("b",[t._v(t._s(e.name)+" | "+t._s(e.username))])]),t._v(" "),a("div",[a("span",[t._v(t._s(e.position)+" - "+t._s(e.station))])])]),t._v(" "),a("div",{staticClass:"text-right flex-grow-1"},[a("i",{staticClass:"fas fa-times-circle text-danger cursor-pointer font-larger",on:{click:function(a){return t.confirmDeleteStudent(e.id)}}})])])])}),0),t._v(" "),a("div",{staticClass:"action-add-student mb-3"},[a("div",{staticClass:"d-flex row-modal mt-1"},[a("div",{staticClass:"w-100 mr-4"},[a("single-select-user",{attrs:{"custom-class":"multiselect-ghtk multiselect-no-horizontal",placeholder:"Chọn học viên",reset:t.resetStudentSelected,"status-id":t.userStatus,trainingSyllabusId:t.syllabus,targetApi:"hrm"},on:{select:t.handleSelectedStudent}})],1),t._v(" "),!t.classInfo.class||["happening","coming_up","pending"].includes(t.classInfo.class.status)?a("div",{staticClass:"w-19 text-right"},[a("b-btn",{staticClass:"btn-add-student",attrs:{variant:"outline-ghtk"},on:{click:function(e){return t.addStudent()}}},[t._v("+ Thêm học viên\n                ")])],1):t._e()])])]):t._e()]):t._e()]):t._e(),t._v(" "),t.syllabusDetail&&!t.hideStudent?a("div",{staticClass:"text-center row-modal-bottom"},[a("b-btn",{staticClass:"btn-add-class w-9rem",attrs:{variant:"ghtk",disabled:t.disabledConfirm},on:{click:function(e){t.edit?t.updateClass():t.addClass()}}},[t._v("\n          Xác nhận\n        ")])],1):t._e()])]),t._v(" "),a("b-modal",{attrs:{id:"view-docs","title-class":"font-weight-bold w-100","header-class":"text-center","modal-class":"modal-md","hide-footer":""}},[a("h4",{staticClass:"w-100 m-0",attrs:{slot:"modal-header"},slot:"modal-header"},[t._v("Tài liệu học buổi "+t._s(t.periodDocuments.order_number))]),t._v(" "),a("ViewDocument",{attrs:{lessons:t.periodDocuments.files}})],1),t._v(" "),a("ModalNoteDeleteStudent",{on:{deleteStudent:t.noteDeleteStudent}})],1)},[],!1,nn,"data-v-cc0d4954",null).exports,on=a("gRE1"),rn=a.n(on),ln={name:"modal-confirm-class",components:{},props:["classAcademyInfoId","masterId","classId","periodStatus"],data:function(t){return{note:null}},created:function(){},computed:{},watch:{},methods:{addAcademyNote:function(){var t=this,e={id:this.classAcademyInfoId,note:this.note,masterId:this.masterId||null,classId:this.classId||null,periodStatus:this.periodStatus||null};ca.a.addAcademyNote(e).then(function(e){e.data.success?(Me.a.showMessage(e.data.message,"success"),t.$bvModal.hide("modal-academy-note"),t.$emit("refreshPage"),t.note=null):Me.a.showMessage(e.data.message||"Gặp lỗi khi thêm ghi chú!","warning")}).catch(function(t){console.log(t)}).then(function(){t.loading=!1})},hideModal:function(){this.$bvModal.hide("modal-academy-note")}}};var cn=function(t){a("o5n9")},dn=Object(y.a)(ln,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{class:"modal-custom",attrs:{size:"sm",id:"modal-academy-note",centered:"",title:"Ghi chú","hide-header":"","hide-footer":"",static:""},on:{hidden:t.hideModal}},[a("div",{staticClass:"modal-header-custom text-center"},[a("span",{staticClass:"text-header"},[t._v("Ghi chú")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.hideModal()}}},[t._v("×")])]),t._v(" "),a("div",{staticClass:"class-period",attrs:{title:"Ghi chú"}},[a("div",[a("b-form-textarea",{attrs:{id:"textarea",placeholder:"Nhập ghi chú",rows:"5","max-rows":"6"},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}})],1)]),t._v(" "),a("div",{staticClass:"text-center mt-1 mb-1"},[a("b-btn",{staticClass:"btn-roll-up-student",attrs:{variant:"ghtk"},on:{click:function(e){return t.addAcademyNote()}}},[t._v("Lưu")])],1)])],1)},[],!1,cn,"data-v-0e406e5a",null).exports,un={name:"ModalAddStudent",components:{SingleSelectStation:oa.a,SingleSelectUser:Ie.a},props:["classId","classPeriodId","syllabus"],data:function(t){return{loading:!1,listStudents:[],statusId:3}},created:function(){},computed:{},watch:{},methods:{addStudent:function(){var t=this;this.loading=!0;var e={class_id:this.classId,class_period_id:this.classPeriodId,user_ids:this.listStudents.map(function(t){return t.id})};$a(e).then(function(e){var a=e.data,n=a.success,i=a.message;n?(Me.a.showMessage("Thêm học viên vào lớp thành công.","success"),t.hideModal(),t.$emit("refreshPage")):Me.a.showMessage(i,"warning")}).catch(function(t){t.response&&t.response.data&&t.response.data.message?Me.a.showMessage(t.response.data.message,"error"):Me.a.showMessage("Có lỗi xảy ra, vui lòng thử lại!","error")}).then(function(){t.loading=!1,t.$stopLoading()})},handleSelectedStudent:function(t){var e=this;this.$startLoading(),Ua({class_id:this.classId,student_id:t.id}).then(function(a){if(a.data.success){var n=t.name.split(" - ");e.listStudents.push({id:t.id,name:n[1],username:n[0],station:n[3],position:n[2]})}else Me.a.showMessage(a.data.message),console.log(a.data.message)}).catch(function(t){console.log(t)}).finally(function(t){e.$stopLoading()})},deleteStudent:function(t){this.listStudents.splice(t,1)},hideModal:function(){this.$bvModal.hide("modal-add-student"),this.listStudents=[]}}};var hn=function(t){a("H5Ae")},pn=Object(y.a)(un,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{class:"modal-custom",attrs:{id:"modal-add-student",title:"Thêm học viên","header-class":"justify-content-center header-modal-custom",size:"lg","hide-footer":"",static:""},on:{hidden:t.hideModal}},[a("div",{staticClass:"program",attrs:{id:"student-info"}},[t._l(t.listStudents,function(e,n){return a("div",{key:n,staticClass:"d-flex row-modal"},[a("div",{staticClass:"w-45"},[a("span",[t._v(t._s(e.name)+" | "+t._s(e.username))])]),t._v(" "),a("div",{staticClass:"w-30"},[a("span",[t._v("Kho: "+t._s(e.station))])]),t._v(" "),a("div",{staticClass:"w-20"},[a("span",[t._v("Vị trí: "+t._s(e.position))])]),t._v(" "),a("div",{staticClass:"w-5 text-right text-danger font-larger"},[a("i",{staticClass:"fa fa-times-circle cursor-pointer",on:{click:function(e){return t.deleteStudent(n)}}})])])}),t._v(" "),a("div",{staticClass:"d-flex row-modal mt-1"},[a("div",{staticClass:"w-100"},[a("single-select-user",{attrs:{"custom-class":"multiselect-ghtk multiselect-no-horizontal",placeholder:"Chọn học viên",classId:t.classId,statusId:t.statusId,"reset-after":!0,trainingSyllabusId:t.syllabus,targetApi:"hrm"},on:{select:t.handleSelectedStudent}})],1)])],2),t._v(" "),a("div",{staticClass:"text-center mb-2 row-modal-bottom"},[a("b-btn",{staticClass:"btn-submit",attrs:{variant:"ghtk",disabled:t.loading},on:{click:function(e){return t.addStudent()}}},[t._v("Xác nhận")])],1)])],1)},[],!1,hn,"data-v-14531704",null).exports,mn={name:"modal-attendance",props:{modalId:{default:"modal-attendance"},customClass:{default:""},classId:{default:null},classAcademyInfoId:{default:null},masterId:{default:null},checkinStatus:{default:null},classDetail:{default:null}},data:function(t){return{note:null}},methods:{submit:function(){"yes"===this.checkinStatus?this.cancelRollupStudent():this.rollUpStudent()},rollUpStudent:function(){var t=this,e={class_academy_info_id:this.classAcademyInfoId};ca.a.rollUpStudent(e).then(function(e){e.data.success?(t.$emit("actionAttendance",{action:"rollUpStudent",class_period_id:t.classAcademyInfoId,master_id:t.masterId}),t.$bvModal.hide(t.modalId),Me.a.showMessage(e.data.message,"success")):Me.a.showMessage(e.data.message||"Gặp lỗi khi điểm danh !","warning")}).catch(function(t){console.log(t)}).then(function(){t.loading=!1})},cancelRollupStudent:function(){var t=this,e={class_academy_info_id:this.classAcademyInfoId};ca.a.cancelRollupStudent(e).then(function(e){e.data.success?(t.$emit("actionAttendance",{action:"cancelRollupStudent",class_period_id:t.classAcademyInfoId,master_id:t.masterId}),t.$bvModal.hide(t.modalId),Me.a.showMessage(e.data.message,"success")):Me.a.showMessage(e.data.message||"Gặp lỗi khi hủy điểm danh !","warning")}).catch(function(t){console.log(t)}).then(function(){t.loading=!1})}}};var fn=function(t){a("Vt6y")},gn=Object(y.a)(mn,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{class:t.customClass,attrs:{size:"sm",id:t.modalId,"header-class":"text-center justify-content-center d-flex modal-attendance",title:"yes"===t.checkinStatus?"Hủy điểm danh":"Điểm danh",static:"",centered:"","hide-footer":""},on:{hidden:function(e){return t.$bvModal.hide(t.modalId)}}},[a("div",{staticClass:"text-black text-nowrap"},[t._v("\n    Bạn có muốn "+t._s("yes"===t.checkinStatus?"hủy":"")+" điểm danh học viên này không?\n  ")]),t._v(" "),a("div",{staticClass:"text-center mt-1 mb-1"},[a("b-btn",{staticClass:"btn-roll-up-student rounded mt-2",staticStyle:{width:"7rem"},attrs:{variant:"ghtk"},on:{click:t.submit}},[t._v("Đồng ý")])],1)])},[],!1,fn,"data-v-16fd928c",null).exports,vn={name:"ModalUserTest",components:{},props:{userTestId:{default:function(){return null}},id:{default:function(){return"modal-user-test"}}},data:function(){return{loading:!1,data:[]}},created:function(){},computed:{},watch:{},methods:{formattedText:function(t){return t?t.replace(/\n/g,"</br>"):""},getData:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.loading=!0,ca.a.getUserTest({user_test_id:t.userTestId}).then(function(e){e.data.success?t.data=e.data.data:Me.a.showMessage(e.data.message||"Gặp lỗi khi lấy thông tin bài kiểm tra !","warning")}).catch(function(t){console.log(t)}).finally(function(){t.loading=!1});case 2:case"end":return e.stop()}},e,t)}))()},hideModal:function(){this.data=[],this.$bvModal.hide(this.id)}}};var _n=function(t){a("SfeN")},bn=Object(y.a)(vn,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{class:"modal-custom",attrs:{id:t.id,title:"Bài kiểm tra","header-class":"justify-content-center header-modal-custom",size:"xl","hide-footer":""},on:{hidden:t.hideModal,shown:t.getData}},[a("div",{staticClass:"wrapper exam"},[t.data.multiple_choice&&t.data.multiple_choice.questions&&t.data.multiple_choice.questions.length>0?a("div",{staticClass:"exam__element multiple-choice"},[a("div",{staticClass:"exam__element__title"},[a("div",{staticClass:"title"},[t._v("\n                      Phần trắc nghiệm\n                    ")]),t._v(" "),t.data.multiple_choice&&t.data.multiple_choice.total_score&&t.data.multiple_choice.total_score_config?a("div",{staticClass:"score"},[t._v("\n                      "+t._s(t.data.multiple_choice.total_score+"/"+t.data.multiple_choice.total_score_config)+"\n                    ")]):t._e()]),t._v(" "),t.data.multiple_choice&&t.data.multiple_choice.questions&&t.data.multiple_choice.questions.length>0?a("div",{staticClass:"exam__element__content"},t._l(t.data.multiple_choice.questions,function(e,n){return a("div",{staticClass:"question"},[a("div",{staticClass:"content"},[a("span",{staticClass:"question__content"},[t._v("Câu "+t._s(n+1)+": ")]),t._v(" "),a("span",{domProps:{innerHTML:t._s(t.formattedText(e.content))}})]),t._v(" "),a("div",{staticClass:"answers"},t._l(e.answers,function(i,s){return a("div",{key:n+"-"+s,staticClass:"answer"},["selected"===i.selected?a("div",{staticStyle:{display:"inline-block"}},["correct"===i.is_correct?a("div",[a("div",{staticClass:"checkbox-round border",class:{"border-radius-ghtk-4":"multiple"===e.type}},[a("div",{staticClass:"checked correct",class:{"border-radius-ghtk-4":"multiple"===e.type}},["multiple"===e.type?a("div",{staticClass:"text-center text-white line-height-1-rem"},[t._v("✔")]):t._e()])])]):a("div",[a("div",{staticClass:"checkbox-round",class:{"border-radius-ghtk-4":"multiple"===e.type}},[a("div",{staticClass:"checked wrong",class:{"border-radius-ghtk-4":"multiple"===e.type}},["multiple"===e.type?a("div",{staticClass:"text-center text-white line-height-1-rem"},[t._v("✖")]):t._e()])])])]):a("div",{staticClass:"checkbox-round",class:{"border-radius-ghtk-4":"multiple"===e.type}}),t._v(" "),a("div",{staticStyle:{display:"inline-block","padding-left":"5px"}},[t._v("\n                                  "+t._s(String.fromCharCode(s+65)+". ")+" "),a("span",{domProps:{innerHTML:t._s(t.formattedText(i.content))}})])])}),0)])}),0):t._e()]):t._e(),t._v(" "),t.data.essay&&t.data.essay.questions&&t.data.essay.questions.length>0?a("div",{staticClass:"exam__element essay"},[a("div",{staticClass:"exam__element__title"},[a("div",{staticClass:"title"},[t._v("Phần tự luận")]),t._v(" "),a("div",{staticClass:"score"},[t._v(t._s(t.data.essay.total_score+"/"+t.data.essay.total_score_config))])]),t._v(" "),a("div",{staticClass:"exam__element__content"},t._l(t.data.essay.questions,function(e,n){return a("div",{staticClass:"question"},[a("div",{staticClass:"content"},[a("span",{staticClass:"question__content"},[t._v("Câu "+t._s(n+1)+": ")]),t._v(" "),a("span",{domProps:{innerHTML:t._s(t.formattedText(e.content))}})]),t._v(" "),e.user_answer?a("div",[a("div",{staticClass:"answer_essay"},[a("span",{domProps:{innerHTML:t._s(t.formattedText(e.user_answer.answer))}})]),t._v(" "),e.user_answer.score?a("div",[a("div",{staticClass:"score"},[a("span",[t._v("Điểm số:")]),t._v(" "),a("span",[t._v(t._s(e.user_answer.score))])])]):t._e(),t._v(" "),e.user_answer.comment?a("div",{staticClass:"comment"},[a("span",{staticClass:"title"},[t._v("Nhận xét:")]),t._v(" "),a("span",[t._v(t._s(e.user_answer.comment))])]):t._e()]):a("div",{staticClass:"answer_essay"},[a("span",{staticClass:"no-answer"},[t._v("Không có câu trả lời từ học viên")])])])}),0)]):t._e()])])],1)},[],!1,_n,"data-v-5cdb2bc6",null).exports,yn=a("SLMx"),Cn=a("NHnr"),wn={name:"list-academy",components:{ModalAcademyNote:dn,ModalAttendance:gn,ModalAddStudent:pn,pdf:_a.a,ModalUserTest:bn},props:{classDetail:{default:null},editableTag:{default:!0},duty:{default:null},triggerClickBtnSearch:{default:!1},triggerRollUpStudent:{default:!1},triggerCancelRollupStudent:{default:!1},dataAttendance:{default:null},dataCancelAttendance:{default:null},studentFilter:{default:null}},data:function(){return{STATUS:{ACTIVE:1,INACTIVE:0},tags:[],masterId:null,classId:null,permissionHr:!1,permissionVh:!1,permissionIt:!1,currComment:"",currentScore:0,userTestId:null,studentDetailId:"studentDetailId",dataGetListStudent:{class_id:null,class_period_id:null,page:0,limit:20},stopLoadData:!1,isLoading:!1,listStudents:[]}},created:function(){this.allowPermissionAction(),Cn.eventBus.$on("updateScore",this.updateScore),this.getListStudents()},watch:{classDetail:function(t,e){this.$refs[this.studentDetailId].scrollTop=0,this.dataGetListStudent.page=0,this.stopLoadData=!1,this.listStudents=[],this.getListStudents()},triggerRollUpStudent:function(t,e){this.changeCheckinStatus("yes")},triggerCancelRollupStudent:function(t,e){this.changeCheckinStatus("no")}},computed:{helper:function(){return Me.a}},destroyed:function(){Cn.eventBus.$off("updateScore",this.updateScore)},methods:{changeCheckinStatus:function(t){for(var e=0;e<We()(this.listStudents).length;e++){var a=this.listStudents[e];if(a.master_id===this.dataAttendance.master_id)for(var n=0;n<We()(a.period).length;n++){if(a.period[n].id===this.dataAttendance.class_period_id){this.listStudents[e].period[n].checkin_status=t;break}}}},setValueGetListStudent:function(t){this.dataGetListStudent.class_id=t.class.id,this.dataGetListStudent.class_period_id=t.period.id,this.dataGetListStudent.page++},retest:function(t){var e=this;return l()(o.a.mark(function a(){var n,s;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,e.loading=!0,"completed"!==e.classDetail.class.status){a.next=5;break}return Me.a.showMessage("Không gửi được bài kiểm tra do đã hoàn thành!"),a.abrupt("return");case 5:return(n=i()({},e.classDetail)).listStudents=n.listStudents.filter(function(e){return+e.user_id==+t}),n.type="retest",a.next=10,ca.a.senMessageTest(n);case 10:(s=a.sent).data.success&&e.$emit("refreshPage"),Me.a.showMessage(s.data.message,s.data.success?"success":"warn"),a.next=18;break;case 15:a.prev=15,a.t0=a.catch(0),Me.a.showMessage("Không lấy được dữ liệu!","warn");case 18:return a.prev=18,e.loading=!1,a.finish(18);case 21:case"end":return a.stop()}},a,e,[[0,15,18,21]])}))()},testResult:function(t,e){var a=+e+"/10";return t&&"multiple_choice"!==t.type_test&&1!==t.is_graded&&(a="Chưa chấm"),a},showRetestBtn:function(t){return"finished"!==t.status_period&&t.can_resend_test},showUserTest:function(t){this.userTestId=t,this.$bvModal.show("modal-user-test_"+this.classDetail.class.id)},openLink:function(t){window.open(t,"_blank")},triggerInputNote:function(t,e){var a=null,n=null;if("hide"===t&&(a="edit_note_"+e,n="note_"+e),"show"===t){n="edit_note_"+e,a="note_"+e;var i=document.getElementById("input_note_"+e);this.$nextTick(function(){return i.focus()})}var s=document.getElementById(a),o=document.getElementById(n);s.style.display="none",o.style.display="block"},setColorScore:function(t){if(t<8)return"colorRed"},refreshPage:function(){this.$emit("refreshPage")},showModalAddStudent:function(t,e,a){this.$emit("action",{action:"showModalAddStudent",classId:t,periodId:e,tpId:a})},showModalDeleteAcademy:function(t,e,a){this.$emit("action",{action:"showModalDeleteAcademy",classId:t,userId:e,masterId:a})},showModalMark:function(t,e,a,n,i){this.$emit("action",{action:"showModalMark",userTestId:a,fullName:t,idClass:e,idStudent:n,idPeriod:i})},updateScore:function(t){if(t.hasOwnProperty("idStudent")&&t.hasOwnProperty("idPeriod")&&t.hasOwnProperty("totalScore")&&t.hasOwnProperty("userTestId")){var e=t.idStudent,a=t.idPeriod,n=t.userTestId,i=t.totalScore;this.listStudents[e]&&this.listStudents[e].period[a]&&this.listStudents[e].period[a].user_test&&+this.listStudents[e].period[a].user_test.user_test_id==+n&&(this.listStudents[e].period[a].score=i,this.listStudents[e].period[a].user_test.is_graded=1)}},getClassPeriod:function(t,e){var a="text-white period-number bg-period-number-active lesson-information",n=" bg-period-number-dis-active";return t.can_edit_checkin&&(a+=" cursor-pointer"),"finished"===e&&(n=1===parseInt(t.passed)?" bg-period-number-active":" bg-period-number-fail"),"finished"!==e&&"yes"===t.checkin_status&&(n=" bg-period-number-active"),a+=n},getStatusPeriodOfStudent:function(t,e,a){if(+e.order>=a){if("yes"===t.checkin_status)return"Có mặt";if("no"===t.checkin_status||null===t.checkin_status)return+e.order===a&&"finished"!==e.status?"":"Vắng"}return""},addClassShowTooltip:function(t,e,a){if(+e.order===a&&"finished"!==e.status&&"coming_up"!==e.status)return t.checkin_status,"show-tooltip"},getTitleTooltip:function(t,e,a,n){if(+a.order<n||+t===this.STATUS.INACTIVE)return"";if(+a.order===n){if("finished"!==a.status)return"yes"===e.checkin_status?"Click để bỏ điểm danh học viên":"Click để điểm danh cho học viên";if("yes"!==e.checkin_status||e.score<8||!e.score)return""}return+a.order>n&&("yes"!==e.checkin_status||e.score<8||e.score),""},showIcon:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"inline-block";document.getElementById(t).style.display=e},rollUpStudent:function(t,e,a,n){this.$emit("action",{action:"rollUpStudent",classId:t,masterId:e,checkinStatus:a,classDetail:n})},validateBtn:function(t,e,a,n){if(!a)return!1;if(e.length>0){var i=e.filter(function(e){return+e.ErpTpClassPeriod.tp_period_id==+t.user_test.tp_period_id});if(i[0]&&i[0].ErpTpClassPeriod&&"finished"===i[0].ErpTpClassPeriod.status)return!1}if(t.user_test.type_test&&"multiple_choice"===String(t.user_test.type_test))return!1;if(t.user_test.is_took_test&&0===t.user_test.is_took_test)return!1;if("first"===n){if(1==+t.user_test.is_graded)return!1}else{if(0==+t.user_test.is_graded)return!1;if("1"===t.passed&&1===t.user_test.is_old_test)return!1}return!0},onDeleteTag:function(t){var e=this;return l()(o.a.mark(function a(){var n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!confirm("Bạn có chắc muốn xóa tag "+t.name+" ?")){a.next=7;break}return e.loading=!0,a.next=5,yn.a.detach({record_id:+t.record_id,table_name:t.table_name,hr_tag_id:+t.id});case 5:(n=a.sent).data.success?(e.$emit("refreshPage"),e.tags=e.tags.filter(function(e){return+e.id!=+t.id}),Me.a.showMessage(n.data.message||"Bỏ gắn tag thành công!","success")):Me.a.showMessage(n.data.message,"warning");case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),Me.a.showMessage(a.t0.message,"warning");case 12:return a.prev=12,e.loading=!1,a.finish(12);case 15:case"end":return a.stop()}},a,e,[[0,9,12,15]])}))()},formatDate:function(t,e){return Ye()(t||null).format(e||"DD-MM-YYYY HH:mm:ss")},addAcademyNote:function(t,e,a,n){var i=this;return l()(o.a.mark(function s(){var r,l,c;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return r={id:e,note:t,masterId:a||null,classId:i.classDetail.class.id||null,periodStatus:i.classDetail.period.status||null},s.prev=1,i.loading=!0,s.next=5,ca.a.addAcademyNote(r);case 5:l=s.sent,(c=l.data).success?(Me.a.showMessage(c.message,"success"),i.triggerInputNote("hide",n),i.$emit("refreshPage")):Me.a.showMessage(c.message||"Gặp lỗi khi thêm ghi chú!","warning"),s.next=13;break;case 10:s.prev=10,s.t0=s.catch(1),console.log(s.t0.message);case 13:return s.prev=13,i.loading=!1,s.finish(13);case 16:case"end":return s.stop()}},s,i,[[1,10,13,16]])}))()},allowPermissionAction:function(){var t=[].concat(d()(this.duty));t.includes("IT")&&(this.permissionHr=!0,this.permissionVh=!0,this.permissionConfirm=!0,this.permissionIt=!0),t.includes("HR")&&(this.permissionHr=!0),t.includes("VH")&&(this.permissionVh=!0),t.includes("curator-teacher")&&(this.permissionConfirm=!0)},sortArray:function(t){return rn()(t).sort(function(t,e){return t.id<e.id?-1:1})},getTest:function(t){return t.file?t.file:"https://cache.giaohangtietkiem.vn/d/e6dcfee9d93d42cf8ab3ae5794f27f22.pdf"},handleScroll:function(){if(this.stopLoadData||this.isLoading)return!0;var t=this.$refs[this.studentDetailId];t.scrollTop+t.clientHeight+100>=t.scrollHeight&&this.getListStudents()},getListStudents:function(){var t=this;this.dataGetListStudent.students_sort=[],this.studentFilter&&Array.isArray(this.studentFilter.split(","))&&this.studentFilter.split(",").length>0&&(this.dataGetListStudent.students_sort=this.studentFilter.split(",")),this.isLoading=!0,this.setValueGetListStudent(this.classDetail),ca.a.getListStudents(this.dataGetListStudent).then(function(e){e.data.success?(e.data.data.length<t.dataGetListStudent.limit&&(t.stopLoadData=!0),t.listStudents=[].concat(d()(t.listStudents),d()(e.data.data)),t.isLoading=!1):(Me.a.showMessage(e.data.message),t.isLoading=!1)}).catch(function(e){e.response&&e.response.data&&e.response.data.message&&(Me.a.showMessage(e.response.data.message),t.isLoading=!1)})},openModalReview:function(t){this.$emit("action",{action:"showModalReview",dataModal:t})}}};var kn=function(t){a("ekMm"),a("OEkN"),a("uo3f")},xn=Object(y.a)(wn,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.classDetail?a("div",{ref:t.studentDetailId,staticClass:"classDetail overflow-auto mh-50",on:{scroll:function(e){return t.handleScroll()}}},[a("table",{staticClass:"table table-hover bg-white table-order-list w-100 table-responsive-sm table-border-custom mb-1"},[t._m(0),t._v(" "),a("tbody",{staticClass:"position-relative"},t._l(t.listStudents,function(e,n){return a("tr",{key:n,class:+e.status===t.STATUS.ACTIVE?"student--active":"student--inactive"},[a("td",[a("div",{staticClass:"student__info"},[a("b",[t._v(t._s(e.fullname))]),t._v(" ("),a("b",[t._v(t._s(e.username))]),t._v(")\n            "),a("i",{directives:[{name:"show",rawName:"v-show",value:"completed"!=t.classDetail.class.status,expression:"classDetail.class.status != 'completed'"}],staticClass:"fa fa-times-circle cursor-pointer",staticStyle:{color:"red","font-size":"medium"},on:{click:function(a){return t.showModalDeleteAcademy(t.classDetail.class.id,e.user_id,e.id)}}})]),t._v(" "),a("div",{staticClass:"student__position"},[t._v(t._s(e.position))]),t._v(" "),"disable"===e.master_status?a("div",{staticClass:"student--resign-status"},[t._v("(Đã nghỉ việc)")]):t._e()]),t._v(" "),a("td",{staticClass:"text-center"},[a("div",{staticClass:"box-period"},t._l(e.period,function(n,i){return a("div",{key:"period"+i,staticClass:"box-period-child",on:{click:function(a){n.can_edit_checkin&&t.rollUpStudent(n.id,e.master_id,n.checkin_status,t.classDetail)}}},[1==+n.passed?a("div",[a("div",{class:t.getClassPeriod(n,n.status_period),attrs:{id:"attendance-"+n.id+"-"+e.master_id}},[t._v(t._s(+i+1))]),t._v(" "),a("div",{attrs:{id:"title-attendance-"+n.id+"-"+e.master_id}},[t._v(t._s(t.getStatusPeriodOfStudent(n,t.classDetail.period,+i+1)))])]):a("div",{class:t.addClassShowTooltip(n,t.classDetail.period,+i+1),attrs:{"data-title":t.getTitleTooltip(e.status,n,t.classDetail.period,+i+1)}},[a("div",{staticClass:"tooltip-css"}),t._v(" "),a("div",{class:t.getClassPeriod(n,n.status_period),attrs:{id:"attendance-"+n.id+"-"+e.master_id}},[t._v(t._s(+i+1))]),t._v(" "),a("div",{attrs:{id:"title-attendance-"+n.id+"-"+e.master_id}},[t._v(t._s(t.getStatusPeriodOfStudent(n,t.classDetail.period,+i+1)))])])])}),0)]),t._v(" "),a("td",{staticClass:"text-center"},t._l(e.period||[],function(i,s){return a("div",{key:e.user_id+"_"+s,staticStyle:{display:"inline-block"}},[i.user_test&&1==+i.user_test.is_took_test?a("div",{key:i.user_test.user_test_id,staticClass:"d-inline-block w-6re"},[a("div",{staticClass:"profile-document__element mr-1",staticStyle:{"flex-direction":"column"}},[a("div",{staticClass:"num-img-extend mb-1"},[a("span",{staticClass:"view-test cursor-pointer d-inline-flex",on:{click:function(e){return t.showUserTest(i.user_test.user_test_id)}}},[a("i",{staticClass:"far fa-eye font-10 text-ghtk"}),t._v(" "),a("span",{staticClass:"text-ghtk"},[t._v("Xem")])]),t._v(" "),t.validateBtn(i,t.classDetail.class.periods,t.classDetail.class.is_lecturer,"first")?a("span",{staticClass:"mark-test cursor-pointer d-inline-flex",on:{click:function(a){return t.showModalMark(e.fullname,t.classDetail.class.id,i.user_test.user_test_id,n,s)}}},[a("i",{staticClass:"far fa-edit mb-1 font-10",staticStyle:{color:"#00904A"}}),t._v(" "),a("span",{staticClass:"text-ghtk"},[t._v("Chấm bài")])]):t._e(),t._v(" "),t.validateBtn(i,t.classDetail.class.periods,t.classDetail.class.is_lecturer,"notFirst")?a("span",{staticClass:"mark-test cursor-pointer d-inline-flex",on:{click:function(a){return t.showModalMark(e.fullname,t.classDetail.class.id,i.user_test.user_test_id,n,s)}}},[a("i",{staticClass:"fas fa-pencil-alt cursor-pointer",staticStyle:{color:"#00904A"}}),t._v(" "),a("span",{staticClass:"text-ghtk"},[t._v("Chấm lại")])]):t._e(),t._v(" "),t.showRetestBtn(i)?a("span",{staticClass:"mark-test cursor-pointer d-inline-flex",on:{click:function(e){return t.retest(i.user_id)}}},[a("i",{staticClass:"fas fa-redo",staticStyle:{color:"#00904A"}}),t._v(" "),a("span",{staticClass:"text-ghtk"},[t._v("Gửi lại bài")])]):t._e()]),t._v(" "),a("pdf",{attrs:{src:t.getTest(i.user_test)}})],1),t._v(" "),a("div",{staticClass:"text-center font-11 mt-1 font-weight-bold"},[t._v("\n                  Buổi "+t._s(s+1)+": "+t._s(t.testResult(i.user_test,i.score))+"\n                ")])]):t._e()])}),0),t._v(" "),a("td",[a("div",{staticClass:"box-review"},t._l(t.sortArray(e.note),function(e,n){return a("div",{key:"box-review-period"+n,staticClass:"mb-10px review-custom"},[a("b-btn",{staticClass:"btn btn-font-defualt btn-outline-ghtk btn-review",class:"coming_up"===e.status_period?"btn-review-disabled":"",attrs:{disabled:"coming_up"===e.status_period},on:{click:function(a){return t.openModalReview(e)}}},[a("i",{staticClass:"fa fa-pencil-alt cursor-pointer font-11"}),t._v("\n                Đánh giá buổi "+t._s(n+1)+"\n              ")])],1)}),0)])])}),0)])]):t._e(),t._v(" "),["happening","coming_up","pending"].includes(t.classDetail.class.status)?a("div",{staticClass:"row m-0 justify-content-end"},[a("div",{staticClass:"add-student-btn pl-1"},[a("b-btn",{staticClass:"w-100 rounded btn-header-class",attrs:{variant:"ghtk"},on:{click:function(e){return t.showModalAddStudent(t.classDetail.class.id,t.classDetail.period.id,t.classDetail.class.tp_id)}}},[t._v("+ Học viên")])],1)]):t._e(),t._v(" "),a("ModalUserTest",{attrs:{"user-test-id":t.userTestId,id:"modal-user-test_"+t.classDetail.class.id}})],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",{staticClass:"header-row"},[e("th",{staticClass:"text-center",staticStyle:{width:"15%"}},[e("b",[this._v("Học viên")])]),this._v(" "),e("th",{staticClass:"text-center title-period",staticStyle:{width:"12%"}},[e("b",[this._v("Điểm danh")])]),this._v(" "),e("th",{staticClass:"text-center title-period w-25"},[e("b",[this._v("Bài kiểm tra")])]),this._v(" "),e("th",{staticClass:"text-center w-20"},[e("b",[this._v("Đánh giá/Ghi chú")])])])])}],!1,kn,"data-v-fca1c4e4",null).exports,Sn={name:"modal-roll-up",components:{},props:["listStudents","order","classId"],data:function(t){return{}},created:function(){},computed:{},watch:{},methods:{rollUpListStudent:function(){var t=this,e={listStudents:this.listStudents,order:this.order,classId:this.classId};ca.a.rollUpListStudent(e).then(function(e){e.data.success?(t.$emit("refreshPage"),t.hideModal(),Me.a.showMessage(e.data.message,"success")):Me.a.showMessage(e.data.message||"Gặp lỗi khi điểm danh !","warning")}).catch(function(t){console.log(t)}).then(function(){t.loading=!1})},hideModal:function(){this.$bvModal.hide("modal-roll-up")}}};var Mn=function(t){a("6aA6"),a("kk+f")},Tn=Object(y.a)(Sn,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{class:"modal-custom modal-xss-custom",attrs:{centered:"",id:"modal-roll-up",title:"Điểm danh","hide-header":"","hide-footer":"",static:""},on:{hidden:t.hideModal}},[a("div",{staticClass:"modal-header-custom text-center"},[a("span",{staticClass:"text-header"},[t._v("Điểm danh")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.hideModal()}}},[t._v("×")])]),t._v(" "),a("div",{staticClass:"student-roll-up",attrs:{title:"Danh sách học viên cần điểm danh"}},t._l(t.listStudents,function(e,n){return t.listStudents?a("div",{staticClass:"d-flex"},[a("div",{staticClass:"image-user"},[a("img",{attrs:{src:e.image_profile,alt:""}})]),t._v(" "),a("div",{staticClass:"ml-1 d-flex align-items-center"},[t._v(t._s(e.fullname)+" - "+t._s(e.username)+" - "+t._s(e.position))]),t._v(" "),a("div",{staticClass:"d-flex align-items-center ml-auto"},[a("b-form-checkbox",{staticClass:"checkbox-ghtk",attrs:{id:"checkbox-1"+ +n,name:"checkbox-"+n,value:"yes","unchecked-value":"no"},model:{value:e.isRollup,callback:function(a){t.$set(e,"isRollup",a)},expression:"student.isRollup"}})],1)]):t._e()}),0),t._v(" "),a("div",{staticClass:"text-center mt-1 mb-1"},[a("b-btn",{staticClass:"btn-roll-up-student",attrs:{variant:"ghtk"},on:{click:function(e){return t.rollUpListStudent()}}},[t._v("Điểm danh")])],1)])],1)},[],!1,Mn,"data-v-52a86eb0",null).exports,Dn={name:"modal-confirm-class",components:{},props:["classDetail"],data:function(t){return{isConfirming:!1}},created:function(){},computed:{},watch:{},methods:{formatDate:function(t,e){return Ye()(t||null).format(e||"DD-MM-YYYY")},confirmClass:function(){var t=this;this.isConfirming=!0;var e={classId:this.classDetail.class.id};ca.a.confirmClass(e).then(function(e){e.data.success?(t.isConfirming=!1,Me.a.showMessage(e.data.message,"success"),t.$bvModal.hide("modal-confirm-class"),t.$emit("refreshPage")):Me.a.showMessage(e.data.message||"Gặp lỗi khi lấy thông tin lớp học !","warning")}).catch(function(t){console.log(t)}).then(function(){t.$bvModal.hide("modal-confirm-class"),t.loading=!1})},hideModal:function(){this.$bvModal.hide("modal-confirm-class"),this.isConfirming=!1}}};var In=function(t){a("6aA6"),a("p25i")},Pn=Object(y.a)(Dn,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{class:"modal-custom",attrs:{size:"md",id:"modal-confirm-class",centered:"",title:"Xác nhận","hide-header":"","hide-footer":"",static:""},on:{hidden:t.hideModal}},[a("div",{staticClass:"modal-header-custom text-center"},[a("span",{staticClass:"text-header"},[t._v("Xác nhận")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.hideModal()}}},[t._v("×")])]),t._v(" "),a("div",{staticClass:"class-period",attrs:{title:"Danh sách buổi học"}},[t.classDetail?a("div",t._l(t.classDetail.class.periods,function(e,n){return a("div",[a("b",[t._v("Buổi "+t._s(n+1))]),t._v(": "),e.ErpTpPeriod?a("span",[t._v(t._s(e.ErpTpPeriod.content)+" | Thời gian: "+t._s(t.formatDate(e.ErpTpClassPeriod.start_time,"H:mm DD-MM-YYYY")))]):t._e(),t._v("\n                     | Địa điểm: "),"online"===e.ErpTpClassPeriod.form?a("span",[t._v("Học trực tuyến")]):a("span",[t._v(t._s(e.Station.name))])])}),0):t._e()]),t._v(" "),a("div",{staticClass:"text-center mt-1 mb-1"},[t.isConfirming?t._e():a("b-btn",{staticClass:"btn-roll-up-student",attrs:{variant:"ghtk"},on:{click:function(e){return t.confirmClass()}}},[t._v("Xác nhận")]),t._v(" "),t.isConfirming?a("b-btn",{staticClass:"btn-roll-up-student",attrs:{variant:"ghtk",disabled:""}},[a("i",{staticClass:"fa fa-spin fa-spinner"}),t._v("Đang xác nhận")]):t._e()],1)])],1)},[],!1,In,"data-v-47441c19",null).exports,En={name:"SelectSuggest",props:{value:{default:null},placeholder:{default:null},hideSelected:{default:!0},autoClose:{default:!0},options:{type:Array,default:function(){return[]}},asyncLoading:{default:!1},message:{default:"Nhập ít nhất 2 ký tự"},clearOnSelect:{default:!0},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!0},classPlaceholder:{type:String,default:"placeholder"}},components:{Multiselect:la.a},data:function(){return{option:null}},watch:{value:{immediate:!0,deep:!0,handler:function(t){this.option=t}}},methods:{find:ka()(function(t){this.$emit("find",t)})}};var Ln=function(t){a("kEmi")},An=Object(y.a)(En,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{attrs:{disabled:t.disabled,options:t.options,label:"name","track-by":"id",placeholder:t.placeholder,multiple:t.multiple,searchable:!0,loading:t.asyncLoading,"internal-search":!1,"clear-on-select":t.clearOnSelect,"close-on-select":t.autoClose,"hide-selected":t.hideSelected,"show-labels":!1},on:{"search-change":t.find,select:function(e){t.$emit("select",e)},remove:function(e){t.$emit("remove",e)},input:function(e){t.$emit("input",e)}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Không có kết quả phù hợp !")]),t._v(" "),a("span",{attrs:{slot:"noOptions"},slot:"noOptions"},[t._v(t._s(t.message))]),t._v(" "),a("span",{class:t.classPlaceholder,attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,Ln,"data-v-371ba83d",null).exports,On=a("Zx67"),Nn=a.n(On),Rn=a("Zrlr"),Un=a.n(Rn),$n=a("zwoO"),Hn=a.n($n),Bn=a("Pf15"),jn=a.n(Bn),Fn=a("MUME"),qn=function(t){function e(){return Un()(this,e),Hn()(this,(e.__proto__||Nn()(e)).apply(this,arguments))}return jn()(e,t),e}(Fn.a);qn.learningSpirits=[{id:4,name:"Tuyệt vời",tooltip:"Tham gia học tập sôi nổi, chủ động đóng góp tích cực cho lớp học, chủ động chia sẻ"},{id:3,name:"Đáng khen",tooltip:"Tham gia đóng góp, phát biểu khi giảng viên đặt câu hỏi"},{id:2,name:"Bình thường",tooltip:"Không có gì cần lưu ý"},{id:1,name:"Cần cải thiện",tooltip:"Không hợp tác, gây cản trở tới chất lượng lớp học, để treo máy không học"}],qn.attitudes=[{id:4,name:"Tham gia đầy đủ"},{id:2,name:"Vào muộn"},{id:3,name:"Về sớm"},{id:1,name:"Vào muộn + Về sớm"}];var Yn=qn,zn={name:"modal-complete-period",components:{SelectSuggest:An,Multiselect:la.a,ReviewStudentEntity:Yn},props:["classDetail","classPeriodId"],data:function(t){return{multipleSelectCustomClass:"multiselect-custom mt-1",disableAction:!1,isCompleted:!1,students:[],loading:!1,dataSearch:null,currentReviews:0,currentReviewed:0,listStudentReview:{},totalReview:0,statusId:3,pageOpened:[],page:{currentPage:1,totalItems:0,perPage:10},searchStudent:[],asyncLoading:!1,message:"Nhập ít nhất 2 ký tự",option:null,options:[]}},created:function(){},computed:{ReviewStudentEntity:function(){return Yn}},watch:{classPeriodId:function(t,e){null!==t&&this.classDetail&&this.classDetail.period&&this.classDetail.period.id&&(this.classId=this.classDetail.class.id,this.students=[],this.listStudentReview=[],this.pageOpened=[],this.getPeriodTestResult())}},methods:{initData:function(){this.page.currentPage=1,this.page.perPage=10},findStudent:function(t){var e=this;this.options=[],t.length<2?this.message="Nhập ít nhất 2 ký tự":(this.asyncLoading=!0,ca.a.apiSuggestStudents({class_id:this.classDetail.class.id,username:t}).then(function(t){t.data.success?(console.log(t.data.success),e.options=t.data.data):e.message="Không tìm thấy kết quả"}).catch(function(){e.message="Không tìm thấy kết quả"}).finally(),this.asyncLoading=!1)},checkNumberCurrentReviews:function(t){this.listStudentReview.hasOwnProperty(t.user_id)?(this.listStudentReview[t.user_id]=t,null===this.listStudentReview[t.user_id].learning_spirit&&null===this.listStudentReview[t.user_id].assiduous&&null===this.listStudentReview[t.user_id].note&&(delete this.listStudentReview[t.user_id],this.currentReviews--)):(this.listStudentReview[t.user_id]=t,this.currentReviews++)},getPeriodTestResultWithSearch:function(){this.page.currentPage=1,this.getPeriodTestResult()},setRows:function(t){var e=1;if(!t)return e;var a=t.length;return e=+a<=22?1:+a<=44?2:3},confirmCompletePeriod:function(){var t={class_period_id:this.classDetail.period.id,note:this.note,order:this.classDetail.period.order,total_periods:this.classDetail.class&&this.classDetail.class.periods?this.classDetail.class.periods.length:0,students:[],source_request:"web"},e=[];this.listStudentReview.forEach(function(a){t.students.push({student_id:a.user_id}),(a.learning_spirit||a.assiduous||a.note)&&e.push({user_id:a.user_id||null,learning_spirit:a.learning_spirit||null,assiduous:a.assiduous||null,note:a.note||null})}),this.$emit("showModalConfirmCompletePeriod",{dataComplete:t,dataReviews:e})},getPeriodTestResult:function(){var t=this;return l()(o.a.mark(function e(){var a,n,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,a={classPeriodId:t.classPeriodId,page:t.page.currentPage,limit:t.page.perPage},t.searchStudent.length>0&&(console.log(t.searchStudent),a.user_ids=t.searchStudent.map(function(t){return t.id})),console.log(t.searchStudent),e.next=7,ca.a.getPeriodTestResult(a);case 7:if(n=e.sent,!(i=n.data).success){e.next=15;break}return e.next=12,t.convertData(i.data);case 12:t.students=e.sent,0===t.searchStudent.length&&(t.totalReview=i.total),t.page.totalItems=i.total;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),Me.a.showMessage("Không lấy được dữ liệu!","warning");case 20:return e.prev=20,t.loading=!1,e.finish(20);case 23:case"end":return e.stop()}},e,t,[[0,17,20,23]])}))()},convertData:function(t){var e=this;return l()(o.a.mark(function a(){var n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=[],t.length>0&&t.forEach(function(t){e.listStudentReview.hasOwnProperty(t.user_id)?n.push(e.listStudentReview[t.user_id]):(t.learning_spirit&&(t.learning_spirit=Yn.learningSpirits.find(function(e){return+e.id==+t.learning_spirit})),t.assiduous&&(t.assiduous=Yn.attitudes.find(function(e){return+e.id==+t.assiduous})),(t.learning_spirit||t.assiduous||t.note)&&e.currentReviews++,n.push(t))}),a.abrupt("return",n);case 3:case"end":return a.stop()}},a,e)}))()},resetProps:function(){this.$emit("update:classPeriodId",null)},hideModal:function(){this.resetProps(),this.searchStudent=[],this.currentReviews=0,this.$bvModal.hide("modal-complete-period")}}};var Gn=function(t){a("6aA6"),a("A6ec")},Kn=Object(y.a)(zn,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{class:"modal-custom modal-complete-custom",attrs:{id:"modal-complete-period",centered:"",title:"Hoàn thành","hide-header":"","hide-footer":"",static:""},on:{hidden:t.hideModal,show:t.initData}},[a("div",{staticClass:"modal-header-custom text-center",staticStyle:{"line-height":"2rem"}},[a("span",{staticClass:"text-header"},[t._v("Hoàn thành")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.hideModal()}}},[t._v("×")])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content-custom"},[a("div",{staticClass:"header-custom"},[a("p",[t._v("Vui lòng đánh giá học viên khi hoàn thành buổi. Kết quả đánh giá là cơ sở để xếp loại các học viên!")]),t._v(" "),a("p",[t._v("Các trường hợp không đánh giá sẽ được coi là “Bình thường”")])]),t._v(" "),a("div",{staticClass:"search-custom"},[a("SelectSuggest",{attrs:{options:t.options,asyncLoading:t.asyncLoading,message:t.message,multiple:!0,classPlaceholder:"placeholder-left",placeholder:"Nhập tên, username học viên"},on:{find:t.findStudent,select:t.getPeriodTestResultWithSearch,remove:t.getPeriodTestResultWithSearch},model:{value:t.searchStudent,callback:function(e){t.searchStudent=e},expression:"searchStudent"}})],1),t._v(" "),a("b-row",{staticClass:"header-table-custom"},[a("b-col",{attrs:{md:"3"}},[a("div",[t._v("Học viên")])]),t._v(" "),a("b-col",{attrs:{md:"3"}},[a("div",[t._v("Tinh thần học tập")])]),t._v(" "),a("b-col",{attrs:{md:"3"}},[a("div",[t._v("Chuyên cần")])]),t._v(" "),a("b-col",{attrs:{md:"3"}},[a("div",[t._v("Nhận xét riêng (nếu có)")])])],1),t._v(" "),a("hr",{staticClass:"mx-3"}),t._v(" "),a("div",{class:t.students.length>=5?"table-content-custom":""},[t._l(t.students,function(e){return[a("b-row",{key:e.user_id,staticClass:"font-larger align-items-center mb-4"},[a("b-col",{attrs:{md:"3"}},[a("div",{staticClass:"d-flex"},[a("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"mr-2"},[a("img",{staticClass:"rounded-circle",attrs:{src:e.avatar,alt:"avatar",height:"44",width:"44"}})]),t._v(" "),a("div",{staticClass:"px-0 font-size-15"},[a("span",{staticClass:"font-weight-500"},[t._v(t._s(e.fullname)+" ("+t._s(e.username)+")")]),t._v(" "),a("br"),t._v(" "),a("span",[t._v(t._s(e.score)+" điểm | "+t._s(e.result_desc))])])])]),t._v(" "),a("b-col",{attrs:{md:"3"}},[a("div",[a("multiselect",{class:[t.multipleSelectCustomClass,e.learning_spirit?"border-active":""],attrs:{options:t.ReviewStudentEntity.learningSpirits,placeholder:"Chọn nội dung",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn","track-by":"id",label:"name",searchable:!0,multiple:!1,"allow-empty":!0,clearOption:!0},on:{select:function(a){return t.checkNumberCurrentReviews(e)},remove:function(a){return t.checkNumberCurrentReviews(e)}},model:{value:e.learning_spirit,callback:function(a){t.$set(e,"learning_spirit",a)},expression:"student.learning_spirit"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc, không tìm thấy!")])])],1)]),t._v(" "),a("b-col",{attrs:{md:"3"}},[a("div",[a("multiselect",{class:[t.multipleSelectCustomClass,e.assiduous?"border-active":""],attrs:{options:t.ReviewStudentEntity.attitudes,placeholder:"Chọn nội dung",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn","track-by":"id",label:"name",searchable:!0,multiple:!1,"allow-empty":!0,clearOption:!0},on:{select:function(a){return t.checkNumberCurrentReviews(e)},remove:function(a){return t.checkNumberCurrentReviews(e)}},model:{value:e.assiduous,callback:function(a){t.$set(e,"assiduous",a)},expression:"student.assiduous"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc, không tìm thấy!")])])],1)]),t._v(" "),a("b-col",{attrs:{md:"3"}},[a("div",{staticClass:"note-student"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.note,expression:"student.note"}],staticClass:"inp-note",class:e.note?"border-active":"",attrs:{rows:t.setRows(e.note),placeholder:"Nhập nhận xét"},domProps:{value:e.note},on:{input:[function(a){a.target.composing||t.$set(e,"note",a.target.value)},function(a){return t.checkNumberCurrentReviews(e)}]}})])])],1)]})],2)],1),t._v(" "),a("div",{staticClass:"paging d-flex flex-row content-custom"},[a("div",[a("b",{staticClass:"text-black"},[t._v("\n        Bản ghi/ trang\n      ")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.page.perPage,expression:"page.perPage"}],staticClass:"form-control form-control-sm w-4re text-ghtk rounded border-ghtk d-inline-block",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.page,"perPage",e.target.multiple?a:a[0])},function(e){return t.getPeriodTestResult()}]}},[a("option",[t._v("5")]),t._v(" "),a("option",[t._v("10")]),t._v(" "),a("option",[t._v("20")]),t._v(" "),a("option",[t._v("30")]),t._v(" "),a("option",[t._v("50")])])]),t._v(" "),a("div",{staticClass:"z-0 d-inline-block paginator-ghtk ml-2"},[a("b-pagination",{staticClass:"mb-1",attrs:{size:"sm",align:"left","total-rows":t.page.totalItems,"per-page":t.page.perPage},on:{input:function(e){return t.getPeriodTestResult()}},model:{value:t.page.currentPage,callback:function(e){t.$set(t.page,"currentPage",e)},expression:"page.currentPage"}})],1),t._v(" "),a("div",{staticClass:"total-review-current text-right mr-1 ml-auto"},[a("div",[t._v("Đã đánh giá: "+t._s(t.currentReviews)+"/"+t._s(t.totalReview))])])]),t._v(" "),a("div",{staticClass:"text-center mb-3"},[a("b-btn",{staticClass:"mt-2 btn-outline-success rounded mb-2 font-initial btn-custom mr-4",attrs:{size:"md"},on:{click:function(e){return t.hideModal()}}},[t._v("\n      Đóng\n    ")]),t._v(" "),a("b-btn",{staticClass:"mt-2 rounded mb-2 btn-ghtk font-initial btn-custom",attrs:{size:"md",disabled:t.disableAction},on:{click:function(e){return t.confirmCompletePeriod()}}},[t._v("Xác nhận\n    ")])],1)])},[],!1,Gn,"data-v-387cb104",null).exports,Vn=a("JanS"),Qn=a.n(Vn),Xn={name:"period-test-item",props:["page","type"],data:function(){return{}},computed:{viewOnly:function(){return"view"===this.type}},methods:{openEditQuestion:function(t){this.$emit("openEditQuestion",t)},execDeletePage:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,ca.a.deleteTrainingPage({id:t.page.id});case 4:a=e.sent,(n=a.data).success?(Me.a.showMessage(n.message,"success"),t.$emit("refreshTest")):Me.a.showMessage(n.message),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Me.a.showMessage(e.t0.message);case 12:return e.prev=12,t.loading=!1,e.finish(12);case 15:case"end":return e.stop()}},e,t,[[0,9,12,15]])}))()},deleteQuestion:function(t){this.$emit("action",{action:"delete-question",data:t})}}};var Wn=function(t){a("g7zU")},Jn=Object(y.a)(Xn,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"action"},[a("div",{style:{width:t.viewOnly?"100%":"80%"}},[a("span",{staticClass:"action-left p-2"},[t._v(t._s(t.page.name))])]),t._v(" "),t.viewOnly?t._e():a("div",{staticClass:"cursor-pointer action-right",on:{click:function(e){return t.$emit("addQuestion",t.page)}}},[a("i",{staticClass:"fa fa-plus"})])]),t._v(" "),a("section",t._l(t.page.questions,function(e,n){return a("div",{key:"question"+n,staticClass:"page-question"},[a("div",{staticClass:"question period-question"},[a("span",{domProps:{innerHTML:t._s(e.name)}}),t._v(" "),a("div",{staticClass:"question-actions pl-3"},[t.viewOnly?t._e():a("div",{staticClass:"question-remove",on:{click:function(e){return t.deleteQuestion(n)}}},[a("i",{staticClass:"fa fa-trash"})]),t._v(" "),a("div",{staticClass:"question-edit",on:{click:function(a){return t.openEditQuestion(e)}}},[a("i",{staticClass:"fa fa-edit"})])])])])}),0)])},[],!1,Wn,"data-v-70f55086",null).exports,Zn=a("G0J2"),ti=(a("3f40"),a("4qOc"),a("+cgv"),{props:{question:{default:function(){},type:Object},type:{default:null}},components:{quillEditor:Zn.quillEditor},data:function(){return{optionEdittor:Qn.a.optionEdittor,name:"",answers:[]}},computed:{viewOnly:function(){return"view"===this.type}},mounted:function(){this.answers=this.question.answers,this.name=this.question.name},methods:{validateQuestion:function(){if(Me.a.isEmpty(this.name))return"Thiếu câu hỏi!";if(Me.a.isEmpty(this.answers))return"Thiếu câu trả lời!";for(var t=0,e=0;e<this.answers.length;e++)if(1!==this.answers[e].correct&&!0!==this.answers[e].correct&&"1"!==this.answers[e].correct||(t=1),Me.a.isEmpty(this.answers[e].name))return"Câu trả lời chưa hợp lệ!";return t?"":"Phải chọn ít nhất 1 câu trả lời là câu trả lời đúng!"},addAnswer:function(){this.answers.push({name:"",correct:this.answers.length<1,valid:!1})},setCorrect:function(t){var e=this;this.answers.map(function(a,n){n===t?e.answers[t].correct=1:e.answers[n].correct=0})},save:function(){var t=this.validateQuestion();if(console.log(t),t)return Me.a.showMessage(t);this.$emit("save",{name:this.name,answers:this.answers,id:this.question.id})},removeAnswer:function(t){this.answers[t].correct&&this.answers.length>0&&(this.answers[0].correct=!0),this.answers.splice(t,1)}},watch:{answers:{deep:!0,handler:function(t){var e=this;t.map(function(t,a){t.name?e.answers[a].valid=!0:e.answers[a].valid=!1})}},question:function(t){this.answers=t.answers,this.name=t.name}}});var ei=function(t){a("+f+B"),a("8klq")},ai=Object(y.a)(ti,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"question"},[a("div",{staticClass:"question-title"},[a("quill-editor",{ref:"myQuillEditor",attrs:{options:t.optionEdittor,disabled:t.viewOnly},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),t._l(t.answers,function(e,n){return a("div",{key:"ans-"+n,staticClass:"question-answers"},[a("b-form-input",{attrs:{disabled:t.viewOnly,placeholder:"Nhập đáp án...",state:1==+e.correct},model:{value:t.answers[n].name,callback:function(e){t.$set(t.answers[n],"name",e)},expression:"answers[index].name"}}),t._v(" "),a("div",{staticClass:"answer-action"},[t.viewOnly?t._e():a("button",{staticClass:"my-btn answer-mark answer-check",on:{click:function(e){return t.setCorrect(n)}}},[1==e.correct?a("i",{staticClass:"fa fa-check correct"}):a("i",{staticClass:"fa fa-times"})]),t._v(" "),t.viewOnly?t._e():a("button",{staticClass:"my-btn answer-remove",on:{click:function(e){return t.removeAnswer(n)}}},[a("i",{staticClass:"fa fa-trash"})])])],1)}),t._v(" "),t.viewOnly?t._e():a("div",{staticClass:"add"},[a("button",{staticClass:"my-btn add-normal",on:{click:t.addAnswer}},[t._v("Thêm đáp án "),a("i",{staticClass:"fa fa-plus"})]),t._v(" "),a("button",{staticClass:"my-btn save",on:{click:t.save}},[t._v("Lưu "),a("i",{staticClass:"fa fa-floppy-o",attrs:{"aria-hidden":"true"}})])])],2)},[],!1,ei,"data-v-20300824",null).exports,ni=a("tf68"),ii={props:{page:{default:function(){},type:Object},resetAddQuestion:{default:function(){return!1},type:Boolean},onlyView:{default:function(){return!1},type:Boolean}},components:{quillEditor:Zn.quillEditor},data:function(){return{optionEdittor:Qn.a.optionEdittor,name:"",answers:[]}},methods:{addAnswer:function(){this.answers.push({name:"",correct:this.answers.length<1,valid:!1})},setCorrect:function(t){var e=this;this.answers.map(function(a,n){n===t?e.answers[t].correct=!0:e.answers[n].correct=!1})},validateQuestion:function(){if(Me.a.isEmpty(this.name))return"Thiếu câu hỏi!";if(Me.a.isEmpty(this.answers))return"Thiếu câu trả lời!";for(var t=0,e=0;e<this.answers.length;e++)if(this.answers[e].correct&&(t=1),Me.a.isEmpty(this.answers[e].name))return"Câu trả lời chưa hợp lệ!";return t?"":"Phải chọn ít nhất 1 câu trả lời là câu trả lời đúng!"},save:function(){var t=this.validateQuestion();if(t)return Me.a.showMessage(t);this.$emit("save",{name:this.name,answers:this.answers,pageId:this.page.id})},removeAnswer:function(t){this.answers[t].correct&&this.answers.length>0&&(this.answers[0].correct=!0),this.answers.splice(t,1)}},watch:{answers:{deep:!0,handler:function(t){var e=this;t.map(function(t,a){t.name?e.answers[a].valid=!0:e.answers[a].valid=!1})}},resetAddQuestion:function(){this.name="",this.answers=[]}}};var si=function(t){a("KkPa"),a("SJNa")},oi={components:{AddTrainingTestQuestion:Object(y.a)(ii,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"question"},[a("div",{staticClass:"question-title"},[a("quill-editor",{ref:"myQuillEditor",attrs:{options:t.optionEdittor},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),t._l(t.answers,function(e,n){return a("div",{key:"ans-"+n,staticClass:"question-answers"},[a("b-form-input",{attrs:{placeholder:"Nhập đáp án...",state:e.valid},model:{value:t.answers[n].name,callback:function(e){t.$set(t.answers[n],"name",e)},expression:"answers[index].name"}}),t._v(" "),a("div",{staticClass:"answer-action"},[a("button",{staticClass:"my-btn answer-mark answer-check",on:{click:function(e){return t.setCorrect(n)}}},[e.correct?a("i",{staticClass:"fa fa-check correct"}):a("i",{staticClass:"fa fa-times"})]),t._v(" "),a("button",{staticClass:"my-btn answer-remove",on:{click:function(e){return t.removeAnswer(n)}}},[a("i",{staticClass:"fa fa-trash"})])])],1)}),t._v(" "),t.onlyView?t._e():a("div",{staticClass:"add"},[a("button",{staticClass:"my-btn add-normal",on:{click:t.addAnswer}},[t._v("Thêm đáp án "),a("i",{staticClass:"fa fa-plus"})]),t._v(" "),a("button",{staticClass:"my-btn save",on:{click:t.save}},[t._v("Lưu "),a("i",{staticClass:"fa fa-floppy-o",attrs:{"aria-hidden":"true"}})])])],2)},[],!1,si,"data-v-0d6d8b96",null).exports,PeriodTestItem:Jn,EditTrainingPage:ni.a,EditPeriodTestQuestion:ai},mounted:function(){},props:{test:{default:function(){},type:Object},type:{default:"edit"},onlyView:{default:function(){return!1},type:Boolean}},data:function(){return{loading:!1,optionEdittor:Qn.a.optionEdittor,description:"",question:{},questions:[],page:{name:"",questions:[]},opening:"add question",resetAddQuestion:!1}},watch:{test:{immediate:!0,deep:!0,handler:function(t,e){t&&(this.page=t)}},page:{immediate:!0,deep:!0,handler:function(t,e){t&&this.$emit("action",{action:"change-test",data:t})}}},methods:{addNewQuestion:function(t){this.page.questions.push(t),this.resetAddQuestion=!this.resetAddQuestion,Me.a.showMessage("Thêm câu hỏi thành công","success")},editQuestion:function(t){this.question.answers=t.answers,this.question.name=t.name,Me.a.showMessage("Sửa câu hỏi thành công","success")},openAddQuestion:function(t){this.opening="add question",this.page=t,this.resetAddQuestion=!this.resetAddQuestion},openEditQuestion:function(t){this.opening="edit question",this.question=t},action:function(t){"delete-question"===t.action&&(this.page.questions.splice(t.data,1),this.opening="add question",this.resetAddQuestion=!this.resetAddQuestion,Me.a.showMessage("Xóa câu hỏi thành công","success"))}}};var ri=function(t){a("k8gF")},li=Object(y.a)(oi,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"workspace"},[a("div",{staticClass:"left"},[a("div",{staticClass:"page"},[a("PeriodTestItem",{attrs:{page:t.page,type:t.type},on:{addQuestion:t.openAddQuestion,openEditQuestion:t.openEditQuestion,action:function(e){return t.action.apply(void 0,arguments)}}})],1)]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"right"},["edit page"===t.opening?a("EditTrainingPage",{attrs:{page:t.page}}):t._e(),t._v(" "),"add question"===t.opening&&"view"!==t.type?a("AddTrainingTestQuestion",{attrs:{page:t.page,resetAddQuestion:t.resetAddQuestion,"only-view":t.onlyView},on:{save:t.addNewQuestion}}):t._e(),t._v(" "),"edit question"===t.opening?a("EditPeriodTestQuestion",{attrs:{type:t.type,question:JSON.parse(JSON.stringify(t.question)),"only-view":t.onlyView},on:{save:t.editQuestion}}):t._e()],1)])},[],!1,ri,"data-v-e29ed838",null).exports,ci={name:"modal-send-test",components:{PeriodTestBuilder:li},props:["classDetail","triggerSearch"],data:function(t){return{disableAction:!1,periodTestType:"view",collapseIcon:{test:!1,student_checked:!1,student_absent:!1},data:{},loading:!1}},created:function(){},computed:{helper:function(){return Me.a}},watch:{triggerSearch:function(t){this.getSendTestInfo()}},methods:{toggleCollapse:function(t){this.collapseIcon[t]=!this.collapseIcon[t]},showModalTest:function(){this.$bvModal.show("edit-period-test")},getSendTestInfo:function(){var t=this;return l()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,ca.a.getSendTestInfo({classPeriodId:t.classDetail.period.id});case 4:if((a=e.sent).data.success){e.next=9;break}return e.abrupt("return",Me.a.showMessage(a.data.message||"Gặp lỗi khi lấy dữ liệu xác nhân gửi bài!"));case 9:t.data=a.data.data;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),Me.a.showMessage(e.t0.message||"Gặp lỗi khi lấy dữ liệu xác nhân gửi bài!");case 15:return e.prev=15,t.loading=!1,e.finish(15);case 18:case"end":return e.stop()}},e,t,[[0,12,15,18]])}))()},senMessageTest:function(){var t=this;"completed"!==this.classDetail.class.status?(this.disableAction=!0,ca.a.senMessageTest(this.classDetail).then(function(e){e.data.success?(Me.a.showMessage(e.data.message,"success"),t.$bvModal.hide("modal-send-test"),t.$emit("refreshPage"),t.note=null):Me.a.showMessage(e.data.message||"Gặp lỗi khi gửi tin nhắn thông báo làm bài kiểm tra !","warning")}).catch(function(t){console.log(t)}).then(function(){t.disableAction=!1,t.loading=!1})):Me.a.showMessage("Không gửi được bài kiểm tra do đã hoàn thành!")},resetData:function(){this.collapseIcon={test:!1,student:!1},this.data={}},hideModal:function(){this.resetData(),this.$bvModal.hide("modal-send-test")}}};var di=function(t){a("V+II")},ui=Object(y.a)(ci,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],class:"modal-custom",attrs:{size:"lg",id:"modal-send-test",centered:"",title:"Xác nhận gửi bài kiểm tra","hide-header":"","hide-footer":"",static:""},on:{hidden:t.hideModal}},[a("div",{staticClass:"modal-header-custom text-center py-2"},[a("span",{staticClass:"text-header"},[t._v("Xác nhận gửi bài kiểm tra")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.hideModal()}}},[t._v("×")])]),t._v(" "),a("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle.test",modifiers:{test:!0}}],staticClass:"font-weight-500 font-large w-100 text-left py-2 d-flex justify-content-between text-black",staticStyle:{"background-color":"#F7F7F7"},on:{click:function(e){return t.toggleCollapse("test")}}},[a("div",{staticClass:"px-4 w-100 d-flex justify-content-between"},[t._v("\n      Bài kiểm tra\n      "),a("i",{staticClass:"fa mt-1",class:t.collapseIcon&&t.collapseIcon.test?"fa-chevron-up":"fa-chevron-down",staticStyle:{color:"#a3a4a6"}})])]),t._v(" "),a("b-collapse",{staticClass:"px-4",attrs:{visible:"",id:"test"}},[a("div",{staticClass:"class-period"},[t.helper.isEmpty(t.data)||t.helper.isEmpty(t.data.file)?t._e():a("div",{staticClass:"profile-document__element cursor-pointer ml-1",on:{click:function(e){return t.helper.openLink(t.data.file)}}},[a("div",{staticClass:"document-type-desc"},[t._v("\n          Bài kiểm tra "+t._s(t.data.order)+"\n        ")]),t._v(" "),a("div",{staticClass:"num-img-extend",staticStyle:{color:"white","font-style":"italic"}},[a("i",{staticClass:"fa fa-eye mr-1"}),t._v("Xem")]),t._v(" "),a("img",{attrs:{src:t.data.file+"?extract=thumb&height=160"}})])])]),t._v(" "),t.data.joined?a("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle.student-checked",modifiers:{"student-checked":!0}}],staticClass:"font-weight-500 font-large w-100 text-left py-2 text-black",staticStyle:{"background-color":"#F7F7F7"},on:{click:function(e){return t.toggleCollapse("student_checked")}}},[a("div",{staticClass:"w-100 d-flex px-4 justify-content-between"},[a("div",[a("span",[t._v("Học viên đã điểm danh: ")]),t._v(" "),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.data.joined.length))])]),t._v(" "),a("i",{staticClass:"fa mt-1",class:t.collapseIcon&&t.collapseIcon.student_checked?"fa-chevron-up":"fa-chevron-down",staticStyle:{color:"#a3a4a6"}})])]):t._e(),t._v(" "),a("b-collapse",{staticClass:"mt-2 px-5",attrs:{visible:"",id:"student-checked"}},[a("div",{staticClass:"row",staticStyle:{height:"7rem","overflow-y":"scroll"}},[t._l(t.data.joined,function(e,n){return[a("b-col",{directives:[{name:"viewer",rawName:"v-viewer"}],key:n,staticClass:"d-flex mb-2",attrs:{md:"6"}},[a("div",{staticClass:"w-15"},[a("img",{staticClass:"rounded-circle",attrs:{src:e.avatar,alt:"avatar",height:"46",width:"46"}})]),t._v(" "),a("div",{staticClass:"w-80 ml-2 d-flex mb-2",staticStyle:{"flex-direction":"column"}},[a("span",{staticClass:"font-weight-500"},[t._v(t._s(e.full_name)+" | "+t._s(e.username))]),t._v(" "),a("span",{staticClass:"text-nowrap"},[t._v(t._s(e.position)+" | "+t._s(e.station))])])])]})],2)]),t._v(" "),t.data.absent?a("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle.student-absent",modifiers:{"student-absent":!0}}],staticClass:"font-weight-500 font-large w-100 text-left py-2 text-black",staticStyle:{"background-color":"#F7F7F7"},on:{click:function(e){return t.toggleCollapse("student_absent")}}},[a("div",{staticClass:"w-100 d-flex px-4 justify-content-between"},[a("div",[a("span",[t._v("Học viên chưa điểm danh: ")]),t._v(" "),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.data.absent.length))])]),t._v(" "),a("i",{staticClass:"fa mt-1",class:t.collapseIcon&&t.collapseIcon.student_absent?"fa-chevron-up":"fa-chevron-down",staticStyle:{color:"#a3a4a6"}})])]):t._e(),t._v(" "),a("b-collapse",{staticClass:"mt-2 px-5",attrs:{visible:"",id:"student-absent"}},[a("div",{staticClass:"row",staticStyle:{height:"7rem","overflow-y":"scroll"}},[t._l(t.data.absent,function(e,n){return[a("b-col",{directives:[{name:"viewer",rawName:"v-viewer"}],key:n,staticClass:"d-flex mb-2",attrs:{md:"6"}},[a("div",{staticClass:"w-15"},[a("img",{staticClass:"rounded-circle",attrs:{src:e.avatar,alt:"avatar",height:"46",width:"46"}})]),t._v(" "),a("div",{staticClass:"w-80 ml-2 d-flex mb-2",staticStyle:{"flex-direction":"column"}},[a("span",{staticClass:"font-weight-500"},[t._v(t._s(e.full_name)+" | "+t._s(e.username))]),t._v(" "),a("span",{staticClass:"text-nowrap"},[t._v(t._s(e.position)+" | "+t._s(e.station))])])])]})],2)]),t._v(" "),a("div",{staticClass:"text-center my-3"},[a("b-btn",{staticClass:"btn-roll-up-student",staticStyle:{width:"18%"},attrs:{variant:"ghtk",disabled:t.disableAction},on:{click:function(e){return t.senMessageTest()}}},[t._v("Xác nhận")])],1)],1)},[],!1,di,"data-v-479e52d0",null).exports,hi={name:"modal-cancel-class",components:{},props:["classId"],data:function(t){return{disableAction:!1,note:null}},created:function(){},computed:{},watch:{},methods:{cancelClass:function(){var t=this;if(this.note){var e={class_id:this.classId,note:this.note};this.disableAction=!0,ca.a.cancelClass(e).then(function(e){e.data.success?(Me.a.showMessage(e.data.message,"success"),t.hideModal(),t.$emit("refreshPage")):Me.a.showMessage(e.data.message||"Gặp lỗi khi lấy thông tin lớp học !","warning")}).catch(function(t){console.log(t)}).then(function(){t.disableAction=!1,t.loading=!1})}else Me.a.showMessage("Vui lòng nhập lý do hủy lớp!","warning")},hideModal:function(){this.$bvModal.hide("modal-cancel-class")}}};var pi=function(t){a("Q8B+")},mi=Object(y.a)(hi,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{class:"modal-custom",attrs:{size:"sm",id:"modal-cancel-class",centered:"",title:"Ghi chú","hide-header":"","hide-footer":"",static:""},on:{hidden:t.hideModal}},[a("div",{staticClass:"modal-header-custom text-center"},[a("span",{staticClass:"text-header"},[t._v("Hủy lớp")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.hideModal()}}},[t._v("×")])]),t._v(" "),a("div",{staticClass:"class-period",attrs:{title:"Hủy lớp"}},[a("div",[a("b-form-textarea",{attrs:{id:"textarea",placeholder:"Nhập lý do hủy lớp",rows:"5","max-rows":"6"},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}})],1)]),t._v(" "),a("div",{staticClass:"text-center mt-1 mb-1"},[a("b-btn",{staticClass:"btn-roll-up-student",attrs:{variant:"ghtk",disabled:t.disableAction},on:{click:function(e){return t.cancelClass()}}},[t._v("Xác nhận")])],1)])],1)},[],!1,pi,"data-v-a8ccaff8",null).exports,fi={props:{open:{default:!1},scope:{type:String,default:"private"},tags:{default:null},tableName:{default:null},recordId:{default:null},attachPermission:{type:Boolean,default:!0}},data:function(){return{openModal:!1,loading:!1,tag:"",tagList:[]}},created:function(){this.getTags()},watch:{tableName:function(t,e){t?this.getTags():this.tagList=[]},open:function(t){this.openModal=t}},methods:{close:function(){this.openModal=!1,this.$emit("action",{action:"closeHrTag"})},onSubmit:function(t){var e=this;return l()(o.a.mark(function a(){var n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),a.prev=1,e.loading=!0,a.next=5,yn.a.create({name:e.tag,table_name:e.tableName,scope:e.scope});case 5:(n=a.sent).data.success?(Me.a.showMessage(n.data.message,"success"),e.tag="",e.tagList.push(n.data.data),e.$emit("refresh"),e.$emit("action",{action:"refreshHrTag"})):Me.a.showMessage(n.data.message,"warning"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),Me.a.showMessage(a.t0.message,"warning");case 12:return a.prev=12,e.loading=!1,a.finish(12);case 15:case"end":return a.stop()}},a,e,[[1,9,12,15]])}))()},onDeleteTag:function(t){var e=this;return l()(o.a.mark(function a(){var n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!confirm("Bạn có chắc muốn xóa tag "+t.name+" ?")){a.next=7;break}return e.loading=!0,a.next=5,yn.a.delete({id:t.id});case 5:(n=a.sent).data.success?(Me.a.showMessage(n.data.message,"success"),e.$emit("action",{action:"refreshHrTag"}),e.tagList=e.tagList.filter(function(e){return+e.id!=+t.id}),e.$emit("refresh"),e.$emit("action",{action:"refresh",data:{}})):Me.a.showMessage(n.data.message,"warning");case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),Me.a.showMessage(a.t0.message,"warning");case 12:return a.prev=12,e.loading=!1,a.finish(12);case 15:case"end":return a.stop()}},a,e,[[0,9,12,15]])}))()},onAttach:function(t){var e=this;return l()(o.a.mark(function a(){var n,s,r;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e.loading=!0,a.next=4,yn.a.attach({hr_tag_id:t.hr_tag_id,table_name:t.table_name,record_id:t.record_id});case 4:(n=a.sent).data.success?(Me.a.showMessage(n.data.message,"success"),s=i()({},n.data.data,{record_id:t.record_id}),r=n.data.log||null,e.$emit("action",{action:"attachTag",data:s,log:r}),e.openModal=!1):Me.a.showMessage(n.data.message,"warning"),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),Me.a.showMessage(a.t0.message,"warning");case 11:return a.prev=11,e.loading=!1,a.finish(11);case 14:case"end":return a.stop()}},a,e,[[0,8,11,14]])}))()},getTags:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,a=t,e.next=5,yn.a.getList({table_name:a.tableName});case 5:(n=e.sent).data.success?(t.tagList=n.data.data,t.$emit("refresh")):Me.a.showMessage(n.data.message,"warning"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Me.a.showMessage(e.t0.message,"warning");case 12:return e.prev=12,t.loading=!1,e.finish(12);case 15:case"end":return e.stop()}},e,t,[[0,9,12,15]])}))()}}};var gi=function(t){a("ERtT")},vi=Object(y.a)(fi,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{staticClass:"modal-hr-tag-modal",attrs:{"hide-footer":"",title:"Tạo và quản lý thẻ phân loại",static:"","header-class":"text-center justify-content-center d-flex",scrollable:""},on:{hidden:function(e){return t.close()},show:function(e){return t.getTags()}},model:{value:t.openModal,callback:function(e){t.openModal=e},expression:"openModal"}},[a("div",{staticClass:"col-md-12 form"},[a("b-form",{on:{submit:t.onSubmit}},[a("div",{staticClass:"form-group"},[a("b-input-group",{staticClass:"mb-3"},[a("b-form-input",{attrs:{type:"text",placeholder:"Nhập tên tag mới"},model:{value:t.tag,callback:function(e){t.tag=e},expression:"tag"}}),t._v(" "),a("b-input-group-append",[a("b-button",{attrs:{variant:"outline-success",name:"stop-work-btn-modal-save-tag",id:"stop-work-btn-modal-save-tag"},on:{click:t.onSubmit}},[a("i",{staticClass:"fa fa-save"})])],1)],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"position-relative mih-5re"},[a("b-list-group",t._l(t.tagList,function(e,n){return a("b-list-group-item",{key:n,staticClass:"d-flex align-items-center"},[a("span",{staticClass:"mr-auto"},[t._v(t._s(e.name))]),t._v(" "),t.attachPermission?a("b-button",{staticClass:"add-tag",attrs:{variant:"outline-ghtk",size:"sm"},on:{click:function(a){return t.onAttach({hr_tag_id:e.id,table_name:e.table_name,record_id:t.recordId})}}},[a("i",{staticClass:"fa fa-tag"})]):t._e(),t._v(" "),a("b-button",{attrs:{variant:"outline-danger",size:"sm"},on:{click:function(a){return t.onDeleteTag(e)}}},[a("i",{staticClass:"fa fa-trash"})])],1)}),1)],1)],1)])],1)])],1)},[],!1,gi,"data-v-2283f93e",null).exports,_i=function(t){return Na.a.post("/questions/delete",t)},bi=function(t){return Na.a.get("questions/list-essay",{params:t})},yi=function(t){return Na.a.post("/questions/import-essay",t)},Ci=function(t){return Na.a.post("/questions/update-essay",t)},wi=function(t){return Na.a.get("questions/question-create-test",{params:t})},ki=function(){return Na.a.get("questions/get-permissions")},xi=function(t){return Na.a.get("questions/list-multiple-choice",{params:t})},Si=function(t){return Na.a.post("/questions/import-multiple-choice",t)},Mi=function(t){return Na.a.get("period-test/questions-of-test",{params:t})},Ti=function(t){return Na.a.get("user-test/get-to-grading",{params:t})},Di=function(t){return Na.a.post("/user-test/grading-essay",t)},Ii=function(t){return Ha.a.get("/erp/period-test/generate-test-pdf",t)},Pi=function(){return Na.a.get("/period-test/list")},Ei=function(t){return Na.a.post("/questions/update-multiple-choice",t)},Li={name:"ModalNote",props:{username:{default:""},totalScore:{type:Number,default:0},minimumScore:{type:Number,default:0},dataRequest:{default:null},idStudent:null,idPeriod:null},data:function(){return{openModal:!1,loading:!1}},watch:{open:function(t){this.openModal=t}},methods:{onClose:function(){},onSave:function(){var t=this;return l()(o.a.mark(function e(){var a,n,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t.dataRequest){e.next=2;break}return e.abrupt("return",Me.a.showMessage("Thiếu dữ liệu bài kiểm tra","warning"));case 2:return a=i()({},t.dataRequest),e.prev=3,t.loading=!0,e.next=7,Di(a);case 7:if(!(n=e.sent).data.success){e.next=16;break}Me.a.showMessage("Chấm điểm thành công","success"),t.$emit("successMark"),s={idStudent:t.idStudent,idPeriod:t.idPeriod,totalScore:t.totalScore,userTestId:t.dataRequest.test_id},Cn.eventBus.$emit("updateScore",s),t.$bvModal.hide("modal-confirm-mark"),e.next=17;break;case 16:return e.abrupt("return",Me.a.showMessage(n.data.message||"Có lỗi xảy ra khi chấm bài","warning"));case 17:e.next=24;break;case 19:if(e.prev=19,e.t0=e.catch(3),console.log(e.t0),422!=+e.t0.response.status){e.next=24;break}return e.abrupt("return",Me.a.showMessage(e.t0.response.data.message,"warning"));case 24:return e.prev=24,t.loading=!1,e.finish(24);case 27:case"end":return e.stop()}},e,t,[[3,19,24,27]])}))()}}};var Ai=function(t){a("2Cim"),a("1WW8")},Oi={name:"mark-modal",components:{ConfirmMarkModal:Object(y.a)(Li,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{staticClass:"modalMarkConfirm",attrs:{title:"Xác nhận chấm điểm","modal-class":"modal-custom","header-class":"text-center justify-content-center d-flex",centered:"",static:"",id:"modal-confirm-mark","hide-footer":""},on:{hide:function(e){return t.onClose()}},model:{value:t.openModal,callback:function(e){t.openModal=e},expression:"openModal"}},[a("div",{staticClass:"modal-mark-confirm"},[a("div",{staticClass:"row"},[a("label",{staticClass:"col-4"},[t._v("Học viên: ")]),t._v(" "),a("span",{staticClass:"username"},[t._v(t._s(t.username))])]),t._v(" "),a("div",{staticClass:"row"},[a("label",{staticClass:"col-4"},[t._v("Tổng điểm: ")]),t._v(" "),a("span",{staticClass:"total-score"},[t._v(t._s(t.totalScore)+"/10")]),t._v(" "),a("span",{staticClass:"pass-cus"},[t._v(" - "+t._s(t.totalScore>=t.minimumScore?"Đạt":"Không đạt"))])])]),t._v(" "),a("div",{staticClass:"text-center mb-2"},[a("b-btn",{staticClass:"button-deny-modal",attrs:{disabled:t.loading,variant:"ghtk",id:"btn-save-add-note",name:"btn-save-add-note"},on:{click:function(e){return t.onSave()}}},[t._v("Xác nhận "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"fas fa-spinner fa-pulse"})])],1)])},[],!1,Ai,"data-v-2fe2f7a4",null).exports},data:function(t){return{loading:!1,listMultipleQuestion:[],listEssayQuestion:[],currentScoreMultiple:0,totalScoreMultiple:0,currentScoreEssay:0,totalScoreEssay:0,idQuestionBefore:null,totalScore:0,minimumScore:0,dataRequest:{}}},props:{classId:null,userTestId:null,nameModal:"",username:"",idObject:null,idStudent:null,idPeriod:null},computed:{},created:function(){},watch:{userTestId:function(t,e){null!==this.userTestId&&this.getTestById()}},methods:{formattedText:function(t){return t?""+t.replace(/\n/g,"</br>"):""},getClass:function(t){var e="textarea"+t;null!==this.idQuestionBefore&&document.getElementById(this.idQuestionBefore).classList.remove("textarea-active");document.getElementById(e).classList.add("textarea-active"),this.idQuestionBefore=e},getStyle:function(t,e){if("color"===e&&t.hasOwnProperty("is_correct"))return"correct"===t.is_correct?"color: #219653;":"color: #EA0505;";if("score"===e){if(1===String(t).length)return"right: 2.5rem;";if(2===String(t).length)return"right: 2.4rem;";if(3===String(t).length)return"right: 2rem;";if(4===String(t).length)return"right: 1.6rem;";if("char-cus"===e){if(1===String(t).length)return"right: 3.4rem;";if(2===String(t).length)return"right: 3.8rem;"}}},submit:function(){var t=[];if(this.listEssayQuestion.length>0)for(var e=0;e<this.listEssayQuestion.length;e++){var a=(this.listMultipleQuestion.length||0)+e+1;if(-1!==String(this.listEssayQuestion[e].score).indexOf(".")){var n=String(this.listEssayQuestion[e].score).indexOf(".");if(String(this.listEssayQuestion[e].score).slice(n).length>3)return Me.a.showMessage("Điểm câu số "+a+" phải là số nguyên hoặc dạng số thập phân có 2 số sau dấu phẩy","warning")}if(+this.listEssayQuestion[e].score>+this.listEssayQuestion[e].score_config)return Me.a.showMessage("Câu "+a+" vượt quá số điểm tối đa. Vui lòng kiểm tra lại","warning");if(this.listEssayQuestion[e].comment&&this.listEssayQuestion[e].comment.length>200)return Me.a.showMessage("Câu "+a+" có nhận xét vượt quá 200 ký tự. Vui lòng kiểm tra lại","warning");(+this.listEssayQuestion[e].score<0||isNaN(+this.listEssayQuestion[e].score)||""===this.listEssayQuestion[e].score)&&t.push(a)}if(t.length>0)return Me.a.showMessage("Câu "+t.join(",")+" chưa được chấm điểm. Vui lòng kiểm tra lại","warning");var i=[];this.listEssayQuestion.forEach(function(t){t.user_answer&&t.user_answer.length>0&&i.push({id:t.id,score:t.score||0,comment:t.comment||""})}),this.dataRequest.test_id=this.userTestId,this.dataRequest.questions=i||[],this.$bvModal.show("modal-confirm-mark")},calculateScore:function(t){var e="score"+this.userTestId+t.id,a=document.getElementById(e);if(a.className="",1===String(t.score).length?a.classList.add("detail-score-1"):2===String(t.score).length?a.classList.add("detail-score-2"):3===String(t.score).length?a.classList.add("detail-score-3"):4===String(t.score).length?a.classList.add("detail-score-4"):5===String(t.score).length?a.classList.add("detail-score-5"):String(t.score).length>5?a.classList.add("detail-score-max"):a.classList.add("detail-score"),"number"==typeof+t.score){var n=0;this.listEssayQuestion.forEach(function(t){if("number"==typeof+t.score){var e=isNaN(+t.score)?0:+t.score;n=+(n+=e).toFixed(2)}}),this.currentScoreEssay=n}this.totalScore=this.currentScoreEssay+this.currentScoreMultiple,this.totalScore=Math.round(100*+this.totalScore)/100},successMark:function(){this.resetData(),this.$bvModal.hide("modal-mark")},resetData:function(){this.listMultipleQuestion=[],this.listEssayQuestion=[],this.currentScoreMultiple=0,this.currentScoreEssay=0,this.totalScoreMultiple=0,this.totalScoreEssay=0,this.totalScore=0,this.dataRequest={},this.$emit("resetUserTestId")},getTestById:function(){var t=this;return l()(o.a.mark(function e(){var a,n,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={test_id:t.userTestId},e.prev=1,e.next=4,Ti(a);case 4:if(!(n=e.sent).data.success){e.next=14;break}(i=n.data.data).hasOwnProperty("essay")&&(t.listEssayQuestion=i.essay.hasOwnProperty("questions")?i.essay.questions:[],t.totalScoreEssay=i.essay.hasOwnProperty("score_config")?i.essay.score_config:0,t.listEssayQuestion=t.listEssayQuestion.map(function(t){return{id:t.id,answer:t.answer,content:t.content,score_config:t.score_config,user_answer:t.user_answer||"",score:t.score||0,comment:t.comment||""}}),t.currentScoreEssay=t.listEssayQuestion.reduce(function(t,e){return t+ +e.score},0),t.currentScoreEssay=Math.round(100*+t.currentScoreEssay)/100),i.hasOwnProperty("multiple_choice")&&(t.listMultipleQuestion=i.multiple_choice.hasOwnProperty("questions")?i.multiple_choice.questions:[],t.totalScoreMultiple=i.multiple_choice.hasOwnProperty("score_config")?i.multiple_choice.score_config:0,t.currentScoreMultiple=i.multiple_choice.hasOwnProperty("total_score")?+i.multiple_choice.total_score:0),i.hasOwnProperty("benchmark")&&(t.minimumScore=+i.benchmark),t.totalScore=t.currentScoreEssay+t.currentScoreMultiple,t.totalScore=Math.round(100*+t.totalScore)/100,e.next=15;break;case 14:return e.abrupt("return",Me.a.showMessage(n.data.message||"Có lỗi xảy ra khi lấy danh sách câu hỏi","warning"));case 15:e.next=22;break;case 17:if(e.prev=17,e.t0=e.catch(1),console.log(e.t0),422!=+e.t0.response.status){e.next=22;break}return e.abrupt("return",Me.a.showMessage(e.t0.response.data.message,"warning"));case 22:case"end":return e.stop()}},e,t,[[1,17]])}))()}}};var Ni=function(t){a("MxZi")},Ri=Object(y.a)(Oi,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{staticClass:"modal-mark-cus",attrs:{id:"modal-mark",title:t.nameModal,"header-class":"justify-content-center header-modal-custom",size:"lg","hide-footer":"",static:""},on:{hidden:function(e){return t.resetData()}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"container-cus step-2 small-scrollbar test-left"},[a("div",{staticClass:"period-test"},[t.listMultipleQuestion.length>0?a("div",{staticClass:"mark-essay",staticStyle:{"margin-bottom":"1.5rem"}},[a("div",{staticClass:"mark-header row"},[a("span",{staticClass:"mark-title col-9"},[t._v("PHẦN TRẮC NGHIỆM ")]),t._v(" "),a("span",{staticClass:"change-mark col-3 row"},[a("span",{staticClass:"span-change-mark"},[a("span",{staticClass:"span-first"},[t._v(t._s(t.currentScoreMultiple)+" / "+t._s(t.totalScoreMultiple)+" điểm")])])])]),t._v(" "),a("div",{staticClass:"mark-content"},t._l(t.listMultipleQuestion,function(e,n){return a("div",{staticClass:"mark-detail-question",attrs:{id:"mark_"+t.userTestId+e.id}},[a("div",{staticClass:"question-cus"},[a("span",{staticStyle:{display:"inline-block","white-space":"pre-wrap"}},[t._v("Câu "+t._s(n+1)+": ")]),t._v(" "),a("span",{domProps:{innerHTML:t._s(t.formattedText(e.content))}})]),t._v(" "),t._l(e.answers||[],function(n,i){return a("div",{staticClass:"change-mark-container answer-cus d-flex",attrs:{id:"answer"+t.userTestId+n.id}},["selected"===n.selected?a("div",{staticClass:"d-inline-block"},["correct"===n.is_correct?a("div",[a("div",{staticClass:"checkbox-round border",class:{"border-radius-ghtk-4":"multiple"===e.type}},[a("div",{staticClass:"checked correct",class:{"border-radius-ghtk-4":"multiple"===e.type}},["multiple"===e.type?a("div",{staticClass:"text-center text-white line-height-1-rem"},[t._v("✔")]):t._e()])])]):a("div",[a("div",{staticClass:"checkbox-round",class:{"border-radius-ghtk-4":"multiple"===e.type}},[a("div",{staticClass:"checked wrong",class:{"border-radius-ghtk-4":"multiple"===e.type}},["multiple"===e.type?a("div",{staticClass:"text-center text-white line-height-1-rem"},[t._v("✖")]):t._e()])])])]):a("div",{staticClass:"checkbox-round",class:{"border-radius-ghtk-4":"multiple"===e.type}}),t._v(" "),a("div",{staticClass:"ml-2"},[a("span",{staticStyle:{display:"inline-block","white-space":"pre-wrap"}},[t._v(t._s(String.fromCharCode(97+i).toUpperCase())+" ")]),t._v(" "),a("span",{domProps:{innerHTML:t._s(t.formattedText(n.content))}})])])})],2)}),0)]):t._e(),t._v(" "),t._l(t.listEssayQuestion,function(e,n){return a("div",{staticClass:"mark-essay",staticStyle:{"margin-bottom":"1.5rem"},attrs:{id:"mark_"+t.userTestId+e.id}},[0==+n?a("div",{staticClass:"mark-header row"},[a("span",{staticClass:"mark-title col-9"},[t._v("PHẦN TỰ LUẬN")]),t._v(" "),a("span",{staticClass:"change-mark col-3 row"},[a("span",{staticClass:"span-change-mark"},[a("span",{staticClass:"span-first"},[t._v(t._s(t.currentScoreEssay)+" / "+t._s(t.totalScoreEssay)+" điểm")])])])]):t._e(),t._v(" "),a("div",{staticClass:"mark-content"},[a("div",{staticClass:"mark-detail-question row"},[a("div",{staticClass:"col-10 question-cus"},[a("span",{staticStyle:{"white-space":"pre-wrap"}},[t._v("Câu "+t._s(t.listMultipleQuestion.length+n+1)+": ")]),t._v(" "),a("span",{domProps:{innerHTML:t._s(t.formattedText(e.content))}})]),t._v(" "),a("span",{staticClass:"col-2 change-mark-container"},[a("span",{staticClass:"span-mark-detail"},[a("span",{staticClass:"char-cus",style:t.getStyle(e.score_config,"char-cus")},[t._v("/")]),t._v(" "),a("span",{staticClass:"score-config",style:t.getStyle(e.score_config,"score")},[t._v(" "+t._s(e.score_config))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.score,expression:"question.score"}],class:1===String(e.score).length?"detail-score":"detail-score-4",attrs:{type:"number",id:"score"+t.userTestId+e.id,name:"",step:"0.01",min:"0.00",max:"10.00",disabled:e.user_answer&&0===e.user_answer.length},domProps:{value:e.score},on:{input:[function(a){a.target.composing||t.$set(e,"score",a.target.value)},function(a){return t.calculateScore(e)}]}})])])]),t._v(" "),a("div",{staticClass:"answer-essay row"},[a("div",{staticClass:"col-6 answer-rookie"},[a("label",{attrs:{for:""}},[t._v("Câu trả lời của học viên")]),t._v(" "),a("div",{staticClass:"answer-rookie-content",staticStyle:{display:"flex"}},[a("p",{style:e.user_answer&&0===e.user_answer.length||null===e.user_answer||""===e.user_answer?"color: red; margin: auto":""},[e.user_answer&&e.user_answer.length>0?a("span",{domProps:{innerHTML:t._s(t.formattedText(e.user_answer))}}):a("span",[t._v(t._s("Không có câu trả lời từ học viên"))])])])]),t._v(" "),a("div",{staticClass:"col-6 answer-test"},[a("label",{attrs:{for:""}},[t._v("Đáp án")]),t._v(" "),a("div",{staticClass:"answer-test-content"},[a("span",{domProps:{innerHTML:t._s(t.formattedText(e.answer))}})])])]),t._v(" "),a("div",{staticClass:"review row"},[a("label",{attrs:{for:""}},[t._v("Nhận xét")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comment,expression:"question.comment"}],staticClass:"inp-content",style:e.comment&&e.comment.length>200?"outline: 1px solid red;":"",attrs:{id:"textarea"+t.userTestId+e.id,placeholder:"Nhập nhận xét từ 0 - 200 ký tự",disabled:e.user_answer&&0===e.user_answer.length},domProps:{value:e.comment},on:{click:function(a){return t.getClass(e.id)},input:function(a){a.target.composing||t.$set(e,"comment",a.target.value)}}}),t._v(" "),a("span",{staticClass:"number-characters"},[t._v(t._s(e.comment&&e.comment.length||0)+" / 200")])])])])})],2)]),t._v(" "),a("div",{staticClass:"footer-cus"},[a("div",{staticClass:"total-mark"},[a("span",{staticClass:"wrap-mark"},[a("span",[t._v("TỔNG ĐIỂM: ")]),t._v(" "),a("span",{staticClass:"mark-final"},[t._v(t._s(+t.totalScore.toFixed(2))+"/10")])])]),t._v(" "),a("div",{staticClass:"text-center mt-4"},[a("button",{staticClass:"btn btn-ghtk btn-md rounded",on:{click:t.submit}},[t._v("\n            Xác nhận\n          ")])])])]),t._v(" "),a("ConfirmMarkModal",{attrs:{username:t.username,"total-score":t.totalScore,"minimum-score":t.minimumScore,"data-request":t.dataRequest,"id-student":t.idStudent,"id-period":t.idPeriod},on:{successMark:t.successMark}})],1)},[],!1,Ni,"data-v-611fc3d2",null).exports,Ui={name:"modal-edit-period-file",components:{ViewDocument:en},props:{id:{default:"modal-edit-period-file"},period:{type:Object,default:function(t){return{filePeriod:[],fileExtract:[]}}}},data:function(t){return{}},computed:{order_number:function(){return this.period&&this.period.ErpTpPeriod&&this.period.ErpTpPeriod.order_number},files:function(){if(!this.period)return[];var t=[];return this.period.file.forEach(function(e){e&&t.push(e)}),t}},methods:{formatDate:function(t,e){return Ye()(t||null).format(e||"DD-MM-YYYY")}}},$i={name:"list-period-file",components:{ModalEditPeriodFile:Object(y.a)(Ui,function(){var t=this.$createElement,e=this._self._c||t;return e("b-modal",{attrs:{id:this.id,"title-class":"font-weight-bold w-100","header-class":"text-center","modal-class":"modal-md","hide-footer":""}},[e("h4",{staticClass:"w-100 m-0",attrs:{slot:"modal-header"},slot:"modal-header"},[this._v("Tài liệu học buổi "+this._s(this.order_number))]),this._v(" "),e("ViewDocument",{attrs:{lessons:this.files}})],1)},[],!1,null,null,null).exports},props:{periods:{type:Array,default:function(t){return[]}}},data:function(t){return{curPeriod:null}},computed:{helper:function(){return Me.a},modalEditPeriodFileId:function(){return"modal-edit-period-file-"+Math.random()}},methods:{getFirstFile:function(t){var e=t.file&&t.file[0];return e||null},showPeriodFile:function(t){this.curPeriod=t,this.$bvModal.show(this.modalEditPeriodFileId)},imageUrlRender:function(){return Da.DEFAULT_THUMBNAIL}}};var Hi=function(t){a("glWn")},Bi=Object(y.a)($i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"profile-document"},[t._l(t.periods||[],function(e,n){return[e.num_file>0?a("div",{key:e.ErpTpClassPeriod.id,staticClass:"profile-document__element",class:e.num_file>n?"mr-1":"",on:{click:function(a){return t.showPeriodFile(e)}}},[a("div",{staticClass:"document-type-desc"},[t._v("\n        Tài liệu buổi "+t._s(e.ErpTpPeriod.order_number)+"\n      ")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.num_file>1,expression:"period.num_file > 1"}],staticClass:"num-img-extend"},[t._v("\n        +"+t._s(e.num_file-1)+"\n      ")]),t._v(" "),a("span",[a("img",{staticClass:"image-document",attrs:{src:t.imageUrlRender(),alt:"Tài liệu buổi "+e.ErpTpPeriod.order_number}})])]):t._e()]}),t._v(" "),a("ModalEditPeriodFile",{attrs:{period:t.curPeriod,id:t.modalEditPeriodFileId}})],2)},[],!1,Hi,"data-v-2ffc4332",null).exports;var ji=function(t){a("6aA6"),a("HZ8Y")},Fi=Object(y.a)({name:"modal-student-no-mark",components:{},props:["listStudentNoMark"],data:function(t){return{}},created:function(){},computed:{},watch:{},methods:{hideModal:function(){this.$bvModal.hide("modal-student-no-mark")}}},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{staticClass:"modal-std",class:"modal-custom modal-custom-500",attrs:{id:"modal-student-no-mark",centered:"",title:"Thông báo","hide-header":"","hide-footer":"",static:""}},[a("div",{staticClass:"modal-header-custom text-center",staticStyle:{"line-height":"2rem"}},[a("span",{staticClass:"text-header"},[t._v("Thông báo")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.hideModal()}}},[t._v("×")])]),t._v(" "),a("div",{staticClass:"content-notice"},[a("div",{staticClass:"title-cus"},[t._v("Bạn không thể hoàn thành buổi học do có các học viên chưa được chấm điểm:")]),t._v(" "),t._l(t.listStudentNoMark,function(e,n){return a("div",{staticClass:"wrap-notice",attrs:{id:n}},[t._v("\n        "+t._s(n+1)+". "+t._s(e.fullname)+" ("+t._s(e.username)+")\n    ")])})],2),t._v(" "),a("div",{staticClass:"text-center"},[a("b-btn",{staticClass:"mt-4 rounded mb-2 btn-ghtk font-initial",staticStyle:{"line-height":"1rem",width:"8rem"},attrs:{size:"md"},on:{click:function(e){return t.hideModal()}}},[t._v("OK")])],1)])},[],!1,ji,"data-v-36dd4561",null).exports,qi=a("IC97"),Yi=a("VvlD"),zi={name:"modal-create-appointment",components:{Multiselect:la.a,Datepicker:qi.a,SingleSelectStation:oa.a},props:["classDetail","triggerCreateAppointment"],data:function(t){return{optionStart:{day:null,hour:null,minute:null},optionEnd:{day:null,hour:null,minute:null},stationId:null,optionRemind:{value:null,options:[{text:"Nhắc trước",value:null},{text:"Nhắc trước 15 phút",value:15},{text:"Nhắc trước 30 phút",value:30},{text:"Nhắc trước 1 tiếng",value:60}]},appointmentHourOptions:Yi.a.getListHourOptions(),appointmentMinuteOptions:Yi.a.getListMinuteOptions(),note:"",title:"",loading:!1,disableAction:!1,classInfo:null,isShowRemoveAppointment:!1}},created:function(){},computed:{},watch:{triggerCreateAppointment:{handler:function(t,e){this.classInfo=this.classDetail,this.setData(this.classInfo),this.showBtnRemoveAppointment(this.classInfo)}}},methods:{disableToDate:function(){return Ye()().subtract(1,"days").toDate()},showBtnRemoveAppointment:function(t){null!=t.period.start_appointment?this.isShowRemoveAppointment=!0:this.isShowRemoveAppointment=!1},hideModal:function(){this.$bvModal.hide("modal-create-appointment")},setData:function(t){null!=t.period.start_appointment?this.setValueDataClassPeriod(t):this.setDefaultData(t)},setValueDataClassPeriod:function(t){var e=Ye()(t.period.start_appointment);this.optionStart.day=e.toDate(),this.optionStart.hour=e.format("HH"),this.optionStart.minute=e.format("mm");var a=Ye()(t.period.finish_appointment);this.optionEnd.day=a.toDate(),this.optionEnd.hour=a.format("HH"),this.optionEnd.minute=a.format("mm"),this.stationId=t.period.address_id,this.optionRemind.value=t.period.remind_appointment,this.note=t.period.note_appointment,this.title=t.period.title_appointment},setDefaultData:function(){var t=Ye()().add(5,"minutes");this.optionStart.day=t.toDate(),this.optionStart.hour=t.format("HH"),this.optionStart.minute=t.format("mm");var e=t.add(30,"minutes");this.optionEnd.day=e.toDate(),this.optionEnd.hour=e.format("HH"),this.optionEnd.minute=e.format("mm"),this.stationId=4558,this.optionRemind.value=null,this.title="Lịch hẹn",this.note=""},sentAppointment:function(){this.disableAction=!0;var t=Ye()(this.optionStart.day).format("YYYY-MM-DD"),e=Ye()(this.optionEnd.day).format("YYYY-MM-DD"),a={class_period_id:this.classInfo.period.id,start_appointment:t+" "+this.optionStart.hour+":"+this.optionStart.minute+":00",finish_appointment:e+" "+this.optionEnd.hour+":"+this.optionEnd.minute+":00",address_id:this.stationId,note_appointment:this.note,title_appointment:this.title,remind_appointment:this.optionRemind.value};null==this.classInfo.period.start_appointment?this.createAppointment(a):this.updateAppointment(a)},sentRemoveAppointment:function(){this.disableAction=!0;var t={class_period_id:this.classInfo.period.id};this.removeAppointment(t)},createAppointment:function(t){var e=this;ca.a.createAppointment(t).then(function(t){e.showMessage(t)}).catch(function(t){t.response&&t.response.data&&t.response.data.message&&Me.a.showMessage(t.response.data.message)}).then(function(){e.disableAction=!1})},updateAppointment:function(t){var e=this;ca.a.updateAppointment(t).then(function(t){e.showMessage(t)}).catch(function(t){t.response&&t.response.data&&t.response.data.message&&Me.a.showMessage(t.response.data.message)}).then(function(){e.disableAction=!1})},removeAppointment:function(t){var e=this;ca.a.removeAppointment(t).then(function(t){e.showMessage(t)}).catch(function(t){t.response&&t.response.data&&t.response.data.message&&Me.a.showMessage(t.response.data.message)}).then(function(){e.disableAction=!1})},showMessage:function(t){t.data.success?(Me.a.showMessage(t.data.message,"success"),this.$bvModal.hide("modal-create-appointment"),this.$emit("refreshPage")):Me.a.showMessage(t.data.message||"Gặp lỗi khi cập nhật lịch hẹn !","warning")}}};var Gi=function(t){a("6aA6"),a("1M/v")},Ki=Object(y.a)(zi,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{class:"modal-custom modal-custom-600",attrs:{id:"modal-create-appointment",centered:"",title:"Hẹn lịch","hide-header":"","hide-footer":"",static:""},on:{hidden:t.hideModal}},[a("div",{staticClass:"modal-header-custom text-center",staticStyle:{"line-height":"2rem"}},[a("span",{staticClass:"text-header"},[t._v("Hẹn lịch")]),t._v(" "),a("button",{staticClass:"close",staticStyle:{"font-size":"27px"},attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.hideModal()}}},[t._v("×")])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("div",{staticClass:"p-4"},[a("b-row",{staticClass:"d-flex align-items-center mb-2"},[a("b-col",{staticClass:"pr-0",attrs:{md:"3"}},[a("b",{staticClass:"b-label"},[t._v("Tiêu đề"),a("span",{staticClass:"text-danger"},[t._v("*")])])]),t._v(" "),a("b-col",{staticClass:"pl-0",attrs:{md:"9"}},[a("b-input",{model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)],1),t._v(" "),a("b-row",{staticClass:"d-flex align-items-center mb-2"},[a("b-col",{staticClass:"pr-0",attrs:{md:"3"}},[a("b",{staticClass:"b-label"},[t._v("Mô tả")])]),t._v(" "),a("b-col",{staticClass:"pl-0",attrs:{md:"9"}},[a("b-textarea",{model:{value:t.note,callback:function(e){t.note=e},expression:"note"}})],1)],1),t._v(" "),a("b-row",{staticClass:"d-flex align-items-center mb-2"},[a("b-col",{staticClass:"pr-0",attrs:{md:"3"}},[a("b",{staticClass:"b-label"},[t._v("Thời gian"),a("span",{staticClass:"text-danger"},[t._v("*")])])]),t._v(" "),a("b-col",{staticClass:"pl-0",attrs:{md:"9"}},[a("div",{staticClass:"d-flex justify-content-between"},[a("div",{staticClass:"w-60"},[a("Datepicker",{staticClass:"from-date",attrs:{format:"dd-MM-yyyy","disabled-dates":{to:t.disableToDate()},bootstrapStyling:!0,placeholder:"Ngày bắt đầu"},model:{value:t.optionStart.day,callback:function(e){t.$set(t.optionStart,"day",e)},expression:"optionStart.day"}})],1),t._v(" "),a("div",[a("b-select",{attrs:{placeholder:"Giờ",options:t.appointmentHourOptions},model:{value:t.optionStart.hour,callback:function(e){t.$set(t.optionStart,"hour",e)},expression:"optionStart.hour"}})],1),t._v(" "),a("div",[a("b-select",{attrs:{placeholder:"Phút",options:t.appointmentMinuteOptions},model:{value:t.optionStart.minute,callback:function(e){t.$set(t.optionStart,"minute",e)},expression:"optionStart.minute"}})],1)]),t._v(" "),a("div",{staticClass:"d-flex justify-content-between mt-1"},[a("div",{staticClass:"w-60"},[a("Datepicker",{staticClass:"from-date",attrs:{format:"dd-MM-yyyy",bootstrapStyling:!0,placeholder:"Ngày kết thúc"},model:{value:t.optionEnd.day,callback:function(e){t.$set(t.optionEnd,"day",e)},expression:"optionEnd.day"}})],1),t._v(" "),a("div",[a("b-select",{attrs:{placeholder:"Giờ",options:t.appointmentHourOptions},model:{value:t.optionEnd.hour,callback:function(e){t.$set(t.optionEnd,"hour",e)},expression:"optionEnd.hour"}})],1),t._v(" "),a("div",[a("b-select",{attrs:{placeholder:"Phút",options:t.appointmentMinuteOptions},model:{value:t.optionEnd.minute,callback:function(e){t.$set(t.optionEnd,"minute",e)},expression:"optionEnd.minute"}})],1)])])],1),t._v(" "),a("b-row",{staticClass:"d-flex align-items-center mb-2"},[a("b-col",{staticClass:"pr-0",attrs:{md:"3"}},[a("b",{staticClass:"b-label"},[t._v("Nhắc trước")])]),t._v(" "),a("b-col",{staticClass:"pl-0",attrs:{md:"9"}},[a("b-select",{staticClass:"select-ghtk",attrs:{placeholder:"Nhắc trước",options:t.optionRemind.options},model:{value:t.optionRemind.value,callback:function(e){t.$set(t.optionRemind,"value",e)},expression:"optionRemind.value"}})],1)],1),t._v(" "),a("b-row",{staticClass:"d-flex align-items-center mb-2"},[a("b-col",{staticClass:"pr-0",attrs:{md:"3"}},[a("b",{staticClass:"b-label"},[t._v("Địa điểm"),a("span",{staticClass:"text-danger"},[t._v("*")])])]),t._v(" "),a("b-col",{staticClass:"pl-0",attrs:{md:"9"}},[a("SingleSelectStation",{attrs:{placeholder:"Địa điểm",stationId:t.stationId},on:{handleSelectedStation:function(e){return t.stationId=e?e.id:null}}})],1)],1)],1)]),t._v(" "),a("div",{staticClass:"text-center"},[a("b-btn",{staticClass:"mt-4 rounded mb-2 btn-ghtk font-initial",staticStyle:{"line-height":"1rem",width:"8rem"},attrs:{size:"md",disabled:t.disableAction},on:{click:function(e){return t.sentAppointment()}}},[t._v("Xác nhận")]),t._v(" "),this.isShowRemoveAppointment?a("b-btn",{staticClass:"mt-4 rounded mb-2 btn-outline-danger",staticStyle:{"line-height":"1rem",width:"8rem"},attrs:{size:"md",disabled:t.disableAction},on:{click:function(e){return t.sentRemoveAppointment()}}},[t._v("Xóa")]):t._e()],1)])},[],!1,Gi,"data-v-4e6bd358",null).exports,Vi={name:"modal-review-lesson",components:{Multiselect:la.a,trainingService:ca.a,commonHelpers:Me.a,ReviewStudentEntity:Yn},props:{dataReviews:null},data:function(t){return{loading:!1,isActiveTabLearningSpirit:"",isActiveTabAttitude:"",params:{learningSpirit:null,attitude:null,note:null},isDisabled:!0,isPeriodFinished:!1}},created:function(){},computed:{ReviewStudentEntity:function(){return Yn}},watch:{dataReviews:function(t,e){this.initDataModal()},"params.note":function(t,e){this.params.note&&this.params.note.length>0?this.isDisabled=!1:this.params.learningSpirit||this.params.attitude||(this.isDisabled=!0)}},methods:{initDataModal:function(){this.dataReviews&&(this.resetData(),this.getEvaluateByUserAndPeriod(),"finished"===this.dataReviews.status_period&&(this.isPeriodFinished=!0))},resetData:function(){this.isActiveTabLearningSpirit="",this.isActiveTabAttitude="",this.isPeriodFinished=!1,this.params.learningSpirit=null,this.params.attitude=null,this.params.note=null,this.isDisabled=!0},getEvaluateByUserAndPeriod:function(){var t=this;return l()(o.a.mark(function e(){var a,n,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.dataReviews&&t.dataReviews.class_period_id&&t.dataReviews.user_id){e.next=2;break}return e.abrupt("return",!0);case 2:return a={class_period_id:t.dataReviews.class_period_id,user_id:[t.dataReviews.user_id]},t.loading=!0,e.prev=4,e.next=7,ca.a.getEvaluateByUserAndPeriod(a);case 7:(n=e.sent).data.success?(i=null,n.data.data&&n.data.data[0]&&(i=n.data.data[0]),i&&(i.learning_spirit&&(t.isActiveTabLearningSpirit="status_learning_spirit_"+i.learning_spirit,t.params.learningSpirit=i.learning_spirit),i.assiduous&&(t.isActiveTabAttitude="status_attitude_"+i.assiduous,t.params.assiduous=i.assiduous),i.note&&(t.params.note=i.note))):Me.a.showMessage(n.data.message||"Có lỗi xảy ra khi lấy thông tin đánh giá","warning"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),e.t0.response&&e.t0.response.data&&e.t0.response.data.message&&Me.a.showMessage(e.t0.response.data.message||"Có lỗi xảy ra","warning");case 14:return e.prev=14,t.loading=!1,e.finish(14);case 17:case"end":return e.stop()}},e,t,[[4,11,14,17]])}))()},saveReviews:function(){var t=this;return l()(o.a.mark(function e(){var a,n,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isDisabled){e.next=2;break}return e.abrupt("return",!0);case 2:if((a=t.validateData()).success){e.next=5;break}return e.abrupt("return",Me.a.showMessage(a.message,"warning"));case 5:return n={class_period_id:t.dataReviews.class_period_id,user_id:[t.dataReviews.user_id]},t.params.learningSpirit&&(n.learning_spirit=[t.params.learningSpirit]),t.params.attitude&&(n.assiduous=[t.params.attitude]),t.params.note&&(n.note=[t.params.note]),t.loading=!0,e.prev=10,e.next=13,ca.a.createEvaluate(n);case 13:(i=e.sent).data.success?(Me.a.showMessage(i.data.message||"Thành công","success"),t.$emit("refreshReview"),t.hideModal()):Me.a.showMessage(i.data.message||"Có lỗi xảy ra khi đánh giá","warning"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(10),e.t0.response&&e.t0.response.data&&e.t0.response.data.message&&Me.a.showMessage(e.t0.response.data.message||"Có lỗi xảy ra","warning");case 20:return e.prev=20,t.loading=!1,e.finish(20);case 23:case"end":return e.stop()}},e,t,[[10,17,20,23]])}))()},validateData:function(){return this.dataReviews?this.dataReviews.class_period_id?this.dataReviews.user_id&&this.dataReviews.user_id?this.params.learningSpirit||this.params.attitude||this.params.note?{success:!0}:{success:!1,message:"Vui lòng chọn đánh giá !"}:{success:!1,message:"Không xác định được user cần đánh giá !"}:{success:!1,message:"Không xác định được buổi học !"}:{success:!1,message:"Thông tin đánh giá trống !"}},showTooltip:function(t){document.getElementById("tooltip_"+t).style.display="block"},hideTooltip:function(t){document.getElementById("tooltip_"+t).style.display="none"},hideModal:function(){this.$bvModal.hide("id-modal-review-lesson")},handleChoiceReview:function(t,e){if(this.isPeriodFinished)return!0;switch(e){case"learning-spirit":this.isActiveTabLearningSpirit==="status_learning_spirit_"+t.id?(this.isActiveTabLearningSpirit="",this.params.learningSpirit=null,this.params.attitude||this.params.note||(this.isDisabled=!0)):(this.isActiveTabLearningSpirit="status_learning_spirit_"+t.id,this.params.learningSpirit=t.id,this.isDisabled=!1);break;case"attitude":this.isActiveTabAttitude==="status_attitude_"+t.id?(this.isActiveTabAttitude="",this.params.attitude=null,this.params.learningSpirit||this.params.note||(this.isDisabled=!0)):(this.isActiveTabAttitude="status_attitude_"+t.id,this.isDisabled=!1,this.params.attitude=t.id)}}}};var Qi=function(t){a("6aA6"),a("vi95")},Xi=Object(y.a)(Vi,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{class:"modal-custom modal-custom-730",attrs:{id:"id-modal-review-lesson",centered:"","hide-header":"","hide-footer":"",static:""},on:{hidden:t.hideModal}},[a("div",{staticClass:"modal-header-custom text-center"},[a("span",{staticClass:"text-header"},[t._v("Đánh giá học viên")]),t._v(" "),a("button",{staticClass:"close",staticStyle:{"font-size":"27px"},attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.hideModal()}}},[t._v("×")])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("div",{staticClass:"p-4"},[a("b-row",{staticClass:"d-flex align-items-center m-0 p-0"},[a("div",{staticClass:"pr-0"},[a("b",{staticClass:"b-label"},[t._v("1. Tinh thần học tập")])]),t._v(" "),a("div",{staticClass:"pr-0 pr-0 mt-3 mb-4"},[a("div",{staticClass:"review-options"},t._l(t.ReviewStudentEntity.learningSpirits,function(e,n){return a("div",{key:"status_learning_spirit_"+n,staticClass:"px-1 d-inline-block wrap-reviews tooltip-container"},[a("b-button",{staticClass:"rounded pd-5 w-100 btn-pill btn-reviews",class:t.isActiveTabLearningSpirit!=="status_learning_spirit_"+e.id&&t.isPeriodFinished?"no-hover":"",attrs:{variant:t.isActiveTabLearningSpirit==="status_learning_spirit_"+e.id?"ghtk":"outline-ghtk-color-custom",id:"id_btn_review_"+n},on:{click:function(a){return t.handleChoiceReview(e,"learning-spirit")},mouseover:function(e){return t.showTooltip(n)},mouseout:function(e){return t.hideTooltip(n)}}},[a("span",[t._v(t._s(e.name))])]),t._v(" "),a("div",{staticClass:"tooltip-content",attrs:{id:"tooltip_"+n}},[t._v(t._s(e.tooltip))])],1)}),0)])]),t._v(" "),a("b-row",{staticClass:"d-flex align-items-center mb-2",staticStyle:{margin:"0",padding:"0"}},[a("div",{staticClass:"pr-0"},[a("b",{staticClass:"b-label"},[t._v("2. Chuyên cần")])]),t._v(" "),a("div",{staticClass:"pr-0 pr-0 mt-3 mb-4"},[a("div",{staticClass:"review-options"},t._l(t.ReviewStudentEntity.attitudes,function(e,n){return a("div",{key:"status_attitude_"+n,staticClass:"px-1 d-inline-block wrap-reviews"},[a("b-btn",{staticClass:"rounded pd-5 w-100 btn-pill btn-reviews",class:t.isActiveTabAttitude!=="status_attitude_"+e.id&&t.isPeriodFinished?"no-hover":"",attrs:{variant:t.isActiveTabAttitude==="status_attitude_"+e.id?"ghtk":"outline-ghtk-color-custom"},on:{click:function(a){return t.handleChoiceReview(e,"attitude")}}},[a("span",[t._v(t._s(e.name))])])],1)}),0)])]),t._v(" "),a("div",{staticClass:"align-items-center m-0 p-0"},[a("div",{staticClass:"pr-0"},[a("b",{staticClass:"b-label"},[t._v("3. Nhận xét riêng (nếu có)")])]),t._v(" "),a("div",{staticClass:"pr-0 pr-0 mt-3 mb-2"},[a("b-form-input",{attrs:{placeholder:"Nhập nhận xét...",disabled:t.isPeriodFinished},model:{value:t.params.note,callback:function(e){t.$set(t.params,"note",e)},expression:"params.note"}})],1)])],1)]),t._v(" "),a("div",{staticClass:"text-center"},[a("b-btn",{staticClass:"rounded mb-3 btn-ghtk font-initial btn-saveReviews",attrs:{size:"md",disabled:t.isDisabled||t.isPeriodFinished},on:{click:t.saveReviews}},[t._v("Xác nhận")])],1)])},[],!1,Qi,"data-v-1215f03e",null).exports,Wi=a("//Fk"),Ji=a.n(Wi),Zi={name:"modal-confirm-complete-period",components:{Multiselect:la.a},props:{dataConfirm:null},data:function(t){return{loading:!1,isCompleteSuccess:!1,currentPeriod:0,totalPeriod:0}},created:function(){},watch:{dataConfirm:{immediate:!0,handler:function(t,e){this.dataConfirm&&this.dataConfirm.dataComplete&&(this.currentPeriod=this.dataConfirm.dataComplete.order||0,this.totalPeriod=this.dataConfirm.dataComplete.total_periods||0)},deep:!0}},methods:{confirmCompletePeriod:function(){this.$bvModal.show("id-modal-confirm-complete-period")},hideModalConfirm:function(){this.$emit("closeModal"),this.$bvModal.hide("id-modal-confirm-complete-period"),this.isCompleteSuccess&&this.$bvModal.hide("modal-complete-period"),this.resetData()},resetData:function(){this.isCompleteSuccess=!1,this.currentPeriod=0,this.totalPeriod=0},confirm:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.dataConfirm){e.next=2;break}return e.abrupt("return",!0);case 2:return a={class_period_id:null,user_id:[],learning_spirit:[],assiduous:[],note:[]},n=t.dataConfirm.dataComplete||null,t.dataConfirm.dataComplete&&t.dataConfirm.dataComplete.class_period_id&&(a.class_period_id=t.dataConfirm.dataComplete.class_period_id),t.dataConfirm.dataReviews&&t.dataConfirm.dataReviews.forEach(function(t){t.user_id&&(t.learning_spirit||t.assiduous||t.note)&&(a.user_id.push(t.user_id),a.learning_spirit.push(t.learning_spirit&&+t.learning_spirit.id||null),a.assiduous.push(t.assiduous&&+t.assiduous.id||null),a.note.push(t.note||null))}),t.loading=!0,e.next=9,Ji.a.all([t.saveReviewListStudent(a),t.completePeriod(n)]).then(function(e){e&&e[1]&&"complete-error"===e[1]?(t.isCompleteSuccess=!1,t.$bvModal.hide("modal-complete-period"),t.$bvModal.hide("id-modal-confirm-complete-period")):t.isCompleteSuccess=!0,t.$emit("refreshReview")}).catch(function(t){return Me.a.showMessage("Có lỗi xảy ra","warning")}).finally(function(){t.loading=!1});case 9:case"end":return e.stop()}},e,t)}))()},saveReviewListStudent:function(t){var e=this;return l()(o.a.mark(function a(){var n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(0!=+t.user_id.length&&0!=+t.learning_spirit.length&&0!=+t.assiduous.length&&0!=+t.note.length){a.next=2;break}return a.abrupt("return",!0);case 2:return a.prev=2,a.next=5,ca.a.createEvaluate(t);case 5:(n=a.sent).data.success?e.hideModal():Me.a.showMessage(n.data.message||"Có lỗi xảy ra khi đánh giá","warning"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(2),a.t0.response&&a.t0.response.data&&a.t0.response.data.message&&Me.a.showMessage(a.t0.response.data.message||"Có lỗi xảy ra khi đánh giá","warning");case 12:return a.prev=12,a.finish(12);case 14:case"end":return a.stop()}},a,e,[[2,9,12,14]])}))()},completePeriod:function(t){var e=this;return l()(o.a.mark(function a(){var n,i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n={class_period_id:t.class_period_id,source_request:t.source_request},a.next=4,ca.a.completePeriod(n);case 4:if(!(i=a.sent).data.success){a.next=9;break}Me.a.showMessage(i.data.message,"success"),a.next=15;break;case 9:if(!(i.data&&i.data.data&&i.data.data&&i.data.data.length>0)){a.next=14;break}return e.$emit("showModalNotice",i.data.data),a.abrupt("return","complete-error");case 14:Me.a.showMessage(i.data.message||"Gặp lỗi khi thêm ghi chú !","warning");case 15:a.next=20;break;case 17:a.prev=17,a.t0=a.catch(0),a.t0.response&&a.t0.response.data&&a.t0.response.data.message&&Me.a.showMessage(a.t0.response.data.message||"Có lỗi xảy ra khi đánh giá","warning");case 20:return a.prev=20,a.finish(20);case 22:case"end":return a.stop()}},a,e,[[0,17,20,22]])}))()}}};var ts=function(t){a("6aA6"),a("SAS+")},es=Object(y.a)(Zi,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{class:"modal-custom modal-custom-500",attrs:{id:"id-modal-confirm-complete-period",centered:"",title:"Xác nhận hoàn thành","hide-header":"","hide-footer":"",static:""},on:{hidden:t.hideModalConfirm}},[a("div",{staticClass:"modal-header-custom text-center",staticStyle:{"line-height":"2rem"}},[a("span",{staticClass:"text-header"},[t._v(" "+t._s(t.isCompleteSuccess?"Thông báo":"Xác nhận hoàn thành"))]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.hideModalConfirm()}}},[t._v("×")])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content-custom"},[t.isCompleteSuccess?a("div",{staticClass:"content-custom text-align-center pb-0"},[a("p",[t._v("Hoàn thành buổi "+t._s(t.currentPeriod)+" thành công !")])]):a("div",{staticClass:"content-custom"},[a("p",[t._v("Xác nhận hoàn thành Buổi "+t._s(t.currentPeriod)+":")]),t._v(" "),+t.currentPeriod==+t.totalPeriod&&0!=+t.totalPeriod?a("p",[t._v("Tiến độ lớp học chuyển sang Hoàn thành")]):a("p",[t._v("Tiến độ lớp học chuyển sang Đang diễn ra Buổi "+t._s(Number(t.currentPeriod)+1))]),t._v(" "),a("p",[t._v("Bạn có chắc chắn muốn xác nhận ?")])])]),t._v(" "),a("div",{staticClass:"text-center mb-3"},[a("b-btn",{staticClass:"mt-1 btn-outline-success rounded mb-2 font-initial btn-custom mr-4",attrs:{size:"md"},on:{click:function(e){return t.hideModalConfirm()}}},[t._v("Đóng")]),t._v(" "),t.isCompleteSuccess?t._e():a("b-btn",{staticClass:"mt-1 rounded mb-2 btn-ghtk font-initial btn-custom",attrs:{disabled:t.loading,size:"md"},on:{click:function(e){return t.confirm()}}},[t._v("Xác nhận")])],1)])},[],!1,ts,"data-v-38e57ce4",null).exports,as={name:"modal-confirm-training",components:{SelectSuggest:An,MultiSelectProvince:fe.a,MultiSelectSyllabus:ha},props:{stationId:{default:null}},created:function(){},mounted:function(){document.addEventListener("click",this.handleClickOutside)},destroyed:function(){document.removeEventListener("click",this.handleClickOutside)},data:function(t){return{loading:!1,trainingId:null,syllabusFilter:{id:[],region:[]},reset:!1,listSyllabusFilter:[],listTraining:[],page:{total:0},filter:{name:[],province_id:[],page:1,id:[],perPage:10},searchTp:[],asyncLoading:!1,message:"Nhập ít nhất 2 ký tự",option:null,options:[]}},watch:{listTraining:function(t,e){this.listSyllabusFilter=this.listTraining}},methods:{findTp:function(t){var e=this;this.options=[],t.length<2?this.message="Nhập ít nhất 2 ký tự":(this.asyncLoading=!0,ca.a.getSyllabusesCreateClass({limit:20,name:t}).then(function(t){t.data.success?e.options=t.data.data.map(function(t){return{id:t.tpId,name:t.code+" - "+t.name}}):e.message="Không tìm thấy kết quả"}).catch(function(){e.message="Không tìm thấy kết quả"}).finally(),this.asyncLoading=!1)},handlePaginate:function(){this.getSyllabusesCreateClass()},onShown:function(){this.filter={name:[],id:[],province_id:[],page:1,perPage:10},this.getSyllabusesCreateClass()},getSyllabusesCreateClass:function(){var t=this;this.filter.id=this.searchTp.map(function(t){return t.id}),this.loading=!0,ca.a.getSyllabusesCreateClass(this.filter).then(function(e){e.data.success?(t.page.total=e.data.total||0,t.listTraining=e.data.data,Me.a.showMessage(e.data.message||"Lấy dữ liệu thành công","success")):Me.a.showMessage(e.data.message||"xảy ra lỗi!","warning")}).catch(function(t){console.log(t)}).then(function(){t.loading=!1})},createClass:function(){var t=this;if(this.trainingId){this.isConfirming=!0;var e={tp_id:this.trainingId,station_id:this.stationId};ca.a.createClass(e).then(function(e){e.data.success?(t.$emit("createClassSuccess",e.data.data),t.hideModal(),Me.a.showMessage("Tạo lớp học thành công","success")):Me.a.showMessage(e.data.message||"Lấy dữ liệu thất bại","warning")}).catch(function(t){t.response&&t.response.data&&t.response.data.message&&t.response.data.message.length>0?Me.a.showMessage(t.response.data.message,"warning"):Me.a.showMessage(t.message||"Có lỗi xảy ra!","error")}).finally(function(){t.loading=!1})}},hideModal:function(){this.trainingId=null,this.syllabusFilter={id:[],region:[]},this.reset=!this.reset,this.$bvModal.hide("modal-confirm-training")},handleProvinceSelected:function(t){var e=this;t?(this.filter.province_id=[],t.forEach(function(t){e.filter.province_id.push(+t.id)})):this.filter.province_id=[],this.getSyllabusesCreateClass()},handleSyllabusSelected:function(t){var e=this;t?(this.syllabusFilter.id=[],t.forEach(function(t){e.syllabusFilter.id.push(+t.id)})):this.syllabusFilter.id=[],this.filterSyllabus()},filterSyllabus:function(){var t=this;this.listSyllabusFilter=this.listTraining.filter(function(e){var a=!1;if(t.syllabusFilter.region)for(var n=0;n<t.syllabusFilter.region.length;n++){var i=t.syllabusFilter.region[n];e.address_id.length>0&&(e.address_id.includes(i.toString())||e.address_id.includes(i))&&(a=!0)}var s=t.syllabusFilter.id.includes(parseInt(e.tpId)),o=!t.syllabusFilter.id||!t.syllabusFilter.id.length||s,r=!t.syllabusFilter.region||!t.syllabusFilter.region.length||a;return o&&r})}}};var ns=function(t){a("6aA6"),a("KaSS")},is=Object(y.a)(as,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{class:"modal-custom-500",attrs:{"header-class":"text-header header-modal-custom justify-content-center header-modal-training",id:"modal-confirm-training",centered:"",static:"","hide-footer":""},on:{hidden:t.hideModal,shown:t.onShown}},[a("template",{slot:"modal-header"},[a("h4",{staticClass:"w-100 m-0 text-center"},[t._v("Chọn chương trình")])]),t._v(" "),a("div",[a("div",{staticClass:"list-training"},[a("div",{staticClass:"filter-training d-flex justify-content-center my-3"},[a("div",{staticClass:"autocomplete w-50",on:{focusout:function(e){t.isOpen=!1}}},[a("SelectSuggest",{attrs:{options:t.options,asyncLoading:t.asyncLoading,message:t.message,multiple:!0,placeholder:"Chọn chương trình"},on:{find:t.findTp,input:t.getSyllabusesCreateClass},model:{value:t.searchTp,callback:function(e){t.searchTp=e},expression:"searchTp"}})],1),t._v(" "),a("MultiSelectProvince",{staticClass:"ml-2 select-address",attrs:{"custom-class":"multiselect-ghtk multiselect-no-horizontal",placeholder:"Địa điểm","auto-close":!0,reset:t.reset},on:{handleProvinceSelected:function(e){return t.handleProvinceSelected.apply(void 0,arguments)}},model:{value:t.syllabusFilter.region,callback:function(e){t.$set(t.syllabusFilter,"region",e)},expression:"syllabusFilter.region"}})],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"box-list-training small-scrollbar"},[t.listTraining.length<1?a("div",{staticClass:"p-2 text-center"},[t._v(" Không có dữ liệu chương trình học! ")]):t._e(),t._v(" "),t._l(t.listSyllabusFilter,function(e,n){return a("div",{key:n,staticClass:"data-training d-flex align-items-center px-5 mb-2"},[a("div",{staticClass:"inp-check-box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.trainingId,expression:"trainingId"}],attrs:{type:"radio"},domProps:{value:e.tpId,checked:t._q(t.trainingId,e.tpId)},on:{change:function(a){t.trainingId=e.tpId}}})]),t._v(" "),a("div",{staticClass:"info-training ml-3 text-training"},[a("b",{staticClass:"text-training"},[t._v(t._s(e.name)+" | "+t._s(e.countOrderNumber)+" Buổi")]),t._v(" "),a("div",{staticClass:"text-training"},[t._v(t._s(e.region))])])])})],2),t._v(" "),a("div",{staticClass:"d-flex align-items-center mt-3"},[a("span",{staticClass:"text-center"},[t._v(t._s("Trang "+t.filter.page+" trên "+Math.ceil(t.page.total/t.filter.perPage)))]),t._v(" "),a("b-pagination",{staticClass:"ml-2 paginator-ghtk my-0",attrs:{size:"sm","total-rows":t.page.total,"per-page":t.filter.perPage},on:{input:t.handlePaginate},model:{value:t.filter.page,callback:function(e){t.$set(t.filter,"page",e)},expression:"filter.page"}})],1),t._v(" "),a("hr",{staticClass:"my-2"})]),t._v(" "),a("div",{staticClass:"btn-confirm d-flex justify-content-center"},[a("button",{staticClass:"btn btn-ghtk btn__confirm",attrs:{disabled:!t.trainingId},on:{click:t.createClass}},[t._v(" Xác nhận ")])])])],2)},[],!1,ns,"data-v-73f7580e",null).exports,ss={name:"ModalReviewStudent",props:{studentId:{default:null},classId:{default:null}},data:function(){return{review:null}},methods:{resetModal:function(){this.review=null},reviewStudent:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a={}).student_id=t.studentId,a.review=t.review,a.class_id=t.classId,t.isLoading=!0,e.prev=5,e.next=8,ca.a.reviewStudentAtEndCourse(a);case 8:(n=e.sent).data.success?(t.closeModal(),t.$emit("reviewStudentSuccess"),Cn.eventBus.$emit("reviewStudentSuccess",{studentId:t.studentId,log:n.data.data.message_log}),Me.a.showMessage(n.data.message,"success")):(Me.a.showMessage(n.data.message),t.review=""),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),console.log(e.t0),Me.a.showMessage("Đã có lỗi xảy ra");case 16:return e.prev=16,t.closeModal(),e.finish(16);case 19:case"end":return e.stop()}},e,t,[[5,12,16,19]])}))()},closeModal:function(){this.$bvModal.hide("modal-review-student")}}};var os=function(t){a("5g7j"),a("9RQE")},rs=Object(y.a)(ss,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{"modal-class":"modal-custom",centered:"",static:"",id:"modal-review-student","hide-footer":"","hide-header":""},on:{hide:function(e){return t.resetModal()}}},[a("div",{staticClass:"modal-title-contact"},[a("span",[t._v("Đánh giá học viên")])]),t._v(" "),a("div",{staticClass:"modal-review-student"},[a("div",[a("b-form-textarea",{attrs:{size:"lg",placeholder:"Nhập ghi chú, đánh giá học viên",rows:"4"},model:{value:t.review,callback:function(e){t.review=e},expression:"review"}})],1)]),t._v(" "),a("div",{staticClass:"text-center mt-3 mb-2"},[a("b-btn",{staticClass:"button-deny-modal",attrs:{variant:"secondary"},on:{click:function(e){return t.closeModal()}}},[t._v("Đóng")]),t._v(" "),a("b-btn",{staticClass:"button-deny-modal",attrs:{variant:"ghtk",id:"student-btn-save-add-note",name:"student-btn-save-add-note"},on:{click:function(e){return t.reviewStudent()}}},[t._v("Xác nhận")])],1)])},[],!1,os,"data-v-73b196c8",null).exports,ls={name:"slide-tab",props:{options:{},statistic:[],loading:!1,selected:null},data:function(){return{isActiveTab:null,tabScroll:{leftShow:!1,rightShow:!1},scrollLeft:0}},computed:{},mounted:function(){var t=document.getElementById("tab-work");t&&this.checkScrollTab(null,t),this.isActiveTab=this.selected,window.addEventListener("resize",this.handleScrollTab)},watch:{selected:function(t){this.isActiveTab=t,this.scrollLeft=document.getElementById("tab-work").scrollLeft},loading:function(){var t=l()(o.a.mark(function t(e){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=document.getElementById("tab-work"),!1===e&&this.$nextTick(function(){a.scrollLeft=this.scrollLeft,this.checkScrollTab(null,a)});case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},methods:{changeTab:function(t){t!==this.selected&&this.$emit("changeTab",t)},scrollTab:function(t,e){(t=document.getElementById(t))&&("right"===e?t.scrollLeft+=150:t.scrollLeft-=150,this.checkScrollTab(null,t))},handleScrollTab:function(){var t=document.getElementById("tab-work");t&&this.checkScrollTab(null,t)},checkScrollTab:function(t,e){e.scrollWidth>e.offsetWidth?(this.tabScroll.rightShow=!0,this.tabScroll.leftShow=!0):(this.tabScroll.rightShow=!1,this.tabScroll.leftShow=!1),e.scrollLeft<=0?this.tabScroll.leftShow=!1:e.offsetWidth+e.scrollLeft>=e.scrollWidth&&(this.tabScroll.rightShow=!1)}}};var cs=function(t){a("4+Wp")},ds=Object(y.a)(ls,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-right tab-work-scroll"},[a("div",{staticClass:"pre-tab pre-tab-left"},[t.tabScroll.leftShow?a("div",{staticClass:"pre-btn text-ghtk",on:{click:function(e){return t.scrollTab("tab-work","left")}}},[a("i",{staticClass:"ion ion-ios-arrow-back"})]):t._e()]),t._v(" "),a("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.checkScrollTab,expression:"checkScrollTab"},{name:"resize",rawName:"v-resize",value:t.checkScrollTab,expression:"checkScrollTab"}],staticClass:"work-options",attrs:{id:"tab-work"}},t._l(t.options,function(e){return a("div",{key:e.key,staticClass:"px-1 d-inline-block tab-work-element",class:t.isActiveTab===e.key?"active":""},[a("b-btn",{staticClass:"btn btn-pill mr-1",class:t.isActiveTab===e.key?"btn-ghtk":"btn-ghtk-disable",on:{click:function(a){return t.changeTab(e.key)}}},[a("span",[t._v(t._s(e.name))]),t._v(" "),a("span",[a("i",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"fas fa-spinner fa-pulse"}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.loading&&![null,void 0].includes(t.statistic[e.key]),expression:"!loading &&  ![null, undefined].includes(statistic[option.key])"}]},[t._v("\n            ("+t._s(t.statistic[e.key]||0)+")\n          ")])])])],1)}),0),t._v(" "),a("div",{staticClass:"pre-tab pre-tab-right"},[t.tabScroll.rightShow?a("div",{staticClass:"pre-btn text-ghtk",on:{click:function(e){return t.scrollTab("tab-work","right")}}},[a("i",{staticClass:"ion ion-ios-arrow-forward"})]):t._e()])])},[],!1,cs,"data-v-205361a8",null).exports,us={name:"ClassDetail",components:{ListAcademy:xn,ListPeriodFile:Bi},props:{classDetail:[],idx:null,triggerClickBtnSearch:null,triggerRollUpStudent:null,triggerCancelRollupStudent:null,dataAttendance:null,duty:null,showClass:[],studentFilter:{default:null}},data:function(t){return{logs:[],loading:!1,classId:null,note:""}},created:function(){this.getLogsClass()},watch:{classDetail:function(t,e){this.getLogsClass()}},methods:{showClassToggle:function(t){this.showClass["tab_"+t]=!this.showClass["tab_"+t]},getStatusPeriod:function(t){switch(t.status){case"coming_up":return"Sắp diễn ra buổi "+t.order;case"happening":return"Đang diễn ra buổi "+t.order;case"finished":return"Hoàn thành buổi "+t.order;default:return"N/A"}},isShowStartTime:function(t){return"happening"===t.class.status&&null!=t.period.start_appointment},formatDate:function(t,e){return Ye()(t||null).format(e||"DD-MM-YYYY")},showIcon:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"inline-block";document.getElementById(t).style.display=e},onDeleteTag:function(t){var e=this;return l()(o.a.mark(function a(){var n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!confirm("Bạn có chắc muốn xóa tag "+t.name+" ?")){a.next=7;break}return e.loading=!0,a.next=5,yn.a.detach({record_id:+t.record_id,table_name:t.table_name,hr_tag_id:+t.id});case 5:(n=a.sent).data.success?(e.actionUpdateRecord({action:"refreshHrTag"}),Me.a.showMessage(n.data.message||"Bỏ gắn tag thành công!","success")):Me.a.showMessage(n.data.message,"warning");case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),Me.a.showMessage(a.t0.message,"warning");case 12:return a.prev=12,e.loading=!1,a.finish(12);case 15:case"end":return a.stop()}},a,e,[[0,9,12,15]])}))()},getLogsClass:function(){var t=this;this.loading=!0,ca.a.getLogsClass({class_id:this.classDetail.class.id}).then(function(e){e.data.success?t.logs=e.data.data:Me.a.showMessage(e.data.message||"Gặp lỗi khi lấy logs lớp học !","warning")}).catch(function(t){console.log(t)}).finally(function(){t.loading=!1})},noteClass:function(t,e){var a=this;return l()(o.a.mark(function n(){var i,s;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i={classId:t,note:e},n.prev=1,n.next=4,ca.a.addClassNote(i);case 4:if(!(s=n.sent).data.success){n.next=9;break}return Me.a.showMessage(s.data.message,"success"),a.getClasses(),n.abrupt("return");case 9:Me.a.showMessage(s.data.message||"Gặp lỗi khi thêm ghi chú !","warning"),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),console.log(n.t0);case 15:return n.prev=15,a.note="",n.finish(15);case 18:case"end":return n.stop()}},n,a,[[1,12,15,18]])}))()},isShowButtonChat:function(t){return"happening"===t.class.status||"completed"===t.class.status},openChat:function(t){window.open(N.a.gchatDomain+"/channel/training/"+t,"_blank")},isShowButtonSendTest:function(t){var e=this.logs,a=!1,n=!0,i=!1,s=void 0;try{for(var o,r=fa()(e);!(n=(o=r.next()).done);n=!0){var l=o.value;"sendTestEducate"===l.action&&+l.ref_id==+t.period.tp_period_id&&+l.tp_class_id==+t.period.class_id&&(a=!0)}}catch(t){i=!0,s=t}finally{try{!n&&r.return&&r.return()}finally{if(i)throw s}}return"self"!==t.period.form&&"pending"!==t.class.status&&"cancel"!==t.class.status&&"happening"===t.period.status&&!a},isShowButtonCreateAppointment:function(t){return"happening"===t.class.status&&"happening"===t.period.status},isShowButtonComplete:function(t){return"cancel"!==t.class.status&&"pending"!==t.class.status&&"happening"===t.period.status},showModalActionClass:function(t,e){this.$emit("showModalActionClass",t,e)},actionUpdateRecord:function(t){this.$emit("actionUpdateRecord",t)},handleToggleModalHrTag:function(t,e){this.$emit("handleToggleModalHrTag",t,e)},showModalTest:function(t){this.$emit("showModalTest",t)},showModalCreateAppointment:function(t){this.$emit("showModalCreateAppointment",t)},showModalCompletePeriod:function(t){this.$emit("showModalCompletePeriod",t)},showModalCancelClass:function(t){this.$emit("showModalCancelClass",t)},getClasses:function(){this.$emit("getClasses")},actionTag:function(t){this.$emit("actionTag",t)}}};var hs=function(t){a("OEkN"),a("6aA6"),a("MRVo")},ps={name:"class-manager",components:{ClassDetail:Object(y.a)(us,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-button",{staticClass:"class-title d-flex justify-content-between",on:{click:function(e){return t.showClassToggle(t.idx)}}},[a("div",[t._v("\n      Lớp học "+t._s(t.classDetail.class.syllabus)+" - "+t._s(t.classDetail.class.code)+" | "+t._s(t.classDetail.class.periods.length)+" buổi học | "+t._s(t.classDetail.class.total_students)+" học viên\n    ")]),t._v(" "),a("div",[t.showClass["tab_"+t.idx]?a("i",{staticClass:"fas fa-chevron-up"}):a("i",{staticClass:"fas fa-chevron-down"})])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showClass["tab_"+t.idx],expression:"showClass['tab_'+idx]"}]},[a("div",{staticClass:"class-global"},[a("div",{staticClass:"d-flex class-global-content"},[a("div",{staticClass:"class-info-wrap"},[a("div",{staticClass:"d-flex"},[a("div",{staticClass:"class-info"},[a("div",{staticClass:"class-info__item syllabus-name-wrap"},[a("div",{staticClass:"syllabus-name"},[a("b",[t._v(t._s(t.classDetail.class.code)+" - "+t._s(t.classDetail.class.syllabus))])]),t._v(" "),["completed","cancel"].includes(t.classDetail.class.status)?t._e():a("div",{staticClass:"syllabus-name-action"},[a("button",{staticClass:"btn btn-sm-custom btn-outline-ghtk float-right",on:{click:function(e){return t.showModalActionClass("update",t.classDetail)}}},[t._v("Sửa")])])]),t._v(" "),a("div",{staticClass:"class-info__item"},[a("b",[t._v("Tiến độ: ")]),t._v(" "),"pending"===t.classDetail.class.status?a("span",[t._v("Chờ xác nhận")]):"cancel"===t.classDetail.class.status?a("span",[t._v("Hủy")]):"completed"===t.classDetail.class.status?a("span",[t._v("Hoàn thành")]):a("span",[t._v(t._s(t.getStatusPeriod(t.classDetail.period)))])]),t._v(" "),t.isShowStartTime(t.classDetail)?a("div",{staticClass:"class-info__item"},[a("b",[t._v("Thời gian: ")]),t._v(" "),a("span",[t._v("\n                  "+t._s(t.formatDate(t.classDetail.period.start_appointment,"DD/MM/YYYY"))+", "+t._s(t.formatDate(t.classDetail.period.start_appointment,"HH:mm"))+"\n                    -\n                  "+t._s(t.formatDate(t.classDetail.period.finish_appointment,"DD/MM/YYYY"))+", "+t._s(t.formatDate(t.classDetail.period.finish_appointment,"HH:mm"))+"\n                ")])]):t._e(),t._v(" "),"offline"===t.classDetail.period.form?a("div",{staticClass:"class-info__item"},[a("b",[t._v("Địa điểm: ")]),t._v(" "),t.classDetail.class.station?a("span",[t._v(t._s(t.classDetail.class.station))]):a("span",[t._v("Chưa có")])]):t._e(),t._v(" "),a("div",{staticClass:"class-info__item"},[a("b",[t._v("Giảng viên: ")]),t._v(" "),t.classDetail.class.lecturers&&t.classDetail.class.lecturers.length?a("div",t._l(t.classDetail.class.lecturers||[],function(e,n){return a("div",{key:n},[t._v("\n                    "+t._s(n+1)+". "+t._s(e.fullname)+" ("+t._s(e.username)+") - "+t._s(e.position_name)+"\n                  ")])}),0):a("span",[t._v("Chưa có")])]),t._v(" "),a("div",{staticClass:"class-info__item"},[a("b",[t._v("Phụ trách lớp: ")]),t._v(" "),t.classDetail.class.curator&&t.classDetail.class.curator.fullname?a("span",[t._v(t._s(t.classDetail.class.curator.fullname)+" ("+t._s(t.classDetail.class.curator.username)+") - "+t._s(t.classDetail.class.curator.position_name))]):a("span",[t._v("Chưa có")])]),t._v(" "),a("div",{staticClass:"content-log-class"},[a("div",{staticClass:"tag-wrap"},[a("div",{staticClass:"mr-1 default-tag text-center-y"},[t._v("\n                    "+t._s(t.classDetail.class.nameTag)+"\n                  ")]),t._v(" "),t._l(t.classDetail.class.tagClass,function(e,n){return[a("div",{key:n,staticClass:"mr-1 cursor-pointer position-relative default-tag text-center-y",on:{mouseover:function(a){return t.showIcon("iconDeleteTag"+e.record_id+n)},mouseout:function(a){return t.showIcon("iconDeleteTag"+e.record_id+n,"none")},click:function(a){return t.onDeleteTag(e)}}},[a("div",{staticClass:"d-inline-block"},[t._v("\n                        "+t._s(e.name)+"\n                      ")]),t._v(" "),a("i",{staticClass:"fa fa-times-circle deleteTag",attrs:{id:"iconDeleteTag"+e.record_id+n}})])]}),t._v(" "),a("span",{staticClass:"text-ghtk cursor-pointer create-tag text-center-y",on:{click:function(e){return t.handleToggleModalHrTag(null,t.classDetail)}}},[t._v("+ Tag")])],2)])]),t._v(" "),a("div",{staticClass:"class-log-document"},[a("div",{staticClass:"class-document"},[a("ListPeriodFile",{class:t.classDetail.class.tagClass.length<=4?"h-100":"h-100__30",attrs:{periods:t.classDetail.class.periods}})],1),t._v(" "),a("b",[t._v("Chi tiết log")]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading"}],staticClass:"detail-logs"},[a("div",{staticClass:"content-detail-log"},[t.logs?a("ul",{staticClass:"log-timeline"},t._l(t.logs,function(e,n){return a("li",{key:n,staticClass:"log-timeline-item"},[a("div",{staticClass:"log-timeline-item-tail"}),t._v(" "),a("div",{staticClass:"log-timeline-item-head ant-timeline-item-head-blue"}),t._v(" "),a("div",{staticClass:"log-timeline-item-content"},[e.created?a("span",[t._v(t._s(t.formatDate(e.created,"DD-MM-YYYY HH:mm:ss"))+" ")]):t._e(),t._v(" "),e.created_by?a("span",[t._v(t._s(e.created_by.username||"")+"\n                                        "),e.created_by.position_name?a("span",[t._v("- "+t._s(e.created_by.position_name||""))]):t._e()]):t._e(),t._v(" "),e.message?a("span",{domProps:{innerHTML:t._s(e.message)}}):t._e()])])}),0):t._e()])]),t._v(" "),a("div",{staticClass:"note-class"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.note,expression:"note"}],staticClass:"no-outline",attrs:{type:"text",id:"note-class-"+t.idx,placeholder:"Nhập ghi chú lớp học"},domProps:{value:t.note},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.noteClass(t.classDetail.class.id,t.note)},input:function(e){e.target.composing||(t.note=e.target.value)}}})])])])]),t._v(" "),a("div",{staticClass:"class-action"},[a("div",[t.isShowButtonChat(t.classDetail)?a("b-btn",{staticClass:"action-btn mb-2 btn-sm btn-font-defualt",attrs:{variant:"outline-ghtk"},on:{click:function(e){return t.openChat(t.classDetail.class.channel_id)}}},[t._v("\n              Chat\n            ")]):t._e()],1),t._v(" "),a("div",[t.isShowButtonSendTest(t.classDetail)?a("b-btn",{staticClass:"action-btn mb-2 btn-sm btn-font-defualt",attrs:{variant:"outline-ghtk"},on:{click:function(e){return t.showModalTest(t.classDetail)}}},[t._v("\n              Gửi bài\n            ")]):t._e()],1),t._v(" "),a("div",[t.isShowButtonCreateAppointment(t.classDetail)?a("b-btn",{staticClass:"action-btn mb-2 btn-sm btn-font-defualt",attrs:{variant:"outline-ghtk"},on:{click:function(e){return t.showModalCreateAppointment(t.classDetail)}}},[t._v("\n              "+t._s(null===t.classDetail.period.start_appointment?"Hẹn lịch":"Sửa lịch hẹn")+"\n            ")]):t._e()],1),t._v(" "),a("div",[t.isShowButtonComplete(t.classDetail)?a("b-btn",{staticClass:"action-btn mb-2 btn-sm btn-font-defualt",attrs:{variant:"outline-ghtk"},on:{click:function(e){return t.showModalCompletePeriod(t.classDetail)}}},[t._v("\n              Hoàn thành\n            ")]):t._e()],1),t._v(" "),a("div",["happening"===t.classDetail.class.status||"pending"===t.classDetail.class.status?a("b-btn",{staticClass:"action-btn mb-2 btn-sm btn-font-defualt",attrs:{variant:"outline-danger"},on:{click:function(e){return t.showModalCancelClass(t.classDetail.class.id)}}},[t._v("\n              Hủy lớp\n            ")]):t._e()],1)])])]),t._v(" "),a("list-academy",{attrs:{classDetail:t.classDetail,duty:t.duty,triggerClickBtnSearch:t.triggerClickBtnSearch,triggerRollUpStudent:t.triggerRollUpStudent,triggerCancelRollupStudent:t.triggerCancelRollupStudent,dataAttendance:t.dataAttendance,studentFilter:t.studentFilter},on:{action:t.actionTag,refreshPage:t.getClasses}})],1)],1)},[],!1,hs,"data-v-8ef9553e",null).exports,ModalReviewStudent:rs,ModalConfirmTraining:is,ModalAttendance:gn,ModalAddStudent:pn,ModalDeleteAcademy:Ea,HrTagModal:vi,TimeLine:Ce.a,ModalConfirmClass:Pn,ModalCompletePeriod:Kn,ModalRollUp:Tn,ListAcademy:xn,SingleSelectUser:Ie.a,Multiselect:la.a,ModalCancelClass:mi,PeriodTestBuilder:li,ModalSendTest:ui,MultiSelectUser:pa.a,MultiSelectClass:Sa,ModalCreateClassV2:sn,ListPeriodFile:Bi,MarkModal:Ri,ModalStudentNoMark:Fi,MultiSelectSyllabus:ha,MultiSelectRegion:me.a,MultiSelectPosition:be.a,MultiSelectDepartment:_e.a,MultiSelectStation:ge.a,MultiSelectProvince:fe.a,SlideTab:ds,ModalCreateAppointment:Ki,ModalReviewLesson:Xi,ModalConfirmCompletePeriod:es},data:function(t){return{loading:!1,isActiveTab:"all",status:null,trigger:{reloadPendingClass:!1,activeClass:null},tabScroll:{leftShow:!1,rightShow:!1},classStatuses:[{alias:"all",key:"all",name:"Tất cả"},{alias:"happening",key:"happening",name:"Đang diễn ra"},{alias:"pending",key:"pending",name:"Chờ xác nhận"},{alias:"completed",key:"completed",name:"Hoàn thành"},{alias:"cancel",key:"cancel",name:"Hủy"}],loadingStatistic:!1,statistic:{all:null,happening:null,completed:null,cancel:null},totalNotPlacedStudent:0,listStudents:[],statusIdOptions:[{status:"pending",name:"Chờ xác nhận"},{status:"happening",name:"Đang diễn ra"},{status:"completed",name:"Hoàn thành"}],range_created:null,statusId:3,filter:{class_code:null,lecturers:null,student:null,pic:null,status:"all",date_from:null,date_to:null,page:null,limit:null,class_id:null,syllabus_id:[],region:null,province:null,station:null,position:null,student_department:[],student_position:null},page:{currentPage:1,totalPages:1,perPage:4,totalItems:0},openModalHrTag:!1,curr_files:{},order_number:{},cur_file_creators:{},curTagData:{record:{},attach:!0},reloadTag:0,tags:[],modalClassData:{title:"Tạo lớp học",type:"create",classInfo:{}},recordName:"class_id",tableName:"educate_class",duty:null,dutySyllabus:!1,permissionConfirm:!1,permissionHr:!1,permissionVh:!1,permissionIt:!1,roleHr:[3],listClass:[],showClass:{tab_0:!0,tab_1:!0,tab_2:!0,tab_3:!0},classId:null,studentId:null,periodId:null,periodOrder:null,detailClass:null,tmpUserId:null,masterId:null,tpId:null,stationId:null,classAcademyInfoId:null,checkinStatus:null,listTraining:[],triggerSearchTestResult:!1,triggerSearchSendTest:!1,triggerCreateAppointment:!1,triggerClickBtnSearch:!1,canAccessRookie:!1,userTestId:null,nameUserMarked:null,userNameMark:null,classIdStore:null,idStudent:null,idPeriod:null,listStudentNoMark:[],dataAttendance:[],triggerRollUpStudent:!1,triggerCancelRollupStudent:!1,dataModalReviews:null,dataConfirm:null,classPeriodId:null}},created:function(){var t=this;Ee().then(function(e){t.canAccessRookie=e.data&&e.data.success}),Me.a.isEmpty(this.$route.query.code)||(this.filter.class_code=this.$route.query.code),this.getStatisticClass(),this.getClasses(),Cn.eventBus.$on("reviewStudentSuccess",function(e){e.studentId;var a=e.log;t.detailClass&&t.detailClass.class&&t.detailClass.class.logClass&&t.detailClass.class.logClass.push({message:a})})},mounted:function(){},computed:i()({helper:function(){return Me.a}},Object(_.c)({permissions:"education/getPermissions"})),watch:{status:function(t,e){this.filter.status=t?t.map(function(t){return t.status}).toString():""}},methods:i()({},Object(_.b)({setPermissions:"education/setPermissions"}),{isShowButtonChat:function(t){return"happening"===t.class.status||"completed"===t.class.status},showModalNotice:function(t){t&&(this.listStudentNoMark=t),this.$bvModal.show("modal-student-no-mark")},showModalActionClass:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"create",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.permissionHr?("create"===t&&(this.modalClassData.title="Tạo lớp học",this.modalClassData.classInfo=e),"update"===t&&(this.modalClassData.title="Sửa lớp học",this.modalClassData.type="update",e&&(this.modalClassData.classInfo=e)),"confirm"===t&&(this.modalClassData.title="Tạo lớp học",this.modalClassData.type="confirm",e&&We()(e).length>0&&"pending"===e.class.status?this.modalClassData.classInfo=e:this.modalClassData.classInfo={}),this.$bvModal.show("modal-create-class")):Me.a.showMessage("Bạn không có quyền thực hiện thao tác!")},updateClassOk:function(){this.search()},showModalCancelClass:function(t){this.permissionHr?(this.classId=t,this.$bvModal.show("modal-cancel-class")):Me.a.showMessage("Bạn không có quyền thực hiện thao tác!")},updateClassPeriodId:function(t){this.classPeriodId=t},showModalCompletePeriod:function(t){this.detailClass=t,t&&t.period&&t.period.id&&(this.classPeriodId=t.period.id),this.$bvModal.show("modal-complete-period")},showModalCreateAppointment:function(t){this.detailClass=t,this.triggerCreateAppointment=!this.triggerCreateAppointment,this.$bvModal.show("modal-create-appointment")},showModalTest:function(t){this.detailClass=t,this.triggerSearchSendTest=!this.triggerSearchSendTest,this.$bvModal.show("modal-send-test")},search:function(){this.page.currentPage=1,this.page.perPage=4,this.triggerClickBtnSearch=!this.triggerClickBtnSearch,this.getClasses(),this.getStatisticClass()},searchByStatus:function(t,e){this.filter.status=t,this.isActiveTab=e,this.getClasses()},searchAll:function(){this.filter.class_id=null,this.filter.student=null,this.filter.lecturers=null,this.filter.date_from=null,this.filter.date_to=null,this.filter.status="all",this.isActiveTab="all",this.getClasses()},getClasses:function(){var t=this;this.loading=!0,this.filter.date_from=this.range_created?Ye()(this.range_created.start).format("YYYY-MM-DD"):null,this.filter.date_to=this.range_created?Ye()(this.range_created.end).format("YYYY-MM-DD"):null;var e=i()({},this.filter,{page:this.page.currentPage,limit:this.page.perPage});ca.a.getClasses(e).then(function(e){e.data.success?(t.listClass=e.data.data.data,t.duty=e.data.data.duty.duty,t.dutySyllabus=e.data.data.dutySyllabus,t.allowPermission(t.duty),t.page.totalItems=e.data.data.count):Me.a.showMessage(e.data.message||"Gặp lỗi khi lấy thông tin lớp học !","warning")}).catch(function(t){console.log(t)}).finally(function(){t.loading=!1,t.classPeriodId=null})},getStatisticClass:function(){var t=this;this.loadingStatistic=!0,this.filter.date_from=this.range_created?Ye()(this.range_created.start).format("YYYY-MM-DD"):null,this.filter.date_to=this.range_created?Ye()(this.range_created.end).format("YYYY-MM-DD"):null;var e=i()({},this.filter,{page:this.page.currentPage,limit:this.page.perPage});ca.a.getStatisticClass(e).then(function(e){if(e.data.success)for(var a in e.data.data)t.statistic[a]=e.data.data[a]||0;else Me.a.showMessage(e.data.message||"Có lỗi khi lấy thồng kê lớp học !")}).catch(function(t){console.log(t)}).finally(function(e){t.loadingStatistic=!1})},getForm:function(t){return"offline"===t?"Offline":"online"===t?"Online":""},isDoc:function(t){return"doc"===Me.a.getFileType(t)},isImage:function(t){return"image"===Me.a.getFileType(t)},isPdf:function(t){return"pdf"===Me.a.getFileType(t)},handleToggleModalHrTag:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments[1];if(Me.a.isEmpty(t))return this.tableName="educate_class",this.curTagData.attach=!0,this.curTagData.record=e.class.id,void(this.openModalHrTag=!0);t&&(this.tableName="educate_student",this.curTagData.attach=!0,this.curTagData.record=t,this.openModalHrTag=!0)},actionUpdateRecord:function(t){"attachTag"===t.action&&(this.reloadTag++,this.curTagData.record.tags&&t.data&&this.curTagData.record.tags.push(t.data),this.getClasses()),"refreshHrTag"===t.action&&(this.getClasses(),this.reloadTag++),"closeHrTag"===t.action&&(this.openModalHrTag=!1)},actionTag:function(t){"tag"===t.action&&this.handleToggleModalHrTag(t.data),"showModalDeleteAcademy"===t.action&&this.showModalDeleteAcademy(t),"showModalAddStudent"===t.action&&this.showModalAddStudent(t),"rollUpStudent"===t.action&&this.showModalAttendance(t),"showModalMark"===t.action&&this.showModalMark(t),"showModalReview"===t.action&&this.showModalReview(t.dataModal)},showModalConfirmPeriod:function(t){t&&(this.dataConfirm=t),this.$bvModal.show("id-modal-confirm-complete-period")},getTotalNotPlacedStudent:function(){var t=this;return l()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ca.a.getListStudentNoEnoughClass({type:"count"});case 3:(a=e.sent).data.success?t.totalNotPlacedStudent=a.data.data.total:Me.a.showMessage(a.data.message,"warning"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Me.a.showMessage(e.t0.message,"warning");case 10:return e.prev=10,t.loading=!1,e.finish(10);case 13:case"end":return e.stop()}},e,t,[[0,7,10,13]])}))()},capitalizeFirstLetter:function(t){if(!t)return"";for(var e=(t=t.toLowerCase()).split(" "),a=0;a<e.length;a++)e[a]=e[a][0].toUpperCase()+e[a].substr(1);return e.join(" ")},actionRefreshData:function(t){"refreshNote"===t.action&&this.getClasses()},allowPermission:function(t){var e=[].concat(d()(t));e.includes("IT")&&(this.permissionHr=!0,this.permissionVh=!0,this.permissionConfirm=!0,this.permissionIt=!0,this.dutySyllabus=!0,this.setPermissions({permissionIt:!0})),e.includes("HR")&&(this.dutySyllabus=!0,this.permissionHr=!0),e.includes("VH")&&(this.dutySyllabus=!0,this.permissionVh=!0),e.includes("curator-teacher")&&(this.dutySyllabus=!0,this.permissionConfirm=!0)},selectedLecturers:function(t){this.filter.lecturers=t?t.map(function(t){return t.id}):""},selectedStudents:function(t){this.filter.student=t?t.map(function(t){return t.id}).toString():""},selectedClassCode:function(t){this.filter.class_id=t?t.map(function(t){return t.id}).toString():""},openSyllabus:function(){window.open("adm/staff-work/syllabus")},showClassToggle:function(t){this.showClass["tab_"+t]=!this.showClass["tab_"+t]},showModalDeleteAcademy:function(t){this.tmpUserId=t.userId,this.masterId=t.masterId,this.classId=t.classId,this.$bvModal.show("modal-delete-academy")},showModalAddStudent:function(t){this.classId=t.classId,this.periodId=t.periodId,this.tpId=t.tpId,this.$bvModal.show("modal-add-student")},showModalAttendance:function(t){this.classAcademyInfoId=t.classId,this.masterId=t.masterId,this.checkinStatus=t.checkinStatus,this.detailClass=t.classDetail,this.$bvModal.show("modal-attendance")},showModalMark:function(t){this.userTestId=t.userTestId;var e=this.listClass.find(function(e){return+e.class.id==+t.idClass});this.classIdStore=+t.idClass,this.nameUserMarked="Chấm điểm "+t.fullName.toUpperCase()+" | "+e.class.code,this.userNameMark=t.fullName,this.idStudent=t.idStudent,this.idPeriod=t.idPeriod,this.$bvModal.show("modal-mark")},showModalCreateClass:function(t){var e=t.stationId;this.stationId=e,this.$bvModal.show("modal-confirm-training")},getSyllabusesCreateClass:function(){var t=this;ca.a.getSyllabusesCreateClass().then(function(e){e.data.success?(t.listTraining=e.data.data,Me.a.showMessage(e.data.message||"Lấy dữ liệu thành công","success")):Me.a.showMessage(e.data.message||"xảy ra lỗi!","warning")}).catch(function(t){console.log(t)}).then(function(){t.loading=!1})},showModalReviewStudent:function(t){var e=t.studentId,a=t.classId;this.studentId=e,this.classId=a,this.$bvModal.show("modal-review-student")},createClassSuccess:function(t){this.trigger.reloadPendingClass=!this.trigger.reloadPendingClass,this.trigger.activeClass=t.id},handleSyllabusSelected:function(t){this.filter.syllabus_id=t?t.map(function(t){return t.id}).toString():""},handleRegionSelected:function(t){this.filter.region=t?t.map(function(t){return t.id}).toString():"",t||(this.filter.province="")},handleProvinceSelected:function(t){this.filter.province=t?t.map(function(t){return t.id}).toString():""},handleStationSelected:function(t){this.filter.station=t?t.map(function(t){return t.id}).toString():""},handlePositionSelected:function(t){this.filter.position=t?t.map(function(t){return t.id}).toString():""},handleStudentPositionSelected:function(t){this.filter.student_position=t?t.map(function(t){return t.id}).toString():""},handleFilterUnSelected:function(t){this.filter[t]=null},handleSelectField:function(t,e){var a=this;this.filter[t]=[],e&&e.map(function(e){return a.filter[t].push(e.id)})},changeTab:function(t){this.filter.status=t,this.search()},removeAllStudentOfClass:function(t){this.listClass.forEach(function(e){e.class.id===t&&(e.listStudents=[])})},scroll:function(t,e){(t=document.getElementById(t))&&t.scroll({left:t.scrollLeft+("right"===e?150:-150)})},actionAttendance:function(t){this.dataAttendance=t,"rollUpStudent"===t.action&&(this.triggerRollUpStudent=!this.triggerRollUpStudent),"cancelRollupStudent"===t.action&&(this.triggerCancelRollupStudent=!this.triggerCancelRollupStudent)},showModalReview:function(t){t&&(this.dataModalReviews=t),this.$bvModal.show("id-modal-review-lesson")},closeModalConfirmComplete:function(){this.dataConfirm=null},refreshReview:function(){this.getClasses(),this.classPeriodId=null}})};var ms=function(t){a("OEkN"),a("6aA6"),a("Enw3")},fs=Object(y.a)(ps,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-none d-md-block main-content"},[a("div",{staticClass:"mx-0 my-2 row"},[a("div",{staticClass:"header-padding text-center-y col-4"},[a("div",{staticClass:"d-flex",staticStyle:{"align-items":"baseline"}},[a("h4",{staticClass:"m-0 font-weight-bold"},[t._v("Đào tạo")]),t._v(" "),!0===t.dutySyllabus?a("router-link",{staticClass:"m-0 header-setting",attrs:{to:"/staff-work/syllabus"}},[t._v("Cài đặt")]):t._e()],1),t._v(" "),a("div",{staticClass:"action-toggle ml-3"},[a("div",{staticClass:"action-toggle--active"},[t._v("Lớp Học")]),t._v(" "),t.canAccessRookie?t._e():a("div",{staticClass:"action-toggle--not-active"},[t._v("Học Viên")]),t._v(" "),t.canAccessRookie?a("router-link",{staticClass:"link action-toggle--not-active",attrs:{to:{path:"/staff-work/rookie",query:{dutySyllabus:t.dutySyllabus}}}},[t._v("Học Viên\n              ")]):t._e()],1)]),t._v(" "),a("b-col",{staticClass:"col-6"},[a("div",{staticClass:"d-flex justify-content-end align-item-center"},[a("SlideTab",{attrs:{options:t.classStatuses,statistic:t.statistic,loading:t.loadingStatistic,selected:t.filter.status},on:{changeTab:t.changeTab}})],1)]),t._v(" "),t.permissionHr||t.permissionIt?a("div",{staticClass:"input-filter col-2"},[a("b-btn",{staticClass:"rounded w-100 btn-header-class",attrs:{variant:"ghtk"},on:{click:function(e){return t.showModalActionClass("confirm",{})}}},[t._v("+ Tạo lớp")])],1):t._e()],1),t._v(" "),a("div",{staticClass:"mx-0 filter pb-1 row justify-content-between"},[a("div",{staticClass:"mb-1 input-filter col-2"},[a("multi-select-syllabus",{attrs:{"custom-class":"z-5 multiselect-ghtk multiselect-no-horizontal","syllabuse-ids":t.filter.syllabus_id,"auto-close":!0,placeholder:"Mã/Tên chương trình"},on:{handleSyllabusSelected:t.handleSyllabusSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter col-2"},[a("multi-select-class",{attrs:{"custom-class":"multiselect-ghtk multiselect-no-horizontal",placeholder:"Mã lớp"},on:{onChange:t.selectedClassCode}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter col-2"},[a("multi-select-region",{attrs:{"custom-class":"z-5 multiselect-ghtk multiselect-no-horizontal",regions:t.filter.region,"auto-close":!0,placeholder:"Miền"},on:{handleSelectedRegion:t.handleRegionSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter col-2"},[a("multi-select-province",{attrs:{"custom-class":"z-3 multiselect-ghtk multiselect-no-horizontal","province-ids":t.filter.province,region:t.filter.region,"auto-close":!0,"hide-select":!0,placeholder:"Tỉnh"},on:{handleProvinceSelected:t.handleProvinceSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter col-2"},[a("multi-select-station",{staticClass:"z-3 multiselect-ghtk multiselect-no-horizontal",attrs:{"province-ids":t.filter.province,"station-ids":t.filter.station,"auto-close":!0,isActive:!0,"hide-select":!0,placeholder:"Kho"},on:{handleStationSelected:t.handleStationSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter col-2"},[a("multi-select-department",{attrs:{placeholder:"Bộ phận","department-ids":t.filter.student_department.join(),"auto-close":!0},on:{handleDepartmentSelected:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return t.handleSelectField.apply(void 0,["student_department"].concat(n))}}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter col-2"},[a("MultiSelectPosition",{staticClass:"z-3 multiselect-ghtk multiselect-no-horizontal",attrs:{"department-ids":t.filter.student_department,"position-ids":t.filter.student_position,"auto-close":!0,"hide-selected":!0,placeholder:"Vị trí học viên",isSyllabus:!0},on:{handlePositionSelected:t.handleStudentPositionSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter col-2"},[a("multi-select-user",{attrs:{"custom-class":"multiselect-ghtk multiselect-no-horizontal",placeholder:"Giảng viên"},on:{onChange:t.selectedLecturers}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter col-2"},[a("single-select-user",{attrs:{"custom-class":"multiselect-ghtk multiselect-no-horizontal",placeholder:"Người phụ trách",roles:t.roleHr},on:{select:function(e){t.filter.pic=e?e.id:null},remove:function(e){return t.handleFilterUnSelected("pic")}}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter col-2"},[a("multi-select-user",{attrs:{"custom-class":"multiselect-ghtk multiselect-no-horizontal",placeholder:"Học viên",targetApi:"hrm"},on:{onChange:t.selectedStudents}})],1),t._v(" "),a("div",{staticClass:"mb-1 placeholder-contain input-filter col-2"},[a("v-date-picker",{attrs:{mode:"range",locale:"vi",color:"green","input-props":{placeholder:"Ngày tạo lớp",style:"font-size:14px; line-height: unset; border-radius: 0; border-color: #bdbdbd; border-radius: 0.25rem"},popover:{visibility:"focus"}},model:{value:t.range_created,callback:function(e){t.range_created=e},expression:"range_created"}})],1),t._v(" "),a("div",{staticClass:"input-filter col-2"},[a("b-btn",{staticClass:"filter-containter__btn-search btn-header-class",attrs:{variant:"ghtk"},on:{click:function(e){return t.search()}}},[t._v(" Tìm kiếm")])],1)]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"class-container row mx-2 position-relative d-block"},t._l(t.listClass,function(e,n){return a("div",{key:"class"+e.class.id,staticClass:"mb-2"},[a("ClassDetail",{attrs:{classDetail:e,idx:n,duty:t.duty,showClass:t.showClass,triggerClickBtnSearch:t.triggerClickBtnSearch,triggerRollUpStudent:t.triggerRollUpStudent,triggerCancelRollupStudent:t.triggerCancelRollupStudent,dataAttendance:t.dataAttendance,studentFilter:t.filter.student},on:{showModalActionClass:t.showModalActionClass,actionUpdateRecord:t.actionUpdateRecord,handleToggleModalHrTag:t.handleToggleModalHrTag,showModalTest:t.showModalTest,showModalCreateAppointment:t.showModalCreateAppointment,showModalCompletePeriod:t.showModalCompletePeriod,showModalCancelClass:t.showModalCancelClass,getClasses:t.getClasses,actionTag:t.actionTag}})],1)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!(t.listClass&&t.listClass.length||t.loading),expression:"(!listClass || !listClass.length) && !loading"}]},[t._v(" Không tìm thấy lớp học")]),t._v(" "),a("div",{staticClass:"box-modal"},[a("modal-complete-period",{attrs:{"class-detail":t.detailClass,"class-period-id":t.classPeriodId,order:t.periodOrder},on:{showModalReviewStudent:t.showModalReviewStudent,refreshPage:function(e){return t.getClasses()},showModalConfirmCompletePeriod:t.showModalConfirmPeriod,"update:classPeriodId":t.updateClassPeriodId}}),t._v(" "),a("modal-create-appointment",{attrs:{"class-detail":t.detailClass,"trigger-create-appointment":t.triggerCreateAppointment},on:{refreshPage:function(e){return t.getClasses()}}}),t._v(" "),a("modal-student-no-mark",{attrs:{"list-student-no-mark":t.listStudentNoMark}}),t._v(" "),a("ModalReviewStudent",{attrs:{"student-id":t.studentId,"class-id":t.classId}}),t._v(" "),a("modal-send-test",{attrs:{"class-detail":t.detailClass,"trigger-search":t.triggerSearchSendTest},on:{refreshPage:function(e){return t.getClasses()}}}),t._v(" "),a("modal-cancel-class",{attrs:{"class-id":t.classId},on:{refreshPage:function(e){return t.getClasses()}}}),t._v(" "),a("modal-delete-academy",{attrs:{"class-id":t.classId,"user-id":t.tmpUserId,"master-id":t.masterId},on:{refreshPage:function(e){return t.getClasses()}}}),t._v(" "),a("ModalAddStudent",{attrs:{classId:t.classId,"class-period-id":t.periodId,syllabus:t.tpId},on:{refreshPage:function(e){return t.getClasses()}}}),t._v(" "),a("modal-attendance",{attrs:{"class-detail":t.detailClass,"class-academy-info-id":t.classAcademyInfoId,"master-id":t.masterId,"checkin-status":t.checkinStatus},on:{refreshPage:function(e){return t.getClasses()},actionAttendance:t.actionAttendance}}),t._v(" "),a("modal-confirm-training",{attrs:{stationId:t.stationId},on:{createClassSuccess:t.createClassSuccess}}),t._v(" "),a("mark-modal",{attrs:{"user-test-id":t.userTestId,"class-id":t.classIdStore,"name-modal":t.nameUserMarked,username:t.userNameMark,"id-student":t.idStudent,"id-period":t.idPeriod},on:{resetUserTestId:function(e){t.userTestId=null}}}),t._v(" "),a("modal-review-lesson",{attrs:{"data-reviews":t.dataModalReviews},on:{refreshReview:function(e){return t.refreshReview()}}}),t._v(" "),a("modal-confirm-complete-period",{attrs:{"data-confirm":t.dataConfirm},on:{closeModal:function(e){return t.closeModalConfirmComplete()},refreshReview:function(e){return t.refreshReview()},showModalNotice:t.showModalNotice}})],1),t._v(" "),a("div",[a("modal-create-class-v2",{attrs:{title:t.modalClassData.title,"class-info":t.modalClassData.classInfo,type:t.modalClassData.type,reloadClass:t.trigger.reloadPendingClass,activeClass:t.trigger.activeClass},on:{showModalCreateClass:t.showModalCreateClass,updateOk:t.updateClassOk,removeAllStudentOfClass:t.removeAllStudentOfClass}}),t._v(" "),a("HrTagModal",{attrs:{open:t.openModalHrTag,attachPermission:t.curTagData.attach,scope:"global",recordId:t.curTagData.record,tableName:t.tableName,tags:t.tags},on:{action:t.actionUpdateRecord}})],1),t._v(" "),a("div",{staticClass:"paging d-flex"},[a("div",[a("b",{staticClass:"float-left"},[t._v("Trang "+t._s(t.page.currentPage)+"/"+t._s(Math.ceil(t.page.totalItems/t.page.perPage)))])]),t._v(" "),a("div",{staticClass:"z-0 d-inline-block paginator-ghtk ml-2"},[a("b-pagination",{staticClass:"mb-1",attrs:{size:"sm",align:"left","total-rows":t.page.totalItems,"per-page":t.page.perPage},on:{input:function(e){return t.getClasses()}},model:{value:t.page.currentPage,callback:function(e){t.$set(t.page,"currentPage",e)},expression:"page.currentPage"}})],1)])])},[],!1,ms,"data-v-a2e11768",null).exports,gs=a("Batc"),vs=a("yQeu"),_s=function(t){return Pe.a.get("/ErpStationStatistic/getAllStationStatistic",{params:t})},bs=a("F/2K"),ys=a("l48y"),Cs=a("ViqS"),ws=a.n(Cs);u.default.filter("formatNumber",function(t){return ws()(t).format("0,0")});var ks={name:"station-operation-dash",props:{smallScreen:{default:!1,type:Boolean},blankMode:{default:null},scrollMode:{default:!1,type:Boolean}},components:{SingleSelectStation:oa.a,SingleSelectProvince:bs.a,SingleSelectRegion:ys.a},mounted:function(){this.initialData(),this.filterTime(0)},data:function(){return{loading:!1,pagination:{currentPage:1,limit:5,total:0},list:[],filter:{station:null,start:null,end:null,region:null,provinceId:null,orderField:null,orderType:null,type:"POST"},reset:!1,lastUpdateTime:"",isFocus:[{id:1,orderBy:"overall_quantity",orderType:"asc"},{id:2,orderBy:"total_expense",orderType:"desc"},{id:3,orderBy:"total_penalty",orderType:"desc"},{id:4,orderBy:"total_layoff",orderType:"desc"}],btnFocus:null,orderByIndex:null,btnFocusIndex:0}},computed:{totalPages:function(){return Math.ceil(this.pagination.total/this.pagination.limit)}},methods:{getList:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,_s(i()({page:t.pagination.currentPage,limit:t.pagination.limit},t.filter));case 4:if(a=e.sent,!1!==(n=a.data).success){e.next=9;break}return t.list=[],e.abrupt("return",Me.a.showMessage(n.message,"warning"));case 9:Me.a.showMessage(n.message,"success"),t.list=n.data,t.pagination.total=n.count?n.count:0,t.lastUpdateTime=n.lastUpdateTime,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),Me.a.showMessage(e.t0.message);case 18:return e.prev=18,t.loading=!1,e.finish(18);case 21:case"end":return e.stop()}},e,t,[[0,15,18,21]])}))()},onPageChange:function(t){this.pagination.currentPage=t,this.getList()},search:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.resetPagination(),t.getList();case 2:case"end":return e.stop()}},e,t)}))()},clearFilter:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.filter={station:null,start:null,end:null,region:null,provinceId:null,orderField:null,orderType:null,type:"POST"},t.resetFocusText(),t.orderByIndex=null,t.reset=!t.reset,e.next=6,t.resetPagination();case 6:t.filterTime(0);case 7:case"end":return e.stop()}},e,t)}))()},resetFocusText:function(){this.isFocus=[{id:1,orderBy:"overall_quantity",orderType:"asc"},{id:2,orderBy:"total_expense",orderType:"desc"},{id:3,orderBy:"total_penalty",orderType:"desc"},{id:4,orderBy:"total_layoff",orderType:"desc"}]},resetPagination:function(){this.pagination={currentPage:1,limit:5,total:0}},sortByField:function(t){this.orderByIndex=null,this.filter.orderField===t?this.filter.orderType?"asc"===this.filter.orderType?this.filter.orderType="desc":"desc"===this.filter.orderType&&(this.filter.orderField=null,this.filter.orderType=null):this.filter.orderType="asc":(this.filter.orderField=t,this.filter.orderType="asc"),this.search()},initialData:function(){var t=Ye()().format("YYYY-MM-DD");this.btnFocus=[{id:1,start:Ye()().startOf("isoWeek").format("YYYY-MM-DD"),end:t},{id:2,start:Ye()().startOf("month").format("YYYY-MM-DD"),end:t},{id:3,start:Ye()().startOf("month").subtract(2,"month").format("YYYY-MM-DD"),end:t}]},filterOrder:function(t){this.orderByIndex=t,this.filter.orderType=this.isFocus[t].orderType,this.filter.orderField=this.isFocus[t].orderBy,this.search()},filterTime:function(t){this.btnFocusIndex=t,this.filter.start=this.btnFocus[t].start,this.filter.end=this.btnFocus[t].end,this.search()}}};var xs=function(t){a("AgGy")},Ss=Object(y.a)(ks,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"small-scrollbar"},[a("div",[a("b-row",{staticClass:"align-items-center"},[a("b-col",{attrs:{md:"4"}},[a("h2",{staticClass:"m-0 font-weight-bold text-dark"},[t._v("Hiệu quả hoạt động")]),t._v(" "),a("h6",{staticClass:"mt-4 font-italic"},[t._v("Cập nhật "+t._s(t.lastUpdateTime))])]),t._v(" "),a("b-col",{staticClass:"text-right"},[a("b-button",{staticClass:"badge-pill mr-1",class:0===t.btnFocusIndex?"btn-ghtk":"btn-light",on:{click:function(e){return t.filterTime(0)}}},[t._v("Tuần này\n        ")]),t._v(" "),a("b-button",{staticClass:"badge-pill mr-1",class:1===t.btnFocusIndex?"btn-ghtk":"btn-light",on:{click:function(e){return t.filterTime(1)}}},[t._v("Tháng này\n        ")]),t._v(" "),a("b-button",{staticClass:"badge-pill",class:2===t.btnFocusIndex?"btn-ghtk":"btn-light",on:{click:function(e){return t.filterTime(2)}}},[t._v("3 tháng\n        ")])],1)],1),t._v(" "),a("b-row",{staticClass:"mt-4"},[a("b-col",{staticClass:"col-md-2 mr-0"},[a("SingleSelectRegion",{staticClass:"multiselect-ghtk",attrs:{reset:t.reset},on:{handleSelectedRegion:function(e){return t.filter.region=e?e.id:null}}})],1),t._v(" "),a("b-col",{staticClass:"col-md-2 mr-0"},[a("SingleSelectProvince",{attrs:{regionName:t.filter.region,reset:t.reset,"custom-class":"multiselect-ghtk"},on:{handleSelectedProvince:function(e){return t.filter.provinceId=e?e.id:null}}})],1),t._v(" "),a("b-col",{staticClass:"col-md-2 mr-0"},[a("SingleSelectStation",{attrs:{provinceId:t.filter.provinceId,reset:t.reset,"custom-class":"multiselect-ghtk"},on:{handleSelectedStation:function(e){return t.filter.station=e?e.id:null}}})],1),t._v(" "),a("b-col",{staticClass:"col-md-1 mr-5"},[a("b-btn",{staticClass:"btn-center",attrs:{variant:"ghtk"},on:{click:t.search}},[a("i",{staticClass:"fas fa-search"}),t._v(" Tìm kiếm")])],1),t._v(" "),a("b-col",{staticClass:"col-md-1 mr-0"},[a("b-btn",{staticClass:"btn-center",attrs:{variant:"ghtk"},on:{click:t.clearFilter}},[a("i",{staticClass:"fas fa-sync-alt"}),t._v(" Xóa lọc")])],1)],1),t._v(" "),a("b-row",{staticClass:"m-2"},[a("span",{staticClass:"cursor-pointer font-weight-bold mx-2",class:0===t.orderByIndex?"text-dark":"text-success",on:{click:function(e){return t.filterOrder(0)}}},[t._v("SL thấp")]),t._v(" "),a("div",{staticClass:"vr"}),t._v(" "),a("span",{staticClass:"cursor-pointer font-weight-bold mx-2",class:1===t.orderByIndex?"text-dark":"text-success",on:{click:function(e){return t.filterOrder(1)}}},[t._v("CF cao")]),t._v(" "),a("div",{staticClass:"vr"}),t._v(" "),a("span",{staticClass:"cursor-pointer font-weight-bold mx-2",class:2===t.orderByIndex?"text-dark":"text-success",on:{click:function(e){return t.filterOrder(2)}}},[t._v("Top thẻ phạt")]),t._v(" "),a("div",{staticClass:"vr"}),t._v(" "),a("span",{staticClass:"cursor-pointer font-weight-bold mx-2",class:3===t.orderByIndex?"text-dark":"text-success",on:{click:function(e){return t.filterOrder(3)}}},[t._v("Nghỉ nhiều")])]),t._v(" "),a("div",{staticClass:"row mb-1"},[a("div",{staticClass:"col-sm text-sm-left text-center pt-2 ml-1"},[a("span",{staticClass:"text-muted"},[t._v("Trang "+t._s(t.pagination.currentPage)+" trên "+t._s(t.totalPages))])]),t._v(" "),a("div",{staticClass:"col-sm pt-1"},[a("b-pagination",{staticClass:"justify-content-center justify-content-sm-end m-0 paginator-ghtk",attrs:{"total-rows":t.pagination.total,"per-page":t.pagination.limit,size:"sm"},on:{input:function(e){return t.getList()}},model:{value:t.pagination.currentPage,callback:function(e){t.$set(t.pagination,"currentPage",e)},expression:"pagination.currentPage"}})],1)]),t._v(" "),a("section",{staticClass:"border"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"text-size fixed-thead"},[a("table",{staticClass:"table table-hover m-0 table-bordered"},[a("tr",[t._m(0),t._v(" "),a("th",{staticClass:"border-right-0"},[a("div",{staticClass:"text-center text-nowrap font-weight-bold p-1"},[a("span",{staticClass:"cursor-pointer",on:{click:function(e){return t.sortByField("overall_quantity")}}},[t._v("Sản lượng\n                  "),a("br"),t._v(" "),a("small",{staticClass:"text-second_custom"},[t._v("(ĐH)")]),t._v(" "),a("span",["overall_quantity"!==t.filter.orderField?a("span",[a("i",{staticClass:"icon ion-md-arrow-dropdown"}),t._v(" "),a("i",{staticClass:"icon ion-md-arrow-dropup"})]):a("span",[a("i",{staticClass:"icon text-ghtk",class:"desc"===t.filter.orderType?"ion-md-arrow-dropdown":"ion-md-arrow-dropup"})])])])])]),t._v(" "),t._m(1),t._v(" "),a("th",{staticClass:"border-right-0"},[a("div",{staticClass:"text-center text-nowrap font-weight-bold p-1"},[a("span",{staticClass:"text-center cursor-pointer",on:{click:function(e){return t.sortByField("salary_expense")}}},[t._v("Lương\n                  "),a("br"),t._v(" "),a("small",{staticClass:"text-second_custom"},[t._v("(VNĐ/ĐH)")]),t._v(" "),a("br"),t._v(" "),a("span",["salary_expense"!==t.filter.orderField?a("span",[a("i",{staticClass:"icon ion-md-arrow-dropdown"}),a("i",{staticClass:"icon ion-md-arrow-dropup"})]):a("span",[a("i",{staticClass:"icon text-ghtk",class:"desc"===t.filter.orderType?"ion-md-arrow-dropdown":"ion-md-arrow-dropup"})])])])])]),t._v(" "),a("th",{staticClass:"border-left-0 border-right-0"},[a("div",{staticClass:"text-center text-nowrap font-weight-bold p-1"},[a("span",{staticClass:"text-center cursor-pointer",on:{click:function(e){return t.sortByField("refund_expense")}}},[t._v("Bồi hoàn\n                  "),a("br"),t._v(" "),a("small",{staticClass:"text-second_custom"},[t._v("(VNĐ/ĐH)")]),t._v(" "),a("br"),t._v(" "),a("span",["refund_expense"!==t.filter.orderField?a("span",[a("i",{staticClass:"icon ion-md-arrow-dropdown"}),a("i",{staticClass:"icon ion-md-arrow-dropup"})]):a("span",[a("i",{staticClass:"icon text-ghtk",class:"desc"===t.filter.orderType?"ion-md-arrow-dropdown":"ion-md-arrow-dropup"})])])])])]),t._v(" "),a("th",{staticClass:"border-left-0 border-right-0"},[a("div",{staticClass:"text-center text-nowrap font-weight-bold p-1"},[a("span",{staticClass:"text-center cursor-pointer",on:{click:function(e){return t.sortByField("allocation_expense")}}},[t._v("Cấp phát\n                  "),a("br"),t._v(" "),a("small",{staticClass:"text-second_custom"},[t._v("(VNĐ/ĐH)")]),t._v(" "),a("br"),t._v(" "),a("span",["allocation_expense"!==t.filter.orderField?a("span",[a("i",{staticClass:"icon ion-md-arrow-dropdown"}),a("i",{staticClass:"icon ion-md-arrow-dropup"})]):a("span",[a("i",{staticClass:"icon text-ghtk",class:"desc"===t.filter.orderType?"ion-md-arrow-dropdown":"ion-md-arrow-dropup"})])])])])]),t._v(" "),a("th",{staticClass:"border-left-0 border-right-0"},[a("div",{staticClass:"text-center text-nowrap font-weight-bold p-1"},[a("span",{staticClass:"text-center cursor-pointer",on:{click:function(e){return t.sortByField("location_expense")}}},[t._v("Địa điểm\n                  "),a("br"),t._v(" "),a("small",{staticClass:"text-second_custom"},[t._v("(VNĐ/ĐH)")]),t._v(" "),a("br"),t._v(" "),a("span",["location_expense"!==t.filter.orderField?a("span",[a("i",{staticClass:"icon ion-md-arrow-dropdown"}),a("i",{staticClass:"icon ion-md-arrow-dropup"})]):a("span",[a("i",{staticClass:"icon text-ghtk",class:"desc"===t.filter.orderType?"ion-md-arrow-dropdown":"ion-md-arrow-dropup"})])])])])]),t._v(" "),a("th",{staticClass:"border-left-0 border-right-0"},[a("div",{staticClass:"text-center text-nowrap font-weight-bold p-1"},[a("span",{staticClass:"text-center cursor-pointer",on:{click:function(e){return t.sortByField("office_expense")}}},[t._v("HCVP\n                  "),a("br"),t._v(" "),a("small",{staticClass:"text-second_custom"},[t._v("(VNĐ/ĐH)")]),t._v(" "),a("br"),t._v(" "),a("span",["office_expense"!==t.filter.orderField?a("span",[a("i",{staticClass:"icon ion-md-arrow-dropdown"}),a("i",{staticClass:"icon ion-md-arrow-dropup"})]):a("span",[a("i",{staticClass:"icon text-ghtk",class:"desc"===t.filter.orderType?"ion-md-arrow-dropdown":"ion-md-arrow-dropup"})])])])])]),t._v(" "),a("th",{staticClass:"border-left-0"},[a("div",{staticClass:"text-center text-nowrap font-weight-bold p-1"},[a("span",{staticClass:"text-center cursor-pointer",on:{click:function(e){return t.sortByField("total_expense")}}},[t._v("Tổng\n                  "),a("br"),t._v(" "),a("small",{staticClass:"text-second_custom"},[t._v("(VNĐ/ĐH)")]),t._v(" "),a("br"),t._v(" "),a("span",["total_expense"!==t.filter.orderField?a("span",[a("i",{staticClass:"icon ion-md-arrow-dropdown"}),a("i",{staticClass:"icon ion-md-arrow-dropup"})]):a("span",[a("i",{staticClass:"icon text-ghtk",class:"desc"===t.filter.orderType?"ion-md-arrow-dropdown":"ion-md-arrow-dropup"})])])])])]),t._v(" "),a("th",{staticClass:"border-left-0 border-right-0"},[a("div",{staticClass:"text-center text-nowrap font-weight-bold p-1"},[a("span",{staticClass:"text-center cursor-pointer",on:{click:function(e){return t.sortByField("total_penalty")}}},[t._v("Tổng thẻ phạt\n                  "),a("br"),t._v(" "),a("span",["total_penalty"!==t.filter.orderField?a("span",[a("i",{staticClass:"icon ion-md-arrow-dropdown"}),a("i",{staticClass:"icon ion-md-arrow-dropup"})]):a("span",[a("i",{staticClass:"icon text-ghtk",class:"desc"===t.filter.orderType?"ion-md-arrow-dropdown":"ion-md-arrow-dropup"})])])])])]),t._v(" "),a("th",{staticClass:"border-left-0 border-right-0"},[a("div",{staticClass:"text-center text-nowrap font-weight-bold p-1"},[a("span",{staticClass:"text-center cursor-pointer",on:{click:function(e){return t.sortByField("working_employee")}}},[t._v("Đi làm"),a("span",[a("br"),t._v(" "),"working_employee"!==t.filter.orderField?a("span",[a("i",{staticClass:"icon ion-md-arrow-dropdown"}),a("i",{staticClass:"icon ion-md-arrow-dropup"})]):a("span",[a("i",{staticClass:"icon text-ghtk",class:"desc"===t.filter.orderType?"ion-md-arrow-dropdown":"ion-md-arrow-dropup"})])])])])]),t._v(" "),t._m(2)]),t._v(" "),t._l(t.list,function(e,n){return[a("tr",{key:n,staticClass:"pay-label"},[a("td",{staticClass:"address-custom"},[a("span",{staticClass:"text-dark text-fw-500"},[t._v(t._s(e.station_name))]),t._v(" "),a("br"),t._v(" "),a("span",{staticClass:"text-second_custom"},[t._v(t._s(e.station_address))])]),t._v(" "),a("td",{staticClass:"text-center p-4 border-right-0"},[t._v(t._s(t._f("formatNumber")(e.overall_quantity)))]),t._v(" "),a("td",{staticClass:"text-center p-4 border-left-0"},[t._v(t._s(e.overall_quality)+"%")]),t._v(" "),a("td",{staticClass:"text-center p-4 border-right-0"},[t._v(t._s(t._f("formatNumber")(e.salary_expense)))]),t._v(" "),a("td",{staticClass:"text-center p-4 border-right-0  border-left-0"},[t._v("\n                "+t._s(t._f("formatNumber")(e.refund_expense))+"\n              ")]),t._v(" "),a("td",{staticClass:"text-center p-4 border-right-0  border-left-0"},[t._v("\n                "+t._s(t._f("formatNumber")(e.allocation_expense))+"\n              ")]),t._v(" "),a("td",{staticClass:"text-center p-4 border-right-0  border-left-0"},[t._v("\n                "+t._s(t._f("formatNumber")(e.location_expense))+"\n              ")]),t._v(" "),a("td",{staticClass:"text-center p-4 border-right-0  border-left-0"},[t._v("\n                "+t._s(t._f("formatNumber")(e.office_expense))+"\n              ")]),t._v(" "),a("td",{staticClass:"text-center p-4 border-left-0"},[t._v(t._s(t._f("formatNumber")(e.total_expense)))]),t._v(" "),a("td",{staticClass:"text-center p-4 border-right-0 "},[t._v(t._s(t._f("formatNumber")(e.total_penalty))+" Thẻ")]),t._v(" "),a("td",{staticClass:"text-center p-4 border-right-0 border-left-0"},[t._v("\n                "+t._s(t._f("formatNumber")(e.working_employee))+"\n              ")]),t._v(" "),a("td",{staticClass:"text-center p-4 border-left-0"},[t._v("\n                "+t._s(t._f("formatNumber")(e.total_recruit))+"/"+t._s(t._f("formatNumber")(e.total_layoff))+"\n              ")])])]}),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:!t.list||0===t.list.length,expression:"!list || list.length === 0"}]},[t._m(3)])],2)])])],1)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("th",[e("div",{staticClass:"text-left font-weight-bold p-1"},[this._v("Bưu cục")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("th",{staticClass:"border-left-0"},[e("div",{staticClass:"text-center text-nowrap font-weight-bold p-1"},[e("span",{staticClass:"text-center"},[this._v("Chất lượng\n                  ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("th",{staticClass:"border-left-0"},[e("div",{staticClass:"text-center text-nowrap font-weight-bold p-1"},[e("span",[this._v("Tuyển/nghỉ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"text-center align-middle no-result",attrs:{colspan:"100"}},[e("b",[this._v("Rất tiếc, Không có bản ghi nào !")])])}],!1,xs,"data-v-023b079c",null).exports,Ms=a("5k9y"),Ts=a("Vec3"),Ds=a("TwHU"),Is=a("dbv8"),Ps=a("YlZe"),Es=a("CAWZ"),Ls=a("GoQ2"),As=a("qOi5"),Os=a("+rLF"),Ns=a("Lo5R"),Rs=a("2QYU"),Us={name:"select-guardian-reason",components:{Multiselect:la.a},props:{value:{default:null},reasons:{default:null},optionType:{default:"approved"},autoClose:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},hideSelected:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{default:"Chọn lý do"}},data:function(){return{options:{approved:Ds.a,rejected:Ds.e}}},created:function(){},watch:{reasons:function(t,e){this.setOption()}},methods:{}};var $s=function(t){a("rstE")},Hs=Object(y.a)(Us,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{attrs:{value:t.value,options:t.options[t.optionType]||[],multiple:t.multiple,placeholder:t.placeholder,label:"text","track-by":"value","selected-label":"","deselect-label":"X","select-label":"",disabled:t.disabled,"hide-selected":t.hideSelected,"close-on-select":t.autoClose},on:{input:function(e){t.$emit("input",e)},change:function(e){t.$emit("change",e)},remove:function(e){t.$emit("remove",e)}}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,$s,"data-v-0c9680fc",null).exports,Bs=a("o1vX"),js={name:"form-guardian-info",components:{SingleSelectProvince:bs.a,SingleSelectDistrict:As.a,SingleSelectSubDistrict:Os.a,SelectGuardianReason:Hs,SelectRelation:Rs.a,SingleSelectPoiIdentityCard:Ns.a,SensitiveFormInput:Bs.a},props:{guardian:{type:Object,default:function(t){return{}}},userId:{type:String,default:function(t){return null}},configGuardianSensitiveData:{type:Object,default:function(t){return{phone:!1,personal_id:!1}}}},data:function(t){return{}},computed:{currentUserId:function(){return this.userId}},methods:{viewSensitiveGuardian:function(t,e){this.guardian[e]=t,this.configGuardianSensitiveData[e]=!0},removePoiPersonalId:function(t){this.guardian.personal_id_place=null},selectedPoiPersonalId:function(t){this.guardian.personal_id_place=t?t.id:""},limitLengthGuardian:function(t,e){this.guardian[t].length>e&&(this.guardian[t]=this.guardian[t].substring(0,e))}}},Fs=Object(y.a)(js,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Họ tên người bảo lãnh "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("b-input",{staticClass:"rounded",attrs:{id:"input-default"},model:{value:t.guardian.fullname,callback:function(e){t.$set(t.guardian,"fullname",e)},expression:"guardian.fullname"}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Ngày sinh "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("v-date-picker",{staticClass:"date-picker",attrs:{popover:{visibility:"focus"},mode:"date",locale:"vi",color:"green","input-props":{placeholder:"",style:"font-size: 0.894rem !important; color: #4E5155 !important;"}},model:{value:t.guardian.birthday,callback:function(e){t.$set(t.guardian,"birthday",e)},expression:"guardian.birthday"}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("CMND/CCCD "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),t.currentUserId&&!t.configGuardianSensitiveData.personal_id?a("SensitiveFormInput",{attrs:{"data-input":t.guardian.personal_id,"user-id":t.currentUserId,type:"guardian_identity_card_number",source:"FormGuardianInfo"},on:{returnRawData:function(e){return t.viewSensitiveGuardian(e,"personal_id")}}}):[a("b-input",{directives:[{name:"validate",rawName:"v-validate",value:{numeric:!0,min:9,max:12,regex:/^(.{12}|.{9})$/},expression:"{numeric: true, min: 9, max: 12, regex: /^(.{12}|.{9})$/}"}],staticClass:"rounded",class:{"is-danger":t.errors.has("guardian.personal_id")},attrs:{id:"input-default",name:"guardian.personal_id"},on:{keyup:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return t.limitLengthGuardian.apply(void 0,["personal_id",12].concat(n))}},model:{value:t.guardian.personal_id,callback:function(e){t.$set(t.guardian,"personal_id",e)},expression:"guardian.personal_id"}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"numeric"==t.errors.firstRule("guardian.personal_id"),expression:"errors.firstRule('guardian.personal_id') == 'numeric'"}],staticClass:"help is-danger"},[t._v("Vui lòng nhập số")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"min"==t.errors.firstRule("guardian.personal_id"),expression:"errors.firstRule('guardian.personal_id') == 'min'"}],staticClass:"help is-danger"},[t._v("Không đủ ký tự CMND ")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"max"==t.errors.firstRule("guardian.personal_id"),expression:"errors.firstRule('guardian.personal_id') == 'max'"}],staticClass:"help is-danger"},[t._v("Vượt quá ký tự CMND")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"regex"==t.errors.firstRule("guardian.personal_id"),expression:"errors.firstRule('guardian.personal_id') == 'regex'"}],staticClass:"help is-danger"},[t._v("Số cmnd không đúng")])]],2),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Ngày cấp "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("v-date-picker",{staticClass:"date-picker",attrs:{popover:{visibility:"focus"},mode:"date",locale:"vi",color:"green","input-props":{placeholder:"",style:"font-size: 0.894rem !important; color: #4E5155 !important;"}},model:{value:t.guardian.personal_id_date,callback:function(e){t.$set(t.guardian,"personal_id_date",e)},expression:"guardian.personal_id_date"}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Nơi cấp "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("single-select-poi-identity-card",{attrs:{state:""!=t.guardian.personal_id_place&&null,placeholder:"Nơi cấp CMND",provinceId:t.guardian.personal_id_place},on:{handleSelectedProvince:t.selectedPoiPersonalId,remove:t.removePoiPersonalId}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Địa chỉ thường trú "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("single-select-province",{attrs:{provinceId:t.guardian.resident_province},on:{input:function(e){t.guardian.resident_province=e?e.id:null}}})],1),t._v(" "),a("div",{staticClass:"d-flex mb-3"},[a("single-select-district",{staticClass:"mr-2",attrs:{provinceId:t.guardian.resident_province,districtId:t.guardian.resident_district},on:{input:function(e){t.guardian.resident_district=e?e.id:null}}}),t._v(" "),a("single-select-sub-district",{attrs:{provinceId:t.guardian.resident_province,districtId:t.guardian.resident_district,subDistrictId:t.guardian.resident_sub_district},on:{input:function(e){t.guardian.resident_sub_district=e?e.id:null}}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Địa chỉ hiện tại "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("single-select-province",{attrs:{provinceId:t.guardian.current_province},on:{input:function(e){t.guardian.current_province=e?e.id:null}}})],1),t._v(" "),a("div",{staticClass:"d-flex mb-3"},[a("single-select-district",{staticClass:"mr-2",attrs:{provinceId:t.guardian.current_province,districtId:t.guardian.current_district},on:{input:function(e){t.guardian.current_district=e?e.id:null}}}),t._v(" "),a("single-select-sub-district",{attrs:{provinceId:t.guardian.current_province,districtId:t.guardian.current_district,subDistrictId:t.guardian.current_sub_district},on:{input:function(e){t.guardian.current_sub_district=e?e.id:null}}})],1),t._v(" "),a("b-form-group",[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.guardian.current_detail,expression:"guardian.current_detail",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{placeholder:"Số nhà, tên đường"},domProps:{value:t.guardian.current_detail},on:{input:function(e){e.target.composing||t.$set(t.guardian,"current_detail",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Mối quan hệ "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("SelectRelation",{attrs:{relationOption:"guardian"},model:{value:t.guardian.relation,callback:function(e){t.$set(t.guardian,"relation",e)},expression:"guardian.relation"}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Số điện thoại "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),t.currentUserId&&!t.configGuardianSensitiveData.phone?a("SensitiveFormInput",{attrs:{"data-input":t.guardian.phone,"user-id":t.currentUserId,type:"guardian_phone",source:"FormGuardianInfo"},on:{returnRawData:function(e){return t.viewSensitiveGuardian(e,"phone")}}}):[a("b-input",{directives:[{name:"validate",rawName:"v-validate",value:{numeric:!0,regex:/^(84|0)(3|5|7|8|9)([0-9]{8})$/},expression:"{numeric: true, regex: /^(84|0)(3|5|7|8|9)([0-9]{8})$/}"}],staticClass:"rounded",class:{"is-danger":t.errors.has("guardian.phone")},attrs:{id:"input-default",name:"guardian.phone"},on:{keyup:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return t.limitLengthGuardian.apply(void 0,["phone",15].concat(n))}},model:{value:t.guardian.phone,callback:function(e){t.$set(t.guardian,"phone",e)},expression:"guardian.phone"}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"numeric"==t.errors.firstRule("guardian.phone"),expression:"errors.firstRule('guardian.phone') == 'numeric'"}],staticClass:"help is-danger"},[t._v("Vui lòng nhập số ")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"regex"==t.errors.firstRule("guardian.phone"),expression:"errors.firstRule('guardian.phone') == 'regex'"}],staticClass:"help is-danger"},[t._v("Số điện thoại không đúng")])]],2),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Nơi xác thực giấy bảo lãnh "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("b-input",{staticClass:"rounded",attrs:{id:"input-default"},model:{value:t.guardian.license_place,callback:function(e){t.$set(t.guardian,"license_place",e)},expression:"guardian.license_place"}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Chọn lý do duyệt "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("SelectGuardianReason",{attrs:{"option-type":"approved","auto-close":!0,placeholder:""},model:{value:t.guardian.bltnds_reason,callback:function(e){t.$set(t.guardian,"bltnds_reason",e)},expression:"guardian.bltnds_reason"}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Thông tin khai thác thêm từ NBL "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("b-input",{staticClass:"rounded",attrs:{id:"input-default"},model:{value:t.guardian.other_info,callback:function(e){t.$set(t.guardian,"other_info",e)},expression:"guardian.other_info"}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Ghi chú")]),t._v(" "),a("b-input",{staticClass:"rounded",attrs:{id:"input-default"},model:{value:t.guardian.note,callback:function(e){t.$set(t.guardian,"note",e)},expression:"guardian.note"}})],1)],1)},[],!1,null,null,null).exports,qs={components:{SingleSelectDocumentType:Is.a,SingleSelectPosition:Ps.a,SingleSelectStation:oa.a,FormGuardianInfo:Fs},props:{openModal:!1,hidePopup:null,uploading:{default:!1}},data:function(){return{loading:!1,open:!1,masterProfileId:null,fullname:null,stationId:null,positionId:null,documentId:null,note:null,files:[],info:{},timmer:null,driverLicense:{no_number:null,class:null,beginning_date:null,expiry_date:null,document_name:null},guardian:{fullname:null,birthday:null,personal_id:null,personal_id_date:null,personal_id_place:null,resident_province:null,resident_district:null,resident_sub_district:null,resident_detail:null,current_province:null,current_district:null,current_sub_district:null,current_detail:null,relation:null,phone:null,license_place:null,bltnds_reason:null,other_info:null,note:null},vehicleRC:{head_license_plate:null,tail_license_plate:null},healthCert:{class:null},healthClassOptions:Ls.a.LIST_HEALTH_CLASSES,resetDocumentType:!1}},methods:{saveDriverLicense:function(){this.checkRequiredInfoDriverLicense()?this.saveDocument():Me.a.showMessage("Bạn cần nhập đầy đủ thông tin Bằng lái xe.","warning")},saveGuardian:function(){this.checkRequiredInfoGuardian()?this.saveDocument():Me.a.showMessage("Bạn cần nhập đầy đủ thông tin Người bảo lãnh.","warning")},saveVehicleRC:function(){this.checkRequiredVehicleRCInfo()?this.saveDocument():Me.a.showMessage("Bạn cần nhập đầy đủ thông tin biển số xe.","warning")},done:function(){+this.documentId===Ls.a.TYPE_DRIVER_LICENSE?this.checkRequiredInfo()?(this.$bvModal.hide("modal-create-document"),this.hidePopup=null,this.$bvModal.show("modal-input-driver-license")):Me.a.showMessage("Bạn cần nhập đầy đủ thông tin hồ sơ.","warning"):+this.documentId===Ls.a.TYPE_GUARDIAN_LETTER?this.checkRequiredInfo()?(this.$bvModal.hide("modal-create-document"),this.hidePopup=null,this.$bvModal.show("modal-input-guardian")):Me.a.showMessage("Bạn cần nhập đầy đủ thông tin hồ sơ.","warning"):+this.documentId===Ls.a.TYPE_VEHICLE_RC?this.checkRequiredInfo()?(this.$bvModal.hide("modal-create-document"),this.hidePopup=null,this.$bvModal.show("modal-input-vehicle-rc")):Me.a.showMessage("Bạn cần nhập đầy đủ thông tin hồ sơ.","warning"):+this.documentId!==Ls.a.TYPE_HEALTH_CERTIFICATE||this.checkRequiredHealthCertInfo()?this.checkRequiredInfo()?this.saveDocument():Me.a.showMessage("Bạn cần nhập đầy đủ thông tin hồ sơ.","warning"):Me.a.showMessage("Bạn cần nhập thông tin phân loại sức khỏe.","warning")},saveDocument:function(){var t=new FormData;if(this.masterProfileId&&t.append("masterProfileId",this.masterProfileId),this.fullname&&t.append("fullname",this.fullname),this.stationId&&t.append("stationId",this.stationId),this.positionId&&t.append("positionId",this.positionId),this.documentId&&t.append("documentId",this.documentId),this.note&&t.append("note",this.note),this.files.map(function(e,a){e.map(function(e,n){e.name&&t.append("files["+a+n+"]",e)})}),t.append("is_hr",1),+this.documentId===Ls.a.TYPE_DRIVER_LICENSE){t.append("driver_no_number",this.driverLicense.no_number),t.append("driver_class",this.driverLicense.class);var e="";this.driverLicense.beginning_date&&(e=(e=new Date(this.driverLicense.beginning_date)).toISOString()),t.append("driver_beginning_date",e);var a="";this.driverLicense.expiry_date&&(a=(a=new Date(this.driverLicense.expiry_date)).toISOString()),t.append("driver_expiry_date",a)}+this.documentId===Ls.a.TYPE_GUARDIAN_LETTER&&t.append("doc_data",sa()(this.guardian)),+this.documentId===Ls.a.TYPE_VEHICLE_RC&&(t.append("head_license_plate",this.vehicleRC.head_license_plate),t.append("tail_license_plate",this.vehicleRC.tail_license_plate)),+this.documentId===Ls.a.TYPE_HEALTH_CERTIFICATE&&t.append("health_certificate_class",this.healthCert.class),this.$emit("done",t)},checkRequiredInfo:function(){return this.masterProfileId&&this.info.fullname&&this.stationId&&this.positionId&&this.documentId&&this.files.length&&this.files[0].length},checkRequiredInfoDriverLicense:function(){return this.driverLicense.no_number&&this.driverLicense.class&&this.driverLicense.beginning_date},checkRequiredInfoGuardian:function(){return this.guardian.fullname&&this.guardian.birthday&&this.guardian.personal_id&&this.guardian.personal_id_date&&this.guardian.personal_id_place&&this.guardian.resident_province&&(this.guardian.resident_district||this.guardian.resident_sub_district)&&this.guardian.current_province&&(this.guardian.current_district||this.guardian.current_sub_district)&&this.guardian.relation&&this.guardian.phone&&this.guardian.license_place&&this.guardian.bltnds_reason&&this.guardian.other_info},checkRequiredVehicleRCInfo:function(){return this.vehicleRC.head_license_plate&&this.vehicleRC.tail_license_plate},checkRequiredHealthCertInfo:function(){return null!==this.healthCert.class},selectDocType:function(t){this.documentId=t.id},selectPosition:function(t){this.positionId=t.id},selectStation:function(t){this.stationId=t.id},onClose:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(+t.documentId===Ls.a.TYPE_GUARDIAN_LETTER||+t.documentId===Ls.a.TYPE_DRIVER_LICENSE||+t.documentId===Ls.a.TYPE_VEHICLE_RC){e.next=3;break}return e.next=3,t.onSave();case 3:case"end":return e.stop()}},e,t)}))()},onSave:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.reset();case 2:t.$emit("updateOpen",!1);case 3:case"end":return e.stop()}},e,t)}))()},reset:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.open=!1),this.masterProfileId=null,this.fullname=null,this.stationId=null,this.positionId=null,this.documentId=null,this.note=null,this.files=[[]],this.info={},this.resetDocumentType=null,this.driverLicense={no_number:null,class:null,beginning_date:null,expiry_date:null,document_name:null},this.vehicleRC={head_license_plate:null,tail_license_plate:null},this.guardian={fullname:null,birthday:null,personal_id:null,personal_id_date:null,personal_id_place:null,resident_province:null,resident_district:null,resident_sub_district:null,resident_detail:null,current_province:null,current_district:null,current_sub_district:null,current_detail:null,relation:null,phone:null,license_place:null,bltnds_reason:null,other_info:null,note:null}},searchMasterProfile:function(){var t=this;this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,Es.a.getDocumentDataFromMPId({id:t.masterProfileId});case 4:a=e.sent,(n=a.data).success?(t.info.fullname=n.info.ErpMasterProfile.fullname,t.info.station=n.info.Station.name,t.info.position=n.info.EmpPosition.position_name,t.stationId=n.info.Station.id,t.positionId=n.info.EmpPosition.id):(t.reset(!1),Me.a.showMessage(n.message,"warning")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:return e.prev=12,t.loading=!1,e.finish(12);case 15:case"end":return e.stop()}},e,t,[[0,9,12,15]])})),800)}},watch:{openModal:function(t){t?(this.resetDocumentType=!1,this.hidePopup=null,this.$bvModal.show("modal-create-document")):this.$bvModal.hide("modal-create-document")},open:function(t){this.$emit("updateOpen",t)},masterProfileId:function(){this.masterProfileId&&this.searchMasterProfile()},hidePopup:function(){!0===this.hidePopup&&(this.$bvModal.hide("modal-create-document"),this.$bvModal.hide("modal-input-driver-license"),this.$bvModal.hide("modal-input-guardian"),this.$bvModal.hide("modal-input-vehicle-rc"))}}};var Ys=function(t){a("HyZu")},zs=Object(y.a)(qs,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{attrs:{static:"",id:"modal-create-document",title:"Thêm hồ sơ"},on:{hidden:t.onClose},model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[a("b-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("b-form-group",[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Mã MP "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("b-form-input",{attrs:{type:"email",placeholder:"Mã master profile",required:""},model:{value:t.masterProfileId,callback:function(e){t.masterProfileId=e},expression:"masterProfileId"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"Họ tên"}},[a("b-form-input",{attrs:{disabled:!0,placeholder:"Họ và tên",required:""},model:{value:t.info.fullname,callback:function(e){t.$set(t.info,"fullname",e)},expression:"info.fullname"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"Kho"}},[a("SingleSelectStation",{attrs:{stationId:t.stationId,isDisabled:!0,placeholder:"Chọn kho"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"Vị trí"}},[a("SingleSelectPosition",{attrs:{positionJob:t.positionId,isDisabled:!0}})],1),t._v(" "),a("b-form-group",[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Loại hồ sơ "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("SingleSelectDocumentType",{attrs:{customClass:"z-5",reset:t.resetDocumentType},on:{handleSelected:t.selectDocType}})],1),t._v(" "),5==t.documentId?a("b-form-group",[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Phân loại "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("b-form-select",{attrs:{options:t.healthClassOptions},model:{value:t.healthCert.class,callback:function(e){t.$set(t.healthCert,"class",e)},expression:"healthCert.class"}})],1):t._e(),t._v(" "),a("b-form-group",{attrs:{label:"Ghi chú"}},[a("b-form-textarea",{attrs:{placeholder:"Ghi chú",rows:"3"},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}})],1),t._v(" "),a("b-form-group",[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("File "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),t._l(t.files,function(e,n){return a("b-form-file",{key:"file"+n,staticClass:"custom-file z-0",attrs:{multiple:!0,accept:".jpg, .png, .gif, .jpeg, .pdf",placeholder:"Vui lòng chọn file upload..."},model:{value:t.files[n],callback:function(e){t.$set(t.files,n,e)},expression:"files[index]"}})}),t._v(" "),a("b-button",{attrs:{variant:"outline-secondary",size:"sm"},on:{click:function(e){return t.files.push([])}}},[t._v("Thêm file khác")])],2)],1),t._v(" "),a("template",{slot:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){t.open=!1}}},[t._v("Hủy")]),t._v(" "),a("button",{staticClass:"btn btn-success",attrs:{type:"button",disabled:t.uploading},on:{click:t.done}},[t._v("Xong")])])],2),t._v(" "),a("b-modal",{attrs:{static:"",id:"modal-input-driver-license","hide-footer":"",title:"Nhập thông tin Bằng lái xe"},on:{hidden:t.onSave}},[a("div",[a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Họ tên")]),t._v(" "),a("b-input",{staticClass:"rounded",attrs:{id:"input-default",disabled:""},model:{value:t.info.fullname,callback:function(e){t.$set(t.info,"fullname",e)},expression:"info.fullname"}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Hồ sơ")]),t._v(" "),a("b-input",{staticClass:"rounded",attrs:{id:"input-default",value:"Bằng lái xe",disabled:""}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Số "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("b-input",{staticClass:"rounded",attrs:{id:"input-default"},model:{value:t.driverLicense.no_number,callback:function(e){t.$set(t.driverLicense,"no_number",e)},expression:"driverLicense.no_number"}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Hạng bằng "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("b-input",{staticClass:"rounded",attrs:{id:"input-default"},model:{value:t.driverLicense.class,callback:function(e){t.$set(t.driverLicense,"class",e)},expression:"driverLicense.class"}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Ngày bắt đầu "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("v-date-picker",{attrs:{popover:{visibility:"focus"},mode:"date",locale:"vi",color:"green","input-props":{placeholder:"Ngày bắt đầu",style:"font-size: 14px !important; color: #4E5155 !important;"}},model:{value:t.driverLicense.beginning_date,callback:function(e){t.$set(t.driverLicense,"beginning_date",e)},expression:"driverLicense.beginning_date"}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Ngày kết thúc")]),t._v(" "),a("v-date-picker",{attrs:{popover:{visibility:"focus"},mode:"date",locale:"vi",color:"green","input-props":{placeholder:"Ngày kết thúc",style:"font-size: 14px !important; color: #4E5155 !important;"}},model:{value:t.driverLicense.expiry_date,callback:function(e){t.$set(t.driverLicense,"expiry_date",e)},expression:"driverLicense.expiry_date"}})],1)],1),t._v(" "),a("div",{staticClass:"text-center mt-3"},[a("button",{staticClass:"btn btn-ghtk rounded",attrs:{disabled:t.uploading},on:{click:t.saveDriverLicense}},[t._v("Xác nhận")])])]),t._v(" "),a("b-modal",{attrs:{static:"",id:"modal-input-vehicle-rc","hide-footer":"",title:"Nhập thông tin Giấy chứng nhận đăng ký xe"},on:{hidden:t.onSave}},[a("div",[a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Họ tên")]),t._v(" "),a("b-input",{staticClass:"rounded",attrs:{id:"input-default",disabled:""},model:{value:t.info.fullname,callback:function(e){t.$set(t.info,"fullname",e)},expression:"info.fullname"}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Hồ sơ")]),t._v(" "),a("b-input",{staticClass:"rounded",attrs:{id:"input-default",value:"Giấy chứng nhận đăng ký xe",disabled:""}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Biển số xe")]),t._v(" "),a("div",[a("b-input",{staticClass:"rounded input_license_plate",attrs:{id:"input-default"},model:{value:t.vehicleRC.head_license_plate,callback:function(e){t.$set(t.vehicleRC,"head_license_plate",e)},expression:"vehicleRC.head_license_plate"}}),t._v(" "),a("span",[t._v(" - ")]),t._v(" "),a("b-input",{staticClass:"rounded input_license_plate",attrs:{id:"input-default"},model:{value:t.vehicleRC.tail_license_plate,callback:function(e){t.$set(t.vehicleRC,"tail_license_plate",e)},expression:"vehicleRC.tail_license_plate"}})],1)])],1),t._v(" "),a("div",{staticClass:"text-center mt-3"},[a("button",{staticClass:"btn btn-ghtk rounded",attrs:{disabled:t.uploading},on:{click:t.saveVehicleRC}},[t._v("Xác nhận")])])]),t._v(" "),a("b-modal",{attrs:{static:"",id:"modal-input-guardian","hide-footer":"",title:"Nhập thông tin Người bảo lãnh"},on:{hidden:t.onSave}},[a("FormGuardianInfo",{attrs:{guardian:t.guardian}}),t._v(" "),a("div",{staticClass:"text-center mt-3"},[a("button",{staticClass:"btn btn-ghtk rounded",attrs:{disabled:t.uploading},on:{click:t.saveGuardian}},[t._v("Xác nhận")])])],1)],1)},[],!1,Ys,"data-v-7e201929",null).exports,Gs=a("csCE"),Ks={data:function(){return{loading:!1,lackingDocs:{lack:0,percent:0},userLackingDocs:{total:0,percent:0},outOfDateData:{totalOutOfDate:0,percent:0}}},mounted:function(){this.getAnalyticData()},methods:{getAnalyticData:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,Es.a.getDocumentAnalytic();case 4:a=e.sent,n=a.data,t.lackingDocs=n.lackingDocs,t.userLackingDocs=n.userLackingDocData,t.outOfDateData=n.outOfDateDocs,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:return e.prev=14,t.loading=!1,e.finish(14);case 17:case"end":return e.stop()}},e,t,[[0,11,14,17]])}))()}}};var Vs=function(t){a("8xxY")},Qs=Object(y.a)(Ks,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-col",{attrs:{md:"8"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"analytic-bar"},[a("div",{staticClass:"analytic-box"},[a("b",[t._v("Số lượng HS thiếu")]),t._v(" "),a("p",[a("b-badge",{staticClass:"custom-baged",attrs:{variant:"secondary"}},[t._v(t._s(t.lackingDocs.lack))])],1)]),t._v(" "),a("div",{staticClass:"analytic-box"},[a("b",[t._v("Tỷ lệ HS thiếu")]),t._v(" "),a("p",[a("b-badge",{staticClass:"custom-baged",attrs:{variant:"secondary"}},[t._v(t._s(t.lackingDocs.percent)+" %")])],1)]),t._v(" "),a("div",{staticClass:"analytic-box"},[a("b",[t._v("Số lượng nhân viên thiếu HS")]),t._v(" "),a("p",[a("b-badge",{staticClass:"custom-baged",attrs:{variant:"warning"}},[t._v(t._s(t.userLackingDocs.total))])],1)]),t._v(" "),a("div",{staticClass:"analytic-box"},[a("b",[t._v("Tỷ lệ nhận viên thiếu HS")]),t._v(" "),a("p",[a("b-badge",{staticClass:"custom-baged",attrs:{variant:"warning"}},[t._v(t._s(t.userLackingDocs.percent)+"%")])],1)])])])},[],!1,Vs,"data-v-028bf6e2",null).exports,Xs=a("0XQL"),Ws={name:"guardian-ghtk-staff-info",components:{},props:{staffInfo:{type:Object,default:function(t){return{}}}},data:function(t){return{}},methods:{getBriefStatusProfileName:function(t){return Xs.a.getBriefStatusProfileName(t)},getBriefStatusProfileClass:function(t){return Xs.a.getBriefStatusProfileClass(t)}}};var Js=function(t){a("TZgx")},Zs=Object(y.a)(Ws,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"guardian-ghtk-form"},[null===t.staffInfo?a("div",[t._v("\n    Không tìm thấy thông tin người bảo lãnh đã từng là nhân viên của Giao hàng tiết kiệm\n  ")]):[a("div",{staticClass:"guardian-ghtk-form__top-desc"},[t._v("Người bảo lãnh từng là nhân viên của Giao Hàng Tiết Kiệm")]),t._v(" "),a("div",[a("div",{staticClass:"flex-form-group"},[a("div",{staticClass:"flex-form-item is_label"},[t._v("Họ và tên:")]),t._v(" "),a("div",{},[t._v(t._s(t.staffInfo.fullname))])]),t._v(" "),a("div",{staticClass:"flex-form-group"},[a("div",{staticClass:"flex-form-item is_label"},[t._v("Mã nhân viên:")]),t._v(" "),a("div",{},[a("router-link",{staticClass:"ghtk-color",staticStyle:{"text-decoration":"underline"},attrs:{to:{name:"edit-master-profile",params:{id:t.staffInfo.id}},target:"_blank"}},[t._v("\n            "+t._s(t.staffInfo.staff_code)+"\n          ")])],1)]),t._v(" "),a("div",{staticClass:"flex-form-group"},[a("div",{staticClass:"flex-form-item is_label"},[t._v("CMND/CCCD:")]),t._v(" "),a("div",{},[t._v(t._s(t.staffInfo.personal_id_number))])]),t._v(" "),a("div",{staticClass:"flex-form-group"},[a("div",{staticClass:"flex-form-item is_label"},[t._v("Vị trí:")]),t._v(" "),a("div",{},[t._v(t._s(t.staffInfo.position_name))])]),t._v(" "),a("div",{staticClass:"flex-form-group"},[a("div",{staticClass:"flex-form-item is_label"},[t._v("Trạng thái làm việc:")]),t._v(" "),a("div",{},[a("span",{class:t.getBriefStatusProfileClass(t.staffInfo.status)},[t._v(t._s(t.getBriefStatusProfileName(t.staffInfo.status)))])])]),t._v(" "),"disable"===t.staffInfo.status?a("div",{staticClass:"flex-form-group"},[a("div",{staticClass:"flex-form-item is_label"},[t._v("Loại nghỉ:")]),t._v(" "),a("div",{},[t._v(t._s(t.staffInfo.resign_type_desc))])]):t._e(),t._v(" "),"disable"===t.staffInfo.status?a("div",{staticClass:"flex-form-group"},[a("div",{staticClass:"flex-form-item is_label"},[t._v("Lý do nghỉ:")]),t._v(" "),a("div",{},[t._v(t._s(t.staffInfo.resign_reason))])]):t._e()])]],2)},[],!1,Js,"data-v-0ab03abe",null).exports,to=a("D52M"),eo=a("xF2Z"),ao=a("PikB"),no=function(t){return ao.a.get("AdMasterProfile/apiGetDataCic",{params:t})},io=function(t){return Pe.a.post("ErpProfileDocument/apiApproveDocument",t)},so={name:"modal-approve-cic",components:{Moment:Ye.a,Datepicker:qi.a,profileService:eo.a},props:{permissionEditCic:!1,profileDocumentId:null,user:null,isPermissionEdit:!1},data:function(){return{loading:!1,selected:0,language:{vi:to.a},message:null,dataDocsCic:{bad_debt:0,credit_score:0,credit_level:0,grading_date:null,bad_debt_vnd:0,bad_debt_usd:0,number_bad_debt_banks:0,ordinary_debt_vnd:0,ordinary_debt_usd:0,number_ordinary_debt_banks:0,number_bad_debt_banks_5_year:0,note:""},data_current_cic:1,type:"have_cic_data"}},methods:{onClose:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.reset();case 1:case"end":return e.stop()}},e,t)}))()},reset:function(){},getDataCic:function(){var t=l()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.dataDocsCic={},this.loading=!0,t.prev=2,t.next=5,no({profile_document_id:this.profileDocumentId});case 5:e=t.sent,this.message=e.data.message?e.data.message:"Không tìm thấy dữ liệu CIC",e.data.success?this.convertDataCic(e.data.data):(this.type="error",Me.a.showMessage(e.data.message||"Có lỗi xảy ra","warning")),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0),t.t0.response&&t.t0.response.data&&t.t0.response.data.message&&(this.type="error",this.message="Không tìm thấy dữ liệu CIC",Me.a.showMessage(t.t0.response.data.message||"Có lỗi xảy ra","warning"));case 14:return t.prev=14,this.loading=!1,t.finish(14);case 17:case"end":return t.stop()}},t,this,[[2,10,14,17]])}));return function(){return t.apply(this,arguments)}}(),convertDataCic:function(t){if(this.type=t.type,t&&"invalid_id_number"===t.type)this.message="Không tìm thấy file CIC ứng với số CMND/CCCD của user "+(this.user&&this.user.username)+". Vui lòng liên hệ với NLĐ để kiểm tra lại.";else{if(this.dataDocsCic={bad_debt:0,credit_score:0,credit_level:0,grading_date:null,bad_debt_vnd:0,bad_debt_usd:0,number_bad_debt_banks:0,ordinary_debt_vnd:0,ordinary_debt_usd:0,number_ordinary_debt_banks:0,number_bad_debt_banks_5_year:0},t.credit_score&&(this.dataDocsCic.credit_score=+t.credit_score),t.credit_level&&(this.dataDocsCic.credit_level=+t.credit_level),t.grading_date){var e=Date.parse(t.grading_date);this.dataDocsCic.grading_date=new Date(e)}t.bad_debt_vnd&&this.convertMoney(t.bad_debt_vnd,"bad_debt_vnd"),t.bad_debt_usd&&this.convertMoney(t.bad_debt_usd,"bad_debt_usd"),t.number_bad_debt_banks&&(this.dataDocsCic.number_bad_debt_banks=+t.number_bad_debt_banks),t.ordinary_debt_vnd&&this.convertMoney(t.ordinary_debt_vnd,"ordinary_debt_vnd"),t.ordinary_debt_usd&&this.convertMoney(t.ordinary_debt_usd,"ordinary_debt_usd"),t.number_ordinary_debt_banks&&(this.dataDocsCic.number_ordinary_debt_banks=+t.number_ordinary_debt_banks),this.dataDocsCic.number_bad_debt_banks_5_year=+t.number_bad_debt_banks_5_year||0,this.selected=0,t.number_bad_debt_banks_5_year>0&&(this.selected=1),0==+t.bad_debt_vnd&&0==+t.bad_debt_usd&&0==+t.ordinary_debt_vnd&&0==+t.ordinary_debt_usd&&(this.data_current_cic=0)}},convertMoney:function(t,e){switch("string"!=typeof t&&(t=String(t)),0!==t.indexOf(",")&&(t=t.replaceAll(",","")),t=Number(t).toLocaleString("en-US"),e){case"bad_debt_vnd":this.dataDocsCic.bad_debt_vnd=t;break;case"bad_debt_usd":this.dataDocsCic.bad_debt_usd=t;break;case"ordinary_debt_vnd":this.dataDocsCic.ordinary_debt_vnd=t;break;case"ordinary_debt_usd":this.dataDocsCic.ordinary_debt_usd=t}},convertMoneyToNumber:function(t){return"string"!=typeof t&&(t=String(t)),0!==t.indexOf(".")&&(t=t.replaceAll(",","")),t},save:function(){var t=this;return l()(o.a.mark(function e(){var a,n,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,document.getElementById("confirm-cic-btn").disabled=!0,e.prev=2,a={},"no_data_cic"===t.type?a={profile_document_id:t.profileDocumentId}:((n=i()({},t.dataDocsCic)).bad_debt_vnd=t.convertMoneyToNumber(n.bad_debt_vnd),n.bad_debt_usd=t.convertMoneyToNumber(n.bad_debt_usd),n.ordinary_debt_vnd=t.convertMoneyToNumber(n.ordinary_debt_vnd),n.ordinary_debt_usd=t.convertMoneyToNumber(n.ordinary_debt_usd),n.grading_date=t.dateToString(n.grading_date),a=i()({},n,{profile_document_id:t.profileDocumentId})),e.next=7,io(a);case 7:(s=e.sent).data.success?(Me.a.showMessage("Thành công","success"),t.$emit("approved")):Me.a.showMessage(s.data.message||"Có lỗi xảy ra","warning"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0),e.t0.response&&e.t0.response.data&&e.t0.response.data.message&&Me.a.showMessage(e.t0.response.data.message||"Có lỗi xảy ra","warning");case 15:return e.prev=15,document.getElementById("confirm-cic-btn").disabled=!1,t.loading=!1,e.finish(15);case 19:case"end":return e.stop()}},e,t,[[2,11,15,19]])}))()},dateToString:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Y-m-d";return"Y-m-d"===e?t.getFullYear()+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0"):"d-m-Y"===e?String(t.getDate()).padStart(2,"0")+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+t.getFullYear():void 0},closeModal:function(){this.clearModal(),this.$bvModal.hide("modal-approve-cic")},reConfirm:function(){this.closeModal(),this.$emit("reConfirm")},clearModal:function(){this.message="",this.type="have_cic_data",this.loading=!1,this.selected=0,this.language={vi:to.a},this.dataDocsCic={bad_debt:0,credit_score:0,credit_level:0,grading_date:null,bad_debt_vnd:0,bad_debt_usd:0,number_bad_debt_banks:0,ordinary_debt_vnd:0,ordinary_debt_usd:0,number_ordinary_debt_banks:0,number_bad_debt_banks_5_year:0,note:""},this.data_current_cic=1}}};var oo=function(t){a("tZVL")},ro=Object(y.a)(so,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{title:t.dataDocsCic?"Xác nhận duyệt hồ sơ Thông tin tín dụng CIC":"Thông báo",id:"modal-approve-cic","modal-class":"modal-approve-cic-docs",static:""},on:{shown:t.getDataCic,hidden:t.clearModal}},[a("b-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[["have_cic_data","current_not_debt"].includes(t.type)?a("div",[a("div",{staticClass:"history-cus mb-3"},[a("label",[t._v("Lịch sử nợ xấu trong 5 năm gần nhất "),a("span",{staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("b-form-group",[a("b-form-radio",{staticClass:"d-inline-block mr-5 ml-2",attrs:{name:"some-radios",value:"1",disabled:!t.permissionEditCic},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[t._v("Có")]),t._v(" "),a("b-form-radio",{staticClass:"d-inline-block",attrs:{name:"some-radios",value:"0",disabled:!t.permissionEditCic},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[t._v("Không")])],1)],1),t._v(" "),a("div",{staticClass:"credit-cus mb-3"},[a("div",{staticClass:"credit-score"},[a("label",[t._v("Điểm tín dụng")]),t._v(" "),t.permissionEditCic?a("div",[a("b-input",{model:{value:t.dataDocsCic.credit_score,callback:function(e){t.$set(t.dataDocsCic,"credit_score",e)},expression:"dataDocsCic.credit_score"}})],1):a("div",[a("span",{staticStyle:{"font-weight":"700"}},[t._v("\n                  "+t._s(t.dataDocsCic.credit_score)+"\n                ")])])]),t._v(" "),a("div",{staticClass:"level"},[a("label",[t._v("Hạng")]),t._v(" "),a("div",[t.permissionEditCic?a("div",[a("b-input",{model:{value:t.dataDocsCic.credit_level,callback:function(e){t.$set(t.dataDocsCic,"credit_level",e)},expression:"dataDocsCic.credit_level"}})],1):a("div",[a("span",{staticStyle:{"font-weight":"700"}},[t._v("\n                    "+t._s(t.dataDocsCic.credit_level)+"\n                  ")])])])]),t._v(" "),a("div",{staticClass:"date"},[a("label",[t._v("Ngày chấm điểm")]),t._v(" "),a("div",[t.permissionEditCic?a("div",[a("v-date-picker",{staticClass:"date-cus",attrs:{popover:{visibility:"focus"},mode:"date",format:"dd-MM-yyyy",locale:"vi",color:"green","input-props":{placeholder:"",style:"font-size: 0.894rem !important; color: #4E5155 !important;"}},model:{value:t.dataDocsCic.grading_date,callback:function(e){t.$set(t.dataDocsCic,"grading_date",e)},expression:"dataDocsCic.grading_date"}})],1):a("div",[t.dataDocsCic.grading_date?a("span",{staticStyle:{"font-weight":"700"}},[t._v("\n                     "+t._s(t.dateToString(t.dataDocsCic.grading_date,"d-m-Y"))+"\n                  ")]):t._e()])])])]),t._v(" "),a("div",{staticClass:"info-cus"},[a("div",{staticClass:"label-head"},[t._v("Thông tin tín dụng")]),t._v(" "),t.data_current_cic?a("div",[a("div",{staticClass:"total-money-bad-debt"},[a("label",{attrs:{for:""}},[t._v("Tổng tiền nợ xấu "),a("span",{staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("div",{staticClass:"div-right"},[a("div",{staticClass:"money"},[a("b-input",{staticClass:"input-first",attrs:{disabled:!t.permissionEditCic},on:{input:function(e){return t.convertMoney(t.dataDocsCic.bad_debt_vnd,"bad_debt_vnd")}},model:{value:t.dataDocsCic.bad_debt_vnd,callback:function(e){t.$set(t.dataDocsCic,"bad_debt_vnd",e)},expression:"dataDocsCic.bad_debt_vnd"}}),t._v(" "),a("span",[t._v("VNĐ")])],1),t._v(" "),a("div",{staticClass:"money"},[a("b-input",{attrs:{disabled:!t.permissionEditCic},on:{input:function(e){return t.convertMoney(t.dataDocsCic.bad_debt_usd,"bad_debt_usd")}},model:{value:t.dataDocsCic.bad_debt_usd,callback:function(e){t.$set(t.dataDocsCic,"bad_debt_usd",e)},expression:"dataDocsCic.bad_debt_usd"}}),t._v(" "),a("span",[t._v("USD")])],1)])]),t._v(" "),a("div",{staticClass:"total-bank-current"},[a("label",{attrs:{for:""}},[t._v("Tổng số ngân hàng đang nợ xấu"),a("span",{staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("div",{staticClass:"div-right"},[a("b-input",{staticClass:"input-first",attrs:{disabled:!t.permissionEditCic},model:{value:t.dataDocsCic.number_bad_debt_banks,callback:function(e){t.$set(t.dataDocsCic,"number_bad_debt_banks",e)},expression:"dataDocsCic.number_bad_debt_banks"}})],1)]),t._v(" "),a("div",{staticClass:"total-money-ordinary-debt"},[a("label",{attrs:{for:""}},[t._v("Tổng số tiền nợ thường"),a("span",{staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("div",{staticClass:"div-right"},[a("div",{staticClass:"money"},[a("b-input",{staticClass:"input-first",attrs:{disabled:!t.permissionEditCic},on:{input:function(e){return t.convertMoney(t.dataDocsCic.ordinary_debt_vnd,"ordinary_debt_vnd")}},model:{value:t.dataDocsCic.ordinary_debt_vnd,callback:function(e){t.$set(t.dataDocsCic,"ordinary_debt_vnd",e)},expression:"dataDocsCic.ordinary_debt_vnd"}}),t._v(" "),a("span",[t._v("VNĐ")])],1),t._v(" "),a("div",{staticClass:"money"},[a("b-input",{attrs:{disabled:!t.permissionEditCic},on:{input:function(e){return t.convertMoney(t.dataDocsCic.ordinary_debt_usd,"ordinary_debt_usd")}},model:{value:t.dataDocsCic.ordinary_debt_usd,callback:function(e){t.$set(t.dataDocsCic,"ordinary_debt_usd",e)},expression:"dataDocsCic.ordinary_debt_usd"}}),t._v(" "),a("span",[t._v("USD")])],1)])]),t._v(" "),a("div",{staticClass:"total-bank-ordinary-debt"},[a("label",{attrs:{for:""}},[t._v("Tổng số ngân hàng đang nợ thường"),a("span",{staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("div",{staticClass:"div-right"},[a("b-input",{attrs:{disabled:!t.permissionEditCic},model:{value:t.dataDocsCic.number_ordinary_debt_banks,callback:function(e){t.$set(t.dataDocsCic,"number_ordinary_debt_banks",e)},expression:"dataDocsCic.number_ordinary_debt_banks"}})],1)])]):a("div",[a("p",[t._v("Hiện tại khách hàng không còn dư nợ tại các TCTD")])]),t._v(" "),a("div",[a("div",{staticClass:"total-bank-last5years-debt"},[a("label",{attrs:{for:""}},[t._v("Tổng số ngân hàng nợ xấu 5 năm gần nhất"),a("span",{staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("div",{staticClass:"div-right"},[a("b-input",{attrs:{disabled:!t.permissionEditCic},model:{value:t.dataDocsCic.number_bad_debt_banks_5_year,callback:function(e){t.$set(t.dataDocsCic,"number_bad_debt_banks_5_year",e)},expression:"dataDocsCic.number_bad_debt_banks_5_year"}})],1)])]),t._v(" "),["have_cic_data","current_not_debt"].includes(t.type)?a("div",{staticClass:"cic-note"},[a("label",{staticStyle:{"font-weight":"bold"},attrs:{for:""}},[t._v("Ghi chú: ")]),t._v(" "),a("div",{staticClass:"div-right"},[a("div",{staticClass:"cic-note-content",staticStyle:{"margin-left":"0.7rem"}},[a("b-input",{staticClass:"input-first",model:{value:t.dataDocsCic.note,callback:function(e){t.$set(t.dataDocsCic,"note",e)},expression:"dataDocsCic.note"}})],1)])]):t._e()])]):a("div",{staticClass:"no-file"},[["data_being_processed","invalid_id_number","error","can_not_read_cic"].includes(t.type)?a("div",{staticClass:"icon-cus"},[a("i",{staticClass:"sidenav-icon ion ion-ios-warning",staticStyle:{color:"#F2C94C"}})]):t._e(),t._v(" "),t.message?a("div",{staticClass:"notice-cus"},[t._v("\n         "+t._s(t.message)+"\n        ")]):t._e()])]),t._v(" "),a("template",{slot:"modal-footer"},[["no_data_cic","have_cic_data","current_not_debt"].includes(t.type)?a("button",{staticClass:"btn btn-success",attrs:{id:"confirm-cic-btn",type:"button"},on:{click:function(e){return t.save()}}},[t._v("Xác nhận")]):a("button",{staticClass:"btn btn-success",staticStyle:{"background-color":"#069255 !important",width:"10rem !important"},attrs:{type:"button"},on:{click:function(e){return t.closeModal()}}},[t._v("OK")]),t._v(" "),["invalid_id_number"].includes(t.type)&&t.permissionEditCic?a("button",{staticClass:"btn btn-success",staticStyle:{border:"#069255 1px solid",color:"#069255",background:"none",width:"10rem !important"},attrs:{type:"button"},on:{click:function(e){return t.reConfirm()}}},[t._v("Xác nhận lại")]):t._e(),t._v(" "),["can_not_read_cic","no_data_cic","error","current_not_debt"].includes(t.type)&&t.permissionEditCic?a("button",{staticClass:"btn btn-success",staticStyle:{border:"#069255 1px solid",color:"#069255",background:"none",width:"10rem !important"},attrs:{type:"button"},on:{click:function(e){return t.reConfirm()}}},[t._v("Thay đổi")]):t._e()])],2)},[],!1,oo,"data-v-037f3d60",null).exports,lo={name:"modal-detail-cic",components:{Moment:Ye.a,Datepicker:qi.a,profileService:eo.a},props:{profileDocumentId:null,user:null},data:function(){return{loading:!1,selected:0,language:{vi:to.a},message:null,dataDocsCic:{bad_debt:0,credit_score:0,credit_level:0,grading_date:null,bad_debt_vnd:0,bad_debt_usd:0,number_bad_debt_banks:0,ordinary_debt_vnd:0,ordinary_debt_usd:0,number_ordinary_debt_banks:0,number_bad_debt_banks_5_year:0,note:""},data_current_cic:1,type:"have_data_cic"}},methods:{onClose:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.reset();case 1:case"end":return e.stop()}},e,t)}))()},reset:function(){},getDataCic:function(){var t=l()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.message="Hiện tại kho CIC không có thông tin tín dụng về khách hàng.",this.loading=!0,t.prev=2,t.next=5,no({profile_document_id:this.profileDocumentId});case 5:(e=t.sent).data.success?this.convertDataCic(e.data.data):(this.type="no_data_cic",Me.a.showMessage(e.data.message||"Có lỗi xảy ra","warning")),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0),t.t0.response&&t.t0.response.data&&t.t0.response.data.message&&Me.a.showMessage(t.t0.response.data.message||"Có lỗi xảy ra","warning");case 13:return t.prev=13,this.loading=!1,t.finish(13);case 16:case"end":return t.stop()}},t,this,[[2,9,13,16]])}));return function(){return t.apply(this,arguments)}}(),convertDataCic:function(t){if(this.type=t.type,t.note&&(this.dataDocsCic.note=t.note),t&&"invalid_id_number"===t.type)this.message="Không tìm thấy file CIC ứng với số CMND/CCCD của user "+(this.user&&this.user.username)+". Vui lòng liên hệ với NLĐ để kiểm tra lại.";else if("can_not_read_cic"!==this.type)if("data_being_processed"!==this.type)if("no_data_cic"!==this.type){if(this.data_current_cic=1,this.dataDocsCic={bad_debt:0,credit_score:0,credit_level:0,grading_date:null,bad_debt_vnd:0,bad_debt_usd:0,number_bad_debt_banks:0,ordinary_debt_vnd:0,ordinary_debt_usd:0,number_ordinary_debt_banks:0,number_bad_debt_banks_5_year:0,note:""},t.note&&(this.dataDocsCic.note=t.note),t.credit_score&&(this.dataDocsCic.credit_score=+t.credit_score),t.credit_level&&(this.dataDocsCic.credit_level=+t.credit_level),t.grading_date){var e=Date.parse(t.grading_date);this.dataDocsCic.grading_date=this.dateToString(new Date(e),"d-m-Y")}t.bad_debt_vnd&&this.convertMoney(t.bad_debt_vnd,"bad_debt_vnd"),t.bad_debt_usd&&this.convertMoney(t.bad_debt_usd,"bad_debt_usd"),t.number_bad_debt_banks&&(this.dataDocsCic.number_bad_debt_banks=+t.number_bad_debt_banks),t.ordinary_debt_vnd&&this.convertMoney(t.ordinary_debt_vnd,"ordinary_debt_vnd"),t.ordinary_debt_usd&&this.convertMoney(t.ordinary_debt_usd,"ordinary_debt_usd"),t.number_ordinary_debt_banks&&(this.dataDocsCic.number_ordinary_debt_banks=+t.number_ordinary_debt_banks),t.number_bad_debt_banks_5_year&&(this.selected=+t.number_bad_debt_banks_5_year>0?1:0,this.dataDocsCic.number_bad_debt_banks_5_year=+t.number_bad_debt_banks_5_year),0==+t.bad_debt_vnd&&0==+t.bad_debt_usd&&0==+t.ordinary_debt_vnd&&0==+t.ordinary_debt_usd&&(this.data_current_cic=0)}else this.message="Hiện tại kho CIC không có thông tin tín dụng về khách hàng.";else this.message="File CIC đang được xử lý vui lòng chờ ít phút ";else this.message="Lỗi không đọc được file CIC. Vui lòng kiểm tra lại và đảm bảo file tải lên đúng định dạng và đúng nội dung yêu cầu."},dateToString:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Y-m-d";return"Y-m-d"===e?t.getFullYear()+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0"):"d-m-Y"===e?String(t.getDate()).padStart(2,"0")+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+t.getFullYear():void 0},convertMoney:function(t,e){switch("string"!=typeof t&&(t=String(t)),0!==t.indexOf(",")&&(t=t.replaceAll(",","")),t=Number(t).toLocaleString("en-US"),e){case"bad_debt_vnd":this.dataDocsCic.bad_debt_vnd=t;break;case"bad_debt_usd":this.dataDocsCic.bad_debt_usd=t;break;case"ordinary_debt_vnd":this.dataDocsCic.ordinary_debt_vnd=t;break;case"ordinary_debt_usd":this.dataDocsCic.ordinary_debt_usd=t}},clearModal:function(){this.message="",this.type="have_cic_data",this.loading=!1,this.selected=0,this.dataDocsCic={bad_debt:0,credit_score:0,credit_level:0,grading_date:null,bad_debt_vnd:0,bad_debt_usd:0,number_bad_debt_banks:0,ordinary_debt_vnd:0,ordinary_debt_usd:0,number_ordinary_debt_banks:0,number_bad_debt_banks_5_year:0,note:""},this.data_current_cic=1}}};var co=function(t){a("dsUA")},uo=Object(y.a)(lo,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{title:t.dataDocsCic?"Chi tiết thông tin hồ sơ Thông tin tín dụng CIC":"Thông báo",id:"modal-detail-cic","modal-class":"modal-approve-cic-docs",static:""},on:{shown:t.getDataCic}},[a("b-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},["have_cic_data"===t.type?a("div",[a("div",{staticClass:"history-cus mb-3"},[a("label",[t._v("Lịch sử nợ xấu trong 5 năm gần nhất "),a("span",{staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("b-form-group",[a("b-form-radio",{staticClass:"d-inline-block mr-5 ml-2",attrs:{disabled:"",name:"some-radios",value:"1"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[t._v("Có")]),t._v(" "),a("b-form-radio",{staticClass:"d-inline-block",attrs:{disabled:"",name:"some-radios",value:"0"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[t._v("Không")])],1)],1),t._v(" "),a("div",{staticClass:"credit-cus mb-3"},[a("div",{staticClass:"credit-score"},[a("label",[t._v("Điểm tín dụng")]),t._v(" "),a("div",[a("div",{staticStyle:{"font-weight":"700"}},[t._v(t._s(t.dataDocsCic.credit_score))])])]),t._v(" "),a("div",{staticClass:"level"},[a("label",[t._v("Hạng")]),t._v(" "),a("div",[a("div",{staticStyle:{"font-weight":"700"}},[t._v(t._s(t.dataDocsCic.credit_level))])])]),t._v(" "),a("div",{staticClass:"date"},[a("label",[t._v("Ngày chấm điểm")]),t._v(" "),a("div",[a("div",{staticStyle:{"font-weight":"700"}},[t._v(t._s(t.dataDocsCic.grading_date))])])])]),t._v(" "),a("div",{staticClass:"info-cus"},[a("div",{staticClass:"label-head"},[t._v("Thông tin tín dụng")]),t._v(" "),t.data_current_cic?a("div",[a("div",{staticClass:"total-money-bad-debt"},[a("label",{attrs:{for:""}},[t._v("Tổng tiền nợ xấu "),a("span",{staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("div",{staticClass:"div-right"},[a("div",{staticClass:"money"},[a("b-input",{staticClass:"input-first",attrs:{disabled:"disabled"},on:{input:function(e){return t.convertMoney(t.dataDocsCic.bad_debt_vnd,"bad_debt_vnd")}},model:{value:t.dataDocsCic.bad_debt_vnd,callback:function(e){t.$set(t.dataDocsCic,"bad_debt_vnd",e)},expression:"dataDocsCic.bad_debt_vnd"}}),t._v(" "),a("span",[t._v("VNĐ")])],1),t._v(" "),a("div",{staticClass:"money"},[a("b-input",{attrs:{disabled:"disabled"},on:{input:function(e){return t.convertMoney(t.dataDocsCic.bad_debt_usd,"bad_debt_usd")}},model:{value:t.dataDocsCic.bad_debt_usd,callback:function(e){t.$set(t.dataDocsCic,"bad_debt_usd",e)},expression:"dataDocsCic.bad_debt_usd"}}),t._v(" "),a("span",[t._v("USD")])],1)])]),t._v(" "),a("div",{staticClass:"total-bank-current"},[a("label",{attrs:{for:""}},[t._v("Tổng số ngân hàng đang nợ xấu"),a("span",{staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("div",{staticClass:"div-right"},[a("b-input",{staticClass:"input-first",attrs:{disabled:"disabled"},model:{value:t.dataDocsCic.number_bad_debt_banks,callback:function(e){t.$set(t.dataDocsCic,"number_bad_debt_banks",e)},expression:"dataDocsCic.number_bad_debt_banks"}})],1)]),t._v(" "),a("div",{staticClass:"total-money-ordinary-debt"},[a("label",{attrs:{for:""}},[t._v("Tổng số tiền nợ thường"),a("span",{staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("div",{staticClass:"div-right"},[a("div",{staticClass:"money"},[a("b-input",{staticClass:"input-first",attrs:{disabled:"disabled"},on:{input:function(e){return t.convertMoney(t.dataDocsCic.ordinary_debt_vnd,"ordinary_debt_vnd")}},model:{value:t.dataDocsCic.ordinary_debt_vnd,callback:function(e){t.$set(t.dataDocsCic,"ordinary_debt_vnd",e)},expression:"dataDocsCic.ordinary_debt_vnd"}}),t._v(" "),a("span",[t._v("VNĐ")])],1),t._v(" "),a("div",{staticClass:"money"},[a("b-input",{attrs:{disabled:"disabled"},on:{input:function(e){return t.convertMoney(t.dataDocsCic.ordinary_debt_usd,"ordinary_debt_usd")}},model:{value:t.dataDocsCic.ordinary_debt_usd,callback:function(e){t.$set(t.dataDocsCic,"ordinary_debt_usd",e)},expression:"dataDocsCic.ordinary_debt_usd"}}),t._v(" "),a("span",[t._v("USD")])],1)])]),t._v(" "),a("div",{staticClass:"total-bank-ordinary-debt"},[a("label",{attrs:{for:""}},[t._v("Tổng số ngân hàng đang nợ thường"),a("span",{staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("div",{staticClass:"div-right"},[a("b-input",{attrs:{disabled:"disabled"},model:{value:t.dataDocsCic.number_ordinary_debt_banks,callback:function(e){t.$set(t.dataDocsCic,"number_ordinary_debt_banks",e)},expression:"dataDocsCic.number_ordinary_debt_banks"}})],1)])]):a("div",[a("p",[t._v("Hiện tại khách hàng không còn dư nợ tại các TCTD")])]),t._v(" "),t.dataDocsCic?a("div",[a("div",{staticClass:"total-bank-last5years-debt"},[a("label",{attrs:{for:""}},[t._v("Tổng số ngân hàng nợ xấu 5 năm gần nhất"),a("span",{staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("div",{staticClass:"div-right"},[a("b-input",{attrs:{disabled:"disabled"},model:{value:t.dataDocsCic.number_bad_debt_banks_5_year,callback:function(e){t.$set(t.dataDocsCic,"number_bad_debt_banks_5_year",e)},expression:"dataDocsCic.number_bad_debt_banks_5_year"}})],1)])]):t._e()])]):a("div",{staticClass:"no-file"},[t.message?a("div",[t._v("\n        "+t._s(t.message)+"\n      ")]):t._e()]),t._v(" "),a("div",{staticClass:"cic-note"},[t.dataDocsCic.note?a("div",[a("span",{staticStyle:{"font-weight":"bold"}},[t._v("Ghi chú: ")]),t._v(" "),a("span",[t._v(t._s(t.dataDocsCic.note))])]):t._e()])]),t._v(" "),a("template",{slot:"modal-footer"},[a("div")])],2)},[],!1,co,"data-v-485832d1",null).exports,ho={name:"modal-approve-cic-backup",components:{Moment:Ye.a,Datepicker:qi.a,profileService:eo.a},props:{profileDocumentId:null,user:null},data:function(){return{loading:!1,selected:0,language:{vi:to.a},message:null,dataDocsCic:{bad_debt:0,credit_score:0,credit_level:0,grading_date:null,bad_debt_vnd:0,bad_debt_usd:0,number_bad_debt_banks:0,ordinary_debt_vnd:0,ordinary_debt_usd:0,number_ordinary_debt_banks:0,number_bad_debt_banks_5_year:0,note:""},data_current_cic:1,showNumberBadDebtBanks5Year:!1}},watch:{},methods:{onClose:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.reset();case 1:case"end":return e.stop()}},e,t)}))()},reset:function(){},convertMoney:function(t,e){switch("string"!=typeof t&&(t=String(t)),0!==t.indexOf(",")&&(t=t.replaceAll(",","")),t=Number(t).toLocaleString("en-US"),e){case"bad_debt_vnd":this.dataDocsCic.bad_debt_vnd=t;break;case"bad_debt_usd":this.dataDocsCic.bad_debt_usd=t;break;case"ordinary_debt_vnd":this.dataDocsCic.ordinary_debt_vnd=t;break;case"ordinary_debt_usd":this.dataDocsCic.ordinary_debt_usd=t}},convertMoneyToNumber:function(t){return"string"!=typeof t&&(t=String(t)),0!==t.indexOf(".")&&(t=t.replaceAll(",","")),t},save:function(){var t=this;return l()(o.a.mark(function e(){var a,n,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,document.getElementById("confirm-cic-btn").disabled=!0,e.prev=2,a={},(n=i()({},t.dataDocsCic)).bad_debt_vnd=t.convertMoneyToNumber(n.bad_debt_vnd),n.bad_debt_usd=t.convertMoneyToNumber(n.bad_debt_usd),n.ordinary_debt_vnd=t.convertMoneyToNumber(n.ordinary_debt_vnd),n.ordinary_debt_usd=t.convertMoneyToNumber(n.ordinary_debt_usd),n.grading_date=n.grading_date?t.dateToString(n.grading_date):null,a=i()({},n,{profile_document_id:t.profileDocumentId}),e.next=13,io(a);case 13:(s=e.sent).data.success?(Me.a.showMessage("Thành công","success"),t.$emit("approved")):Me.a.showMessage(s.data.message||"Có lỗi xảy ra","warning"),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),console.log(e.t0),e.t0.response&&e.t0.response.data&&e.t0.response.data.message&&Me.a.showMessage(e.t0.response.data.message||"Có lỗi xảy ra","warning");case 21:return e.prev=21,document.getElementById("confirm-cic-btn").disabled=!1,t.loading=!1,e.finish(21);case 25:case"end":return e.stop()}},e,t,[[2,17,21,25]])}))()},dateToString:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Y-m-d";return"Y-m-d"===e?t.getFullYear()+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0"):"d-m-Y"===e?String(t.getDate()).padStart(2,"0")+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+t.getFullYear():void 0},closeModal:function(){this.clearModal(),this.$bvModal.hide("modal-approve-cic-backup")},reConfirm:function(){this.closeModal(),this.$bvModal.show("")},clearModal:function(){this.message="",this.loading=!1,this.selected=0,this.language={vi:to.a},this.dataDocsCic={bad_debt:0,credit_score:0,credit_level:0,grading_date:null,bad_debt_vnd:0,bad_debt_usd:0,number_bad_debt_banks:0,ordinary_debt_vnd:0,ordinary_debt_usd:0,number_ordinary_debt_banks:0,number_bad_debt_banks_5_year:0,note:""},this.data_current_cic=1}}};var po=function(t){a("RAk5")},mo=Object(y.a)(ho,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{title:"Xác nhận duyệt hồ sơ Thông tin tín dụng CIC",id:"modal-approve-cic-backup","modal-class":"modal-approve-cic-docs",static:""},on:{hidden:t.clearModal}},[a("b-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("div",[a("div",{staticClass:"history-cus mb-3"},[a("label",[t._v("Lịch sử nợ xấu trong 5 năm gần nhất "),a("span",{staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("b-form-group",[a("b-form-radio",{staticClass:"d-inline-block mr-5 ml-2",attrs:{name:"some-radios",value:"1"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[t._v("Có")]),t._v(" "),a("b-form-radio",{staticClass:"d-inline-block",attrs:{name:"some-radios",value:"0"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[t._v("Không")])],1)],1),t._v(" "),a("div",{staticClass:"credit-cus mb-3"},[a("div",{staticClass:"credit-score"},[a("label",[t._v("Điểm tín dụng")]),t._v(" "),a("div",[a("b-input",{model:{value:t.dataDocsCic.credit_score,callback:function(e){t.$set(t.dataDocsCic,"credit_score",e)},expression:"dataDocsCic.credit_score"}})],1)]),t._v(" "),a("div",{staticClass:"level"},[a("label",[t._v("Hạng")]),t._v(" "),a("div",[a("div",[a("b-input",{model:{value:t.dataDocsCic.credit_level,callback:function(e){t.$set(t.dataDocsCic,"credit_level",e)},expression:"dataDocsCic.credit_level"}})],1)])]),t._v(" "),a("div",{staticClass:"date"},[a("label",[t._v("Ngày chấm điểm")]),t._v(" "),a("div",[a("div",[a("v-date-picker",{staticClass:"date-cus",attrs:{popover:{visibility:"focus"},mode:"date",format:"dd-MM-yyyy",locale:"vi",color:"green","input-props":{placeholder:"",style:"font-size: 0.894rem !important; color: #4E5155 !important;"}},model:{value:t.dataDocsCic.grading_date,callback:function(e){t.$set(t.dataDocsCic,"grading_date",e)},expression:"dataDocsCic.grading_date"}})],1)])])]),t._v(" "),a("div",{staticClass:"info-cus"},[a("div",{staticClass:"label-head"},[t._v("Thông tin tín dụng")]),t._v(" "),a("div",[a("div",{staticClass:"total-money-bad-debt"},[a("label",{attrs:{for:""}},[t._v("Tổng tiền nợ xấu "),a("span",{staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("div",{staticClass:"div-right"},[a("div",{staticClass:"money"},[a("b-input",{staticClass:"input-first",on:{input:function(e){return t.convertMoney(t.dataDocsCic.bad_debt_vnd,"bad_debt_vnd")}},model:{value:t.dataDocsCic.bad_debt_vnd,callback:function(e){t.$set(t.dataDocsCic,"bad_debt_vnd",e)},expression:"dataDocsCic.bad_debt_vnd"}}),t._v(" "),a("span",[t._v("VNĐ")])],1),t._v(" "),a("div",{staticClass:"money"},[a("b-input",{on:{input:function(e){return t.convertMoney(t.dataDocsCic.bad_debt_usd,"bad_debt_usd")}},model:{value:t.dataDocsCic.bad_debt_usd,callback:function(e){t.$set(t.dataDocsCic,"bad_debt_usd",e)},expression:"dataDocsCic.bad_debt_usd"}}),t._v(" "),a("span",[t._v("USD")])],1)])]),t._v(" "),a("div",{staticClass:"total-bank-current"},[a("label",{attrs:{for:""}},[t._v("Tổng số ngân hàng đang nợ xấu"),a("span",{staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("div",{staticClass:"div-right"},[a("b-input",{staticClass:"input-first",model:{value:t.dataDocsCic.number_bad_debt_banks,callback:function(e){t.$set(t.dataDocsCic,"number_bad_debt_banks",e)},expression:"dataDocsCic.number_bad_debt_banks"}})],1)]),t._v(" "),a("div",{staticClass:"total-money-ordinary-debt"},[a("label",{attrs:{for:""}},[t._v("Tổng số tiền nợ thường"),a("span",{staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("div",{staticClass:"div-right"},[a("div",{staticClass:"money"},[a("b-input",{staticClass:"input-first",on:{input:function(e){return t.convertMoney(t.dataDocsCic.ordinary_debt_vnd,"ordinary_debt_vnd")}},model:{value:t.dataDocsCic.ordinary_debt_vnd,callback:function(e){t.$set(t.dataDocsCic,"ordinary_debt_vnd",e)},expression:"dataDocsCic.ordinary_debt_vnd"}}),t._v(" "),a("span",[t._v("VNĐ")])],1),t._v(" "),a("div",{staticClass:"money"},[a("b-input",{on:{input:function(e){return t.convertMoney(t.dataDocsCic.ordinary_debt_usd,"ordinary_debt_usd")}},model:{value:t.dataDocsCic.ordinary_debt_usd,callback:function(e){t.$set(t.dataDocsCic,"ordinary_debt_usd",e)},expression:"dataDocsCic.ordinary_debt_usd"}}),t._v(" "),a("span",[t._v("USD")])],1)])]),t._v(" "),a("div",{staticClass:"total-bank-ordinary-debt"},[a("label",{attrs:{for:""}},[t._v("Tổng số ngân hàng đang nợ thường"),a("span",{staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("div",{staticClass:"div-right"},[a("b-input",{model:{value:t.dataDocsCic.number_ordinary_debt_banks,callback:function(e){t.$set(t.dataDocsCic,"number_ordinary_debt_banks",e)},expression:"dataDocsCic.number_ordinary_debt_banks"}})],1)])]),t._v(" "),a("div",[a("div",{staticClass:"total-bank-last5years-debt"},[a("label",{attrs:{for:""}},[t._v("Tổng số ngân hàng nợ xấu 5 năm gần nhất"),a("span",{staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("div",{staticClass:"div-right"},[a("b-input",{model:{value:t.dataDocsCic.number_bad_debt_banks_5_year,callback:function(e){t.$set(t.dataDocsCic,"number_bad_debt_banks_5_year",e)},expression:"dataDocsCic.number_bad_debt_banks_5_year"}})],1)])]),t._v(" "),a("div",{staticClass:"cic-note"},[a("label",{staticStyle:{"font-weight":"bold"},attrs:{for:""}},[t._v("Ghi chú")]),t._v(" "),a("div",{staticClass:"div-right"},[a("div",{staticClass:"cic-note-content",staticStyle:{"margin-left":"0.7rem"}},[a("b-input",{staticClass:"input-first",model:{value:t.dataDocsCic.note,callback:function(e){t.$set(t.dataDocsCic,"note",e)},expression:"dataDocsCic.note"}})],1)])])])])]),t._v(" "),a("template",{slot:"modal-footer"},[a("button",{staticClass:"btn btn-success",attrs:{id:"confirm-cic-btn",type:"button"},on:{click:function(e){return t.save()}}},[t._v("Xác nhận")])])],2)},[],!1,po,"data-v-5c363484",null).exports,fo=function(t){return Pe.a.get("/ErpDriverLicense/getDriverLicenseOfProfile",{params:t})},go={name:"InfoUser",props:{masterProfile:{type:Object,default:function(){return{}}}},data:function(){return{}},watch:{},methods:{}};var vo=function(t){a("iOPZ")},_o=Object(y.a)(go,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ml-2 mr-2"},[a("div",{staticClass:"box-user d-flex justify-content-between"},[a("div",{staticClass:"mr-2 d-flex"},[a("div",{staticClass:"avt-user"},[a("img",{attrs:{src:t.masterProfile.image_profile||"",alt:"avatar user",width:"52",height:"52"}})]),t._v(" "),a("div",{staticClass:"info-user ml-3"},[a("div",{staticClass:"info-user-name"},[a("b",[t._v(t._s(t.masterProfile.fullname)+" ("+t._s(t.masterProfile.username)+")")])]),t._v(" "),a("div",{staticClass:"info-user-position"},[t._v("\n          "+t._s(t.masterProfile.position_name)+" - "+t._s(t.masterProfile.work_type_description)+" - "+t._s(t.masterProfile.station_name)+"\n        ")]),t._v(" "),a("div",{},[t._v("\n          Mã MP: "+t._s(t.masterProfile.master_profile_id)+"\n        ")])])]),t._v(" "),a("div",{staticClass:"btn-chat"},[a("div",{staticClass:"mb-1"},[a("b-btn",{staticClass:"btn-sm",attrs:{variant:"outline-ghtk"},on:{click:function(e){return t.$emit("eventViewProfile",t.masterProfile.master_profile_id)}}},[t._v("Xem")])],1),t._v(" "),a("div",{staticClass:"mt-1"},[a("b-btn",{staticClass:"btn-sm",attrs:{variant:"outline-ghtk"},on:{click:function(e){return t.$emit("eventViewPhone")}}},[t._v("Gọi")])],1)])]),t._v(" "),a("div",{staticClass:"missing-docs"},[a("div",{},[t.masterProfile.is_missing_docs?a("b-badge",{staticClass:"badge-red"},[t._v("Thiếu hồ sơ")]):a("b-badge",{staticClass:"badge-green"},[t._v("Đủ hồ sơ")]),t._v(" "),t.masterProfile.is_overdue_docs?a("b-badge",{staticClass:"badge-orange"},[t._v("Quá hạn nộp hồ sơ")]):t._e()],1),t._v(" "),a("div",{},t._l(t.masterProfile.merge_docs,function(e){return a("p",{staticClass:"mb-1"},[e.doc_type.includes("missing")?a("span",[t._v("Thiếu")]):t._e(),t._v(" "+t._s(e.name)+" "),e.doc_type.includes("overdue")?a("span",{staticClass:"font-overdue"},[t._v("(Quá hạn nộp)")]):t._e()])}),0)])])},[],!1,vo,"data-v-2f238ae6",null).exports,bo=a("qcnM"),yo={name:"row-data",components:{InfoUser:_o,DocumentUploadItem:bo.a},props:{permissions:{},documents:{},masterProfile:{},slideStart:null},data:function(){return{start:0,step:3,dataUpdate:[]}},watch:{slideStart:function(t){null!==this.slideStart&&(this.start=this.slideStart)}},computed:{},mounted:function(){},created:function(){},methods:{viewProfile:function(t){ze.a.redirectProfile(t.group_id,t.user_id,t.master_profile_id)},viewPhone:function(t){this.$emit("eventViewPhone",t)},getDocumentIds:function(){var t=[];return this.documents.forEach(function(e){t.push(e.ProfileDocument.id)}),t},approveAll:function(t,e){if(e)return this.$emit("eventHaveCicPending"),!1;if(t)return!1;var a=this.masterProfile,n=this.documents,i=this.getDocumentIds();this.$emit("eventApproveAll",{currentMasterProfile:a,curDocument:n,currentIds:i,statusAll:!0,status:!0})},refuseAll:function(t,e){var a=this.getDocumentIds(),n=this.masterProfile;this.$emit("eventConfirmRefuseAll",{masterProfileId:t,userId:e,currentIds:a,statusAll:!1,status:!1,currentMasterProfile:n,action:"document_refused"})},sendChat:function(t,e,a){this.$parent.currentMpId=t,this.$parent.currentUserId=e,this.$parent.currentPositionId=a,this.$parent.action="document_missing",this.$bvModal.show("modal-send-chat")},execApprove:function(t){var e=this;return l()(o.a.mark(function a(){var n,s,r;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e.loading=!0,n=e.getDocumentIds(),a.next=5,Es.a.approveDocument({info:{id:n,status:t},dataUpdate:e.dataUpdate,query:i()({page:e.$parent.pagination.currentPage,limit:e.$parent.pagination.limit},e.$parent.filter)});case 5:s=a.sent,(r=s.data).success?(Me.a.showMessage("Duyệt hồ sơ thành công","success"),e.list=r.data.list,e.pagination.total=r.data.total,e.$bvModal.hide("modal-conform-approve-document-all")):Me.a.showMessage(r.message,"warning"),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),Me.a.showMessage(a.t0.message);case 13:return a.prev=13,e.loading=!1,a.finish(13);case 16:case"end":return a.stop()}},a,e,[[0,10,13,16]])}))()},approve:function(t){this.$parent.dataUpdate.statusAll=null,this.$parent.currentMasterProfile=this.masterProfile;var e=t.doc,a=t.status;this.$emit("eventApprove",{doc:e,status:a})},remove:function(t){this.$parent.currentMasterProfile=this.masterProfile,this.$emit("delete",t)},showCicDetail:function(t){this.$emit("showCicDetail",{doc:t,masterProfile:this.masterProfile})},switchBlock:function(t){console.log(t);var e=this.documents.length;if("next"===t){if(this.start+this.step>e)return;this.start+=this.step}if("pre"===t){if(this.start-this.step<0)return;this.start-=this.step}}}};var Co=function(t){a("o5g8")},wo=Object(y.a)(yo,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"pt-3"},[a("InfoUser",{attrs:{masterProfile:t.masterProfile},on:{eventViewProfile:function(e){return t.viewProfile(t.masterProfile)},eventViewPhone:function(e){return t.viewPhone(t.masterProfile)}}})],1),t._v(" "),a("td",{staticClass:"pt-3 small-scrollbar"},[a("div",{staticClass:"row"},[a("div",{staticClass:"button-slide-document p-0 col-md position-relative text-center"},[t.start>0?a("span",{staticClass:"fas fa-chevron-left position-absolute",staticStyle:{top:"50%","margin-left":"-5px"},attrs:{"aria-hidden":"true"},on:{click:function(e){return t.switchBlock("pre")}}}):t._e()]),t._v(" "),a("div",{staticClass:"data-document-scroll col-md p-0",staticStyle:{"min-width":"90%","max-width":"90%"}},t._l(t.documents,function(e,n){return n>=t.start&&n<t.start+t.step?a("div",{staticClass:"data-document",class:{"pr-2":(n+1)%t.step!=0}},[a("DocumentUploadItem",{key:"upload-item-"+n,attrs:{item:e,masterProfile:t.masterProfile,permissions:t.permissions},on:{approve:t.approve,remove:t.remove,showCicDetail:t.showCicDetail}})],1):t._e()}),0),t._v(" "),a("div",{staticClass:"button-slide-document col-md p-0 position-relative text-center"},[t.start+t.step<t.documents.length?a("span",{staticClass:"fas fa-chevron-right position-absolute",staticStyle:{top:"50%","margin-left":"-15px"},attrs:{"aria-hidden":"true"},on:{click:function(e){return t.switchBlock("next")}}}):t._e()])])]),t._v(" "),a("td",{staticClass:"text-center box-btn-action"},[t.masterProfile.has_pending_doc?a("b-button",{staticClass:"btn btn-outline-ghtk mb-2",attrs:{disabled:t.masterProfile.has_duplicated_doc},on:{click:function(e){return t.approveAll(t.masterProfile.has_duplicated_doc,t.masterProfile.has_cic_doc_pending)}}},[t._v(" Duyệt tất cả ")]):t._e(),t._v(" "),t.masterProfile.has_pending_doc?a("b-button",{staticClass:"btn btn-outline-ghtk btn-outline-danger mb-2",on:{click:function(e){return t.refuseAll(t.masterProfile.master_profile_id,t.masterProfile.user_id)}}},[t._v("Từ chối tất cả")]):t._e(),t._v(" "),a("b-button",{staticClass:"btn btn-outline-ghtk mb-2",on:{click:function(e){return t.sendChat(t.masterProfile.master_profile_id,t.masterProfile.user_id,t.masterProfile.position_id)}}},[t._v("Gửi chat")])],1)])},[],!1,Co,"data-v-4c6fd28d",null).exports;var ko=function(t){a("lFpS")},xo=Object(y.a)({name:"Notification",props:{message:""},methods:{closeModal:function(){this.$bvModal.hide("modal-noti")}}},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{title:"Thông báo",id:"modal-noti"}},[a("div",{staticStyle:{"text-align":"center","font-size":"19px",padding:"20px 5px"}},[t._v(t._s(t.message))]),t._v(" "),a("template",{slot:"modal-footer"},[a("button",{staticClass:"btn btn-success",staticStyle:{"background-color":"#069255 !important",width:"10rem !important","margin-left":"auto","margin-right":"auto"},attrs:{type:"button"},on:{click:function(e){return t.closeModal()}}},[t._v("Ok")])])],2)},[],!1,ko,"data-v-acb0065a",null).exports,So={name:"vehicle-rc-info",components:{},props:{rcInfo:{type:Object,default:function(t){return{}}},fullname:{type:String,default:""},documentName:{type:String,default:""}},data:function(t){return{rcInfoData:{}}}};var Mo=function(t){a("eDz7")},To=Object(y.a)(So,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Họ tên")]),t._v(" "),a("b-input",{staticClass:"rounded",attrs:{id:"input-default",value:t.fullname,disabled:""}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Hồ sơ")]),t._v(" "),a("b-input",{staticClass:"rounded",attrs:{id:"input-default",value:t.documentName,disabled:""}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Biển số xe")]),t._v(" "),a("div",[a("b-input",{staticClass:"rounded input_license_plate",attrs:{id:"input-default"},model:{value:t.rcInfo.head_license_plate,callback:function(e){t.$set(t.rcInfo,"head_license_plate",e)},expression:"rcInfo.head_license_plate"}}),t._v(" "),a("span",[t._v(" - ")]),t._v(" "),a("b-input",{staticClass:"rounded input_license_plate",attrs:{id:"input-default"},model:{value:t.rcInfo.tail_license_plate,callback:function(e){t.$set(t.rcInfo,"tail_license_plate",e)},expression:"rcInfo.tail_license_plate"}})],1)])],1)},[],!1,Mo,"data-v-40936988",null).exports,Do={name:"health-cert-info",components:{},props:{healthCertInfo:{type:Object,default:function(t){return{}}},fullname:{type:String,default:""},documentName:{type:String,default:""}},data:function(t){return{classOptions:Ls.a.LIST_HEALTH_CLASSES}}};var Io=function(t){a("yYyc")},Po=Object(y.a)(Do,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Họ tên")]),t._v(" "),a("b-input",{staticClass:"rounded",attrs:{value:t.fullname,disabled:""}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Hồ sơ")]),t._v(" "),a("b-input",{staticClass:"rounded",attrs:{value:t.documentName,disabled:""}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Phân loại sức khỏe")]),t._v(" "),a("b-form-select",{attrs:{options:t.classOptions},model:{value:t.healthCertInfo.class,callback:function(e){t.$set(t.healthCertInfo,"class",e)},expression:"healthCertInfo.class"}})],1)],1)},[],!1,Io,"data-v-d25c0cee",null).exports,Eo=a("u1Qr"),Lo={name:"profile-management",components:{VehicleRcInfo:To,HealthCertInfo:Po,Notification:xo,ModalDetailCic:uo,RowData:wo,Multiselect:la.a,Upload:zs,SingleSelectPosition:Ps.a,SingleSelectDocumentType:Is.a,SingleSelectStation:oa.a,SingleSelectProvince:bs.a,SingleSelectDistrict:As.a,SingleSelectSubDistrict:Os.a,SingleSelectUser:Ie.a,SingleSelectPoiIdentityCard:Ns.a,SingleSelectProfileRegion:ys.a,SingleSelectDepartment:Gs.a,AnalyticBar:Qs,SelectGuardianReason:Hs,FormGuardianInfo:Fs,GuardianGhtkStaffInfo:Zs,ModalApproveCic:ro,ModalApproveCicBackup:mo,SensitiveLabel:Eo.a},props:{dataClosingShift:[],filterClose:[],paginationClose:[],isClosingShift:!1,teamId:null,scrollMode:{default:!1,type:Boolean},permissionsClosShift:null},watch:{dataClosingShift:function(t){this.list=t},permissionsClosShift:function(){this.isClosingShift&&(this.permissionEditCic=this.permissionsClosShift.edit_cic_doc)}},data:function(){var t={erpDocument:Ls.a,permissions:null,loading:!1,updatingStatus:!1,uploading:!1,paginationLoading:!1,openAddModal:!1,list:[],datePlaceHolder:null,formatedFilter:null,pagination:{currentPage:1,limit:2,total:0},filter:{code:null,name:null,region:null,province:null,station:null,position:null,document:null,submitStatus:null,status:{value:"Chưa duyệt",name:"Chưa duyệt"},department_id:null,from:null,to:null,created_by:null},submitStatusOptions:[{value:"1",name:"Đủ hồ sơ"},{value:"overdue",name:"Quá hạn nộp hồ sơ"},{value:"0",name:"Thiếu hồ sơ"}],statusOptions:[{value:"Chưa duyệt",name:"Chưa duyệt"},{value:"Đã duyệt",name:"Đã duyệt"},{value:"Từ chối",name:"Từ chối"},{value:"nearly_expired_profile",name:"Hồ sơ sắp hết hạn"}],resetSelectDocument:!1,resetSelectProvince:!1,resetSelectPosition:!1,resetSelectDepartment:!1,resetSelectStation:!1,resetSelectRegion:!1,curDocument:{ErpDocument:{name:null}},dataUpdate:{status:!0,statusAll:null,driverLicense:{no_number:null,class:null,beginning_date:null,expiry_date:null,document_name:null},vehicleRC:{head_license_plate:null,tail_license_plate:null},healthCertificate:{pd_id:null,class:null},guardian:{status:null,fullname:null,birthday:null,personal_id:null,personal_id_date:null,personal_id_place:null,resident_province:null,resident_district:null,resident_sub_district:null,resident_detail:null,current_province:null,current_district:null,current_sub_district:null,current_detail:null,relation:null,phone:null,license_place:null,bltnds_reason:null,other_info:null,note:null}},guardianStaffInfo:null,currentIds:[],currentMpId:null,currentUserId:null,currentPositionId:null,isFirstLoad:!0,refuseReason:"",deleteReason:"",action:null,actionRefuse:"normal_doc",currentDocId:null,currentMasterProfile:{has_driver_license:!1,has_guardian:!1},slideStart:null,resetRefuseGuardian:null,hideUploadPopup:null,optionLevelCredit:Ds.d,dataCicCurrent:null,currentUser:null,isPermissionEdit:!0,messageNoti:"",permissionEditCic:!1,isShowModalConfirmApproveGuardGhtk:!1,actionType:null,isShowModalViewPhone:!1,configGuardianSensitiveData:{phone:!1,personal_id:!1}};return this.isClosingShift&&(t.filter=this.filterClose),this.isClosingShift&&(t.pagination=this.paginationClose),t},mounted:function(){this.dataClosingShift||this.getList(),this.permissions?this.permissionEditCic=this.permissions.edit_cic_doc:this.permissionsClosShift&&(this.permissionEditCic=this.permissionsClosShift.edit_cic_doc)},created:function(){this.dataClosingShift&&(this.list=this.dataClosingShift),this.setDefaultDateRange()},methods:{viewPhone:function(t){var e=this;return l()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.currentMasterProfile=t,e.$bvModal.show("modal-show-phone"),e.isShowModalViewPhone=!0,a.next=5,e.getPhoneNumber(t.user_id);case 5:case"end":return a.stop()}},a,e)}))()},getPhoneNumber:function(t){var e=this;return l()(o.a.mark(function a(){var n,i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Es.a.getPhoneNumber({user_id:t});case 3:n=a.sent,(i=n.data).success?e.currentMasterProfile.tel=i.data.tel:Me.a.showMessage(i.message),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),Me.a.showMessage(a.t0.message);case 11:return a.prev=11,a.finish(11);case 13:case"end":return a.stop()}},a,e,[[0,8,11,13]])}))()},selectPosition:function(t){t?(this.filter.position_job=t.id,this.filter.position_name=t.name,this.filter.group_id=t.group_id):(this.filter.position_job=null,this.filter.position_name=null,this.filter.group_id=null)},handleSelectedDepartment:function(t){this.filter.department_id=t?t.id:""},handleSelectedRegion:function(t){this.filter.region=t?t.id:""},refuseAllGuardian:function(){if(!this.dataUpdate.guardian.bltnds_reason)return Me.a.showMessage("Bạn cần nhập lý do từ chối.","warning"),!1;this.$bvModal.hide("modal-input-refuse-reason-all-guardian");var t=this.countGuardianDocs();this.currentIds.length-t>0?this.$bvModal.show("modal-input-refuse-reason-all"):this.refuseAll("guardian")},countGuardianDocs:function(){var t=0;return this.list[this.currentMpId].documents.forEach(function(e){10==+e.ProfileDocument.document_id&&t++}),t},onCloseModalApproveDocumentOne:function(){this.curDocument&&this.curDocument.ProfileDocument&&10==+this.curDocument.ProfileDocument.document_id&&this.dataUpdate.status&&(this.configGuardianSensitiveData.personal_id=!1,this.configGuardianSensitiveData.phone=!1)},onCloseModalApproveDocumentAllGuard:function(){this.configGuardianSensitiveData.personal_id=!1,this.configGuardianSensitiveData.phone=!1},onCloseModalShowPhone:function(){this.isShowModalViewPhone=!1},closeModalPhone:function(){this.$bvModal.hide("modal-show-phone")},setDefaultDateRange:function(){var t=Yi.a.reverseDateFormat(Yi.a.getToday("/")),e=Yi.a.reverseDateFormat(Yi.a.getCalculatedDate(2,"MINUS","MONTH","/"));this.filter.from={start:new Date(e),end:new Date(t)}},openLink:function(t){window.open(this.$router.resolve(t).href,"_blank")},resetFormData:function(){this.refuseReason="",this.deleteReason="",this.action=null,this.actionRefuse="normal_doc",this.currentIds=[],this.currentMpId=null,this.currentUserId=null,this.currentPositionId=null,this.currentDocId=null,this.dataUpdate.guardian.bltnds_reason=null},prepareRequestData:function(){this.formatedFilter=i()({},this.filter),this.formatedFilter.from&&(this.formatedFilter.from={start:Ye()(this.formatedFilter.from.start).format("YYYY-MM-DD"),end:Ye()(this.formatedFilter.from.end).format("YYYY-MM-DD")})},setDataForGuardian:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"approved";Me.a.resetData(this.dataUpdate.guardian),this.list[t].master_profile.guardian&&(this.dataUpdate.guardian=i()({},this.dataUpdate.guardian,Me.a.cloneDeep(this.list[t].master_profile.guardian)),this.dataUpdate.guardian.birthday&&(this.dataUpdate.guardian.birthday=new Date(this.dataUpdate.guardian.birthday)),this.dataUpdate.guardian.personal_id_date&&(this.dataUpdate.guardian.personal_id_date=new Date(this.dataUpdate.guardian.personal_id_date)),e!==this.dataUpdate.guardian.status&&(this.dataUpdate.guardian.bltnds_reason=null))},setDataForDriverLiense:function(t){var e=this.list[t].master_profile.ErpDriverLicense,a=this.getDriverLicensDocByMpId(t);this.dataUpdate.driverLicense={beginning_date:e.beginning_date?new Date(e.beginning_date):null,expiry_date:e.expiry_date?new Date(e.expiry_date):null,class:e.class,no_number:e.no_number,document_name:a.ErpDocument.name}},setDataForVehicleRC:function(t){for(var e=this.list[t].documents,a=0;a<e.length;a++)if(+e[a].ProfileDocument.document_id===Ls.a.TYPE_VEHICLE_RC){this.dataUpdate.vehicleRC=e[a].ErpVehicleRC,this.curDocument=e[a];break}},setDataForHealthCert:function(t){for(var e=this.list[t].documents,a=0;a<e.length;a++)if(+e[a].ProfileDocument.document_id===Ls.a.TYPE_HEALTH_CERTIFICATE){this.dataUpdate.healthCertificate=e[a].ErpDocumentHealthCert,this.dataUpdate.healthCertificate.pd_id=e[a].ProfileDocument.id,this.curDocument=e[a];break}},getDriverLicensDocByMpId:function(t){var e={};return this.list[t].documents.forEach(function(t){13==+t.ProfileDocument.document_id&&(e=t)}),e},search:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.resetPagination(),e.next=3,t.getList();case 3:case"end":return e.stop()}},e,t)}))()},getList:function(){var t=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.prepareRequestData(),Me.a.isEmpty(t.filter.code)&&(t.filter.code=null),Me.a.isEmpty(t.filter.name)&&(t.filter.name=null),t.loading=!0,e.next=7,Es.a.getDocuments(i()({team_id:t.teamId,page:t.pagination.currentPage,limit:t.pagination.limit},t.formatedFilter));case 7:a=e.sent,(n=a.data).success?(t.list=n.data.list,t.permissions=n.permissions,t.permissionEditCic=t.permissions.edit_cic_doc,t.pagination.total=n.data.totalUsers):Me.a.showMessage(n.message),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),Me.a.showMessage(e.t0.message);case 15:return e.prev=15,t.loading=!1,e.finish(15);case 18:case"end":return e.stop()}},e,t,[[0,12,15,18]])}))()},notice:function(t){this.messageNoti=t,this.$bvModal.show("modal-noti")},getCount:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.prepareRequestData(),t.paginationLoading=!0,e.next=5,Es.a.getDocuments(i()({page:t.pagination.currentPage,limit:t.pagination.limit},t.formatedFilter,{isCount:!0}));case 5:a=e.sent,n=a.data,t.pagination.total=n.data.totalUsers,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),Me.a.showMessage(e.t0.message);case 13:return e.prev=13,t.paginationLoading=!1,e.finish(13);case 16:case"end":return e.stop()}},e,t,[[0,10,13,16]])}))()},updateOpenAddModal:function(t){this.openAddModal=t},beforeCreateGuardianDocument:function(t){var e=this;return l()(o.a.mark(function a(){var n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.formDataCreateDocument=t,e.actionType="createGuardianDocument",n=JSON.parse(t.get("doc_data")),a.next=5,e.getGuardianInfo(n.personal_id);case 5:a.sent?e.$bvModal.show("modal-confirm-approve-guard-ghtk"):e.createDocument(t);case 7:case"end":return a.stop()}},a,e)}))()},createGuardianDocument:function(){this.createDocument(this.formDataCreateDocument)},checkBeforeCreateDocument:function(t){parseInt(t.get("documentId"))===Ls.a.TYPE_GUARDIAN_LETTER?this.beforeCreateGuardianDocument(t):this.createDocument(t)},createDocument:function(t){var e=this;return l()(o.a.mark(function a(){var n,i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e.slideStart=null,e.hideUploadPopup=null,e.uploading=!0,a.next=6,Es.a.createDocument(t);case 6:n=a.sent,i=n.data,e.uploading=!1,i.success?(e.slideStart=0,e.hideUploadPopup=!0,e.$bvModal.hide("modal-confirm-approve-guard-ghtk"),e.setDefaultDateRange(),e.filter.status={value:"Chưa duyệt",name:"Chưa duyệt"},Me.a.showMessage("Thêm hồ sơ thành công","success"),e.list=i.data.list,e.openAddModal=!1):Me.a.showMessage(i.message,"warning"),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),Me.a.showMessage(a.t0.message);case 15:case"end":return a.stop()}},a,e,[[0,12]])}))()},approveAll:function(t){if(this.currentMasterProfile=t.currentMasterProfile,this.currentIds=t.currentIds,this.dataUpdate.statusAll=t.statusAll,this.dataUpdate.status=t.status,this.currentUserId=this.currentMasterProfile.user_id,this.currentMasterProfile.has_driver_license&&this.setDataForDriverLiense(this.currentMasterProfile.master_profile_id),this.setDataForVehicleRC(this.currentMasterProfile.master_profile_id),this.setDataForGuardian(this.currentMasterProfile.master_profile_id,"approved"),this.currentMasterProfile.has_driver_license)this.$bvModal.show("modal-confirm-approve-document-all-driver-license");else if(this.currentMasterProfile.has_guardian)this.$bvModal.show("modal-confirm-approve-document-all-guard");else if(this.currentMasterProfile.has_vehicle_rc)this.$bvModal.show("modal-confirm-approve-document-all-vehicle-rc");else if(this.currentMasterProfile.has_health_cert)this.$bvModal.show("modal-confirm-approve-document-all-health-cert");else if(this.currentMasterProfile.has_cic){for(var e=0;e<t.curDocument.length;e++)58==+t.curDocument[e].ProfileDocument.document_id&&(this.curDocument=t.curDocument[e]);this.$bvModal.show("modal-confirm-approve-document-all-cic")}else this.$bvModal.show("modal-confirm-approve-document-all")},confirmDriverLicense:function(){this.currentMasterProfile.has_guardian?this.$bvModal.show("modal-confirm-approve-document-all-guard"):this.currentMasterProfile.has_vehicle_rc?this.$bvModal.show("modal-confirm-approve-document-all-vehicle-rc"):this.currentMasterProfile.has_health_cert?this.$bvModal.show("modal-confirm-approve-document-all-health-cert"):this.execApprove()},checkBeforeConfirmGuardianInfo:function(t){var e=this;return l()(o.a.mark(function a(){var n,i,s;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.actionType="approveGuardianDocument",n={fullname:"Họ tên",birthday:"Ngày sinh",personal_id:"CMND/CCCD",personal_id_date:"Ngày cấp",personal_id_place:"Nơi cấp",resident_province:"Địa chỉ thường trú",resident_sub_district:"Địa chỉ thường trú",current_province:"Địa chỉ hiện tại",current_sub_district:"Địa chỉ hiện tại",current_detail:"Địa chỉ hiện tại",phone:"Số điện thoại",license_place:"Nơi xác thực giấy bảo lãnh",bltnds_reason:"Lý do duyệt",other_info:"Thông tin khai thác thêm từ NBL"},i=["personal_id","phone"],a.t0=o.a.keys(n);case 4:if((a.t1=a.t0()).done){a.next=16;break}if(s=a.t1.value,n.hasOwnProperty(s)){a.next=8;break}return a.abrupt("continue",4);case 8:if(!Me.a.isEmpty(e.dataUpdate.guardian[s])){a.next=11;break}return Me.a.showMessage("Thiếu thông tin "+n[s]+"."),a.abrupt("return");case 11:if(!i.includes(s)||!e.dataUpdate.guardian[s].includes("*")){a.next=14;break}return Me.a.showMessage("Vui lòng kiểm tra lại thông tin "+n[s]+"."),a.abrupt("return");case 14:a.next=4;break;case 16:return a.next=18,e.getGuardianInfo(e.dataUpdate.guardian.personal_id);case 18:a.sent?e.$bvModal.show("modal-confirm-approve-guard-ghtk"):e.execApprove(t);case 20:case"end":return a.stop()}},a,e)}))()},confirmGuardian:function(){this.currentMasterProfile.has_vehicle_rc?this.$bvModal.show("modal-confirm-approve-document-all-vehicle-rc"):this.currentMasterProfile.has_health_cert?this.$bvModal.show("modal-confirm-approve-document-all-health-cert"):this.execApprove()},confirmVehicleRC:function(){this.currentMasterProfile.has_health_cert?this.$bvModal.show("modal-confirm-approve-document-all-health-cert"):this.execApprove()},confirmHealthCert:function(){this.execApprove()},confirmCic:function(){this.$bvModal.hide("modal-confirm-approve-document-cic")},approveOne:function(t){this.curDocument=t.doc,this.dataUpdate.status=t.status,this.currentDocId=t.doc.ProfileDocument.id,t.status||(this.action="document_refused",this.currentMpId=this.currentMasterProfile.master_profile_id,this.currentUserId=this.currentMasterProfile.user_id),13==+t.doc.ProfileDocument.document_id&&this.setDataForDriverLiense(t.doc.ProfileDocument.master_profile_id),+t.doc.ProfileDocument.document_id===Ls.a.TYPE_VEHICLE_RC&&(this.dataUpdate.vehicleRC=this.curDocument.ErpVehicleRC),+t.doc.ProfileDocument.document_id===Ls.a.TYPE_HEALTH_CERTIFICATE&&(this.dataUpdate.healthCertificate=this.curDocument.ErpDocumentHealthCert,this.dataUpdate.healthCertificate.pd_id=this.currentDocId),10==+t.doc.ProfileDocument.document_id&&(this.currentUserId=this.currentMasterProfile.user_id,this.setDataForGuardian(t.doc.ProfileDocument.master_profile_id,t.status?"approved":"rejected")),t.status?58==+t.doc.ProfileDocument.document_id?(this.currentUser=this.currentMasterProfile,this.$bvModal.show("modal-approve-cic")):this.$bvModal.show("modal-confirm-approve-document-one"):this.$bvModal.show("modal-input-refuse-reason-one")},refuseOne:function(){if(10==+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)){if(!this.dataUpdate.guardian.bltnds_reason)return Me.a.showMessage("Bạn cần nhập lý do từ chối.","warning"),!1}else if(!this.refuseReason)return Me.a.showMessage("Bạn cần nhập lý do từ chối.","warning"),!1;this.dataUpdate.statusAll=!1,this.currentIds=[this.currentDocId],this.execSendChat(),this.runExecApprove()},checkBeforeExecApprove:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];10==+this.curDocument.ProfileDocument.document_id?this.checkBeforeConfirmGuardianInfo(t):this.execApprove(t)},execApprove:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return l()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:!1===t.dataUpdate.statusAll||(!1!==e&&(t.currentIds=[e.id]),t.runExecApprove());case 1:case"end":return a.stop()}},a,t)}))()},runExecApprove:function(){var t=this;return l()(o.a.mark(function e(){var a,n,s,r,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=JSON.parse(sa()(t.dataUpdate))).driverLicense.beginning_date&&(a.driverLicense.beginning_date=Ye()(t.dataUpdate.driverLicense.beginning_date).format("YYYY-MM-DD")),a.driverLicense.expiry_date&&(a.driverLicense.expiry_date=Ye()(t.dataUpdate.driverLicense.expiry_date).format("YYYY-MM-DD")),t.slideStart=null,t.prepareRequestData(),t.loading=!0,n=t.dataUpdate.status||t.dataUpdate.statusAll,s=i()({page:1,limit:t.pagination.limit*t.pagination.currentPage},t.formatedFilter),t.teamId&&(s.team_id=t.teamId),t.updatingStatus=!0,e.next=13,Es.a.approveDocument({info:{id:t.currentIds,status:n,reason:t.refuseReason},dataUpdate:a,query:s,curDocument:t.curDocument});case 13:r=e.sent,l=r.data,t.updatingStatus=!1,l.success?(t.slideStart=0,t.resetFormData(),Me.a.showMessage("Duyệt hồ sơ thành công","success"),t.list=l.data.list,t.pagination.total=l.data.totalUsers,t.$bvModal.hide("modal-input-refuse-reason-one"),t.$bvModal.hide("modal-input-refuse-reason-all"),t.$bvModal.hide("modal-confirm-approve-document-one"),t.$bvModal.hide("modal-confirm-approve-document-all"),t.$bvModal.hide("modal-confirm-approve-document-all-guard"),t.$bvModal.hide("modal-confirm-approve-document-all-vehicle-rc"),t.$bvModal.hide("modal-confirm-approve-document-all-health-cert"),t.$bvModal.hide("modal-confirm-approve-document-all-driver-license"),t.$bvModal.hide("modal-confirm-approve-guard-ghtk")):Me.a.showMessage(l.message,"warning"),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),Me.a.showMessage(e.t0.message);case 22:return e.prev=22,t.loading=!1,e.finish(22);case 25:case"end":return e.stop()}},e,t,[[0,19,22,25]])}))()},confirmRefuseAll:function(t){this.currentIds=t.currentIds,this.dataUpdate.statusAll=t.statusAll,this.dataUpdate.status=t.status,this.currentMpId=t.masterProfileId,this.currentMasterProfile=t.currentMasterProfile,this.currentUserId=t.userId,this.action=t.action,this.currentMasterProfile.has_guardian?(this.setDataForGuardian(t.masterProfileId,"rejected"),this.$bvModal.show("modal-input-refuse-reason-all-guardian")):this.$bvModal.show("modal-input-refuse-reason-all")},refuseAll:function(){if("guardian"!==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")&&!this.refuseReason)return Me.a.showMessage("Bạn cần nhập lý do từ chối","warning"),!1;this.execSendChat(),this.runExecApprove()},execSendChat:function(){var t=this;return l()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Es.a.sendChat({action:t.action,user_id:t.currentUserId,master_profile_id:t.currentMpId,position_id:t.currentPositionId,reason:t.refuseReason,reason_guardian:t.dataUpdate.guardian.bltnds_reason,deleteReason:t.deleteReason,doc_ids:t.currentIds});case 3:a=e.sent,a.data.success?Me.a.showMessage("Gửi chat thành công.","success"):Me.a.showMessage("Gửi chat không thành công.","error"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Me.a.showMessage("Gửi chat không thành công.","error");case 11:return e.prev=11,e.finish(11);case 13:t.$bvModal.hide("modal-send-chat");case 14:case"end":return e.stop()}},e,t,[[0,8,11,13]])}))()},resetPagination:function(){this.pagination={currentPage:1,limit:2,total:0}},closeModalGuardGhtkInfo:function(){this.$bvModal.hide("modal-confirm-approve-guard-ghtk")},prepareRemove:function(t){this.currentDocId=t,this.$bvModal.show("modal-input-delete-reason")},remove:function(){if(!this.deleteReason)return Me.a.showMessage("Bạn cần nhập lý do xóa.","warning"),!1;this.currentIds=[this.currentDocId],this.action="document_deleted",this.currentMpId=this.currentMasterProfile.master_profile_id,this.currentUserId=this.currentMasterProfile.user_id,this.execSendChat(),this.execRemove(this.currentDocId)},getDriverLiense:function(t){var e=this;this.$startLoading(),fo({master_profile_id:t}).then(function(t){t.data.success?(e.dataUpdate.driverLicense.no_number=t.data.data.no_number,e.dataUpdate.driverLicense.class=t.data.data.class,e.dataUpdate.driverLicense.expiry_date=t.data.data.expiry_date?new Date(t.data.data.expiry_date):null,e.dataUpdate.driverLicense.beginning_date=t.data.data.beginning_date?new Date(t.data.data.beginning_date):null):Me.a.showMessage(t.data.message||"Có lỗi khi lấy thông tin bằng lái xe !")}).catch(function(t){console.log(t)}).finally(function(t){e.$stopLoading()})},execRemove:function(t){var e=this;return l()(o.a.mark(function a(){var n,s,r,l;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e.slideStart=null,e.prepareRequestData(),e.loading=!0,n=e.deleteReason,s=i()({page:1,limit:e.pagination.limit*e.pagination.currentPage},e.formatedFilter),e.teamId&&(s.team_id=e.teamId),a.next=9,Es.a.removeDocument({id:t,deleteReason:n,query:s});case 9:r=a.sent,(l=r.data).success?(e.slideStart=0,e.resetFormData(),Me.a.showMessage("Xóa hồ sơ thành công","success"),e.list=l.data.list,e.pagination.total=l.data.totalUsers,e.$bvModal.hide("modal-input-delete-reason")):Me.a.showMessage(l.message,"warning"),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(0),console.log(a.t0);case 17:return a.prev=17,e.loading=!1,a.finish(17);case 20:case"end":return a.stop()}},a,e,[[0,14,17,20]])}))()},getGuardianInfo:function(t){var e=this;return l()(o.a.mark(function a(){var n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.updatingStatus=!0,a.prev=1,a.next=4,eo.a.getByCardId({personal_id_number:t});case 4:return(n=a.sent).data.success&&!Me.a.isEmpty(n.data.data)?e.guardianStaffInfo=n.data.data:e.guardianStaffInfo=null,a.abrupt("return",e.guardianStaffInfo);case 9:a.prev=9,a.t0=a.catch(1),Me.a.showMessage("Có lỗi khi tìm thông tin người bảo lãnh.");case 12:return a.prev=12,e.updatingStatus=!1,a.finish(12);case 15:return a.abrupt("return",null);case 16:case"end":return a.stop()}},a,e,[[1,9,12,15]])}))()},closeModelApproveCic:function(){this.$bvModal.hide("modal-approve-cic"),this.getList()},closeModelApproveCicBackup:function(){this.$bvModal.hide("modal-approve-cic-backup"),this.getList()},showCicDetail:function(t){var e=t.doc,a=t.masterProfile;this.curDocument=e,this.currentDocId=e.ProfileDocument.id,this.currentUser=a,this.$bvModal.show("modal-detail-cic")},reConfirmCic:function(){this.$bvModal.show("modal-approve-cic-backup")}}};var Ao=function(t){a("6aA6"),a("ztoD")},Oo=Object(y.a)(Lo,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper profile-management"},[t.isClosingShift?t._e():a("div",{staticClass:"row filter pb-2 justify-content-between input-border"},[a("div",{staticClass:"mb-1 col-md-2 input-filter"},[a("b-form-input",{staticClass:"rounded placeholder-darkgrey",attrs:{placeholder:"Username / Họ tên"},model:{value:t.filter.name,callback:function(e){t.$set(t.filter,"name",e)},expression:"filter.name"}})],1),t._v(" "),a("div",{staticClass:"mb-1 col-md-2 input-filter"},[a("b-form-input",{staticClass:"rounded placeholder-darkgrey",attrs:{placeholder:"CMND / Mã profile"},model:{value:t.filter.code,callback:function(e){t.$set(t.filter,"code",e)},expression:"filter.code"}})],1),t._v(" "),a("div",{staticClass:"mb-1 col-md-2 input-filter"},[a("single-select-profile-region",{attrs:{region:t.filter.region,reset:t.resetSelectRegion,selectClass:"z-5 multiselect-ghtk multiselect-no-horizontal"},on:{handleSelectedRegion:t.handleSelectedRegion}})],1),t._v(" "),a("div",{staticClass:"mb-1 col-md-2 input-filter"},[a("SingleSelectProvince",{attrs:{"select-class":"z-5 multiselect-ghtk multiselect-no-horizontal",reset:t.resetSelectProvince},on:{handleSelectedProvince:function(e){return t.filter.province=e?e.id:null}}})],1),t._v(" "),a("div",{staticClass:"mb-1 col-md-2 input-filter"},[a("SingleSelectStation",{attrs:{selectClass:"z-5 multiselect-ghtk multiselect-no-horizontal",placeholder:"Chọn kho",reset:t.resetSelectStation},on:{handleSelectedStation:function(e){return t.filter.station=e?e.id:null}}})],1),t._v(" "),a("div",{staticClass:"mb-1 col-md-2 input-filter"},[a("v-date-picker",{staticClass:"placeholder-contain font-12",staticStyle:{color:"#4E5155 !important"},attrs:{mode:"range",locale:"vi",color:"green","input-props":{placeholder:"Khoảng thời gian upload",style:"color:darkgrey; font-size: 14px;"},popover:{visibility:"focus"}},model:{value:t.filter.from,callback:function(e){t.$set(t.filter,"from",e)},expression:"filter.from"}})],1),t._v(" "),a("div",{staticClass:"mb-1 col-md-2 input-filter"},[a("Multiselect",{staticClass:"z-3 multiselect-ghtk multiselect-no-horizontal",attrs:{options:t.submitStatusOptions,placeholder:"Trạng thái nộp",label:"name","track-by":"value",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn"},model:{value:t.filter.submitStatus,callback:function(e){t.$set(t.filter,"submitStatus",e)},expression:"filter.submitStatus"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v("Trạng thái nộp")])])],1),t._v(" "),a("div",{staticClass:"mb-1 col-md-2 input-filter"},[a("Multiselect",{staticClass:"z-3 multiselect-ghtk multiselect-no-horizontal",attrs:{options:t.statusOptions,placeholder:"Trạng thái duyệt",label:"name","track-by":"value",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn"},model:{value:t.filter.status,callback:function(e){t.$set(t.filter,"status",e)},expression:"filter.status"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v("Trạng thái duyệt")])])],1),t._v(" "),a("div",{staticClass:"mb-1 col-md-2 input-filter"},[a("SingleSelectDocumentType",{attrs:{"custom-class":"z-3 multiselect-ghtk multiselect-no-horizontal",reset:t.resetSelectDocument},on:{handleSelected:function(e){return t.filter.document=e?e.id:null}}})],1),t._v(" "),a("div",{staticClass:"mb-1 col-md-2 input-filter"},[a("single-select-department",{attrs:{"department-id":t.filter.department_id,reset:t.resetSelectDepartment},on:{handleSelectedDepartment:t.handleSelectedDepartment}})],1),t._v(" "),a("div",{staticClass:"mb-1 col-md-2 input-filter"},[a("SingleSelectPosition",{staticClass:"z-3 multiselect-ghtk multiselect-no-horizontal",attrs:{reset:t.resetSelectPosition},on:{handleSelectedPosition:function(e){return t.filter.position=e?e.id:null}}})],1),t._v(" "),a("div",{staticClass:"text-right col-md-2 input-filter"},[a("button",{staticClass:"btn btn-ghtk rounded w-100 font-weight-bold",attrs:{disabled:t.loading},on:{click:function(e){return t.search()}}},[t._v("\n          Tìm kiếm\n        ")])])]),t._v(" "),a("div",[a("div",{staticClass:"table"},[a("table",{staticClass:"table table-bordered table-sm"},[t.isClosingShift?t._e():a("thead",[t._m(0)]),t._v(" "),a("tbody",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"position-relative"},[t._l(t.list,function(e,n){return[a("row-data",{key:n,attrs:{documents:e.documents,"master-profile":e.master_profile,slideStart:t.slideStart,permissions:t.permissions},on:{eventApprove:t.approveOne,delete:t.prepareRemove,eventApproveAll:t.approveAll,eventConfirmRefuseAll:t.confirmRefuseAll,eventViewPhone:t.viewPhone,showCicDetail:t.showCicDetail,eventHaveCicPending:function(e){return t.notice("Bạn cần duyệt hồ sơ CIC trước khi duyệt tất cả")}}})]})],2)])]),t._v(" "),t.isClosingShift?t._e():a("div",{staticClass:"row my-3 align-items-center"},[a("div",{staticClass:"col col-md-5 text-left"},[+t.pagination.total?a("div",[a("b",[t._v("Số người / trang")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.pagination.limit,expression:"pagination.limit"}],staticClass:"form-control form-control-sm w-4re text-ghtk rounded border-ghtk d-inline-block",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.pagination,"limit",e.target.multiple?a:a[0])},function(e){return t.getList()}]}},t._l([2,4,8,16],function(e){return a("option",[t._v(t._s(e))])}),0),t._v(" "),a("div",{staticClass:"z-0 d-inline-block"},[a("b-pagination",{staticClass:"paginator-ghtk mb-0",attrs:{size:"sm",align:"left","total-rows":t.pagination.total,"per-page":t.pagination.limit},on:{input:function(e){return t.getList(!0)}},model:{value:t.pagination.currentPage,callback:function(e){t.$set(t.pagination,"currentPage",e)},expression:"pagination.currentPage"}})],1)]):t._e()]),t._v(" "),a("div",{staticClass:"col col-md-7 text-right"},[a("b-button",{staticClass:"rounded",attrs:{variant:"ghtk"},on:{click:function(e){t.openAddModal=!0}}},[t._v("\n            + Thêm hồ sơ\n          ")]),t._v(" "),a("b-button",{staticClass:"rounded ml-1 mb-1",attrs:{variant:"ghtk"},on:{click:function(e){return t.openLink({name:"config-type"})}}},[t._v("\n            Cấu hình danh mục hồ sơ\n          ")]),t._v(" "),a("b-button",{staticClass:"rounded ml-1 mb-1",attrs:{variant:"ghtk"},on:{click:function(e){return t.openLink({name:"config-position"})}}},[t._v("\n            Cấu hình hồ sơ nhân sự\n          ")]),t._v(" "),a("b-button",{staticClass:"rounded ml-1 mb-1",attrs:{variant:"ghtk"},on:{click:function(e){return t.openLink({name:"document-analytic"})}}},[t._v("\n            Thống kê\n          ")])],1)])]),t._v(" "),a("Upload",{attrs:{openModal:t.openAddModal,"per-page":t.pagination.limit,hidePopup:t.hideUploadPopup,uploading:t.uploading||t.updatingStatus},on:{done:t.checkBeforeCreateDocument,updateOpen:t.updateOpenAddModal}}),t._v(" "),a("b-modal",{attrs:{static:"",id:"modal-confirm-approve-document-one","hide-footer":"",title:t.curDocument&&t.curDocument.ProfileDocument&&10==+t.curDocument.ProfileDocument.document_id&&t.dataUpdate.status?"Xác nhận duyệt thông tin người bảo lãnh":"Xác nhận duyệt hồ sơ"},on:{hide:function(e){return t.onCloseModalApproveDocumentOne()}}},[t.curDocument&&t.curDocument.ProfileDocument&&13==+t.curDocument.ProfileDocument.document_id&&t.dataUpdate.status?a("div",[a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Họ tên")]),t._v(" "),a("b-input",{staticClass:"rounded",attrs:{id:"input-default",disabled:""},model:{value:t.currentMasterProfile.fullname,callback:function(e){t.$set(t.currentMasterProfile,"fullname",e)},expression:"currentMasterProfile.fullname"}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Hồ sơ")]),t._v(" "),a("b-input",{staticClass:"rounded",attrs:{id:"input-default",disabled:""},model:{value:t.curDocument.ErpDocument.name,callback:function(e){t.$set(t.curDocument.ErpDocument,"name",e)},expression:"curDocument.ErpDocument.name"}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Số "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("b-input",{staticClass:"rounded",attrs:{id:"input-default"},model:{value:t.dataUpdate.driverLicense.no_number,callback:function(e){t.$set(t.dataUpdate.driverLicense,"no_number",e)},expression:"dataUpdate.driverLicense.no_number"}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Hạng bằng "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("b-input",{staticClass:"rounded",attrs:{id:"input-default"},model:{value:t.dataUpdate.driverLicense.class,callback:function(e){t.$set(t.dataUpdate.driverLicense,"class",e)},expression:"dataUpdate.driverLicense.class"}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Ngày bắt đầu "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("v-date-picker",{attrs:{popover:{visibility:"focus"},mode:"date",locale:"vi",color:"green","input-props":{placeholder:"Ngày bắt đầu",style:"font-size: 14px !important; color: #4E5155 !important;"}},model:{value:t.dataUpdate.driverLicense.beginning_date,callback:function(e){t.$set(t.dataUpdate.driverLicense,"beginning_date",e)},expression:"dataUpdate.driverLicense.beginning_date"}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Ngày kết thúc")]),t._v(" "),a("v-date-picker",{attrs:{popover:{visibility:"focus"},mode:"date",locale:"vi",color:"green","input-props":{placeholder:"Ngày kết thúc",style:"font-size: 14px !important; color: #4E5155 !important;"}},model:{value:t.dataUpdate.driverLicense.expiry_date,callback:function(e){t.$set(t.dataUpdate.driverLicense,"expiry_date",e)},expression:"dataUpdate.driverLicense.expiry_date"}})],1)],1):t.curDocument&&t.curDocument.ProfileDocument&&10==+t.curDocument.ProfileDocument.document_id&&t.dataUpdate.status?a("FormGuardianInfo",{directives:[{name:"loading",rawName:"v-loading",value:t.updatingStatus,expression:"updatingStatus"}],attrs:{guardian:t.dataUpdate.guardian,"user-id":t.currentUserId,"config-guardian-sensitive-data":t.configGuardianSensitiveData}}):t.curDocument&&t.curDocument.ProfileDocument&&+t.curDocument.ProfileDocument.document_id===t.erpDocument.TYPE_VEHICLE_RC&&t.dataUpdate.status?a("VehicleRcInfo",{attrs:{"rc-info":t.curDocument.ErpVehicleRC,fullname:t.currentMasterProfile.fullname,"document-name":t.curDocument.ErpDocument.name}}):t.curDocument&&t.curDocument.ProfileDocument&&+t.curDocument.ProfileDocument.document_id===t.erpDocument.TYPE_HEALTH_CERTIFICATE&&t.dataUpdate.status?a("HealthCertInfo",{attrs:{"health-cert-info":t.curDocument.ErpDocumentHealthCert,fullname:t.currentMasterProfile.fullname,"document-name":t.curDocument.ErpDocument.name}}):a("div",[t._v("\n        Bạn có chắc chắn muốn "+t._s(t.dataUpdate.status?"duyệt":"từ chối")+" hồ sơ\n      ")]),t._v(" "),a("div",{staticClass:"text-center mt-3"},[a("button",{staticClass:"btn btn-ghtk rounded",attrs:{disabled:t.updatingStatus},on:{click:function(e){return t.checkBeforeExecApprove({id:t.curDocument.ProfileDocument.id,status:t.dataUpdate.status})}}},[t._v("Xác nhận")])])],1),t._v(" "),a("b-modal",{attrs:{static:"",id:"modal-confirm-approve-document-all","hide-footer":"",title:"Xác nhận duyệt hồ sơ"}},[a("div",[t._v("Bạn có chắc chắn muốn "+t._s(t.dataUpdate.statusAll?"duyệt":"từ chối")+" tất cả hồ sơ")]),t._v(" "),a("div",{staticClass:"text-center mt-3"},[a("button",{staticClass:"btn btn-ghtk rounded",attrs:{disabled:t.updatingStatus},on:{click:function(e){return t.execApprove()}}},[t._v("Xác nhận")])])]),t._v(" "),a("b-modal",{attrs:{static:"",id:"modal-confirm-approve-document-all-driver-license","hide-footer":"",title:"Nhập thông tin Bằng lái xe"},on:{show:function(e){return t.setDataForDriverLiense(t.currentMasterProfile.master_profile_id)}}},[a("div",[a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Họ tên")]),t._v(" "),a("b-input",{staticClass:"rounded",attrs:{id:"input-default",disabled:""},model:{value:t.currentMasterProfile.fullname,callback:function(e){t.$set(t.currentMasterProfile,"fullname",e)},expression:"currentMasterProfile.fullname"}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Hồ sơ")]),t._v(" "),a("b-input",{staticClass:"rounded",attrs:{id:"input-default",disabled:""},model:{value:t.dataUpdate.driverLicense.document_name,callback:function(e){t.$set(t.dataUpdate.driverLicense,"document_name",e)},expression:"dataUpdate.driverLicense.document_name"}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Số "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("b-input",{staticClass:"rounded",attrs:{id:"input-default"},model:{value:t.dataUpdate.driverLicense.no_number,callback:function(e){t.$set(t.dataUpdate.driverLicense,"no_number",e)},expression:"dataUpdate.driverLicense.no_number"}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Hạng bằng "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("b-input",{staticClass:"rounded",attrs:{id:"input-default"},model:{value:t.dataUpdate.driverLicense.class,callback:function(e){t.$set(t.dataUpdate.driverLicense,"class",e)},expression:"dataUpdate.driverLicense.class"}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Ngày bắt đầu "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("v-date-picker",{attrs:{popover:{visibility:"focus"},mode:"date",locale:"vi",color:"green","input-props":{placeholder:"Ngày bắt đầu",style:"font-size: 14px !important; color: #4E5155 !important;"}},model:{value:t.dataUpdate.driverLicense.beginning_date,callback:function(e){t.$set(t.dataUpdate.driverLicense,"beginning_date",e)},expression:"dataUpdate.driverLicense.beginning_date"}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"4","label-for":"input-default"}},[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Ngày kết thúc")]),t._v(" "),a("v-date-picker",{attrs:{popover:{visibility:"focus"},mode:"date",locale:"vi",color:"green","input-props":{placeholder:"Ngày kết thúc",style:"font-size: 14px !important; color: #4E5155 !important;"}},model:{value:t.dataUpdate.driverLicense.expiry_date,callback:function(e){t.$set(t.dataUpdate.driverLicense,"expiry_date",e)},expression:"dataUpdate.driverLicense.expiry_date"}})],1)],1),t._v(" "),a("div",{staticClass:"text-center mt-3"},[a("button",{staticClass:"btn btn-ghtk rounded",attrs:{disabled:t.updatingStatus},on:{click:function(e){return t.confirmDriverLicense()}}},[t._v("Xác nhận")])])]),t._v(" "),a("b-modal",{attrs:{static:"",id:"modal-confirm-approve-document-all-guard","hide-footer":"",title:"Xác nhận duyệt thông tin người bảo lãnh"},on:{hide:function(e){return t.onCloseModalApproveDocumentAllGuard()}}},[a("FormGuardianInfo",{attrs:{guardian:t.dataUpdate.guardian,"user-id":t.currentUserId,"config-guardian-sensitive-data":t.configGuardianSensitiveData}}),t._v(" "),a("div",{staticClass:"text-center mt-3"},[a("button",{staticClass:"btn btn-ghtk rounded",attrs:{disabled:t.updatingStatus},on:{click:function(e){return t.confirmGuardian()}}},[t._v("Xác nhận")])])],1),t._v(" "),a("b-modal",{attrs:{static:"",id:"modal-confirm-approve-guard-ghtk","hide-footer":"",title:"Xác nhận thông tin NBL",size:"sm","header-class":"text-center justify-content-center d-flex","modal-class":"modal-custom-480"},model:{value:t.isShowModalConfirmApproveGuardGhtk,callback:function(e){t.isShowModalConfirmApproveGuardGhtk=e},expression:"isShowModalConfirmApproveGuardGhtk"}},[a("GuardianGhtkStaffInfo",{directives:[{name:"loading",rawName:"v-loading",value:t.updatingStatus||t.uploading,expression:"updatingStatus || uploading"}],attrs:{"staff-info":t.guardianStaffInfo}}),t._v(" "),a("div",{staticClass:"text-center mt-3"},["approveGuardianDocument"===t.actionType?a("button",{staticClass:"btn btn-ghtk rounded",attrs:{disabled:t.updatingStatus},on:{click:function(e){return t.execApprove({id:t.curDocument.ProfileDocument.id,status:t.dataUpdate.status})}}},[t._v("Tiếp tục duyệt")]):t._e(),t._v(" "),"createGuardianDocument"===t.actionType?a("button",{staticClass:"btn btn-ghtk rounded",attrs:{disabled:t.updatingStatus||t.uploading},on:{click:function(e){return t.createGuardianDocument()}}},[t._v("Tiếp tục duyệt")]):t._e(),t._v(" "),a("button",{staticClass:"btn btn-outline-ghtk rounded",staticStyle:{"margin-left":"5px"},on:{click:function(e){return t.closeModalGuardGhtkInfo()}}},[t._v("Đóng")])])],1),t._v(" "),a("b-modal",{attrs:{static:"",id:"modal-confirm-approve-document-all-vehicle-rc","hide-footer":"",title:"Xác nhận duyệt thông tin Giấy chứng nhận đăng ký xe"},on:{show:function(e){return t.setDataForVehicleRC(t.currentMasterProfile.master_profile_id)}}},[a("VehicleRcInfo",{attrs:{"rc-info":t.dataUpdate.vehicleRC,fullname:t.currentMasterProfile.fullname,"document-name":t.curDocument.ErpDocument.name}}),t._v(" "),a("div",{staticClass:"text-center mt-3"},[a("button",{staticClass:"btn btn-ghtk rounded",attrs:{disabled:t.updatingStatus},on:{click:function(e){return t.confirmVehicleRC()}}},[t._v("Xác nhận")])])],1),t._v(" "),a("b-modal",{attrs:{static:"",id:"modal-confirm-approve-document-all-health-cert","hide-footer":"",title:"Xác nhận duyệt thông tin Giấy khám sức khỏe"},on:{show:function(e){return t.setDataForHealthCert(t.currentMasterProfile.master_profile_id)}}},[a("HealthCertInfo",{attrs:{"health-cert-info":t.dataUpdate.healthCertificate,fullname:t.currentMasterProfile.fullname,"document-name":t.curDocument.ErpDocument.name}}),t._v(" "),a("div",{staticClass:"text-center mt-3"},[a("button",{staticClass:"btn btn-ghtk rounded",attrs:{disabled:t.updatingStatus},on:{click:function(e){return t.confirmHealthCert()}}},[t._v("Xác nhận")])])],1),t._v(" "),a("b-modal",{attrs:{static:"",id:"modal-send-chat","hide-footer":"",title:"Xác nhận gửi chat"}},[a("div",[t._v("Bạn có chắc chắn muốn gửi chat?")]),t._v(" "),a("div",{staticClass:"text-center mt-3"},[a("button",{staticClass:"btn btn-ghtk rounded",on:{click:function(e){return t.execSendChat()}}},[t._v("Gửi chat")])])]),t._v(" "),a("b-modal",{attrs:{static:"",id:"modal-input-refuse-reason-all","header-class":"justify-content-center","hide-footer":"",title:"Từ chối"}},[a("b-form-textarea",{staticClass:"rounded",attrs:{id:"input-default",rows:"5",placeholder:"Nhập lý do từ chối"},model:{value:t.refuseReason,callback:function(e){t.refuseReason="string"==typeof e?e.trim():e},expression:"refuseReason"}}),t._v(" "),a("div",{staticClass:"text-center mt-3"},[a("button",{staticClass:"btn btn-ghtk rounded",attrs:{disabled:t.updatingStatus},on:{click:function(e){return t.refuseAll()}}},[t._v("Xác nhận")])])],1),t._v(" "),a("b-modal",{attrs:{static:"",id:"modal-input-refuse-reason-one","header-class":"justify-content-center","hide-footer":"",title:"Từ chối"}},[t.curDocument&&t.curDocument.ProfileDocument&&10==+t.curDocument.ProfileDocument.document_id?a("div",[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Lý do từ chối/nghi ngờ NBL "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("SelectGuardianReason",{attrs:{multiple:"","option-type":"rejected"},model:{value:t.dataUpdate.guardian.bltnds_reason,callback:function(e){t.$set(t.dataUpdate.guardian,"bltnds_reason",e)},expression:"dataUpdate.guardian.bltnds_reason"}})],1):a("div",[a("b-form-textarea",{staticClass:"rounded",attrs:{id:"input-default",rows:"5",placeholder:"Nhập lý do từ chối"},model:{value:t.refuseReason,callback:function(e){t.refuseReason="string"==typeof e?e.trim():e},expression:"refuseReason"}})],1),t._v(" "),a("div",{staticClass:"text-center mt-3"},[a("button",{staticClass:"btn btn-ghtk rounded",attrs:{disabled:t.updatingStatus},on:{click:function(e){return t.refuseOne(t.curDocument.ProfileDocument.document_id)}}},[t._v("Xác nhận")])])]),t._v(" "),a("b-modal",{attrs:{static:"",id:"modal-input-refuse-reason-all-guardian","hide-footer":"",title:"Từ chối"}},[a("div",[a("span",{staticClass:"font-14",attrs:{slot:"label"},slot:"label"},[t._v("Lý do từ chối/nghi ngờ NBL "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("SelectGuardianReason",{attrs:{multiple:"","option-type":"rejected"},model:{value:t.dataUpdate.guardian.bltnds_reason,callback:function(e){t.$set(t.dataUpdate.guardian,"bltnds_reason",e)},expression:"dataUpdate.guardian.bltnds_reason"}})],1),t._v(" "),a("div",{staticClass:"text-center mt-3"},[a("button",{staticClass:"btn btn-ghtk rounded",attrs:{disabled:t.updatingStatus},on:{click:function(e){return t.refuseAllGuardian()}}},[t._v("Xác nhận")])])]),t._v(" "),a("b-modal",{attrs:{static:"",id:"modal-input-delete-reason","header-class":"justify-content-center","hide-footer":"",title:"Xóa"}},[a("b-form-textarea",{staticClass:"rounded",attrs:{id:"input-default",rows:"5",placeholder:"Nhập lý do xóa"},model:{value:t.deleteReason,callback:function(e){t.deleteReason="string"==typeof e?e.trim():e},expression:"deleteReason"}}),t._v(" "),a("div",{staticClass:"text-center mt-3"},[a("button",{staticClass:"btn btn-ghtk rounded",on:{click:function(e){return t.remove()}}},[t._v("Xác nhận")])])],1),t._v(" "),a("b-modal",{ref:"phone-number",attrs:{static:"",id:"modal-show-phone",title:"Gọi ứng viên",centered:"","title-class":"w-100","header-class":"text-center","hide-footer":"",size:"sm"},on:{hide:function(e){return t.onCloseModalShowPhone()}}},[a("div",{staticClass:"d-block text-start"},[a("div",[a("b",[t._v("Họ tên:")]),t._v(" "+t._s(t.currentMasterProfile.fullname))]),t._v(" "),a("div",[a("b",[t._v("Vị trí:")]),t._v(" "+t._s(t.currentMasterProfile.position_name))]),t._v(" "),a("div",[a("b",[t._v("Số điện thoại:")]),t._v(" "),t.isShowModalViewPhone?a("SensitiveLabel",{staticClass:"d-inline",attrs:{"data-input":t.currentMasterProfile.tel,"user-id":t.currentMasterProfile.user_id,type:"tel",source:"staff-work.document"}}):t._e()],1)]),t._v(" "),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-ghtk rounded text-white",on:{click:function(e){return t.closeModalPhone()}}},[t._v("Đóng")])])])]),t._v(" "),a("modal-approve-cic",{attrs:{"profile-document-id":t.currentDocId,user:t.currentUser,permissionEditCic:t.permissionEditCic},on:{approved:t.closeModelApproveCic,reConfirm:t.reConfirmCic}}),t._v(" "),a("modal-approve-cic-backup",{attrs:{"profile-document-id":t.currentDocId,user:t.currentUser},on:{approved:t.closeModelApproveCicBackup}}),t._v(" "),a("modal-detail-cic",{attrs:{"profile-document-id":t.currentDocId,user:t.currentUser}}),t._v(" "),a("Notification",{attrs:{message:t.messageNoti}})],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",{staticClass:"text-center header-row"},[e("th",{staticClass:"profile-col"},[e("b",[this._v("Nhân viên")])]),this._v(" "),e("th",{staticClass:"detail-col"},[e("b",[this._v("Chi tiết hồ sơ")])]),this._v(" "),e("th",{staticClass:"action-col w-20"},[e("b",[this._v("Thao tác")])])])}],!1,Ao,"data-v-accd8a38",null).exports,No=a("t0rc"),Ro=a("7yf7"),Uo=a("kRJf"),$o=function(t){return Uo.a.get("admin/AdTimeSheetManager/getDataCalendarForUser",{params:t})},Ho=function(t){return Uo.a.get("admin/AdTimeSheetManager/getDetailCheckinLog",{params:t})},Bo=function(t){return Uo.a.get("admin/AdTimeSheetManager/getActivitiesOfCheckinLog",{params:t})},jo=function(t){return Uo.a.post("/admin/timesheet/api/approve-request-checkin",t)},Fo=function(t){return Uo.a.post("/admin/timesheet/api/request-checkin-by-approval",t)},qo=a("phbQ"),Yo=a("wxAW"),zo=a.n(Yo),Go=function(t){function e(){return Un()(this,e),Hn()(this,(e.__proto__||Nn()(e)).apply(this,arguments))}return jn()(e,t),zo()(e,null,[{key:"getCheckinStatus",value:function(t){return e.listStatus[t]}}]),e}(Fn.a);Go.shifts=[{text:"Chưa xác định",value:"draft"},{text:"Đủ công",value:"none"},{text:"Nửa công",value:"half_day"},{text:"Buổi sáng",value:"evening"},{text:"Buổi chiều",value:"afternoon"},{text:"Buổi tối",value:"evening"},{text:"Ngày - Nhóm theo giờ",value:"day"},{text:"Đêm - Nhóm theo giờ",value:"night"},{text:"Tăng ca - 1/4 công",value:"one_fourth"},{text:"Tăng ca - 3/4 công",value:"three_fourth"},{text:"Chủ nhật(COD)",value:"sunday"}],Go.checkinTypes=[{text:"Công thường",value:"normal"},{text:"Tăng ca",value:"over_time"},{text:"Xoay ca",value:"round_robin"}],Go.statuses=[{text:"Đồng ý duyệt",value:"approved"},{text:"Từ chối duyệt",value:"rejected"},{text:"Đang chờ duyệt",value:"pending",disabled:!0},{text:"Hệ thống từ chối",value:"rejected_by_autojob",disabled:!0}],Go.shiftDetails=[{text:"Chọn ca chi tiết",value:null},{text:"Sáng - Chiều",value:"morning_afternoon"},{text:"Sáng - Tối",value:"morning_evening"},{text:"Chiều - Tối",value:"afternoon_evening"},{text:"Buổi Sáng",value:"morning"},{text:"Buổi Chiều",value:"afternoon"},{text:"Buổi Tối",value:"evening"}],Go.onLeaves=[{text:"Chấm công",value:"check_in"},{text:"Xin nghỉ",value:"on_leave"}],Go.onLeavesEdit=[{text:"Chấm công",value:0},{text:"Xin nghỉ",value:1}],Go.listStatus={pending:"Đang chờ duyệt",approved:"Đã duyệt",rejected:"Từ chối",rejected_by_autojob:"Hệ thống từ chối"};var Ko=Go,Vo={name:"modal-update-checkin",components:{SingleSelectStation:oa.a},data:function(){return{loading:!1,editCheckinTime:!1,editCheckoutTime:!1,title:"",shifts:Ko.shifts,checkinTypes:Ko.checkinTypes,statuses:Ko.statuses,shiftDetails:Ko.shiftDetails,onLeaves:Ko.onLeaves,leaveTypes:[],onLeavesEdit:Ko.onLeavesEdit,btnAddTitle:"",checkinLog:{reason:null,checkin_time:null,work_hour:null,checkout_time:null,id:null,created:null,created_by:null,group_of_approver_level1:null,group_of_approver_level2:null,approved_level1_by:null,approved_level2_by:null,approved_level1_at:null,approved_level2_at:null,day_on:null,status:null,change_data:0,shift_on:null,shift_detail:"",checkin_type:"",station_id:"",leave_type:"",work_type:null,on_leave:!1},currentUser:{id:null,department:null,historyWorkType:[],workType:null,workTypeDes:null,position_job:null,fullName:null,stationId:null},checkinLogOld:{},workshiftActivities:null,loadingModal:!1,loadingDetail:!1}},props:{modalUpdateCheckinId:{type:String,default:"modal-update-checkin"},historyModalId:{type:String,default:"modal-checkin-history"},checkinId:{default:null},prStatus:{type:String},type:{type:String,default:"edit"},datePicked:{default:null},userId:{default:null},histories:{type:Array}},watch:{type:{handler:function(t){"edit"!==t&&"create"!==t||this.renderTextByType()},immediate:!0},checkinId:{deep:!0,handler:function(t){t&&this.getDetailCheckinLog()},immediate:!0},prStatus:{handler:function(t){t&&(this.checkinLog.status="update"!==t?t:this.checkinLogOld.status?this.checkinLogOld.status:"approved")},immediate:!0},userId:{handler:function(t){t&&this.getCalendarInfo()},immediate:!0},datePicked:{handler:function(t){t&&(this.checkinLog.day_on=t)},immediate:!0},histories:{handler:function(t){this.loadingModal=!1,this.workshiftActivities=JSON.parse(sa()(t))},deep:!0}},computed:{emptyWorkShiftActivities:function(){return Me.a.isEmpty(this.workshiftActivities)},formatedCheckinTime:function(){return this.checkinLog.checkin_time?Ye()(this.checkinLog.checkin_time).format("YYYY-MM-DD HH:mm:ss"):"Không có thời gian checkin"},formatedCheckoutTime:function(){return this.checkinLog.checkout_time?Ye()(this.checkinLog.checkout_time).format("YYYY-MM-DD HH:mm:ss"):"Không có thời gian checkout"},checkinStatus:function(){return Ko.getCheckinStatus(this.checkinLog.status)},approveLevel1Text:function(){return this.checkinLog.approved_level1_by?this.checkinLog.group_of_approver_level1+" "+this.checkinLog.approved_level1_by+"/"+this.checkinLog.approved_level1_at:"Chưa duyệt lần 1"},approveLevel2Text:function(){return this.checkinLog.approved_level2_by?this.checkinLog.group_of_approver_level2+" "+this.checkinLog.approved_level2_by+"/"+this.checkinLog.approved_level2_at:"Chưa duyệt lần 2"},showMessage:function(){return!Me.a.isEmpty(this.checkinLog.message)}},mounted:function(){this.renderTextByType()},created:function(){this.getLeaveType()},methods:{getLeaveType:function(){var t=this;qo.a.getAllLeaveType().then(function(e){e.data.success?t.leaveTypes=e.data.data:Me.a.showMessage(e.data.message||"Không lấy được dữ liệu loại nghỉ phép!","warning")}).catch(function(t){Me.a.showMessage("Đã có lỗi xảy ra, vui lòng thử lại sau !","warning"),console.log(t)}).finally(function(){t.loading=!1})},renderTextByType:function(){"create"===this.type&&(this.title="Tạo bản ghi chấm công",this.btnAddTitle="Thêm mới",this.checkinLog.status="approved",this.checkinLog.checkin_type="normal",this.checkinLog.shift_detail=null,this.checkinLog.shift_on="none",this.checkinLog.on_leave="check_in",this.checkinLog.reason=null,this.checkinLog.message=null,this.checkinLog.leave_type=1,this.checkinLog.hours=null,this.checkinLog.note=null),"edit"===this.type&&(this.title="Phê duyệt dữ liệu chấm công",this.btnAddTitle="Cập nhật")},getCalendarInfo:function(){var t=this;this.loading=!0;var e={user_id:this.userId};qo.a.getUserDetailInfo(e).then(function(e){if(e.data.success){var a=e.data.userInfo;t.currentUser.fullName=a.fullName,t.currentUser.position_job=a.positionName,t.currentUser.department=a.departmentName,t.currentUser.workType=a.workType,t.currentUser.workTypeDes=a.workTypeDes,t.currentUser.id=a.userId,t.currentUser.stationId=a.station}else Me.a.showMessage(e.data.message||"Không lấy được dữ liệu người dùng!","warning")}).catch(function(t){Me.a.showMessage("Đã có lỗi xảy ra, vui lòng thử lại sau !","warning"),console.log(t)}).finally(function(){t.loading=!1})},hideModal:function(){this.resetDefault()},openHistoryModal:function(){this.loadingModal=!0,this.$emit("getHistories",this.checkinLog.id),this.$bvModal.show(this.historyModalId)},editCheckinLog:function(){"edit"===this.type&&this.changeDataOfCheckinLog(),"create"===this.type&&this.createCheckinLog()},changeDataOfCheckinLog:function(){var t=this,e={checkin_id:this.checkinLog.id,status:this.checkinLog.status,shift_on:this.checkinLog.shift_on,shift_detail:this.checkinLog.shift_detail,checkin_type:this.checkinLog.checkin_type,station_id:this.checkinLog.station_id,leave_type:this.checkinLog.leave_type,change_data:1};return"by_hours"===this.currentUser.work_type&&this.checkinLog.hours&&(this.checkinLog.hours<=0||this.checkinLog.hours>16)?(Me.a.showMessage("Số giờ cần lớn hơn 0 và nhỏ hơn 16 giờ"),!1):"approved"!==this.checkinLog.status&&"rejected"!==this.checkinLog.status?(Me.a.showMessage("Bạn chưa chọn DUYỆT hay TỪ CHỐI bản ghi chấm công!","warning"),!1):this.checkinLog.station_id?this.checkinLog.shift_on&&"draft"!==this.checkinLog.shift_on?("day"!==this.checkinLog.shift_on&&"night"!==this.checkinLog.shift_on||(e.hours=this.checkinLog.hours),Ye()(this.checkinLog.checkin_time).format("YYYY-MM-DD HH:mm:ss")!==Ye()(this.checkinLogOld.checkin_time).format("YYYY-MM-DD HH:mm:ss")&&(e.checkin_time=Ye()(this.checkinLog.checkin_time).format("YYYY-MM-DD HH:mm:ss")),Ye()(this.checkinLog.checkout_time).format("YYYY-MM-DD HH:mm:ss")!==Ye()(this.checkinLogOld.checkout_time).format("YYYY-MM-DD HH:mm:ss")&&(e.checkout_time=Ye()(this.checkinLog.checkout_time).format("YYYY-MM-DD HH:mm:ss")),this.loading=!0,void jo(e).then(function(a){a.data.success?(Me.a.showMessage(a.data.message||"Cập nhật dữ liệu thành công!","success"),t.$emit("changeDataOfCheckinLog",e),t.$bvModal.hide(t.modalUpdateCheckinId)):Me.a.showMessage(a.data.message||"Có lỗi xảy ra khi cập nhật dữ liệu chấm công!","warning")}).then(function(){t.$emit("reloadCalendar",!0)}).catch(function(t){Me.a.showMessage("Đã có lỗi xảy ra, vui lòng thử lại sau !","warning"),console.log(t)}).finally(function(){t.loading=!1})):(Me.a.showMessage("Ca làm việc không hợp lệ","warning"),!1):(Me.a.showMessage("Vui lòng chọn kho làm việc"),!1)},createCheckinLog:function(){var t=this,e={day_on:this.checkinLog.day_on,checkin_type:this.checkinLog.checkin_type,shift_on:this.checkinLog.shift_on,shift_detail:this.checkinLog.shift_detail,user_id:this.currentUser.id,station_id:this.checkinLog.station_id,work_type_id:this.currentUser.workType,on_leave:this.checkinLog.on_leave,leave_type:this.checkinLog.leave_type};"over_time"===this.checkinLog.checkin_type&&(e.note=this.checkinLog.note),"day"!==this.checkinLog.shift_on&&"night"!==this.checkinLog.shift_on||(e.work_hour=this.checkinLog.hours),this.loading=!0,Fo(e).then(function(e){e.data.success?(t.loading=!1,Me.a.showMessage(e.data.message||"Thêm mới dữ liệu thành công","success"),t.$bvModal.hide(t.modalUpdateCheckinId)):Me.a.showMessage(e.data.message||"Có lỗi xảy ra trong quá trình thêm mới dữ liệu!","warning")}).then(function(){t.$emit("reloadCalendar",!0)}).catch(function(t){Me.a.showMessage("Đã có lỗi xảy ra, vui lòng thử lại sau !","warning"),console.log(t)}).finally(function(){t.loading=!1})},getDetailCheckinLog:function(){var t=this,e={checkin_id:this.checkinId};this.loadingDetail=!0,Ho(e).then(function(e){e.data.success?(t.checkinLog=e.data.data,t.checkinLog.checkin_time&&(t.checkinLog.checkin_time=Ye()(t.checkinLog.checkin_time).format("YYYY-MM-DDTkk:mm")),t.checkinLog.checkout_time&&(t.checkinLog.checkout_time=Ye()(t.checkinLog.checkout_time).format("YYYY-MM-DDTkk:mm")),t.checkinLogOld=JSON.parse(sa()(t.checkinLog)),t.prStatus&&(t.checkinLog.status="update"!==t.prStatus?t.prStatus:t.checkinLog.status)):Me.a.showMessage(e.data.message||"Không lấy được dữ liệu chấm công!","warning")}).catch(function(t){Me.a.showMessage("Đã có lỗi xảy ra, vui lòng thử lại sau !","warning"),console.log(t)}).finally(function(){t.loadingDetail=!1})},resetDefault:function(){this.$emit("checkinId",null),this.$emit("type",null),this.editCheckinTime=!1},getStationNameById:function(t){var e=sessionStorage.getItem("allStationOfGHTK"),a=e?JSON.parse(e).find(function(e){return Number(e.id)===Number(t.station_id)}):"";return a?a.name:""}}};var Qo=function(t){a("xGAS"),a("QX/V")},Xo=Object(y.a)(Vo,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fcDetailWorkShift"},[a("b-modal",{ref:"edit-checkin-log",attrs:{id:t.modalUpdateCheckinId,title:t.title,size:"xl","content-class":"overflow-hidden","modal-class":"modal-xl","header-class":"text-dark bg-white"},on:{hidden:t.hideModal},scopedSlots:t._u([{key:"modal-title",fn:function(){return[a("h4",{staticClass:"modal-title",staticStyle:{"font-size":"16px"}},[t._v("\n        "+t._s(t.title)+" / "),a("span",[t._v(t._s(t.currentUser.fullName))]),t._v(" /\n        "),a("span",[t._v(t._s(t.currentUser.department))]),t._v(" /\n        "),a("span",[t._v(t._s(t.currentUser.position_job))]),t._v(" /\n        "),a("span",[t._v(t._s(t.currentUser.workTypeDes))])])]},proxy:!0},{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},["create"!==t.type&&t.checkinLogOld.status&&t.checkinLogOld.status===t.checkinLog.status?a("div",{staticClass:"modal-status",class:t.checkinLog.status},[t._v("\n          "+t._s(t.checkinStatus)+"\n        ")]):t._e(),t._v(" "),a("b-button",{staticClass:"float-right rounded",attrs:{variant:"success",size:"md"},on:{click:t.editCheckinLog}},[t._v("\n          "+t._s(t.btnAddTitle)+"\n        ")])],1)]},proxy:!0}])},[t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading||t.loadingDetail,expression:"loading || loadingDetail"}]},[a("div",{staticClass:"row pt-1 pb-1 pl-3"},[a("label",{staticClass:"fw-b-grey col-md-2 text-right"},[t._v("Ngày chấm công *")]),t._v(" "),a("b-form-input",{staticClass:"col-md-4 text-left input-checkin-date",attrs:{disabled:!!t.checkinLog.day_on,size:"xs"},model:{value:t.checkinLog.day_on,callback:function(e){t.$set(t.checkinLog,"day_on",e)},expression:"checkinLog.day_on"}}),t._v(" "),"edit"===t.type?a("label",{staticClass:"font-weight-bold fw-b-grey  col-md-2 text-right mb-0"},[t._v("Giờ checkin:")]):t._e(),t._v(" "),"edit"!==t.type||this.editCheckinTime?t._e():a("span",{staticClass:"col-md-2"},[t._v(" "+t._s(t.formatedCheckinTime)+" ")]),t._v(" "),"edit"===t.type&&t.editCheckinTime?a("b-form-input",{staticClass:"col-md-3 text-left input-checkin-date mr-2",attrs:{size:"xs",type:"datetime-local"},model:{value:t.checkinLog.checkin_time,callback:function(e){t.$set(t.checkinLog,"checkin_time",e)},expression:"checkinLog.checkin_time"}}):t._e(),t._v(" "),"edit"!==t.type||t.editCheckinTime?t._e():a("button",{staticClass:"btn btn-ghtk rounded btn-edit-time",on:{click:function(e){t.editCheckinTime=!t.editCheckinTime}}},[a("i",{staticClass:"fa fa-pencil-alt"})])],1),t._v(" "),a("div",{staticClass:"row pt-1 pb-1 pl-3 align-items-center"},[a("label",{staticClass:"fw-b-grey col-md-2 text-right mb-0"},[t._v("Loại")]),t._v(" "),a("b-form-select",{staticClass:"col-md-4",attrs:{disabled:"edit"===t.type,options:"edit"===t.type?t.onLeavesEdit:t.onLeaves},model:{value:t.checkinLog.on_leave,callback:function(e){t.$set(t.checkinLog,"on_leave",e)},expression:"checkinLog.on_leave"}}),t._v(" "),"edit"===t.type?a("label",{staticClass:"font-weight-bold fw-b-grey  col-md-2 text-right mb-0"},[t._v("Giờ checkout:")]):t._e(),t._v(" "),"edit"!==t.type||this.editCheckoutTime?t._e():a("span",{staticClass:"col-md-2"},[t._v(" "+t._s(t.formatedCheckoutTime)+" ")]),t._v(" "),"edit"===t.type&&t.editCheckoutTime?a("b-form-input",{staticClass:"col-md-3 text-left input-checkin-date mr-2",attrs:{size:"xs",type:"datetime-local"},model:{value:t.checkinLog.checkout_time,callback:function(e){t.$set(t.checkinLog,"checkout_time",e)},expression:"checkinLog.checkout_time"}}):t._e(),t._v(" "),"edit"!==t.type||t.editCheckoutTime?t._e():a("button",{staticClass:"btn btn-ghtk rounded btn-edit-time",on:{click:function(e){t.editCheckoutTime=!t.editCheckoutTime}}},[a("i",{staticClass:"fa fa-pencil-alt"})])],1),t._v(" "),"on_leave"===t.checkinLog.on_leave||1===t.checkinLog.on_leave?a("div",{staticClass:"row pt-1 pb-1 pl-3"},[a("label",{staticClass:"fw-b-grey col-md-2 text-right"},[t._v("Dùng quỹ phép")]),t._v(" "),a("b-form-select",{staticClass:"col-md-4",attrs:{options:t.leaveTypes},model:{value:t.checkinLog.leave_type,callback:function(e){t.$set(t.checkinLog,"leave_type",e)},expression:"checkinLog.leave_type"}}),t._v(" "),"edit"===t.type?a("label",{staticClass:"col-md-2 text-right"},[t._v("Lý do:")]):t._e(),t._v(" "),"edit"===t.type?a("span",{staticClass:"font-weight-bold col-md-4"},[t._v(" "+t._s(t.checkinLog.reason?t.checkinLog.reason:t.checkinLog.note||"")+" ")]):t._e()],1):t._e(),t._v(" "),"on_leave"!==t.checkinLog.on_leave&&1!==t.checkinLog.on_leave&&t.currentUser&&"by_hours"!=t.currentUser.work_type?a("div",{staticClass:"row pt-1 pb-1 pl-3"},[a("label",{staticClass:"fw-b-grey col-md-2 text-right"},[t._v("Chấm công *")]),t._v(" "),a("b-form-select",{staticClass:"col-md-4",attrs:{options:t.checkinTypes},model:{value:t.checkinLog.checkin_type,callback:function(e){t.$set(t.checkinLog,"checkin_type",e)},expression:"checkinLog.checkin_type"}}),t._v(" "),"over_time"===t.checkinLog.checkin_type?a("label",{staticClass:"col-md-2 text-right"},[t._v("Lý do:")]):t._e(),t._v(" "),"edit"===t.type&&"over_time"===t.checkinLog.checkin_type?a("span",{staticClass:"font-weight-bold col-md-4"},[t._v(" "+t._s(t.checkinLog.reason?t.checkinLog.reason:t.checkinLog.note||"")+" ")]):t._e(),t._v(" "),"create"===t.type&&"over_time"===t.checkinLog.checkin_type?a("b-form-input",{staticClass:"col-md-3 text-left input-checkin-date",attrs:{size:"xs",type:"text"},model:{value:t.checkinLog.note,callback:function(e){t.$set(t.checkinLog,"note",e)},expression:"checkinLog.note"}}):t._e()],1):t._e(),t._v(" "),a("div",{staticClass:"row pt-1 pb-1 pl-3 align-items-center"},[a("label",{staticClass:"fw-b-grey col-md-2 text-right mb-0"},[t._v("Thời gian *")]),t._v(" "),a("b-form-select",{staticClass:"col-md-4",attrs:{options:t.shifts},model:{value:t.checkinLog.shift_on,callback:function(e){t.$set(t.checkinLog,"shift_on",e)},expression:"checkinLog.shift_on"}}),t._v(" "),"edit"===t.type?a("label",{staticClass:"font-weight-bold fw-b-grey  col-md-2 text-right mb-0"},[t._v("Gửi lên bởi:")]):t._e(),t._v(" "),"edit"===t.type?a("span",{staticClass:"col-md-4 font-weight-bold"},[t._v(" "+t._s(t.checkinLog.user_created_name)+" / "+t._s(t.checkinLog.created)+" ")]):t._e()],1),t._v(" "),a("div",{staticClass:"row pt-1 pb-1 pl-3 align-items-center"},[a("label",{staticClass:"fw-b-grey col-md-2 text-right mb-0"},[t._v("Ca làm việc")]),t._v(" "),a("b-form-select",{staticClass:"col-md-4",attrs:{options:t.shiftDetails},model:{value:t.checkinLog.shift_detail,callback:function(e){t.$set(t.checkinLog,"shift_detail",e)},expression:"checkinLog.shift_detail"}}),t._v(" "),"edit"===t.type?a("label",{staticClass:"font-weight-bold fw-b-grey  col-md-2 text-right mb-0"},[t._v("Duyệt bởi:")]):t._e(),t._v(" "),"edit"===t.type?a("span",{staticClass:"col-md-4 font-weight-bold"},[t._v(t._s("pending"!==t.checkinLog.status?(t.checkinLog.user_modified_name||"Admin")+" / "+t.checkinLog.modified:""))]):t._e()],1),t._v(" "),"day"===t.checkinLog.shift_on||"night"===t.checkinLog.shift_on?a("div",{staticClass:"row pt-1 pb-1 pl-3"},[a("label",{staticClass:"fw-b-grey col-md-2 text-right"},[t._v("Số giờ")]),t._v(" "),a("b-form-input",{staticClass:"col-md-2 text-left input-checkin-date rounded",attrs:{size:"xs",type:"number"},model:{value:t.checkinLog.hours,callback:function(e){t.$set(t.checkinLog,"hours",e)},expression:"checkinLog.hours"}})],1):t._e(),t._v(" "),a("div",{staticClass:"row pt-1 pb-1 pl-3"},[a("label",{staticClass:"fw-b-grey col-md-2 text-right"},[t._v("Trạng thái")]),t._v(" "),a("b-form-select",{staticClass:"col-md-4",attrs:{options:t.statuses,disabled:"create"===t.type},model:{value:t.checkinLog.status,callback:function(e){t.$set(t.checkinLog,"status",e)},expression:"checkinLog.status"}}),t._v(" "),"edit"===t.type&&"Chưa duyệt lần 1"!==t.approveLevel1Text?a("label",{staticClass:"font-weight-bold fw-b-grey  col-md-2 text-right"},[t._v("Duyệt lần 2 bởi:")]):t._e(),t._v(" "),"edit"===t.type&&"Chưa duyệt lần 1"!==t.approveLevel1Text?a("span",{staticClass:"col-md-4 font-weight-bold"},[t._v(t._s(t.approveLevel2Text))]):t._e()],1),t._v(" "),a("div",{staticClass:"row pt-1 pb-1 pl-3"},[a("label",{staticClass:"fw-b-grey col-md-2 text-right"},[t._v("Kho")]),t._v(" "),a("div",{staticClass:"col-md-4 p-0"},[a("single-select-station",{attrs:{"custom-class":"col-md-4 p-0","station-id":"edit"===t.type?t.checkinLog.station_id:t.currentUser.stationId,selectLabel:"",placeholder:"Kho làm việc"},on:{handleSelectedStation:function(e){return t.checkinLog.station_id=e?e.id:null}}})],1),t._v(" "),"edit"===t.type?a("label",{staticClass:"col-md-2 text-right"},[t._v("Lịch sử cập nhật:")]):t._e(),t._v(" "),"edit"===t.type?a("div",{staticClass:"col-md-4 font-weight-bold"},[a("a",{staticClass:"text-underline-hover cursor-pointer text-success",on:{click:function(e){return t.openHistoryModal()}}},[t._v("Bấm để xem")])]):t._e()]),t._v(" "),t.showMessage?a("div",{staticClass:"row pt-1 pb-1 pl-3"},[a("label",{staticClass:"fw-b-grey col-md-2 text-right"},[t._v("Thông báo:")]),t._v(" "),a("span",{staticClass:"col-md-4 font-weight-bold p-0"},[t._v(" "+t._s(t.checkinLog.message)+" ")])]):t._e()])]),t._v(" "),a("b-modal",{ref:"checkin-history",attrs:{id:t.historyModalId,size:"lg","header-class":"text-dark bg-white","hide-footer":""},scopedSlots:t._u([{key:"modal-title",fn:function(){return[a("h4",{staticClass:"modal-title text-dark font-weight-bold",staticStyle:{"font-size":"16px"}},[t._v("\n        Lịch sử cập nhật dữ liệu chấm công\n      ")])]},proxy:!0}])},[t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingModal,expression:"loadingModal"}],staticClass:"d-block text-center"},[t.emptyWorkShiftActivities?a("h4",[t._v("Không có bản ghi lịch sử dữ liệu chấm công!")]):a("ul",t._l(t.workshiftActivities,function(e,n){return a("li",{key:n},[a("div",{staticClass:"text-align-left"},[a("span",{domProps:{innerHTML:t._s(e.created_at)}}),t._v("\n            - "),a("b",["admin"!==e.user_update_username?a("span",[t._v(t._s(e.user_update_position)+" / ")]):t._e()]),t._v(" "),a("b",[a("span",[t._v(t._s(e.user_update_username))])]),t._v("\n            - "),a("b",[a("span",[t._v(t._s(e.user_update_fullname))])]),t._v(" "),a("span",[t._v(t._s("UPDATE"===e.action?" đã cập nhật ":"Đã tạo")+" bản ghi như sau:")])]),t._v(" "),a("ul",{staticClass:"activity-update text-left"},[a("li",[t._v("Loại: "),a("span",[t._v(t._s(0==e.on_leave?"Chấm công":"Xin nghỉ"))])]),t._v(" "),a("li",[t._v("Chấm công: "),a("span",[t._v(t._s(e.checkin_type))])]),t._v(" "),a("li",[t._v("Ca: "),a("span",[t._v(t._s(e.shift_on))])]),t._v(" "),e.hours?a("li",[t._v("Số giờ: "),a("span",[t._v(t._s(e.hours))])]):t._e(),t._v(" "),a("li",[t._v("Trạng thái: "),a("span",[t._v(t._s(e.status))])]),t._v(" "),a("li",[t._v("Kho: "),a("span",[t._v(t._s(t.getStationNameById(e)))])])])])}),0)])])],1)},[],!1,Qo,"data-v-28c19758",null).exports,Wo=(a("J+AJ"),a("pD0q")),Jo=a("jWc/"),Zo=a("Ou4w"),tr={name:"detail-work-shift",components:{FullCalendar:Wo.a,ModalUpdateCheckin:Xo},data:function(){return{loading:!1,loadingCalendar:!1,updateCheckinModal:"edit-checkin-log",curCheckinLogId:null,type:null,currentUser:{id:null,department:null,historyWorkType:[],workType:null,workTypeDes:null,position_job:null,fullName:null,stationId:null},statistics:{approved:{over_time:null,holiday:null,on_leave_no_sal:null,on_leave:null,holiday_over_time:null,normal:null,round_robin:null,total:null},pending:{on_leave_no_sal:null,holiday_over_time:null,over_time:null,round_robin:null,normal:null},list_holiday:null,holiday:null,required_workshift:null,from:null,to:null},pickedDate:null,from:null,to:null,calendarOptions:{plugins:[Jo.a,Zo.a],initialView:"dayGridMonth",dayCellDidMount:this.buttonAddRender,validRange:this.validRange,headerToolbar:{left:"title",center:"",right:"prev next"},firstDay:1,locale:"vi",selectable:!1,height:"auto",slotEventOverlap:!1,events:[],weekends:!0,eventContent:this.eventContent,showNonCurrentDates:!1},workshiftActivities:[]}},props:{userId:{default:null},shiftRange:{}},watch:{shiftRange:{immediate:!0,handler:function(t,e){t&&t.from&&t.to&&(this.from=this.formatDate(Ye()(t.from)),this.to=this.formatDate(Ye()(t.to).add(1,"days")),this.getInforUser())}}},mounted:function(){this.userId||this.getInforUser()},methods:{validRange:function(t){return{start:this.from,end:this.to}},eventContent:function(t){var e=t.event;if(!e.title)return"";var a=JSON.parse(e.title),n=this,i=Ye()(a.day_on).format("YYYY-MM-DD");this.renderBtnAdd(n,i);var s="";switch(a.status){case"pending":s='<span class="status"> / '+a.text_status+"</span>";break;case"approved":s='<span class="approved status"> / '+a.text_status+"</span>";break;case"rejected":case"rejected_by_autojob":s='<span class="rejected status"> / '+a.text_status+"</span>";break;default:s=""}var o="";a.id&&("by_hours"===this.currentUser.work_type?o+=a.hours+"h":o=a.text_shift?a.text_shift.includes("Tăng ca")?a.text_shift.replace("Tăng ca - ",""):a.text_shift.includes("- Nhóm theo giờ")?a.text_shift.replace("- Nhóm theo giờ",""):a.text_shift:"Chưa xác định");var r=a.id?'<span class="text_shift_on" style="max-width: 100px; width: inherit; padding-right: 2px; padding-left: 2px; text-align: center;\n      '+("by_hours"===this.currentUser.work_type?"min-width: 35px;":"min-width: 50px;")+'"> '+o+"</span>":"",l=a.id?a.title:"normal"===a.day_type?"Không có dữ liệu chấm công":"Ngày nghỉ",c='<div id="event-cal-'+Math.ceil(10*Math.random(50))+'" class="pending-request edit-event cursor-pointer fc-day-grid-event fc-h-event fc-start fc-end" " style="background-color:'+a.color+";border-color:"+a.color+";display:"+(a.display?"none ":"")+'"><span class="fc-content text-white" style="display: flex; align-items: center; flex-wrap: wrap">'+r+'<span class="fc-title">'+l+"</span>"+s+"</span></div>",d=(new DOMParser).parseFromString(c,"text/html").documentElement;return d.onclick=function(){n.editCheckinLog(a.id,e.startStr)},{domNodes:[d]}},renderBtnAdd:function(t,e){var a=document.querySelectorAll("[data-date='"+e+"']"),n=document.querySelectorAll("[data-date='"+e+"'] > div > .fc-daygrid-day-top ");if(a[0]&&n[0]){var i=document.createElement("SPAN");i.classList.add("add-checkin-log"),i.onclick=function(){t.editCheckinLog(null,e)},i.innerHTML="+",i.style.visibility="hidden",n[0].append(i),a[0].onmouseover=function(){for(var t=document.querySelectorAll("[data-date='"+e+"'] > div > .fc-daygrid-day-top > .add-checkin-log"),a=0;a<t.length;a++)t[a].style.visibility="visible"},a[0].onmouseleave=function(){for(var t=document.querySelectorAll("[data-date='"+e+"'] > div > .fc-daygrid-day-top > .add-checkin-log"),a=0;a<t.length;a++)t[a].style.visibility="hidden"}}},buttonAddRender:function(t){var e=this,a=Ye()(t.date).format("YYYY-MM-DD"),n=document.querySelectorAll("[data-date='"+a+"']"),i=document.querySelectorAll("[data-date='"+a+"'] > div > .fc-daygrid-day-top ");if(n[0]&&i[0]){var s=document.createElement("SPAN");s.classList.add("add-checkin-log"),s.onclick=function(){e.editCheckinLog(null,a)},s.innerHTML="+",s.style.visibility="hidden",i[0].append(s),n[0].onmouseover=function(){for(var t=document.querySelectorAll("[data-date='"+a+"'] > div > .fc-daygrid-day-top > .add-checkin-log"),e=0;e<t.length;e++)t[e].style.visibility="visible"},n[0].onmouseleave=function(){for(var t=document.querySelectorAll("[data-date='"+a+"'] > div > .fc-daygrid-day-top > .add-checkin-log"),e=0;e<t.length;e++)t[e].style.visibility="hidden"}}},validCalendarRange:function(t){return{start:this.from,end:this.to}},editCheckinLog:function(t,e){this.curCheckinLogId=t,this.type=this.curCheckinLogId?"edit":"create",this.pickedDate=Ye()(e).format("YYYY-MM-DD"),this.$bvModal.show(this.updateCheckinModal)},handleCheckinId:function(t){this.curCheckinLogId=t},handleType:function(t){this.type=t},handleReloadCalendar:function(t){this.$emit("reloadPage",!0),t&&this.getInforUser()},formatCheckinData:function(t){return t.forEach(function(t,e,a){var n=t;!t.id&&(new Date(t.day_on)>new Date||"sunday_off"===t.day_type||"normal"===t.day_type)?(n.color="transparent",n.display="none"):t.id||"normal"===t.day_type?n.color="approved"===t.status?"#088a4bc2":"pending"===t.status?"#8c8586":"#c41626":n.color="#8c8586",n.start=t.start,n.title=t.on_leave?"Xin nghỉ":t.text_checkin_type,n.type=t.text_checkin_type,n.text_day_type=t.text_day_type,a[e]={color:n.color,id:t.id,start:new Date(t.day_on),end:new Date(t.day_on),allDay:!0,title:sa()(n)}}),t},getInforUser:function(){var t=this;this.loading=!0;var e={user_id:this.userId};qo.a.getUserDetailInfo(e).then(function(e){if(e.data.success){var a=e.data.userInfo;t.currentUser.fullName=a.fullName,t.currentUser.position_job=a.positionName,t.currentUser.department=a.departmentName,t.currentUser.workType=a.workType,t.currentUser.workTypeDes=a.workTypeDes,t.currentUser.id=a.userId,t.currentUser.stationId=a.station}else Me.a.showMessage(e.data.message||"Không lấy được dữ liệu người dùng!","warning")}).then(function(){t.getDataCalendarForUser()}).catch(function(t){Me.a.showMessage("Đã có lỗi xảy ra, vui lòng thử lại sau !","warning"),console.log(t)}).finally(function(){t.loading=!1})},getDataCalendarForUser:function(){var t=this,e={user_id:this.currentUser.id,from:this.from,to:this.to};this.loadingCalendar=!0,$o(e).then(function(e){e.data.success?(t.currentUser.historyWorkType=e.data.history_update_worktype,t.statistics=e.data.statistics.approved?e.data.statistics:t.statistics,t.calendarOptions.events=t.formatCheckinData(e.data.data)):Me.a.showMessage(e.data.message||"Không lấy được dữ liệu chấm công!","warning")}).catch(function(t){Me.a.showMessage("Đã có lỗi xảy ra, vui lòng thử lại sau !","warning"),console.log(t)}).finally(function(){t.loadingCalendar=!1})},formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD";return Me.a.formatDate(t,e)},getHistories:function(t){var e=this;Bo({checkin_id:t,from:this.formatDate(this.shiftRange.from),to:this.formatDate(this.shiftRange.to)}).then(function(t){t.data.success?e.workshiftActivities=Me.a.cloneDeep(t.data.data):Me.a.showMessage(t.data.message||"Không lấy được dữ liệu lịch sử duyệt công!","warning")}).catch(function(t){Me.a.showMessage("Đã có lỗi xảy ra, vui lòng thử lại sau !","warning"),console.log(t)})}}};var er=function(t){a("fwz2"),a("UkVX")},ar=Object(y.a)(tr,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fcDetailWorkShift"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"modal-content overflow-hidden"},[a("div",{staticClass:"modal-header border-bottom-grey bg-white text-dark"},[a("h4",{staticClass:"modal-title"},[t._v("Chi tiết chấm công /\n        "),a("span",{staticClass:"group"},[t._v(t._s(t.currentUser.position_job))]),t._v(" /\n        "),a("span",{staticClass:"fullname"},[t._v(t._s(t.currentUser.fullName))]),t._v(" /\n        "),a("span",[t._v("\n                  "+t._s(t.currentUser.workTypeDes)+"\n                  ")]),t._v(" "),a("span",{staticClass:"time-range"},[t._v("\n                        ( Từ "),a("span",{staticClass:"range-from"},[t._v(t._s(t.formatDate(t.from,"DD/MM/YYYY")))]),t._v(" đến\n                      "),a("span",{staticClass:"range-to"},[t._v(t._s(t.formatDate(t.to,"DD/MM/YYYY")))]),t._v(" )\n                  ")])]),t._v(" "),a("button",{staticClass:"btn text-dark bg-white",attrs:{type:"button"},on:{click:function(e){return t.$bvModal.hide("modal-checkin-calendar")}}},[t._v("x")])]),t._v(" "),a("div",{staticClass:"modal-body rounded"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4 border-grey p-3 m-2 rounded aui-panel",attrs:{id:"workshift-statistics"}},[a("ul",[a("li",[t._v("Công đã chấm: "),a("b",[t._v(t._s(t.statistics.approved.total)),"by_hours"==t.currentUser.work_type?a("span",[t._v("h")]):a("span",[t._v(" công")]),t._v(" "),"by_hours"!=t.currentUser.work_type&&null!==t.statistics.required_workshift?a("span",[t._v(" / "+t._s(t.statistics.required_workshift)+"  công chuẩn ")]):t._e()])]),t._v(" "),a("ul",{staticStyle:{"margin-top":"0px"}},["by_hours"!=t.currentUser.work_type?a("li",{},[t._v(" Công thường (Đã duyệt / Chờ duyệt):\n                "),a("b",[t._v(t._s(t.statistics.approved.normal))]),t._v("\n                / "),a("b",[t._v(t._s(t.statistics.pending.normal))])]):t._e(),t._v(" "),"by_hours"!=t.currentUser.work_type?a("li",{},[t._v(" Công xoay ca (Đã duyệt / Chờ duyệt):\n                "),a("b",[t._v(t._s(t.statistics.approved.round_robin))]),t._v("/"),a("b",[t._v(t._s(t.statistics.pending.round_robin))])]):t._e(),t._v(" "),"by_hours"!=t.currentUser.work_type?a("li",{},[t._v("\n                Công tăng ca thường (Đã duyệt / Chờ duyệt):\n                "),a("b",[t._v(t._s(t.statistics.approved.over_time)+" / "+t._s(t.statistics.pending.over_time))]),t._v("\n                - "),a("span",{staticStyle:{"font-size":"11px","font-style":"italic"}},[t._v(" Đã quy đổi công thường")])]):t._e()]),t._v(" "),0!=t.statistics.approved.holiday_over_time||0!=t.statistics.pending.holiday_over_time?a("li",{},[t._v("\n              Công tăng ca ngày lễ (Đã duyệt / Chờ duyệt):\n              "),a("b",[t._v(t._s(t.statistics.approved.holiday_over_time)+" / "+t._s(t.statistics.pending.holiday_over_time))])]):t._e(),t._v(" "),0!=t.statistics.approved.holiday?a("li",[a("b",[t._v("Công nghỉ lễ : "+t._s(t.statistics.holiday))]),t._v(" ( Ngày "+t._s(t.statistics.list_holiday)+" )\n            ")]):t._e(),t._v(" "),a("li",{},[t._v("\n              Xin nghỉ có lương (Đã duyệt / Chờ duyệt):\n              "),a("b",[t._v(t._s(t.statistics.approved.on_leave))]),t._v(" / "),a("b",[t._v(t._s(t.statistics.pending.on_leave))])]),t._v(" "),a("li",{},[t._v("\n              Xin nghỉ không lương (Đã duyệt / Chờ duyệt):\n              "),a("b",[t._v(t._s(t.statistics.approved.on_leave_no_sal))]),t._v(" / "),a("b",[t._v(t._s(t.statistics.pending.on_leave_no_sal))])])])]),t._v(" "),a("div",{staticClass:"col-md-5 border-grey p-3 m-2 rounded aui-panel",attrs:{id:"history-update-worktype"}},[a("ul",[a("li",[t._v("Loại hình công việc hiện tại: "),a("b",[t._v(t._s(t.currentUser.work_type_desc))])]),t._v(" "),a("li",[t._v("Lịch sử cập nhật loại hình làm việc:\n              "),a("ul",t._l(t.currentUser.historyWorkType,function(e,n){return a("li",{key:n},[a("span",{staticClass:"created"},[t._v(t._s(e.modified))]),t._v(", cập nhật thành "),a("b",[a("span",{staticClass:"work-type"},[t._v(t._s(e.work_type))])]),t._v(" "),e.shift?a("span",{staticClass:"shift"},[a("b",[t._v("/"+t._s(e.shift))])]):t._e(),t._v(" "),e.modified_by?a("span",{staticClass:"user-modified"},[t._v("bởi  "+t._s(e.group)+" "),a("b",[t._v(t._s(e.modified_by))])]):t._e()])}),0)])])])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingCalendar,expression:"loadingCalendar"}],staticClass:"aui-panel",attrs:{id:"calendar_popup"}},[a("FullCalendar",{attrs:{options:t.calendarOptions}})],1)])]),t._v(" "),a("modal-update-checkin",{ref:"modalUpdateChecking",attrs:{"modal-update-checkin-id":t.updateCheckinModal,"checkin-id":t.curCheckinLogId,type:t.type,"date-picked":t.pickedDate,"history-modal-id":"checkin-history-modal","user-id":t.currentUser.id,histories:t.workshiftActivities},on:{checkinId:t.handleCheckinId,type:t.handleType,reloadCalendar:t.handleReloadCalendar,"update:checkinId":function(e){t.curCheckinLogId=e},"update:checkin-id":function(e){t.curCheckinLogId=e},getHistories:t.getHistories}})],1)},[],!1,er,"data-v-00747676",null).exports,nr={name:"checkin-log-detail-v2",data:function(){return{codGroupIds:[12,14,17,18],tags:[]}},props:{allowExplain:{default:!1},userCheckin:{type:Object},checkin:{type:Object},idx:{type:Number},tableName:{type:String},updateVal:{type:Object},editableTag:{default:!0}},components:{TimeLine:Ce.a},computed:{showAction:function(){return!(["approved","rejected","cancel"].includes(this.checkin.checkin_log.status)||this.allowExplain&&this.checkin.explained)}},watch:{checkin:{immediate:!0,handler:function(t){t&&t.tags&&(this.tags=t.tags)}},updateVal:{immediate:!0,handler:function(t){t&&"tag"===t.field&&(this.tags=t.data)}}},methods:{explain:function(){var t={master_profile_id:this.userCheckin.user.master_profile_id,user_id:this.userCheckin.user.user_id,full_name:this.upperCaseEachFirstLetter(this.userCheckin.user.fullname),ref_id:this.checkin.checkin_log.id,new_value:"checkin",deadline:(new Date).toString()};this.$emit("action",{action:"explain",data:t,work_type:this.userCheckin.work_type})},upperCaseEachFirstLetter:function(t){return Me.a.upperCaseEachFirstLetter(t)},showIcon:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"inline-block";document.getElementById(t).style.display=e},openHrtagModal:function(){this.$emit("action",{action:"tag",data:this.checkin,work_type:this.userCheckin.work_type,work_category:this.userCheckin.work_category})},redirectToProfile:function(){this.codGroupIds.includes(+this.userCheckin.user.group_id)?window.open("/adm/profile/cods/"+this.userCheckin.user.user_id,"_blank"):window.open("/adm/profile/master/edit/"+this.userCheckin.user.master_profile_id,"_blank")},formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD/MM/YYYY";return Me.a.formatDate(t,e)},onDeleteTag:function(t){var e=this;return l()(o.a.mark(function a(){var n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!confirm("Bạn có chắc muốn xóa tag "+t.name+" ?")){a.next=7;break}return e.loading=!0,a.next=5,yn.a.detach({record_id:+t.record_id,table_name:t.table_name,hr_tag_id:+t.id});case 5:(n=a.sent).data.success?(e.tags=e.tags.filter(function(e){return+e.id!=+t.id}),e.checkin.tags=e.tags,Me.a.showMessage(n.data.message||"Bỏ gắn tag thành công!","success")):Me.a.showMessage(n.data.message,"warning");case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),Me.a.showMessage(a.t0.message,"warning");case 12:return a.prev=12,e.loading=!1,a.finish(12);case 15:case"end":return a.stop()}},a,e,[[0,9,12,15]])}))()},action:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"view",e=arguments[1],a=arguments[2];this.$emit("action",{action:"action_checkin",data:{checkinId:e,userId:a,action:t}})}}};var ir=function(t){a("UzzI"),a("X0/v")},sr=Object(y.a)(nr,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[t.idx?t._e():a("td",{staticClass:"border-right",attrs:{rowspan:t.userCheckin.check_ins.length||1}},[a("img",{staticClass:"document-images img-circle avatar",attrs:{src:t.userCheckin.user.image_profile,alt:"Avatar"}}),t._v(" "),a("div",{staticClass:"d-inline-block w-70"},[a("b",[t._v(t._s(t.upperCaseEachFirstLetter(t.userCheckin.user.fullname))+" ("+t._s(t.userCheckin.user.username)+")")]),t._v(" "),a("br"),t._v(" "),a("span",[t._v(t._s(t.userCheckin.user.position_name)+" - "+t._s(t.userCheckin.user.work_type_name)+" - "+t._s(t.userCheckin.user.station_name))])]),t._v(" "),a("div",{staticClass:"d-inline float-right d-flex flex-column"},[a("b-dd",{staticClass:"w-100 justify-content-end mb-2",attrs:{left:"",variant:"outline-ghtk","toggle-class":"btn-pill btn-sm",dropdown:"","no-caret":"",menuClass:"border-radius-3 p-0 border-ghtk overflow-hidden"}},[a("span",{attrs:{slot:"button-content"},slot:"button-content"},[t._v("\n          Xem\n        ")]),t._v(" "),a("b-dd-item",{staticClass:"action-view border-bottom-ghtk",on:{click:function(e){return t.action("show_calendar",null,t.userCheckin.user.user_id)}}},[t._v("Xem công "),a("i",{staticClass:"fas fa-chevron-right float-right"})]),t._v(" "),a("b-dd-item",{staticClass:"action-view",on:{click:t.redirectToProfile}},[t._v("Xem profile "),a("i",{staticClass:"fas fa-chevron-right float-right"})])],1),t._v(" "),a("button",{staticClass:"btn btn-outline-ghtk btn-pill btn-sm mb-2",on:{click:function(e){return t.$emit("action",{action:"phone",data:{user_id:t.userCheckin.user.user_id}})}}},[t._v("Gọi\n      ")])],1),t._v(" "),a("div",{staticClass:"mt-2"},[t._l(t.userCheckin.fixedTags||[],function(e,n){return a("div",{key:"fixed_tag"+n,staticClass:"d-inline-block pr-2 pl-2 mb-1",style:e.style},[t._v(t._s(e.name)+"\n      ")])}),t._v(" "),t._l(t.tags,function(e,n){return[a("div",{key:n,staticClass:"d-inline-block mr-1 cursor-pointer position-relative",on:{mouseover:function(a){return t.showIcon("iconDeleteTag"+e.record_id+n)},mouseout:function(a){return t.showIcon("iconDeleteTag"+e.record_id+n,"none")},click:function(a){return t.onDeleteTag(e)}}},[a("div",{staticClass:"d-inline-block tag",style:JSON.parse(e.style)},[t._v("\n            "+t._s(e.name)+"\n          ")]),t._v(" "),a("i",{staticClass:"fa fa-times-circle deleteTag",attrs:{id:"iconDeleteTag"+e.record_id+n}})])]}),t._v(" "),t.editableTag?a("span",{staticClass:"text-ghtk cursor-pointer mx-2  d-inline-block",on:{click:function(e){return t.openHrtagModal()}}},[a("i",{staticClass:"fas fa-plus"}),t._v(" Tag")]):t._e()],2)]),t._v(" "),a("td",{staticClass:"border-right"},[a("div",{staticClass:"mh-10re overflow-auto pt-1"},[a("TimeLine",{attrs:{logs:t.checkin.logs,itemStyle:{},"time-field":"time","message-field":"message",timeFormat:t.formatDate}})],1)]),t._v(" "),a("td",{staticClass:"text-center"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showAction,expression:"showAction"}]},[t._l(t.checkin.action||[],function(e,n){return a("div",{key:n},["explain"!==n?a("button",{staticClass:"btn btn-pill btn-sm w-50 mb-1",class:"rejected"===n?"btn-outline-danger":"btn-outline-ghtk",attrs:{name:"wd-btn-"+n+"-checkin","data-user-id":t.userCheckin.user.user_id},on:{click:function(e){return t.action(n,t.checkin.checkin_log.id,t.userCheckin.user.user_id)}}},[t._v("\n          "+t._s(e)+"\n        ")]):t._e()])}),t._v(" "),t.allowExplain?a("div",[a("button",{staticClass:"btn btn-pill btn-sm w-50 mb-1 btn-outline-danger",on:{click:function(e){return t.explain()}}},[t._v("\n          Giải trình\n        ")])]):t._e()],2)])])},[],!1,ir,"data-v-723b9c5a",null).exports,or=a("7FTm"),rr={name:"order-row-data-v2",components:{TimeLine:Ce.a},props:{approve_report_wrong_identity:{default:!1},allowExplain:{default:!1},order:{type:Object,default:function(){return{}}},type:{type:Object,default:function(){return{}}},duty:{type:Object,default:function(){return{}}},tableName:{type:String},updateVal:{type:Object},editableTag:{default:!0}},data:function(t){return{categoryAlias:or.a.categoryAlias,tags:[],contractType:Fe.a.typeOptions}},watch:{order:{immediate:!0,handler:function(t){t&&t.tags&&(this.tags=t.tags)}},updateVal:{immediate:!0,handler:function(t){t&&"tag"===t.field&&(this.tags=t.data)}}},computed:i()({},Object(_.c)({curUser:"userInfo"}),{moment:Ye.a,genTitle:function(){if("change_info"===this.type.alias)return"Thay đổi thông tin "+We()(this.order.new_value).join(", ");if("insurance"===this.type.category)return"Bảo hiểm xã hội - "+this.type.group_name+" - "+this.type.name;if("contract"===this.type.category){var t=this.order.contract_info&&this.order.contract_info.type_contract,e=this.order.contract_info&&this.order.contract_info.has_kpi;return(t?this.contractType[t]||t:"")+" - Tính KPI: "+(e?"Có":"Không")}return"modify_ekyc_info"===this.type.alias?"Cập nhật thông tin CCCD/CMND":void 0},deadline:function(){return this.order.censors&&this.order.censors.length?this.getDeadline():null},showAction:function(){return!["tu_choi","nhan_ket_qua","hoan_thanh","da_huy"].includes(this.order.status)},canAction:function(){var t=this;return!(!(this.order&&this.type&&this.duty[this.type.category])||this.allowExplain&&this.order.explained)&&("CnB"===this.duty[this.type.category]||(!!(this.order.status&&this.type.alias&&this.order.status===or.a.PENDING_STATUS&&this.approve_report_wrong_identity&&"modify_ekyc_info"===this.type.alias)||!(!this.order.censors||!Array.isArray(this.order.censors))&&(this.curUser&&this.curUser.User&&this.order.censors.find(function(e){return+t.curUser.User.id==+e.id}))))},canApprove:function(){var t=this;return"lost_identity_card"===this.type.alias?this.order.status===or.a.CHO_DUYET_STATUS&&(!(!this.order.censors||!Array.isArray(this.order.censors))&&(this.curUser&&this.curUser.User&&this.order.censors.find(function(e){return+t.curUser.User.id==+e.id}))):this.canAction},genContent:function(){if("change_info"===this.type.alias||"modify_ekyc_info"===this.type.alias){var t=[];for(var e in this.order.new_value)for(var a in this.order.new_value[e]){var n=[],i=[];if(["object","array"].includes(na()(this.order.new_value[e][a]))){if(["Chủ hộ","Thành viên","Con cái","Người liên hệ"].includes(a)){if(this.order.old_value[e]&&this.order.old_value[e][a]&&this.order.old_value[e][a].length){var s=!0,o=!1,r=void 0;try{for(var l,c=fa()(this.order.old_value[e][a]);!(s=(l=c.next()).done);s=!0){var d=l.value;"Chủ hộ"===a&&i.push(" <b>"+d.name+(d.mobile?" - SĐT "+d.mobile:"")+"</b>"),"Thành viên"===a&&i.push(" <b>"+d.relation+" - "+d.name+(d.mobile?" - SĐT "+d.mobile:"")+"</b>"),"Con cái"===a&&i.push(" <b>"+d.name+"</b>"),"Người liên hệ"===a&&i.push(" <b>"+d.relation+" - "+d.name+(d.mobile?" - SĐT "+d.mobile:"")+"</b>")}}catch(t){o=!0,r=t}finally{try{!s&&c.return&&c.return()}finally{if(o)throw r}}}var u=!0,h=!1,p=void 0;try{for(var m,f=fa()(this.order.new_value[e][a]);!(u=(m=f.next()).done);u=!0){var g=m.value;"Chủ hộ"===a&&n.push(" <b>"+g.name+(g.mobile?" - SĐT "+g.mobile:"")+"</b>"),"Thành viên"===a&&n.push(" <b>"+g.relation+" - "+g.name+(g.mobile?" - SĐT "+g.mobile:"")+"</b>"),"Con cái"===a&&n.push(" <b>"+g.name+"</b>"),"Người liên hệ"===a&&n.push(" <b>"+g.relation+" - "+g.name+(g.mobile?" - SĐT "+g.mobile:"")+"</b>")}}catch(t){h=!0,p=t}finally{try{!u&&f.return&&f.return()}finally{if(h)throw p}}}}else{var v=!1;"modify_ekyc_info"===this.type.alias&&this.order.new_value[e][a]&&(Me.a.isEmpty(this.order.old_value[e][a])||this.order.new_value[e][a]!==this.order.old_value[e][a])&&(v=!0),("modify_ekyc_info"!==this.type.alias||v)&&(n.push("<b>"+this.order.new_value[e][a]+"</b>"),this.order.old_value[e]&&this.order.old_value[e][a]&&i.push("<b>"+this.order.old_value[e][a]+"</b>"))}Me.a.isEmpty(n)||t.push(a+(i&&i.length?" từ "+i.join(", "):"")+" thành "+n.join(", "))}return"Thay đổi "+t.join(", ")}return"insurance"===this.type.category?this.order.note:"new_contract"===this.type.alias?this.order.contract_info&&this.order.contract_info.end_date?this.formatDate(this.order.contract_info.start_date)+" - "+this.formatDate(this.order.contract_info.end_date):"Không thời hạn":void 0}}),methods:{explain:function(){var t={master_profile_id:this.order.profile_id,user_id:this.order.profile_info.user_id,ref_id:this.order.id,full_name:this.upperCaseEachFirstLetter(this.order.profile_info&&this.order.profile_info.fullname),new_value:"staff_order",deadline:this.deadline};this.$emit("action",{action:"explain",data:t})},onDeleteTag:function(t){var e=this;return l()(o.a.mark(function a(){var n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!confirm("Bạn có chắc muốn xóa tag "+t.name+" ?")){a.next=7;break}return e.loading=!0,a.next=5,yn.a.detach({record_id:+t.record_id,table_name:t.table_name,hr_tag_id:+t.id});case 5:(n=a.sent).data.success?(e.tags=e.tags.filter(function(e){return+e.id!=+t.id}),e.order.tags=e.tags,Me.a.showMessage(n.data.message||"Bỏ gắn tag thành công!","success")):Me.a.showMessage(n.data.message,"warning");case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),Me.a.showMessage(a.t0.message,"warning");case 12:return a.prev=12,e.loading=!1,a.finish(12);case 15:case"end":return a.stop()}},a,e,[[0,9,12,15]])}))()},showIcon:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"inline-block";document.getElementById(t).style.display=e},formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD/MM/YYYY";return Me.a.formatDate(t,e)},upperCaseEachFirstLetter:function(t){return Me.a.upperCaseEachFirstLetter(t)},genCodeOrder:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"BH",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6;return Me.a.genCode(t,e,a,n)},getDeadline:function(){if(!this.order||["da_duyet","thieu_ho_so","tu_choi","co_ket_qua","nhan_ket_qua","hoan_thanh","da_huy"].includes(this.order.status))return null;if(!this.order.censors||!this.order.censors.length)return null;var t=null;return this.order.censors.forEach(function(e){e.deadline&&(!t||Ye()(e.deadline)<t)&&(t=Ye()(e.deadline))}),t?t.format("YYYY-MM-DD H:m:s"):null}}};var lr=function(t){a("51RP")},cr=Object(y.a)(rr,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"border-right"},[a("div",{},[a("div",{staticClass:"position-relative"},[a("div",{staticClass:"d-flex justify-content-between"},[a("div",{staticClass:"d-flex justify-content-start"},[a("div",{staticClass:"mr-2"},[a("img",{staticClass:"rounded-circle",attrs:{src:t.order.profile_info&&t.order.profile_info.image_profile,alt:"",width:"50",height:"50"}})]),t._v(" "),a("div",[a("b",[t._v(t._s(t.upperCaseEachFirstLetter(t.order.profile_info&&t.order.profile_info.fullname))+" ("+t._s(t.order.profile_info&&t.order.profile_info.username)+")")]),t._v(" "),a("br"),t._v(" "),a("span",[t._v(t._s(t.order.profile_info.position_name)+" - "+t._s(t.order.profile_info.work_type)+" - "+t._s(t.order.profile_info.station))]),t._v(" "),a("br"),t._v("\n              Mã MP: "+t._s(t.order.profile_info.staff_code)+"\n            ")])]),t._v(" "),a("div",[a("b-dd",{staticClass:"w-100 justify-content-end mb-2",attrs:{left:"",variant:"outline-ghtk","toggle-class":"btn-pill btn-sm",dropdown:"","no-caret":"",menuClass:"border-radius-3 p-0 border-ghtk overflow-hidden"}},[a("span",{attrs:{slot:"button-content"},slot:"button-content"},[t._v("\n                Xem\n              ")]),t._v(" "),a("b-dd-item",{staticClass:"action-view border-bottom-ghtk",on:{click:function(e){return t.$emit("action",{action:"detail_order",data:{}})}}},[t._v("\n                Xem đề xuất "),a("i",{staticClass:"fas fa-chevron-right float-right"})]),t._v(" "),a("b-dd-item",{staticClass:"action-view",on:{click:function(e){return t.$emit("action",{action:"view_profile_cod",data:{user_id:t.order.profile_info.user_id,group_id:t.order.profile_info.group_id,master_profile_id:t.order.profile_info.id}})}}},[t._v("\n                Xem profile "),a("i",{staticClass:"fas fa-chevron-right float-right"})])],1),t._v(" "),a("br"),t._v(" "),a("button",{staticClass:"w-100 btn btn-outline-ghtk btn-sm btn-pill",on:{click:function(e){return t.$emit("action",{action:"phone",data:{user_id:t.order.profile_info.user_id}})}}},[t._v("Gọi")])],1)])]),t._v(" "),"lost_identity_card"!==t.type.alias?a("div",{staticClass:"mt-2"},[t._l(t.order.fixedTags||[],function(e,n){return a("div",{key:"fixed_tag"+n,staticClass:"d-inline-block pr-2 pl-2 mb-1",style:e.style},[t._v(t._s(e.name))])}),t._v(" "),t._l(t.tags,function(e,n){return[a("div",{key:n,staticClass:"d-inline-block mr-1 cursor-pointer position-relative",on:{mouseover:function(a){return t.showIcon("iconDeleteTag"+e.record_id+n)},mouseout:function(a){return t.showIcon("iconDeleteTag"+e.record_id+n,"none")},click:function(a){return t.onDeleteTag(e)}}},[a("div",{staticClass:"d-inline-block tag",style:JSON.parse(e.style)},[t._v("\n              "+t._s(e.name)+"\n            ")]),t._v(" "),a("i",{staticClass:"fa fa-times-circle deleteTag",attrs:{id:"iconDeleteTag"+e.record_id+n}})])]}),t._v(" "),t.editableTag?a("span",{staticClass:"d-inline-block cursor-pointer text-ghtk ml-2",on:{click:function(e){return t.$emit("action",{action:"tag",data:t.order,work_category:"staff_order"})}}},[a("i",{staticClass:"fas fa-plus"}),t._v(" Tag\n        ")]):t._e()],2):t._e()])]),t._v(" "),a("td",{staticClass:"border-right"},["lost_identity_card"!==t.type.alias?a("div",{staticClass:"desc",staticStyle:{color:"#000 !important"}},[a("b",{staticClass:"text-ghtk cursor-pointer",on:{click:function(e){return t.$emit("action",{action:"detail_order",data:{}})}}},[t._v(t._s(t.genCodeOrder(t.order.id,t.categoryAlias[t.type.category])))]),t._v("\n      - "+t._s(t.genTitle)+" "),a("br"),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"change_info"===t.type.alias||"modify_ekyc_info"===t.type.alias,expression:"type.alias === 'change_info' || type.alias === 'modify_ekyc_info'"}]},[t._v("Nội dung:")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"insurance"===t.type.category,expression:"type.category === 'insurance'"}]},[t._v("Lý do:")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"new_contract"===t.type.alias,expression:"type.alias === 'new_contract'"}]},[t._v("Thời hạn:")]),t._v(" "),a("span",{domProps:{innerHTML:t._s(t.genContent)}}),t._v(" "),a("br"),t._v(" "),a("b",[t._v("Hạn xử lý: "+t._s(t.formatDate(t.deadline,"HH:mm:ss DD/MM/YYYY")))])]):t._e(),t._v(" "),a("div",{staticClass:"mh-10re overflow-auto pt-1"},[a("TimeLine",{attrs:{logs:t.order.logs,itemStyle:{},"time-field":"created","message-field":"message",timeFormat:t.formatDate}})],1),t._v(" "),"lost_identity_card"===t.type.alias?a("div",{staticClass:"desc",staticStyle:{color:"#000 !important"}},[a("b",[t._v("Hạn bổ sung:")]),t._v(" "+t._s(t.formatDate(t.order.deadline,"DD-MM-YYYY"))+"\n    ")]):t._e()]),t._v(" "),a("td",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showAction,expression:"showAction"}]},["lost_identity_card"!==t.type.alias?a("div",[a("div",{staticClass:"text-ghtk cursor-pointer text-center",on:{click:function(e){return t.$emit("action",{action:"censor",data:{}})}}},[t._v("Người xử lý "),a("i",{staticClass:"fas fa-edit"})]),t._v(" "),t._l(t.order.censors,function(e,n){return[n<2?a("div",{key:n},[a("img",{staticClass:"rounded-circle",attrs:{src:e.avatar,alt:"",width:"20",height:"20"}}),t._v("\n          "+t._s(e.username)+" - "+t._s(e.station)+"\n        ")]):t._e()]})],2):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.canAction,expression:"canAction"}],staticClass:"text-center mt-1"},[a("button",{directives:[{name:"show",rawName:"v-show",value:t.canApprove,expression:"canApprove"}],staticClass:"wd-order-btn-approve-info btn btn-sm btn-outline-ghtk btn-pill w-75 mb-1",on:{click:function(e){return t.$emit("action",{action:"modify_ekyc_info"===t.type.alias?"detail_order":"duyet",data:{}})}}},[t._v("Duyệt")]),t._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:t.canApprove,expression:"canApprove"}],staticClass:"btn btn-sm btn-outline-danger btn-pill w-75 mb-1",on:{click:function(e){return t.$emit("action",{action:"modify_ekyc_info"===t.type.alias?"detail_order":"tu_choi",data:{}})}}},[t._v("Từ chối")]),t._v(" "),t.allowExplain?a("button",{staticClass:"btn btn-sm btn-outline-danger btn-pill w-75",on:{click:t.explain}},[t._v("Giải trình")]):t._e()])])])])},[],!1,lr,"data-v-9ffaa124",null).exports,dr={name:"censor-v2",props:{smallView:{default:!1},order:{default:function(t){return{}}},orderId:{}},components:{SelectUser:Ie.a},data:function(t){return{loading:!1,curCensor:null,resetSelectUser:null}},computed:{deadline:function(){return this.order.censors&&this.order.censors.length?this.getDeadline(this.order):null},moment:function(){return Ye.a},canUpdateCensor:function(){return!["da_duyet","tu_choi","hoan_thanh","da_huy"].includes(this.order.status)}},created:function(){!this.order.censors&&this.orderId&&this.getCensorForOrder(this.orderId)},watch:{orderId:function(t,e){t&&!this.order.censors&&this.getCensorForOrder(t)}},methods:{gotoGroupChat:function(t){var e=this;t&&t.id&&(t.channel_id?window.open("https://ghtk.me/channel/internal/"+t.channel_id,"_blank"):Se.a.createDirectChat({userId:t.id}).then(function(t){if(t.data.success){var e=t.data.data.channel_id;window.open("https://ghtk.me/channel/internal/"+e,"_blank")}else Me.a.showMessage(t.data.message||"Tạo direct chat thất bại !")}).catch(function(t){Me.a.showMessage("Có lỗi xảy ra, vui lòng thử lại sau !"),console.log(t)}).finally(function(t){e.loading=!1}))},getDeadline:function(t){if(!t||!t.censors||!t.censors.length||["da_duyet","thieu_ho_so","tu_choi","co_ket_qua","nhan_ket_qua","hoan_thanh","da_huy"].includes(t.status))return null;var e=null;return t.censors.forEach(function(t){t&&t.deadline&&(!e||Ye()(t.deadline)<e)&&(e=Ye()(t.deadline))}),e?e.format("YYYY-MM-DD H:m:s"):null},getCensorForOrder:function(t){var e=this;t&&(this.loading=!0,Se.a.getCensorForOrder({order_id:t}).then(function(t){t.data.success?e.order.censors=t.data.data||[]:Me.a.showMessage(t.data.message||"Có lỗi khi lấy người duyệt của đề xuất !")}).catch(function(t){console.log(t),Me.a.showMessage("Có lỗi khi lấy người duyệt của đề xuất !")}).then(function(t){e.loading=!1}))},updateCensor:function(t){var e=this;!t||"add"!==t&&"delete"!==t||(this.$startLoading(),Se.a.updateCensor({order:this.orderId||this.order.id,censor:this.curCensor,type:t}).then(function(a){if(!a.data.success)return Me.a.showMessage(a.data.message||"Không cập nhật được người duyệt, vui lòng thử lại sau !","warning");Me.a.showMessage(a.data.message||("add"===t?"Thêm người duyệt thành công":"Xóa người duyệt thành công"),"success"),"add"===t&&a.data.data.new_censor&&e.order.censors.push(a.data.data.new_censor),"delete"===t&&(e.order.censors=e.order.censors.filter(function(t){return+t.id!=+e.curCensor.id})),e.curCensor=null}).catch(function(t){console.log(t),Me.a.showMessage("Không cập nhật được người duyệt, vui lòng thử lại sau !","warning")}).finally(function(t){e.$stopLoading(),e.resetSelectUser=!e.resetSelectUser}))},updateNewCensor:function(t,e){!e||"add"!==e&&"delete"!==e||("add"===e&&(this.curCensor=t),"delete"===e&&(this.curCensor=null))},deleteCensor:function(t){this.curCensor=t,this.updateCensor("delete")}}};var ur=function(t){a("d9Jv")},hr=Object(y.a)(dr,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"position-relative"},[t._l(t.order.censors,function(e,n){return[a("div",{key:n,staticClass:"row ml-1 mb-3"},[a("img",{staticClass:"col-md-1 p-0 document-images img-circle avatar",attrs:{src:e.avatar,alt:"Avatar"}}),t._v(" "),a("div",{staticClass:"col-md-10"},[a("b",{staticClass:"pt-1"},[t._v(t._s(e.fullname)+" - "+t._s(e.username)+" - "+t._s(e.position_name))]),t._v(" "),a("i",{staticClass:"ml-1 fa fa-comment-dots cursor-pointer",staticStyle:{color:"#069255"},attrs:{"aria-hidden":"true"},on:{click:function(a){return t.gotoGroupChat(e)}}})]),t._v(" "),a("div",{staticClass:"col-md-1 p-0"},[a("b-btn",{staticClass:"btn-outline-danger btn btn-sm btn-delete",on:{click:function(a){return t.deleteCensor(e)}}},[t._v("Xóa")])],1)])]}),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-10"},[a("SelectUser",{class:t.smallView?"font-12":"font-13",attrs:{disabled:!t.canUpdateCensor,placeholder:"Chọn người xử lý",reset:t.resetSelectUser},on:{select:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return t.updateNewCensor.apply(void 0,n.concat(["add"]))},remove:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return t.updateNewCensor.apply(void 0,n.concat(["delete"]))}}})],1),t._v(" "),a("div",{staticClass:"col-sm-2 p-0 text-right"},[a("b-btn",{staticClass:"btn-ghtk btn btn-delete",on:{click:function(e){return t.updateCensor("add")}}},[t._v("Thêm")])],1)])],2)},[],!1,ur,null,null).exports,pr={name:"contract-log-detail",components:{TimeLine:Ce.a},props:{allowExplain:{default:!1},order:{type:Object},tableName:{type:String},updateVal:{type:Object}},watch:{order:{immediate:!0,handler:function(t){t&&t.tags&&(this.tags=t.tags)}},updateVal:{immediate:!0,handler:function(t){t&&"tag"===t.field&&(this.tags=t.data)}}},computed:{showAction:function(){return!["tu_choi","da_duyet","nhan_ket_qua","da_huy","hoan_thanh"].includes(this.order.status)},actions:function(){return this.allowExplain&&this.order.explained?[]:this.order.permission||[]}},data:function(){return{typeContract:Fe.a.arrayTypeContract,tags:[]}},methods:{onDeleteTag:function(t){var e=this;return l()(o.a.mark(function a(){var n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!confirm("Bạn có chắc muốn xóa tag "+t.name+" ?")){a.next=7;break}return e.loading=!0,a.next=5,yn.a.detach({record_id:+t.record_id,table_name:t.table_name,hr_tag_id:+t.id});case 5:(n=a.sent).data.success?(e.tags=e.tags.filter(function(e){return+e.id!=+t.id}),e.order.tags=e.tags,Me.a.showMessage(n.data.message||"Bỏ gắn tag thành công!","success")):Me.a.showMessage(n.data.message,"warning");case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),Me.a.showMessage(a.t0.message,"warning");case 12:return a.prev=12,e.loading=!1,a.finish(12);case 15:case"end":return a.stop()}},a,e,[[0,9,12,15]])}))()},action:function(t){this.$emit("action",t)},explain:function(){var t={master_profile_id:this.order.profile_info.id,user_id:this.order.profile_info.user_id,full_name:this.upperCaseEachFirstLetter(this.order.profile_info.fullname),ref_id:this.order.order_id,new_value:"staff_order_contract",deadline:this.order.deadline};this.$emit("action",{action:"explain",data:t})},showIcon:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"inline-block";document.getElementById(t).style.display=e},redirectToProfile:function(t,e,a){ze.a.redirectProfile(a,t,e)},formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HH:mm:ss DD/MM/YYYY";return Me.a.formatDate(t,e)},upperCaseEachFirstLetter:function(t){return Me.a.upperCaseEachFirstLetter(t)},genCodeOrder:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"BH",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6;return Me.a.genCode(t,e,a,n)},genTypeContractName:function(t){var e=this.typeContract.find(function(e){return e.value===t})||null;return null!==e?e.desc:null}}};var mr=function(t){a("oYhB")},fr=Object(y.a)(pr,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"border-right"},[a("img",{staticClass:"document-images img-circle avatar",attrs:{src:t.order.profile_info.image_profile,alt:"Avatar"}}),t._v(" "),a("div",{staticClass:"d-inline-block w-60"},[a("b",[t._v(t._s(t.upperCaseEachFirstLetter(t.order.profile_info.fullname))+" ("+t._s(t.order.profile_info.username)+")")]),t._v(" "),a("br"),t._v(" "),a("span",[t._v(t._s(t.order.profile_info.position_name)+" - "+t._s(t.order.profile_info.province)+" - "+t._s(t.order.profile_info.station))])]),t._v(" "),a("div",{staticClass:"d-inline float-right d-flex flex-column"},[a("b-dd",{staticClass:"w-100 justify-content-end mb-2",attrs:{left:"",variant:"outline-ghtk","toggle-class":"btn-pill btn-sm",dropdown:"","no-caret":"",menuClass:"border-radius-3 p-0 border-ghtk overflow-hidden"}},[a("span",{attrs:{slot:"button-content"},slot:"button-content"},[t._v("\n          Xem\n        ")]),t._v(" "),a("b-dd-item",{staticClass:"action-view border-bottom-ghtk",on:{click:function(e){return t.$emit("action",{action:"detail_order",data:{}})}}},[t._v("\n          Xem đề xuất "),a("i",{staticClass:"fas fa-chevron-right float-right"})]),t._v(" "),a("b-dd-item",{staticClass:"action-view",on:{click:function(e){return t.redirectToProfile(t.order.profile_info.user_id,t.order.profile_info.id,t.order.profile_info.group_id)}}},[t._v("\n          Xem profile "),a("i",{staticClass:"fas fa-chevron-right float-right"})])],1),t._v(" "),a("button",{staticClass:"btn btn-outline-ghtk btn-pill btn-sm mb-2",on:{click:function(e){return t.$emit("action",{action:"phone",data:{user_id:t.order.profile_info.user_id}})}}},[t._v("Gọi\n      ")])],1),t._v(" "),a("div",{staticClass:"mt-2"},[t._l(t.order.fixedTags||[],function(e,n){return a("div",{key:"fixed_tag"+n,staticClass:"d-inline-block pr-2 pl-2 mb-1",style:e.style},[t._v(t._s(e.name)+"\n      ")])}),t._v(" "),t._l(t.tags,function(e,n){return[a("div",{key:n,staticClass:"d-inline-block mr-1 cursor-pointer position-relative",on:{mouseover:function(a){return t.showIcon("iconDeleteTag"+e.record_id+n)},mouseout:function(a){return t.showIcon("iconDeleteTag"+e.record_id+n,"none")},click:function(a){return t.onDeleteTag(e)}}},[a("div",{staticClass:"d-inline-block tag",style:JSON.parse(e.style)},[t._v("\n            "+t._s(e.name)+"\n          ")]),t._v(" "),a("i",{staticClass:"fa fa-times-circle deleteTag",attrs:{id:"iconDeleteTag"+e.record_id+n}})])]}),t._v(" "),a("span",{staticClass:"text-ghtk cursor-pointer mx-2",on:{click:function(e){return t.action({action:"tag",work_category:t.order.work_category,data:t.order,work_type:t.order.work_type})}}},[a("i",{staticClass:"fas fa-plus"}),t._v(" Tag\n      ")])],2)]),t._v(" "),a("td",{staticClass:"border-right",staticStyle:{color:"#000 !important"}},[a("div",[a("strong",{staticClass:"text-ghtk cursor-pointer",on:{click:function(e){return t.$emit("action",{action:"detail_order",data:{}})}}},[t._v("\n        "+t._s(t.genCodeOrder(t.order.order_id,"contract"===t.order.category?"HĐ":"BH"))+"\n      ")]),t._v(" "),t.order.contract_info?a("span",[t._v("\n      - "),a("span",[t._v(t._s(t.genTypeContractName(t.order.contract_info.type_contract)))]),t._v("\n      - "),a("span",[t._v("Tính KPI: "+t._s(+t.order.contract_info.has_kpi?"Có":"Không"))])]):t._e()]),t._v(" "),t.order.contract_info?a("div",[t.order.contract_info.end_date?a("span",[t._v("Thời hạn: "+t._s(t.formatDate(t.order.contract_info.start_date,"DD/MM/YYYY"))+" - "+t._s(t.formatDate(t.order.contract_info.end_date,"DD/MM/YYYY")))]):a("span",[t._v("Thời hạn: Không thời hạn")])]):t._e(),t._v(" "),a("div",[a("strong",[t._v("Hạn xử lý: "+t._s(t.formatDate(t.order.deadline)))])]),t._v(" "),a("div",{staticClass:"mt-2"},[a("TimeLine",{attrs:{itemStyle:{},logs:t.order.logs,"append-action":!["da_duyet","tu_choi","da_huy","hoan_thanh"].includes(t.order.status),timeFormat:t.formatDate,"message-field":"message"},on:{action:function(e){return t.action.apply(void 0,arguments)}}})],1)]),t._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:t.showAction,expression:"showAction"}]},[a("div",[a("div",{staticClass:"text-ghtk cursor-pointer text-center",on:{click:function(e){return t.$emit("action",{action:"censor",data:{}})}}},[t._v("Người\n        xử lý "),a("i",{staticClass:"fas fa-edit"})]),t._v(" "),t._l(t.order.censors,function(e,n){return[n<2?a("div",{key:n},[a("img",{staticClass:"rounded-circle",attrs:{src:e.avatar,alt:"",width:"20",height:"20"}}),t._v("\n          "+t._s(e.username)+" - "+t._s(e.station)+"\n        ")]):t._e()]})],2),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.actions,expression:"actions"}],staticClass:"text-center"},[a("button",{directives:[{name:"show",rawName:"v-show",value:t.actions.includes("approve"),expression:"actions.includes('approve')"}],staticClass:"btn btn-sm btn-outline-ghtk btn-pill w-75 mb-1 wd-btn-approve-contract",on:{click:function(e){return t.$emit("action",{action:"duyet",data:{}})}}},[t._v("Duyệt\n      ")]),t._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:t.actions.includes("reject"),expression:"actions.includes('reject')"}],staticClass:"btn btn-sm btn-outline-danger btn-pill w-75 mb-1",on:{click:function(e){return t.$emit("action",{action:"tu_choi",data:{}})}}},[t._v("Từ chối\n      ")]),t._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:t.allowExplain&&t.actions.includes("explain"),expression:"allowExplain && actions.includes('explain')"}],staticClass:"btn btn-sm btn-outline-danger btn-pill w-75",on:{click:t.explain}},[t._v("Giải trình\n      ")])])])])},[],!1,mr,"data-v-0868148f",null).exports,gr={name:"record-tag",props:{order:{default:[]},editableTag:{default:!0}},methods:{showIcon:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"inline-block";document.getElementById(t).style.display=e},onDeleteTag:function(t){var e=this;return l()(o.a.mark(function a(){var n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!confirm("Bạn có chắc muốn xóa tag "+t.name+" ?")){a.next=7;break}return e.loading=!0,a.next=5,yn.a.detach({record_id:+t.record_id,table_name:t.table_name,hr_tag_id:+t.id});case 5:(n=a.sent).data.success?(e.tags=e.tags.filter(function(e){return+e.id!=+t.id}),e.order.tags=e.tags,Me.a.showMessage(n.data.message||"Bỏ gắn tag thành công!","success")):Me.a.showMessage(n.data.message,"warning");case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),Me.a.showMessage(a.t0.message,"warning");case 12:return a.prev=12,e.loading=!1,a.finish(12);case 15:case"end":return a.stop()}},a,e,[[0,9,12,15]])}))()}}};var vr=function(t){a("+Eac")},_r={name:"ekyc-image-change-row-data",components:{RecordTag:Object(y.a)(gr,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._l(t.order.fixedTags||[],function(e,n){return a("div",{key:"fixed_tag"+n,staticClass:"d-inline-block pr-2 pl-2 mb-1",style:e.style},[t._v(t._s(e.name))])}),t._v(" "),t._l(t.order.tags,function(e,n){return[a("div",{key:n,staticClass:"d-inline-block mr-1 cursor-pointer position-relative",on:{mouseover:function(a){return t.showIcon("iconDeleteTag"+e.record_id+n)},mouseout:function(a){return t.showIcon("iconDeleteTag"+e.record_id+n,"none")},click:function(a){return t.onDeleteTag(e)}}},[a("div",{staticClass:"d-inline-block tag",style:JSON.parse(e.style)},[t._v("\r\n        "+t._s(e.name)+"\r\n      ")]),t._v(" "),a("i",{staticClass:"fa fa-times-circle deleteTag",staticStyle:{display:"none"},attrs:{id:"iconDeleteTag"+e.record_id+n}})])]}),t._v(" "),t.editableTag?a("span",{staticClass:"d-inline-block cursor-pointer text-ghtk ml-2",on:{click:function(e){return t.$emit("tag",{action:"tag",data:t.order,work_category:"ekyc_image_changes"})}}},[a("i",{staticClass:"fas fa-plus"}),t._v(" Tag\r\n          ")]):t._e()],2)},[],!1,vr,"data-v-c662d658",null).exports},data:function(t){return{loading:!1,filters:{page:1,limit:8},page:{page:1,total:0,limit:8}}},props:{order:{},editableTag:{default:!0}},computed:{helper:function(){return this.helper}},mounted:function(){if(this.order.images.length>0){for(var t=[],e=0;e<this.order.images.length;e++)["old_card_front","old_card_back"].includes(this.order.images[e].type)&&!Me.a.isEmpty(this.order.images[e].url)&&t.push(this.order.images[e].url);t.length>0&&this.getBeautifulIdentityCard(t)}},methods:{tagManage:function(t){this.$emit("action",t)},showIcon:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"inline-block";document.getElementById(t).style.display=e},getBeautifulIdentityCard:function(t){var e=this;return l()(o.a.mark(function a(){var n,i,s,r;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,eo.a.getOriginImage({urls:t});case 2:for(n=a.sent,i=n.data,s=[],i.urls.forEach(function(t){return s.push(t.path)}),r=0;r<e.order.images.length;r++)"old_card_front"===e.order.images[r].type&&(e.order.images[r].url=s[0]),"old_card_back"===e.order.images[r].type&&(e.order.images[r].url=s[1]);case 7:case"end":return a.stop()}},a,e)}))()}}};var br=function(t){a("jqoz")},yr=Object(y.a)(_r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"border-right"},[a("div",{},[a("div",{staticClass:"position-relative"},[a("div",{staticClass:"d-flex justify-content-between"},[a("div",{staticClass:"d-flex justify-content-start"},[a("div",{staticClass:"mr-2"},[a("img",{staticClass:"rounded-circle",attrs:{src:t.order.user.image_profile,alt:"",width:"50",height:"50"}})]),t._v(" "),a("div",[a("b",[t._v(t._s(t.order.user.fullname)+" ("+t._s(t.order.user.username)+")")]),t._v(" "),a("br"),t._v(" "),a("span",[t._v(t._s(t.order.user.position_name)+" - "+t._s(t.order.user.work_type)+" - "+t._s(t.order.user.station_name))]),t._v(" "),a("br")])])])]),t._v(" "),a("div",{staticClass:"mt-2"},[a("RecordTag",{attrs:{order:t.order,"editable-tag":t.editableTag},on:{tag:t.tagManage}})],1)])]),t._v(" "),a("td",{staticClass:"border-right"},[a("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"ekyc-change_list-images"},[t._l(t.order.images,function(e,n){return[a("img",{key:n,class:+n!=t.order.images.length-1&&"pr-2",attrs:{src:e.url,alt:e.type||"ekyc image",width:"card"==e.main_type?"25%":"16.6%",height:150}})]})],2)]),t._v(" "),a("td",[t.order.order.can_proceed?a("div",[a("div",[a("div",{staticClass:"text-ghtk cursor-pointer text-center",on:{click:function(e){return t.$emit("action",{action:"censor",data:{}})}}},[t._v("Người xử lý "),a("i",{staticClass:"fas fa-edit"})]),t._v(" "),t._l(t.order.censors,function(e,n){return[n<2?a("div",{key:n},[a("img",{staticClass:"rounded-circle",attrs:{src:e.avatar,alt:"",width:"20",height:"20"}}),t._v("\r\n            "+t._s(e.username)+" - "+t._s(e.station)+"\r\n          ")]):t._e()]})],2),t._v(" "),t.order.order.can_action?a("div",{staticClass:"text-center mt-1"},[a("button",{staticClass:"wd-order-btn-approve-info btn btn-sm btn-outline-ghtk btn-pill w-75 mb-1",on:{click:function(e){return t.$emit("action",{action:"duyet",data:{}})}}},[t._v("Duyệt")]),t._v(" "),a("button",{staticClass:"btn btn-sm btn-outline-danger btn-pill w-75 mb-1",on:{click:function(e){return t.$emit("action",{action:"tu_choi",data:{}})}}},[t._v("Từ chối")])]):t._e()]):t._e()])])},[],!1,br,"data-v-7ef04b9a",null).exports,Cr={name:"report-lost-identity-card",components:{TimeLine:Ce.a},props:{allowExplain:{default:!1},order:{type:Object,default:function(){return{}}},type:{type:Object,default:function(){return{}}},updateVal:{type:Object},editableTag:{default:!0}},data:function(){return{categoryAlias:or.a.categoryAlias,tags:[]}},watch:{order:{immediate:!0,handler:function(t){t&&t.tags&&(this.tags=t.tags)}},updateVal:{immediate:!0,handler:function(t){t&&"tag"===t.field&&(this.tags=t.data)}}},computed:i()({},Object(_.c)({curUser:"userInfo"}),{moment:Ye.a,showAction:function(){return this.order.order.can_action},canAction:function(){return this.order.order.can_action}}),methods:{showIcon:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"inline-block";document.getElementById(t).style.display=e},formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD/MM/YYYY";return Me.a.formatDate(t,e)},upperCaseEachFirstLetter:function(t){return Me.a.upperCaseEachFirstLetter(t)},genCodeOrder:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"BH",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6;return Me.a.genCode(t,e,a,n)}}};var wr=function(t){a("sTwz")},kr=Object(y.a)(Cr,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"border-right"},[a("div",{},[a("div",{staticClass:"position-relative"},[a("div",{staticClass:"d-flex justify-content-between"},[a("div",{staticClass:"d-flex justify-content-start"},[a("div",{staticClass:"mr-2"},[a("img",{staticClass:"rounded-circle",attrs:{src:t.order.user.image_profile,alt:"",width:"50",height:"50"}})]),t._v(" "),a("div",[a("b",[t._v(t._s(t.upperCaseEachFirstLetter(t.order.user.fullname))+" ("+t._s(t.order.user.username)+")")]),t._v(" "),a("br"),t._v(" "),a("span",[t._v(t._s(t.order.user.position_name)+" - "+t._s(t.order.user.work_type)+" - "+t._s(t.order.user.station_name))]),t._v(" "),a("br"),t._v("\n              Mã MP: "+t._s(t.order.user.staff_code)+"\n            ")])]),t._v(" "),a("div",[a("b-dd",{staticClass:"w-100 justify-content-end mb-2",attrs:{left:"",variant:"outline-ghtk","toggle-class":"btn-pill btn-sm",dropdown:"","no-caret":"",menuClass:"border-radius-3 p-0 border-ghtk overflow-hidden"}},[a("span",{attrs:{slot:"button-content"},slot:"button-content"},[t._v("\n                Xem\n              ")]),t._v(" "),a("b-dd-item",{staticClass:"action-view border-bottom-ghtk",on:{click:function(e){return t.$emit("action",{action:"detail_order",data:{}})}}},[t._v("\n                Xem đề xuất "),a("i",{staticClass:"fas fa-chevron-right float-right"})]),t._v(" "),a("b-dd-item",{staticClass:"action-view",on:{click:function(e){return t.$emit("action",{action:"view_profile_cod",data:{}})}}},[t._v("\n                Xem profile "),a("i",{staticClass:"fas fa-chevron-right float-right"})])],1),t._v(" "),a("br"),t._v(" "),a("button",{staticClass:"w-100 btn btn-outline-ghtk btn-sm btn-pill",on:{click:function(e){return t.$emit("action",{action:"phone",data:{user_id:t.order.user.id}})}}},[t._v("Gọi")])],1)])])])]),t._v(" "),a("td",{staticClass:"border-right"},[a("div",{staticClass:"mh-10re overflow-auto pt-1"},[a("TimeLine",{attrs:{logs:t.order.logs,itemStyle:{},"time-field":"created","message-field":"message",timeFormat:t.formatDate}})],1),t._v(" "),a("div",{staticClass:"desc",staticStyle:{color:"#000 !important"}},[a("b",[t._v("Hạn bổ sung:")]),t._v(" "+t._s(t.formatDate(t.order.order.deadline,"DD-MM-YYYY"))+"\n    ")])]),t._v(" "),a("td",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showAction,expression:"showAction"}]},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.canAction,expression:"canAction"}],staticClass:"text-center mt-1"},[a("button",{staticClass:"wd-order-btn-approve-info btn btn-sm btn-outline-ghtk btn-pill w-75 mb-1",on:{click:function(e){return t.$emit("action",{action:"duyet",data:{}})}}},[t._v("Duyệt")]),t._v(" "),a("button",{staticClass:"btn btn-sm btn-outline-danger btn-pill w-75 mb-1",on:{click:function(e){return t.$emit("action",{action:"tu_choi",data:{}})}}},[t._v("Từ chối")])])])])])},[],!1,wr,"data-v-97719ebe",null).exports,xr={name:"line-item",props:{message:{},user:{},time:{},active:{type:Boolean,default:!1},headStyle:{},tailStyle:{},timeStyle:{},userStyle:{},contentStyle:{},checkedStyle:{},checked:{type:Boolean,default:!1}}};var Sr=function(t){a("YRij")},Mr=Object(y.a)(xr,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"line-item"},[a("div",{staticClass:"line-item-head",class:t.active&&"active",style:t.headStyle},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.checked,expression:"checked"}],staticClass:"position-absolute item-checked",style:t.checkedStyle})]),t._v(" "),a("div",{staticClass:"line-item-tail",style:t.tailStyle}),t._v(" "),a("div",{staticClass:"line-item-content",style:t.contentStyle},[a("span",{staticClass:"line-time",style:t.timeStyle},[t._v(t._s(t.time))]),t._v(" "),a("span",{staticClass:"line-user",style:t.userStyle},[t._v(t._s(t.user))]),t._v(" "),a("span",{domProps:{innerHTML:t._s(t.message)}})]),t._v(" "),t._t("line-item-append")],2)},[],!1,Sr,"data-v-2c0ce98e",null).exports,Tr={name:"log-line",components:{LineItem:Mr},props:{logs:{},timeField:{default:"created"},userField:{default:"created_by"},contentStyle:{default:function(t){return{"padding-left":"0.8rem"}}},headStyle:{default:function(t){return{width:"10px",height:"10px"}}},tailStyle:{default:function(t){return{left:"4px",height:"calc(100% - 0.25rem)",top:"0.8rem"}}}},data:function(t){return{}},methods:{formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD-MM-YYYY HH:mm:ss";return Me.a.formatDate(t,e)},formatUser:function(t){return t&&t[this.userField]&&t[this.userField].username?1!=+t[this.userField].id?t[this.userField].username+(t[this.userField].position_name?" - "+t[this.userField].position_name:""):t[this.userField].username:""}}};var Dr=function(t){a("yq5M")},Ir=Object(y.a)(Tr,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"log-line pb-2"},t._l(t.logs,function(e,n){return a("LineItem",{key:n,staticClass:"line-item-onboard",attrs:{active:!0,message:e.message,time:t.formatDate(e[t.timeField]),user:t.formatUser(e),contentStyle:t.contentStyle,headStyle:t.headStyle,tailStyle:t.tailStyle}})}),1)},[],!1,Dr,"data-v-76c6ab9c",null).exports,Pr={name:"order-row-data-v2",components:{LogLine:Ir},props:{profileWallet:{type:Object,default:function(t){return{}}},tableName:{type:String},updateVal:{type:Object},editableTag:{default:!0}},data:function(t){return{tags:[]}},watch:{profileWallet:{immediate:!0,handler:function(t){t&&t.tags&&(this.tags=t.tags)}},updateVal:{immediate:!0,handler:function(t){t&&"tag"===t.field&&(this.tags=t.data)}}},computed:{},methods:{onDeleteTag:function(t){var e=this;return l()(o.a.mark(function a(){var n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!confirm("Bạn có chắc muốn xóa tag "+t.name+" ?")){a.next=7;break}return e.loading=!0,a.next=5,yn.a.detach({record_id:+t.record_id,table_name:t.table_name,hr_tag_id:+t.id});case 5:(n=a.sent).data.success?(e.tags=e.tags.filter(function(e){return+e.id!=+t.id}),e.profileWallet.tags=e.tags,Me.a.showMessage(n.data.message||"Bỏ gắn tag thành công!","success")):Me.a.showMessage(n.data.message,"warning");case 7:a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),Me.a.showMessage(a.t0.message,"warning");case 13:return a.prev=13,e.loading=!1,a.finish(13);case 16:case"end":return a.stop()}},a,e,[[0,9,13,16]])}))()},showIcon:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"inline-block";document.getElementById(t).style.display=e},formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD/MM/YYYY";return Me.a.formatDate(t,e)},upperCaseEachFirstLetter:function(t){return Me.a.upperCaseEachFirstLetter(t)}}};var Er=function(t){a("a8aA")},Lr=Object(y.a)(Pr,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"border-right"},[a("div",{},[a("div",{staticClass:"position-relative"},[a("div",{staticClass:"d-flex justify-content-between"},[a("div",{staticClass:"d-flex justify-content-start"},[a("div",{staticClass:"mr-2"},[a("img",{staticClass:"rounded-circle",attrs:{src:t.profileWallet.avatar,alt:"",width:"50",height:"50"}})]),t._v(" "),a("div",[a("b",[t._v(t._s(t.upperCaseEachFirstLetter(t.profileWallet.fullname))+" ("+t._s(t.profileWallet.username)+")")]),t._v(" "),a("br"),t._v(" "),a("span",[t._v(t._s(t.profileWallet.position_name)+" - "+t._s(t.profileWallet.user_work_type_name)+" - "+t._s(t.profileWallet.station_name))]),t._v(" "),a("br")])]),t._v(" "),a("div",[a("button",{staticClass:"w-100 btn btn-outline-ghtk btn-sm btn-pill mb-2",on:{click:function(e){return t.$emit("action",{action:"view_profile_cod",data:{group_id:t.profileWallet.group_id,master_profile_id:t.profileWallet.id,user_id:t.profileWallet.user_id}})}}},[t._v("\n              Xem\n            ")]),t._v(" "),a("br"),t._v(" "),a("button",{staticClass:"w-100 btn btn-outline-ghtk btn-sm btn-pill",on:{click:function(e){return t.$emit("action",{action:"phone",data:{user_id:t.profileWallet.user_id}})}}},[t._v("Gọi")])])])]),t._v(" "),a("div",{staticClass:"mt-2"},[t._l(t.profileWallet.fixedTags||[],function(e,n){return a("div",{key:"fixed_tag"+n,staticClass:"d-inline-block pr-2 pl-2 mb-1",style:e.style},[t._v("\n          "+t._s(e.name)+"\n        ")])}),t._v(" "),t._l(t.tags,function(e,n){return[a("div",{key:n,staticClass:"d-inline-block mr-1 cursor-pointer position-relative",on:{mouseover:function(a){return t.showIcon("iconDeleteTag"+e.record_id+n)},mouseout:function(a){return t.showIcon("iconDeleteTag"+e.record_id+n,"none")},click:function(a){return t.onDeleteTag(e)}}},[a("div",{staticClass:"d-inline-block tag",style:JSON.parse(e.style)},[t._v("\n              "+t._s(e.name)+"\n            ")]),t._v(" "),a("i",{staticClass:"fa fa-times-circle deleteTag",attrs:{id:"iconDeleteTag"+e.record_id+n}})])]}),t._v(" "),t.editableTag?a("span",{staticClass:"d-inline-block cursor-pointer text-ghtk ml-2",on:{click:function(e){return t.$emit("action",{action:"tag",work_category:t.profileWallet.work_category,work_type:t.profileWallet.work_type,data:t.profileWallet})}}},[a("i",{staticClass:"fas fa-plus"}),t._v(" Tag\n        ")]):t._e()],2)])]),t._v(" "),a("td",{staticClass:"border-right"},[a("div",{staticClass:"mh-10re overflow-auto pt-1"},[a("LogLine",{attrs:{logs:t.profileWallet.log_wallet}})],1)]),t._v(" "),a("td",[a("div",[a("div",[a("div",{staticClass:"text-ghtk cursor-pointer text-center",on:{click:function(e){return t.$emit("action",{action:"handler",data:{handlers:t.profileWallet.handlers,master_profile_id:t.profileWallet.master_profile_id}})}}},[t._v("\n          Người xử lý "),a("i",{staticClass:"fas fa-edit"})]),t._v(" "),t._l(t.profileWallet.handlers||[],function(e,n){return[n<2&&e.handler_info?a("div",{key:n},[a("img",{staticClass:"rounded-circle",attrs:{src:e.handler_info.avatar,alt:"",width:"20",height:"20"}}),t._v("\n            "+t._s(e.handler_info.username)+" - "+t._s(e.handler_info.station_name)+"\n          ")]):t._e()]})],2),t._v(" "),a("div",{staticClass:"text-center mt-1"},[a("button",{staticClass:"btn btn-sm btn-outline-ghtk btn-pill w-75 mb-1",on:{click:function(e){return t.$emit("action",{action:"chat",data:{user_id:t.profileWallet.user_id}})}}},[t._v("\n          Chat\n        ")]),t._v(" "),a("button",{staticClass:"btn btn-sm btn-outline-ghtk btn-pill w-75",on:{click:function(e){return t.$emit("action",{action:"note",data:{master_profile_id:t.profileWallet.master_profile_id,master_profile_extend_id:t.profileWallet.master_profile_extend_id}})}}},[t._v("\n          Ghi chú\n        ")])])])])])},[],!1,Er,"data-v-df34377a",null).exports,Ar=Object(y.a)({name:"modal-note",props:{id:{default:"modal-note"},title:{default:"Ghi chú"},preNote:{default:null}},data:function(t){return{note:null}},watch:{preNote:{immediate:!0,handler:function(){this.preNote&&(this.note=this.preNote)}}},methods:{close:function(){this.$bvModal.hide(this.id)},saveNote:function(){this.$emit("save",this.note)}}},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{id:t.id,title:t.title,centered:"","title-class":"w-100","header-class":"text-center","hide-footer":""},on:{shown:function(e){t.note=null}}},[a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.note,expression:"note",modifiers:{trim:!0}}],staticClass:"rounded form-control",attrs:{name:"note",rows:"4",placeholder:"Nhập ghi chú"},domProps:{value:t.note},on:{input:function(e){e.target.composing||(t.note=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),a("div",{staticClass:"d-flex justify-content-between mt-2"},[a("button",{staticClass:"btn rounded btn-secondary",on:{click:t.close}},[t._v("Đóng")]),t._v(" "),a("button",{staticClass:"btn btn-ghtk rounded text-white lh-0-8",on:{click:t.saveNote}},[t._v("Lưu")])])])},[],!1,null,null,null).exports,Or=function(t){return Pe.a.post("ErpStaffWorkHandler/updateHandler",t)},Nr={name:"censor-v3",props:{smallView:{default:!1},censorData:{}},components:{SelectUser:Ie.a},data:function(t){return{loading:!1,curCensor:{},resetSelectUser:null}},methods:{gotoGroupChat:function(t){var e=this;t&&t.id&&(this.loading=!0,t.channel_id?window.open("https://ghtk.me/channel/internal/"+t.channel_id,"_blank"):Se.a.createDirectChat({userId:t.id}).then(function(t){if(t.data.success){var e=t.data.data.channel_id;window.open("https://ghtk.me/channel/internal/"+e,"_blank")}else Me.a.showMessage(t.data.message||"Tạo direct chat thất bại !")}).catch(function(t){Me.a.showMessage("Có lỗi xảy ra, vui lòng thử lại sau !"),console.log(t)}).finally(function(t){e.loading=!1}))},updateCensor:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Me.a.isEmpty(t)||"add"!==t&&"delete"!==t||Me.a.isEmpty(this.curCensor))return Me.a.showMessage("Dữ liệu người xử lý không hợp lệ, Vui lòng chọn lại!");var n={action:this.censorData.action,master_profile_id:this.censorData.masterProfileId};"add"===t&&this.curCensor.id&&(n.handler_id=this.curCensor.id),"delete"===t&&a&&(n.id=a),this.loading=!0,Or({handler:n,type:t}).then(function(n){if(!n.data.success)return Me.a.showMessage(n.data.message||"Không cập nhật được người duyệt, vui lòng thử lại sau !","warning");Me.a.showMessage(n.data.message||("add"===t?"Thêm người duyệt thành công":"Xóa người duyệt thành công"),"success"),"add"===t&&n.data.data&&(e.censorData.censors.push(n.data.data),e.$emit("action",{action:"add_censor",data:{censor:n.data.data}})),"delete"===t&&(e.censorData.censors=e.censorData.censors.filter(function(t){return+t.id!=+a}),e.$emit("action",{action:"delete_censor",data:{id:a}})),e.curCensor=null}).catch(function(t){console.log(t),Me.a.showMessage("Không cập nhật được người duyệt, vui lòng thử lại sau !","warning")}).finally(function(t){e.loading=!1,e.resetSelectUser=!e.resetSelectUser})},updateNewCensor:function(t,e){!e||"add"!==e&&"delete"!==e||("add"===e&&(this.curCensor=t),"delete"===e&&(this.curCensor=null))},deleteCensor:function(t){this.curCensor=t,this.updateCensor("delete",t.id)}}};var Rr=function(t){a("U8sS")},Ur=Object(y.a)(Nr,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"position-relative"},[t._l(t.censorData.censors,function(e,n){return[e.handler_info?a("div",{key:n,staticClass:"d-flex justify-content-between align-self-center ml-1 mb-3"},[a("div",{staticClass:"align-items-center d-flex"},[a("img",{staticClass:"p-0 censor-avatar mr-2",attrs:{src:e.handler_info.avatar,alt:"Avatar"}}),t._v(" "),a("div",{},[a("span",{staticClass:"pt-1"},[t._v(t._s(e.handler_info.fullname||"")+" - "+t._s(e.handler_info.username||"")+" -\n            "+t._s(e.handler_info.position_name||""))]),t._v(" "),a("i",{staticClass:"ml-1 fa fa-comment-dots cursor-pointer",staticStyle:{color:"#069255"},attrs:{"aria-hidden":"true"},on:{click:function(a){return t.gotoGroupChat(e)}}})])]),t._v(" "),a("div",{},[a("b-btn",{staticClass:"btn-outline-danger btn btn-sm btn-delete",on:{click:function(a){return t.deleteCensor(e)}}},[t._v("Xóa\n        ")])],1)]):t._e()]}),t._v(" "),a("div",{staticClass:"d-flex justify-content-between border-0"},[a("SelectUser",{class:(t.smallView?"font-12":"font-13")+" multiselect-ghtk multiselect-no-horizontal col-sm-10 pl-0",attrs:{placeholder:"Nhập người xử lý",reset:t.resetSelectUser},on:{select:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return t.updateNewCensor.apply(void 0,n.concat(["add"]))},remove:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return t.updateNewCensor.apply(void 0,n.concat(["delete"]))}}}),t._v(" "),a("div",{staticClass:"col-sm-2 text-right p-0"},[a("b-btn",{staticClass:"btn-ghtk btn btn-delete",on:{click:function(e){return t.updateCensor("add")}}},[t._v("Thêm")])],1)],1)],2)},[],!1,Rr,null,null).exports,$r={name:"modal-explanation",props:{id:{default:"modal-explanation"},title:{default:"Giải trình"},type:{default:null},record:{default:null}},data:function(t){return{reason:null,config:{full_name:{recruitment:"Ứng viên:",staff_work:"Nhân viên:",onboard:"Ứng viên:",off_work:"Nhân viên:"},status:{recruitment:"Trạng thái hiện tại:",staff_work:"Vấn đề:",onboard:"Chưa xong:",off_work:"Chưa xong:"},deadline:{recruitment:"Hạn xử lý:",staff_work:"Hạn xử lý:",onboard:"Hẹn nhận việc:",off_work:"Ngày bắt đầu nghỉ:"}}}},computed:{helper:function(){return Me.a}},methods:{close:function(){this.$bvModal.hide(this.id)},resetData:function(){this.reason=null}}};var Hr=function(t){a("Gf1z")},Br=Object(y.a)($r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{id:t.id,title:t.title,centered:"","title-class":"w-100","header-class":"text-center","hide-footer":""},on:{shown:t.resetData}},[a("p",{staticClass:"text-black mb-0"},[t._v(t._s(t.config.full_name[t.type])+" "+t._s(t.record.full_name))]),t._v(" "),a("p",{staticClass:"text-black mb-0"},[t._v(t._s(t.config.status[t.type])+" "+t._s(t.record.status))]),t._v(" "),a("p",{staticClass:"text-black mb-0"},[t._v(t._s(t.config.deadline[t.type])+" "+t._s(t.helper.formatDate(t.record.deadline,"DD/MM/YYYY")))]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.reason,expression:"reason",modifiers:{trim:!0}}],staticClass:"rounded form-control mt-4",attrs:{name:"reason",rows:"4",placeholder:"Nhập lý do xử lý muộn"},domProps:{value:t.reason},on:{input:function(e){e.target.composing||(t.reason=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),a("div",{staticClass:"text-center mt-4"},[a("button",{staticClass:"btn btn-ghtk rounded text-white lh-0-8 font-weight-500",on:{click:function(e){return t.$emit("confirmExplain",t.reason)}}},[t._v("Xác nhận")])])])},[],!1,Hr,"data-v-5ff1c686",null).exports,jr=a("qK+J"),Fr=a.n(jr),qr=a("/yc8"),Yr=function(t){return ao.a.get("/AdHrTeams/getTeamOption",{params:t})},zr=function(t){return Pe.a.post("/ErpStaffShift/lockShift",t)},Gr=function(t){return Pe.a.post("/ErpStaffShift/explain",t)},Kr=function(t){return Pe.a.get("/ErpStaffShift/getNumStaffWorkOnDay",{params:t})},Vr=function(){return Pe.a.get("/ErpStaffShift/getClosingShiftBoardPermission")},Qr=function(t){function e(){return Un()(this,e),Hn()(this,(e.__proto__||Nn()(e)).apply(this,arguments))}return jn()(e,t),e}(Fn.a);Qr.works={lost_identity_card:{alias:"lost_identity_card",dashboard_type:"common",table_data_type:"common",type:"staff_identity",desc:"Báo mất/báo làm lại CMND/CCCD",dom_id:"wd-btn-statistics-report-lost-card"},ekyc_image_changes:{alias:"ekyc_image_changes",dashboard_type:"common",table_data_type:"image_change",type:"ekyc_image_changes",desc:"Chụp lại ảnh xác thực",dom_id:"wd-btn-statistics-ekyc-image-change"},sos_me:{alias:"sos_me",dashboard_type:"child_frame",path_name:"/sos",type:"sos_me",desc:"SOS.ME",dom_id:"wd-btn-statistics-sos-me"},user_info_order:{alias:"user_info_order",dashboard_type:"common",table_data_type:"common",type:"hr_order",desc:"Cập nhật thông tin",dom_id:"wd-btn-statistics-user-info-order"},new_contract_order:{alias:"new_contract_order",dashboard_type:"common",table_data_type:"common",type:"contract",desc:"Ký mới",dom_id:"wd-btn-statistics-new-contract-order"},continue_contract_order:{alias:"continue_contract_order",dashboard_type:"common",table_data_type:"common",type:"contract",desc:"Tái ký",dom_id:"wd-btn-statistics-continue-contract-order"},appendix_contract_order:{alias:"appendix_contract_order",dashboard_type:"common",table_data_type:"common",type:"contract",desc:"Phụ lục HĐ",dom_id:"wd-btn-statistics-appendix-contract-order"},need_active_wallet:{alias:"need_active_wallet",dashboard_type:"common",table_data_type:"common",type:"wallet",desc:"Chưa kích hoạt ví",dom_id:"wd-btn-statistics-need-active-wallet"},insurance_order:{alias:"insurance_order",dashboard_type:"common",table_data_type:"common",type:"hr_order",desc:"Bảo hiểm",dom_id:"wd-btn-statistics-insurance-order"},profile_documents:{alias:"profile_documents",dashboard_type:"profile_documents",table_data_type:"profile_documents",type:"profile_documents",desc:"Hồ sơ",dom_id:"wd-btn-statistics-profile-documents"},profile_car_driver:{alias:"profile_car_driver",dashboard_type:"profile_car_driver",table_data_type:"profile_car_driver",type:"profile_car_driver",desc:"Hồ sơ tài xế xe thuê",dom_id:"wd-btn-statistics-profile-documents",path_name:"/adm/iframe/profile-rent-driver/list"},rejected:{alias:"rejected",type:"rejected",desc:"Từ chối",dashboard_type:"common",table_data_type:"common",dom_id:"wd-btn-statistics-rejected"},tax:{alias:"tax",type:"tax",desc:"Thuế",dashboard_type:"tax",table_data_type:"tax",dom_id:"wd-btn-statistics-tax"},union:{alias:"union",type:"union",desc:"Công đoàn",dashboard_type:"union",table_data_type:"union",dom_id:"wd-btn-statistics-union"}},Qr.tableDataHeader={common:{header1:"Nhân viên",header2:"Chi tiết log",header3:"Thao tác"},image_change:{header1:"Nhân viên",header2:"Thông tin xác thực ảnh chụp lại",header3:"Thao tác"}},Qr.workHasDeadline=["staff_order_contract","staff_order","lost_identity_card"],Qr.workMapTable={checkin_not_approve:"checkin_logs",user_info_order:"sgw_hr_orders",new_contract_order:"sgw_hr_orders",continue_contract_order:"sgw_hr_orders",appendix_contract_order:"sgw_hr_orders",need_active_wallet:"master_profile_extends",insurance_order:"sgw_hr_orders",profile_documents:"sgw_documents",ekyc_image_changes:"sgw_hr_orders",lost_identity_card:"sgw_hr_orders",rejected:"",tax:"",union:""},Qr.workMapCategory={checkin_not_approve:"checkin",user_info_order:"staff_order",new_contract_order:"staff_order_contract",continue_contract_order:"staff_order_contract",appendix_contract_order:"staff_order_contract",need_active_wallet:"wallet",insurance_order:"staff_order",profile_documents:"",ekyc_image_changes:"staff_ekyc",lost_identity_card:"staff_identity",rejected:"staff_order,checkin",tax:"",union:""},Qr.workMapFilter={checkin_not_approve:{checkin:{start_month:!0,checkin_status:"pending,rejected_by_autojob,cancel",checkin_type:"normal,round_robin"}},user_info_order:{staff_order:{type:"37, 38",start_month:0,censorLogin:1}},new_contract_order:{staff_order_contract:{subType:"new"}},continue_contract_order:{staff_order_contract:{subType:"resign"}},appendix_contract_order:{staff_order_contract:{subType:"appendix"}},staff_order_contract:{staff_order_contract:{subType:"pending"}},need_active_wallet:{wallet:{is_force_wallet:1,is_active_wallet:0}},insurance_order:{staff_order:{category:"insurance",start_month:0,censorLogin:1}},staff_order:{staff_order:{or_type:"category,alias",category:"insurance",alias:"change_info",start_month:0}},profile_documents:{},ekyc_image_changes:{},lost_identity_card:{staff_identity:{alias:"lost_identity_card",start_month:0}},lost_identity_card_hr:{staff_identity:{status:"da_duyet_supervisor",alias:"lost_identity_card",start_month:0}},rejected:{staff_order:{or_type:"category,alias",category:"insurance",alias:"new_contract,change_info,new_appendix",modified_from:"start_month",status:"tu_choi"}},tax:{},union:{}};var Xr=Qr,Wr={name:"table-data",components:{InfiniteLoading:Fr.a,EkycImageChangeRowData:yr,ReportLostIdentityCard:kr,ModalUpdateCheckin:Xo,DetailWorkShift:ar,CheckinLogDetailV2:sr,OrderRowDataV2:cr,Censor:we.a,CensorV2:hr,HrTagModal:vi,ContractLogDetail:fr,UpdateOrder:ye.default,ProfileWalletRowData:Lr,ModalNote:Ar,CensorV3:Ur,ModalExplanation:Br,ModalCheckBeforeApproveContract:Ge.a,SensitiveLabel:Eo.a},props:{infinityMode:{default:!1},allowExplain:{default:!1},curWork:{type:String},filter:{type:Object,default:function(t){return{}}},paging:{type:Object,default:function(t){return{}}},getWorkTrigger:{default:!1},overdue:{default:!1}},data:function(t){return{loading:!1,listData:[],works:Xr.works,workMapTable:Xr.workMapTable,tableDataHeader:Xr.tableDataHeader,curData:{data:null,workCategory:null,workType:null,recordId:null},orderData:{curOrderId:null,duty:[],rejectReason:null,approve_report_wrong_identity:!1},checkinData:{curCheckin:null,curUser:null,curAction:null},walletData:{curProfile:null,curProfileExtend:null,handlerData:{}},userPhoneNumber:[],recordUpdateVal:{type:"",data:null},codGroupIds:ze.a.codGroupIds,tagData:{tableName:null,record:{},attach:!0,editTag:!0,openModalHrTag:!1,tags:[]},workShift:{from:null,to:null},stateLoad:null,explainData:{},isShowModalCheckBeforeApproveContract:!1,dataCheckBeforeApproveContract:null}},created:function(){this.infinityMode||this.getTypeWork()},watch:{getWorkTrigger:function(){this.listData=[],this.infinityMode&&this.stateLoad?this.stateLoad.reset():this.getTypeWork()},curWork:function(t){this.workMapTable[t]&&this.getTags(),"rejected"===t.alias?this.tagData.editTag=!1:this.tagData.editTag=!0},loading:function(t){this.$emit("load",{loading:t,total:this.paging.totalRow})}},methods:{getTypeWork:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=i()({},this.filter);switch(e.per_page=this.paging.perPage,e.current_page=this.paging.curPage,Me.a.isEmpty(e.deadlineOverdue)||(e.deadline=e.deadlineOverdue,delete e.deadlineOverdue),this.curWork){case"new_contract_order":case"continue_contract_order":e.limit=e.per_page,e.page=e.current_page,e.employee&&(e.censorLogin=0);break;case"insurance_order":case"user_info_order":e.employee&&(e.censorLogin=0)}t&&(this.stateLoad=t),"ekyc_image_changes"===this.curWork?this.getStatisticEkycImageChange(e):this.getDataWork(e)},getStatisticEkycImageChange:function(t){var e=this;return l()(o.a.mark(function a(){var n,i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e.loading=!0,a.next=4,Se.a.getEkycImageChanges(t);case 4:n=a.sent,(i=n.data).success?(e.listData=i.data.imageChanges||[],e.listData.map(function(t){t.fixedTags=[],t.fixedTags.push(or.a.getTagByOrderType(t.order.order_type_id))}),e.paging.totalRow=i.data.total||0):(Me.a.showMessage(i.message||"Có lỗi khi lấy thông tin công việc !"),console.log(i.message||"Có lỗi khi lấy thông tin công việc !")),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:return a.prev=12,e.loading=!1,a.finish(12);case 15:case"end":return a.stop()}},a,e,[[0,9,12,15]])}))()},getDataWork:function(t){var e=this;this.loading=!0,qr.a.getDataWork(t).then(function(t){if(t.data.success){var a;if(t.data.data.map(function(t){t.work_type&&("checkin_not_approve"===t.work_type&&(t.fixedTags=[],t.fixedTags.push({value:t.work_type,name:"Công chưa duyệt",style:{"background-color":"#D98840",color:"white"}})),"need_active_wallet"===t.work_type&&(t.fixedTags=[],t.fixedTags.push({value:t.work_type,name:"Chưa kích hoạt ví",style:{"background-color":"#acabab",color:"white"}})),"user_info_order"===t.work_type&&(t.order.fixedTags=[],"modify_ekyc_info"===t.type.alias?t.order.fixedTags.push({value:t.work_type,name:"Cập nhật eKYC",style:{"background-color":"#d9534f",color:"white"}}):t.order.fixedTags.push({value:t.work_type,name:"Cập nhật thông tin",style:{"background-color":"#73AC83",color:"white"}})),"insurance_order"===t.work_type&&(t.order.fixedTags=[],t.order.fixedTags.push({value:t.work_type,name:"Bảo hiểm",style:{"background-color":"#70A6E4",color:"white"}})),"new_contract_order"===t.work_type&&(t.fixedTags=[],t.fixedTags.push({value:t.work_type,name:"Ký mới",style:{"background-color":"#DDC52F",color:"white"}})),"continue_contract_order"===t.work_type&&(t.fixedTags=[],t.fixedTags.push({value:t.work_type,name:"Tái ký",style:{"background-color":"#DDC52F",color:"white"}})),"appendix_contract_order"===t.work_type&&(t.fixedTags=[],t.fixedTags.push({value:t.work_type,name:"Phụ lục HĐ",style:{"background-color":"#DDC52F",color:"white"}})),"new_contract_order"===t.work_type&&(t.fixedTags=[],t.fixedTags.push({value:t.work_type,name:"Ký mới",style:{"background-color":"#DDC52F",color:"white"}})),"continue_contract_order"===t.work_type&&(t.fixedTags=[],t.fixedTags.push({value:t.work_type,name:"Tái ký",style:{"background-color":"#DDC52F",color:"white"}})))}),e.infinityMode)if(t.data.data.length)e.stateLoad&&e.stateLoad.loaded(),e.paging.curPage++,(a=e.listData).push.apply(a,d()(t.data.data)),Me.a.isEmpty(e.filter.teamId)||e.sortListData();else e.stateLoad&&e.stateLoad.complete();else e.listData=t.data.data,e.overdue&&e.$emit("action",{action:"updateOverdueCount",data:t.data.total});e.paging.totalRow=t.data.total||0,t.data.duty&&(e.orderData.duty=t.data.duty)}else Me.a.showMessage(t.data.message||"Có lỗi khi lấy thông tin công việc !"),console.log(t.data.message||"Có lỗi khi lấy thông tin công việc !")}).catch(function(t){console.log(t)}).finally(function(t){e.loading=!1})},sortListData:function(){for(var t=[],e=[],a=0;a<this.listData.length;a++)this.listData[a].explained?t.push(this.listData[a]):e.push(this.listData[a]);for(var n=0;n<t.length;n++)t[n].lastExplainedLog=this.getLastExplainedLog(t[n].logs);t.sort(function(t,e){return t.lastExplainedLog.created>e.lastExplainedLog.created?1:t.lastExplainedLog.created<e.lastExplainedLog.created?-1:0}),this.listData=e.concat(t)},getLastExplainedLog:function(t){if(Me.a.isEmpty(t))return null;for(var e=t.length,a=null,n=0;n<e;n++)"explain"!==t[n].type&&"explainNeedResolveWork"!==t[n].action||!(null===a||a.created<t[n].created)||(a=t[n]);return a},action:function(t,e,a){if(t.order&&t.order.status&&t.type&&t.type.alias&&t.order.status===or.a.PENDING_STATUS&&t.approve_report_wrong_identity&&"modify_ekyc_info"===t.type.alias&&(this.orderData.approve_report_wrong_identity=!0),this.curData.curIdx=a,this.curData.data=t,this.curData.data){if(this.curData.workCategory=t.work_category||e.work_category||e.data.work_category,this.curData.workType=t.work_type||e.work_type||e.data.work_type,["staff_order","staff_order_contract","staff_identity"].includes(this.curData.workCategory)?(["continue_contract_order","new_contract_order","appendix_contract_order"].includes(this.curData.workType)?this.curData.data.id=t.order_id||null:this.curData.data=t.order,this.orderData.curOrderId=this.curData.data.id,this.curData.recordId=this.curData.data.id):"checkin"===this.curData.workCategory?this.curData.recordId=e.data.checkinId||null:"ekyc_image_changes"===this.curData.data.work_category&&(this.orderData.curOrderId=this.curData.data.order.id,this.curData.data.id=t.order.id||null),"censor"===e.action&&this.$bvModal.show("modal-edit-censor-staff-work"),"handler"===e.action&&(this.$bvModal.show("modal-edit-handler"),this.walletData.handlerData={action:"active_wallet",masterProfileId:e.data.master_profile_id,censors:e.data.handlers||[]}),"duyet"===e.action&&this.updateStatus(this.curData.data,"duyet"),"tu_choi"===e.action&&this.$bvModal.show("reject-order-reason-modal"),"phone"===e.action&&this.handleToggleModalPhoneNumber(e.data.user_id),"chat"===e.action&&this.gotoGroupChat({id:e.data.user_id}),"note"===e.action&&(this.walletData.curProfile=e.data.master_profile_id,this.walletData.curProfileExtend=e.data.master_profile_extend_id,this.$bvModal.show("modal-note")),"view_profile_cod"===e.action&&ze.a.redirectProfile(e.data.group_id||this.curData.order.profile_info.group_id,e.data.user_id||this.curData.order.profile_info.user_id,e.data.master_profile_id||this.curData.order.profile_info.id),"tag"===e.action&&(e.work_type||(e.work_type=this.curData.workType||null),e.work_category||(e.work_category=this.curData.workCategory||null),this.handleToggleModalHrTag(e)),"detail_order"===e.action&&this.$bvModal.show("modal-update-staff-order"),"action_checkin"===e.action)if(this.checkinData.curUser=+e.data.userId,"show_calendar"===e.data.action){var n=this.getMonthSalary();this.workShift.from=n.from,this.workShift.to=n.to,this.$bvModal.show("modal-checkin-calendar")}else this.checkinData.curCheckin=e.data.checkinId||null,this.checkinData.curAction=e.data.action,this.$bvModal.show("modal-update-checkin");"explain"===e.action&&(this.explainData=e.data,this.explainData.action="explainNeedResolveWork",this.explainData.status=this.works[this.curData.workType||e.work_type].desc,this.curData.recordId=this.explainData.ref_id,this.$bvModal.show("modal-expain-staff-work"))}},explain:function(t){var e=this;this.explainData.content=t,this.$startLoading(),Gr(this.explainData).then(function(t){t.data.success?(e.$bvModal.hide("modal-expain-staff-work"),e.updateDataAfterAction("log",t.data.data),e.updateDataAfterAction("explained"),e.sortListData(),e.getNumStaffWorkOnDay(),Me.a.showMessage(t.data.message||"Giải trình thành công !","success")):Me.a.showMessage(t.data.message||"Giải trình thất bại !")}).catch(function(t){Me.a.showMessage("Đã có lỗi xảy ra !"),console.log(t)}).finally(function(t){e.$stopLoading()})},getNumStaffWorkOnDay:function(){var t=this;this.filter.teamId&&(this.$emit("load",{loading:!0}),Kr({team_id:this.filter.teamId}).then(function(e){e.data.success?t.paging.totalRow=e.data.total:Me.a.showMessage(e.data.message||"Có lỗi khi lấy số công việc cần xử lý !")}).catch(function(t){Me.a.showMessage("Có lỗi khi lấy số công việc cần xử lý !"),console.log(t)}).finally(function(e){t.$emit("load",{loading:!1,total:t.paging.totalRow})}))},actionUpdateRecord:function(t){"attachTag"===t.action&&this.tagData.record.tags&&t.data&&(this.tagData.record.tags.push(t.data),this.recordUpdateVal.type="tag",this.recordUpdateVal.data=this.tagData.record),"closeHrTag"===t.action&&(this.tagData.openModalHrTag=!1)},updateHandler:function(){this.curData.data.handlers=this.walletData.handlerData.censors||[]},updateStatus:function(t,e){var a=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("tu_choi"!==e||this.orderData.rejectReason){var i={id:t.id,action:e,reason:this.orderData.rejectReason,isContinueApprove:n};Se.a.updateStatus(i).then(function(i){var s;i.data.success?(Me.a.showMessage(i.data.message||"Cập nhật trạng thái thành công !","success"),t.censors=i.data.censors,t.status=i.data.update_status,t&&t.logs&&(s=t.logs).unshift.apply(s,d()(i.data.data)),"tu_choi"===e?a.$bvModal.hide("reject-order-reason-modal"):"duyet"===e&&n&&a.toggleModalCheckBeforeApproveContract(!1),["duyet","tu_choi"].includes(e)&&(a.infinityMode?(a.getNumStaffWorkOnDay(),a.updateDataAfterAction("remove")):a.getTypeWork(),t.is_overdue&&a.$emit("action",{action:"totalOverdue",data:-1}))):"duyet"===e&&i.data.data&&!1===i.data.data.is_valid?(a.dataCheckBeforeApproveContract=i.data.data.data_check,a.toggleModalCheckBeforeApproveContract(!0)):Me.a.showMessage(i.data.message||"Không thể chuyển trạng thái của đề xuất !","warning")}).catch(function(t){console.log(t),Me.a.showMessage("Đã có lỗi xảy ra, không thay đổi được trạng thái đề xuất !","warning")}).finally(function(t){a.resetUpdateStatusData()})}else alert("Vui lòng nhập lý do từ chối !")},changeStatusOrderOk:function(t){var e,a;"staff_order"===this.curData.workCategory&&(this.curData.data.censors=t.censors||null,this.curData.data.status=t.update_status,t.data&&(e=this.curData.data.logs).unshift.apply(e,d()(t.data)));"staff_order_contract"===this.curData.workCategory&&(this.curData.data.censors=t.censors||null,this.curData.data.status=t.update_status,t.data&&(a=this.curData.data.logs).unshift.apply(a,d()(t.data)));this.infinityMode&&["da_duyet","tu_choi","hoan_thanh","da_huy"].includes(t.update_status)&&this.updateDataAfterAction("remove")},resetUpdateStatusData:function(){this.orderData.curOrderId=null,this.orderData.rejectReason=null},updateCheckinOk:function(t){["rejected","approved"].includes(t.status)&&(this.getNumStaffWorkOnDay(),this.updateDataAfterAction("remove"))},updateDataAfterAction:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=-1;"checkin_not_approve"===this.curData.workType&&(n=this.curData.data.check_ins.findIndex(function(e){return+e.checkin_log.id==+t.curData.recordId})),"remove"===e?"checkin_not_approve"===this.curData.workType?this.curData.data.check_ins[n]&&(this.listData.splice(this.curData.curIdx,1).length>1?this.curData.data.check_ins.splice(n,1):this.listData.splice(this.curData.curIdx,1)):this.listData.splice(this.curData.curIdx,1):"log"===e?a&&("checkin_not_approve"===this.curData.workType?(a.time||(a.time=a.created),this.curData.data.check_ins[n]&&this.curData.data.check_ins[n].logs.push(a)):this.curData.data.logs.push(a)):"add_handler"===e?a&&this.curdata.data.handler.push(a):"explained"===e?"checkin_not_approve"===this.curData.workType?this.curData.data.check_ins[n]&&this.$set(this.curData.data.check_ins[n],"explained",!0):"staff_order"===this.curData.workCategory?this.$set(this.curData.data,"explained",!0):"staff_order_contract"===this.curData.workCategory&&(this.curData.data.explained=!0):"load_num_work"===e&&this.getNumStaffWorkOnDay()},handleToggleModalHrTag:function(t){console.log(t),"staff_order_contract"===t.work_category&&(this.tagData.recordId=t.data.order_id),"checkin"===t.work_category&&(this.tagData.recordId=t.data.checkin_log.id),"wallet"===t.work_category&&(this.tagData.recordId=t.data.master_profile_extend_id),"staff_order"===t.work_category&&(this.tagData.recordId=t.data.id),"ekyc_image_changes"===t.work_category&&(this.tagData.recordId=this.curData.data.order.id),this.tagData.tableName=this.workMapTable[t.work_type],this.tagData.attach=!0,this.tagData.record=t.data,this.tagData.openModalHrTag=!0},handleToggleModalPhoneNumber:function(t){if(t){var e={user_id:t,get_full_tel:!0};this.getUserInfo(e),this.$bvModal.show("modal-phone-number")}else Me.a.showMessage("Không lấy được dữ liệu số điện thoại người dùng!","warning")},getUserInfo:function(t){var e=this;qo.a.getUserDetailInfo(t).then(function(t){t.data.success?e.userPhoneNumber=t.data.userInfo:Me.a.showMessage(t.data.message||"Không lấy được dữ liệu người dùng!","warning")}).catch(function(t){Me.a.showMessage("Đã có lỗi xảy ra, vui lòng thử lại sau !","warning"),console.log(t)})},getTags:function(){var t=this,e={table_name:this.workMapTable[this.curWork]};yn.a.getList(e).then(function(e){e.data.success?t.tagData.tags=e.data.data:Me.a.showMessage(e.data.message||"Không lấy được dữ liệu thẻ tag!","warning")}).catch(function(t){Me.a.showMessage("Đã có lỗi xảy ra, vui lòng thử lại sau !","warning"),console.log(t)})},getMonthSalary:function(t){t=t?Ye()(t):Ye()();var e={from:null,to:null};return e.from=t.subtract(20,"days").format("YYYY-MM")+"-21",e.to=Ye()(e.from).add(1,"months").format("YYYY-MM")+"-20",e},saveNote:function(t){var e=this;if(t){var a={master_profile_id:this.walletData.curProfile,ref_id:this.walletData.curProfileExtend,group_type:"wallet",action:"noteWallet",note:t};this.$startLoading(),qr.a.staffLog(a).then(function(t){t.data.success?(e.getTypeWork(),e.$bvModal.hide("modal-note")):Me.a.showMessage(t.data.message||"Không thêm được ghi chú !")}).catch(function(t){console.log(t)}).finally(function(t){e.$stopLoading()})}},gotoGroupChat:function(t){t&&t.id&&(t.channel_id?window.open("https://ghtk.me/channel/internal/"+t.channel_id,"_blank"):Se.a.createDirectChat({userId:t.id,user_id:t.id}).then(function(t){if(t.data.success){var e=t.data.data.channel_id;window.open("https://ghtk.me/channel/internal/"+e,"_blank")}else Me.a.showMessage(t.data.message||"Tạo direct chat thất bại !")}).catch(function(t){Me.a.showMessage("Có lỗi xảy ra, vui lòng thử lại sau !"),console.log(t)}))},closeModalPhone:function(){this.userPhoneNumber={},this.$bvModal.hide("modal-phone-number")},toggleModalCheckBeforeApproveContract:function(t){this.isShowModalCheckBeforeApproveContract=t}}};var Jr,Zr=function(t){a("Zkjy")},tl=Object(y.a)(Wr,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-data"},[a("table",{staticClass:"table table-sm mb-0"},[a("thead",[a("tr",{staticClass:"text-center"},[a("th",{staticClass:"w-30"},[a("b",[t._v(t._s(t.curWork?t.tableDataHeader[t.works[t.curWork].table_data_type].header1:t.tableDataHeader.common.header1))])]),t._v(" "),a("th",[a("b",[t._v(t._s(t.curWork?t.tableDataHeader[t.works[t.curWork].table_data_type].header2:t.tableDataHeader.common.header2))])]),t._v(" "),a("th",{staticClass:"w-15"},[a("b",[t._v(t._s(t.curWork?t.tableDataHeader[t.works[t.curWork].table_data_type].header3:t.tableDataHeader.common.header3))])])])]),t._v(" "),a("tbody",{directives:[{name:"loading",rawName:"v-loading",value:!t.infinityMode&&t.loading,expression:"!infinityMode && loading"}],staticClass:"position-relative"},[t._l(t.listData,function(e,n){return[e&&["staff_order","staff_identity"].includes(e.work_category)?a("OrderRowDataV2",{key:n,attrs:{"allow-explain":t.allowExplain,order:e.order,type:e.type,approve_report_wrong_identity:e.approve_report_wrong_identity,duty:t.orderData.duty,editableTag:t.tagData.editTag,updateVal:t.recordUpdateVal},on:{action:function(a){for(var i=arguments.length,s=Array(i);i--;)s[i]=arguments[i];return t.action.apply(void 0,[e].concat(s,[n]))}}}):t._e(),t._v(" "),e&&"ekyc_image_changes"===e.work_category?a("EkycImageChangeRowData",{key:n,attrs:{order:e,duty:t.orderData.duty,editableTag:t.tagData.editTag,updateVal:t.recordUpdateVal},on:{action:function(a){for(var i=arguments.length,s=Array(i);i--;)s[i]=arguments[i];return t.action.apply(void 0,[e].concat(s,[n]))}}}):t._e(),t._v(" "),e&&"wallet"===e.work_category?a("ProfileWalletRowData",{key:n,attrs:{profileWallet:e,editableTag:t.tagData.editTag,updateVal:t.recordUpdateVal},on:{action:function(a){for(var i=arguments.length,s=Array(i);i--;)s[i]=arguments[i];return t.action.apply(void 0,[e].concat(s,[n]))}}}):t._e(),t._v(" "),e&&"staff_order_contract"===e.work_category?a("ContractLogDetail",{key:n,attrs:{"allow-explain":t.allowExplain,updateVal:t.recordUpdateVal,order:e},on:{action:function(a){for(var i=arguments.length,s=Array(i);i--;)s[i]=arguments[i];return t.action.apply(void 0,[e].concat(s,[n]))}}}):t._e(),t._v(" "),e&&"checkin"===e.work_category?t._l(e&&e.check_ins,function(i,s){return a("CheckinLogDetailV2",{key:i.checkin_log.id+"_"+s+"_"+n,attrs:{"allow-explain":t.allowExplain,editableTag:t.tagData.editTag,idx:s,"user-checkin":e,checkin:i,updateVal:t.recordUpdateVal},on:{action:function(a){for(var i=arguments.length,s=Array(i);i--;)s[i]=arguments[i];return t.action.apply(void 0,[e].concat(s,[n]))}}})}):t._e()]}),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:!(t.listData&&t.listData.length||t.infinityMode),expression:"(!listData || !listData.length) && !infinityMode"}]},[a("td",{attrs:{colspan:"10"}},[a("div",{staticClass:"mih-25 d-flex justify-content-center align-items-center"},[a("b",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}]},[t._v("Không có dữ liệu phù hợp !")])])])]),t._v(" "),a("b-modal",{ref:"phone-number",attrs:{id:"modal-phone-number",title:"Gọi ứng viên",centered:"","title-class":"w-100","header-class":"text-center","hide-footer":"",size:"sm"}},[a("div",{staticClass:"d-block text-start"},[a("div",[a("b",[t._v("Họ tên:")]),t._v(" "+t._s(t.userPhoneNumber.fullName))]),t._v(" "),a("div",[a("b",[t._v("Vị trí:")]),t._v(" "+t._s(t.userPhoneNumber.positionName))]),t._v(" "),a("div",[a("b",[t._v("Số điện thoại:")]),t._v(" "),a("SensitiveLabel",{staticClass:"d-inline",attrs:{"data-input":t.userPhoneNumber.tel,"user-id":t.userPhoneNumber.userId,type:"tel",source:"staff-work.update-info"}})],1)]),t._v(" "),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-ghtk rounded text-white",on:{click:function(e){return t.closeModalPhone()}}},[t._v("Đóng")])])])]),t._v(" "),a("b-modal",{attrs:{id:"modal-checkin-calendar",title:"Chi tiết công","modal-class":"modal-xxl"}},[a("DetailWorkShift",{attrs:{"user-id":t.checkinData.curUser,"shift-range":t.workShift}})],1),t._v(" "),a("ModalUpdateCheckin",{attrs:{userId:t.checkinData.curUser,"checkin-id":t.checkinData.curCheckin,prStatus:t.checkinData.curAction},on:{reloadCalendar:function(e){return t.getTypeWork()},changeDataOfCheckinLog:t.updateCheckinOk}}),t._v(" "),a("b-modal",{attrs:{title:"Cập nhật người xử lý",id:"modal-edit-censor-staff-work","hide-footer":""}},[a("CensorV2",{attrs:{order:t.curData.data,"order-id":t.orderData.curOrderId},on:{action:t.actionUpdateRecord}})],1),t._v(" "),a("b-modal",{attrs:{id:"modal-update-staff-order",static:"","modal-class":"modal-xxl",title:"THÔNG TIN ĐỀ XUẤT","hide-footer":""},on:{hide:t.resetUpdateStatusData}},[a("UpdateOrder",{attrs:{"id-order":t.orderData.curOrderId,approve_report_wrong_identity:t.orderData.approve_report_wrong_identity,"modal-style":!0},on:{addOrderOk:function(e){return t.getTypeWork()},changeStatusOk:t.changeStatusOrderOk}})],1),t._v(" "),a("b-modal",{attrs:{static:"",title:"Nhập lý do từ chối",centered:"",id:"reject-order-reason-modal"},on:{hide:t.resetUpdateStatusData}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.orderData.rejectReason,expression:"orderData.rejectReason"}],staticClass:"form-control",attrs:{name:"reject-reason-input",rows:"4"},domProps:{value:t.orderData.rejectReason},on:{input:function(e){e.target.composing||t.$set(t.orderData,"rejectReason",e.target.value)}}}),t._v(" "),a("div",{staticClass:"w-100 text-center",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("b-btn",{attrs:{variant:"success"},on:{click:function(e){return t.updateStatus(t.curData.data,"tu_choi")}}},[t._v("OK")]),t._v(" "),a("b-btn",{attrs:{variant:"danger"},on:{click:function(e){return t.$bvModal.hide("reject-order-reason-modal")}}},[t._v("Hủy")])],1)]),t._v(" "),a("HrTagModal",{attrs:{scope:"global",open:t.tagData.openModalHrTag,attachPermission:t.tagData.attach,recordId:t.tagData.recordId,tableName:t.tagData.tableName,tags:t.tagData.tags},on:{action:t.actionUpdateRecord}}),t._v(" "),a("ModalNote",{attrs:{id:"modal-note"},on:{save:t.saveNote}}),t._v(" "),a("b-modal",{attrs:{title:"Cập nhật người xử lý","title-class":"w-100","header-class":"text-center",id:"modal-edit-handler","hide-footer":""}},[a("CensorV3",{attrs:{"censor-data":t.walletData.handlerData},on:{action:t.updateHandler}})],1),t._v(" "),a("modal-explanation",{attrs:{type:"staff_work",id:"modal-expain-staff-work",record:t.explainData},on:{confirmExplain:t.explain}}),t._v(" "),a("ModalCheckBeforeApproveContract",{attrs:{"data-check":t.dataCheckBeforeApproveContract,"is-show":t.isShowModalCheckBeforeApproveContract},on:{toggleModal:t.toggleModalCheckBeforeApproveContract,continueApprove:function(e){return t.updateStatus(t.curData.data,"duyet",!0)}}})],2)]),t._v(" "),t.infinityMode?a("infinite-loading",{attrs:{spinner:"spiral"},on:{infinite:t.getTypeWork}},[a("div",{staticClass:"text-center",attrs:{slot:"no-more"},slot:"no-more"},[t._v("Đã đến cuối trang !")]),t._v(" "),a("div",{staticClass:"text-center",attrs:{slot:"no-results"},slot:"no-results"},[t._v("Không có dữ liệu nào !")])]):t._e()],1)},[],!1,Zr,"data-v-185fd86f",null).exports,el=function(t){return Uo.a.get("erp/ErpCheckinManager/getCheckin",{params:t})},al=function(t){return Uo.a.get("erp/ErpCheckinManager/getStatisticCheckinNeedReview",{params:t})},nl=function(t){return Pe.a.get("/ErpStatistic/getStatisticMasterProfile",{params:t})},il=function(t){return Pe.a.get("/ErpStatistic/getStatisticHrOrder",{params:t})},sl=function(t){return Pe.a.get("/ErpStatistic/getStatisticCandidateV2",{params:t})},ol=function(t){return Pe.a.get("/ErpStatistic/getStatisticUnion",{params:t})},rl=function(t){return Pe.a.get("/ErpStatistic/getStatisticDependantV2",{params:t})},ll=function(t){return Pe.a.get("/ErpStatistic/getTotalDriverxNews",{params:t})},cl=function(t){return Pe.a.get("/ErpStatistic/getTotalTrainingTests",{params:t})},dl=function(t){return Pe.a.get("/ErpStatistic/getTotalUserNotCompleteDocuments",{params:t})},ul=a("SQMU"),hl=a("xt1G"),pl=a("mtWM"),ml=a.n(pl),fl=this,gl=new v.a("local"),vl=new v.a("session",!1),_l=!Me.a.isInIframe(),bl=0,yl=(Jr=l()(o.a.mark(function t(e){var a,n,i,s,r,l;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e.response,n=a.status,i=a.data,t.t0=n,t.next=400===t.t0?4:401===t.t0?5:402===t.t0?29:404===t.t0?30:405===t.t0?31:419===t.t0?32:500===t.t0?33:34;break;case 4:return t.abrupt("break",35);case 5:if(_l){t.next=16;break}if(!(1109===i.code||i.errors&&i.errors.includes(1109))){t.next=9;break}return t.next=9,O.a.refreshToken();case 9:if(!(s=O.a.getToken())||0!==bl){t.next=14;break}return++bl,e.config.headers["gchat-token"]=s,t.abrupt("return",ml.a.request(e.config));case 14:t.next=28;break;case 16:if((r=vl.get("isReload"))&&"false"!==r){t.next=28;break}return gl.remove(N.a.oidc.tokenIamStorage),vl.set("isReload",!0),l=Object(A.a)(N.a.oidc),t.prev=21,t.next=24,l.run(window.location.href);case 24:t.next=28;break;case 26:t.prev=26,t.t1=t.catch(21);case 28:case 29:case 30:case 31:case 32:case 33:case 34:return t.abrupt("break",35);case 35:return t.abrupt("return",Ji.a.reject(e));case 36:case"end":return t.stop()}},t,fl,[[21,26]])})),function(t){return Jr.apply(this,arguments)}),Cl=ml.a.create({baseURL:N.a.domainApiQLTS});Cl.interceptors.request.use(function(t){var e=gl.get(N.a.oidc.tokenIamStorage);if(e&&e.accessToken&&(t.headers.Authorization=N.a.bearerKey+" "+e.accessToken.accessToken),!_l){var a=O.a.getToken();a&&(t.headers["gchat-token"]=a)}return t}),Cl.interceptors.response.use(function(t){return bl=0,t},yl);var wl=Cl,kl=function(){return wl.get("/api/rent-driver/count-profile-driver")},xl={name:"work-dashboard",mixins:[a("poZo").a],components:{ManagerUnion:Ro.default,ProfileManagement:Oo,MultiSelectRegion:me.a,MultiSelectProvince:fe.a,MultiSelectStation:ge.a,SingleSelectUser:Ie.a,MultiSelectDepartment:_e.a,MultiSelectWorkType:Ms.a,MultiSelectPosition:be.a,MultiSelectHrTag:Ts.a,HrTagModal:vi,UpdateOrder:ye.default,TableData:tl,Multiselect:la.a,ManageDependant:No.a},props:{scrollMode:{type:Boolean},blankMode:{type:Boolean},modalPhoneNumber:{type:String,default:"modalPhoneNumber"}},data:function(t){return{elementId:{sosIframe:"iframe-sos-me-need-handle",qltsIframe:"iframe-qlts-profile-driver"},messageType:{closingShift:"sos_closing_shift",requestAuth:"hrm_authentication_request",reloadStatisticSosMe:"reload_statistic_sos_me",reloadStatisticProfileCarDriver:"reload_data",refreshIamToken:"hrm_refresh_iam_token"},loading:{statistic_ekyc_image_changes:!1,statistic_checkin:!1,statistic_contract:!1,statistic_hr_order:!1,statistic_rejected:!1,statistic_profile_documents:!1,statistic_wallet:!1,statistic_tax:!1,statistic_union:!1,statistic_sos_me:!1,statistic_profile_car_driver:!1},page:{curPage:1,totalRow:0,perPage:10},filter:{workCategory:null,workFilter:null,region:null,province:null,station:null,employee:null,department:null,deadline:null,position:null,handler:null,created:null,order_id:null,identify_id:null,tag:null,date:null,status:null},orderData:{createOrderType:null,fileExport:null,exporting:!1},works:Xr.works,workMapTable:Xr.workMapTable,workMapFilter:Xr.workMapFilter,workMapCategory:Xr.workMapCategory,resetEmployee:!1,reloadTag:0,userPhoneNumber:[],statistics:{lost_identity_card:null,ekyc_image_changes:null,checkin_not_approve:null,user_info_order:null,new_contract_order:null,continue_contract_order:null,need_active_wallet:null,insurance_order:null,profile_documents:null,sos_me:null,rejected:null,union:null,tax:null,profile_car_driver:null},totalOverdue:0,recordUpdateVal:{type:"",data:null},tabScroll:{leftShow:!1,rightShow:!1},workHasDeadline:Xr.workHasDeadline,getWorkTrigger:!1,curWork:null,tagData:{tags:[],reload:0,openModalHrTag:!1},overdueDash:!1,permissionShowButton:{}}},watch:{curUser:function(t){}},computed:i()({},Object(_.c)({curUser:"userInfo"}),{helper:function(){return Me.a},hasDeadline:function(){return this.workHasDeadline.includes(this.workMapCategory[this.curWork])}}),created:function(){window.addEventListener("message",this.handleMessageFromListener,!1),this.checkShowProfileCarDriver(),this.getWork("lost_identity_card"),this.getStatisticHrOrder(),this.getAmountContractByType(),this.getStatisticProfileDocument(),this.getStatisticTax(),this.getStatisticUnion(),this.getStatisticEkycImageChange(),this.getStatisticSos(),this.getStatisticProfileCarDriver(),this.getStatisticReportLostIdentityCard(),this.getStatisticWork({workFilter:this.workMapFilter.rejected})},mounted:function(){Me.a.importLibraryTracingLogs();var t=document.getElementById("tab-work");t&&this.checkScrollTab(null,t)},beforeDestroy:function(){window.removeEventListener("message",this.handleMessageFromListener),Me.a.removeLibraryTracingLogs()},methods:{action:function(t){"updateOverdueCount"===t.action&&(this.totalOverdue=t.data)},switchTab:function(t){this.overdueDash=!1,this.getWork(t)},showButton:function(t){return"profile_car_driver"!==t||(this.permissionShowButton.profile_car_driver||!1)},checkShowProfileCarDriver:function(){var t=this;return l()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qo.a.canPer({permission:"user.view-profile-car-driver"});case 3:return a=e.sent,t.permissionShowButton.profile_car_driver=a.data.success||!1,e.abrupt("return");case 8:e.prev=8,e.t0=e.catch(0),t.permissionShowButton.profile_car_driver=!1;case 11:t.permissionShowButton.profile_car_driver=!1;case 12:case"end":return e.stop()}},e,t,[[0,8]])}))()},checkScrollTab:function(t,e){e.scrollWidth>e.offsetWidth?(this.tabScroll.rightShow=!0,this.tabScroll.leftShow=!0):(this.tabScroll.rightShow=!1,this.tabScroll.leftShow=!1),e.scrollLeft<3?this.tabScroll.leftShow=!1:e.offsetWidth+e.scrollLeft+3>=e.scrollWidth&&(this.tabScroll.rightShow=!1)},scroll:function(t,e){(t=document.getElementById(t))&&t.scroll({left:t.scrollLeft+("right"===e?150:-150)})},actionUpdateRecord:function(t){"refreshHrTag"===t.action&&(this.getTags(),this.tagData.reload++),"closeHrTag"===t.action&&(this.tagData.openModalHrTag=!1)},search:function(){this.overdueDash=!1,this.getWork(null,1)},detailOrder:function(t,e,a){this.hr_order_data.create_order_type=e||null,this.$bvModal.show("modal-order")},checkStatusUpdate:function(t){"tu_choi"!==t?this.updateStatus(this.hr_order_data.cur_order,t):this.$bvModal.show("reject-reason-modal")},handleToggleModalHrTag:function(){this.tagData.openModalHrTag=!0},getTags:function(){var t=this,e={table_name:this.workMapTable[this.curWork]};yn.a.getList(e).then(function(e){e.data.success?t.tagData.tags=e.data.data:Me.a.showMessage(e.data.message||"Không lấy được dữ liệu thẻ tag!","warning")}).catch(function(t){Me.a.showMessage("Đã có lỗi xảy ra, vui lòng thử lại sau !","warning"),console.log(t)}).finally(function(){})},getAmountContractByType:function(){var t=this;this.loading.statistic_contract=!0,Se.a.getAmountContractByType().then(function(e){if(e.data.success){if(e.data.data)for(var a in e.data.data)"new"===a&&(t.statistics.new_contract_order=e.data.data[a]),"resign"===a&&(t.statistics.continue_contract_order=e.data.data[a]),"appendix"===a&&(t.statistics.appendix_contract_order=e.data.data[a])}else Me.a.showMessage(e.data.message||"Không lấy được số lượng đề xuất !")}).catch(function(t){console.log(t)}).finally(function(e){t.loading.statistic_contract=!1})},getStatisticWork:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.loading.statistic_rejected=!0,this.loading.statistic_wallet=!0,qr.a.getStatisticWork(e).then(function(e){if(e.data.success){if(e.data.data){var a=!0,n=!1,i=void 0;try{for(var s,o=fa()(e.data.data.staff_order||[]);!(a=(s=o.next()).done);a=!0){var r=s.value;"tu_choi"===r.status&&(["insurance"].includes(r.category)&&(t.statistics.rejected+=r.total),["new_contract","change_info","new_appendix"].includes(r.alias)&&(t.statistics.rejected+=+r.total))}}catch(t){n=!0,i=t}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}var l=!0,c=!1,d=void 0;try{for(var u,h=fa()(e.data.data.checkin||[]);!(l=(u=h.next()).done);l=!0){var p=u.value;"rejected"===p.status&&(t.statistics.rejected+=+p.total)}}catch(t){c=!0,d=t}finally{try{!l&&h.return&&h.return()}finally{if(c)throw d}}var m=!0,f=!1,g=void 0;try{for(var v,_=fa()(e.data.data.wallet||[]);!(m=(v=_.next()).done);m=!0){var b=v.value;b.wallet_required&&(b.wallet_active||(t.statistics.need_active_wallet+=+b.total))}}catch(t){f=!0,g=t}finally{try{!m&&_.return&&_.return()}finally{if(f)throw g}}}t.page.totalRow=e.data.total||0}else Me.a.showMessage(e.data.message||"Không lấy được dữ liệu thống kê đề xuất bị từ chối !"),console.log(e.data.message||"Không lấy được dữ liệu thống kê bị từ chối !")}).catch(function(t){console.log(t)}).finally(function(e){t.loading.statistic_rejected=!1,t.loading.statistic_wallet=!1})},getStatisticHrOrder:function(){var t=this;this.loading.statistic_hr_order=!0,il().then(function(e){if(e.data.success){if(e.data.data)for(var a in e.data.data)"insurance"===a&&(t.statistics.insurance_order=e.data.data[a].num_need_action||0),"user_info"===a&&(t.statistics.user_info_order=e.data.data[a].num_need_action||0)}else Me.a.showMessage(e.data.message||"Không lấy được dữ liệu thống kê đề xuất !"),console.log(e.data.message||"Không lấy được dữ liệu thống kê !")}).catch(function(t){console.log(t)}).finally(function(e){t.loading.statistic_hr_order=!1})},getStatisticUnion:function(){var t=this;return l()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading.statistic_union=!0,e.next=4,hl.a.getStatisticUnion();case 4:(a=e.sent).data.success?t.statistics.union=a.data.data.count||0:Me.a.showMessage(a.data.message||"Không lấy được số liệu công đoàn!"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),Me.a.showMessage("Không lấy được số liệu công đoàn!"),console.log(e.t0.message);case 12:return e.prev=12,t.loading.statistic_union=!1,e.finish(12);case 15:case"end":return e.stop()}},e,t,[[0,8,12,15]])}))()},getStatisticTax:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading.statistic_tax=!0,e.next=4,ul.a.dependantPersonCheck({isCount:!0});case 4:a=e.sent,n=a.data,t.statistics.tax=n.data.total||0,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),Me.a.showMessage("Không lấy được số liệu hồ sơ!"),console.log(e.t0.message);case 13:return e.prev=13,t.loading.statistic_tax=!1,e.finish(13);case 16:case"end":return e.stop()}},e,t,[[0,9,13,16]])}))()},getStatisticProfileDocument:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading.statistic_profile_documents=!0,e.next=4,Es.a.getDocuments({status:{name:"Chưa duyệt"},isCount:!0});case 4:a=e.sent,n=a.data,t.statistics.profile_documents=n.data.total||0,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),Me.a.showMessage("Không lấy được số liệu hồ sơ!"),console.log(e.t0.message);case 13:return e.prev=13,t.loading.statistic_profile_documents=!1,e.finish(13);case 16:case"end":return e.stop()}},e,t,[[0,9,13,16]])}))()},getStatisticEkycImageChange:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading.statistic_profile_documents=!0,e.next=4,Se.a.getEkycImageChanges({is_count:!0});case 4:a=e.sent,n=a.data,t.statistics.ekyc_image_changes=n.data.total||0,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Me.a.showMessage("Không lấy được số liệu chưa duyệt ảnh chụp lại!");case 12:return e.prev=12,t.loading.statistic_profile_documents=!1,e.finish(12);case 15:case"end":return e.stop()}},e,t,[[0,9,12,15]])}))()},getStatisticReportLostIdentityCard:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading.statistic_profile_documents=!0,e.next=4,Se.a.getReportLostIdentityCardOrder({is_count:!0,need_action:!0});case 4:a=e.sent,n=a.data,t.statistics.lost_identity_card=n.data.total||0,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Me.a.showMessage("Không lấy được số liệu báo mất CMND/CCCD!");case 12:return e.prev=12,t.loading.statistic_profile_documents=!1,e.finish(12);case 15:case"end":return e.stop()}},e,t,[[0,9,12,15]])}))()},getStatisticCheckinNeedReview:function(){var t=this;this.loading.statistic_checkin=!0,al({start_month:1}).then(function(e){if(e.data.success)for(var a in e.data.data||{})"checkin_not_approve"===a&&(t.statistics.checkin_not_approve=e.data.data[a].total);else Me.a.showMessage(e.data.message||"Có lỗi khi lấy thông tin thống kê !")}).catch(function(t){console.log(t),Me.a.showMessage("Có lỗi khi lấy thông tin thống kê !")}).finally(function(e){t.loading.statistic_checkin=!1})},getStatisticSos:function(){var t=this;return l()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading.statistic_sos_me=!0,e.next=4,hl.a.getCountSosTicket();case 4:(a=e.sent).data.success?t.statistics.sos_me=a.data.data.count:Me.a.showMessage(a.data.message||"Không lấy được thông tin ticket SOS!"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Me.a.showMessage("Không lấy được thông tin ticket SOS!");case 11:return e.prev=11,t.loading.statistic_sos_me=!1,e.finish(11);case 14:case"end":return e.stop()}},e,t,[[0,8,11,14]])}))()},getStatisticProfileCarDriver:function(){var t=this;return l()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading.statistic_profile_car_driver=!0,e.next=4,kl();case 4:(a=e.sent).data.success?t.statistics.profile_car_driver=a.data.data:Me.a.showMessage(a.data.message||"Không lấy được thông tin hồ sơ xe thuê!"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Me.a.showMessage("Không lấy được thông tin hồ sơ xe thuê!");case 11:return e.prev=11,t.loading.statistic_profile_car_driver=!1,e.finish(11);case 14:case"end":return e.stop()}},e,t,[[0,8,11,14]])}))()},resetFilter:function(){for(var t in this.filter)"status"!==t&&(this.filter[t]=null);this.resetEmployee=!this.resetEmployee},createOrder:function(t){this.orderData.createOrderType=t||null,this.$bvModal.show("modal-create-order")},postAuthTokenToIframeQlts:function(){var t=document.getElementById(this.elementId.qltsIframe);if(t&&"IFRAME"===t.tagName){var e=Me.a.getToken(),a={type:"authentication",payload:{token:e=e.replace("Bearer","").replace(/\s/g,"")}};t.contentWindow.postMessage(a,N.a.domainQLTSFe)}},getWork:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments[1];e&&(this.page.curPage=e),t&&(this.curWork=t,this.resetFilter(),this.workMapFilter[t]&&(this.filter.workFilter=this.workMapFilter[t]),this.filter.workCategory=this.workMapCategory[t]||null,this.tagData.reload++,this.hasDeadline&&this.getOverdueCount(this.filter)),this.overdueDash?(this.resetFilter(),this.workMapFilter[this.curWork]&&(this.filter.workFilter=this.workMapFilter[this.curWork]),this.filter.workCategory=this.workMapCategory[this.curWork]||null,this.filter.deadlineOverdue={end:Ye()().subtract(1,"days").format("YYYY-MM-DD HH:mm:ss")}):this.filter.deadlineOverdue=null,this.getWorkTrigger=!this.getWorkTrigger},getOverDueData:function(){this.overdueDash=!0,this.getWork(null,1)},getOverdueCount:function(t){var e=this,a=i()({},t);a.deadline={end:Ye()().subtract(1,"days").format("YYYY-MM-DD HH:mm:ss")},a.is_count=1,a.censor=this.curUser.User&&this.curUser.User.id,qr.a.getDataWork(a).then(function(t){t.data.success?e.totalOverdue=t.data.total||0:(Me.a.showMessage(t.data.message||"Có lỗi khi lấy thông tin công việc !"),console.log(t.data.message||"Có lỗi khi lấy thông tin công việc !"))}).catch(function(t){console.log(t)}).finally(function(t){})},exportOrderHr:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.orderData.exporting=!0;var a=i()({},this.filter);delete a.workCategory,delete a.workFilter,a.exportType=e,a.group=null,a.type=null,this.range_time&&(a.start_date=this.range_time.start||null,a.end_date=this.range_time.end||null),Se.a.exportOrderHr(a).then(function(e){e.data.success?e.data.data.job_id?t.checkJobExport(e.data.data.job_id):Me.a.showMessage("Không tạo được Job xuất dữ liệu !","warning"):(t.orderData.exporting=!1,Me.a.showMessage(e.data.message||"Có lỗi xảy ra không thể xuất dữ liệu !","warning"))}).catch(function(t){console.log(t),Me.a.showMessage("Có lỗi xảy ra không thể xuất dữ liệu !","warning")})},checkJobExport:function(t){var e=this;t||Me.a.showMessage("Không có Job id !","warning");var a=setInterval(function(n){eo.a.checkJobStatus({job_id:t}).then(function(t){t.data.success?"closed"===t.data.data.job_status&&(clearInterval(a),e.orderData.exporting=!1,e.orderData.fileExport=t.data.data.path||t.data.data.url,Me.a.showMessage("Đã xuất xong dữ liệu đề xuất bảo hiểm","success")):(Me.a.showMessage(t.data.message,"warning"),clearInterval(a),e.orderData.exporting=!1)}).catch(function(t){console.log(t),clearInterval(a),Me.a.showMessage("Có lỗi xảy ra khi kiểm tra Job xuất dữ liệu !","warning")})},2e3)},downloadFile:function(){this.orderData.fileExport&&window.open(this.orderData.fileExport,"_blank"),this.orderData.fileExport=null},handleSelectedRegion:function(t){this.filter.region=t?t.map(function(t){return t.id}).toString():"",t||(this.filter.province="")},handleProvinceSelected:function(t){this.filter.province=t?t.map(function(t){return t.id}).toString():""},handleStationSelected:function(t){this.filter.station=t?t.map(function(t){return t.id}).toString():""},handleDepartmentSelected:function(t){this.filter.department=t?t.map(function(t){return t.id}).toString():""},handlePositionSelected:function(t){this.filter.position=t?t.map(function(t){return t.id}).toString():""},handleSelectedWorkType:function(t){this.filter.work_type_id=t?t.map(function(t){return t.id}).toString():""},handleHrTagSelected:function(t){this.filter.tag=t?t.map(function(t){return t.id}).toString():""},getUrlIframe:function(t){return N.a.domainHrmFe+t},getUrlIframeProfileCarDriver:function(t){return N.a.domainQLTSFe+t},handleMessageFromListener:function(t){if(t.origin===N.a.domainHrmFe)switch(t.data.type){case this.messageType.requestAuth:g.a.dispatch("sendMessageToHrm",this.elementId.sosIframe);break;case this.messageType.refreshIamToken:window.location.reload();break;case this.messageType.reloadStatisticSosMe:this.getStatisticSos()}else if(t.origin===N.a.domainQLTSFe)switch(t.data.type){case"content_ready":t.data.payload.status&&this.postAuthTokenToIframeQlts();break;case this.messageType.reloadStatisticProfileCarDriver:this.getStatisticProfileCarDriver()}}}};var Sl=function(t){a("MONG")},Ml=Object(y.a)(xl,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"small-scrollbar work-dash"},[a("b-row",{staticClass:"header my-2 align-items-center"},[a("b-col",{attrs:{md:"2"}},[a("h4",{staticClass:"m-0 text-black"},[t._v("Cần xử lý")])]),t._v(" "),a("b-col",{staticClass:"text-right",attrs:{md:"10"}},[a("div",{staticClass:"d-flex justify-content-end align-item-center"},[a("div",{staticClass:"tab-work-scroll"},[t.tabScroll.leftShow?a("div",{staticClass:"pre-tab pre-tab-left"},[a("div",{staticClass:"pre-btn text-ghtk",on:{click:function(e){return t.scroll("tab-work","left")}}},[a("i",{staticClass:"ion ion-ios-arrow-back"})])]):t._e(),t._v(" "),a("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.checkScrollTab,expression:"checkScrollTab"},{name:"resize",rawName:"v-resize",value:t.checkScrollTab,expression:"checkScrollTab"}],staticClass:"work-options",attrs:{id:"tab-work"}},t._l(t.works,function(e,n){return a("button",{directives:[{name:"show",rawName:"v-show",value:t.showButton(n),expression:"showButton(key)"}],key:n,staticClass:"btn btn-pill mr-1",class:t.curWork===n?"btn-ghtk":"btn-ghtk-disable",attrs:{id:e.dom_id},on:{click:function(e){return t.switchTab(n)}}},[t._v("\n              "+t._s(e.desc)+"\n              "),a("span",[a("span",{directives:[{name:"show",rawName:"v-show",value:!t.loading["statistic_"+e.type],expression:"!loading['statistic_' + work.type]"}]},[t._v("("+t._s(t.statistics[n]||0)+")")]),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.loading["statistic_"+e.type],expression:"loading['statistic_' + work.type]"}],staticClass:"fas fa-spinner fa-pulse"})])])}),0),t._v(" "),t.tabScroll.rightShow?a("div",{staticClass:"pre-tab pre-tab-right"},[a("div",{staticClass:"pre-btn text-ghtk",on:{click:function(e){return t.scroll("tab-work","right")}}},[a("i",{staticClass:"ion ion-ios-arrow-forward"})])]):t._e()]),t._v(" "),a("div",{staticClass:"ml-4 list-tag-btn"},[a("span",{staticClass:"text-ghtk cursor-pointer mx-2",on:{click:t.handleToggleModalHrTag}},[a("i",{staticClass:"fas fa-plus"}),t._v(" Tag")])])])])],1),t._v(" "),"common"===t.works[t.curWork].dashboard_type?a("div",[a("div",{staticClass:"row filter pb-2 justify-content-between input-border"},[a("div",{staticClass:"mb-1 input-filter z-100"},[a("single-select-user",{staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{placeholder:"Họ tên/username",reset:t.resetEmployee},on:{onChange:function(e){t.filter.employee=e?e.id:null}}})],1),t._v(" "),a("b-form-group",{staticClass:"mb-1 input-filter"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.identify_id,expression:"filter.identify_id"}],staticClass:"z-5 form-control",attrs:{type:"number",placeholder:"CMND/CCCD",disabled:!1},domProps:{value:t.filter.identify_id},on:{input:[function(e){e.target.composing||t.$set(t.filter,"identify_id",e.target.value)},function(e){return t.helper.validValue(t.filter,"identify_id",{length:12})}]}})]),t._v(" "),a("div",{staticClass:"mb-1 input-filter z-100"},[a("MultiSelectDepartment",{staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{"department-ids":t.filter.department,"auto-close":!0,"hide-selected":!0,placeholder:"Bộ phận"},on:{handleDepartmentSelected:t.handleDepartmentSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter z-100"},[a("MultiSelectPosition",{staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{"department-ids":t.filter.department,"position-ids":t.filter.position,"auto-close":!0,"hide-selected":!0,placeholder:"Vị trí"},on:{handlePositionSelected:t.handlePositionSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter z-100"},[a("MultiSelectWorkType",{attrs:{customMultiselectClass:"multiselect-ghtk multiselect-no-horizontal",positionCustom:t.filter.position,multiple:!0,placeholder:"Hình thức làm việc"},on:{handleSelectedWorkType:t.handleSelectedWorkType}})],1),t._v(" "),a("b-form-group",{staticClass:"mb-1 input-filter"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.order_id,expression:"filter.order_id"}],staticClass:"form-control",attrs:{type:"number",placeholder:"Mã đề xuất",disabled:!1},domProps:{value:t.filter.order_id},on:{input:[function(e){e.target.composing||t.$set(t.filter,"order_id",e.target.value)},function(e){return t.helper.validValue(t.filter,"order_id",{length:12})}]}})]),t._v(" "),a("div",{staticClass:"mb-1 input-filter z-100"},[a("MultiSelectHrTag",{attrs:{reload:t.tagData.reload,tableName:this.workMapTable[this.curWork],customClass:"multiselect-ghtk multiselect-no-horizontal","auto-close":!0,"hide-selected":!0,placeholder:"Thẻ"},on:{handleHrTagSelected:t.handleHrTagSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter z-5"},[a("MultiSelectRegion",{attrs:{customClass:"multiselect-ghtk multiselect-no-horizontal",regions:t.filter.region?t.filter.region:""},on:{handleSelectedRegion:t.handleSelectedRegion}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter z-5"},[a("multi-select-province",{attrs:{customClass:"multiselect-ghtk multiselect-no-horizontal","province-ids":t.filter.province,region:t.filter.region,"auto-close":!0,"hide-select":!0},on:{handleProvinceSelected:t.handleProvinceSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter z-5"},[a("multi-select-station",{staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{"province-ids":t.filter.province,"auto-close":!0,"hide-select":!0},on:{input:t.handleStationSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter z-5"},[a("single-select-user",{staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{placeholder:"Người xử lý",reset:t.resetEmployee},on:{onChange:function(e){t.filter.handler=e?e.id:null}}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter"},[a("v-date-picker",{attrs:{mode:"range",locale:"vi",color:"green","input-props":{placeholder:"Hạn xử lý",style:"font-size:14px; line-height: unset",class:"form-control rounded"},popover:{visibility:"focus"}},model:{value:t.filter.deadline,callback:function(e){t.$set(t.filter,"deadline",e)},expression:"filter.deadline"}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter"},[a("v-date-picker",{attrs:{mode:"range",locale:"vi",color:"green","input-props":{placeholder:"Ngày tạo",style:"font-size:14px; line-height: unset",class:"form-control rounded"},popover:{visibility:"focus"}},model:{value:t.filter.created,callback:function(e){t.$set(t.filter,"created",e)},expression:"filter.created"}})],1),t._v(" "),a("div",{staticClass:"text-right input-filter"},[a("button",{staticClass:"btn btn-ghtk rounded w-100",on:{click:t.search}},[t._v("Tìm kiếm")])])],1),t._v(" "),t.hasDeadline?a("p",[t._v("\n      Bạn có\n      "),a("span",{staticClass:"cursor-pointer text-underline-hover",staticStyle:{color:"#4c9aff"},on:{click:t.getOverDueData}},[t._v("\n        "+t._s(t.totalOverdue))]),t._v("\n      đề xuất quá hạn\n    ")]):t._e(),t._v(" "),a("TableData",{staticClass:"table-sticky mh-75",attrs:{"cur-work":t.curWork,overdue:t.overdueDash,paging:t.page,filter:t.filter,getWorkTrigger:t.getWorkTrigger},on:{action:t.action}}),t._v(" "),a("div",{staticClass:"row mt-3 align-items-center"},[a("div",{staticClass:"col col-md-6 text-left"},[a("b",[t._v("\n          Bản ghi/ trang\n        ")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.page.perPage,expression:"page.perPage"}],staticClass:"form-control form-control-sm w-4re text-ghtk rounded border-ghtk d-inline-block",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.page,"perPage",e.target.multiple?a:a[0])},function(e){return t.getWork()}]}},[a("option",[t._v("5")]),t._v(" "),a("option",[t._v("10")]),t._v(" "),a("option",[t._v("25")]),t._v(" "),a("option",[t._v("50")]),t._v(" "),a("option",[t._v("100")])]),t._v(" "),a("div",{staticClass:"z-0 d-inline-block"},[a("b-pagination",{staticClass:"paginator-ghtk mb-0",attrs:{size:"sm",align:"left","total-rows":+t.page.totalRow,"per-page":+t.page.perPage},on:{input:function(e){return t.getWork()}},model:{value:t.page.curPage,callback:function(e){t.$set(t.page,"curPage",e)},expression:"page.curPage"}})],1)]),t._v(" "),a("div",{staticClass:"col col-md-6 text-right"},["insurance_order"===t.curWork?a("div",{staticClass:"d-inline-block"},[t.checkPermissionExportAllPage()?a("b-dd",{directives:[{name:"show",rawName:"v-show",value:!t.orderData.fileExport,expression:"!orderData.fileExport"}],attrs:{disabled:t.orderData.exporting,right:"",dropup:"",variant:"ghtk","toggle-class":"rounded mr-2"}},[a("span",{attrs:{slot:"button-content"},slot:"button-content"},[a("i",{staticClass:"fas",class:t.orderData.exporting?"fa-spinner fa-pulse":"fa-file-excel"}),t._v(" "+t._s(t.orderData.exporting?"Đang xuất...":"Xuất data")+"\n            ")]),t._v(" "),a("b-dd-item-btn",{on:{click:function(e){return t.exportOrderHr("insurance_list")}}},[t._v("Danh sách BHXH")]),t._v(" "),a("b-dd-item-btn",{attrs:{disabled:""},on:{click:function(e){return t.exportOrderHr("contract")}}},[t._v("Danh sách hợp đồng")]),t._v(" "),a("b-dd-item-btn",{on:{click:function(e){return t.exportOrderHr("insurance_viettel")}}},[t._v("File mã hóa BHXH Viettel")]),t._v(" "),a("b-dd-item-btn",{on:{click:function(e){return t.exportOrderHr("insurance_efy")}}},[t._v("File mã hóa BHXH EFY")])],1):t._e(),t._v(" "),a("b-btn",{directives:[{name:"show",rawName:"v-show",value:!!t.orderData.fileExport,expression:"!!orderData.fileExport"}],staticClass:"rounded mr-2",attrs:{variant:"ghtk"},on:{click:t.downloadFile}},[a("i",{staticClass:"fas fa-download"}),t._v(" Tải file\n          ")])],1):t._e(),t._v(" "),a("b-dd",{staticClass:"justify-content-end",attrs:{right:"",variant:"ghtk","toggle-class":"rounded",dropup:""}},[a("span",{attrs:{slot:"button-content"},slot:"button-content"},[a("i",{staticClass:"ion ion-ios-add"}),t._v(" Tạo đề xuất\n          ")]),t._v(" "),a("b-dd-item-btn",{attrs:{id:"wd-btn-create-insurance-order"},on:{click:function(e){return t.createOrder("TM")}}},[t._v("BHXH")]),t._v(" "),a("b-dd-item-btn",{attrs:{id:"wd-btn-create-contract-order"},on:{click:function(e){return t.createOrder("new_contract")}}},[t._v("Hợp đồng")]),t._v(" "),a("b-dd-item-btn",{attrs:{id:"wd-btn-create-resign-order"},on:{click:function(e){return t.createOrder("resign")}}},[t._v("Nghỉ việc")])],1)],1)])],1):t._e(),t._v(" "),"profile_documents"===t.works[t.curWork].dashboard_type?a("div",[a("ProfileManagement")],1):"tax"===t.works[t.curWork].dashboard_type?a("div",[a("manage-dependant")],1):"union"===t.works[t.curWork].dashboard_type?a("div",[a("manager-union")],1):"child_frame"===t.works[t.curWork].dashboard_type?a("div",[a("iframe",{staticClass:"border-0",staticStyle:{height:"92vh"},attrs:{src:t.getUrlIframe(t.works[t.curWork].path_name),title:t.works[t.curWork].desc,id:t.elementId.sosIframe,width:"100%"}})]):"profile_car_driver"===t.works[t.curWork].dashboard_type?a("div",[a("iframe",{staticClass:"border-0",staticStyle:{height:"92vh"},attrs:{src:t.getUrlIframeProfileCarDriver(t.works[t.curWork].path_name),title:t.works[t.curWork].desc,id:t.elementId.qltsIframe,width:"100%"}})]):t._e(),t._v(" "),a("b-modal",{attrs:{id:"modal-create-order",static:"","modal-class":"modal-xxl",title:"THÔNG TIN ĐỀ XUẤT","hide-footer":""}},[a("UpdateOrder",{attrs:{"modal-style":!0,"order-type":t.orderData.createOrderType},on:{addOrderOk:function(e){return t.getWork()}}})],1),t._v(" "),a("HrTagModal",{attrs:{scope:"global",open:t.tagData.openModalHrTag,attachPermission:!1,tableName:this.workMapTable[this.curWork],tags:t.tagData.tags},on:{action:t.actionUpdateRecord}})],1)},[],!1,Sl,"data-v-92b709ea",null).exports,Tl=a("DeeD"),Dl=a("FcGS"),Il=a("pedj"),Pl=a("PZjF"),El={name:"update-order-stop-work",props:{idOrder:{default:null},profileId:{default:null},modalStyle:{default:!1,type:Boolean},orderType:{default:null}},components:{SelectOrderType:ke.a,SelectOrderStatus:ve.a,SelectOrderGroup:Dl.a,Datepicker:qi.a,Multiselect:la.a,FileViewUpload:Il.a,ModalDetailFile:Pl.a},created:function(){this.getType(),this.idOrder?(this.showAction=!0,this.detailOrder(this.idOrder)):this.profileId&&(this.getProfileInfo(this.profileId),this.employee.masterProfile.id=this.profileId,this.employee.masterProfile.staff_code=this.profileId)},data:function(t){return{loadingProfileInfo:!1,loadingOrderInfo:!1,eligibleCreate:!0,legalCreate:!0,isRelateOrder:null,duty:{insurance:null},censor:null,rejectReason:null,language:{vi:to.a},contractType:Fe.a.typeOptions,birthdayStatusOptions:or.a.birthdayStatusOptions,fileTypeOptions:or.a.fileTypeOptions,orderTypeOption:[],modifyConfig:{7:{oldInput:{class:"col-md-4",disable:!1,label:"Mức đóng BHXH cũ"},newInput:{class:"col-md-4",disable:!1,label:"Mức đóng BHXH mới"},inputFile:!1,showTimeChange:!0},8:{oldInput:{class:"col-md-4",disable:!1,label:"Nơi làm cũ"},newInput:{class:"col-md-4",disable:!1,label:"Nơi làm mới"},inputFile:!1,showTimeChange:!0},9:{oldInput:{class:"col-md-4",disable:!1,label:"Vị trí cũ"},newInput:{class:"col-md-4",disable:!1,label:"Vị trí mới"},inputFile:!1,showTimeChange:!0},13:{oldInput:{class:"col-md-4",disable:!1,label:"Họ và tên sai"},newInput:{class:"col-md-4",disable:!1,label:"Họ và tên đúng"},inputFile:!0,showTimeChange:!0},12:{oldInput:{class:"col-md-4",disable:!1,label:"Ngày sinh sai"},newInput:{class:"col-md-4",disable:!1,label:"Ngày sinh đúng"},inputFile:!0,showTimeChange:!0},32:{oldInput:{class:"col-md-4",disable:!1,label:"Tỉ lệ cũ (%)"},newInput:{class:"col-md-4",disable:!1,label:"Tỉ lệ mới (%)"},showTimeChange:!0,inputFile:!0}},order:{id:null,profile_id:null,order_category:null,order_group:null,order_type_id:null,order_type_alias:null,group_name:null,start_date:null,new_value:null,old_value:null,status:null,deadline:null,note:null,additional_info:{insurance_register:null,pay_rate:null,resp_allowance:null,birthday_status:null},files:[{type:null,file_exist:[],file_add:[]}]},employee:{masterProfile:{id:null,staff_code:null,region:null,fullname:null,status:null,birthday:null,insurance_register:null,health_ins_number:null},empProfile:{position_job:null,position_name:null},user:{id:null,username:null,station_id:null,status_id:null,station_name:null,work_type:null},e_contract:{file:null,savis_code:null},insurance:{id:null,insurance_id:null,status:null,from:null,to:null,insurance_desc:null,company_cost:null,worker_cost:null}},showEmployeeInfo:{staff_code:{category:["insurance","working_process"]},region:null,fullname:{category:["insurance","contract","working_process"]},mp_status:{category:["insurance","working_process"]},birthday:{category:["insurance"]},birthday_status:{category:["insurance"]},insurance_register:null,health_ins_number:null,position_name:{category:["insurance","working_process"]},username:null,station_id:null,status_id:null,station_name:{category:["insurance","working_process"]},work_type:{category:["working_process"]},insurance_id:null,insurance_status:null,insurance_from:null,insurancve_to:null,insurance_desc:{category:["insurance"]},company_cost:null,worker_cost:null},showNoteInput:{category:["working_process"],group:["modify","regime","supply_bhxh","supply_bhyt"],type:[]},staffCodeAlert:null,relateInfo:[],supply_bhxh:"supply_bhxh",filter:{insurance_desc:null,health_ins_number:null,insurance_register:null},showAction:!1}},computed:i()({},Object(_.c)({curUser:"userInfo"}),{showNote:function(){return this.showNoteInput.category.includes(this.order.order_category)||this.showNoteInput.group.includes(this.order.order_group)||this.showNoteInput.type.includes(this.order.order_type_alias)}}),watch:{"order.order_type_id":function(t,e){this.order.id&&(this.order.order_type_id=18),this.order.additional_info.pay_rate=1==+t||33==+t?32:2==+t?.5:null},"order.order_category":function(t,e){this.staffCodeAlert=null,this.idOrder||this.initAndFormatDataFromEmployee()},orderType:{immediate:!0,handler:function(t,e){this.staffCodeAlert=null,this.employee.masterProfile.staff_code=null,this.checkStaffCode(),t?this.initOrderType(t):this.selectGroupOrder(null)}},idOrder:function(t,e){this.staffCodeAlert=null,this.isRelateOrder=!1,t?this.detailOrder(t):this.resetAllData()}},methods:{suggestData:function(){var t=this;if(!this.idOrder&&this.order.order_type_id&&this.order.order_type_alias&&this.order.profile_id&&this.employee.user.id){var e={orderTypeId:this.order.order_type_id,orderTypeAlias:this.order.order_type_alias,profileId:this.order.profile_id,userId:this.employee.user.id,orderCategory:this.order.orderCategory};Se.a.suggestData(e).then(function(e){if(e.data.success){if(e.data.data){if(!e.data.data.saveField||Me.a.isEmpty(e.data.data.suggestData))return;var a=e.data.data.saveField,n=e.data.data.suggestData;for(var i in n)t.order[a][i]=n[i];Me.a.isEmpty(n)&&t.resetObj(t.order[a])}}else e.data.data&&e.data.data.prevent&&(t.staffCodeAlert=e.data.message,t.legalCreate=!1),console.log(e.data.message||"Không lấy được dữ liệu gợi ý cho đề xuất !")}).catch(function(t){console.log(t)})}},getType:function(){var t=this;if(sessionStorage.getItem("hrOrderType"))return this.orderTypeOption=JSON.parse(sessionStorage.getItem("hrOrderType")),void this.initOrderType(this.orderType);Se.a.getType().then(function(e){e.data.success&&(sessionStorage.setItem("hrOrderType",sa()(e.data.data)),t.orderTypeOption=e.data.data,t.initOrderType(t.orderType))}).catch(function(t){console.log(t),Me.a.showMessage("Có lỗi xảy ra, không lấy được danh sách loại khai báo !")})},initOrderType:function(t){var e=null,a=!0,n=!1,i=void 0;try{for(var s,o=fa()(this.orderTypeOption);!(a=(s=o.next()).done);a=!0){var r=s.value;if(r&&!Me.a.isEmpty(r.types)&&(e=r.types.find(function(e){return e.alias===t})))break}}catch(t){n=!0,i=t}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}this.selectTypeOrder(e)},resetAllData:function(){this.selectGroupOrder(null),this.order.id=null,this.order.profile_id=null,this.order.status=null,this.order.files=[{type:null,file_exist:[],file_add:[]}],this.order.deadline=null,this.staffCodeAlert=null,this.censor=null,this.isRelateOrder=null,delete this.order.created_by,this.resetEmployee(),this.initOrderType(this.orderType)},resetEmployee:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;for(var e in this.employee)e!==t&&this.resetObj(this.employee[e])},checkStaffCode:function(){return this.employee.masterProfile.staff_code?this.employee.masterProfile.staff_code.length<8?(this.staffCodeAlert="Mã nhân viên phải bao gồm 8 ký tự số VD: 00345678",this.resetObj(this.employee.masterProfile,"staff_code"),void this.resetEmployee("masterProfile")):void(8!==this.employee.masterProfile.staff_code.length?Me.a.validValue(this.employee.masterProfile,"staff_code",{length:8}):this.getProfileInfo(this.employee.masterProfile.staff_code)):(this.staffCodeAlert=null,void this.resetEmployee())},validData:function(){var t="";return this.order.order_group||(t+="- Loại khai báo\n"),this.order.order_type_id||(t+="- Phương án đề xuất\n"),this.order.profile_id||(t+="- Chọn người lao động\n"),this.order.order_category&&"insurance"!==this.order.order_category||this.order.additional_info.birthday_status||(t+="- Chọn trạng thái ngày sinh\n",this.order.additional_info.birthday_status=""),this.order.additional_info.birthday_status||(t+="- Chỉ có năm sinh\n"),t||!0},updateOrder:function(){var t=this,e=this.validData();if(!0===e){var a=new FormData;for(var n in this.order)("object"!==na()(this.order[n])||this.order[n]instanceof Date)&&(this.order[n]?("order_group"===n&&(this.order[n]="supply_bhxh"),"order_type_name"===n&&(this.order[n]="Chốt sổ nghỉ việc"),"group_name"===n&&(this.order[n]="Cấp/Gộp/Chốt BHXH"),"order_type_alias"===n&&(this.order[n]="supply_bhxh_close"),"order_category_name"===n&&(this.order[n]="BHXH"),"order_category"===n&&(this.order[n]="insurance"),a.append(n,this.order[n])):a.append(n,""));if(Array.isArray(this.order.files)&&this.order.files.length){var i=!0,s=!1,o=void 0;try{for(var r,l=fa()(this.order.files);!(i=(r=l.next()).done);i=!0){var c=r.value;if(Array.isArray(c.file_add))for(var d in c.file_add)c.file_add[d]&&a.append(c.type+"["+d+"]",c.file_add[d])}}catch(t){s=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(s)throw o}}}this.$startLoading(),Se.a.updateOrder(a).then(function(e){e.data.success?(t.$emit("addOrderOk"),t.resetEmployee(),t.resetAllData(),t.showAction=!1,Me.a.showMessage(e.data.message||"Tạo đề xuất thành công","success")):Me.a.showMessage(e.data.message||"Tạo đề xuất không thành công!","warning")}).catch(function(t){console.log(t)}).then(function(e){t.$stopLoading()})}else alert("Vui lòng nhập đủ thông tin:\n"+e)},updateStatusOrder:function(){var t=this,e=new FormData;e.append("id",this.idOrder),e.append("action","duyet"),Se.a.updateStatus(e).then(function(e){e.data.success?(t.$emit("addOrderOk"),t.resetEmployee(),t.resetAllData(),t.showAction=!1,Me.a.showMessage(e.data.message||"Xác nhận bàn giao thành công","success")):Me.a.showMessage(e.data.message||"Không cập nhật được thông tin đề xuất !","warning")}).catch(function(t){console.log(t)}).then(function(e){t.$stopLoading()})},detailOrder:function(t){var e=this;t&&(this.showAction=!0,this.loadingOrderInfo=!0,Se.a.detailOrder({id:t}).then(function(t){t.data.success&&t.data.data?(e.order=t.data.data,"supply_bhxh"!==e.order.order_group&&(e.supply_bhxh="supply_bhxh"),e.duty=t.data.duty,e.censor=t.data.censor,e.relateInfo=t.data.relateInfo||[],t.data.data.profile_id&&(e.employee.masterProfile.staff_code=Me.a.genCode(t.data.data.profile_id,"","",8),e.getProfileInfo(e.employee.masterProfile.staff_code))):Me.a.showMessage(t.data.message||"Không lấy được đề xuất, vui lòng thử lại sau !","warning")}).catch(function(t){Me.a.showMessage("Có lỗi xảy ra, vui lòng thử lại sau !","warning")}).then(function(t){e.loadingOrderInfo=!1}))},getProfileInfo:function(t){var e=this;if(t||(t=this.profileId),t){this.loadingProfileInfo=!0;var a={profileId:t,category:this.order.order_category,group:this.order.order_group,alias:this.order.order_type_alias};Se.a.getProfile(a).then(function(t){t.data.success?(e.staffCodeAlert=null,e.employee=t.data.data,e.filter.insurance_desc=e.employee.insurance.insurance_desc||null,e.filter.health_ins_number=e.employee.masterProfile.health_ins_number||null,e.filter.insurance_register=e.employee.masterProfile.insurance_register||null,e.order.additional_info.birthday_status="dd/mm/yyyy",e.employee.masterProfile.birthday&&(e.employee.masterProfile.birthday=Ye()(e.employee.masterProfile.birthday).format("DD-MM-YYYY")),e.idOrder||(e.order.profile_id=e.employee.masterProfile.id,e.initAndFormatDataFromEmployee())):(Me.a.showMessage(t.data.message||"Không lấy được thông tin người lao động, vui lòng thử lại sau !","warning"),e.resetObj(e.employee.masterProfile,"staff_code"),e.resetEmployee("masterProfile"),e.resetData(),e.staffCodeAlert=t.data.message||"Không tồn tại nhân viên có mã "+e.employee.masterProfile.staff_code)}).catch(function(t){Me.a.showMessage("Có lỗi xảy ra, vui lòng thử lại sau !","warning")}).then(function(t){e.loadingProfileInfo=!1})}},initAndFormatDataFromEmployee:function(){this.order.order_category&&"insurance"!==this.order.order_category||(this.employee.masterProfile&&this.employee.masterProfile.id?this.employee.contract&&this.employee.contract.id?["indefinite","definite","definite_24","probation"].includes(this.employee.contract.type_contract)?this.employee.contract.end_date&&Ye()().isAfter(this.employee.contract.end_date)&&(this.staffCodeAlert=(this.contractType[this.employee.contract.type_contract]||"Hợp đồng")+" của nhân viên này đã hết hạn"):this.staffCodeAlert="Hợp đồng của nhân viên này"+(this.contractType[this.employee.contract.type_contract]?" là "+this.contractType[this.employee.contract.type_contract]:"")+" không phải hợp đồng lao động":this.staffCodeAlert="Nhân viên này chưa có hợp đồng lao động":this.staffCodeAlert=null,this.assignOldData())},canAddLicenses:function(){if(!this.order.files||!this.order.files.length)return!0;var t=this.order.files[this.order.files.length-1];return!!(t&&t.type&&(t.file_add&&t.file_add.length||t.file_exist&&t.file_exist.length))},addLicenses:function(){this.order.files.push({type:null,file_add:[],file_exist:[]})},deleteLicense:function(t){this.order.files[t]&&(this.order.files[t].file_exist&&this.order.files[t].file_exist.length?Me.a.showMessage("Không thể xóa chứng từ đã upload !"):this.order.files.splice(t,1))},selectTypeOrder:function(t){t?(this.order.order_type_id=t.id,this.order.order_type_alias=t.alias,this.order.order_group=t.group_alias,this.order.group_name=t.group_name,this.order.order_category=t.category):(this.order.order_type_id=null,this.order.order_type_alias=null),this.order.new_value=null,this.order.old_value=null,this.modifyConfig[this.order.order_type_id]&&!this.modifyConfig[this.order.order_type_id].inputFile&&(this.order.file=[]),"modify"===this.order.order_group&&this.assignOldData()},assignOldData:function(){"modify"===this.order.order_group&&(7==+this.order.order_type_id&&(this.order.old_value=this.employee.salary.salary,this.inputMoney(this.order,"old_value")),9==+this.order.order_type_id&&(this.order.old_value=this.employee.empProfile.position_job),8==+this.order.order_type_id&&(this.order.old_value=this.employee.user.station_id),32==+this.order.order_type_id&&(this.order.old_value=+this.employee.insurance.company_cost+ +this.employee.insurance.worker_cost))},selectGroupOrder:function(t){t?(this.order.group_name=t.name,this.order.order_group=t.alias,this.order.order_category=t.category):(this.order.group_name=null,this.order.order_group=null,this.order.order_category=null),t&&"up"===t.alias?this.order.order_type_id=1:this.order.order_type_id=null,this.order.order_type_alias=null,this.order.order_type_name=null,this.resetData()},resetData:function(){this.order.new_value=null,this.order.note=null,this.order.old_value=null,this.order.start_date=null,this.order.files=[{type:null,file_add:[],file_exist:[]}],this.order.additional_info?this.resetObj(this.order.additional_info):this.order.additional_info={}},resetObj:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Me.a.resetData(t,e)}}};var Ll=function(t){a("udGv")},Al=Object(y.a)(El,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"small-scrollbar"},[a("div",{staticClass:"order-type"},[a("b-form-row",[a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Loại khai báo"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Loại khai báo "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("select-order-group",{attrs:{"group-options":t.orderTypeOption,group:t.supply_bhxh,disabled:!!t.order.id,"category-group":!0,multiple:!1},on:{input:t.selectGroupOrder}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Phương án"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Phương án "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("select-order-type",{attrs:{"type-options":t.orderTypeOption,"has-group":!1,"group-alias":t.supply_bhxh,type:t.order.order_type_id,disabled:!!t.order.id},on:{input:t.selectTypeOrder}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Hạn duyệt"}},[a("Datepicker",{attrs:{language:t.language.vi,format:"dd/MM/yyyy",placeholder:"dd/mm/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},model:{value:t.order.deadline,callback:function(e){t.$set(t.order,"deadline",e)},expression:"order.deadline"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Trạng thái xử lý"}},[a("select-order-status",{attrs:{status:t.order.status,disabled:!0,placeholder:"Trạng thái"},on:{select:function(e){t.order.status=e?e.value:null}}})],1)],1)],1),t._v(" "),a("div",{staticClass:"employee-info"},[a("div",{staticClass:"header mb-3 mt-1 font-weight-bold"},[t._v("\n      Thông tin người lao động\n    ")]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingProfileInfo,expression:"loadingProfileInfo"}],staticClass:"position-relative"},[a("b-alert",{attrs:{show:!!t.staffCodeAlert&&!t.isRelateOrder,variant:"warning"}},[a("b",[t._v("Lưu ý: ")]),t._v(" "),a("span",{domProps:{innerHTML:t._s(t.staffCodeAlert)}})]),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Mã nhân viên",disabled:!(!t.profileId&&!t.order.id)}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Mã nhân viên "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.employee.masterProfile.staff_code,expression:"employee.masterProfile.staff_code"}],staticClass:"form-control",class:{"is-invalid":""===t.employee.masterProfile.staff_code},attrs:{type:"number",placeholder:"Mã nhân viên"},domProps:{value:t.employee.masterProfile.staff_code},on:{input:[function(e){e.target.composing||t.$set(t.employee.masterProfile,"staff_code",e.target.value)},t.checkStaffCode]}})]),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Họ và tên",disabled:!!t.employee.masterProfile.fullname}},[a("b-input",{attrs:{placeholder:"Họ và tên"},model:{value:t.employee.masterProfile.fullname,callback:function(e){t.$set(t.employee.masterProfile,"fullname",e)},expression:"employee.masterProfile.fullname"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Trạng thái BHXH hiện tại",disabled:!0}},[a("b-input",{attrs:{placeholder:"Trạng thái BHXH hiện tại"},model:{value:t.filter.insurance_desc,callback:function(e){t.$set(t.filter,"insurance_desc",e)},expression:"filter.insurance_desc"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Trạng thái MP",disabled:!!t.employee.masterProfile.status}},[a("b-input",{attrs:{placeholder:"trạng thái master profile"},model:{value:t.employee.masterProfile.status,callback:function(e){t.$set(t.employee.masterProfile,"status",e)},expression:"employee.masterProfile.status"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Vị trí",disabled:!!t.employee.empProfile.position_name}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.employee.empProfile.position_name,expression:"employee.empProfile.position_name"}],staticClass:"form-control",attrs:{placeholder:"Vị trí"},domProps:{value:t.employee.empProfile.position_name},on:{input:function(e){e.target.composing||t.$set(t.employee.empProfile,"position_name",e.target.value)}}})]),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Nơi làm việc (kho hiện tại)",disabled:!!t.employee.user.station_name}},[a("b-input",{attrs:{placeholder:"Nơi làm việc"},model:{value:t.employee.user.station_name,callback:function(e){t.$set(t.employee.user,"station_name",e)},expression:"employee.user.station_name"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Chỉ có năm sinh *",disabled:!!t.order.additional_info.birthday_status}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Chỉ có năm sinh "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("b-select",{attrs:{options:t.birthdayStatusOptions,state:""!==t.order.additional_info.birthday_status&&null},model:{value:t.order.additional_info.birthday_status,callback:function(e){t.$set(t.order.additional_info,"birthday_status",e)},expression:"order.additional_info.birthday_status"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Ngày sinh",disabled:!!t.employee.masterProfile.birthday}},[a("b-input",{attrs:{placeholder:"Ngày sinh"},model:{value:t.employee.masterProfile.birthday,callback:function(e){t.$set(t.employee.masterProfile,"birthday",e)},expression:"employee.masterProfile.birthday"}})],1)],1)],1)]),t._v(" "),a("b-alert",{attrs:{show:!!t.isRelateOrder,variant:"warning"}},[a("b",[t._v("Vui lòng nhập đủ thông tin cho đề xuất liên quan này")])]),t._v(" "),a("div",[a("div",{staticClass:"insurance"},[a("div",{staticClass:"header mb-3 mt-2 font-weight-bold"},[t._v("\n        BHXH, BHYT\n      ")]),t._v(" "),a("div",[a("b-form-row",[a("b-form-group",{staticClass:"col-md-4",attrs:{disabled:!0,label:"Mã số BHXH"}},[a("b-input",{attrs:{placeholder:"Mã số BHXH"},model:{value:t.employee.masterProfile.insurance_register,callback:function(e){t.$set(t.employee.masterProfile,"insurance_register",e)},expression:"employee.masterProfile.insurance_register"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4",attrs:{disabled:!0,label:"Mã số BHYT"}},[a("b-input",{attrs:{placeholder:"Mã số BHYT"},model:{value:t.employee.masterProfile.health_ins_number,callback:function(e){t.$set(t.employee.masterProfile,"health_ins_number",e)},expression:"employee.masterProfile.health_ins_number"}})],1)],1)],1)])])],1),t._v(" "),a("b-form-row",[a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.showNote,expression:"showNote"}],staticClass:"col-md-12",attrs:{label:"Ghi chú"}},[a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.order.note,expression:"order.note",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{name:"note",id:"note",rows:"2"},domProps:{value:t.order.note},on:{input:function(e){e.target.composing||t.$set(t.order,"note",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])],1),t._v(" "),a("fieldset",{staticClass:"border rounded form-group"},[a("legend",{staticClass:"d-inline col-form-label label-file"},[t._v("Thêm chứng từ/File (Nếu có)")]),t._v(" "),t._l(this.order.files,function(e,n){return a("b-form-row",{key:n,staticClass:"border-bottom align-items-center"},[a("b-form-group",{staticClass:"col-md-4 mb-0"},[a("b-select",{attrs:{options:t.fileTypeOptions[t.order.order_category],placeholde:"Chọn loại chứng từ/file"},model:{value:e.type,callback:function(a){t.$set(e,"type",a)},expression:"file.type"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-7 mb-0"},[a("file-view-upload",{staticClass:"d-inline-block",attrs:{"input-id":"file_insurance_"+n,"input-style":{width:"4rem"},"allow-delete":!1,hideUploadButton:!0,height:"5rem",edit:!0,files:e.file_exist||[],"file-add":e.file_add||[]}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-1 mb-0 text-right"},[a("b-btn",{directives:[{name:"show",rawName:"v-show",value:!e.file_exist||!e.file_exist.length,expression:"!file.file_exist || !file.file_exist.length"}],attrs:{variant:"outline-danger",title:"Xóa chứng từ",size:"sm"},on:{click:function(e){return t.deleteLicense(n)}}},[a("i",{staticClass:"fas fa-times"})])],1)],1)}),t._v(" "),a("div",{staticClass:"text-left"},[a("b-btn",{attrs:{variant:"outline-ghtk",size:"sm",disabled:!t.canAddLicenses()},on:{click:function(e){return t.addLicenses()}}},[a("i",{staticClass:"fas fa-plus"}),t._v(" Thêm chứng từ/File")])],1)],2),t._v(" "),a("div",{staticClass:"modal-footer"}),t._v(" "),t.showAction||null!=t.idOrder?a("div",{staticClass:"text-center justify-content-center d-flex mt-3"},[a("b-btn",{staticClass:"w-25",attrs:{variant:"ghtk"},on:{click:t.updateStatusOrder}},[t._v("Xác nhận đã bàn giao")])],1):a("div",{staticClass:"text-center justify-content-center d-flex mt-3"},[a("b-btn",{staticClass:"w-25",attrs:{variant:"ghtk"},on:{click:t.updateOrder}},[t._v(" Tạo đề xuất ")])],1)],1)},[],!1,Ll,"data-v-60bade02",null).exports,Ol={name:"InfoUserOrder",components:{SensitiveLabel:Eo.a},props:{order:{type:Object,default:function(){return{}}},type:{type:Object,default:function(){return{}}},duty:{default:!0},tableName:{type:String},updateVal:{type:Object},editableTag:{default:!0}},data:function(){return{isLoading:!1,listData:[],tags:[]}},watch:{order:{immediate:!0,handler:function(t){t&&t.tags&&(this.tags=t.tags)},updateVal:{immediate:!0,handler:function(t){t&&"tag"===t.field&&(this.tags=t.data)}}}},methods:{formatDate:function(t,e){return Ye()(t||null).format(e||"DD-MM-YYYY")},showModalPhone:function(t){this.$bvModal.show("modal-number-phone-"+t)},closeModalPhone:function(t){this.$bvModal.hide("modal-number-phone-"+t)},showIcon:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"inline-block";document.getElementById(t).style.display=e},onDeleteTag:function(t){var e=this;return l()(o.a.mark(function a(){var n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!confirm("Bạn có chắc muốn xóa tag "+t.name+" ?")){a.next=7;break}return e.loading=!0,a.next=5,yn.a.detach({record_id:+t.record_id,table_name:t.table_name,hr_tag_id:+t.id});case 5:(n=a.sent).data.success?(e.tags=e.tags.filter(function(e){return+e.id!=+t.id}),e.order.tags=e.tags,e.$emit("clickAction",{action:"refreshHrTag"}),Me.a.showMessage(n.data.message||"Bỏ gắn tag thành công!","success")):Me.a.showMessage(n.data.message,"warning");case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),Me.a.showMessage(a.t0.message,"warning");case 12:return a.prev=12,e.loading=!1,a.finish(12);case 15:case"end":return a.stop()}},a,e,[[0,9,12,15]])}))()},showMessage:function(){Me.a.showMessage("Bạn không có quyền xem thông tin!","warning")},openLink:function(t,e){var a=t.split(".").pop();["pdf","docx"].includes(a)?window.open(t):this.$el.querySelector(".file-"+e).$viewer.show()},showImage:function(t,e){var a=t.length;if(1===a||""===t[1])this.openLink(t[0],e);else for(var n=0;n<a;n++)this.openLink(t[n],e)}}};var Nl=function(t){a("o1+c")},Rl=Object(y.a)(Ol,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"box-user d-flex justify-content-between"},[a("div",{staticClass:"d-flex"},[a("div",{staticClass:"avt-user"},[a("img",{attrs:{src:t.order.profile_info.image_profile,alt:"avatar user",width:"52",height:"52"}})]),t._v(" "),a("div",{staticClass:"info-user ml-3"},[a("div",{staticClass:"info-user-name"},[a("b",[t._v(t._s(t.order.profile_info.fullname)+" ("+t._s(t.order.profile_info.username)+")")])]),t._v(" "),a("div",{staticClass:"info-user-position"},[t._v("\n          "+t._s(t.order.profile_info.position_name)+" - "+t._s(t.order.profile_info.station)+"\n        ")])])]),t._v(" "),a("div",{staticClass:"btn-chat"},[a("div",{staticClass:"mb-1"},[t.duty?a("b-dropdown",{staticClass:"p-0 dropdown-action-view",attrs:{size:"md",variant:"link","toggle-class":"text-decoration-none","no-caret":""}},[a("template",{staticClass:"p-0",slot:"button-content"},[a("b-btn",{staticClass:"btn-sm",attrs:{variant:"outline-ghtk",name:"stop-work-btn-view-duty",id:"stop-work-btn-view-duty"}},[t._v("Xem")])],1),t._v(" "),a("b-dropdown-item",[a("a",{attrs:{name:"stop-work-btn-sos-stop-work",id:"stop-work-btn-sos-stop-work"},on:{click:function(e){return t.$emit("clickAction",{action:"view_group_chat",channel_id:t.order.chat_channel_id})}}},[t._v("SOS nghỉ việc")])]),t._v(" "),a("b-dropdown-item",[a("a",{attrs:{name:"stop-work-btn-view-order",id:"stop-work-btn-view-order"},on:{click:function(e){return t.$emit("clickAction",{action:"view_order",order_id:t.order.id})}}},[t._v("Xem đề xuất")])]),t._v(" "),a("b-dropdown-item",[a("a",{attrs:{name:"stop-work-btn-view-profile-cod",id:"stop-work-btn-view-profile-cod",target:"_blank"},on:{click:function(e){return t.$emit("clickAction",{action:"view_profile_cod",data:t.order.profile_info})}}},[t._v("\n              Xem profile\n            ")])])],2):a("b-btn",{staticClass:"btn-sm",attrs:{variant:"outline-ghtk",name:"stop-work-btn-show-message",id:"stop-work-btn-show-message"},on:{click:function(e){return t.showMessage()}}},[t._v("Xem")])],1),t._v(" "),a("div",{staticClass:"mt-1"},[a("b-btn",{staticClass:"btn-sm",attrs:{variant:"outline-ghtk",name:"stop-work-btn-call",id:"stop-work-btn-call"},on:{click:function(e){return t.showModalPhone(t.order.id)}}},[t._v("Gọi")])],1)])]),t._v(" "),a("div",{staticClass:"mb-1 mt-1 d-flex"},[a("div",{staticClass:"text-start-date"},[a("b",[t._v(" Ngày bắt đầu nghỉ: "),a("span",[t._v(t._s(t.formatDate(t.order.resign_info.resign_date||t.order.created,"DD/MM/YYYY")))])])])]),t._v(" "),a("div",{staticClass:"btn-tags mb-1 mt-1"},[a("div",{staticClass:"d-flex mt-2 content-tag"},["cho_duyet"===t.order.status?a("div",{staticClass:"pl-1 pr-1 mr-1 mb-1 tag-default"},[t._v("\n        Chưa duyệt đề xuất\n      ")]):t.order.check_transfer?!t.order.check_deposit&&t.order.checkShowDeposit?a("div",[a("span",{staticClass:"pl-1 pr-1 mr-1 mb-1 tag-default"},[t._v("Chưa thanh toán cọc")])]):t.order.checkChotSo?t._e():a("div",[t.order.checkStatusBHXH?t._e():a("span",{staticClass:"pl-1 pr-1 mr-1 mb-1 tag-default"},[t._v("\n            Chưa chốt sổ BHXH\n        ")])]):a("div",{staticClass:"pl-1 pr-1 mr-1 mb-1 tag-default"},[t._v("\n        Chưa thu hồi CCDC\n      ")]),t._v(" "),(t.order.checkChotSo||t.order.checkStatusBHXH)&&t.order.check_deposit&&!t.order.statusContract&&t.order.check_transfer?a("div",[a("span",{staticClass:"pl-1 pr-1 mr-1 mb-1 tag-default"},[t._v("\n            Chưa thanh lý HĐ\n        ")])]):t._e(),t._v(" "),t._l(t.order.fixedTags||[],function(e,n){return a("div",{key:"fixed_tag"+n,staticClass:"d-inline-block pr-2 pl-2 mb-1",style:e.style},[t._v(t._s(e.name))])}),t._v(" "),t._l(t.tags,function(e,n){return[a("div",{key:n,staticClass:"d-inline-block mr-1 mb-1 cursor-pointer position-relative",on:{mouseover:function(a){return t.showIcon("iconDeleteTag"+e.record_id+n)},mouseout:function(a){return t.showIcon("iconDeleteTag"+e.record_id+n,"none")},click:function(a){return t.onDeleteTag(e)}}},[a("div",{staticClass:"d-inline-block tag",style:JSON.parse(e.style)},[t._v("\n            "+t._s(e.name)+"\n          ")]),t._v(" "),a("i",{staticClass:"fa fa-times-circle deleteTag",attrs:{id:"iconDeleteTag"+e.record_id+n}})])]}),t._v(" "),t.editableTag?a("span",{staticClass:"d-inline-block cursor-pointer text-ghtk ml-2 align-items-baseline",on:{click:function(e){return t.$emit("action",{action:"tag",data:{}})}}},[a("i",{staticClass:"fas fa-plus"}),t._v(" Tag")]):t._e()],2)]),t._v(" "),a("div",{staticClass:"profile-document d-flex"},[t._l(t.order.files,function(e,n){return t.order.files?[a("div",{directives:[{name:"viewer",rawName:"v-viewer"}],key:n,staticClass:"position-relative mr-1",class:n<3?"d-inline-block":"d-none"},[a("div",{staticClass:"document-type-desc"},[t._v("\n          Đơn xin nghỉ việc CT"+t._s(t.order.id)+"\n        ")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.num_file>1,expression:"documentType.num_file > 1"}],staticClass:"num-img-extend"},[t._v("\n          +"+t._s(e.num_file-1)+"\n        ")]),t._v(" "),t._l(e.file_exist,function(t,e){return[a("img",{key:n+"_"+e,staticClass:"image-document",class:(e||n)&&"d-none",attrs:{width:"108",height:"150",src:t.link,alt:""}})]})],2)]:t._e()}),t._v(" "),t.order.relate_order?[t.order.relate_order.files?a("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"position-relative file-relate mr-1 file-relate",on:{click:function(e){return t.showImage(t.order.relate_order.files,"relate")}}},[a("div",{staticClass:"document-type-desc"},[t._v("\n          Sổ BHXH - BH"+t._s(t.order.relate_order.hrOrder.id)+"\n        ")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.order.relate_order.files.length-1>1,expression:"order.relate_order.files.length - 1 > 1"}],staticClass:"num-img-extend"},[t._v("\n          +"+t._s(t.order.relate_order.files.length-1)+"\n        ")]),t._v(" "),t._l(t.order.relate_order.files,function(t,e){return a("div",[a("b-img",{key:e,staticClass:"image-document",class:e&&"d-none",attrs:{width:"108",height:"150",src:t,alt:"file chốt sổ BHXH"}})],1)})],2):t._e()]:t._e(),t._v(" "),t.order.fileContract?[a("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"position-relative file-contract mr-1",on:{click:function(e){return t.showImage(t.order.fileContract.file,"contract")}}},[a("div",{staticClass:"document-type-desc"},[t._v("\n        Thanh lý HĐ - TL"+t._s(t.order.fileContract.code)+"\n        ")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.order.fileContract.file.length>1,expression:"order.fileContract.file.length > 1"}],staticClass:"num-img-extend"},[t._v("\n          +"+t._s(t.order.fileContract.file.length)+"\n        ")]),t._v(" "),t._l(t.order.fileContract.file,function(e,n){return a("div",{staticClass:"box-file-contract",on:{click:function(a){return t.openLink(e,"contract")}}},[a("b-img",{key:n,staticClass:"image-document-contract",class:n&&"d-none",attrs:{width:"108",height:"150",src:e,frameborder:"0",title:"File thanh lý hợp đồng"}})],1)})],2)]:t._e()],2),t._v(" "),a("div",[a("b-modal",{ref:"phone-number",attrs:{id:"modal-number-phone-"+t.order.id,title:"Gọi ứng viên",centered:"","hide-header-close":!0,"title-class":"w-100","header-class":"text-center modal-phone","hide-footer":"",size:"sm"}},[a("div",{staticClass:"pl-3"},[a("div",{staticClass:"mb-2"},[a("b",{staticClass:"font-weight-bold"},[t._v("Họ tên:")]),t._v(" "),a("span",[t._v(t._s(t.order.profile_info.fullname))])]),t._v(" "),a("div",{staticClass:"mb-2"},[a("b",{staticClass:"font-weight-bold"},[t._v("Vị trí:")]),t._v(" "),a("span",[t._v(t._s(t.order.profile_info.position_name))])]),t._v(" "),a("div",[a("b",{staticClass:"font-weight-bold"},[t._v("Số điện thoại:")]),t._v(" "),a("SensitiveLabel",{staticClass:"d-inline",attrs:{"data-input":t.order.profile_info.tel,"user-id":t.order.profile_info.user_id,type:"tel",source:"closing-shift.stop-work"}})],1)]),t._v(" "),a("div",{staticClass:"mt-2 d-flex justify-content-center"},[a("b-btn",{staticClass:"btn text-white btn__close-modal-phone font-weight-bold",on:{click:function(e){return t.closeModalPhone(t.order.id)}}},[t._v("\n          Đóng\n        ")])],1)])],1)])},[],!1,Nl,"data-v-4873a080",null).exports,Ul={name:"DetailStatusOrderStopWork",props:{dataOrder:{default:null},showStatus:{type:Boolean,default:!0}},data:function(t){return{displayUser:!1,censors:[]}},created:function(){this.allowDisplayInfo(this.dataOrder.status)},methods:{allowDisplayInfo:function(t){return["da_duyet","dat_duyet_leader","da_duyet_supervisor","hoan_thanh"].includes(t)},showModalCensor:function(t){this.$emit("showCensorOrder",t)},showModalCensorAccountant:function(t,e,a){var n={allDataCensor:t,action:e,master_id:a};this.$emit("showCensorAccount",n)}}};var $l=function(t){a("UflE")},Hl={name:"DetailLogOrderStopWork",props:{detailLog:{default:null}},methods:{formatDate:function(t,e){return Ye()(t||null).format(e||"DD-MM-YYYY HH:mm:ss")}}};var Bl=function(t){a("5g/Z")},jl={name:"row-data",components:{InfoUserOrderStopWork:Rl,DetailStatusOrderStopWork:Object(y.a)(Ul,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detail-log-orders mt-3"},[a("ul",{staticClass:"ant-timeline"},[t._m(0),t._v(" "),a("li",{staticClass:"ant-timeline-item"},[a("div",{staticClass:"ant-timeline-item-tail"}),t._v(" "),a("div",{staticClass:"ant-timeline-item-head-blue",class:t.allowDisplayInfo(t.dataOrder.status)?"ant-timeline-item-head-active":"ant-timeline-item-head"},[a("div",{staticClass:"checkmark"})]),t._v(" "),a("div",{staticClass:"ant-timeline-item-content"},[a("div",{staticClass:"row"},[t._m(1),t._v(" "),t.allowDisplayInfo(t.dataOrder.status)?t._e():a("div",{staticClass:"d-flex col-sm-6 col-md-8"},[t.dataOrder.censor?a("div",{staticClass:"content-right-status align-self-center"},[t.dataOrder.censor.avatar?a("span",{staticClass:"mr-1"},[a("img",{attrs:{src:t.dataOrder.censor.avatar,alt:"avt user",width:"25",height:"25"}})]):t._e(),t._v(" "),a("span",{staticClass:"info-user-name"},[t._v(t._s(t.dataOrder.censor.username||""))]),t._v(" - "),a("span",[t._v(t._s(t.dataOrder.censor.position_name||""))])]):a("div",{staticClass:"content-right-status align-self-center"},[a("span",[t._v("Đề xuất chưa gán người xử lý!")])]),t._v(" "),a("div",{staticClass:"item-button ml-3"},[a("b-btn",{staticClass:"text-success border-0 btn-default",on:{click:function(e){return t.showModalCensor(t.dataOrder.id)}}},[a("i",{staticClass:"fas fa-edit text-success"})])],1)])])])]),t._v(" "),t.showStatus?a("li",{staticClass:"ant-timeline-item"},[a("div",{staticClass:"ant-timeline-item-tail"}),t._v(" "),a("div",{staticClass:"ant-timeline-item-head-blue",class:t.dataOrder.check_transfer?"ant-timeline-item-head-active":"ant-timeline-item-head"},[a("div",{staticClass:"checkmark"})]),t._v(" "),a("div",{staticClass:"ant-timeline-item-content"},[a("div",{staticClass:"row"},[t._m(2),t._v(" "),t.dataOrder.check_transfer?t._e():a("div",{staticClass:"d-flex col-sm-6 col-md-8"},[t.dataOrder.userHandlerCCDC?a("div",{staticClass:"content-right-status align-self-center"},[t.dataOrder.userHandlerCCDC.avatar?a("span",{staticClass:"mr-1"},[a("img",{attrs:{src:t.dataOrder.userHandlerCCDC.avatar,alt:"avt user",width:"25",height:"25"}})]):t._e(),t._v(" "),a("span",{staticClass:"info-user-name"},[t._v(t._s(t.dataOrder.userHandlerCCDC.username||""))]),t._v(" - "),a("span",[t._v(t._s(t.dataOrder.userHandlerCCDC.position_name||""))])]):a("div",{staticClass:"content-right-status align-self-center"},[a("span",[t._v("Đề xuất chưa gán người xử lý!")])]),t._v(" "),a("div",{staticClass:"item-button ml-3"},[a("b-btn",{staticClass:"text-success border-0 btn-default",on:{click:function(e){return t.showModalCensorAccountant(t.dataOrder.userHandlerCCDCs,"thu_hoi_ccdc",t.dataOrder.profile_id)}}},[a("i",{staticClass:"fas fa-edit text-success"})])],1)])])])]):t._e(),t._v(" "),t.dataOrder.checkShowDeposit&&t.showStatus?a("li",{staticClass:"ant-timeline-item"},[a("div",{staticClass:"ant-timeline-item-tail"}),t._v(" "),a("div",{staticClass:"ant-timeline-item-head-blue",class:t.dataOrder.check_deposit?"ant-timeline-item-head-active":"ant-timeline-item-head"},[a("div",{staticClass:"checkmark"})]),t._v(" "),a("div",{staticClass:"ant-timeline-item-content"},[a("div",{staticClass:"row"},[t._m(3),t._v(" "),t.dataOrder.check_deposit?t._e():a("div",{staticClass:"d-flex col-sm-6 col-md-8"},[t.dataOrder.censorAccountant?a("div",{staticClass:"content-right-status align-self-center"},[t.dataOrder.censorAccountant.avatar?a("span",{staticClass:"mr-1"},[a("img",{attrs:{src:t.dataOrder.censorAccountant.avatar,alt:"avt user",width:"25",height:"25"}})]):t._e(),t._v(" "),a("span",{staticClass:"info-user-name"},[t._v(t._s(t.dataOrder.censorAccountant.username||""))]),t._v(" - "),a("span",[t._v(t._s(t.dataOrder.censorAccountant.position_name||""))])]):a("div",{staticClass:"content-right-status align-self-center"},[a("span",[t._v("Đề xuất chưa gán người xử lý!")])]),t._v(" "),a("div",{staticClass:"item-button ml-3"},[a("b-btn",{staticClass:"text-success border-0 btn-default",on:{click:function(e){return t.showModalCensorAccountant(t.dataOrder.censorAllAccountant,"thanh_toan_coc",t.dataOrder.profile_id)}}},[a("i",{staticClass:"fas fa-edit text-success"})])],1)])])])]):t._e(),t._v(" "),!t.dataOrder.checkChotSo&&t.showStatus?a("li",{staticClass:"ant-timeline-item"},[a("div",{staticClass:"ant-timeline-item-tail"}),t._v(" "),a("div",{staticClass:"ant-timeline-item-head-blue",class:t.dataOrder.checkStatusBHXH?"ant-timeline-item-head-active":"ant-timeline-item-head"},[a("div",{staticClass:"checkmark"})]),t._v(" "),a("div",{staticClass:"ant-timeline-item-content"},[a("div",{staticClass:"row"},[t._m(4),t._v(" "),t.dataOrder.checkStatusBHXH||t.dataOrder.checkChotSo?t._e():a("div",{staticClass:"d-flex col-sm-6 col-md-8"},[t.dataOrder.userHandlerBHXH?a("div",{staticClass:"content-right-status align-self-center"},[t.dataOrder.userHandlerBHXH.avatar?a("span",{staticClass:"mr-1"},[a("img",{attrs:{src:t.dataOrder.userHandlerBHXH.avatar,alt:"avt user",width:"25",height:"25"}})]):t._e(),t._v(" "),a("span",{staticClass:"info-user-name"},[t._v(t._s(t.dataOrder.userHandlerBHXH.username||""))]),t._v(" - "),a("span",[t._v(t._s(t.dataOrder.userHandlerBHXH.position_name||""))])]):a("div",{staticClass:"content-right-status align-self-center"},[t.dataOrder.relate_order?a("span",[t._v("Chưa có gán người xử lý đề xuất!")]):a("span",[t._v("Chưa có đề xuất chốt sổ bảo hiểm xã hội!")])]),t._v(" "),a("div",{staticClass:"item-button ml-3"},[t.dataOrder.relate_order?a("b-btn",{staticClass:"text-success border-0 btn-default",on:{click:function(e){return t.showModalCensor(t.dataOrder.relate_order.hrOrder.id)}}},[a("i",{staticClass:"fas fa-edit text-success"})]):t._e()],1)])])])]):t._e(),t._v(" "),t.showStatus?a("li",{staticClass:"ant-timeline-item"},[a("div",{staticClass:"ant-timeline-item-tail"}),t._v(" "),a("div",{staticClass:"ant-timeline-item-head-blue",class:t.dataOrder.statusContract?"ant-timeline-item-head-active":"ant-timeline-item-head"},[a("div",{staticClass:"checkmark"})]),t._v(" "),a("div",{staticClass:"ant-timeline-item-content"},[a("div",{staticClass:"row"},[t._m(5),t._v(" "),t.dataOrder.statusContract?t._e():a("div",{staticClass:"d-flex col-sm-6 col-md-8"},[t.dataOrder.userHandlerHD?a("div",{staticClass:"content-right-status align-self-center"},[t.dataOrder.userHandlerHD.avatar?a("span",{staticClass:"mr-1"},[a("img",{attrs:{src:t.dataOrder.userHandlerHD.avatar,alt:"avt user",width:"25",height:"25"}})]):t._e(),t._v(" "),a("span",{staticClass:"info-user-name"},[t._v(t._s(t.dataOrder.userHandlerHD.username||""))]),t._v(" - "),a("span",[t._v(t._s(t.dataOrder.userHandlerHD.position_name||""))])]):a("div",{staticClass:"content-right-status align-self-center"},[a("span",[t._v("Đề xuất chưa gán người xử lý!")])]),t._v(" "),a("div",{staticClass:"item-button ml-3"},[a("b-btn",{staticClass:"text-success border-0 btn-default",on:{click:function(e){return t.showModalCensorAccountant(t.dataOrder.userHandlerHDs,"thanh_ly_hd",t.dataOrder.profile_id)}}},[a("i",{staticClass:"fas fa-edit text-success"})])],1)])])])]):t._e()])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"ant-timeline-item"},[e("div",{staticClass:"ant-timeline-item-tail"}),this._v(" "),e("div",{staticClass:"ant-timeline-item-head-active ant-timeline-item-head-blue"},[e("div",{staticClass:"checkmark"})]),this._v(" "),e("div",{staticClass:"ant-timeline-item-content"},[e("b",[this._v("Tạo đề xuất")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-sm-6 col-md-4 txt-status"},[e("b",[this._v("Duyệt đề xuất")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-sm-6 col-md-4 txt-status"},[e("b",[this._v("Thu hồi công cụ, dụng cụ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-sm-6 col-md-4 txt-status"},[e("b",[this._v("Thanh toán cọc")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-sm-6 col-md-4 txt-status"},[e("b",[this._v("Chốt sổ bảo hiểm xã hội")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-sm-6 col-md-4 txt-status"},[e("b",[this._v("Thanh lý hợp đồng")])])}],!1,$l,"data-v-b4ed1914",null).exports,DetailLogOrderStopWork:Object(y.a)(Hl,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detail-logs-update"},[t._m(0),t._v(" "),a("div",{staticClass:"content-detail-log"},[t.detailLog.logs?a("ul",{staticClass:"log-timeline"},t._l(t.detailLog.logs,function(e,n){return a("li",{key:n,staticClass:"log-timeline-item"},[a("div",{staticClass:"log-timeline-item-tail"}),t._v(" "),a("div",{staticClass:"log-timeline-item-head ant-timeline-item-head-blue"}),t._v(" "),a("div",{staticClass:"log-timeline-item-content"},[a("span",[t._v(t._s(t.formatDate(e.created,"DD-MM-YYYY HH:mm:ss"))+" ")]),t._v(" "),e.created_by?a("span",[t._v(t._s(e.created_by.username||"")+"\n            "),e.created_by.position_name?a("span",[t._v("- "+t._s(e.created_by.position_name||""))]):t._e()]):t._e(),t._v(" "),!e.message||e.message.old||e.message.new?t._e():a("span",{domProps:{innerHTML:t._s(e.message)}})])])}),0):t._e()])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"log-title"},[e("b",{staticClass:"text-deatil-log"},[this._v("Chi tiết log")])])}],!1,Bl,"data-v-3a4f8e67",null).exports},props:{data:{default:null,type:Object},index:{default:null},checkDuty:{default:!1},editableTag:{default:!0},searchOrder:{default:!1},showAction:{type:Boolean,default:!0}},data:function(t){return{}},computed:{},created:function(){this.allowConfirm()},methods:{checkShowData:function(t){var e=this.orders[t].order;if(e.check_deposit&&e.statusContract&&e.check_transfer&&"hoan_thanh"===e.status&&!this.searchOrder)if(e.relate_order){if(e.checkStatusBHXH)return!1}else if(e.checkChotSo)return!1;return!0},allowConfirm:function(t){return["da_duyet","da_duyet_leader","da_duyet_supervisor","tu_choi","hoan_thanh"].includes(t)},checkShowModal:function(t,e){var a={index:t,status:e,action:"checkShowModal"};this.$emit("changeAction",a)},showModalContract:function(t){var e={contract:t,action:"showModalContract"};this.$emit("changeAction",e)},updateStatus:function(t,e,a){var n={index:t,status:e,note:a,action:"updateStatus"};this.$emit("changeAction",n)},actionUpdateRecord:function(t){var e={data:t,action:"actionUpdateRecord"};this.$emit("changeAction",e)},handleToggleModalHrTag:function(){var t={data:arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,action:"handleToggleModalHrTag"};this.$emit("changeAction",t)},showListCensorOrder:function(t){var e={orderId:t,action:"showListCensorOrder"};this.$emit("changeAction",e)},showListCensorAccount:function(t){var e={data:t,action:"showListCensorAccount"};this.$emit("changeAction",e)},action:function(t,e){var a={data:t,arguments:e,action:"action"};this.$emit("changeAction",a)},showModalExplain:function(t){var e={order:t,action:"showModalExplainResign"};this.$emit("changeAction",e)}}};var Fl=function(t){a("DPob")},ql=Object(y.a)(jl,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"pt-3"},[a("InfoUserOrderStopWork",{attrs:{order:t.data.order,duty:t.checkDuty},on:{action:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return t.action.apply(void 0,[t.data].concat(n))},clickAction:t.actionUpdateRecord}})],1),t._v(" "),a("td",{staticClass:"pt-0"},[a("div",[a("DetailStatusOrderStopWork",{attrs:{dataOrder:t.data.order,type:t.data.type,showStatus:t.showAction,editableTag:t.editableTag,tableName:"stop_working"},on:{toggleModalHrTag:t.handleToggleModalHrTag,showCensorOrder:t.showListCensorOrder,showCensorAccount:t.showListCensorAccount}})],1),t._v(" "),a("div",[a("DetailLogOrderStopWork",{attrs:{detailLog:t.data.order}})],1)]),t._v(" "),t.data.order.hideAction?a("td",{staticClass:"text-center box-btn-action"}):a("td",{staticClass:"text-center box-btn-action"},[t.showAction?a("div",{staticClass:"mt-2 mb-2"},[a("b-btn",{staticClass:"btn-sm",attrs:{variant:"outline-ghtk"},on:{click:function(e){return t.checkShowModal(t.index,"ghi_chu")}}},[t._v("\n          Ghi chú\n        ")])],1):t._e(),t._v(" "),t.data.order.checkActionConfirm?a("div",{staticClass:"mb-2 mt-2"},[t.allowConfirm(t.data.order.status)?t._e():a("b-btn",{staticClass:"btn-sm",attrs:{variant:"outline-ghtk"},on:{click:function(e){return t.checkShowModal(t.index,"duyet")}}},[t._v("Duyệt\n        ")])],1):t._e(),t._v(" "),t.data.order.checkActionConfirm?a("div",{staticClass:"mt-2 mb-2"},[t.allowConfirm(t.data.order.status)?t._e():a("b-btn",{staticClass:"btn__refuse btn-sm",attrs:{variant:"outline-danger"},on:{click:function(e){return t.checkShowModal(t.index,"tu_choi")}}},[t._v("Từ chối")])],1):t._e(),t._v(" "),!t.data.order.checkChotSo&&t.data.order.showActionBHXH&&"hoan_thanh"==t.data.order.status?a("div",{staticClass:"mb-2 mt-2"},[a("b-btn",{staticClass:"btn-sm",attrs:{variant:"outline-ghtk"},on:{click:function(e){return t.checkShowModal(t.index,"chot_so")}}},[t._v("Chốt sổ BHXH\n        ")])],1):t._e(),t._v(" "),t.data.order.checkActionHD&&!t.data.order.statusContract&&"hoan_thanh"==t.data.order.status?a("div",{staticClass:"mt-2 mb-2"},[a("b-btn",{staticClass:"outline-ghtk btn-sm",attrs:{variant:"outline-ghtk"},on:{click:function(e){return t.showModalContract(t.data.order.contract)}}},[t._v("Thanh lý HĐ")])],1):t._e(),t._v(" "),t.data.order.can_action_explain?a("div",{staticClass:"mt-2 mb-2"},[a("b-btn",{staticClass:"btn__refuse btn-sm",attrs:{variant:"outline-danger"},on:{click:function(e){return t.showModalExplain(t.data.order)}}},[t._v("Giải trình")])],1):t._e()])])},[],!1,Fl,"data-v-4fc5a888",null).exports,Yl=a("XbZs"),zl=this,Gl={name:"order-dashboard-quit-job",props:{teamId:{default:null},showElement:{type:Boolean,default:!0},getResignTrigger:{default:!1}},components:{ApproveResignWorkModal:Yl.a,RowData:ql,UpdateOrder:ye.default,UpdateOrderStopWork:Al,MultiSelectPosition:be.a,TimeLine:Ce.a,MultiSelectProvince:fe.a,MultiSelectStation:ge.a,MultiSelectRegion:me.a,SingleSelectUser:Ie.a,ModalLiquidateContract:Tl.a,HrTagModal:vi,MultiSelectHrTag:Ts.a,InfiniteLoading:Fr.a},data:function(t){return{loading:!1,loadingTotal:!0,statusDeposit:!1,page:{current:0,total:null,per_page:null},filter:{province:null,station:null,typeStopWork:"stop_working",resign_info:null,username:null,department_id:null,position_id:null,search_order:!1,statusOrderStop:null,tagName:null,tag:null},contract:{id:null,status:null,contract_number:null},orders:[],createOrderType:"insurance",curOrder:{idx:null,id:null},idxCurrentOrderUpdateStatus:null,currentUserUpdateStatus:null,rejectReason:null,profile:null,statusOrder:null,totalOrderStop:0,totalChotSo:0,totalThanhLy:0,totalDeposit:0,totalAll:0,allDataCensor:[],actionHandler:null,idHrOrder:null,userCensor:null,userCensorAccount:!1,masterId:null,statistics:{allOrder:{status:"allOrder",tableName:"stop_working",type:"all",desc:"Tất cả",id:"stop-work-btn-all",name:"stop-work-btn-all",total:zl.totalAll},stop_working:{tableName:"stop_working",status:"cho_duyet",type:"stop_working",desc:"Chưa duyệt đề xuất",id:"stop-work-btn-pending",name:"stop-work-btn-pending",total:0},chua_thu_hoi_ccdc:{tableName:"stop_working",status:"chua_thu_hoi_ccdc",type:"status_CCDC",desc:"Chưa thu hồi CCDC",total:0,id:"stop-work-btn-not-refund-ccdc",name:"stop-work-btn-not-refund-ccdc"},chua_thanhtoan_coc:{tableName:"stop_working",status:"chua_thanhtoan_coc",type:"new_deposit",desc:"Chưa thanh toán cọc",total:0,id:"stop-work-btn-deposit-not-paid",name:"stop-work-btn-deposit-not-paid"},chua_chotso_bhxh:{tableName:"stop_working",status:"co_ket_qua",type:"suplly_bhxh",desc:"Chưa chốt sổ BHXH",total:0,id:"stop-work-btn-not-complete-social-insurance",name:"stop-work-btn-not-complete-social-insurance"},chua_thanhly_hd:{tableName:"stop_working",status:"chua_thanhly_hd",type:"new_contract",desc:"Chưa thanh lý HĐ",total:0,id:"stop-work-btn-contract-liquidation",name:"stop-work-btn-contract-liquidation"}},cur_work:{},openModalHrTag:!1,curTagData:{record:{},attach:!0},recordUpdateVal:{type:"",data:null},reloadTag:0,tags:[],hr_order_data:{cur_type:{},cur_order:{},duty:[],reject_reason:null,create_order_type:null},editableTag:!0,resetUser:!1,cur_tag:{tableName:"all_stop_work"},checkReason:!1,checkDuty:!0,orderId:null,orderType:"stop_working",totalPerPage:6,checkLoadData:!0,checkLoadTotal:!0,isShowApproveModal:!1}},computed:i()({},Object(_.c)({userInfo:"userInfo"})),watch:{cur_work:{deep:!0,handler:function(t,e){t.tableName&&(this.getTags(),this.reloadTag++),"rejected"===t.alias?this.editableTag=!1:this.editableTag=!0}},getResignTrigger:function(){this.orders=[],this.page.current=1,this.$refs.infiniteLoading&&this.$refs.infiniteLoading.stateChanger.reset(),this.listOrder(null,!0)}},created:function(){this.showElement&&!this.teamId?(this.listOrder(),this.listTotalOrder(),this.cur_work="allOrder"):(this.page.current=1,this.page.per_page=6,this.listOrder(null,!0))},mounted:function(){Me.a.importLibraryTracingLogs()},beforeDestroy:function(){Me.a.removeLibraryTracingLogs()},methods:{infiniteHandlerOffWork:function(t){this.page.current+=1,this.checkLoadData&&this.listOrder(t,!1)},listOrder:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.checkLoadData){this.teamId&&(this.showElement=!1),this.checkLoadData=!1;var n=i()({},this.filter);n.perPage=this.page.per_page,n.page=this.page.current,n.teamId=this.teamId||null,this.loading=!0,this.$startLoading(),Se.a.getAllOrderOrUserStopWork(n).then(function(n){if(n.data.success){if(!Me.a.isEmpty(e))if(Me.a.isEmpty(n.data.data))e.complete(),t.loading=!1;else if(!a){var i;(i=t.orders).push.apply(i,d()(n.data.data)),t.loading=!1,e.loaded()}t.checkDuty=n.data.checkDuty,t.page.total=+n.data.total,t.totalAll=n.data.total||0,t.resetUser=!0,t.teamId?(a||Me.a.isEmpty(e))&&(t.orders=n.data.data,t.$refs.infiniteLoading&&t.$refs.infiniteLoading.stateChanger.reset(),t.page.current=1):t.orders=n.data.data;var s=!1;t.orders&&t.orders.length>0&&(s=!0),t.$emit("action",{action:"check_open",checkOpen:s,screen:"off_work"}),t.$emit("getTotal",{action:"total_off_work",total:n.data.total||0})}else Me.a.isEmpty(e)||e.complete(),Me.a.showMessage(n.data.message||"Không lấy được danh sách đề xuất !");t.checkLoadData=!0,t.loading=!1,t.$stopLoading()}).catch(function(t){Me.a.showMessage("Có lỗi xảy ra, vui lòng thử lại sau !"),console.log(t)}).finally(function(e){t.checkLoadData=!0,t.loading=!1,t.$stopLoading()})}},listTotalOrder:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.checkLoadTotal=!1,this.loading=!0,this.$startLoading(),Se.a.getCountOrderStopWork({teamId:e}).then(function(e){e.data.success?t.teamId?t.$emit("getTotal",{action:"total_off_work",total:e.data.data.total||0}):(t.statistics.stop_working.total=e.data.data.totalOrderStop||0,t.statistics.chua_chotso_bhxh.total=e.data.data.totalChotSo||0,t.statistics.chua_thanhly_hd.total=e.data.data.totalThanhLy||0,t.statistics.chua_thanhtoan_coc.total=e.data.data.totalDeposit||0,t.statistics.chua_thu_hoi_ccdc.total=e.data.data.totalCCDC||0):Me.a.showMessage(e.data.message||"Không lấy được số lượng các đề xuất !"),t.checkLoadTotal=!0}).catch(function(t){Me.a.showMessage("Có lỗi xảy ra, vui lòng thử lại sau !"),console.log(t)}).finally(function(e){t.loading=!1,t.checkLoadTotal=!0,t.loadingTotal=!1,t.$stopLoading()})},handleProvinceSelected:function(t){this.filter.province=t?t.map(function(t){return t.id}).toString():""},handleStationSelected:function(t){this.filter.station=t?t.map(function(t){return t.id}).toString():""},handleDepartmentSelected:function(t){this.filter.department_id=t?t.map(function(t){return t.id}).toString():""},handlePositionSelected:function(t){this.filter.position_id=t?t.map(function(t){return t.id}).toString():""},selectedUser:function(t){this.filter.username=t},selectedUserCensor:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.userCensor=t},searchOrder:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.loading=!0,t?this.filter.statusOrderStop=t:(this.filter.province||this.filter.tag||this.filter.username||this.filter.resign_info||this.filter.station||this.filter.department_id||this.filter.position_id)&&(this.filter.search_order=!0),e&&(this.cur_work=e),this.filter.typeStopWork=null,"allOrder"===e&&this.resetCurOrder(),this.teamId&&(this.page.current=1,this.page.per_page=this.totalPerPage),this.listOrder()},toggleApproveModal:function(t){this.isShowApproveModal=t},allowConfirm:function(t){return["da_duyet","da_duyet_leader","da_duyet_supervisor","tu_choi","hoan_thanh"].includes(t)},updateStatus:function(t,e){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e&&this.orders[t]&&this.orders[t].order&&this.orders[t].order.id)if("duyet"===e&&this.toggleApproveModal(!1),"tu_choi"!==e||n){this.loading=!0,this.$startLoading();var i={id:this.orders[t].order.id,action:e,reason:n};Se.a.updateStatus(i).then(function(t){t.data.success?(Me.a.showMessage(t.data.message||"Cập nhật trạng thái thành công !","success"),"tu_choi"===e&&a.$bvModal.hide("reject-modal"),t.data.id=i.id,a.updateRelateOrderStatus(t.data),a.teamId&&(a.page.current=1,a.page.per_page=a.totalPerPage),a.listOrder(),a.cur_work="allOrder"):Me.a.showMessage(t.data.message||"Không thể chuyển trạng thái của đề xuất !","warning")}).catch(function(t){console.log(t),Me.a.showMessage("Đã có lỗi xảy ra, không thay đổi được trạng thái đề xuất !","warning")}).finally(function(t){a.resetUpdateStatusData(),a.loading=!1,a.$stopLoading()})}else alert("Vui lòng nhập lý do từ chối")},resetCurOrder:function(){this.curOrder.id=null,this.actionHandler=null,this.curOrder.idx=null,this.filter.search_order=!1,this.filter.statusOrderStop=null,this.orderId=null},addOrderOk:function(){this.teamId&&(this.page.current=1,this.page.per_page=this.totalPerPage),this.listOrder(),this.listTotalOrder(this.teamId),this.$bvModal.hide("modal-order-stop-work"),this.$bvModal.hide("modal-order-off-work")},updateRelateOrderStatus:function(t){if(t&&t.id&&this.orders&&this.orders.length){var e=t.update_status||t.status;for(var a in this.orders)+this.orders[a].order.id==+t.id&&this.orders[a].order.status!==e&&(this.orders[a].order.status=e,t.censors?this.orders[a].order.censors=t.censors:this.orders[a].order.censors=null,this.orders[a].order.logs&&Array.isArray(this.orders[a].order.logs)&&t.data?this.orders[a].order.logs.unshift(t.data):this.orders[a].order.logs=[t.data]),this.orders[a].order.relate_order&&this.orders[a].order.relate_order.hrOrder&&+this.orders[a].order.relate_order.hrOrder.id==+t.id&&this.orders[a].order.relate_order.hrOrder.status!==e&&(this.orders[a].order.relate_order.hrOrder.status=e)}},resetUpdateStatusData:function(){this.idxCurrentOrderUpdateStatus=null,this.rejectReason="",this.actionHandler=null,this.$bvModal.hide("reject-reason-modal"),this.$bvModal.hide("reject-modal"),this.teamId&&this.listTotalOrder(this.teamId)},checkShowModal:function(t,e){"duyet"===e&&(this.idxCurrentOrderUpdateStatus=t,this.currentUserUpdateStatus=null,Me.a.isEmpty(this.orders[t].order.note)||(this.rejectReason=this.orders[t].order.note),Me.a.isEmpty(this.orders[t].order.profile_info)||(this.currentUserUpdateStatus=this.orders[t].order.profile_info.username),this.toggleApproveModal(!0)),"ghi_chu"===e&&(this.idxCurrentOrderUpdateStatus=t,this.rejectReason=null,this.$bvModal.show("reject-reason-modal")),"tu_choi"===e&&(this.idxCurrentOrderUpdateStatus=t,this.$bvModal.show("reject-modal")),"chot_so"===e&&(this.resetCurOrder(),this.curOrder.idx=t,this.orders[t].order.relate_order&&(this.curOrder.id=this.orders[t].order.relate_order.hrOrder.id),this.$bvModal.show("modal-order-stop-work"))},updateLiquidateOk:function(t){this.contract.status=t.contract_status,this.contract.liquidate_date=t.liquidate_date,this.teamId&&(this.page.current=1,this.page.per_page=this.totalPerPage),this.listOrder(),this.listTotalOrder(this.teamId)},showModalContract:function(t){this.getProfileInfo(t)},getProfileInfo:function(t){var e=this;if(t){var a={profileId:t,category:"contract"};this.loading=!0,Se.a.getProfile(a).then(function(t){t.data.success?(e.staffCodeAlert=null,e.contract=t.data.data.contract,e.$bvModal.show("detail-liquidate-contract-stop-work"),e.loading=!1):(Me.a.showMessage(t.data.message||"Không lấy được thông tin người lao động, vui lòng thử lại sau !","warning"),e.loading=!1)}).catch(function(t){Me.a.showMessage("Có lỗi xảy ra, vui lòng thử lại sau !","warning"),e.loading=!1})}},showListCensorOrder:function(t){var e=this;t&&(this.userCensor=null,this.idHrOrder=t,this.$startLoading(),this.loading=!0,Se.a.getCensorForOrder({order_id:t}).then(function(t){t.data.success?(e.allDataCensor=t.data.data,e.$bvModal.show("modal-censor-order"),e.loading=!1):Me.a.showMessage(t.data.message||"Lấy danh sách người xử lý đề xuất không thành công!")}).catch(function(t){Me.a.showMessage("Có lỗi xảy ra, vui lòng thử lại sau !"),e.loading=!1}).finally(function(t){e.loading=!1,e.$stopLoading()}))},updateCensor:function(t,e){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"add",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(i)this.updateUserHandler(e,n,i);else if(t&&e){"delete"===n&&alert("Bạn có chắc chắn muốn xóa người này khỏi xử lý đề xuất !");var s={order:t,censor:e,type:n};this.loading=!0,this.$startLoading(),Se.a.updateCensor(s).then(function(e){e.data.success?(a.teamId&&(a.page.current=1,a.page.per_page=a.totalPerPage),a.listOrder(),a.showListCensorOrder(t),Me.a.showMessage(e.data.message||"Cập nhật thành công người xử lý đề xuất !","success")):(a.loading=!1,Me.a.showMessage(e.data.message||"Cập nhật Không thành công người xử lý đề xuất !"))}).catch(function(t){Me.a.showMessage("Có lỗi xảy ra, vui lòng thử lại sau !"),console.log(t)}).finally(function(t){a.userCensor=null,a.loading=!1,a.$stopLoading()})}else alert("Thiếu thông tin truyền vào !")},showListCensorAccount:function(t){this.allDataCensor=t.allDataCensor||null,this.actionHandler=t.action,this.masterId=t.master_id||null,this.userCensorAccount=!0,this.$bvModal.show("modal-censor-order")},gotoGroupChat:function(t){var e=this;t&&t.id&&(t.channel_id?window.open("https://i.ghtklab.com/channel/internal/"+t.channel_id,"_blank"):Se.a.createDirectChat({userId:t.id}).then(function(t){if(t.data.success){var e=t.data.data.channel_id;window.open("https://i.ghtklab.com/channel/internal/"+e,"_blank")}else Me.a.showMessage(t.data.message||"Tạo direct chat thất bại !")}).catch(function(t){Me.a.showMessage("Có lỗi xảy ra, vui lòng thử lại sau!"),console.log(t)}).finally(function(t){e.loading=!1}))},updateUserHandler:function(t,e,a){var n=this;"delete"===e&&alert("Bạn có chắc chắn muốn xóa người này khỏi xử lý đề xuất!");var i={order_id:t.order_id||null,censor:t,type:e,action:a,master_id:this.masterId};this.loading=!0,this.$startLoading(),Se.a.updateUserHandler(i).then(function(t){t.data.success?(n.teamId&&(n.page.current=1,n.page.per_page=n.totalPerPage),n.listOrder(),n.$bvModal.hide("modal-censor-order"),n.masterId=null,n.userCensor=null,Me.a.showMessage(t.data.message||"Cập nhật thành công người xử lý đề xuất!","success")):(n.masterId=null,Me.a.showMessage(t.data.message||"Cập nhật Không thành công người xử lý đề xuất!"))}).catch(function(t){Me.a.showMessage("Có lỗi xảy ra, vui lòng thử lại sau!"),n.actionHandler=null}).finally(function(t){n.loading=!1,n.userCensor=null,n.actionHandler=null,n.$stopLoading()})},handleToggleModalHrTag:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(Me.a.isEmpty(t))return this.curTagData.attach=!1,void(this.openModalHrTag=!0);t&&(this.curTagData.attach=!0,this.curTagData.record=t,this.openModalHrTag=!0,this.getTags())},actionUpdateRecord:function(t){if(this.teamId&&(this.page.current=1,this.page.per_page=this.totalPerPage),"attachTag"===t.action&&(this.listOrder(),this.reloadTag++,this.curTagData.record.tags&&t.data&&(this.curTagData.record.tags.push(t.data),this.recordUpdateVal.type="tag",this.recordUpdateVal.data=this.curTagData.record)),"refreshHrTag"===t.action&&(this.getTags(),this.listOrder(),this.reloadTag++),"closeHrTag"===t.action&&(this.openModalHrTag=!1),"view_profile_cod"===t.action&&ze.a.redirectProfile(t.data.group_id,t.data.user_id,t.data.id),"view_group_chat"===t.action&&t.channel_id){window.open("https://ghtk.me/channel/internal/"+t.channel_id,"_blank")}"view_order"===t.action&&(this.orderId=t.order_id,this.$bvModal.show("modal-order-off-work"))},getTags:function(){var t=this;yn.a.getList({table_name:"stop_working",scope:"global"}).then(function(e){e.data.success?t.tags=e.data.data:Me.a.showMessage(e.data.message||"Không lấy được dữ liệu thẻ tag!","warning")}).catch(function(t){Me.a.showMessage("Đã có lỗi xảy ra, vui lòng thử lại sau!","warning"),console.log(t)}).finally(function(){})},action:function(t,e){"tag"===e.action&&this.handleToggleModalHrTag(t.order)},handleHrTagSelected:function(t){this.filter.tag=t?t.map(function(t){return t.id}).toString():""},updateStaffLog:function(t,e){var a=this;if(e){var n={master_profile_id:this.orders[t].order.profile_id,user_id:this.orders[t].order.profile_info.user_id,id:this.orders[t].order.id,note:e};this.loading=!0,this.$startLoading(),Se.a.updateStaffLog(n).then(function(t){t.data.success?(a.teamId&&(a.page.current=1,a.page.per_page=a.totalPerPage),a.listOrder(),a.resetUpdateStatusData(),Me.a.showMessage(t.data.message||"Thêm ghi chú thành công!","success")):Me.a.showMessage(t.data.message||"Thêm ghi chú Không thành công!")}).catch(function(t){Me.a.showMessage("Có lỗi xảy ra, vui lòng thử lại sau !")}).finally(function(t){a.loading=!1,a.$stopLoading()})}else alert("Vui lòng nhập thông tin!")},checkShowData:function(t){var e=this.orders[t].order;if(this.teamId)return!(e.checkTick&&e.checkTick.tickChotSo&&e.checkTick.tickContract&&e.checkTick.tickOrder);if(e.check_deposit&&e.statusContract&&e.check_transfer&&"hoan_thanh"===e.status&&!this.filter.search_order)if(e.relate_order){if(e.checkStatusBHXH)return!1}else if(e.checkChotSo)return!1;return!0},changeAction:function(t){return"checkShowModal"===t.action?(this.checkShowModal(t.index,t.status),!1):"showListCensorOrder"===t.action?(this.showListCensorOrder(t.orderId),!1):"action"===t.action?(this.action(t.data,t.arguments),!1):"showListCensorAccount"===t.action?(this.showListCensorAccount(t.data),!1):"handleToggleModalHrTag"===t.action?(this.handleToggleModalHrTag(t.data),!1):"actionUpdateRecord"===t.action?(this.actionUpdateRecord(t.data),!1):"updateStatus"===t.action?(this.updateStatus(t.index,t.status,t.note),!1):"showModalContract"===t.action?(this.contract=t.contract,this.$bvModal.show("detail-liquidate-contract-stop-work"),!1):void("showModalExplainResign"===t.action&&this.$emit("action",{action:t.action,order:t.order}))}}};var Kl=function(t){a("MIOM")},Vl=Object(y.a)(Gl,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-none d-block fit-view-screen small-scrollbar main-stop-work"},[t.showElement?n("b-row",{staticClass:"mx-0 header my-2 align-items-center"},[n("b-col",{attrs:{md:"2",sm:"3"}},[n("h4",{staticClass:"m-0"},[n("b",{staticClass:"txt-title-main"},[t._v("Nghỉ việc")])])]),t._v(" "),n("b-col",{staticClass:"text-right header-tag",attrs:{md:"10",sm:"9"}},[t._l(t.statistics,function(e,a){return n("button",{key:a,staticClass:"btn btn-pill mb-1 mr-1",class:t.cur_work===a?"btn-ghtk text-white":"btn-ghtk-disable",attrs:{id:e.id,name:e.name},on:{click:function(n){return t.searchOrder(e.status,a)}}},[t._v("\n        "+t._s(e.desc)+"\n        "),e.status&&"allOrder"!==e.status?n("span",[n("span",{directives:[{name:"show",rawName:"v-show",value:!t.loadingTotal,expression:"!loadingTotal"}]},[t._v("("+t._s(e.total)+")")]),t._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:t.loadingTotal,expression:"loadingTotal"}],staticClass:"fas fa-spinner fa-pulse"})]):t._e()])}),t._v(" "),n("span",{staticClass:"text-ghtk cursor-pointer mx-2",on:{click:function(e){return t.handleToggleModalHrTag(null)}}},[n("i",{staticClass:"fas fa-plus"}),t._v(" Tag")])],2)],1):t._e(),t._v(" "),t.showElement?n("div",{staticClass:"row box-input-filter filter pb-2 justify-content-between input-border"},[n("div",{staticClass:"input-filter mb-2 mt-2"},[n("multi-select-province",{attrs:{"custom-class":"z-3 multiselect-ghtk multiselect-no-horizontal","province-ids":t.filter.province,"auto-close":!0,"hide-select":!0},on:{handleProvinceSelected:t.handleProvinceSelected}})],1),t._v(" "),n("div",{staticClass:"input-filter mb-2 mt-2"},[n("multi-select-station",{attrs:{"custom-class":"z-3 multiselect-ghtk multiselect-no-horizontal","station-ids":t.filter.station,"province-ids":t.filter.province,"auto-close":!0,"hide-select":!0},on:{handleStationSelected:t.handleStationSelected}})],1),t._v(" "),n("div",{staticClass:"input-filter mb-2 mt-2"},[n("single-select-user",{staticClass:"z-3 multiselect-ghtk multiselect-no-horizontal",attrs:{placeholder:"Nhân viên"},on:{onChange:t.selectedUser}})],1),t._v(" "),n("div",{staticClass:"input-filter mb-2 mt-2"},[n("multi-select-position",{attrs:{"department-ids":t.filter.department_id,"position-ids":t.filter.position_id,"auto-close":!1,"custom-class":"z-3 multiselect-ghtk multiselect-no-horizontal","hide-selected":!0},on:{handlePositionSelected:t.handlePositionSelected}})],1),t._v(" "),n("div",{staticClass:"input-filter mb-2 mt-2"},[n("MultiSelectHrTag",{attrs:{reload:t.reloadTag,tableName:"stop_working",disabled:!t.editableTag,"custom-class":"z-3 multiselect-ghtk multiselect-no-horizontal","auto-close":!0,"hide-selected":!0,placeholder:"Tag"},on:{handleHrTagSelected:t.handleHrTagSelected},model:{value:this.filter.tag,callback:function(e){t.$set(this.filter,"tag",e)},expression:"this.filter.tag"}})],1),t._v(" "),n("div",{staticClass:"input-filter mb-2 mt-2"},[n("v-date-picker",{attrs:{"custom-class":"z-3 multiselect-ghtk inp-date",locale:"vi",color:"green","input-props":{placeholder:"Ngày",style:"font-size:14px; border-radius: 0; border-color: #e8e8e8; padding: 8px 16px;",class:"form-control rounded"},popover:{visibility:"focus"}},model:{value:t.filter.resign_info,callback:function(e){t.$set(t.filter,"resign_info",e)},expression:"filter.resign_info"}})],1),t._v(" "),n("div",{staticClass:"input-filter mb-2 mt-2"},[n("b-btn",{staticClass:"btn_search",attrs:{name:"stop-work-btn-search",id:"stop-work-btn-search",variant:"ghtk"},on:{click:function(e){return t.searchOrder()}}},[t._v("Tìm kiếm")])],1)]):t._e(),t._v(" "),n("div",{staticClass:"order-table row mx-0 table-data",class:t.showElement?"table-sticky":""},[n("div",{staticClass:"col col-12 table-content",class:t.showElement?"":"p-0"},[n("table",{staticClass:"table table-hover table-order-list w-100 table-responsive-sm"},[n("thead",[n("tr",{staticClass:"header-row",class:t.showElement?"screen-off":"staff-shift"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2)])]),t._v(" "),n("tbody",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"position-relative"},[t._l(t.orders,function(e,a){return t.checkShowData(a)?[n("RowData",{key:a,attrs:{data:e,checkDuty:t.checkDuty,editableTag:t.editableTag,index:a,searchOrder:t.filter.search_order,showAction:t.showElement},on:{changeAction:t.changeAction}})]:t._e()}),t._v(" "),n("tr",{directives:[{name:"show",rawName:"v-show",value:!t.orders||!t.orders.length,expression:"(!orders || !orders.length)"}]},[n("td",{attrs:{colspan:"10"}},[n("div",{staticClass:"mih-25 d-flex justify-content-center align-items-center"},[n("b",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}]},[t._v("Không có dữ liệu phù hợp !")])])])])],2)])])]),t._v(" "),t.showElement?n("div",{staticClass:"row mt-3 mb-3 mr-2 align-items-center"},[n("div",{staticClass:"col col-md-9 text-left"},[n("b",[t._v("\n        Bản ghi/ trang\n      ")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.page.per_page,expression:"page.per_page"}],staticClass:"form-control form-control-sm w-4re text-ghtk rounded border-ghtk d-inline-block",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.page,"per_page",e.target.multiple?a:a[0])},function(e){return t.listOrder()}]}},[n("option",[t._v("5")]),t._v(" "),n("option",[t._v("10")]),t._v(" "),n("option",[t._v("25")]),t._v(" "),n("option",[t._v("50")]),t._v(" "),n("option",[t._v("100")])]),t._v(" "),n("div",{staticClass:"z-0 d-inline-block"},[n("b-pagination",{staticClass:"paginator-ghtk mb-0",attrs:{size:"sm",align:"left","total-rows":+t.page.total,"per-page":+t.page.per_page},on:{input:t.listOrder},model:{value:t.page.current,callback:function(e){t.$set(t.page,"current",e)},expression:"page.current"}})],1)])]):t._e(),t._v(" "),n("div",{staticClass:"modal-order row"},[n("b-modal",{attrs:{id:"modal-order-stop-work",centered:"",static:"","modal-class":"modal-xxl align-items-center",title:"THÔNG TIN ĐỀ XUẤT","header-class":"justify-content-center font-weight-bold","hide-footer":""},on:{hide:function(e){return t.resetCurOrder()}}},[n("update-order-stop-work",{attrs:{"id-order":t.curOrder.id||null,"modal-style":!0,"order-type":t.createOrderType,"hide-footer":""},on:{addOrderOk:t.addOrderOk,changeStatusOk:t.updateRelateOrderStatus}})],1),t._v(" "),n("approve-resign-work-modal",{attrs:{currentUserUpdateStatus:t.currentUserUpdateStatus,"is-show":t.isShowApproveModal},on:{toggleModal:t.toggleApproveModal,changeAction:function(e){return t.updateStatus(t.idxCurrentOrderUpdateStatus,"duyet",t.rejectReason)}}}),t._v(" "),n("b-modal",{staticClass:"d-flex align-items-center",attrs:{centered:"",static:"",title:"Nhập lý do từ chối",id:"reject-modal","header-class":"justify-content-center","modal-class":"align-items-center","hide-footer":""}},[n("div",{staticClass:"text-center justify-content-center mb-2 txt-reason"},[t._v("Bạn có chắc chắn muốn từ chối nhân viên này?")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.rejectReason,expression:"rejectReason"}],staticClass:"form-control",attrs:{name:"reject-reason-input",rows:"5",placeholder:""},domProps:{value:t.rejectReason},on:{input:function(e){e.target.composing||(t.rejectReason=e.target.value)}}}),t._v(" "),n("div",{staticClass:"w-100 justify-content-center d-flex border-0 btn__action mt-2"},[n("b-btn",{staticClass:"btn__close text-white mr-1",on:{click:function(e){t.$bvModal.hide("reject-modal"),t.resetUpdateStatusData()}}},[t._v("Đóng")]),t._v(" "),n("b-btn",{staticClass:"btn__save text-white",attrs:{name:"stop-work-btn-confirm-reject-reason",id:"stop-work-btn-confirm-reject-reason"},on:{click:function(e){return t.updateStatus(t.idxCurrentOrderUpdateStatus,"tu_choi",t.rejectReason)}}},[t._v("Xác nhận")])],1)]),t._v(" "),n("b-modal",{attrs:{id:"reject-reason-modal",title:"Ghi chú",centered:"","title-class":"w-100","header-class":"text-center","modal-class":"align-items-center","hide-footer":"",size:"sm"}},[n("b-form-group",{attrs:{"label-size":"lg"}},[n("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.rejectReason,expression:"rejectReason",modifiers:{trim:!0}}],staticClass:"rounded form-control",attrs:{name:"reject-reason-input",rows:"4",placeholder:"Nhập ghi chú"},domProps:{value:t.rejectReason},on:{input:function(e){e.target.composing||(t.rejectReason=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.note,expression:"loading.note"}],staticClass:"d-flex justify-content-between"},[n("button",{staticClass:"btn btn-m-closed rounded text-white lh-0-8",on:{click:function(e){t.$bvModal.hide("reject-reason-modal"),t.resetUpdateStatusData()}}},[t._v("Đóng")]),t._v(" "),n("button",{staticClass:"btn btn-ghtk rounded text-white lh-0-8",attrs:{name:"stop-work-btn-save-note",id:"stop-work-btn-save-note"},on:{click:function(e){return t.updateStaffLog(t.idxCurrentOrderUpdateStatus,t.rejectReason)}}},[t._v("Lưu")])])],1),t._v(" "),n("ModalLiquidateContract",{attrs:{contractId:t.contract.id,id:"detail-liquidate-contract-stop-work",title:"Thanh lý hợp đồng "+t.contract.contract_number,edit:!0},on:{updateOk:t.updateLiquidateOk}}),t._v(" "),n("b-modal",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{title:"Cập nhật người xử lý",centered:"",id:"modal-censor-order",static:"","header-class":"justify-content-center","modal-class":"modal-xs align-items-center","hide-footer":""}},[t.allDataCensor?n("div",{staticClass:"modal-body list-user-censor"},t._l(t.allDataCensor,function(e,i){return n("div",{key:i},[n("div",{staticClass:"d-flex justify-content-between align-self-center content-censor mb-2"},[e?n("div",{staticClass:"info-censor align-items-center d-flex"},[e.avatar?n("div",{staticClass:"avt-censor mr-2"},[n("img",{attrs:{src:e.avatar,alt:"avt-user-censor",width:"30",height:"30"}})]):t._e(),t._v(" "),n("div",{staticClass:"name-censer mr-2 font-14"},[t._v("\n                "+t._s(e.fullname)+" - "+t._s(e.username||"")+" - "+t._s(e.position_name)+"\n              ")]),t._v(" "),n("div",{staticClass:"btn-chat mr-2"},[n("b-btn",{staticClass:"btn__chat border-0 btn btn-default p-0",on:{click:function(a){return t.gotoGroupChat(e)}}},[n("img",{attrs:{src:a("Ycr3"),alt:"icon chat",width:"24",height:"24"}})])],1)]):t._e(),t._v(" "),n("div",{staticClass:"btn-delete-user"},[n("b-btn",{staticClass:"btn text-danger border-danger btn-outline-default btn-sm",on:{click:function(a){return t.updateCensor(t.idHrOrder,{id:e.id,name:e.name,order_id:e.order_id||null},"delete",t.actionHandler)}}},[t._v("Xóa")])],1)]),t._v(" "),n("hr",{staticClass:"mt-2 mb-2"})])}),0):t._e(),t._v(" "),n("div",{staticClass:"d-flex justify-content-between border-0"},[n("div",{staticClass:"input-user-censor"},[n("single-select-user",{attrs:{reset:t.resetUser,user:t.userCensor,placeholder:"Nhập người xử lý"},on:{onChange:t.selectedUserCensor}})],1),t._v(" "),n("div",{staticClass:"footer-btn"},[n("b-btn",{staticClass:"btn btn__them",on:{click:function(e){return t.updateCensor(t.idHrOrder,t.userCensor,"add",t.actionHandler)}}},[t._v("Thêm")])],1)])]),t._v(" "),n("b-modal",{attrs:{id:"modal-order-off-work",static:"","modal-class":"modal-xxl",title:"THÔNG TIN ĐỀ XUẤT","hide-footer":""},on:{hide:t.resetCurOrder}},[n("update-order",{attrs:{"id-order":t.orderId||null,"modal-style":!0,"order-type":t.orderType},on:{addOrderOk:function(e){return t.listOrder()}}})],1)],1),t._v(" "),n("HrTagModal",{attrs:{open:t.openModalHrTag,attachPermission:t.curTagData.attach,scope:"global",recordId:t.curTagData.record.id,tableName:"stop_working",tags:t.tags},on:{action:t.actionUpdateRecord}}),t._v(" "),t.showElement?t._e():n("infinite-loading",{ref:"infiniteLoading",attrs:{spinner:"spiral"},on:{infinite:t.infiniteHandlerOffWork}},[n("div",{staticClass:"text-center",attrs:{slot:"no-more"},slot:"no-more"},[t._v("Đã đến cuối trang!")]),t._v(" "),n("div",{staticClass:"text-center",attrs:{slot:"no-results"},slot:"no-results"},[t.orders?n("span",[t._v("Đã đến cuối trang!")]):n("span",[t._v("Không có dữ liệu nào! ")])])])],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("th",{staticClass:"text-center profile-col"},[e("b",[this._v("Nhân viên")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("th",{staticClass:"text-center log-col"},[e("b",[this._v("Trạng thái")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("th",{staticClass:"text-center action-col"},[e("b",[this._v("Thao tác")])])}],!1,Kl,"data-v-7334816d",null).exports,Ql={name:"select-team",props:{autoClose:{default:!0},inTeam:{default:!0},hideSelect:{default:!1},disabled:{default:!1},placeholder:{default:"Chọn nhóm chốt ca"},multiple:{default:!1,type:Boolean},customClass:{default:"multiselect-ghtk multiselect-no-horizontal",type:String},team:{type:String,default:null}},components:{Multiselect:la.a},data:function(){return{option:null,options:[]}},created:function(){var t={};this.inTeam&&(t.in_team=1),this.get(t)},watch:{team:{immediate:!0,handler:function(t,e){t?this.set():this.option=null}}},methods:{set:function(){var t=this;if(this.multiple){var e=this.team.split(",");this.option=this.options.filter(function(t){return e.includes(t.id)})}else{var a=this.options.find(function(e){return e.id===t.team});this.option=a||null}},get:function(t){var e=this;Yr(t).then(function(t){t.data.success&&(e.options=t.data.data,e.set())}).catch(function(t){console.log(t)})}}};var Xl=function(t){a("TLuY")},Wl=Object(y.a)(Ql,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{class:t.customClass,attrs:{options:t.options,multiple:t.multiple,placeholder:t.placeholder,disabled:t.disabled,label:"name","track-by":"id",selectedLabel:"",deselectLabel:"X",selectLabel:"","hide-selected":t.hideSelect,"close-on-select":t.autoClose},on:{input:function(e){t.$emit("change",e)},select:function(e){t.$emit("select",e)}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,Xl,"data-v-79564eb6",null).exports,Jl={name:"document-board",components:{DocumentUploadItem:bo.a,InfiniteLoading:Fr.a,ProfileManagement:Oo},data:function(t){return{list:[],curDocument:null,dataUpdate:{status:!0,driverLicense:{no_number:null,class:null,beginning_date:null,expiry_date:null}},loading:!1,pagination:{currentPage:1,limit:4,perRow:4},filter:{status:{name:"Chưa duyệt"},mp_status:"pause,disable"},permissions:{}}},props:{teamId:{default:null},getDocumentTrigger:{default:!1}},watch:{getDocumentTrigger:{immediate:!0,handler:function(t,e){this.getList(null,!0)}}},computed:{helper:function(){return Me.a}},methods:{reset:function(){this.list=[],this.$refs.infiniteLoading&&this.$refs.infiniteLoading.stateChanger.reset(),this.pagination={currentPage:1,limit:4,perRow:4}},resetData:function(){this.curDocument=null,Me.a.resetData(this.dataUpdate,2)},infiniteHandler:function(t){this.pagination.currentPage+=1,this.getList(t)},approve:function(t){this.curDocument=t.doc,this.dataUpdate.status=t.status,13==+t.doc.ProfileDocument.document_id&&this.getDriverLiense(t.doc.ProfileDocument.master_profile_id),this.$bvModal.show("modal-conform-approve-document")},execApprove:function(t){var e=this,a=t.id,n=t.status;return l()(o.a.mark(function t(){var s,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,Es.a.approveDocument({info:{id:a,status:n},dataUpdate:e.dataUpdate,query:i()({page:1,limit:e.pagination.limit*e.pagination.currentPage,team_id:e.teamId},e.filter)});case 4:s=t.sent,(r=s.data).success?(Me.a.showMessage("Duyệt hồ sơ thành công","success"),e.list=r.data.list,e.$bvModal.hide("modal-conform-approve-document"),e.$emit("modifyTotalDocument",{action:"modify_total_statistic",data:{key:"document",value:-1}})):Me.a.showMessage(r.message,"warning"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),Me.a.showMessage(t.t0.message);case 12:return t.prev=12,e.loading=!1,t.finish(12);case 15:case"end":return t.stop()}},t,e,[[0,9,12,15]])}))()},getDriverLiense:function(t){var e=this;this.loading=!0,fo({master_profile_id:t}).then(function(t){t.data.success?(e.dataUpdate.driverLicense.no_number=t.data.data.no_number,e.dataUpdate.driverLicense.class=t.data.data.class,e.dataUpdate.driverLicense.expiry_date=t.data.data.expiry_date?new Date(t.data.data.expiry_date):null,e.dataUpdate.driverLicense.beginning_date=t.data.data.beginning_date?new Date(t.data.data.beginning_date):null):Me.a.showMessage(t.data.message||"Có lỗi khi lấy thông tin bằng lái xe !")}).catch(function(t){console.log(t)}).finally(function(t){e.loading=!1})},getList:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return l()(o.a.mark(function n(){var s,r,l;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a&&e.reset(),n.prev=1,e.filter.from=null,e.loading=!0,n.next=6,Es.a.getDocuments(i()({page:e.pagination.currentPage,limit:e.pagination.limit,team_id:e.teamId},e.filter));case 6:s=n.sent,(r=s.data).success?Me.a.isEmpty(r.data.list)?Me.a.isEmpty(t)||t.complete():(Me.a.isEmpty(t)||t.loaded(),a?e.list=r.data.list:(l=i()({},e.list,r.data.list),e.list=l),e.permissions=r.permissions||{}):Me.a.showMessage(r.message),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),Me.a.showMessage(n.t0.message);case 14:return n.prev=14,e.loading=!1,n.finish(14);case 17:case"end":return n.stop()}},n,e,[[1,11,14,17]])}))()}}};var Zl=function(t){a("oco6")},tc=Object(y.a)(Jl,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"min-height":"200px"}},[a("profile-management",{attrs:{permissionsClosShift:t.permissions,teamId:t.teamId,filterClose:t.filter,paginationClose:t.pagination,dataClosingShift:t.list,isClosingShift:!0}})],1),t._v(" "),a("infinite-loading",{ref:"infiniteLoading",attrs:{spinner:"spiral"},on:{infinite:t.infiniteHandler}},[a("div",{attrs:{slot:"no-more"},slot:"no-more"}),t._v(" "),a("div",{attrs:{slot:"no-results"},slot:"no-results"})])],1)},[],!1,Zl,"data-v-02c0069b",null).exports,ec=a("7zFw"),ac=a("eitH"),nc={name:"confirm-ekyc",data:function(){return{loading:!1,acceptTerm:!1,reject_reason:null,ekycImage:{face_images:[],identify_images:[]},ekyc_data:null,ekyc_status:null,face_score:null,total_action_ekyc:null,error:null}},props:{userInfo:{type:Object}},watch:{userInfo:{immediate:!0,handler:function(t,e){t&&(this.getConfirmedEkycData(),this.getEkycImages())}}},computed:{helper:function(){return Me.a},getEKycWarning:function(){return+this.face_score<.21&&+this.total_action_ekyc<=3?"Hệ thống cảnh báo tỷ lệ khớp khuôn mặt ở mức thấp, vui lòng từ chối để EKYC lại!":+this.face_score<.21&&+this.total_action_ekyc>3?"Hệ thống cảnh báo tỷ lệ khớp khuôn mặt ở mức thấp, vui lòng yêu cầu EKYC lại!":+this.face_score>=.21&&+this.face_score<.42?"Tỷ lệ khớp khuôn mặt ở mức trung bình!":""},disabledConfirmButton:function(){return+this.total_action_ekyc>=1&&+this.total_action_ekyc<=3&&+this.face_score<.21}},methods:{getEkycImages:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,ac.a.getEkycImages({userId:t.userInfo.user_id});case 4:if(a=e.sent,!(n=a.data).success){e.next=13;break}if(t.ekycImage=n.images,Me.a.isEmpty(t.ekycImage.identify_images)){e.next=11;break}return e.next=11,t.viewIdentify();case 11:e.next=14;break;case 13:Me.a.showMessage(n.message||"Có lỗi xảy ra trong quá trình lấy ảnh ekyc");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),e.t0.response&&e.t0.response.data&&e.t0.response.data.message&&e.t0.response.data.message.length>0?Me.a.showMessage(e.t0.response.data.message,"warning"):Me.a.showMessage(e.t0.message||"Có lỗi xảy ra trong quá trình lấy ảnh ekyc","error");case 19:return e.prev=19,t.loading=!1,e.finish(19);case 22:case"end":return e.stop()}},e,t,[[0,16,19,22]])}))()},getConfirmedEkycData:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,ac.a.getConfirmedEkycData({master_profile_id:t.userInfo.id});case 4:a=e.sent,(n=a.data).success?(t.ekyc_data=n.data,t.ekyc_status=n.ekyc_status,t.face_score=n.face_score,t.total_action_ekyc=n.total_action_ekyc,t.ekyc_data.birthday.value&&(t.ekyc_data.birthday.value=new Date(t.ekyc_data.birthday.value)),t.ekyc_data.issue_on.value&&(t.ekyc_data.issue_on.value=new Date(t.ekyc_data.issue_on.value)),t.ekyc_data.expired_date.value&&(t.ekyc_data.expired_date.value=new Date(t.ekyc_data.expired_date.value))):"not_found_ekyc_change_log"===n.error?t.error=n.message:Me.a.showMessage(n.message||"Có lỗi xảy ra trong quá trình lấy thông tin ekyc"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.response&&e.t0.response.data&&e.t0.response.data.message&&e.t0.response.data.message.length>0?Me.a.showMessage(e.t0.response.data.message,"warning"):Me.a.showMessage(e.t0.message||"Có lỗi xảy ra trong quá trình lấy thông tin ekyc","error");case 12:return e.prev=12,t.loading=!1,e.finish(12);case 15:case"end":return e.stop()}},e,t,[[0,9,12,15]])}))()},validateEkycData:function(){return this.acceptTerm?Me.a.isEmpty(this.ekyc_data.personal_id_number.value)?"Thiếu thông tin CCCD/CMND!":Me.a.isEmpty(this.ekyc_data.fullname.value)?"Thiếu thông tin họ và tên!":Me.a.isEmpty(this.ekyc_data.birthday.value)?"Thiếu thông tin ngày sinh!":Me.a.isEmpty(this.ekyc_data.gender.value)?"Thiếu thông tin giới tính!":Me.a.isEmpty(this.ekyc_data.issue_on.value)?"Thiếu thông tin ngày cấp!":Me.a.isEmpty(this.ekyc_data.place_of_issue.value)?"Thiếu thông tin nơi cấp!":Me.a.isEmpty(this.ekyc_data.native_country_sub_district.value)?"Thiếu thông tin quê quán":Me.a.isEmpty(this.ekyc_data.current_address_detail.value)?"Thiếu thông tin nơi thường trú!":void 0:"Vui lòng chọn cam kết xác nhận trước khi duyệt!"},confirmIdentifyData:function(){var t=this;return l()(o.a.mark(function e(){var a,n,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.validateEkycData(),Me.a.isEmpty(a)){e.next=3;break}return e.abrupt("return",Me.a.showMessage(a));case 3:return e.prev=3,t.loading=!0,e.next=7,ac.a.confirmIdentifyData({master_profile_id:t.userInfo.id,personal_id_number:t.ekyc_data.personal_id_number.value,fullname:t.ekyc_data.fullname.value,birthday:Me.a.formatDate(t.ekyc_data.birthday.value,"YYYY-MM-DD"),gender:t.ekyc_data.gender.value,issue_on:Me.a.formatDate(t.ekyc_data.issue_on.value,"YYYY-MM-DD"),place_of_issue:t.ekyc_data.place_of_issue.value,domicile:t.ekyc_data.native_country_sub_district.value,permanent_address:t.ekyc_data.current_address_detail.value,expired_date:Me.a.formatDate(t.ekyc_data.expired_date.value,"YYYY-MM-DD")});case 7:n=e.sent,(i=n.data).success?(t.$emit("reloadPage"),Me.a.showMessage(i.message||"Duyệt EKYC thành công","success")):Me.a.showMessage(i.message||"Có lỗi xảy ra trong quá trình duyệt thông tin ekyc"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),e.t0.response&&e.t0.response.data&&e.t0.response.data.message&&e.t0.response.data.message.length>0?Me.a.showMessage(e.t0.response.data.message,"warning"):Me.a.showMessage(e.t0.message||"Có lỗi xảy ra trong quá trình duyệt thông tin ekyc","error");case 15:return e.prev=15,t.loading=!1,e.finish(15);case 18:case"end":return e.stop()}},e,t,[[3,12,15,18]])}))()},rejectEkycData:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,ac.a.rejectEkycData({master_profile_id:t.userInfo.id,reason:t.reject_reason});case 4:a=e.sent,(n=a.data).success?(t.$bvModal.hide("modal-reason"),t.$emit("reloadPage"),t.$emit("refresh"),Me.a.showMessage(n.message||"Từ chối EKYC thành công","success")):Me.a.showMessage(n.message||"Có lỗi xảy ra trong quá trình từ chối thông tin ekyc"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.response&&e.t0.response.data&&e.t0.response.data.message&&e.t0.response.data.message.length>0?Me.a.showMessage(e.t0.response.data.message,"warning"):Me.a.showMessage(e.t0.message||"Có lỗi xảy ra trong quá trình từ chối thông tin ekyc","error");case 12:return e.prev=12,t.loading=!1,e.finish(12);case 15:case"end":return e.stop()}},e,t,[[0,9,12,15]])}))()},viewIdentify:function(){var t=this;return l()(o.a.mark(function e(){var a,n,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eo.a.getOriginImage({urls:t.ekycImage.identify_images});case 2:a=e.sent,n=a.data,i=[],n.urls.forEach(function(t){return i.push(t.path)}),t.ekycImage.identify_images=i;case 7:case"end":return e.stop()}},e,t)}))()}}};var ic=function(t){a("VS1q")},sc=Object(y.a)(nc,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[t.error?a("div",[a("div",{staticClass:"col text-center"},[t._v("\n      "+t._s(t.error)+"\n    ")]),t._v(" "),a("div",{staticClass:"ml-3 mt-3"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"rounded w-25 btn btn-sm btn-danger text-white",staticStyle:{"font-size":"16px"},on:{click:function(e){return t.$bvModal.show("modal-reason")}}},[t._v("Từ chối")])])])]):t.helper.isEmpty(t.ekyc_data)?a("h3",{staticClass:"text-center"},[t._v("\n    Chưa có thông tin eKYC\n  ")]):a("div",{staticClass:"confirm-e-kyc"},[t.helper.isEmpty(t.ekycImage.face_images)?t._e():a("div",{staticClass:"mb-3 row"},t._l(t.ekycImage.face_images,function(t,e){return a("img",{key:"face-img-"+e,staticClass:"col-4",attrs:{src:t.link_path,alt:t.type}})}),0),t._v(" "),t.helper.isEmpty(t.ekycImage.identify_images)?t._e():a("div",{staticClass:"mb-3 row"},t._l(t.ekycImage.identify_images,function(t,e){return a("img",{key:"ekyc-img-"+e,staticClass:"col-6",attrs:{src:t,alt:"identify image"}})}),0),t._v(" "),t.helper.isEmpty(t.getEKycWarning)?t._e():a("div",{staticClass:"row mb-3 ml-1"},[a("span",{staticClass:"w-100",staticStyle:{color:"#EA0505CC","font-size":"18px"}},[a("i",{staticClass:"fas fa-exclamation-triangle",staticStyle:{color:"#F2C94C","font-size":"15px"}}),t._v("\n        "+t._s(t.getEKycWarning)+"\n      ")])]),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"ml-3 row mt-2"},[a("label",{staticClass:"font-weight-bold col-md-2 mt-2 mr-4 text-left pl-0"},[t._v("Họ và tên:")]),t._v(" "),a("b-form-input",{staticClass:"col-md-9 text-left  fs-15",attrs:{placeholder:"Nhập họ và tên",size:"xs",type:"text"},model:{value:t.ekyc_data.fullname.value,callback:function(e){t.$set(t.ekyc_data.fullname,"value",e)},expression:"ekyc_data.fullname.value"}})],1),t._v(" "),a("div",{staticClass:"ml-3 row mt-2 input-number-no-arrows"},[a("label",{staticClass:"font-weight-bold col-md-2 mt-2 mr-4 text-left pl-0"},[t._v("CMND:")]),t._v(" "),a("b-form-input",{staticClass:"col-md-9 text-left fs-15",attrs:{placeholder:"Nhập CMND/CCCD",size:"xs",type:"number"},model:{value:t.ekyc_data.personal_id_number.value,callback:function(e){t.$set(t.ekyc_data.personal_id_number,"value",e)},expression:"ekyc_data.personal_id_number.value"}})],1),t._v(" "),a("div",{staticClass:"ml-3 row mt-2"},[a("label",{staticClass:"font-weight-bold col-md-2 mt-2 mr-4 text-left pl-0"},[t._v("Ngày sinh:")]),t._v(" "),a("v-date-picker",{staticClass:"col-md-9 p-0",attrs:{value:t.ekyc_data.birthday.value,locale:"vi",color:"green","input-props":{placeholder:"Chọn ngày sinh",style:"color: #4E5155; font-size: 15px; border-radius: unset;"},popover:{visibility:"focus"}},model:{value:t.ekyc_data.birthday.value,callback:function(e){t.$set(t.ekyc_data.birthday,"value",e)},expression:"ekyc_data.birthday.value"}})],1),t._v(" "),a("div",{staticClass:"ml-3 row mt-2"},[a("label",{staticClass:"font-weight-bold col-md-2 mt-2 mr-4 text-left pl-0"},[t._v("Giới tính:")]),t._v(" "),a("b-form-select",{staticClass:"col-md-9 text-left  fs-15",attrs:{placeholder:"Chọn giới tính",size:"xs",options:[{value:"male",text:"Nam"},{value:"female",text:"Nữ"}]},model:{value:t.ekyc_data.gender.value,callback:function(e){t.$set(t.ekyc_data.gender,"value",e)},expression:"ekyc_data.gender.value"}})],1),t._v(" "),a("div",{staticClass:"ml-3 row mt-2"},[a("label",{staticClass:"font-weight-bold col-md-2 mt-2 mr-4 text-left pl-0"},[t._v("Quê quán:")]),t._v(" "),a("b-form-input",{staticClass:"col-md-9 text-left  fs-15",attrs:{placeholder:"Nhập quê quán",size:"xs",type:"text"},model:{value:t.ekyc_data.native_country_sub_district.value,callback:function(e){t.$set(t.ekyc_data.native_country_sub_district,"value",e)},expression:"ekyc_data.native_country_sub_district.value"}})],1),t._v(" "),a("div",{staticClass:"ml-3 row mt-2"},[a("label",{staticClass:"font-weight-bold col-md-2 mt-2 mr-4 text-left pl-0"},[t._v("Nơi thường trú:")]),t._v(" "),a("b-form-input",{staticClass:"col-md-9 text-left  fs-15",attrs:{placeholder:"Nhập nơi thường chú",size:"xs",type:"text"},model:{value:t.ekyc_data.current_address_detail.value,callback:function(e){t.$set(t.ekyc_data.current_address_detail,"value",e)},expression:"ekyc_data.current_address_detail.value"}})],1),t._v(" "),a("div",{staticClass:"ml-3 row mt-2"},[a("label",{staticClass:"font-weight-bold col-md-2 mt-2 mr-4 text-left pl-0"},[t._v("Nơi cấp:")]),t._v(" "),a("b-form-input",{staticClass:"col-md-9 text-left  fs-15",attrs:{placeholder:"Nhập nơi cấp",size:"xs",type:"text"},model:{value:t.ekyc_data.place_of_issue.value,callback:function(e){t.$set(t.ekyc_data.place_of_issue,"value",e)},expression:"ekyc_data.place_of_issue.value"}})],1),t._v(" "),a("div",{staticClass:"ml-3 row mt-2"},[a("label",{staticClass:"font-weight-bold col-md-2 mt-2 mr-4 text-left pl-0"},[t._v("Ngày cấp:")]),t._v(" "),a("v-date-picker",{staticClass:"col-md-9 p-0",attrs:{locale:"vi",color:"green","input-props":{placeholder:"Chọn ngày cấp",style:"color: #4E5155; font-size: 15px; border-radius: unset;"},popover:{visibility:"focus"}},model:{value:t.ekyc_data.issue_on.value,callback:function(e){t.$set(t.ekyc_data.issue_on,"value",e)},expression:"ekyc_data.issue_on.value"}})],1),t._v(" "),a("div",{staticClass:"ml-3 row mt-2"},[a("label",{staticClass:"font-weight-bold col-md-2 mt-2 mr-4 text-left pl-0"},[t._v("Ngày hết hạn:")]),t._v(" "),a("v-date-picker",{staticClass:"col-md-9 p-0",attrs:{value:t.ekyc_data.expired_date.value,locale:"vi",color:"green",popover:{visibility:"focus"},"input-props":{placeholder:"Chọn ngày hết hạn",style:"color: #4E5155; font-size: 15px; border-radius: unset;"}},model:{value:t.ekyc_data.expired_date.value,callback:function(e){t.$set(t.ekyc_data.expired_date,"value",e)},expression:"ekyc_data.expired_date.value"}})],1),t._v(" "),a("b-form-checkbox",{staticClass:"ml-3 row mt-3 ghtk-checkbox",attrs:{id:"checkbox-1",name:"checkbox-1",value:!0,"unchecked-value":!1},model:{value:t.acceptTerm,callback:function(e){t.acceptTerm=e},expression:"acceptTerm"}},[t._v("\n      Tôi cam kết những thông tin trên là chính xác, tôi sẽ chịu trách nhiệm trong trường hợp ảnh/thông tin bị sai!\n    ")]),t._v(" "),a("div",{staticClass:"ml-3 mt-3"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"rounded w-25 btn btn-sm text-white mr-3",class:t.disabledConfirmButton?"btn-secondary":"btn-ghtk",staticStyle:{"font-size":"16px"},attrs:{disabled:t.disabledConfirmButton},on:{click:t.confirmIdentifyData}},[t._v("Duyệt\n        ")]),t._v(" "),a("button",{staticClass:"rounded w-25 btn btn-sm btn-danger text-white",staticStyle:{"font-size":"16px"},on:{click:function(e){return t.$bvModal.show("modal-reason")}}},[t._v("Từ chối")])])])],1),t._v(" "),a("b-modal",{ref:"note",attrs:{id:"modal-reason",title:"Từ chối thông tin eKYC",centered:"","title-class":"w-100","header-class":"text-center","hide-footer":"",size:"sm"},on:{hide:function(e){t.reject_reason=null}}},[a("b-form-group",{attrs:{"label-size":"lg"}},[a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.reject_reason,expression:"reject_reason",modifiers:{trim:!0}}],staticClass:"rounded form-control",attrs:{name:"noteContent",rows:"3",placeholder:"Nhập lý do từ chối"},domProps:{value:t.reject_reason},on:{input:function(e){e.target.composing||(t.reject_reason=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.note,expression:"loading.note"}],staticClass:"d-flex justify-content-between"},[a("button",{staticClass:"btn btn-secondary rounded text-white lh-0-8",on:{click:function(e){return t.$bvModal.hide("modal-reason")}}},[t._v("Hủy")]),t._v(" "),a("button",{staticClass:"btn btn-ghtk rounded text-white lh-0-8",on:{click:t.rejectEkycData}},[t._v("Lưu")])])],1)],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row mb-3 ml-1"},[e("span",{staticClass:"w-100",staticStyle:{"font-size":"18px"}},[this._v("\n        Để đảm bảo tính chính xác của thông tin. Yêu cầu bạn kiểm tra lại kĩ các trường sau:\n      ")])])}],!1,ic,"data-v-70b8b734",null).exports,oc={name:"onboard-line",components:{LineItem:Mr},props:{onboardStatus:{},handlers:{},masterProfileId:{type:String}},data:function(t){return{stepDesc:{create_user:"Tạo tài khoản",ekyc:"Hoàn thành eKYC",nfc:"Hoàn thành NFC",document:"Hoàn thành hồ sơ",deposit:"Đóng cọc",contract:"Ký hợp đồng",active_wallet:"Kích hoạt ví",attach_group:"Gán nhóm",asset:"Cấp phát công cụ dụng cụ"}}},computed:{stepDone:function(){var t={};for(var e in this.stepDesc)t[e]=this.onboardStatus[e]&&"done"===this.onboardStatus[e].status;return t}},methods:{}};var rc=function(t){a("TL6+")},lc=Object(y.a)(oc,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"onboard-line"},[t._l(t.stepDesc,function(e,n){return[t.onboardStatus[n]&&t.onboardStatus[n].show?a("LineItem",{key:n,attrs:{active:t.stepDone[n],checked:t.stepDone[n],message:e,contentStyle:{width:"40%",display:"inline-block",padding:"0 0 0.5rem 1.5rem","font-weight":"bold"},tailStyle:"asset"===n?{display:"none"}:{}}},[t.stepDone[n]?t._e():a("div",{staticClass:"handler cursor-pointer d-inline align-top",attrs:{slot:"line-item-append"},slot:"line-item-append"},[t.handlers[n]&&t.handlers[n][0]&&t.handlers[n][0].handler_info?a("span",{staticClass:"handled-info"},[a("img",{staticClass:"rounded-circle",attrs:{src:t.handlers[n][0].handler_info.avatar,alt:"",width:"20",height:"20"}}),t._v("\n        "+t._s(t.handlers[n][0].handler_info.username)+" - "+t._s(t.handlers[n][0].handler_info.position_name)+"\n        "),a("span",{staticClass:"step-handler pl-1"},[a("i",{staticClass:"far fa fa-comment-dots text-ghtk font-large",on:{click:function(e){return t.$emit("action",{action:"chat_user",data:{user_id:t.handlers[n][0].handler_info.id}})}}})])]):t._e(),t._v(" "),a("i",{staticClass:"fas fa-edit text-success pl-1",on:{click:function(e){return t.$emit("action",{action:"edit_handler",data:{censors:t.handlers[n],action:n,masterProfileId:t.masterProfileId}})}}})])]):t._e()]})],2)},[],!1,rc,"data-v-7f43dd68",null).exports,cc={name:"log-line",components:{LineItem:Mr},props:{logs:{}},data:function(t){return{}},methods:{formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD-MM-YYYY HH:mm:ss";return Me.a.formatDate(t,e)},formatUser:function(t){return t&&t.created_by_info&&t.created_by_info.username?1!=+t.created_by_info.id?t.created_by_info.username+" - "+t.created_by_info.position_name:t.created_by_info.username:""}}};var dc=function(t){a("kXEz")},uc=Object(y.a)(cc,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"log-line"},t._l(t.logs,function(e,n){return a("LineItem",{key:n,staticClass:"line-item-onboard",attrs:{message:e.message,time:t.formatDate(e.created),user:t.formatUser(e),contentStyle:{"padding-left":"0.8rem"},headStyle:{width:"0.44rem",height:"0.44rem","background-color":"black",top:"0.4rem"},tailStyle:{left:"calc(0.42rem/2 - 1px)",height:"calc(100% - 0.25rem)",top:"0.9rem"}}})}),1)},[],!1,dc,"data-v-0696e39a",null).exports;u.default.use(va.a);var hc={name:"row-data",components:{OnboardLine:lc,LogLine:uc,pdf:_a.a},props:{profile:{type:Object,default:function(t){return{}}},editableTag:{default:!0},actionSearch:{default:!1},showAction:{type:Boolean,default:!0}},data:function(t){return{show_num_doc_type:3,show_doc_type_extend:!1}},computed:i()({},Object(_.c)({curUser:"userInfo"}),{numImageExtend:function(){return this.profile.documents.num_document_type>this.show_num_doc_type?this.profile.documents.num_document_type-this.show_num_doc_type:0}}),methods:{action:function(t){this.$emit("action",t)},formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD-MM-YYYY HH:mm:ss";return Me.a.formatDate(t,e)},onDeleteTag:function(t){var e=this;return l()(o.a.mark(function a(){var n,s;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!confirm("Bạn có chắc muốn xóa tag "+t.name+" ?")){a.next=7;break}return e.loading=!0,a.next=5,yn.a.detach({record_id:+t.record_id,table_name:t.table_name,hr_tag_id:+t.id});case 5:(n=a.sent).data.success?(s=i()({},n.data.log),e.$emit("action",{action:"deleteTag",data:t,log:s}),Me.a.showMessage(n.data.message||"Bỏ gắn tag thành công!","success")):Me.a.showMessage(n.data.message,"warning");case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),Me.a.showMessage(a.t0.message,"warning");case 12:return a.prev=12,e.loading=!1,a.finish(12);case 15:case"end":return a.stop()}},a,e,[[0,9,12,15]])}))()},showIcon:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"inline-block";document.getElementById(t).style.display=e},isImage:function(t){return"image"===Me.a.getFileType(t)},isPdf:function(t){return"pdf"===Me.a.getFileType(t)}}};var pc=function(t){a("EBYl")},mc=Object(y.a)(hc,function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.profile.hide_data||t.actionSearch?a("tr",[a("td",{staticClass:"border-right"},[a("div",{},[a("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"position-relative profile-info"},[a("div",{staticClass:"d-flex justify-content-between"},[a("div",{staticClass:"d-flex justify-content-start"},[a("div",{staticClass:"mr-2"},[a("img",{staticClass:"rounded-circle",attrs:{src:t.profile.avatar,alt:"",width:"50",height:"50"}})]),t._v(" "),a("div",[a("b",[t._v(t._s(t.profile.fullname)+" ("+t._s(t.profile.username||t.profile.personal_id)+")")]),t._v(" "),a("br"),t._v(" "),a("span",[t._v(t._s(t.profile.position_name)+" - "+t._s(t.profile.station_name))]),t._v(" "),a("br")])]),t._v(" "),a("div",[a("button",{staticClass:"w-100 btn btn-outline-ghtk btn-sm btn-pill mb-1",attrs:{name:"row-data-btn-view-profile",id:"row-data-btn-view-profile"},on:{click:function(e){return t.$emit("action",{action:"view_profile",data:{}})}}},[t._v("Xem")]),t._v(" "),a("br"),t._v(" "),a("button",{staticClass:"w-100 btn btn-outline-ghtk btn-sm btn-pill",attrs:{name:"row-data-btn-action-phone",id:"row-data-btn-action-phone"},on:{click:function(e){return t.$emit("action",{action:"phone",data:{}})}}},[t._v("Gọi")])])])]),t._v(" "),a("div",{staticClass:"expected-join-time mb-1"},[a("b",{staticClass:"text-ghtk"},[t._v("Hẹn nhận việc:\n            "+t._s(t.profile.comeback_date?t.formatDate(t.profile.comeback_date,"DD/MM/YYYY"):t.profile.join_date?t.formatDate(t.profile.join_date,"DD/MM/YYYY"):null)+"\n          ")])]),t._v(" "),a("div",{staticClass:"mt-2"},[t._l(t.profile.fixedTags||[],function(e,n){return a("div",{key:"fixed_tag"+n,staticClass:"d-inline-block pr-2 pl-2 mb-1",style:e.style},[t._v(t._s(e.name))])}),t._v(" "),t._l(t.profile.tags,function(e,n){return[a("div",{key:n,staticClass:"d-inline-block mr-1 cursor-pointer position-relative",on:{mouseover:function(a){return t.showIcon("iconDeleteTag"+e.record_id+n)},mouseout:function(a){return t.showIcon("iconDeleteTag"+e.record_id+n,"none")},click:function(a){return t.onDeleteTag(e)}}},[a("div",{staticClass:"d-inline-block tag pr-2 pl-2",style:JSON.parse(e.style)},[t._v("\n                "+t._s(e.name)+"\n              ")]),t._v(" "),a("i",{staticClass:"fa fa-times-circle deleteTag",attrs:{id:"iconDeleteTag"+e.record_id+n}})])]}),t._v(" "),t.editableTag?a("span",{staticClass:"d-inline-block cursor-pointer text-ghtk ml-2",attrs:{name:"row-data-btn-new-tag",id:"row-data-btn-new-tag"},on:{click:function(e){return t.$emit("action",{action:"tag",data:{}})}}},[a("i",{staticClass:"fas fa-plus"}),t._v(" Tag")]):t._e()],2),t._v(" "),a("div",{staticClass:"profile-document mt-1"},[t._l(t.profile.documents.file_documents,function(e,n){return[a("div",{directives:[{name:"viewer",rawName:"v-viewer"}],key:n,class:["position-relative mr-1 mb-1 tracking-action tracking-docid-"+e.document_id+" tracking-uid-"+t.profile.user_id,n<t.show_num_doc_type||t.show_doc_type_extend?"d-inline-block":"d-none"]},[a("div",{staticClass:"document-type-desc"},[t._v("\n                "+t._s(e.document_name)+"\n              ")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.numImageExtend&&!t.show_doc_type_extend&&n===t.show_num_doc_type-1,expression:"numImageExtend && !show_doc_type_extend && idxType === show_num_doc_type - 1"}],staticClass:"num-img-extend",on:{click:function(e){t.show_doc_type_extend=!t.show_doc_type_extend}}},[t._v("\n                +"+t._s(t.numImageExtend)+"\n              ")]),t._v(" "),t._l(e.files,function(i,s){return[t._l(i.links,function(i,o){return[a("span",{key:s+"_"+o},[t.isImage(i)?a("img",{staticClass:"image-document",class:(o||s)&&"d-none",attrs:{src:i,alt:""},on:{click:function(a){"CMND/CCCD"===e.document_name&&t.$emit("action",{action:"view_document_list",data:{doc_idx:n}})}}}):t._e(),t._v(" "),t.isPdf(i)?a("span",{staticClass:"image-document",class:(o||s)&&"d-none",on:{click:function(a){return t.$emit("action",{action:"view_file_pdf",data:{name:e.document_name,link:i}})}}},[a("pdf",{staticClass:"view-pdf",attrs:{src:i}})],1):t._e()])]})]})],2)]}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.show_doc_type_extend,expression:"show_doc_type_extend"}],staticClass:"img-collapse cursor-pointer",on:{click:function(e){t.show_doc_type_extend=!t.show_doc_type_extend}}},[a("i",{staticClass:"fas fa-angle-up icon-collapse text-ghtk-hover"})])],2)])]),t._v(" "),a("td",{staticClass:"border-right"},[a("OnboardLine",{attrs:{onboardStatus:t.profile.onboard_status,handlers:t.profile.handlers,"master-profile-id":t.profile.id,itemClass:"pb-2",contentStyle:{"padding-left":"0.5rem",width:"40%"}},on:{action:t.action}}),t._v(" "),t._m(0),t._v(" "),a("LogLine",{attrs:{logs:t.profile.logs}})],1),t._v(" "),a("td",{staticClass:"text-center"},[t.profile.hideAction?t._e():a("div",{staticClass:"onboard-action"},[t.showAction?a("button",{staticClass:"btn btn-sm btn-outline-ghtk btn-pill w-51 mb-1",attrs:{id:"row-data-btn-note",name:"row-data-btn-note"},on:{click:function(e){return t.$emit("action",{action:"note",data:{}})}}},[t._v("\n          Ghi chú\n        ")]):t._e(),t._v(" "),t._l(t.profile.actions||[],function(e,n){return a("button",{key:n,staticClass:"btn btn-sm btn-outline-ghtk btn-pill w-51 mb-1",attrs:{id:"row-data-btn-action-"+e.alias,name:"row-data-btn-action-"+e.alias},on:{click:function(a){return t.$emit("action",{action:e.alias||null,data:{}})}}},[t._v("\n          "+t._s(e.desc)+"\n        ")])}),t._v(" "),t.profile.can_handover?a("button",{staticClass:"btn btn-sm btn-outline-ghtk btn-pill w-51 mb-1",attrs:{id:"row-data-btn-handover-staff",name:"row-data-btn-handover-staff"},on:{click:function(e){return t.$emit("action",{action:"handover_staff",data:{}})}}},[t._v("\n          Bàn giao NS\n        ")]):t._e(),t._v(" "),t.profile.can_attach_group?a("a",{staticClass:"btn btn-sm btn-outline-ghtk btn-pill w-51 mb-1",attrs:{href:"/admin/modules/listChildModules",target:"_blank"}},[t._v("\n            Gán nhóm\n        ")]):t._e(),t._v(" "),t.profile.can_reject?a("button",{staticClass:"btn btn-sm btn-outline-danger btn-pill w-51 mb-1",attrs:{id:"row-data-btn-reject",name:"row-data-btn-reject"},on:{click:function(e){return t.$emit("action",{action:"reject",data:{}})}}},[t._v("\n          Từ chối\n        ")]):t._e(),t._v(" "),t.profile.can_action_explain?a("button",{staticClass:"btn btn-sm btn-outline-danger btn-pill w-51 mb-1",on:{click:function(e){return t.$emit("action",{action:"showModalExplainOnboard",data:{}})}}},[t._v("\n          Giải trình\n        ")]):t._e()],2)])]):t._e()},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mt-2 mb-1"},[e("b",[this._v("Chi tiết log")])])}],!1,pc,"data-v-576e3a46",null).exports,fc={name:"model-view-pdf",props:{link:{type:String,default:null},id:{type:String,default:"model-view-pdf"},title:{type:String,default:null}}},gc=Object(y.a)(fc,function(){var t=this.$createElement,e=this._self._c||t;return e("b-modal",{attrs:{static:"","hide-footer":"",id:this.id,title:this.title,"modal-class":"modal-xxl",bodyClass:"p-0"}},[e("iframe",{staticClass:"w-100 h-75vh",attrs:{src:this.link,frameborder:"0"}})])},[],!1,null,null,null).exports,vc=function(t){return Pe.a.get("ErpStaffOnboard/getStatisticStatusOnboard",{params:t})},_c=function(t){return Pe.a.get("ErpStaffOnboard/getDataStatusOnboard",{params:t})},bc=a("bJ+M"),yc={name:"staff-onboard-dashboard",components:{ConfirmEkyc:sc,MultiSelectProvince:fe.a,MultiSelectStation:ge.a,MultiSelectDepartment:_e.a,MultiSelectPosition:be.a,TimeLine:Ce.a,HrTagModal:vi,MultiSelectHrTag:Ts.a,RowData:mc,DocumentUploadItem:bo.a,CensorV3:Ur,UpdateOrder:ye.default,SelectUser:Ie.a,ModalViewPdf:gc,InfiniteLoading:Fr.a,SensitiveLabel:Eo.a},beforeDestroy:function(){Me.a.removeLibraryTracingLogs()},props:{scrollMode:{type:Boolean},blankMode:{type:Boolean},modalPhoneNumber:{type:String,default:"modalPhoneNumber"},teamId:{default:null},showElement:{type:Boolean,default:!0},getOnboardTrigger:{default:!1}},data:function(t){return{reason_reject_profile:"",curRowData:{},orderContractId:null,candidateNote:"",documentList:[],loading:{statistic:!1,data:!1,document:!1,note:!1},page:{statistic:{current_page:1,total_row:0,per_page:10},document:{per_page:3,current_page:1,total:0}},filter:{employee:null,province:null,station:null,department:null,position:null,tag:null,join_date:null},statistics:{all:{active:!0,alias:"all",desc:"Tất cả",filter:{},id:"on-board-btn-all",name:"on-board-btn-all"},nfc_pending:{active:!1,total:null,desc:"Chưa NFC",filter:{status:"pending",step:"nfc"},id:"on-board-btn-no-nfc",name:"on-board-btn-no-nfc"},document_pending:{active:!1,total:null,desc:"Chưa duyệt HS",filter:{status:"pending",step:"document"},id:"on-board-btn-profile-not-approved",name:"on-board-btn-profile-not-approved"},contract_pending:{active:!1,total:null,desc:"Chưa ký HĐ",filter:{status:"pending",step:"contract"},id:"on-board-btn-profile-no-contract",name:"on-board-btn-profile-no-contract"},active_wallet_pending:{active:!1,total:null,desc:"Chưa kích hoạt ví",filter:{status:"pending",step:"active_wallet"},id:"on-board-btn-profile-no-active-wallet",name:"on-board-btn-profile-no-active-wallet"},asset_pending:{active:!1,total:null,desc:"Chưa cấp phát",filter:{status:"pending",step:"asset"},id:"on-board-btn-profile-pending-asset",name:"on-board-btn-profile-pending-asset"},deposit_pending:{active:!1,total:null,desc:"Chưa đóng cọc",filter:{status:"pending",step:"deposit"},id:"on-board-btn-profile-pending-deposit",name:"on-board-btn-profile-pending-deposit"},attach_group_pending:{active:!1,total:null,desc:"Chưa gán nhóm",filter:{status:"pending",step:"attach_group"}}},list_data:[],reloadTag:0,userPhoneNumber:[],recordUpdateVal:{type:"",data:null},curCensorData:{censors:[],action:"",masterProfileId:null},curTagData:{record:{},attach:!0,tableName:"profile_onboard"},openModalHrTag:!1,tags:[],file_pdf:{link:null,name:""},actionSearch:!1,tabScroll:{leftShow:!1,rightShow:!1},checkLoadData:!0,checkLoadTotal:!0}},watch:{getOnboardTrigger:function(){this.list_data=[],this.page.statistic.current_page=1,this.$refs.infiniteLoading&&this.$refs.infiniteLoading.stateChanger.reset();var t={onboard_status:"pending",teamId:this.teamId,current_page:this.page.statistic.current_page,per_page:this.page.statistic.per_page};this.getDataStatusOnboard(t,null,!0)}},computed:i()({moment:Ye.a},Object(_.c)({userInfo:"userInfo"})),mounted:function(){Me.a.importLibraryTracingLogs();var t=document.getElementById("tab-work");t&&this.checkScrollTab(null,t)},created:function(){if(this.showElement&&!this.teamId)this.getStatisticStatusOnboard({onboard_status:"pending"}),this.search();else{this.page.statistic.current_page=1,this.page.statistic.per_page=6;var t={onboard_status:"pending",teamId:this.teamId,current_page:this.page.statistic.current_page,per_page:this.page.statistic.per_page};this.getDataStatusOnboard(t,null,!0)}},methods:{infiniteHandlerOnBoard:function(t){this.page.statistic.current_page+=1;var e={onboard_status:"pending",teamId:this.teamId,current_page:this.page.statistic.current_page,per_page:this.page.statistic.per_page};this.checkLoadData&&this.getDataStatusOnboard(e,t)},checkScrollTab:function(t,e){e.scrollWidth>e.offsetWidth?(this.tabScroll.rightShow=!0,this.tabScroll.leftShow=!0):(this.tabScroll.rightShow=!1,this.tabScroll.leftShow=!1),e.scrollLeft<3?this.tabScroll.leftShow=!1:e.offsetWidth+e.scrollLeft+3>=e.scrollWidth&&(this.tabScroll.rightShow=!1)},scroll:function(t,e){(t=document.getElementById(t))&&t.scroll({left:t.scrollLeft+("right"===e?150:-150)})},verifiedProfile:function(t){var e=this;if(t)if("disable"!==t||this.reason_reject_profile){var a={profile_id:this.curRowData.id,status:t,note:this.reason_reject_profile,source:"web"};this.$startLoading(),eo.a.verifiedProfile(a).then(function(t){if(t.data.success){if(e.teamId){var a={onboard_status:"pending",teamId:e.teamId,current_page:e.page.statistic.current_page,per_page:e.page.statistic.per_page};e.getDataStatusOnboard(a)}else e.search();e.$bvModal.hide("modal-reason-reject-profile"),Me.a.showMessage(t.data.message||"Duyệt hồ sơ thành công","success")}else Me.a.showMessage(t.data.message||"Không thể duyệt hồ sơ, vui lòng thử lại sau !","warning")}).catch(function(t){console.log(t),Me.a.showMessage("Không thể duyệt hồ sơ, vui lòng thử lại sau !","warning")}).then(function(t){e.$stopLoading()})}else alert("Bạn cần nhập lý do từ chối ứng viên này !")},updateStatusCandidate:function(t,e){var a=this;return l()(o.a.mark(function n(){var i,s;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i={id:t.id,newStatus:e},n.prev=1,n.next=4,bc.a.updateStatusCandidate(i);case 4:if(!(s=n.sent).data.success){n.next=12;break}return Me.a.showMessage(s.data.message,"success"),n.next=9,a.refreshModelTags();case 9:"saveinfo"===e&&a.$bvModal.hide("modal-deny-candidate-onboard"),n.next=13;break;case 12:Me.a.showMessage(s.data.message||"Không cập nhật được trạng thái cho ứng viên !","warning");case 13:n.next=18;break;case 15:n.prev=15,n.t0=n.catch(1),console.log(n.t0);case 18:return n.prev=18,a.loading=!1,n.finish(18);case 21:case"end":return n.stop()}},n,a,[[1,15,18,21]])}))()},activeWork:function(t){if(this.actionSearch=!1,t&&(t.active=!t.active),"all"===t.alias)for(var e in this.statistics)"all"!==e&&(this.statistics[e].active=!1);else this.statistics.all.active=!1;var a=0;for(var n in this.statistics)this.statistics[n].active&&a++;a||(t.active=!0),this.search()},search:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.page.statistic.current_page=1);var t=i()({},this.filter,{current_page:this.page.statistic.current_page,per_page:this.page.statistic.per_page,onboard_status:"pending",onboard_step:""});if(!this.statistics.all.active)for(var e in this.statistics)this.statistics[e].active&&(t.onboard_step+=this.statistics[e].filter.step+",");this.getDataStatusOnboard(t)},getStatisticStatusOnboard:function(t){var e=this;this.loading.statistic=!0,this.checkLoadTotal=!1,vc(t).then(function(t){if(t.data.success){if(e.teamId)e.$emit("getTotal",{action:"total_on_board",total:t.data.data.total||0});else for(var a in t.data.data)e.statistics[a]&&(e.statistics[a].total=t.data.data[a]);e.checkLoadTotal=!0}else e.checkLoadTotal=!0,Me.a.showMessage(t.data.message||"Có lỗi khi lấy dữ liệu thồng kê tình trạng nhận việc của nhân viên !")}).catch(function(t){console.log(t),Me.a.showMessage("Có lỗi khi lấy dữ liệu thồng kê tình trạng nhận việc của nhân viên !")}).finally(function(t){e.checkLoadTotal=!0,e.loading.statistic=!1})},getDataStatusOnboard:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.checkLoadData&&(null!==this.teamId&&(this.showElement=!1),this.loading.data=!0,this.checkLoadData=!1,_c(t).then(function(t){if(t.data.success){if(!Me.a.isEmpty(a))if(Me.a.isEmpty(t.data.data))a.complete();else if(!n){var i;(i=e.list_data).push.apply(i,d()(t.data.data)),a.loaded()}e.teamId?(n||Me.a.isEmpty(a))&&(e.list_data=t.data.data,e.$refs.infiniteLoading&&e.$refs.infiniteLoading.stateChanger.reset(),e.page.statistic.current_page=1):(t.data.data.map(function(t){t.fixedTags=[],Me.a.isEmpty(t.current_process_tag)||t.fixedTags.push({name:t.current_process_tag,style:{"background-color":"#069255",color:"white"}})}),e.list_data=t.data.data),e.page.statistic.total_row=t.data.total;var s=!1;e.list_data&&e.list_data.length>0&&(s=!0),e.$emit("getTotal",{action:"total_on_board",total:t.data.total||0}),e.$emit("action",{action:"check_open",checkOpen:s,screen:"on_board"}),e.checkLoadData=!0}else e.checkLoadData=!0,Me.a.isEmpty(a)||a.complete(),Me.a.showMessage(t.data.message||"Có lỗi khi lấy dữ liệu nhận việc của nhân viên !")}).catch(function(t){console.log(t),Me.a.showMessage("Có lỗi khi lấy dữ liệu nhận việc của nhân viên !")}).finally(function(t){e.checkLoadData=!0,e.loading.data=!1}))},onPageChange:function(t){this.page.document.current_page=t,this.getDocumentList()},getDocumentList:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading.document=!0,e.next=4,Es.a.getDocuments({page:t.page.document.current_page,limit:t.page.document.per_page,mpId:t.curRowData.id});case 4:a=e.sent,(n=a.data).success?(t.documentList=n.data.list,t.getDocumentCount()):Me.a.showMessage(n.message),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Me.a.showMessage(e.t0.message);case 12:return e.prev=12,t.loading.document=!1,e.finish(12);case 15:case"end":return e.stop()}},e,t,[[0,9,12,15]])}))()},getDocumentCount:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading.document=!0,e.next=4,Es.a.getDocuments({page:t.page.document.current_page,limit:t.page.document.per_page,mpId:t.curRowData.id,isCount:!0});case 4:a=e.sent,n=a.data,t.page.document.total=n.data.total,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Me.a.showMessage(e.t0.message);case 12:return e.prev=12,t.loading.document=!1,e.finish(12);case 15:case"end":return e.stop()}},e,t,[[0,9,12,15]])}))()},approve:function(t){var e=this,a=t.doc.ProfileDocument.id,n=t.status;this.$bvModal.msgBoxConfirm("Bạn có chắc muốn duyệt hồ sơ này?",{title:"Duyệt hồ sơ",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"Tiếp tục",cancelTitle:"Hủy",hideHeaderClose:!1,centered:!0}).then(function(t){t&&(e.execApprove({id:a,status:n}),e.getDocumentCount())}).catch(function(t){})},execApprove:function(t){var e=this,a=t.id,n=t.status;return l()(o.a.mark(function t(){var i,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading.document=!0,t.next=4,Es.a.approveDocument({info:{id:a,status:n},query:{page:e.page.document.current_page,limit:e.page.document.per_page,mpId:e.curRowData.id}});case 4:i=t.sent,(s=i.data).success?(Me.a.showMessage("Duyệt hồ sơ thành công","success"),e.documentList=s.data.list):Me.a.showMessage(s.message,"warning"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),Me.a.showMessage(t.t0.message);case 12:return t.prev=12,e.loading.document=!1,t.finish(12);case 15:case"end":return t.stop()}},t,e,[[0,9,12,15]])}))()},remove:function(t){var e=this;this.$bvModal.msgBoxConfirm("Bạn có chắc muốn xóa hồ sơ này?",{title:"Xóa hồ sơ",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"Tiếp tục",cancelTitle:"Hủy",hideHeaderClose:!1,centered:!0}).then(function(a){a&&(e.execRemove(t),e.getDocumentCount())}).catch(function(t){})},execRemove:function(t){var e=this;return l()(o.a.mark(function a(){var n,i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e.loading.document=!0,a.next=4,Es.a.removeDocument({id:t,query:{page:e.page.document.current_page,limit:e.page.document.per_page,mpId:e.curRowData.id}});case 4:n=a.sent,(i=n.data).success?(Me.a.showMessage("Xóa hồ sơ thành công","success"),e.documentList=i.data.list):Me.a.showMessage(i.message,"warning"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:return a.prev=12,e.loading.document=!1,a.finish(12);case 15:case"end":return a.stop()}},a,e,[[0,9,12,15]])}))()},createNote:function(){var t=this;return l()(o.a.mark(function e(){var a,n,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading.note=!0,e.next=4,Es.a.createNote({mpId:t.curRowData.id,note:t.candidateNote,groupType:"onboard"});case 4:a=e.sent,(n=a.data).success?(t.$bvModal.hide("modal-note"),i=n.data,t.curRowData.logs.push({id:i.id,message:i.desc,created:i.created}),Me.a.showMessage(n.data.message||"Thêm ghi chú thành công","success")):Me.a.showMessage(n.message,"warning"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:return e.prev=12,t.loading.note=!1,e.finish(12);case 15:case"end":return e.stop()}},e,t,[[0,9,12,15]])}))()},actionUpdateRecord:function(t){var e=this;"attachTag"===t.action&&(this.curTagData.record.tags&&t.data&&this.curTagData.record.tags.push(t.data),this.curRowData.logs&&t.log&&(Array.isArray(t.log)?t.log.forEach(function(t){e.curRowData.logs.push({id:t.id,message:t.desc,created:t.created})}):this.curRowData.logs.push({id:t.log.id,message:t.log.desc,created:t.log.created}))),"refreshHrTag"===t.action&&this.reloadTag++,"closeHrTag"===t.action&&(this.openModalHrTag=!1),"delete_censor"===t.action&&(this.curRowData.handlers[this.curCensorData.action]=this.curRowData.handlers[this.curCensorData.action].filter(function(e){return+e.id!=+t.data.id})),t.action},handlerNoteAction:function(){if(Me.a.isEmpty(this.candidateNote))return Me.a.showMessage("Nội dung ghi chú không được để trống !");this.createNote()},action:function(t,e){this.curRowData=t,"deleteTag"===e.action&&(this.curRowData.tags&&e.data&&(this.curRowData.tags=this.curRowData.tags.filter(function(t){return+t.id!=+e.data.id})),this.curRowData.logs&&e.log&&this.curRowData.logs.push({id:e.log.id,message:e.log.desc,created:e.log.created})),"confirm_document"===e.action&&(this.getDocumentList(),this.$bvModal.show("modal-unconfirm-profile")),"confirm_ekyc"===e.action&&this.$bvModal.show("modal-confirm-ekyc"),"tu_choi"===e.action&&this.checkStatusUpdate("tu_choi"),"phone"===e.action&&this.handleToggleModalPhoneNumber(t.user_id),"view_profile"===e.action&&ze.a.redirectProfile(t.group_id,t.user_id,t.id),"tag"===e.action&&this.handleToggleModalHrTag(t),"note"===e.action&&this.$bvModal.show("modal-note"),"chat_user"===e.action&&this.gotoGroupChat({id:e.data.user_id}),"edit_handler"===e.action&&(this.$bvModal.show("modal-edit-censor"),this.curCensorData=e.data),"reject"===e.action&&this.$bvModal.show("modal-reason-reject-profile"),"confirm_contract"===e.action&&(this.orderContractId=t.order_contract_id,this.$bvModal.show("modal-order-onboard")),"handover_staff"===e.action&&this.handoverStaff(),"view_document_list"===e.action&&this.viewIdentify(e),"view_file_pdf"===e.action&&(this.file_pdf=e.data,this.$bvModal.show("model-view-pdf")),"showModalExplainOnboard"===e.action&&this.$emit("action",{action:e.action,data:t})},gotoGroupChat:function(t){var e=this;t&&t.id&&(t.channel_id?window.open("https://ghtk.me/channel/internal/"+t.channel_id,"_blank"):Se.a.createDirectChat({userId:t.id}).then(function(t){if(t.data.success){var e=t.data.data.channel_id;window.open("https://ghtk.me/channel/internal/"+e,"_blank")}else Me.a.showMessage(t.data.message||"Tạo direct chat thất bại !")}).catch(function(t){Me.a.showMessage("Có lỗi xảy ra, vui lòng thử lại sau !"),console.log(t)}).finally(function(t){e.loading=!1}))},handoverStaff:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading.statistic=!0,e.prev=1,e.next=4,Es.a.handoverStaff({user_id:t.curRowData.user_id});case 4:a=e.sent,(n=a.data).success?(Me.a.showMessage(n.message,"success"),t.curRowData.can_handover=!1,t.curRowData.logs.push({id:n.data.id,message:n.data.desc,created:n.data.created})):Me.a.showMessage(n.message,"warning"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),Me.a.showMessage(e.t0.message,"warning");case 12:return e.prev=12,t.loading.statistic=!1,e.finish(12);case 15:case"end":return e.stop()}},e,t,[[1,9,12,15]])}))()},handleToggleModalHrTag:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(Me.a.isEmpty(t))return this.curTagData.attach=!1,void(this.openModalHrTag=!0);t.id&&(this.curTagData.attach=!0,this.curTagData.record=t,this.openModalHrTag=!0)},handleToggleModalPhoneNumber:function(t){if(t){var e={user_id:t,get_full_tel:!0};this.getUserInfo(e),this.$bvModal.show(this.modalPhoneNumber)}},viewIdentify:function(t){var e=this;return l()(o.a.mark(function a(){var n,i,s,r,l,c,d;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n=o.a.mark(function t(a){var n,i,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,eo.a.getOriginImage({urls:a.links});case 2:n=t.sent,i=n.data,s=[],i.urls.forEach(function(t){return s.push(t.path)}),a.links=s;case 7:case"end":return t.stop()}},t,e)}),i=!0,s=!1,r=void 0,a.prev=4,l=fa()(e.curRowData.documents.file_documents[t.data.doc_idx].files);case 6:if(i=(c=l.next()).done){a.next=12;break}return d=c.value,a.delegateYield(n(d),"t0",9);case 9:i=!0,a.next=6;break;case 12:a.next=18;break;case 14:a.prev=14,a.t1=a.catch(4),s=!0,r=a.t1;case 18:a.prev=18,a.prev=19,!i&&l.return&&l.return();case 21:if(a.prev=21,!s){a.next=24;break}throw r;case 24:return a.finish(21);case 25:return a.finish(18);case 26:case"end":return a.stop()}},a,e,[[4,14,18,26],[19,,21,25]])}))()},getUserInfo:function(t){var e=this;qo.a.getUserDetailInfo(t).then(function(t){t.data.success?e.userPhoneNumber=t.data.userInfo:Me.a.showMessage(t.data.message||"Không lấy được dữ liệu người dùng!","warning")}).catch(function(t){Me.a.showMessage("Đã có lỗi xảy ra, vui lòng thử lại sau !","warning"),console.log(t)}).finally(function(){})},reloadOnUpdateCensor:function(){this.getDataStatusOnboard(),this.$bvModal.hide("modal-edit-censor")},reloadOnEkyc:function(){if(this.teamId){var t={current_page:this.page.statistic.current_page,per_page:this.page.statistic.per_page,onboard_status:"pending",teamId:this.teamId};this.getStatisticStatusOnboard(t)}else this.search(!1);this.$bvModal.hide("modal-confirm-ekyc")},resetFilter:function(){for(var t in this.filter)"status"!==t&&(this.filter[t]=null);this.search()},formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD/MM/YYYY";return Me.a.formatDate(t,e)},handleProvinceSelected:function(t){this.filter.province=t?t.map(function(t){return t.id}).toString():""},handleStationSelected:function(t){this.filter.station=t?t.map(function(t){return t.id}).toString():""},handleDepartmentSelected:function(t){this.filter.department=t?t.map(function(t){return t.id}).toString():""},handlePositionSelected:function(t){this.filter.position=t?t.map(function(t){return t.id}).toString():""},handleHrTagSelected:function(t){this.filter.tag=t?t.map(function(t){return t.id}).toString():""},changeAction:function(){this.actionSearch=!0},closeModalPhone:function(){this.userPhoneNumber={},this.$bvModal.hide(this.modalPhoneNumber)},hideModal:function(){this.reason_reject_profile=""}}};var Cc=function(t){a("IJZV")},wc=Object(y.a)(yc,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"small-scrollbar fit-view-screen text-black"},[t.showElement?a("b-row",{staticClass:"header my-2 align-items-center"},[a("b-col",{attrs:{md:"2"}},[a("h4",{staticClass:"m-0"},[t._v("Nhận việc")])]),t._v(" "),a("b-col",{staticClass:"text-right",attrs:{md:"10"}},[a("div",{staticClass:"d-flex justify-content-end align-item-center"},[a("div",{staticClass:"tab-work-scroll"},[t.tabScroll.leftShow?a("div",{staticClass:"pre-tab pre-tab-left"},[a("div",{staticClass:"pre-btn text-ghtk",on:{click:function(e){return t.scroll("tab-work","left")}}},[a("i",{staticClass:"ion ion-ios-arrow-back"})])]):t._e(),t._v(" "),a("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.checkScrollTab,expression:"checkScrollTab"},{name:"resize",rawName:"v-resize",value:t.checkScrollTab,expression:"checkScrollTab"}],staticClass:"work-options",attrs:{id:"tab-work"}},t._l(t.statistics,function(e,n){return a("button",{key:n,staticClass:"btn btn-pill mr-1 mb-1",class:e.active?"btn-ghtk":"btn-ghtk-disable",attrs:{id:e.id,name:e.name},on:{click:function(a){return t.activeWork(e)}}},[t._v("\n            "+t._s(e.desc)+"\n            "),a("span",[null===e.total?a("i",{staticClass:"fas fa-spinner fa-pulse"}):0===e.total||e.total>0?a("span",[t._v("("+t._s(e.total||0)+")")]):t._e()])])}),0),t._v(" "),t.tabScroll.rightShow?a("div",{staticClass:"pre-tab pre-tab-right"},[a("div",{staticClass:"pre-btn text-ghtk",on:{click:function(e){return t.scroll("tab-work","right")}}},[a("i",{staticClass:"ion ion-ios-arrow-forward"})])]):t._e()]),t._v(" "),a("div",{staticClass:"ml-4 list-tag-btn"},[a("span",{staticClass:"text-ghtk cursor-pointer mx-2",attrs:{name:"on-board-btn-tag",id:"on-board-btn-tag"},on:{click:function(e){return t.handleToggleModalHrTag(null)}}},[a("i",{staticClass:"fas fa-plus"}),t._v(" Tag")])])])])],1):t._e(),t._v(" "),t.showElement?a("div",{staticClass:"row filter pb-2 justify-content-between input-border"},[a("div",{staticClass:"mb-1 input-filter"},[a("SelectUser",{staticClass:"z-1000 multiselect-ghtk multiselect-no-horizontal",attrs:{placeholder:"Họ tên"},on:{onChange:function(e){t.filter.employee=e?e.id:null}}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter"},[a("multi-select-province",{attrs:{"custom-class":"z-1000 multiselect-ghtk multiselect-no-horizontal","province-ids":t.filter.province,"auto-close":!0,"hide-select":!0},on:{handleProvinceSelected:t.handleProvinceSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter z-1000"},[a("multi-select-station",{attrs:{"custom-class":"z-1000 multiselect-ghtk multiselect-no-horizontal","province-ids":t.filter.province,"station-ids":t.filter.station,"auto-close":!0,"hide-select":!0},on:{handleStationSelected:t.handleStationSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter z-1000"},[a("MultiSelectPosition",{attrs:{"custom-class":"multiselect-ghtk multiselect-no-horizontal","position-ids":t.filter.position,"auto-close":!0,"hide-selected":!0,placeholder:"Vị trí"},on:{handlePositionSelected:t.handlePositionSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter z-1000"},[a("v-date-picker",{attrs:{locale:"vi",color:"green","input-props":{placeholder:"Ngày vào",style:"font-size:14px; line-height: unset",class:"form-control rounded"},popover:{visibility:"focus"}},model:{value:t.filter.join_date,callback:function(e){t.$set(t.filter,"join_date",e)},expression:"filter.join_date"}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter z-100"},[a("MultiSelectHrTag",{attrs:{reload:t.reloadTag,tableName:t.curTagData.tableName,"custom-class":"z-1000 multiselect-ghtk multiselect-no-horizontal","auto-close":!0,"hide-selected":!0,placeholder:"Tag"},on:{handleHrTagSelected:t.handleHrTagSelected}})],1),t._v(" "),a("div",{staticClass:"text-right input-filter"},[a("button",{staticClass:"btn btn-ghtk rounded w-100",on:{click:function(e){t.search(),t.changeAction()}}},[t._v("\n        Tìm kiếm\n      ")])])]):t._e(),t._v(" "),a("div",{staticClass:"table-data",class:t.scrollMode&&t.showElement&&"table-sticky"},[a("table",{staticClass:"table table-sm mb-0"},[t._m(0),t._v(" "),a("tbody",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.data,expression:"loading.data"}],staticClass:"position-relative"},[t._l(t.list_data,function(e,n){return[a("RowData",{key:n,attrs:{profile:e,actionSearch:t.actionSearch,showAction:t.showElement},on:{action:function(a){for(var n=arguments.length,i=Array(n);n--;)i[n]=arguments[n];return t.action.apply(void 0,[e].concat(i))}}})]}),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:!t.list_data||!t.list_data.length,expression:"(!list_data || !list_data.length)"}]},[a("td",{attrs:{colspan:"10"}},[a("div",{staticClass:"mih-25 d-flex justify-content-center align-items-center"},[a("b",{directives:[{name:"show",rawName:"v-show",value:!t.loading.data,expression:"!loading.data"}]},[t._v("Không có dữ liệu phù hợp !")])])])])],2)])]),t._v(" "),t.showElement?a("div",{staticClass:"row my-3 align-items-center"},[a("div",{staticClass:"col col-md-9 text-left"},[a("b",[t._v("\n        Bản ghi/ trang\n      ")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.page.statistic.per_page,expression:"page.statistic.per_page"}],staticClass:"form-control form-control-sm w-4re text-ghtk rounded border-ghtk d-inline-block",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.page.statistic,"per_page",e.target.multiple?a:a[0])},function(e){return t.search()}]}},[a("option",[t._v("5")]),t._v(" "),a("option",[t._v("10")]),t._v(" "),a("option",[t._v("25")]),t._v(" "),a("option",[t._v("50")]),t._v(" "),a("option",[t._v("100")])]),t._v(" "),a("div",{staticClass:"z-0 d-inline-block"},[a("b-pagination",{staticClass:"paginator-ghtk mb-0",attrs:{size:"sm",align:"left","total-rows":+t.page.statistic.total_row,"per-page":+t.page.statistic.per_page},on:{input:function(e){return t.search(!1)}},model:{value:t.page.statistic.current_page,callback:function(e){t.$set(t.page.statistic,"current_page",e)},expression:"page.statistic.current_page"}})],1)])]):t._e(),t._v(" "),a("b-modal",{attrs:{"modal-class":"modal-custom",size:"sm",centered:"",static:"",id:"modal-deny-candidate-onboard","hide-footer":"","hide-header":""}},[a("div",{staticClass:"modal-title-contact"},[a("span",[t._v("Thông báo")])]),t._v(" "),a("div",{staticClass:"modal-content-contact"},[a("div",[a("span",[t._v("Bạn chắc chắn muốn từ chối ứng viên này")])])]),t._v(" "),a("div",{staticClass:"text-center mt-3 mb-2"},[a("b-btn",{staticClass:"button-deny-modal",attrs:{variant:"secondary"},on:{click:function(e){return t.$bvModal.hide("modal-deny-candidate-onboard")}}},[t._v("Đóng")]),t._v(" "),a("b-btn",{staticClass:"button-deny-modal",attrs:{variant:"ghtk"},on:{click:function(e){return t.updateStatusCandidate("saveinfo")}}},[t._v("Xác nhận")])],1)]),t._v(" "),a("b-modal",{ref:"phone-number",attrs:{id:t.modalPhoneNumber,title:"Gọi ứng viên",centered:"","title-class":"w-100","header-class":"text-center","hide-footer":"",size:"sm"}},[a("div",{staticClass:"d-block text-start"},[a("div",[a("b",[t._v("Họ tên:")]),t._v(" "+t._s(t.userPhoneNumber.fullName))]),t._v(" "),a("div",[a("b",[t._v("Vị trí:")]),t._v(" "+t._s(t.userPhoneNumber.positionName))]),t._v(" "),a("div",[a("b",[t._v("Số điện thoại:")]),t._v(" "),a("SensitiveLabel",{staticClass:"d-inline",attrs:{"data-input":t.userPhoneNumber.tel,"user-id":t.userPhoneNumber.userId,type:"tel",source:"staff-onboard"}})],1)]),t._v(" "),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-ghtk rounded text-white",on:{click:function(e){return t.closeModalPhone()}}},[t._v("Đóng")])])])]),t._v(" "),a("b-modal",{ref:"note",attrs:{id:"modal-note",title:"Ghi chú",centered:"","title-class":"w-100","header-class":"text-center","hide-footer":"",size:"sm"},on:{hide:function(e){t.candidateNote=""}}},[a("b-form-group",{attrs:{"label-size":"lg"}},[a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.candidateNote,expression:"candidateNote",modifiers:{trim:!0}}],staticClass:"rounded form-control",attrs:{name:"noteContent",rows:"4",placeholder:"Nhập ghi chú"},domProps:{value:t.candidateNote},on:{input:function(e){e.target.composing||(t.candidateNote=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.note,expression:"loading.note"}],staticClass:"d-flex justify-content-between"},[a("button",{staticClass:"btn btn-m-closed rounded text-white lh-0-8",on:{click:function(e){return t.$bvModal.hide("modal-note")}}},[t._v("Đóng")]),t._v(" "),a("button",{staticClass:"btn btn-ghtk rounded text-white lh-0-8",on:{click:t.handlerNoteAction}},[t._v("Lưu")])])],1),t._v(" "),a("b-modal",{attrs:{static:"",centered:"",size:"lg",id:"modal-reason-reject-profile",title:"Lý do từ chối"},on:{hide:function(e){return t.hideModal()}}},[a("b-textarea",{attrs:{rows:"3"},model:{value:t.reason_reject_profile,callback:function(e){t.reason_reject_profile=e},expression:"reason_reject_profile"}}),t._v(" "),a("div",{staticClass:"w-100 text-center",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("b-btn",{on:{click:function(e){return t.verifiedProfile("disable")}}},[t._v("OK")])],1)],1),t._v(" "),a("b-modal",{attrs:{id:"modal-order-onboard",static:"","modal-class":"modal-xxl",title:"THÔNG TIN ĐỀ XUẤT","hide-footer":""}},[a("update-order",{attrs:{"id-order":t.orderContractId,"modal-style":!0,"order-type":"new_contract"},on:{addOrderOk:function(e){t.search(),t.$bvModal.hide("modal-order-onboard")}}})],1),t._v(" "),a("b-modal",{ref:"modal-confirm-ekyc",attrs:{title:"Xác thực eKYC","title-class":"w-100","header-class":"text-center",id:"modal-confirm-ekyc",size:"lg","hide-footer":""}},[a("ConfirmEkyc",{attrs:{"user-info":t.curRowData},on:{reloadPage:t.reloadOnEkyc}})],1),t._v(" "),a("b-modal",{ref:"modal-unconfirm-profile",attrs:{title:"Hồ sơ chưa duyệt","title-class":"w-100","header-class":"text-center",id:"modal-unconfirm-profile",size:"lg","hide-footer":""}},[a("b-row",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.document,expression:"loading.document"}],staticClass:"position-relative mih-10re m-0"},t._l(t.documentList,function(e,n){return a("DocumentUploadItem",{key:"upload-"+n,staticClass:"mb-3",attrs:{"custom-class":"col-4 border",item:e},on:{approve:t.approve,remove:t.remove}})}),1),t._v(" "),a("b-pagination",{staticClass:"paginator-ghtk m-0 mt-3",attrs:{size:"sm",align:"center","total-rows":+t.page.document.total,"per-page":+t.page.document.per_page},on:{input:t.getDocumentList},model:{value:t.page.document.current_page,callback:function(e){t.$set(t.page.document,"current_page",e)},expression:"page.document.current_page"}})],1),t._v(" "),a("HrTagModal",{attrs:{scope:"global",open:t.openModalHrTag,attachPermission:t.curTagData.attach,recordId:t.curTagData.record.id,tableName:t.curTagData.tableName},on:{action:t.actionUpdateRecord}}),t._v(" "),a("b-modal",{attrs:{title:"Cập nhật người xử lý","title-class":"w-100","header-class":"text-center",id:"modal-edit-censor","hide-footer":""}},[a("CensorV3",{attrs:{censorData:t.curCensorData},on:{action:t.actionUpdateRecord}})],1),t._v(" "),a("ModalViewPdf",{attrs:{link:t.file_pdf.link,title:t.file_pdf.name}}),t._v(" "),t.showElement?t._e():a("infinite-loading",{ref:"infiniteLoading",attrs:{spinner:"spiral"},on:{infinite:t.infiniteHandlerOnBoard}},[a("div",{staticClass:"text-center",attrs:{slot:"no-more"},slot:"no-more"},[t._v("Đã đến cuối trang!")]),t._v(" "),a("div",{staticClass:"text-center",attrs:{slot:"no-results"},slot:"no-results"},[t.list_data?a("span",[t._v("Đã đến cuối trang!")]):a("span",[t._v("Không có dữ liệu nào! ")])])])],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",{staticClass:"text-center"},[e("th",{staticClass:"w-30"},[e("b",[this._v("Thông tin nhân viên")])]),this._v(" "),e("th",[e("b",[this._v("Trạng thái nhận việc")])]),this._v(" "),e("th",{staticClass:"w-15"},[e("b",[this._v("Thao tác")])])])])}],!1,Cc,"data-v-a96260a2",null).exports,kc=a("JmUl"),xc=a("Yw12"),Sc={name:"NewCandidateBoard",components:{ListCandidates:kc.a,CandidateTagModal:xc.a},props:{teamId:{default:null},triggerCandidate:{default:0},isCloseShift:{default:!0},isLoadFirstTime:{type:Boolean,default:!1}},data:function(){return{isScrollGetCandidate:!1,newCandidates:[],candidates:[],paginate:{total:0,per_page:10,from:1,to:0,current_page:1,last_page:0,first_page_url:"",last_page_url:"",links:[{url:null,label:"",active:!1}],next_page_url:"",path:"",prev_page_url:null},must_handle:0,selectedCandidate:{id:null,tags:[]},permissions:[],loading:!1}},watch:{loading:function(t){this.$emit("load",{loading:t})},teamId:function(t){t?this.refreshPage():(this.paginate.current_page=1,this.paginate.total=0,this.candidates=[],this.newCandidates=[])},triggerCandidate:function(){this.refreshPage()},must_handle:function(t){this.$emit("changeTotalCandidates",{total:t}),t>0?this.$emit("unfinishedClosingShift"):this.$emit("finishedClosingShift")}},created:function(){this.isLoadFirstTime&&this.teamId&&this.refreshPage()},methods:{endScroll:function(t){var e=this;return l()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(t.target.offsetHeight>0&&t.target.scrollTop>0&&t.target.offsetHeight+t.target.scrollTop>=t.target.scrollHeight-20)){a.next=4;break}if(!(e.paginate.current_page<=e.paginate.last_page)){a.next=4;break}return a.next=4,e.getCandidates(!1);case 4:case"end":return a.stop()}},a,e)}))()},refreshPage:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.paginate.current_page=1,t.paginate.total=0,t.candidates=[],t.newCandidates=[],e.next=6,t.getCandidates(!0);case 6:t.countCandidateMustHandle();case 7:case"end":return e.stop()}},e,t)}))()},getCandidates:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return l()(o.a.mark(function a(){var n,i,s,r,l,c,u,h,p;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t.teamId){a.next=3;break}return Me.a.showMessage("Bạn chưa chọn team chốt ca!","warning"),a.abrupt("return");case 3:if(!t.isScrollGetCandidate){a.next=5;break}return a.abrupt("return");case 5:return t.isScrollGetCandidate=!0,t.loading=!0,e&&(t.paginate.current_page=1),n={emp_team_id:t.teamId,page:t.paginate.current_page?t.paginate.current_page:1,per_page:t.paginate.per_page?t.paginate.per_page:10},a.next=11,ec.a.getCandidateForCloseShift(n);case 11:i=a.sent,s=i.data,r=s.success,l=s.data,c=s.permission,u=s.message,r?(l.length&&(t.candidates=t.candidates||[],t.newCandidates=l,(h=t.candidates).push.apply(h,d()(l))),p={},We()(t.paginate).forEach(function(e){p[e]=i.data[e]||t.paginate[e]}),t.paginate=p,t.permissions=c||[],l.length&&t.paginate.current_page++):Me.a.showMessage(u||"Có lỗi xảy ra khi lấy dữ liệu tuyển dung!","warning"),t.loading=!1,t.isScrollGetCandidate=!1;case 16:case"end":return a.stop()}},a,t)}))()},countCandidateMustHandle:function(){var t=this;if(this.teamId){var e={emp_team_id:this.teamId,explained:0,just_count:1};ec.a.getCandidateForCloseShift(e).then(function(e){var a=e.data,n=a.success,i=a.total,s=a.message;n?t.must_handle=i:(t.must_handle=0,Me.a.showMessage(s||"Có lỗi xảy ra khi lấy dữ liệu tuyển dung!","warning"))}).catch(function(e){t.must_handle=0,Me.a.showMessage(e.message||"Có lỗi xảy ra khi lấy dữ liệu tuyển dung!","error")})}else Me.a.showMessage("Bạn chưa chọn team chốt ca!","warning")},openTagManage:function(t){t&&(this.selectedCandidate=t),this.$bvModal.show("candidate-tag-modal")},pushCandidateTag:function(t){this.selectedCandidate.tags.push({tag_id:t.tag_id,name:t.tag_name,type:t.tag_type})},explanation:function(t){this.$emit("explainCandidate",t)}}};var Mc=function(t){a("JU5l")},Tc=Object(y.a)(Sc,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"candidate-board",on:{scroll:t.endScroll}},[a("ListCandidates",{staticClass:"table-data mh-100",attrs:{listCandidates:t.candidates,newCandidates:t.newCandidates,isCloseShift:t.isCloseShift,permissions:t.permissions},on:{createUserSuccess:t.refreshPage,reloadCandidates:t.refreshPage,refreshModelTags:t.refreshPage,openTagOfCandidate:t.openTagManage,explanation:t.explanation}}),t._v(" "),t.candidates.length<1?a("div",[a("p",{staticClass:"mb-3 text-center"},[t._v("Không có dữ liệu !")])]):t.paginate.current_page>=t.paginate.last_page?a("div",[a("p",{staticClass:"mb-3 text-center"},[t._v("Đã đến cuối trang !")])]):t._e(),t._v(" "),a("CandidateTagModal",{attrs:{"record-id":t.selectedCandidate.id,"tags-candidate":t.selectedCandidate.tags},on:{attach:t.pushCandidateTag}})],1)},[],!1,Mc,"data-v-0a47d33a",null).exports,Dc=function(t){function e(){return Un()(this,e),Hn()(this,(e.__proto__||Nn()(e)).apply(this,arguments))}return jn()(e,t),e}(Fn.a);Dc.VH_KHONG_BAO_LICH_HOC=1,Dc.HR_KHONG_XEP_LOP=2,Dc.HR_THAO_TAC_NHAM=3,Dc.HV_CO_TINH_KO_THAM_GIA=4,Dc.HV_KI_NANG_CHUA_TOT=5,Dc.HV_NGHI_VIEC=6,Dc.HV_HOAN_LICH=7,Dc.LY_DO_KHAC=8;var Ic=Dc,Pc={name:"single-select-explanation-reason",components:{Multiselect:la.a},props:{reasonId:null,isDisabled:{type:Boolean}},data:function(){return{option:null,options:[]}},created:function(){this.getList()},watch:{option:function(t,e){this.$emit("handleSelected",t)},reasonId:function(t,e){t?this.setSelectedOption():this.option=null}},methods:{getList:function(){var t=this,e="listExplanationReason";if(sessionStorage.getItem(e))return this.options=JSON.parse(sessionStorage.getItem(e)),void this.setSelectedOption();ca.a.getListExplanationReason().then(function(a){a.data.success&&(t.options=a.data.data,t.setSelectedOption(),sessionStorage.setItem(e,sa()(t.options)))}).catch(function(t){console.log(t)})},setSelectedOption:function(){var t=this;this.options.length>0&&this.reasonId&&(this.option=this.options.find(function(e){return parseInt(e.id)===parseInt(t.reasonId)}))}}},Ec=Object(y.a)(Pc,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("multiselect",{attrs:{options:t.options,placeholder:"Chọn lý do",label:"content","track-by":"content",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn",searchable:!0,disabled:t.isDisabled},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v("Chọn lý do")])])],1)},[],!1,null,null,null).exports,Lc={name:"training-board",components:{InfiniteLoading:Fr.a,SingleSelectExplanationReason:Ec,LogLine:Ir,SensitiveLabel:Eo.a},props:{teamId:{default:null}},data:function(){return{listUsers:[],loading:!1,page:1,limit:6,userPhoneNumber:{},modalPhoneNumber:"modalTpShiftPhoneNumber",loadingModalPhoneNumber:!1,teamIdData:null}},watch:{teamId:function(t){t&&this.resetLoadData()}},created:function(){this.resetLoadData()},methods:{resetLoadData:function(){this.listUsers=[],this.page=1,this.getDataConfirmShift()},loadMore:function(t){this.page>1&&(t&&(this.stateLoad=t),this.getDataConfirmShift())},getDataConfirmShift:function(){var t=this;return l()(o.a.mark(function e(){var a,n,i,s,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,a={team_id:t.teamId,page:t.page,limit:t.limit},e.prev=2,e.next=5,ca.a.getDataConfirmShift(a);case 5:if(n=e.sent,(i=n.data).success)if(i.data.list.length){for(r=0;r<i.data.list.length;r++)i.data.list[r].showReasonDetail=parseInt(i.data.list[r].explanation_reason_id)===Ic.LY_DO_KHAC;t.listUsers=t.listUsers||[],(s=t.listUsers).push.apply(s,d()(i.data.list)),t.sortListUsers(),t.page=t.page+1,t.stateLoad&&t.stateLoad.loaded()}else t.stateLoad&&t.stateLoad.complete();else Me.a.showMessage(i.message||"Không thuộc vùng quản lý !","warning");e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:return e.prev=13,t.loading=!1,e.finish(13);case 16:case"end":return e.stop()}},e,t,[[2,10,13,16]])}))()},sortListUsers:function(){for(var t=[],e=[],a=0;a<this.listUsers.length;a++)Me.a.isEmpty(this.listUsers[a].explanation_reason_id)?e.push(this.listUsers[a]):t.push(this.listUsers[a]);for(var n=0;n<t.length;n++)t[n].lastExplainedLog=this.getLastExplainedLog(t[n].logs);t.sort(function(t,e){return t.lastExplainedLog.created>e.lastExplainedLog.created?1:t.lastExplainedLog.created<e.lastExplainedLog.created?-1:0}),this.listUsers=e.concat(t)},getLastExplainedLog:function(t){if(Me.a.isEmpty(t))return null;for(var e=t.length,a=null,n=0;n<e;n++)"explainLockShift"===t[n].action&&(null===a||a.created<t[n].created)&&(a=t[n]);return a},handleButtonCall:function(t){if(t){var e={user_id:t,get_full_tel:!0};this.getUserInfo(e),this.$bvModal.show(this.modalPhoneNumber)}},handleButtonViewProfile:function(t,e,a){ze.a.redirectProfile(t,e,a)},handleSelectReason:function(t,e){var a=!0;Me.a.isEmpty(t)||this.listUsers[e].explanation_reason_id!==t.id||(a=!1),this.listUsers[e].explanation_reason_id=Me.a.isEmpty(t)?null:t.id,t&&parseInt(t.id)===Ic.LY_DO_KHAC?this.listUsers[e].showReasonDetail=!0:(this.listUsers[e].showReasonDetail=!1,!Me.a.isEmpty(t)&&a&&this.submitExplanationReason(e))},submitExplanationReason:function(t){var e=this;return l()(o.a.mark(function a(){var n,i,s;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n={id:e.listUsers[t].row_id,reason_id:e.listUsers[t].explanation_reason_id,type:e.listUsers[t].student_status,reason_detail:e.listUsers[t].explanation_reason_detail,tag_alias:e.listUsers[t].tag_alias},a.prev=1,a.next=4,ca.a.explainLockShift(n);case 4:i=a.sent,(s=i.data).success?(Me.a.showMessage("Giải trình thành công","success"),e.$emit("explain"),e.listUsers[t].logs.push(s.data.log),e.sortListUsers()):Me.a.showMessage(s.message,"warning"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),console.log(a.t0);case 12:return a.prev=12,a.finish(12);case 14:case"end":return a.stop()}},a,e,[[1,9,12,14]])}))()},closeModalPhone:function(){this.userPhoneNumber={},this.$bvModal.hide(this.modalPhoneNumber)},getUserInfo:function(t){var e=this;this.loadingModalPhoneNumber=!0,qo.a.getUserDetailInfo(t).then(function(t){t.data.success?e.userPhoneNumber=t.data.userInfo:Me.a.showMessage(t.data.message||"Không lấy được dữ liệu người dùng!","warning")}).catch(function(t){Me.a.showMessage("Đã có lỗi xảy ra, vui lòng thử lại sau !","warning"),console.log(t)}).finally(function(){e.loadingModalPhoneNumber=!1})},openSyllabusPage:function(t){var e=this.$router.resolve({name:"syllabus-manager",query:{id:t}});window.open(e.href,"_blank")},openClassPage:function(t){var e=this.$router.resolve({name:"class-manager",query:{code:t}});window.open(e.href,"_blank")}}};var Ac=function(t){a("CpkS")},Oc={name:"closing-shift-board",components:{CandidateBoard:Tc,TrainingBoard:Object(y.a)(Lc,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"training-board-cfs"},[a("table",{staticClass:"table-profile-list table",staticStyle:{"max-height":"75vh"}},[t._m(0),t._v(" "),a("tbody",t._l(t.listUsers,function(e,n){return a("tr",{key:n,staticClass:"table-profile-content"},[a("td",{staticClass:"info-col-content"},[a("div",{staticClass:"profile-info-wrap"},[a("div",{staticClass:"profile-info-container"},[a("div",{staticClass:"d-flex",staticStyle:{flex:"1"}},[a("div",{staticClass:"image-user"},[a("img",{attrs:{src:e.profile_image,alt:""}})]),t._v(" "),a("div",{staticClass:"profile-info"},[a("div",[a("strong",[t._v(t._s(e.fullname)+" ("+t._s(e.username)+")")])]),t._v(" "),a("div",[a("span",[t._v(t._s(e.position_name)+" - "+t._s(e.station_name))])]),t._v(" "),a("div",[a("strong",[t._v("Thâm niên: ")]),t._v(" "),a("span",[t._v(t._s(e.user_seniority)+" ngày")])])])]),t._v(" "),a("div",{staticClass:"profile-info-action"},[a("div",[a("b-btn",{staticClass:"action-btn btn-pill btn-sm profile-info-action__btn",attrs:{variant:"outline-ghtk",name:"profile-btn-view"},on:{click:function(a){return t.handleButtonViewProfile(e.group_id,e.user_id,e.master_profile_id)}}},[t._v("\n                  Xem\n                ")])],1),t._v(" "),a("div",[a("b-btn",{staticClass:"action-btn btn-pill btn-sm mt-2 profile-info-action__btn",attrs:{variant:"outline-ghtk",name:"profile-btn-call"},on:{click:function(a){return t.handleButtonCall(e.user_id)}}},[t._v("\n                  Gọi\n                ")])],1)])]),t._v(" "),a("div",{staticClass:"profile-tag"},[a("div",{staticClass:"profile-tag-box"},[a("div",{staticClass:"profile-tag-item"},[t._v(t._s(e.tag_name))])])])])]),t._v(" "),a("td",{staticClass:"log-col-content"},["not_assigned"===e.student_status||"pending"===e.tag_alias?a("div",{staticClass:"cursor-pointer",on:{click:function(a){return t.openSyllabusPage(e.tp_id)}}},[a("strong",[t._v("Chương trình phải tham gia theo thâm niên: ")]),t._v(" "),a("span",{staticClass:"ghtk-color"},[t._v(t._s(e.tp_code)+" - "+t._s(e.tp_content)+" - "+t._s(e.total_periods)+" buổi")])]):a("div",{staticClass:"cursor-pointer",on:{click:function(a){return t.openClassPage(e.class_code)}}},[a("strong",[t._v("Lớp học: ")]),t._v(" "),a("span",{staticClass:"ghtk-color"},[t._v(t._s(e.class_code)+" - "+t._s(e.tp_content)+" - "+t._s(e.total_periods)+" buổi")])]),t._v(" "),a("div",{staticClass:"mt-2 mb-1"},["not_assigned"===e.student_status||"pending"===e.tag_alias?a("b",[t._v("Log giải trình")]):a("b",[t._v("Log đào tạo")])]),t._v(" "),a("div",{staticClass:"training-board-cfs__log-details"},[a("LogLine",{staticClass:"ml-0 mb-1",attrs:{logs:e.logs,headStyle:{width:"0.44rem",height:"0.44rem","background-color":"black",top:"0.4rem"},tailStyle:{left:"calc(0.42rem/2 - 1px)",height:"calc(100% - 0.25rem)",top:"0.9rem"}}})],1)]),t._v(" "),a("td",{staticClass:"text-center action-col-content"},[a("SingleSelectExplanationReason",{attrs:{"reason-id":e.explanation_reason_id},on:{handleSelected:function(e){return t.handleSelectReason(e,n)}}}),t._v(" "),e.showReasonDetail?a("div",{staticClass:"mt-2 box-other-reason"},[a("b-form-input",{staticClass:"box-other-reason__input",attrs:{placeholder:"Nhập lý do khác"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitExplanationReason(n)}},model:{value:e.explanation_reason_detail,callback:function(a){t.$set(e,"explanation_reason_detail",a)},expression:"user.explanation_reason_detail"}}),t._v(" "),a("i",{staticClass:"icon ion-ios-send ghtk-color box-other-reason__btn-send",staticStyle:{"font-size":"20px"},on:{click:function(e){return t.submitExplanationReason(n)}}})],1):t._e()],1)])}),0)]),t._v(" "),a("b-modal",{ref:"phone-number",attrs:{id:t.modalPhoneNumber,title:"Gọi ứng viên",centered:"","title-class":"w-100","header-class":"text-center","hide-footer":"",size:"sm"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingModalPhoneNumber,expression:"loadingModalPhoneNumber"}],staticClass:"d-block text-start"},[a("div",[a("b",[t._v("Họ tên:")]),t._v(" "+t._s(t.userPhoneNumber.fullName))]),t._v(" "),a("div",[a("b",[t._v("Vị trí:")]),t._v(" "+t._s(t.userPhoneNumber.positionName))]),t._v(" "),a("div",[a("b",[t._v("Số điện thoại:")]),t._v(" "),a("SensitiveLabel",{staticClass:"d-inline",attrs:{"data-input":t.userPhoneNumber.tel,"user-id":t.userPhoneNumber.userId,type:"tel",source:"closing-shift"}})],1)]),t._v(" "),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-ghtk rounded text-white",on:{click:function(e){return t.closeModalPhone()}}},[t._v("Đóng")])])])]),t._v(" "),a("infinite-loading",{ref:"infiniteLoading",attrs:{spinner:"spiral"},on:{infinite:t.loadMore}},[a("div",{staticClass:"text-center",attrs:{slot:"no-more"},slot:"no-more"},[t._v("Đã đến cuối trang !")]),t._v(" "),a("div",{staticClass:"text-center",attrs:{slot:"no-results"},slot:"no-results"},[t._v("Không có dữ liệu nào !")])])],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",{staticClass:"header-row"},[e("th",{staticClass:"text-center profile-col"},[this._v("Học viên")]),this._v(" "),e("th",{staticClass:"text-center log-col"},[this._v("Chi tiết")]),this._v(" "),e("th",{staticClass:"text-center action-col"},[this._v("Giải trình")])])])}],!1,Ac,"data-v-5bfe3046",null).exports,StaffOnboardDashboard:wc,StopWorkDashboard:Vl,SelectTeam:Wl,DocumentBoard:tc,ModalExplanation:Br,DataStaffWork:tl},data:function(t){return{elementId:{sosIframe:"iframe-sos-closing-shift"},showModalBackdrop:!1,messageType:{closingShift:"sos_closing_shift",requestAuth:"hrm_authentication_request",refreshIamToken:"hrm_refresh_iam_token",reloadStatisticSosMe:"reload_statistic_sos_closing_shift",reloadClosingShiftSos:"reload_closing_shift_sos",closeTabSosMe:"close_tab_sos_me",showModalHrm:"show_modal_hrm",hideModalHrm:"hide_modal_hrm"},isStaffShiftPage:!0,triggerCandidate:0,permission:{view_tab:[],view_immediately:!1},to_do:{training:{total:0,alias:"training",statisticFunc:"getStatisticTrainingSyllabus",dataFunc:"",desc:"Đào tạo",open:!0,isShow:!1,getTrigger:!1},sos_me:{total:0,alias:"sos_me",statisticFunc:"getStatisticSos",dataFunc:null,getTrigger:!1,paging:{curPage:1,perPage:10},filter:{},desc:"SOS.ME",isShow:!1,open:!1},staff_work:{total:0,alias:"staff_work",statisticFunc:null,dataFunc:null,getTrigger:!1,paging:{curPage:1,perPage:5},filter:{workToDay:1,teamId:null,workCategory:"checkin,staff_order,staff_order_contract,wallet,staff_identity",notGetDelay:"count",workFilter:i()({},Xr.workMapFilter.staff_order_contract,Xr.workMapFilter.staff_order,Xr.workMapFilter.lost_identity_card_hr)},desc:"Cần xử lý",isShow:!1,open:!1},on_board:{total:0,alias:"on_board",statisticFunc:"",getTrigger:!1,dataFunc:"",desc:"Nhận việc",isShow:!1,open:!1},off_work:{total:0,alias:"off_work",statisticFunc:"",getTrigger:!1,dataFunc:"",desc:"Nghỉ việc",isShow:!1,open:!1},document:{total:0,alias:"document",statisticFunc:"getStatisticProfileDocument",dataFunc:"getStatisticProfileDocument",desc:"Hồ sơ chưa duyệt",open:!1,isShow:!1,getTrigger:!1}},filter:{team_id:null},modal_explain_id:"modal-explain",loading:{statistic_staff_work:!1,statistic_on_board:!1,statistic_off_work:!1,statistic_document:!1,statistic_recruitment:!1,statistic_training:!1,statistic_sos_me:!1},record:{id:null,full_name:null,status:null,deadline:null},typeModal:"recruitment",dataUpdateLog:{},actionLog:{recruitment:"explainRecruitment",off_work:"explainResignWork",on_board:"explainOnboardWork",staff_work:"explainNeedResolveWork"},currentCandidate:null}},watch:{"filter.team_id":function(t,e){t&&t!==e&&this.sendTeamIdToIframe()},curUser:function(){this.lockShiftForHeadHunter()}},created:function(){this.getPermission(),this.permission.view_immediately&&this.getData(),this.initLoading(),this.startListenIframeEvent()},mounted:function(){this.lockShiftForHeadHunter()},computed:i()({},Object(_.c)({curUser:"userInfo"}),{currentDate:function(){return Ye()().format("DD/MM/YYYY")},moment:function(){return Ye.a},helper:function(){return Me.a},getUrlIframeSosMe:function(){return N.a.domainHrmFe+"/closing-shift-sos"},classCollapseButton:function(){var t=this.permission.view_tab.length>1?"has_multiple_tab":"has_one_tab";return this.showModalBackdrop&&(t+=" show-modal-backdrop-hrm"),t},checkShowSelectTeam:function(){return!(!this.curUser||!this.curUser.ErpPosition||297!==parseInt(this.curUser.ErpPosition.id))},placeholderSelectTeam:function(){return this.curUser&&this.curUser.ErpPosition&&297===parseInt(this.curUser.ErpPosition.id)?"Đối với Headhunter không cần chọn nhóm chốt ca":"Chọn nhóm chốt ca"}}),methods:{lockShiftForHeadHunter:function(){this.curUser&&this.curUser.ErpPosition&&297===parseInt(this.curUser.ErpPosition.id)&&(this.filter.team_id=-1,this.getData())},sendTeamIdToIframe:function(){var t={type:this.messageType.closingShift,payload:{teamId:this.filter.team_id}};this.sendMessageToIframe(t)},sendMessageToIframe:function(t){var e=document.getElementById(this.elementId.sosIframe);e&&e.contentWindow.postMessage(t,N.a.domainHrmFe)},getPermission:function(){var t=this;this.$startLoading(),Vr().then(function(e){e.data.success?(t.permission=e.data.data,We()(t.to_do).forEach(function(e){t.to_do[e].isShow=t.permission.view_tab.includes(t.to_do[e].alias),t.to_do[e].open=t.permission.view_immediately})):Me.a.showMessage(e.data.message||"Có lỗi khi lấy phân quyền!")}).catch(function(t){Me.a.showMessage("Đã có lỗi xảy ra!"),console.log(t)}).finally(function(e){t.$stopLoading()})},isShowTab:function(t){return Array.isArray(this.permission.view_tab)&&this.permission.view_tab.includes(t)},isShowContentTab:function(t){return!Me.a.isEmpty(this.filter.team_id)||Array.isArray(this.permission.view_tab)&&this.permission.view_tab.includes(t)&&this.permission.view_immediately},toggleWorkBlock:function(t){this.to_do[t].open=!this.to_do[t].open,this.to_do[t].open&&"recruitment"!==t?this.getData(t):"recruitment"===t&&this.isShowContentTab(this.to_do[t].alias)?this.to_do[t].open&&this.triggerCandidate++:this.isShowContentTab(this.to_do[t].alias)||(this.to_do.recruitment.total=0)},action:function(t){this.dataUpdateLog={},"modify_total_statistic"===t.action&&(this.to_do[t.data.key].total+=t.data.value),"showModalExplainResign"===t.action&&this.showModalExplainOffWork(t),"showModalExplainOnboard"===t.action&&this.showModalExplainOnboard(t),"explain"===t.action&&(this.typeModal="staff_work",this.record.full_name=t.data.fullname,this.record.status=t.data.status,this.record.deadline=t.data.deadline,this.dataUpdateLog=t.data,this.$bvModal.show(this.modal_explain_id)),"check_open"!==t.action||t.checkOpen||(this.to_do[t.screen].open=!1)},initLoading:function(){var t=this;We()(this.to_do).map(function(e){t.loading["statistic_"+e]=!1})},closeCandidateBoard:function(){this.to_do.recruitment.open=!1},openCandidateBoard:function(){this.to_do.recruitment.open=!0},showModalExplainCandidate:function(t){var e=this;this.currentCandidate=t,this.typeModal="recruitment",this.dataUpdateLog={action:this.actionLog.recruitment,content:"",candidate_id:t.id},this.record={id:t.id,full_name:t.name,status:null,deadline:null};var a="expected_contact";switch(t.status){case"contact":this.record.status="Cần liên hệ";break;case"interview":this.record.status="Hẹn phỏng vấn",a="expected_interview";break;case"expect_join":this.record.status="Hẹn nhận việc",a="expected_join"}t.appointments&&t.appointments[a]?this.record.deadline=t.appointments[a].appointment_time:this.record.deadline=new Date,this.$nextTick(function(){e.$bvModal.show(e.modal_explain_id)})},handleTeamSelected:function(t){if(t&&(this.loading.statistic_on_board=!0,this.loading.statistic_off_work=!0,this.to_do.on_board.open=!0,this.to_do.off_work.open=!0),this.filter.team_id=t?t.id:"",this.filter.team_id)this.getData();else for(var e in this.to_do)this.to_do[e].total=0},explain:function(t){var e=this;if(this.dataUpdateLog.action===this.actionLog.recruitment)return this.explanationRecruitment(t);this.$set(this.dataUpdateLog,"content",t),this.$startLoading(),Gr(this.dataUpdateLog).then(function(t){t.data.success?(e.dataUpdateLog.action===e.actionLog.off_work?e.to_do.off_work.getTrigger=!e.to_do.off_work.getTrigger:e.dataUpdateLog.action===e.actionLog.on_board&&(e.to_do.on_board.getTrigger=!e.to_do.on_board.getTrigger),Me.a.showMessage(t.data.message||"Giải trình thành công !","success")):Me.a.showMessage(t.data.message||"Giải trình thất bại !")}).catch(function(t){Me.a.showMessage("Đã có lỗi xảy ra !"),console.log(t)}).finally(function(t){e.$stopLoading(),e.closeModalExplain()})},explanationRecruitment:function(t){var e=this;this.$startLoading();var a={emp_team_id:parseInt(this.filter.team_id),content:t};ec.a.closeShiftExplanation(this.currentCandidate.id,a).then(function(t){t.data.success?(e.currentCandidate.logs.push(t.data.data),e.currentCandidate.explained=!0,e.to_do.recruitment.total-=1,Me.a.showMessage("Giải trình thành công.","success"),Cn.eventBus.$emit("afterExplainCandidateSuccess",e.currentCandidate)):Me.a.showMessage(t.data.message||"Giải trình thất bại!")}).catch(function(t){Me.a.showMessage(t.message||"Lỗi xảy ra, vui lòng liên hệ IT để được hỗ trợ!","error")}).finally(function(t){e.$stopLoading(),e.closeModalExplain()})},closeModalExplain:function(){this.dataUpdateLog={},this.record={},this.currentCandidate=null,this.$bvModal.hide(this.modal_explain_id)},lockShift:function(){var t=this;this.filter.team_id?(this.$startLoading(),zr({team_id:this.filter.team_id}).then(function(t){t.data.success?Me.a.showMessage(t.data.message||"Chốt ca thành công","success"):Me.a.showMessage(t.data.message||"Chốt ca thất bại !")}).catch(function(t){console.log(t)}).finally(function(e){t.$stopLoading()})):Me.a.showMessage("Vui lòng chọn nhóm chốt ca !")},getData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.filter.team_id||this.permission.view_immediately){"on_board"===t&&(this.loading.statistic_on_board=!0),"off_work"===t&&(this.loading.statistic_off_work=!0),this.resetFilter(t);var e={};for(var a in this.to_do)if(this.to_do[a].isShow&&(!t||a===t)){var n=i()({},this.to_do[a].filter||{},{team_id:this.filter.team_id});this.to_do[a].statisticFunc&&!e[this.to_do[a].statisticFunc]&&(this[this.to_do[a].statisticFunc](n),e[this.to_do[a].statisticFunc]=!0),this.to_do[a].dataFunc&&!e[this.to_do[a].dataFunc]&&(this[this.to_do[a].dataFunc](n),e[this.to_do[a].dataFunc]=!0),void 0!==this.to_do[a].getTrigger&&(this.to_do[a].getTrigger=!this.to_do[a].getTrigger)}}},resetFilter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&"staff_work"!==t||this.setFilterStaffWork()},getStatisticProfileDocument:function(t){var e=this;return l()(o.a.mark(function a(){var n,s;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e.loading.statistic_document=!0,a.next=4,Es.a.getDocuments(i()({status:{name:"Chưa duyệt"},mp_status:"pause,disable",isCount:!0},t));case 4:n=a.sent,s=n.data,e.to_do.document.total=s.data.total,0==+e.to_do.document.total?e.to_do.document.open=!1:e.to_do.document.open=!0,a.next=14;break;case 10:a.prev=10,a.t0=a.catch(0),Me.a.showMessage("Không lấy được số liệu hồ sơ!"),console.log(a.t0.message);case 14:return a.prev=14,e.loading.statistic_document=!1,a.finish(14);case 17:case"end":return a.stop()}},a,e,[[0,10,14,17]])}))()},getStatisticTrainingSyllabus:function(t){var e=this;return l()(o.a.mark(function a(){var n,s;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e.loading.statistic_training=!0,a.next=4,ca.a.getDataConfirmShift(i()({only_count:!0},t));case 4:n=a.sent,s=n.data,e.to_do.training.total=s.data.total,a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),Me.a.showMessage("Không lấy được thông tin chốt ca đào tạo."),console.log(a.t0.message);case 13:return a.prev=13,e.loading.statistic_training=!1,a.finish(13);case 16:case"end":return a.stop()}},a,e,[[0,9,13,16]])}))()},loadStaffWork:function(t){this.loading.statistic_staff_work=t.loading,t.loading||(this.to_do.staff_work.total=t.total,!this.to_do.staff_work.open&&+t.total>0&&(this.to_do.staff_work.open=!0))},setFilterStaffWork:function(){this.to_do.staff_work.filter.teamId=this.filter.team_id,this.to_do.staff_work.paging.curPage=1},loadCandidate:function(t){this.loading.statistic_recruitment=t.loading},changeTotalCandidates:function(t){this.to_do.recruitment.total=t.total},getTotal:function(t){this.loading.statistic_off_work=!1,this.loading.statistic_on_board=!1,"total_off_work"===t.action&&(this.to_do.off_work.total=t.total),"total_on_board"===t.action&&(this.to_do.on_board.total=t.total)},reloadCountTraining:function(){var t={team_id:this.filter.team_id};this[this.to_do.training.statisticFunc](t)},showModalExplainOffWork:function(t){this.typeModal="off_work";var e=t.order,a="";this.record={full_name:e.profile_info.fullname||null,deadline:e.resign_info.resign_date||Ye()().format("DD/MM/YYYY")},"cho_duyet"===e.status&&(a="Duyệt đề xuất. "),this.record.status=a,this.dataUpdateLog={master_profile_id:e.profile_info.id,user_id:e.profile_info.user_id,order_id:e.id,action:this.actionLog.off_work,content:""},this.$bvModal.show(this.modal_explain_id)},showModalExplainOnboard:function(t){this.typeModal="onboard";var e=t.data,a="",n=e.onboard_status;!n.ekyc||void 0!==n.ekyc.status&&"pending"!==n.ekyc.status||(a+="Hoàn thành eKYC, "),!n.nfc||void 0!==n.nfc.status&&"pending"!==n.nfc.status||(a+="Hoàn thành NFC, "),!n.deposit||void 0!==n.deposit.status&&"pending"!==n.deposit.status||(a+="Đóng cọc, "),!n.contract||void 0!==n.contract.status&&"pending"!==n.contract.status||(a+="Ký hợp đồng, "),void 0===n.active_wallet||!n.active_wallet.show||void 0!==n.active_wallet.status&&"pending"!==n.active_wallet.status||(a+="Kích hoạt ví, "),this.record={full_name:e.fullname||null,deadline:e.comeback_date||e.join_date,status:a},this.dataUpdateLog={master_profile_id:e.id,user_id:e.user_id,action:this.actionLog.on_board,content:""},this.$bvModal.show(this.modal_explain_id)},getStatisticSos:function(){var t=this;return l()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.filter.team_id){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t.loading.statistic_sos_me=!0,e.next=6,hl.a.getCountClosingShiftSos({team_id:t.filter.team_id});case 6:(a=e.sent).data.success?(t.to_do.sos_me.total=a.data.data.count,t.sendMessageToIframe({type:t.messageType.reloadClosingShiftSos})):Me.a.showMessage(a.data.message||"Không lấy được thông tin ticket SOS!"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),Me.a.showMessage("Không lấy được thông tin ticket SOS!");case 13:return e.prev=13,t.loading.statistic_sos_me=!1,+t.to_do.sos_me.total>0&&(t.to_do.sos_me.open=!0),e.finish(13);case 17:case"end":return e.stop()}},e,t,[[2,10,13,17]])}))()},startListenIframeEvent:function(){var t=this;window.addEventListener("message",function(e){if(e.origin===N.a.domainHrmFe)switch(e.data.type){case t.messageType.closingShift:t.sendTeamIdToIframe();break;case t.messageType.requestAuth:g.a.dispatch("sendMessageToHrm",t.elementId.sosIframe);break;case t.messageType.refreshIamToken:window.location.reload();break;case t.messageType.reloadStatisticSosMe:t.getStatisticSos();break;case t.messageType.closeTabSosMe:t.to_do.sos_me.open=!1;break;case t.messageType.showModalHrm:t.showModalBackdrop=!0,document.body.classList.add("modal-open");break;case t.messageType.hideModalHrm:t.showModalBackdrop=!1,document.body.classList.remove("modal-open")}})}}};var Nc=function(t){a("IZqH")},Rc=Object(y.a)(Oc,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-black"},[a("div",{staticClass:"d-flex my-3 mx-2"},[a("h4",{staticClass:"w-30 px-0 d-flex align-items-center mb-0"},[t._v("\n      Chốt ca "+t._s(t.currentDate)+"\n    ")]),t._v(" "),a("div",{staticClass:"z-3",staticStyle:{width:"54%"}},[a("select-team",{attrs:{disabled:t.checkShowSelectTeam,placeholder:t.placeholderSelectTeam,multiple:!1,"auto-close":!0,"hide-selected":!0},on:{change:t.handleTeamSelected}})],1),t._v(" "),a("button",{staticClass:"btn btn-ghtk rounded text-white lh-0-8 ml-3",staticStyle:{width:"14%"},on:{click:t.lockShift}},[t._v("Hoàn thành")])]),t._v(" "),t._l(t.to_do,function(e,n){return t.isShowTab(e.alias)?a("div",{key:"to_do_"+n,staticClass:"row mx-2"},[a("b-btn",{staticClass:"font-weight-500 border w-100 text-left d-flex justify-content-between text-black text-black",staticStyle:{"background-color":"#F7F7F7"},on:{click:function(e){return t.toggleWorkBlock(n)}}},[a("div",[t._v("\n          "+t._s(e.desc)+"\n          "),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.loading["statistic_"+n],expression:"!loading['statistic_' + key]"}]},[t._v("("+t._s(e.total)+")")]),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.loading["statistic_"+n],expression:"loading['statistic_' + key]"}],staticClass:"fas fa-spinner fa-pulse text-ghtk"})]),t._v(" "),a("i",{staticClass:"fa mt-1 mr-1",class:e.open?"fa-chevron-down":"fa-chevron-up",staticStyle:{color:"#a3a4a6"}})]),t._v(" "),a("b-collapse",{staticClass:"w-100 border table-sticky",class:[t.classCollapseButton,"recruitment"===e.alias?"recruitment_wrapper":""],attrs:{id:e.alias},model:{value:e.open,callback:function(a){t.$set(e,"open",a)},expression:"task.open"}},["recruitment"===n?a("CandidateBoard",{directives:[{name:"show",rawName:"v-show",value:t.isShowContentTab(n),expression:"isShowContentTab(key)"}],attrs:{teamId:t.filter.team_id,isLoadFirstTime:t.isShowContentTab(n),triggerCandidate:t.triggerCandidate,isStaffShiftPage:t.isStaffShiftPage},on:{load:t.loadCandidate,changeTotalCandidates:t.changeTotalCandidates,explainCandidate:t.showModalExplainCandidate,finishedClosingShift:t.closeCandidateBoard,unfinishedClosingShift:t.openCandidateBoard}}):t._e(),t._v(" "),"sos_me"===n?a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowContentTab(n),expression:"isShowContentTab(key)"}]},[[a("iframe",{staticClass:"border-0",staticStyle:{height:"53vh"},attrs:{src:t.getUrlIframeSosMe,id:t.elementId.sosIframe,title:"SOS.ME",width:"100%"}})]],2):t._e(),t._v(" "),"training"===n&&e.open?a("TrainingBoard",{directives:[{name:"show",rawName:"v-show",value:t.isShowContentTab(n),expression:"isShowContentTab(key)"}],attrs:{teamId:t.filter.team_id},on:{explain:function(e){return t.reloadCountTraining()}}}):t._e(),t._v(" "),"document"===n&&t.isShowContentTab(n)?a("DocumentBoard",{attrs:{teamId:t.filter.team_id,getDocumentTrigger:t.to_do.document.getTrigger},on:{modifyTotalDocument:t.action}}):t._e(),t._v(" "),"staff_work"===n?a("DataStaffWork",{directives:[{name:"show",rawName:"v-show",value:t.isShowContentTab(n),expression:"isShowContentTab(key)"}],staticClass:"table-sticky mh-100",attrs:{filter:t.to_do.staff_work.filter,getWorkTrigger:t.to_do.staff_work.getTrigger,paging:t.to_do.staff_work.paging,"infinity-mode":!0,"allow-explain":!0},on:{load:t.loadStaffWork,action:t.action}}):t._e(),t._v(" "),"off_work"===n&&t.isShowContentTab(n)?a("StopWorkDashboard",{attrs:{getResignTrigger:t.to_do.off_work.getTrigger,teamId:t.filter.team_id,showElement:!1},on:{getTotal:t.getTotal,action:t.action}}):t._e(),t._v(" "),"on_board"===n&&t.isShowContentTab(n)?a("StaffOnboardDashboard",{attrs:{getOnboardTrigger:t.to_do.on_board.getTrigger,teamId:t.filter.team_id,showElement:!1},on:{action:t.action,getTotal:t.getTotal}}):t._e()],1)],1):t._e()}),t._v(" "),a("modal-explanation",{attrs:{type:t.typeModal,id:t.modal_explain_id,record:t.record},on:{confirmExplain:t.explain}}),t._v(" "),a("div",{staticClass:"modal-backdrop modal-backdrop-hrm",class:t.showModalBackdrop?"":"d-none",attrs:{id:"modal-explain___BV_modal_backdrop_"}})],2)},[],!1,Nc,"data-v-2bf28c44",null).exports,Uc={name:"checkin-manager",components:{MultiSelectProvince:fe.a,MultiSelectStation:ge.a,SingleSelectUser:Ie.a,MultiSelectDepartment:_e.a,MultiSelectPosition:be.a,TimeLine:Ce.a,ModalUpdateCheckin:Xo,DetailWorkShift:ar},props:{scrollMode:{type:Boolean},blankMode:{type:Boolean}},data:function(t){return{loading:!1,page:{current_page:1,total_page:0,per_page:10,total:0},range_filter:null,filter:{province:null,station:null,employee:null,department:null,position:null,date:null,status:"not_approve"},reset_employee:!1,statistic:{all:0,not_approve:0,ot_not_approve:0,not_checkin:0,leave_not_approve:0},checkin_data:[],curCheckin:null,curUser:null,curAction:null,workShift:{from:null,to:null},workshiftActivities:[]}},computed:{moment:Ye.a},created:function(){var t=new Date;t.getDate()<21?(this.workShift.from=t.getFullYear()+"-"+("0"+t.getMonth()).slice(-2)+"-21",this.workShift.to=t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-20"):(this.workShift.from=t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-21",this.workShift.to=t.getFullYear()+"-"+("0"+(t.getMonth()+2)).slice(-2)+"-20");var e=new Date,a=new Date;a.setDate(e.getDate()-1),this.range_filter={start:a,end:e},this.getCheckin(),this.getStatisticCheckinNeedReview()},methods:{handleReloadPage:function(){this.getCheckin(),this.getStatisticCheckinNeedReview()},getTypeCheckin:function(t){this.filter.status=t,this.getCheckin()},getStatisticCheckinNeedReview:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(Ye()(t.range_filter.end).diff(Ye()(t.range_filter.start),"days")>7)){e.next=6;break}return Me.a.showMessage("Không thống kê quá 7 ngày"),t.loading=!1,e.abrupt("return");case 6:return(a=Me.a.cloneDeep(t.filter)).from=t.range_filter?Ye()(t.range_filter.start).format("YYYY-MM-DD"):null,a.to=t.range_filter?Ye()(t.range_filter.end).format("YYYY-MM-DD"):null,e.next=11,al({from:a.from,to:a.to});case 11:(n=e.sent).data.success?t.statistic=Me.a.cloneDeep(n.data.data):Me.a.showMessage(n.data.message||"Có lỗi khi lấy thông tin thống kê !"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0),Me.a.showMessage("Có lỗi khi lấy thông tin thống kê !");case 19:case"end":return e.stop()}},e,t,[[0,15]])}))()},getCheckin:function(){var t=this;return l()(o.a.mark(function e(){var a,n,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.loading=!0,e.prev=1,!(Ye()(t.range_filter.end).diff(Ye()(t.range_filter.start),"days")>7)){e.next=7;break}return Me.a.showMessage("Không lấy thông tin chấm công quá 7 ngày"),t.loading=!1,e.abrupt("return");case 7:return(a=Me.a.cloneDeep(t.filter)).station=a.station?a.station.split(","):null,a.province=a.province?a.province.split(","):null,a.department=a.department?a.department.split(","):null,a.position=a.position?a.position.split(","):null,a.from=t.range_filter?Ye()(t.range_filter.start).format("YYYY-MM-DD"):null,a.to=t.range_filter?Ye()(t.range_filter.end).format("YYYY-MM-DD"):null,(n=Me.a.cloneDeep(t.page)).page=n.current_page,n.limit=n.per_page,e.next=19,el(i()({},a,n));case 19:(s=e.sent).data.success?(t.checkin_data=Me.a.cloneDeep(s.data.data),t.page.total_page=s.data.meta.total_pages,t.page.total=s.data.meta.total,t.loading=!1):Me.a.showMessage(s.data.message||"Có lỗi khi lấy thông tin chấm công !"),e.next=28;break;case 23:e.prev=23,e.t0=e.catch(1),t.loading=!1,console.log(e.t0),Me.a.showMessage("Có lỗi khi lấy thông tin chấm công !");case 28:case"end":return e.stop()}},e,t,[[1,23]])}))()},resetFilter:function(){for(var t in this.filter)"status"!==t&&(this.filter[t]=null);this.reset_employee=!this.reset_employee,this.getCheckin()},formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD/MM/YYYY";return Me.a.formatDate(t,e)},showCheckinDetail:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"view",a=arguments[2];this.curCheckin=t,this.curAction=e,this.curUser=+a,this.$bvModal.show("modal-update-checkin")},showCheckinCalendar:function(t,e,a){this.curUser=+t,this.workShift.from=e,this.workShift.to=a,this.$bvModal.show("modal-checkin-calendar")},handleProvinceSelected:function(t){this.filter.province=t?t.map(function(t){return t.id}).toString():""},handleStationSelected:function(t){this.filter.station=t?t.map(function(t){return t.id}).toString():""},handleDepartmentSelected:function(t){this.filter.department=t?t.map(function(t){return t.id}).toString():""},handlePositionSelected:function(t){this.filter.position=t?t.map(function(t){return t.id}).toString():""},getHistories:function(t){var e=this;Bo({checkin_id:t,from:this.formatDate(this.workShift.from,"YYYY-MM-DD"),to:this.formatDate(this.workShift.to,"YYYY-MM-DD")}).then(function(t){t.data.success?e.workshiftActivities=t.data.data:Me.a.showMessage(t.data.message||"Không lấy được dữ liệu lịch sử duyệt công!","warning")}).catch(function(t){Me.a.showMessage("Đã có lỗi xảy ra, vui lòng thử lại sau !","warning"),console.log(t)})}}};var $c=function(t){a("E+3v")},Hc=Object(y.a)(Uc,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"small-scrollbar checkin-manager"},[a("b-row",{staticClass:"header my-2 align-items-center"},[a("b-col",{attrs:{md:"2"}},[a("h4",{staticClass:"m-0"},[t._v("Quản lý công")])]),t._v(" "),a("b-col",{staticClass:"text-right",attrs:{md:"10"}},[a("button",{staticClass:"btn btn-pill",class:"all"===t.filter.status?"btn-ghtk":"btn-ghtk-disable",on:{click:function(e){return t.getTypeCheckin("all")}}},[t._v("\n          Tất cả\n        ")]),t._v(" "),a("button",{staticClass:"btn btn-pill",class:"not_approve"===t.filter.status?"btn-ghtk":"btn-ghtk-disable",on:{click:function(e){return t.getTypeCheckin("not_approve")}}},[t._v("\n          Công chưa duyệt "),a("span",[t._v("("+t._s(t.statistic.checkin_not_approve?t.statistic.checkin_not_approve.total:0)+")")])]),t._v(" "),a("button",{staticClass:"btn btn-pill",class:"ot_not_approve"===t.filter.status?"btn-ghtk":"btn-ghtk-disable",on:{click:function(e){return t.getTypeCheckin("ot_not_approve")}}},[t._v("\n          Tăng ca chưa duyệt "),a("span",[t._v("("+t._s(t.statistic.checkin_ot_not_approve?t.statistic.checkin_ot_not_approve.total:0)+")")])]),t._v(" "),a("button",{staticClass:"btn btn-pill",class:"leave_not_approve"===t.filter.status?"btn-ghtk":"btn-ghtk-disable",on:{click:function(e){return t.getTypeCheckin("leave_not_approve")}}},[t._v("\n          Xin nghỉ chưa duyệt "),a("span",[t._v("("+t._s(t.statistic.leave_not_approve.total?t.statistic.leave_not_approve.total:0)+")")])])])],1),t._v(" "),a("div",{staticClass:"row filter pb-2 justify-content-between input-border"},[a("div",{staticClass:"mb-1 input-filter"},[a("multi-select-province",{attrs:{"custom-class":"z-5 multiselect-ghtk multiselect-no-horizontal","province-ids":t.filter.province,"auto-close":!0,"hide-select":!0},on:{handleProvinceSelected:t.handleProvinceSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter"},[a("multi-select-station",{attrs:{"custom-class":"z-3 multiselect-ghtk multiselect-no-horizontal","province-ids":t.filter.province,"station-ids":t.filter.station,"auto-close":!0,"hide-select":!0},on:{handleStationSelected:t.handleStationSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter"},[a("single-select-user",{staticClass:"z-3 multiselect-ghtk multiselect-no-horizontal",attrs:{placeholder:"Nhân viên","in-scope":!0,reset:t.reset_employee},on:{onChange:function(e){t.filter.employee=e?e.id:null}}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter"},[a("MultiSelectDepartment",{attrs:{"custom-class":"z-3 multiselect-ghtk multiselect-no-horizontal","department-ids":t.filter.department,"auto-close":!0,"hide-selected":!0,placeholder:"Bộ phận"},on:{handleDepartmentSelected:t.handleDepartmentSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter"},[a("MultiSelectPosition",{attrs:{"custom-class":"z-3 multiselect-ghtk multiselect-no-horizontal","department-ids":t.filter.department,"position-ids":t.filter.position,"auto-close":!0,"hide-selected":!0,placeholder:"Vị trí"},on:{handlePositionSelected:t.handlePositionSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter"},[a("v-date-picker",{attrs:{locale:"vi",color:"green",mode:"range","input-props":{placeholder:"Ngày",style:"font-size:14px; line-height: unset"},popover:{visibility:"focus"}},model:{value:t.range_filter,callback:function(e){t.range_filter=e},expression:"range_filter"}})],1),t._v(" "),a("div",{staticClass:"text-right input-filter"},[a("button",{staticClass:"btn btn-ghtk rounded w-100",on:{click:t.handleReloadPage}},[t._v("\n          Tìm kiếm\n        ")])])]),t._v(" "),a("div",{staticClass:"mh-75 table-data",class:t.scrollMode&&"table-sticky"},[a("table",{staticClass:"table table-sm mb-0"},[t._m(0),t._v(" "),a("tbody",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"position-relative"},[t._l(t.checkin_data,function(e){return t._l(e.check_ins,function(n,i){return a("tr",[i?t._e():a("td",{staticClass:"border-right",attrs:{rowspan:e.check_ins.length||1}},[a("div",{staticClass:"pl-3"},[a("div",[a("b",[t._v(t._s(e.user.fullname)+" ("+t._s(e.user.username)+")")]),t._v(" "),a("br"),t._v(" "),a("span",[t._v(t._s(e.user.position_name)+" - "+t._s(e.user.work_type_name)+" - "+t._s(e.user.station_name))]),t._v(" "),a("br"),t._v(" "),a("span",[t._v(t._s(e.user.tel))])]),t._v(" "),a("div",{staticClass:"mt-2"},[a("button",{staticClass:"btn btn-ghtk btn-sm btn-pill",on:{click:function(a){return t.showCheckinCalendar(e.user.user_id,e.month_salary_from,e.month_salary_to)}}},[t._v("\n                      Công thường: "+t._s(e.statistic.normal_approved)+"/"+t._s(e.statistic.standard)+"\n                    ")]),t._v(" "),a("button",{staticClass:"btn btn-ghtk btn-sm btn-pill",on:{click:function(a){return t.showCheckinCalendar(e.user.user_id,e.month_salary_from,e.month_salary_to)}}},[t._v("\n                      Tăng ca: "+t._s(e.statistic.ot_approved)+"\n                    ")])])])]),t._v(" "),a("td",{staticClass:"border-right"},[a("div",{staticClass:"mh-10re overflow-auto pt-1"},[a("TimeLine",{attrs:{logs:n.logs,itemStyle:{},"time-field":"time","message-field":"message",timeFormat:t.formatDate}})],1)]),t._v(" "),a("td",{staticClass:"text-center"},t._l(n.action||[],function(i,s){return a("div",{key:s},[a("button",{staticClass:"btn btn-outline-ghtk btn-pill btn-sm w-50 mb-2",on:{click:function(a){return t.showCheckinDetail(n.checkin_log.id,s,e.user.user_id)}}},[t._v("\n                    "+t._s(i)+"\n                  ")])])}),0)])})}),t._v(" "),t.checkin_data.length?t._e():a("tr",[a("td",{attrs:{colspan:"10"}},[a("div",{staticClass:"mih-25 d-flex justify-content-center align-items-center"},[a("b",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}]},[t._v("Không có dữ liệu phù hợp !")])])])])],2)])]),t._v(" "),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col col-md-10 text-left"},[a("b",[t._v("\n          Bản ghi/ trang\n        ")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.page.per_page,expression:"page.per_page"}],staticClass:"form-control form-control-sm w-4re text-ghtk rounded border-ghtk d-inline-block",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.page,"per_page",e.target.multiple?a:a[0])},function(e){return t.getCheckin()}]}},[a("option",[t._v("5")]),t._v(" "),a("option",[t._v("10")]),t._v(" "),a("option",[t._v("25")]),t._v(" "),a("option",[t._v("50")]),t._v(" "),a("option",[t._v("100")])]),t._v(" "),a("div",{staticClass:"z-0 d-inline-block"},[a("b-pagination",{staticClass:"paginator-ghtk mb-0",attrs:{size:"sm",align:"left","total-rows":+t.page.total,"per-page":+t.page.per_page},on:{input:function(e){return t.getCheckin()}},model:{value:t.page.current_page,callback:function(e){t.$set(t.page,"current_page",e)},expression:"page.current_page"}})],1)]),t._v(" "),a("div",{staticClass:"col col-md-2 text-right"},[a("b",[t._v("Trang "+t._s(t.page.current_page)+"/"+t._s(t.page.total_page))])])]),t._v(" "),a("b-modal",{attrs:{id:"modal-checkin-calendar","modal-class":"modal-xxl","hide-footer":"","hide-header":""}},[a("DetailWorkShift",{attrs:{"shift-range":t.workShift,"user-id":t.curUser},on:{reloadPage:t.handleReloadPage}})],1),t._v(" "),a("ModalUpdateCheckin",{attrs:{"user-id":t.curUser,type:"edit","checkin-id":t.curCheckin,"pr-status":t.curAction,histories:t.workshiftActivities},on:{reloadCalendar:t.handleReloadPage,getHistories:t.getHistories}})],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",{staticClass:"text-center"},[e("th",{staticClass:"w-30"},[e("b",[this._v("Nhân viên")])]),this._v(" "),e("th",[e("b",[this._v("Chi tiết log")])]),this._v(" "),e("th",{staticClass:"w-15"},[e("b",[this._v("Thao tác")])])])])}],!1,$c,"data-v-0c2dd60c",null).exports,Bc=a("5JuN"),jc=a("zN+w"),Fc=new v.a("local",!1),qc={name:"content-work-iframe",components:{MenuWork:Bc.a},data:function(){return{has_permission:!0,smallScreen:!0,listWork:{},filter:{profileStatus:null,orderGroup:null,orderType:null,orderCategory:null,dependantStatus:null,unionStatus:null},apiStatisticMap:{contract:"getStatisticHrOrder",working_process:"getStatisticHrOrder",insurance:"getStatisticHrOrder",stop_working:"getStatisticHrOrder",master_profile:"getStatisticMasterProfile",driverx:"getTotalDriverxNews",candidate:"getStatisticCandidateV2",union:"getStatisticUnion",tax:"getStatisticDependantV2",training:"getTotalTrainingTests",profile_document:"getTotalUserNotCompleteDocuments"},permissionSyllabus:!1}},computed:i()({},Object(_.c)({curUser:"userInfo",gchatAuth:"gchatAuth"})),watch:{},created:function(){window.addEventListener("message",this.receiveMessage,!1),jc.a.sendMessage({type:"content_ready",payload:{status:!0}},null),this.getMenuWork()},mounted:function(){Me.a.isInIframe()&&this.loginByGchatToken(),this.checkSmallScreen()},updated:function(){this.checkSmallScreen()},methods:{receiveMessage:function(t){var e=t.data;if(e&&this.$store.dispatch("setEvent",e),"authentication"===e.type&&e.payload&&(Fc.remove(N.a.cacheKey.isLoginOnGchat),Me.a.isInIframe())){var a=Me.a.getBaseHost(window.origin)!==Me.a.getBaseHost(t.origin);this.loginByGchatToken(a)}},loginByGchatToken:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!Me.a.isEmpty(O.a.getToken())&&!Fc.get(N.a.cacheKey.isLoginOnGchat)){var e={};t&&(e.is_cors_domain_iframe=!0),qo.a.loginByGchatToken(e).then(function(t){t.data.success?(Fc.set(N.a.cacheKey.isLoginOnGchat,!0),window.location.replace(window.location.href)):Me.a.showMessage("Có lỗi khi đăng nhập màn quản lý công việc. Vui lòng tải lại trang để cập nhật.","warning")}).catch(function(t){console.log(t)})}},checkSmallScreen:function(){var t=document.getElementById("hr-work-content");this.smallScreen=!t||t.getBoundingClientRect().width<1200},allowShowOnGchat:function(t){var e=this;Se.a.allowShowOnGchat({token:t||null}).then(function(t){t.data.success?(t.data.data||null).has_permission?(e.has_permission=!0,jc.a.sendMessage({type:"user",payload:{has_permission:!0}},null),jc.a.sendMessage({type:"status_iframe",payload:{is_focus:!1}},null),e.curUser&&e.curUser.Group&&21==+e.curUser.Group.id&&e.$store.dispatch("getUserInfo")):(e.has_permission=!1,console.log(t.data.message)):(e.has_permission=!1,console.log(t.data.message))}).catch(function(t){e.has_permission=!1,console.log(t)}).finally(function(t){document.cookie="PHPSESSID=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT; SameSite=None; secure;"})},getMenuWork:function(){var t=this;qr.a.getMenuWork().then(function(e){e.data.success?(e.data.data&&!Array.isArray(e.data.data)&&(t.listWork=e.data.data||{}),t.getStatistic()):(Me.a.showMessage(e.data.message||"Có lỗi khi lấy menu công việc!","warning"),t.listWork={})}).catch(function(e){console.log(e),t.listWork={}}).finally(function(e){Me.a.isEmpty(t.listWork)?jc.a.sendMessage({type:"user",payload:{has_permission:!1}},null):jc.a.sendMessage({type:"user",payload:{has_permission:!0}},null)})},getStatistic:function(t){for(var e in this.listWork)if(this.listWork[e]&&this.listWork[e].list_work&&"object"===na()(this.listWork[e].list_work))if(t)this.listWork[e].list_work[t]&&this.apiStatisticMap[t]&&this[this.apiStatisticMap[t]]&&this[this.apiStatisticMap[t]](this.listWork[e].list_work);else{var a=[];for(var n in this.listWork[e].list_work)this.apiStatisticMap[n]&&this[this.apiStatisticMap[n]]&&!a.includes(this.apiStatisticMap[n])&&(this[this.apiStatisticMap[n]](this.listWork[e].list_work),a.push(this.apiStatisticMap[n]))}},getStatisticHrOrder:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&il().then(function(e){if(e.data.success){if(e.data.data)for(var a in e.data.data)t[a].num_need_action=e.data.data[a].num_need_action,t[a].subwork=e.data.data[a].subwork}else console.log(e.data.message||"Không lấy được dữ liệu thống kê !")}).catch(function(t){console.log(t)})},getStatisticMasterProfile:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&nl().then(function(e){e.data.success?e.data.data&&(t.master_profile.num_need_action=e.data.data.num_need_action||0,e.data.data.subwork&&(t.master_profile.subwork=e.data.data.subwork)):console.log(e.data.message||"Không lấy được dữ liệu thống kê !")}).catch(function(t){console.log(t)})},getStatisticCandidateV2:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&sl().then(function(e){e.data.success?e.data.data&&(t.candidate.num_need_action=e.data.data.num_need_action||0,e.data.data.subwork&&(t.candidate.subwork=e.data.data.subwork)):console.log(e.data.message||"Không lấy được dữ liệu thống kê !")}).catch(function(t){console.log(t)})},getStatisticUnion:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&ol().then(function(e){e.data.success?e.data.data&&(t.union.num_need_action=e.data.data.num_need_action||0,e.data.data.subwork&&(t.union.subwork=e.data.data.subwork)):console.log(e.data.message||"Không lấy được dữ liệu thống kê !")}).catch(function(t){console.log(t)})},getStatisticDependantV2:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&rl().then(function(e){e.data.success?e.data.data&&(t.tax.num_need_action=e.data.data.num_need_action||0,e.data.data.subwork&&(t.tax.subwork=e.data.data.subwork)):console.log(e.data.message||"Không lấy được dữ liệu thống kê !")}).catch(function(t){console.log(t)})},getTotalDriverxNews:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&ll().then(function(e){e.data.success?(t.driverx.num_need_action=e.data.total||0,e.data.subwork&&(t.driverx.subwork=e.data.subwork)):console.log(e.data.message||"Không lấy được dữ liệu thống kê !")}).catch(function(t){console.log(t)})},getTotalTrainingTests:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&cl().then(function(e){e.data.success?(t.training.num_need_action=e.data.total||0,e.data.subwork&&(t.training.subwork=e.data.subwork)):console.log(e.data.message||"Không lấy được dữ liệu thống kê !")}).catch(function(t){console.log(t)})},getTotalUserNotCompleteDocuments:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&dl().then(function(e){e.data.success?(t.profile_document.num_need_action=e.data.total||0,e.data.subwork&&(t.profile_document.subwork=e.data.subwork)):console.log(e.data.message||"Không lấy được dữ liệu thống kê !")}).catch(function(t){console.log(t)})},changeWorkActive:function(t){this.permissionSyllabus=t.permission,this.workActive.work="education_manage"}}};var Yc=function(t){a("6aA6"),a("NNGF"),a("iXC/"),a("k38u"),a("eX/7")},zc=Object(y.a)(qc,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"overflow-hidden content-work"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!1===this.has_permission,expression:"has_permission === false"}],staticClass:"text-center no-permission"},[this._v("Bạn chưa đăng nhập hoặc không có quyền thao tác trên màn này !")]),this._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:this.has_permission,expression:"has_permission"}],staticClass:"small-scrollbar justify-content-end bg-white content-work-wrap"},[e("div",{staticClass:"d-none d-sm-block",class:this.$route.path.includes("recruitment")?"":"mx-2",attrs:{id:"hr-work-content"}},[e("router-view")],1),this._v(" "),e("MenuWork",{class:{"font-small":this.smallScreen},attrs:{"collapse-on-change":!0,"list-work":this.listWork}})],1)])},[],!1,Yc,"data-v-797f5968",null).exports,Gc={name:"SelectStatusSyllabus",components:{Multiselect:la.a},props:{isSelectAll:{default:1},autoClose:{default:!1},hideSelected:{default:!1},limitProp:{default:5},isDisabled:{default:!1},status:{default:null},placeholder:{default:"Chọn trạng thái"},customClass:{default:"multiselect-primary"}},data:function(){return{option:null,options:[{id:"coming_up",name:"Sắp diễn ra"},{id:"happening",name:"Đang diễn ra"},{id:"finished",name:"Kết thúc"}]}}};var Kc=function(t){a("sveD")},Vc=Object(y.a)(Gc,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{class:t.customClass,attrs:{options:t.options,multiple:!1,placeholder:t.placeholder,label:"name","track-by":"id","selected-label":"","deselect-label":"X","select-label":"Chọn",disabled:t.isDisabled,limit:t.limitProp,"hide-selected":t.hideSelected,"close-on-select":t.autoClose},on:{input:function(e){t.$emit("input",e)}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,Kc,"data-v-ea1015b8",null).exports,Qc=a("FlDG"),Xc=a("lHA8"),Wc=a.n(Xc),Jc=a("s5Jn"),Zc={name:"multi-select-worktype",components:{Multiselect:la.a},props:{disabled:{type:Boolean,default:!1},autoClose:{type:Boolean,default:!0},placeholder:{type:String,default:"Chọn kiểu nhân viên"},multiple:{type:Boolean,default:!1},value:{type:String,default:""},position:{type:String,default:""},appendGroupType:{type:Boolean,default:!1}},data:function(){return{option:null,options:[]}},created:function(){this.getListWorkType()},watch:{value:function(t){this.setSelectedOption(t)},position:function(t){this.getListWorkType(t)}},methods:{setSelectedOption:function(t){var e=this;this.multiple?(this.option=[],t&&t.split(",").forEach(function(t){e.options.forEach(function(a){+a.id==+t&&e.option.push(a)})})):this.option=this.options.find(function(e){return+e.id==+t})||null},getListWorkType:function(t){var e=this;if(!t&&sessionStorage.getItem("allWorkTypeUser"))return this.options=JSON.parse(sessionStorage.getItem("allWorkTypeUser")),void this.setSelectedOption(this.value);var a={position:t,append_group_type:this.appendGroupType};Jc.a.getListWorkType(a).then(function(a){a.data.success?(e.options=a.data.data||[],e.setSelectedOption(e.value),t||sessionStorage.setItem("allWorkTypeUser",sa()(e.options))):e.option=[]}).catch(function(t){console.log(t)})}}},td=Object(y.a)(Zc,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{attrs:{options:t.options,disabled:t.disabled,multiple:t.multiple,"close-on-select":t.autoClose,label:"work_type_description",placeholder:t.placeholder,"track-by":"id",selectedLabel:"",deselectLabel:"X",selectLabel:"",searchable:!0},on:{input:function(e){return t.$emit("input",e.map(function(t){return t.id}).toString())}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,null,null,null).exports,ed=a("woOf"),ad=a.n(ed),nd={name:"select-education-category",props:{autoClose:{default:!0},hideSelect:{default:!1},placeholder:{type:String,default:"Danh mục"},multiple:{default:!1,type:Boolean},category:{type:String,default:null},disable:{type:Boolean,default:!1}},components:{Multiselect:la.a},data:function(){return{option:null,options:[]}},created:function(){this.get({})},watch:{category:{immediate:!0,handler:function(t){t?this.set():this.option=null}}},methods:{set:function(){var t=this;if(this.multiple){var e=this.category&&this.category.split(",");this.option=this.options.filter(function(t){return e.includes(t.id)})}else{var a=this.options.find(function(e){return e.id===t.category});this.option=a||null}},get:function(t){var e=this;ca.a.getTrainingCategories(t).then(function(t){t.data.success&&(e.options=t.data.data,e.set())}).catch(function(t){console.log(t)})}}};var id=function(t){a("nmJh")},sd=Object(y.a)(nd,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{attrs:{options:t.options,multiple:t.multiple,placeholder:t.placeholder,label:"name",disabled:t.disable,"track-by":"id",selectedLabel:"",deselectLabel:"X",selectLabel:"","hide-selected":t.hideSelect,"close-on-select":t.autoClose},on:{input:function(e){t.$emit("change",e)},select:function(e){t.$emit("select",e)}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,id,"data-v-2f183370",null).exports,od={name:"select-education-test-new",props:{autoClose:{default:!0},hideSelect:{default:!1},placeholder:{type:String,default:"Bài kiểm tra"},multiple:{default:!1,type:Boolean},test:{type:String,default:null},disable:{type:Boolean,default:!1}},components:{Multiselect:la.a},data:function(){return{option:null,options:[]}},created:function(){this.get()},watch:{test:{immediate:!0,handler:function(t){t?this.set():this.option=null}},category:function(t,e){this.get()}},methods:{set:function(){var t=this;if(this.multiple){var e=this.test.split(",");this.option=this.options.filter(function(t){return e.includes(t.id)})}else{var a=this.options.find(function(e){return+e.id==+t.test});this.option=a||null}},get:function(){var t=this;Pi().then(function(e){e.data.success&&(t.options=e.data.data,t.set())}).catch(function(t){console.log(t)})}}};var rd=function(t){a("9fDz")},ld=Object(y.a)(od,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{attrs:{options:t.options,multiple:t.multiple,placeholder:t.placeholder,label:"code","track-by":"id",selectedLabel:"",deselectLabel:"X",selectLabel:"","hide-selected":t.hideSelect,"close-on-select":t.autoClose,disabled:t.disable},on:{input:function(e){t.$emit("change",e)},select:function(e){t.$emit("select",e)}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,rd,"data-v-2f315384",null).exports,cd={name:"period-test",components:{SelectEducationCategory:sd,SelectEducationTestNew:ld,MultiSelectDepartment:_e.a,MultiSelectPosition:be.a},data:function(t){return{filter:{department_id:null,position_id:null,category_id:"",test_id:"",question_content:""},allMultiQuestion:!1,allEssayQuestion:!1,indeterminate:!1,originalMultiQuestions:[],originalEssayQuestions:[],multipleQuestions:[],essayQuestions:[],listMultipleQuestionSelected:[],listEssayQuestionSelected:[],test_questions:[],loading:!1,test_category_name:"",stepCurrent:1,typeCheckbox:1,currentMultiTestScore:5,currentEssayTestScore:5,totalMultipleTestScore:5,totalEssayTestScore:5,currentNumberMultiple:0,totalNumberMultiple:0,currentNumberEssay:0,totalNumberEssay:0,isRecalculate:!0,optionsType:[{id:1,name:"Trắc nghiệm",type:"multiple"},{id:2,name:"Tự luận",type:"assay"}],listMultipleQuestion:[],listEssayQuestion:[],loadingFilter:!1,listQuestionBefore:[],isEditTest:!1,listPositionBefore:[],listDepartmentBefore:[],idTestFilter:null,contentQuestionBefore:"",limit:100,pageMultiple:1,pageEssay:1,isLimitMultiple:!1,isLimitEssay:!1,filterBefore:{},isLoadMultipleQuestionMore:!1,isLoadEssayQuestionMore:!1,messageLoadMultiple:"",messageLoadEssay:""}},props:{triggerGetQuestions:{type:Boolean,default:!1},type:{type:String,default:"edit"},test:{type:Object,default:function(){}},resetData:{type:Boolean,default:!1}},computed:{isSelectAll:function(){var t=this;return 0===this.questions.length||this.questions.filter(function(e){return t.listMultipleQuestionSelected&&t.listMultipleQuestionSelected.includes(e.id)}).length!==this.questions.length},helper:function(){return Me.a}},created:function(){},watch:{triggerGetQuestions:function(){if(this.resetDataModal(),this.test.hasOwnProperty("dataStorage")){var t=this.test.dataStorage;t&&(this.listMultipleQuestionSelected=t.dataMulEditNew,this.listEssayQuestionSelected=t.dataEssayEditNew,this.currentMultiTestScore=t.currentMultiTestScore,this.totalMultipleTestScore=t.totalMultipleTestScore,this.currentEssayTestScore=t.currentEssayTestScore,this.totalEssayTestScore=t.totalEssayTestScore,this.isEditTest=!0)}else this.test.hasOwnProperty("id")&&this.getListQuestionByTest(this.test.id)},resetData:function(){this.filter={category_id:"",test_id:""}},multipleQuestions:function(t,e){0===this.multipleQuestions.length&&!this.allMultiQuestion&&this.listMultipleQuestionSelected.length>0&&(this.allMultiQuestion=!0)},essayQuestions:function(t,e){0===this.essayQuestions.length&&!this.allEssayQuestion&&this.listEssayQuestionSelected.length>0&&(this.allEssayQuestion=!0)},totalMultipleTestScore:function(t,e){+t<10&&+t>0&&this.totalEssayTestScore>0&&(this.totalEssayTestScore=10-t)},totalEssayTestScore:function(t,e){+t<10&&+t>0&&this.totalMultipleTestScore>0&&(this.totalMultipleTestScore=10-t)},typeCheckbox:function(t,e){1==+this.typeCheckbox?this.messageLoadMultiple="":this.messageLoadEssay=""}},methods:{loadMore:function(){1==+this.typeCheckbox?this.pageMultiple++:this.pageEssay++,this.loadingFilter||this.getListQuestions(!1,!1,"more")},onScrollMultiple:function(){var t=document.querySelector("#scroll_multiple");this.$refs.multiple_ref.clientHeight+t.scrollTop+150>t.scrollHeight&&!this.isLimitMultiple&&!this.loadingFilter&&0!==t.scrollTop&&this.checkNoChangeFilter()&&(this.pageMultiple++,this.getListQuestions(!1,!1,"scroll"))},onScrollEssay:function(){var t=document.querySelector("#scroll_essay");this.$refs.essay_ref.clientHeight+t.scrollTop+150>t.scrollHeight&&!this.isLimitEssay&&!this.loadingFilter&&0!==t.scrollTop&&(this.pageEssay++,this.getListQuestions(!1,!1,"scroll"))},getListQuestions:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal";return l()(o.a.mark(function i(){var s,r,l,c,d,u,h,p,m;return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!(Me.a.isEmpty(e.filter.department_id)&&Me.a.isEmpty(e.filter.position_id)&&Me.a.isEmpty(e.filter.test_id))){i.next=5;break}if(a){i.next=3;break}return i.abrupt("return",Me.a.showMessage("Vui lòng chọn bộ phận hoặc vị trí để lọc hoặc bài kiểm tra"));case 3:return 1==+e.typeCheckbox?(e.multipleQuestions=[],e.originalMultiQuestions=[],t&&(e.listMultipleQuestionSelected=[])):(e.essayQuestions=[],e.originalEssayQuestions=[],t&&(e.listEssayQuestionSelected=[])),i.abrupt("return",0);case 5:return"normal"===n&&(e.pageMultiple=1,e.pageEssay=1),s={limit:e.limit,page:1==+e.typeCheckbox?e.pageMultiple:e.pageEssay,form:1==+e.typeCheckbox?"multiple_choice":"essay"},e.filter.department_id&&(s.department_ids=e.filter.department_id.split(",")),e.filter.position_id&&(s.position_ids=e.filter.position_id.split(",")),e.filter.test_id&&(s.period_test_id=e.filter.test_id),e.filter.question_content&&(s.question_content=e.filter.question_content),i.prev=11,e.filterBefore=JSON.parse(sa()(e.filter)),e.loadingFilter=!0,i.next=16,wi(s);case 16:(r=i.sent).data.success?(e.listPositionBefore=e.filter.position_id?JSON.parse(sa()(e.filter.position_id)).split(","):[],e.listDepartmentBefore=e.filter.department_id?JSON.parse(sa()(e.filter.department_id)).split(","):[],e.idTestFilter=e.filter.test_id?JSON.parse(sa()(e.filter.test_id)):null,e.contentQuestionBefore=e.filter.question_content||"",l=r.data.data.questions,1==+e.typeCheckbox?(c=e.listMultipleQuestionSelected.map(function(t){return t.id}),d=l.filter(function(t){return!c.includes(+t.id)}),e.totalNumberMultiple=+r.data.data.total,e.isLoadMultipleQuestionMore=!1,"scroll"===n?e.multipleQuestions=e.multipleQuestions.concat(d):(e.multipleQuestions=d,"normal"===n&&0===e.multipleQuestions.length&&l.length>0&&e.listMultipleQuestionSelected.length>=l.length&&(l.length<+r.data.data.total&&(u=0,JSON.parse(sa()(e.listMultipleQuestionSelected)).forEach(function(t){(e.listDepartmentBefore.includes(String(t.department_id))||e.listPositionBefore.includes(String(t.position_id))||e.idTestFilter&&+e.idTestFilter==+t.test_id)&&u++}),e.messageLoadMultiple="Hiện tại bạn đã chọn "+u+"/"+ +r.data.data.total+" câu cho các bộ phận, vị trí đang lọc.",e.pageMultiple=Math.floor(u/e.limit),u!==+r.data.data.total&&(e.isLoadMultipleQuestionMore=!0)),l.length===+r.data.data.total&&(e.messageLoadMultiple="Bạn đã chọn tất cả "+l.length+"/"+ +r.data.data.total+" câu cho các bộ phận, vị trí đang lọc.",e.isLoadMultipleQuestionMore=!1)),e.currentNumberMultiple=0,document.querySelector("#scroll_multiple").scrollTop=0),+r.data.data.total===e.multipleQuestions.length||0===l.length||l.length<e.limit?e.isLimitMultiple=!0:e.isLimitMultiple=!1,e.allMultiQuestion=!1):(h=e.listEssayQuestionSelected.map(function(t){return t.id}),p=l.filter(function(t){return!h.includes(+t.id)}),e.totalNumberEssay=+r.data.data.total,e.isLoadEssayQuestionMore=!1,"scroll"===n?e.essayQuestions=e.essayQuestions.concat(p):(e.essayQuestions=p,"normal"===n&&0===e.essayQuestions.length&&l.length>0&&e.listEssayQuestionSelected.length>=l.length&&(l.length<+r.data.data.total&&(m=0,JSON.parse(sa()(e.listEssayQuestionSelected)).forEach(function(t){(e.listDepartmentBefore.includes(String(t.department_id))||e.listPositionBefore.includes(String(t.position_id))||e.idTestFilter&&+e.idTestFilter==+t.test_id)&&m++}),e.messageLoadEssay="Hiện tại bạn đã chọn "+m+"/"+ +r.data.data.total+" câu cho các bộ phận, vị trí đang lọc.",e.pageEssay=Math.floor(m/e.limit),m!==+r.data.data.total&&(e.isLoadEssayQuestionMore=!0)),l.length===+r.data.data.total&&(e.messageLoadEssay="Bạn đã chọn tất cả "+l.length+"/"+ +r.data.data.total+" câu cho các bộ phận, vị trí đang lọc.",e.isLoadEssayQuestionMore=!1)),e.currentNumberEssay=0,document.querySelector("#scroll_essay").scrollTop=0),+r.data.data.total===e.essayQuestions.length||0===l.length||l.length<e.limit?e.isLimitEssay=!0:e.isLimitEssay=!1,e.allEssayQuestion=!1),0===l.length&&Me.a.showMessage("Chưa có câu hỏi cho vị trí đang tìm kiếm","warning")):Me.a.showMessage(r.message||"Có lỗi khi lấy danh sách câu hỏi","warning"),i.next=24;break;case 20:i.prev=20,i.t0=i.catch(11),console.log(i.t0),Me.a.showMessage("Có lỗi xảy ra!","error");case 24:return i.prev=24,e.loadingFilter=!1,e.$forceUpdate(),i.finish(24);case 28:case"end":return i.stop()}},i,e,[[11,20,24,28]])}))()},checkNoChangeFilter:function(){var t=this.listDepartmentBefore.join(",")||"",e=this.listPositionBefore.join(",")||"",a=this.idTestFilter?this.idTestFilter:"",n=this.contentQuestionBefore||"",i=this.filter.department_id||"",s=this.filter.position_id||"",o=this.filter.test_id||"",r=this.filter.question_content||"";return t===i&&(e===s&&(a===o&&n===r))},resetDataModal:function(){this.listMultipleQuestionSelected=[],this.listEssayQuestionSelected=[],this.listMultipleQuestion=[],this.listEssayQuestion=[],this.multipleQuestions=[],this.essayQuestions=[],this.totalNumberEssay=0,this.totalNumberMultiple=0,this.currentEssayTestScore=0,this.currentMultiTestScore=0,this.stepCurrent=1,this.typeCheckbox=1,this.isRecalculate=!0,this.currentNumberMultiple=0,this.totalNumberMultiple=0,this.currentNumberEssay=0,this.totalNumberEssay=0,this.allMultiQuestion=!1,this.allEssayQuestion=!1,this.isEditTest=!1,this.listPositionBefore=[],this.listDepartmentBefore=[],this.isLimitMultiple=!1,this.isLimitEssay=!1,this.pageMultiple=1,this.pageEssay=1,this.isLoadMultipleQuestionMore=!1,this.isLoadEssayQuestionMore=!1,this.messageLoadMultiple="",this.messageLoadEssay=""},getListQuestionByTest:function(t){var e=this;return l()(o.a.mark(function a(){var n,i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n={tp_period_test_id:t},!Me.a.isEmpty(n.tp_period_test_id)){a.next=3;break}return a.abrupt("return",Me.a.showMessage("không tìm thấy id của bài kiểm tra"));case 3:return a.prev=3,a.next=6,Mi(n);case 6:if(!(i=a.sent).data.success){a.next=14;break}e.isEditTest=!0,i.data.data.hasOwnProperty("essay")&&(e.listEssayQuestionSelected=i.data.data.essay.map(function(t){return{id:t.question_id,content:t.content,testId:t.test_id,score:t.score_config,department_id:t.department_id,position_id:t.position_id}}),e.listEssayQuestionSelected.length>0?(e.totalEssayTestScore=e.listEssayQuestionSelected.reduce(function(t,e){return t+ +e.score},0),(""+e.totalEssayTestScore).length>5&&(e.totalEssayTestScore=Math.ceil(+e.totalEssayTestScore)),e.currentEssayTestScore=JSON.parse(sa()(e.totalEssayTestScore))):(e.totalEssayTestScore=0,e.currentEssayTestScore=0)),i.data.data.hasOwnProperty("multiple_choice")&&(e.listMultipleQuestionSelected=i.data.data.multiple_choice.map(function(t){return{id:t.question_id,content:t.content,testId:t.test_id,score:t.score_config,department_id:t.department_id,position_id:t.position_id}}),e.listMultipleQuestionSelected.length>0?(e.totalMultipleTestScore=e.listMultipleQuestionSelected.reduce(function(t,e){return t+ +e.score},0),(""+e.totalMultipleTestScore).length>5&&(e.totalMultipleTestScore=Math.ceil(+e.totalMultipleTestScore)),e.currentMultiTestScore=JSON.parse(sa()(e.totalMultipleTestScore))):(e.totalMultipleTestScore=0,e.currentMultiTestScore=0)),e.listQuestionBefore=[].concat(d()(e.listMultipleQuestionSelected),d()(e.listEssayQuestionSelected)).map(function(t){return{id:t.id,score:t.score}}),a.next=16;break;case 14:return e.isEditTest=!1,a.abrupt("return",Me.a.showMessage(i.data.message||"Có lỗi xảy ra khi lấy danh sách câu hỏi","warning"));case 16:a.next=23;break;case 18:if(a.prev=18,a.t0=a.catch(3),console.log(a.t0),!a.t0.response||422!=+a.t0.response.status){a.next=23;break}return a.abrupt("return",Me.a.showMessage(a.t0.response.data.message,"warning"));case 23:case"end":return a.stop()}},a,e,[[3,18]])}))()},calculateScore:function(){if(this.listEssayQuestionSelected.length>0&&0===this.listMultipleQuestionSelected.length?(this.totalEssayTestScore=10,this.totalMultipleTestScore=0,this.currentEssayTestScore=10,this.currentMultiTestScore=0):this.listMultipleQuestionSelected.length>0&&0===this.listEssayQuestionSelected.length&&(this.totalMultipleTestScore=10,this.totalEssayTestScore=0,this.currentMultiTestScore=10,this.currentEssayTestScore=0),this.listMultipleQuestionSelected.length>0){var t=Number(this.totalMultipleTestScore/this.listMultipleQuestionSelected.length);t.toString().length>4&&(t=Number(t.toString().slice(0,4))),this.listMultipleQuestionSelected=this.listMultipleQuestionSelected.map(function(e){return{id:e.id,content:e.content,score:t}});var e=this.totalMultipleTestScore-this.roundNumber((this.listMultipleQuestionSelected.length-1)*t);e=e.toFixed(2),this.listMultipleQuestionSelected[0].score=e,this.currentMultiTestScore=JSON.parse(sa()(this.totalMultipleTestScore))}if(this.listEssayQuestionSelected.length>0){var a=Number(this.totalEssayTestScore/this.listEssayQuestionSelected.length);a.toString().length>4&&(a=Number(a.toString().slice(0,4))),this.listEssayQuestionSelected=this.listEssayQuestionSelected.map(function(t){return{id:t.id,content:t.content,score:a}});var n=this.totalEssayTestScore-this.roundNumber((this.listEssayQuestionSelected.length-1)*a);n=n.toFixed(2),this.listEssayQuestionSelected[0].score=n,this.currentEssayTestScore=JSON.parse(sa()(this.totalEssayTestScore))}},recalculate:function(t,e){var a=null;1===e?null!==(a=this.calculateTotalScore(t,this.listMultipleQuestionSelected))&&(this.currentMultiTestScore=a):null!==(a=this.calculateTotalScore(t,this.listEssayQuestionSelected))&&(this.currentEssayTestScore=a)},calculateTotalScore:function(t,e){if("number"==typeof+t.score){var a=[];return e.forEach(function(t){if("number"==typeof+t.score){var e=isNaN(+t.score)?0:+t.score;a.push(e)}}),parseFloat(a.reduce(function(t,e){return t+e},0).toFixed(3))}return null},handleNextStep:function(){if(0===this.listEssayQuestionSelected.length&&0===this.listMultipleQuestionSelected.length)return Me.a.showMessage("Vui lòng chọn ít nhất 1 câu hỏi cho bài kiểm tra!","warning");if(0!==this.currentNumberEssay||0!==this.currentNumberMultiple)this.totalMultipleTestScore=5,this.totalEssayTestScore=5,this.calculateScore();else{if(this.listMultipleQuestionSelected.length>0){var t=0;if(this.listMultipleQuestionSelected.forEach(function(e){if("number"==typeof+e.score){var a=isNaN(+e.score)?0:+e.score;t=+(t+=a).toFixed(2)}}),this.currentMultiTestScore>t){var e=Number(this.totalMultipleTestScore/this.listMultipleQuestionSelected.length);e.toString().length>4&&(e=Number(e.toString().slice(0,4))),this.listMultipleQuestionSelected=this.listMultipleQuestionSelected.map(function(t){return{id:t.id,content:t.content,score:e}});var a=this.totalMultipleTestScore-this.roundNumber((this.listMultipleQuestionSelected.length-1)*e);a=a.toFixed(2),this.listMultipleQuestionSelected[0].score=a,this.currentMultiTestScore=JSON.parse(sa()(this.totalMultipleTestScore))}}else this.currentMultiTestScore=0,this.totalMultipleTestScore=0;if(this.listEssayQuestionSelected.length>0){var n=0;this.listEssayQuestionSelected.forEach(function(t){if("number"==typeof+t.score){var e=isNaN(+t.score)?0:+t.score;n=+(n+=e).toFixed(2)}}),this.currentEssayTestScore=n.toFixed(2),0===this.listMultipleQuestionSelected.length&&this.calculateScore()}else this.currentEssayTestScore=0,this.totalEssayTestScore=0}this.stepCurrent++},handleBack:function(){0===this.listEssayQuestionSelected.length&&0===this.listMultipleQuestionSelected.length?this.isRecalculate=!0:this.isRecalculate=!1,0===this.listEssayQuestionSelected.length&&(this.allEssayQuestion=!1),0===this.listMultipleQuestionSelected.length&&(this.allMultiQuestion=!1),this.stepCurrent--},roundNumber:function(t){return Math.round(100*t)/100},resetDataLoadQuestion:function(){this.isLoadMultipleQuestionMore=!1,this.isLoadEssayQuestionMore=!1,this.messageLoadMultiple="",this.messageLoadEssay=""},handleEducationTestSelected:function(t){this.filter.test_id=t?String(t.id):"",this.resetDataLoadQuestion()},handleDepartmentSelected:function(t){null!==t&&(Array.isArray(t)||(t=[t])),this.filter.department_id=t?t.map(function(t){return t.id}).toString():"",this.resetDataLoadQuestion()},handlePositionSelected:function(t){null!==t&&(Array.isArray(t)||(t=[t])),this.filter.position_id=t?t.map(function(t){return t.id}).toString():"",this.resetDataLoadQuestion()},changeFilterQuestionContent:function(){this.resetDataLoadQuestion()},handleChoiceQuestion:function(t,e){1==+this.typeCheckbox?(this.multipleQuestions.splice(t,1),this.listMultipleQuestionSelected.push(e),this.currentNumberMultiple++):(this.essayQuestions.splice(t,1),this.listEssayQuestionSelected.push(e),this.currentNumberEssay++),this.isLoadMultipleQuestionMore=!1,this.isLoadEssayQuestionMore=!1},handleUnChoice:function(t,e,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.messageLoadMultiple="",this.messageLoadEssay="",1===a?(this.listMultipleQuestionSelected.splice(t,1),e.hasOwnProperty("score")&&(e.score=0),0!==this.currentNumberMultiple&&this.currentNumberMultiple--,(this.listDepartmentBefore.includes(String(e.department_id))||this.listPositionBefore.includes(String(e.position_id))||this.idTestFilter&&+this.idTestFilter==+e.test_id)&&(this.multipleQuestions=[e].concat(d()(this.multipleQuestions)))):(this.listEssayQuestionSelected.splice(t,1),e.hasOwnProperty("score")&&(e.score=0),this.currentNumberEssay--,(this.listDepartmentBefore.includes(String(e.department_id))||this.listPositionBefore.includes(String(e.position_id))||this.idTestFilter&&+this.idTestFilter==+e.test_id)&&(this.essayQuestions=[e].concat(d()(this.essayQuestions)))),n&&this.calculateScore()},handleSelectAll:function(t){var e=this;1==+this.typeCheckbox?(this.messageLoadMultiple="",t?(this.listMultipleQuestionSelected=[].concat(d()(this.listMultipleQuestionSelected),d()(this.multipleQuestions)),this.currentNumberMultiple=this.multipleQuestions.length+this.currentNumberMultiple,this.multipleQuestions=[],this.currentNumberMultiple<this.totalNumberMultiple&&this.checkNoChangeFilter()&&0!==this.currentNumberMultiple&&!this.isLimitMultiple&&(this.isLoadMultipleQuestionMore=!0),document.querySelector("#scroll_multiple").scrollTop=0):(JSON.parse(sa()(this.listMultipleQuestionSelected)).forEach(function(t){(e.listDepartmentBefore.includes(String(t.department_id))||e.listPositionBefore.includes(String(t.position_id))||e.idTestFilter&&+e.idTestFilter==+t.test_id)&&e.multipleQuestions.push(t)}),this.listMultipleQuestionSelected=[],this.currentNumberMultiple=0,this.isLoadMultipleQuestionMore=!1)):(this.messageLoadEssay="",t?(this.listEssayQuestionSelected=[].concat(d()(this.listEssayQuestionSelected),d()(this.essayQuestions)),this.currentNumberEssay=this.essayQuestions.length+this.currentNumberEssay,this.essayQuestions=[],this.currentNumberEssay<this.totalNumberEssay&&this.checkNoChangeFilter()&&0!==this.currentNumberEssay&&!this.isLimitEssay&&(this.isLoadEssayQuestionMore=!0),document.querySelector("#scroll_essay").scrollTop=0):(JSON.parse(sa()(this.listEssayQuestionSelected)).forEach(function(t){(e.listDepartmentBefore.includes(String(t.department_id))||e.listPositionBefore.includes(String(t.position_id))||e.idTestFilter&&+e.idTestFilter==+t.test_id)&&e.essayQuestions.push(t)}),this.listEssayQuestionSelected=[],this.currentNumberEssay=0,this.isLoadEssayQuestionMore=!1))},submitPeriodTests:function(){var t=[].concat(d()(this.listMultipleQuestionSelected),d()(this.listEssayQuestionSelected)).map(function(t){return{id:t.id,score:t.score}});if(Me.a.isEmpty(t))return Me.a.showMessage("Vui lòng chọn ít nhất 1 câu hỏi trước khi xác nhận!");var e=!1;if("edit"===this.type)if(this.listQuestionBefore.length===t.length)for(var a=0;a<this.listQuestionBefore.length;a++){if(+this.listQuestionBefore[a].id!=+t[a].id){e=!0;break}if(+this.listQuestionBefore[a].score!=+t[a].score){e=!0;break}}else e=!0;var n;if(n={dataMulEditNew:this.listMultipleQuestionSelected,dataEssayEditNew:this.listEssayQuestionSelected,currentMultiTestScore:this.currentMultiTestScore,totalMultipleTestScore:this.totalMultipleTestScore,currentEssayTestScore:this.currentEssayTestScore,totalEssayTestScore:this.totalEssayTestScore},this.listMultipleQuestionSelected.length>0)for(var i=0;i<this.listMultipleQuestionSelected.length;i++)if(isNaN(+this.listMultipleQuestionSelected[i].score)||0===String(this.listMultipleQuestionSelected[i].score).length||+this.listMultipleQuestionSelected[i].score<0)return Me.a.showMessage("Câu số "+(i+1)+" phần trắc nghiệm chưa đúng định dạng hoặc chưa được thiết lập điểm","warning");if(this.listEssayQuestionSelected.length>0)for(var s=0;s<this.listEssayQuestionSelected.length;s++)if(isNaN(+this.listEssayQuestionSelected[s].score)||0===String(this.listEssayQuestionSelected[s].score).length||+this.listEssayQuestionSelected[s].score<0)return Me.a.showMessage("Câu số "+(s+1)+" phần tự luận chưa đúng định dạng hoặc chưa được thiết lập điểm","warning");return+this.totalMultipleTestScore+ +this.totalEssayTestScore!=10||+this.currentMultiTestScore+ +this.currentEssayTestScore!=10?Me.a.showMessage("Tổng số điểm chưa chính xác","warning"):this.listMultipleQuestionSelected.length>0&&+this.totalMultipleTestScore!=+this.currentMultiTestScore?Me.a.showMessage("Tổng số điểm phần trắc nghiệm chưa đủ","warning"):this.listEssayQuestionSelected.length>0&&+this.totalEssayTestScore!=+this.currentEssayTestScore?Me.a.showMessage("Tổng số điểm phần tự luận chưa đủ","warning"):(this.$emit("action",{action:"update-test-categories",data:{category_id:this.filter.category_id}}),void this.$emit("action",{action:"submit-test",data:t,isEdit:e,dataStorage:n}))}}};var dd=function(t){a("CvGb")},ud=Object(y.a)(cd,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap-cus"},[a("div",{staticClass:"header-cus"},[a("div",{staticClass:"wrap-step"},[a("div",{staticClass:"step",style:t.stepCurrent>=1?"background-color: #00904A":""},[t._v("1")]),t._v(" "),a("div",{staticClass:"name-step"},[t._v("Chọn câu hỏi")])]),t._v(" "),a("span",{staticClass:"step-space"}),t._v(" "),a("div",{staticClass:"wrap-step"},[a("div",{staticClass:"step",style:t.stepCurrent>=2?"background-color: #00904A":""},[t._v("2")]),t._v(" "),a("div",{staticClass:"name-step"},[t._v("Thiết lập điểm")])])]),t._v(" "),1==+t.stepCurrent?a("div",{staticClass:"container-cus step-1"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-2 period-test small-scrollbar test-left",staticStyle:{"max-width":"48%"}},[t._m(0),t._v(" "),a("div",{staticClass:"row mt-3 mr-1 ml-1"},[a("label",{staticClass:"col-md-4 mt-2 text-left text-black"},[t._v("Bô phận")]),t._v(" "),a("multi-select-department",{staticClass:"col-md-8 p-0 multiselect-ghtk multiselect-no-horizontal z-5",attrs:{"auto-close":!0,"is-multiple":!0,placeholder:"Bộ phận","department-ids":t.filter.department_id},on:{handleDepartmentSelected:t.handleDepartmentSelected}})],1),t._v(" "),a("div",{staticClass:"row mt-3 mr-1 ml-1"},[a("label",{staticClass:"col-md-4 mt-2 text-left text-black"},[t._v("Vị trí")]),t._v(" "),a("MultiSelectPosition",{staticClass:"col-md-8 p-0 multiselect-ghtk multiselect-no-horizontal",attrs:{"is-multiple":!0,"position-ids":t.filter.position_id,"department-ids":t.filter.department_id,"auto-close":!0,"hide-selected":!0,"exclude-department":[1],placeholder:"Vị trí"},on:{handlePositionSelected:t.handlePositionSelected}})],1),t._v(" "),a("div",{staticClass:"row mt-3 mr-1 ml-1"},[a("label",{staticClass:"col-md-4 mt-2 text-left text-black"},[t._v("Bài kiểm tra")]),t._v(" "),a("select-education-test-new",{staticClass:"col-md-8 p-0 multiselect-ghtk multiselect-no-horizontal",attrs:{test:t.filter.test_id,multiple:!1,placeholder:"Chọn bài kiểm tra"},on:{change:t.handleEducationTestSelected}})],1),t._v(" "),a("div",{staticClass:"row mt-3 mr-1 ml-1"},[a("label",{staticClass:"col-md-4 mt-2 text-left text-black"},[t._v("Nội dung câu hỏi")]),t._v(" "),a("b-form-input",{staticClass:"col-md-8",attrs:{placeholder:"Nhập nội dung câu hỏi"},on:{input:t.changeFilterQuestionContent},model:{value:t.filter.question_content,callback:function(e){t.$set(t.filter,"question_content",e)},expression:"filter.question_content"}})],1),t._v(" "),a("div",{staticClass:"row mt-3 mr-1 ml-1 radio-cus"},[a("label",{staticClass:"col-md-4 mt-2 text-left text-black"},[t._v("Chọn dạng câu hỏi")]),t._v(" "),a("b-form-radio-group",{staticClass:"col-md-8 mt-2",attrs:{options:t.optionsType,"value-field":"id","text-field":"name","disabled-field":"notEnabled"},model:{value:t.typeCheckbox,callback:function(e){t.typeCheckbox=e},expression:"typeCheckbox"}})],1),t._v(" "),a("div",{staticClass:"row filter-cus"},[a("button",{staticClass:"btn btn-ghtk btn-md rounded btn-filter",attrs:{disabled:t.loadingFilter},on:{click:t.getListQuestions}},[a("i",{staticClass:"ion ion-ios-funnel"}),t._v("Lọc\n            "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.loadingFilter,expression:"loadingFilter"}],staticClass:"fas fa-spinner fa-pulse",staticStyle:{"font-size":"12px","margin-left":"0.2rem"}})])]),t._v(" "),1==+t.typeCheckbox?a("div",{staticClass:"row mt-3 mr-1 ml-3"},[a("div",{staticClass:"col-md-8 px-0 py-2"},[t._v("Chọn câu hỏi bài kiểm tra: "+t._s(t.currentNumberMultiple+"/"+t.totalNumberMultiple))]),t._v(" "),a("b-form-checkbox",{staticClass:"col-md-4 ghtk-checkbox text-ghtk cursor-pointer mt-2",attrs:{indeterminate:t.indeterminate,"aria-describedby":"testQuestions","aria-controls":"testQuestions"},on:{change:t.handleSelectAll},model:{value:t.allMultiQuestion,callback:function(e){t.allMultiQuestion=e},expression:"allMultiQuestion"}},[t._v("\n            "+t._s(t.allMultiQuestion?"Bỏ chọn tất cả":"Chọn tất cả")+"\n          ")])],1):t._e(),t._v(" "),1==+t.typeCheckbox?a("div",{ref:"multiple_ref",staticClass:"checkbox-cus ml-3",staticStyle:{"max-height":"26vh !important","overflow-y":"auto","overflow-x":"hidden"},attrs:{id:"scroll_multiple"},on:{scroll:t.onScrollMultiple}},[t._l(t.multipleQuestions,function(e,n){return a("div",{key:n,staticStyle:{"margin-bottom":"0.4rem"},attrs:{id:String(e.id)}},[a("span",{staticStyle:{position:"relative",cursor:"pointer"},on:{click:function(a){return t.handleChoiceQuestion(n,e)}}},[a("i",{staticClass:"ion ion-ios-square-outline",staticStyle:{color:"#00904A","font-size":"1.2rem","margin-right":"0.4rem",position:"absolute"}})]),t._v(" "),a("span",{staticClass:"question-content"},[t._v(t._s(e.content))])])}),t._v(" "),t.messageLoadMultiple.length>0?a("div",{staticClass:"load-question",staticStyle:{"text-align":"center","margin-top":"0.6rem","margin-bottom":"0.6rem"}},[t._v("\n            "+t._s(t.messageLoadMultiple)+"\n          ")]):t._e(),t._v(" "),t.isLoadMultipleQuestionMore?a("div",{staticClass:"load-question"},[a("button",{staticClass:"btn btn-ghtk btn-md rounded",staticStyle:{display:"block",margin:"auto",background:"white",color:"#069255","font-style":"italic"},on:{click:t.loadMore}},[t._v("\n              Xem thêm...\n            ")])]):t._e()],2):t._e(),t._v(" "),2==+t.typeCheckbox?a("div",{staticClass:"row mt-3 mr-1 ml-3"},[a("div",{staticClass:"col-md-8 px-0 py-2"},[t._v("Chọn câu hỏi bài kiểm tra: "+t._s(t.currentNumberEssay+"/"+t.totalNumberEssay))]),t._v(" "),a("b-form-checkbox",{staticClass:"col-md-4 ghtk-checkbox text-ghtk cursor-pointer mt-2",attrs:{indeterminate:t.indeterminate,"aria-describedby":"testQuestionsE","aria-controls":"testQuestionsE"},on:{change:t.handleSelectAll},model:{value:t.allEssayQuestion,callback:function(e){t.allEssayQuestion=e},expression:"allEssayQuestion"}},[t._v("\n            "+t._s(t.allEssayQuestion?"Bỏ chọn tất cả":"Chọn tất cả")+"\n          ")])],1):t._e(),t._v(" "),2==+t.typeCheckbox?a("div",{ref:"essay_ref",staticClass:"checkbox-cus ml-3",staticStyle:{"max-height":"26vh !important","overflow-y":"auto","overflow-x":"hidden"},attrs:{id:"scroll_essay"},on:{scroll:t.onScrollEssay}},[t._l(t.essayQuestions,function(e,n){return a("div",{key:n,staticStyle:{"margin-bottom":"0.4rem"},attrs:{id:String(e.id)}},[a("span",{staticStyle:{position:"relative",cursor:"pointer"},on:{click:function(a){return t.handleChoiceQuestion(n,e)}}},[a("i",{staticClass:"ion ion-ios-square-outline",staticStyle:{color:"#00904A","font-size":"1.2rem","margin-right":"0.4rem",position:"absolute"}})]),t._v(" "),a("span",{staticClass:"question-content"},[t._v(t._s(e.content))])])}),t._v(" "),t.messageLoadEssay.length>0?a("div",{staticClass:"load-question",staticStyle:{"text-align":"center","margin-top":"0.6rem","margin-bottom":"0.6rem"}},[t._v("\n            "+t._s(t.messageLoadEssay)+"\n          ")]):t._e(),t._v(" "),t.isLoadEssayQuestionMore?a("div",{staticClass:"load-question"},[a("button",{staticClass:"btn btn-ghtk btn-md rounded",staticStyle:{display:"block",margin:"auto",background:"white",color:"#069255","font-style":"italic"},on:{click:t.loadMore}},[t._v("\n              Xem thêm...\n            ")])]):t._e()],2):t._e()]),t._v(" "),a("div",{staticClass:"m-2 period-test small-scrollbar test-right"},[t._m(1),t._v(" "),t.listMultipleQuestionSelected.length>0?a("div",{staticClass:"multiple-question checkbox-cus"},[a("span",{staticClass:"label-question"},[t._v("Trắc nghiệm ("+t._s(t.listMultipleQuestionSelected.length)+" câu)")]),t._v(" "),a("div",{staticClass:"list-question-choice"},t._l(t.listMultipleQuestionSelected,function(e,n){return a("div",{key:n,staticStyle:{"margin-bottom":"0.4rem"},attrs:{id:"selected_"+e.id}},[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(a){return t.handleUnChoice(n,e,1)}}},[a("i",{staticClass:"ion ion-ios-checkbox",staticStyle:{color:"#00904A","font-size":"1rem","margin-right":"0.4rem"}})]),t._v(" "),a("span",{staticClass:"question-content-selected"},[t._v(t._s(e.content))])])}),0)]):t._e(),t._v(" "),t.listEssayQuestionSelected.length>0?a("div",{staticClass:"essay-question checkbox-cus"},[a("span",{staticClass:"label-question"},[t._v("Tự luận ("+t._s(t.listEssayQuestionSelected.length)+" câu)")]),t._v(" "),a("div",{staticClass:"list-question-choice"},t._l(t.listEssayQuestionSelected,function(e,n){return a("div",{key:n,staticStyle:{"margin-bottom":"0.4rem"},attrs:{id:"selected_"+e.id}},[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(a){return t.handleUnChoice(n,e,2)}}},[a("i",{staticClass:"ion ion-ios-checkbox",staticStyle:{color:"#00904A","font-size":"1rem","margin-right":"0.4rem"}})]),t._v(" "),a("span",{staticClass:"question-content-selected"},[t._v(t._s(e.content))])])}),0)]):t._e()])]):t._e(),t._v(" "),2==+t.stepCurrent?a("div",{staticClass:"container-cus step-2"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-2 period-test small-scrollbar test-left"},[t._m(2),t._v(" "),a("div",{staticClass:"wrap-mark"},[t.listMultipleQuestionSelected.length>0?a("div",{staticClass:"mark-essay",staticStyle:{"margin-bottom":"1.8rem"}},[a("div",{staticClass:"mark-header row"},[a("span",{staticClass:"mark-title col-9"},[t._v("PHẦN TRẮC NGHIỆM ("+t._s(t.listMultipleQuestionSelected.length)+" CÂU)")]),t._v(" "),a("span",{staticClass:"change-mark col-3 row"},[a("span",{staticClass:"span-change-mark"},[a("span",{staticClass:"span-first"},[t._v(t._s(t.currentMultiTestScore)+" / ")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.totalMultipleTestScore,expression:"totalMultipleTestScore"}],staticClass:"total-score",attrs:{type:"number",id:"totalScoreMulti",name:"totalScoreMulti",step:"1",min:"1",max:"10",disabled:0===t.listMultipleQuestionSelected.length},domProps:{value:t.totalMultipleTestScore},on:{input:function(e){e.target.composing||(t.totalMultipleTestScore=e.target.value)}}})]),t._v(" "),a("span",{staticClass:"span-third"},[t._v("ĐIỂM")])])]),t._v(" "),a("div",{staticClass:"mark-content"},t._l(t.listMultipleQuestionSelected,function(e,n){return a("div",{staticClass:"row mark-detail-question",attrs:{id:"mark_"+n}},[a("span",{staticClass:"col-9 list-question-cus",staticStyle:{"max-height":"4rem",padding:"13px"}},[t._v("Câu "+t._s(n+1)+": "+t._s(e.content.length>180?e.content.slice(0,180):e.content)+"\n                  "),e.content.length>180?a("b-button",{staticStyle:{padding:"0","background-color":"white",color:"black"},attrs:{id:"mark_btn_mul"+e.id}},[t._v("\n                  ...\n                ")]):t._e()],1),t._v(" "),a("span",{staticClass:"col-3 change-mark-container row"},[a("span",{staticClass:"span-mark-detail"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.score,expression:"question.score"}],staticClass:"detail-score",attrs:{type:"number",id:"score"+e.id,name:"",step:"0.01",min:"0.00",max:"10.00"},domProps:{value:e.score},on:{input:[function(a){a.target.composing||t.$set(e,"score",a.target.value)},function(a){return t.recalculate(e,1)}]}})]),t._v(" "),a("span",{staticClass:"span-third"},[a("i",{staticClass:"fas fa-times-circle",staticStyle:{"font-size":"18px",color:"red",cursor:"pointer"},on:{click:function(a){return t.handleUnChoice(n,e,1,!0)}}})])]),t._v(" "),a("b-popover",{staticClass:"popover-cus",attrs:{target:"mark_btn_mul"+e.id,triggers:"hover"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Câu "+t._s(t.listMultipleQuestionSelected.length+1+n))]},proxy:!0}],null,!0)},[t._v("\n                  "+t._s(e.content)+"\n                ")])],1)}),0)]):t._e(),t._v(" "),t.listEssayQuestionSelected.length>0?a("div",{staticClass:"mark-essay",staticStyle:{"margin-bottom":"0.5rem"}},[a("div",{staticClass:"mark-header row"},[a("span",{staticClass:"mark-title col-9"},[t._v("PHẦN TỰ LUẬN ("+t._s(t.listEssayQuestionSelected.length)+" CÂU)")]),t._v(" "),a("span",{staticClass:"change-mark col-3 row"},[a("span",{staticClass:"span-change-mark"},[a("span",{staticClass:"span-first"},[t._v(t._s(t.currentEssayTestScore)+" / ")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.totalEssayTestScore,expression:"totalEssayTestScore"}],staticClass:"total-score",attrs:{type:"number",id:"totalScoreEssay",name:"totalScoreEssay",step:"1",min:"1",max:"10",disabled:0===t.listEssayQuestionSelected.length},domProps:{value:t.totalEssayTestScore},on:{input:function(e){e.target.composing||(t.totalEssayTestScore=e.target.value)}}})]),t._v(" "),a("span",{staticClass:"span-third"},[t._v("ĐIỂM")])])]),t._v(" "),a("div",{staticClass:"mark-content"},t._l(t.listEssayQuestionSelected,function(e,n){return a("div",{staticClass:"row mark-detail-question",attrs:{id:"mark_"+n}},[a("span",{staticClass:"col-9 list-question-cus",staticStyle:{"max-height":"4rem",padding:"13px"}},[t._v("Câu "+t._s(t.listMultipleQuestionSelected.length+1+n)+": "+t._s(e.content.length>180?e.content.slice(0,180):e.content)+"\n                  "),e.content.length>180?a("b-button",{staticStyle:{padding:"0","background-color":"white",color:"black"},attrs:{id:"mark_btn"+e.id}},[t._v("\n                  ...\n                ")]):t._e()],1),t._v(" "),a("span",{staticClass:"col-3 change-mark-container row"},[a("span",{staticClass:"span-mark-detail"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.score,expression:"question.score"}],staticClass:"detail-score",attrs:{type:"number",id:"score"+e.id,name:"",step:"0.01",min:"0.00",max:"10.00"},domProps:{value:e.score},on:{input:[function(a){a.target.composing||t.$set(e,"score",a.target.value)},function(a){return t.recalculate(e,2)}]}})]),t._v(" "),a("span",{staticClass:"span-third"},[a("i",{staticClass:"fas fa-times-circle",staticStyle:{"font-size":"18px",color:"red",cursor:"pointer"},on:{click:function(a){return t.handleUnChoice(n,e,2,!0)}}})])]),t._v(" "),a("b-popover",{staticClass:"popover-cus",attrs:{target:"mark_btn"+e.id,triggers:"hover"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Câu "+t._s(t.listMultipleQuestionSelected.length+1+n))]},proxy:!0}],null,!0)},[t._v("\n                  "+t._s(e.content)+"\n                ")])],1)}),0)]):t._e()])])]):t._e(),t._v(" "),a("div",{staticClass:"footer-cus"},[1==+t.stepCurrent?a("div",{staticClass:"text-center mt-4"},[a("button",{staticClass:"btn btn-ghtk btn-md rounded",on:{click:function(e){return t.handleNextStep()}}},[t._v("\n          Tiếp tục\n        ")])]):t._e(),t._v(" "),2==+t.stepCurrent?a("div",{staticClass:"text-center mt-4"},[a("button",{staticClass:"btn btn-ghtk btn-md rounded",staticStyle:{"background-color":"rgb(255, 100, 100) !important","margin-right":"9rem"},on:{click:function(e){return t.handleBack()}}},[t._v("\n          Quay lại\n        ")]),t._v(" "),a("button",{staticClass:"btn btn-ghtk btn-md rounded",on:{click:t.submitPeriodTests}},[t._v("\n          Xác nhận\n        ")])]):t._e()])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"test-left-header"},[e("span",{staticClass:"step-number"},[this._v("1")]),this._v(" "),e("span",{staticClass:"title-step"},[this._v("BƯỚC 1: CHỌN CÂU HỎI")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"test-right-header"},[e("span",[this._v("Danh sách câu hỏi đã chọn")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"test-left-header",staticStyle:{"margin-bottom":"0.7rem"}},[e("span",{staticClass:"step-number"},[this._v("2")]),this._v(" "),e("span",{staticClass:"title-step"},[this._v("BƯỚC 2: THIẾT LẬP ĐIỂM")])])}],!1,dd,"data-v-3c05cb23",null).exports;var hd=function(t){a("h0+N")},pd=Object(y.a)({name:"checkbox-custom",components:{},props:{isDisabled:{default:!1},id:{default:null},isChecked:{default:!1}},created:function(){this.checked=this.isChecked},data:function(){return{checked:!1}},watch:{checked:function(){this.$emit("model",this.checked)},isChecked:function(){this.checked=this.isChecked}},methods:{checkedNow:function(){this.checked=!0,this.$emit("model",this.checked)},check:function(){this.checked=!this.checked,this.$emit("change",this.checked)},notCheck:function(){this.checked=!1,this.$emit("model",this.checked)}}},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"checkbox-custom"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],attrs:{type:"checkbox",id:t.id,disabled:t.isDisabled},domProps:{checked:Array.isArray(t.checked)?t._i(t.checked,null)>-1:t.checked},on:{click:t.check,change:function(e){var a=t.checked,n=e.target,i=!!n.checked;if(Array.isArray(a)){var s=t._i(a,null);n.checked?s<0&&(t.checked=a.concat([null])):s>-1&&(t.checked=a.slice(0,s).concat(a.slice(s+1)))}else t.checked=i}}}),t._v(" "),a("label",{class:t.isDisabled&&"disabled",attrs:{for:t.id}})])])},[],!1,hd,"data-v-7e9e7ba2",null).exports,md=a("u4Bf"),fd=a.n(md),gd=function(t){return Ha.a.get("/education/api/tp/lessons/questions",{params:t})},vd={name:"Modal-quiz",components:{SelectEducationCategory:sd,SelectEducationTestNew:ld,MultiSelectDepartment:_e.a,MultiSelectPosition:be.a},data:function(t){return{filter:{department_id:null,position_id:null,category_id:"",test_id:"",question_content:""},allMultiQuestion:!1,indeterminate:!1,originalMultiQuestions:[],multipleQuestions:[],listMultipleQuestionSelected:[],loading:!1,stepCurrent:1,currentNumberMultiple:0,totalNumberMultiple:0,listMultipleQuestion:[],loadingFilter:!1,listQuestionBefore:[],isEditQuiz:!1,listPositionBefore:[],listDepartmentBefore:[],idTestFilter:null,contentQuestionBefore:"",limit:100,pageMultiple:1,isLimitMultiple:!1,filterBefore:{},isLoadMultipleQuestionMore:!1,messageLoadMultiple:"",questions:{}}},props:{triggerGetQuestions:{type:Boolean,default:!1},type:{type:String,default:"edit"},quiz:{type:Object,default:function(){}},resetData:{type:Boolean,default:!1}},computed:{isSelectAll:function(){var t=this;return 0===this.questions.length||this.questions.filter(function(e){return t.listMultipleQuestionSelected&&t.listMultipleQuestionSelected.includes(e.id)}).length!==this.questions.length},helper:function(){return Me.a}},created:function(){},watch:{triggerGetQuestions:function(){if(this.resetDataModal(),this.quiz.hasOwnProperty("dataStorage")){var t=this.quiz.dataStorage;t&&(this.listMultipleQuestionSelected=t.dataMulEditNew,this.listQuestionBefore=t.dataQuestionBefore,this.isEditQuiz=!0)}else this.quiz.questions&&!this.helper.isEmpty(this.quiz.questions)&&(this.listQuestionBefore=this.quiz.questions,this.getListQuestionByQuestionIds(this.quiz.questions))},resetData:function(){this.filter={category_id:"",test_id:""}},multipleQuestions:function(t,e){0===this.multipleQuestions.length&&!this.allMultiQuestion&&this.listMultipleQuestionSelected.length>0&&(this.allMultiQuestion=!0)}},methods:{formattedText:function(t){return t?t.replace(/\n/g,"</br>"):""},loadMore:function(){this.pageMultiple++,this.loadingFilter||this.getListQuestions(!1,!1,"more")},onScrollMultiple:function(){var t=document.querySelector("#scroll_multiple");this.$refs.multiple_ref.clientHeight+t.scrollTop+150>t.scrollHeight&&!this.isLimitMultiple&&!this.loadingFilter&&0!==t.scrollTop&&this.checkNoChangeFilter()&&(this.pageMultiple++,this.getListQuestions(!1,!1,"scroll"))},getListQuestions:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal";return l()(o.a.mark(function i(){var s,r,l,c,d,u;return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!(Me.a.isEmpty(e.filter.department_id)&&Me.a.isEmpty(e.filter.position_id)&&Me.a.isEmpty(e.filter.test_id))){i.next=7;break}if(a){i.next=3;break}return i.abrupt("return",Me.a.showMessage("Vui lòng chọn bộ phận hoặc vị trí để lọc hoặc bài kiểm tra"));case 3:return e.multipleQuestions=[],e.originalMultiQuestions=[],t&&(e.listMultipleQuestionSelected=[]),i.abrupt("return",0);case 7:return"normal"===n&&(e.pageMultiple=1),s={limit:e.limit,page:e.pageMultiple,form:"multiple_choice"},e.filter.department_id&&(s.department_ids=e.filter.department_id.split(",")),e.filter.position_id&&(s.position_ids=e.filter.position_id.split(",")),e.filter.test_id&&(s.period_test_id=e.filter.test_id),e.filter.question_content&&(s.question_content=e.filter.question_content),i.prev=13,e.filterBefore=JSON.parse(sa()(e.filter)),e.loadingFilter=!0,i.next=18,wi(s);case 18:(r=i.sent).data.success?(e.listPositionBefore=e.filter.position_id?JSON.parse(sa()(e.filter.position_id)).split(","):[],e.listDepartmentBefore=e.filter.department_id?JSON.parse(sa()(e.filter.department_id)).split(","):[],e.idTestFilter=e.filter.test_id?JSON.parse(sa()(e.filter.test_id)):null,e.contentQuestionBefore=e.filter.question_content||"",l=r.data.data.questions,c=e.listMultipleQuestionSelected.map(function(t){return t.id}),d=l.filter(function(t){return!c.includes(+t.id)}),e.totalNumberMultiple=+r.data.data.total,e.isLoadMultipleQuestionMore=!1,"scroll"===n?e.multipleQuestions=e.multipleQuestions.concat(d):(e.multipleQuestions=d,"normal"===n&&0===e.multipleQuestions.length&&l.length>0&&e.listMultipleQuestionSelected.length>=l.length&&(l.length<+r.data.data.total&&(u=0,JSON.parse(sa()(e.listMultipleQuestionSelected)).forEach(function(t){(e.listDepartmentBefore.includes(String(t.department_id))||e.listPositionBefore.includes(String(t.position_id))||e.idTestFilter&&+e.idTestFilter==+t.test_id)&&u++}),e.messageLoadMultiple="Hiện tại bạn đã chọn "+u+"/"+ +r.data.data.total+" câu cho các bộ phận, vị trí đang lọc.",e.pageMultiple=Math.floor(u/e.limit),u!==+r.data.data.total&&(e.isLoadMultipleQuestionMore=!0)),l.length===+r.data.data.total&&(e.messageLoadMultiple="Bạn đã chọn tất cả "+l.length+"/"+ +r.data.data.total+" câu cho các bộ phận, vị trí đang lọc.",e.isLoadMultipleQuestionMore=!1)),e.currentNumberMultiple=0,document.querySelector("#scroll_multiple").scrollTop=0),e.isLimitMultiple=+r.data.data.total===e.multipleQuestions.length||0===l.length||l.length<e.limit,e.allMultiQuestion=!1,0===l.length&&Me.a.showMessage("Chưa có câu hỏi cho vị trí đang tìm kiếm","warning")):Me.a.showMessage(r.message||"Có lỗi khi lấy danh sách câu hỏi","warning"),i.next=25;break;case 22:i.prev=22,i.t0=i.catch(13),Me.a.showMessage("Có lỗi xảy ra!","error");case 25:return i.prev=25,e.loadingFilter=!1,e.$forceUpdate(),i.finish(25);case 29:case"end":return i.stop()}},i,e,[[13,22,25,29]])}))()},checkNoChangeFilter:function(){var t=this.listDepartmentBefore.join(",")||"",e=this.listPositionBefore.join(",")||"",a=this.idTestFilter?this.idTestFilter:"",n=this.contentQuestionBefore||"",i=this.filter.department_id||"",s=this.filter.position_id||"",o=this.filter.test_id||"",r=this.filter.question_content||"";return t===i&&(e===s&&(a===o&&n===r))},resetDataModal:function(){this.listMultipleQuestionSelected=[],this.listMultipleQuestion=[],this.multipleQuestions=[],this.totalNumberMultiple=0,this.stepCurrent=1,this.currentNumberMultiple=0,this.totalNumberMultiple=0,this.allMultiQuestion=!1,this.isEditQuiz=!1,this.listPositionBefore=[],this.listDepartmentBefore=[],this.isLimitMultiple=!1,this.pageMultiple=1,this.isLoadMultipleQuestionMore=!1,this.messageLoadMultiple=""},getListQuestionByQuestionIds:function(t){var e=this;this.loading=!0,gd({question_id:t}).then(function(t){t.data.success?(e.questions=t.data.data,e.listMultipleQuestionSelected=JSON.parse(sa()(e.questions))):Me.a.showMessage(t.data.message||"Gặp lỗi khi lấy thông tin bài kiểm tra !","warning")}).catch(function(t){console.log(t)}).finally(function(){e.loading=!1})},handleNextStep:function(){if(0===this.listMultipleQuestionSelected.length)return Me.a.showMessage("Vui lòng chọn ít nhất 1 câu hỏi cho bài kiểm tra!","warning");var t=this.listMultipleQuestionSelected.map(function(t){return t.id});this.getListQuestionByQuestionIds(t),this.stepCurrent++},handleBack:function(){0===this.listMultipleQuestionSelected.length&&(this.allMultiQuestion=!1),this.stepCurrent--},resetDataLoadQuestion:function(){this.isLoadMultipleQuestionMore=!1,this.messageLoadMultiple=""},handleEducationTestSelected:function(t){this.filter.test_id=t?String(t.id):"",this.resetDataLoadQuestion()},handleDepartmentSelected:function(t){null!==t&&(Array.isArray(t)||(t=[t])),this.filter.department_id=t?t.map(function(t){return t.id}).toString():"",this.resetDataLoadQuestion()},handlePositionSelected:function(t){null!==t&&(Array.isArray(t)||(t=[t])),this.filter.position_id=t?t.map(function(t){return t.id}).toString():"",this.resetDataLoadQuestion()},changeFilterQuestionContent:function(){this.resetDataLoadQuestion()},handleChoiceQuestion:function(t,e){this.multipleQuestions.splice(t,1),this.listMultipleQuestionSelected.push(e),this.currentNumberMultiple++,this.isLoadMultipleQuestionMore=!1},handleUnChoice:function(t,e){this.messageLoadMultiple="",this.listMultipleQuestionSelected.splice(t,1),0!==this.currentNumberMultiple&&this.currentNumberMultiple--,(this.listDepartmentBefore.includes(String(e.department_id))||this.listPositionBefore.includes(String(e.position_id))||this.idTestFilter&&+this.idTestFilter==+e.test_id)&&(this.multipleQuestions=[e].concat(d()(this.multipleQuestions)))},handleSelectAll:function(t){var e=this;(this.messageLoadMultiple="",t)?(this.listMultipleQuestionSelected=[].concat(d()(this.listMultipleQuestionSelected),d()(this.multipleQuestions)),this.currentNumberMultiple=this.multipleQuestions.length+this.currentNumberMultiple,this.multipleQuestions=[],this.currentNumberMultiple<this.totalNumberMultiple&&this.checkNoChangeFilter()&&0!==this.currentNumberMultiple&&!this.isLimitMultiple&&(this.isLoadMultipleQuestionMore=!0),document.querySelector("#scroll_multiple").scrollTop=0):(JSON.parse(sa()(this.listMultipleQuestionSelected)).forEach(function(t){(e.listDepartmentBefore.includes(String(t.department_id))||e.listPositionBefore.includes(String(t.position_id))||e.idTestFilter&&+e.idTestFilter==+t.test_id)&&e.multipleQuestions.push(t)}),this.listMultipleQuestionSelected=[],this.currentNumberMultiple=0,this.isLoadMultipleQuestionMore=!1)},submitQuizzes:function(){var t=this,e=this.listMultipleQuestionSelected.map(function(t){return{id:t.id}}),a=[],n=[],i=this.listMultipleQuestionSelected.map(function(t){return t.id});if(i=i.reduce(function(t,e){return-1===t.indexOf(e)&&t.push(e),t},[]),Me.a.isEmpty(e))return Me.a.showMessage("Vui lòng chọn ít nhất 1 câu hỏi trước khi xác nhận!");var s;n=(n=i.filter(function(e){return!t.listQuestionBefore.includes(e)})).reduce(function(t,e){return-1===t.indexOf(e)&&t.push(e),t},[]),"edit"===this.type&&(a=this.listQuestionBefore.filter(function(t){return!i.includes(t)&&!n.includes(t)})),s={dataMulEditNew:this.listMultipleQuestionSelected,dataQuestionBefore:JSON.parse(sa()(this.listQuestionBefore))},this.$emit("action",{action:"submit-quiz",questions:i,addQuestion:n,deleteQuestion:a,dataStorage:s})}}};var _d=function(t){a("sv5i")},bd=Object(y.a)(vd,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap-cus"},[1==+t.stepCurrent?a("div",{staticClass:"container-cus step-1"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-2 lesson-quiz small-scrollbar test-left"},[t._m(0),t._v(" "),a("div",{staticClass:"row mt-3 mr-1 ml-1"},[a("label",{staticClass:"col-md-4 mt-2 text-left text-black"},[t._v("Bô phận")]),t._v(" "),a("multi-select-department",{staticClass:"col-md-8 p-0 multiselect-ghtk multiselect-no-horizontal z-5",attrs:{"auto-close":!0,"is-multiple":!0,placeholder:"Bộ phận","department-ids":t.filter.department_id},on:{handleDepartmentSelected:t.handleDepartmentSelected}})],1),t._v(" "),a("div",{staticClass:"row mt-3 mr-1 ml-1"},[a("label",{staticClass:"col-md-4 mt-2 text-left text-black"},[t._v("Vị trí")]),t._v(" "),a("MultiSelectPosition",{staticClass:"col-md-8 p-0 multiselect-ghtk multiselect-no-horizontal",attrs:{"is-multiple":!0,"position-ids":t.filter.position_id,"department-ids":t.filter.department_id,"auto-close":!0,"hide-selected":!0,"exclude-department":[1],placeholder:"Vị trí"},on:{handlePositionSelected:t.handlePositionSelected}})],1),t._v(" "),a("div",{staticClass:"row mt-3 mr-1 ml-1"},[a("label",{staticClass:"col-md-4 mt-2 text-left text-black"},[t._v("Bài kiểm tra")]),t._v(" "),a("select-education-test-new",{staticClass:"col-md-8 p-0 multiselect-ghtk multiselect-no-horizontal",attrs:{test:t.filter.test_id,multiple:!1,placeholder:"Chọn bài kiểm tra"},on:{change:t.handleEducationTestSelected}})],1),t._v(" "),a("div",{staticClass:"row mt-3 mr-1 ml-1"},[a("label",{staticClass:"col-md-4 mt-2 text-left text-black"},[t._v("Nội dung câu hỏi")]),t._v(" "),a("b-form-input",{staticClass:"col-md-8",attrs:{placeholder:"Nhập nội dung câu hỏi"},on:{input:t.changeFilterQuestionContent},model:{value:t.filter.question_content,callback:function(e){t.$set(t.filter,"question_content",e)},expression:"filter.question_content"}})],1),t._v(" "),a("div",{staticClass:"row filter-cus"},[a("button",{staticClass:"btn btn-ghtk btn-md rounded btn-filter",attrs:{disabled:t.loadingFilter},on:{click:t.getListQuestions}},[a("i",{staticClass:"ion ion-ios-funnel"}),t._v("Lọc\n          "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.loadingFilter,expression:"loadingFilter"}],staticClass:"fas fa-spinner fa-pulse spinner-filter"})])]),t._v(" "),a("div",{staticClass:"row mt-3 mr-1 ml-3"},[a("div",{staticClass:"col-md-8 px-0 py-2"},[t._v("Chọn câu hỏi bài kiểm tra: "+t._s(t.currentNumberMultiple+"/"+t.totalNumberMultiple))]),t._v(" "),a("b-form-checkbox",{staticClass:"col-md-4 ghtk-checkbox text-ghtk cursor-pointer mt-2",attrs:{indeterminate:t.indeterminate,"aria-describedby":"testQuestions","aria-controls":"testQuestions"},on:{change:t.handleSelectAll},model:{value:t.allMultiQuestion,callback:function(e){t.allMultiQuestion=e},expression:"allMultiQuestion"}},[t._v("\n          "+t._s(t.allMultiQuestion?"Bỏ chọn tất cả":"Chọn tất cả")+"\n        ")])],1),t._v(" "),a("div",{ref:"multiple_ref",staticClass:"checkbox-cus ml-3",attrs:{id:"scroll_multiple"},on:{scroll:t.onScrollMultiple}},[t._l(t.multipleQuestions,function(e,n){return a("div",{key:n,staticClass:"mb-2",attrs:{id:String(e.id)}},[a("span",{staticClass:"cursor-pointer question-icon",on:{click:function(a){return t.handleChoiceQuestion(n,e)}}},[a("i",{staticClass:"ion ion-ios-square-outline"})]),t._v(" "),a("span",{staticClass:"question-content"},[t._v(t._s(e.content))])])}),t._v(" "),t.messageLoadMultiple.length>0?a("div",{staticClass:"load-question load-question-emtpy"},[t._v("\n          "+t._s(t.messageLoadMultiple)+"\n        ")]):t._e(),t._v(" "),t.isLoadMultipleQuestionMore?a("div",{staticClass:"load-question"},[a("button",{staticClass:"btn btn-ghtk btn-md rounded btn-load-more",on:{click:t.loadMore}},[t._v("\n            Xem thêm...\n          ")])]):t._e()],2)]),t._v(" "),a("div",{staticClass:"m-2 lesson-quiz small-scrollbar test-right"},[t._m(1),t._v(" "),t.listMultipleQuestionSelected.length>0?a("div",{staticClass:"multiple-question checkbox-cus"},[a("div",{staticClass:"list-question-choice"},t._l(t.listMultipleQuestionSelected,function(e,n){return a("div",{key:n,staticClass:"mb-2",attrs:{id:"selected_"+e.id}},[a("span",{staticClass:"cursor-pointer question-icon-selected",on:{click:function(a){return t.handleUnChoice(n,e)}}},[a("i",{staticClass:"ion ion-ios-checkbox"})]),t._v(" "),a("span",{staticClass:"question-content-selected"},[t._v(t._s(e.content))])])}),0)]):t._e()])]):t._e(),t._v(" "),2==+t.stepCurrent?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"container-cus step-2"},[a("div",{staticClass:"exam__element multiple-choice"},[a("div",{staticClass:"exam__element__content"},t._l(t.questions,function(e,n){return a("div",{staticClass:"question"},[a("div",{staticClass:"content"},[a("span",{staticClass:"question__content"},[t._v("Câu "+t._s(n+1)+": ")]),t._v(" "),a("span",{domProps:{innerHTML:t._s(t.formattedText(e.content))}})]),t._v(" "),t._l(e.answers,function(n,i){return a("div",{staticClass:"answers"},[a("div",{staticClass:"answer"},[n.is_correct?a("div",{staticClass:"checkbox-round",class:{"border-radius-ghtk-4":"multiple"===e.type}},[a("div",{staticClass:"checked correct",class:{"border-radius-ghtk-4":"multiple"===e.type}},["multiple"===e.type?a("div",{staticClass:"text-center text-white line-height-1-rem"},[t._v("✔")]):t._e()])]):a("div",{staticClass:"checkbox-round",class:{"border-radius-ghtk-4":"multiple"===e.type}}),t._v(" "),a("div",{staticClass:"answer-content"},[t._v("\n                "+t._s(String.fromCharCode(i+65)+". ")+" "),a("span",{domProps:{innerHTML:t._s(t.formattedText(n.content))}})])])])})],2)}),0)])]):t._e(),t._v(" "),a("div",{staticClass:"footer-cus"},[1==+t.stepCurrent?a("div",{staticClass:"text-center mt-4"},[a("button",{staticClass:"btn btn-ghtk btn-md rounded",on:{click:function(e){return t.handleNextStep()}}},[t._v("\n        Tiếp tục\n      ")])]):t._e(),t._v(" "),2==+t.stepCurrent?a("div",{staticClass:"text-center mt-4"},[a("button",{staticClass:"btn btn-outline-ghtk btn-md rounded btn-back",on:{click:function(e){return t.handleBack()}}},[t._v("\n        Quay lại\n      ")]),t._v(" "),a("button",{staticClass:"btn btn-ghtk btn-md rounded",on:{click:t.submitQuizzes}},[t._v("\n        Xác nhận\n      ")])]):t._e()])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"test-left-header"},[e("span",{staticClass:"title-step"},[this._v("LỌC CÂU HỎI")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"test-right-header"},[e("span",[this._v("Danh sách câu hỏi đã chọn")])])}],!1,_d,"data-v-ca0b3a52",null).exports,yd={props:{lectureId:{default:0},type:{default:"edit"},lessons:[]},components:{ModalHlsPlayer:Ja,EditPeriodDocuments:Qc.a,ModalQuiz:bd,draggable:fd.a},data:function(){return{fileResponse:null,showModalHls:!1,cdnLink:"",accept_file:["pdf","video","image","doc"],cur_lesson:{title:""},defaultLesson:{order_number:1,title:"",fileUrl:"",fileId:null,fileThumbnail:null,isEdit:!1,uploading:!1,progress:0,quiz:{isEdit:!1,delete_questions:[],add_questions:[],questions:[]}}}},watch:{},computed:{helper:function(){return Me.a},viewOnly:function(){return"view"===this.type}},methods:{getLinkFiles:function(t){var e=this;return l()(o.a.mark(function a(){var n,i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,(n={}).file_id=[t],a.next=5,Qa(n);case 5:(i=a.sent).data.success?e.fileResponse=i.data.data:Me.a.showMessage(i.data.message,"warning"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),Me.a.showMessage(a.t0.message,"warning");case 12:case"end":return a.stop()}},a,e,[[0,9]])}))()},action:function(t,e){var a=this;return l()(o.a.mark(function n(){var i,s;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("edit-period-docs"===t.action&&(e.uploadId=Me.a.generateUniqueId(),a.cur_lesson=e,a.$emit("action",{action:"edit-period-docs"},{cur_lesson:a.cur_lesson,lectureId:a.lectureId})),"delete-file"===t.action&&(a.cur_lesson=e,a.$emit("action",{action:"delete-file"},{cur_lesson:a.cur_lesson,lectureId:a.lectureId}),a.$emit("event-file-deleted",a.lessons[t.idx].fileId)),"open-link"!==t.action){n.next=17;break}return n.next=5,a.getLinkFiles(e.fileId);case 5:if(i=a.fileResponse[e.fileId],!(s=i.gdrive||i.direct||null)){n.next=16;break}if(!s.endsWith(".m3u8")){n.next=14;break}return a.cdnLink=s,a.showModalHls=!0,n.abrupt("return",!0);case 14:if("video"===i.type){n.next=16;break}return n.abrupt("return",window.open(s,"_blank"));case 16:Me.a.showMessage("Đang trong quá trình chuyển đổi tài liệu, bạn không thể xem tài liệu ngay lúc này!","warn");case 17:"view-quiz"===t.action&&(a.cur_lesson=e,a.$emit("action",{action:"view-quiz"},{cur_lesson:a.cur_lesson,lectureId:a.lectureId})),"edit-quiz"===t.action&&(a.cur_lesson=e,a.$emit("action",{action:"edit-quiz"},{cur_lesson:a.cur_lesson,lectureId:a.lectureId}));case 19:case"end":return n.stop()}},n,a)}))()},addByDefaultLesson:function(){var t=this.lessons.length;this.defaultLesson.order_number=++t,""!==this.defaultLesson.title&&(this.defaultLesson.title=""),this.cur_lesson=JSON.parse(sa()(this.defaultLesson)),this.action({action:"edit-period-docs"},this.cur_lesson)},addTitlleByDefaultLesson:function(t){if(""!==this.defaultLesson.title){var e=this.lessons.length;this.defaultLesson.order_number=++e,this.lessons.push(JSON.parse(sa()(this.defaultLesson))),this.defaultLesson.title=""}},addQuizByDefaultLesson:function(){Me.a.showMessage("Khối tài liệu có Câu hỏi bắt buộc phải có Tiêu đề, File đính kèm.  Bạn vui lòng kiểm tra lại !","warning")},removeAt:function(t){var e=this.lessons[t].hasOwnProperty("id")?this.lessons[t].id:null;this.$emit("event-file-deleted",this.lessons[t].fileId),this.lessons.splice(t,1),this.reorder(),this.$emit("action",{action:"delete-doc"},{lessons:this.lessons,lectureId:this.lectureId,idLessonDelete:e})},onChange:function(t){this.reorder()},reorder:function(){this.lessons.forEach(function(t,e){return t.order_number=e+1})},updateTitileLesson:function(t){var e=this;if(this.cur_lesson=this.lessons.find(function(e){return e.order_number===t}),this.cur_lesson.isEdit=!0,this.cur_lesson.isEdit){var a="textarea-lesson-title-"+this.lectureId+"-"+t;this.$nextTick(function(){return e.$refs[a][0].focus()})}},updateTitleLesson:function(t){this.cur_lesson.isEdit=!1},previewImageRender:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Me.a.isEmpty(t)?"":"doc"===e?"https://gs.giaohangtietkiem.vn/d/e24bec4ee88441bdb3e79466dd541152.png?height=250":"pdf"===e?"https://gs.giaohangtietkiem.vn/d/d7d5ef9e764e4227b7aef2c11dfd1371.pngheight=250":t},getUrl:function(t){return Me.a.isEmpty(t)?null:"string"==typeof t?t:URL.createObjectURL(t)}}};var Cd=function(t){a("/8Ad")},wd=Object(y.a)(yd,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-10 text-center m-0 p-0"},[a("draggable",{staticClass:"col-md-12 row text-center m-0 p-0",attrs:{draggable:".item"},on:{change:t.onChange},model:{value:t.lessons,callback:function(e){t.lessons=e},expression:"lessons"}},[t._l(t.lessons,function(e,n){return a("b-card",{key:"lesson-"+t.lectureId+"-"+n,staticClass:"col-sm-12 col-md-4 col-lg-4 col-xl-3 shadow-sm rounded item mb-2 ml-0 mr-3 mt-2"},[a("span",{staticClass:"button-close cursor-pointer text-danger",on:{click:function(e){return t.removeAt(n)}}},[a("i",{staticClass:"fa fa-times-circle fa-lg",attrs:{"aria-hidden":"true"}})]),t._v(" "),a("div",{staticClass:"position-relative thumbnail__element",class:e.fileThumbnail?"preview-active":"preview-disable"},[e.fileThumbnail?a("div",[a("img",{staticClass:"mw-100 document-preview",attrs:{src:t.previewImageRender(e.fileThumbnail),alt:""}})]):t._e(),t._v(" "),e.fileThumbnail&&!e.uploading?a("div",{staticClass:"document-extend mb-1"},[a("span",{staticClass:"action-document cursor-pointer d-inline-flex mb-1",on:{click:function(a){return t.action({action:"open-link"},e)}}},[a("i",{staticClass:"far fa-eye font-10 text-ghtk"}),t._v(" "),a("span",{staticClass:"text-ghtk"},[t._v("Xem")])]),t._v(" "),a("span",{staticClass:"action-document cursor-pointer d-inline-flex mt-1 mb-1",on:{click:function(a){return t.action({action:"edit-period-docs",idx:n},e)}}},[a("i",{staticClass:"fas fa-pencil-alt text-ghtk"}),t._v(" "),a("span",{staticClass:"text-ghtk"},[t._v("Thay thế")])]),t._v(" "),a("span",{staticClass:"action-document text-danger cursor-pointer d-inline-flex mt-1",on:{click:function(a){return t.action({action:"delete-file",idx:n},e)}}},[a("i",{staticClass:"fa fa-trash-alt"}),t._v(" "),a("span",[t._v("Xóa")])])]):e.uploading?a("div",{class:e.fileThumbnail?"progress-extend mb-1":"file-label-inner"},[a("b-progress",{staticClass:"progress-lesson",attrs:{value:e.progress,max:100,"show-progress":"",animated:"",variant:"success"}}),t._v(" "),a("b",{staticClass:"file-description"},[t._v("Đang upload file")])],1):a("div",{staticClass:"file-label-inner",on:{click:function(a){return t.action({action:"edit-period-docs"},e)}}},[a("i",{staticClass:"fas fa-plus file-icon"}),t._v(" "),a("b",{staticClass:"file-description"},[t._v("Tài liệu học")])])]),t._v(" "),a("div",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:e.order_number+". "+e.title,expression:"`${lesson.order_number + '. ' + lesson.title}`",modifiers:{hover:!0,top:!0}}],staticClass:"text-truncate w-100 border-bottom border-success mt-2",class:e.isEdit?"d-none":"d-inline-block",on:{click:function(a){return t.updateTitileLesson(e.order_number)}}},[t._v("\n        "+t._s(""===e.title?"Vui lòng chọn để nhập tiêu đề":e.order_number+". "+e.title)+"\n      ")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"lesson.title"}],ref:"textarea-lesson-title-"+t.lectureId+"-"+e.order_number,refInFor:!0,staticClass:"mt-1 rounded text-center w-100 p-0",class:e.isEdit?"d-inline-block":"d-none",attrs:{placeholder:"Nhập tiêu đề tài liệu",maxlength:"70"},domProps:{value:e.title},on:{focusout:t.updateTitleLesson,input:function(a){a.target.composing||t.$set(e,"title",a.target.value)}}}),t._v(" "),t.helper.isEmpty(e.quiz.questions)?a("button",{staticClass:"mt-1 btn btn-outline-ghtk text-center rounded w-100",class:t.helper.isEmpty(e.title)||t.helper.isEmpty(e.fileId)?"disable-button":"",attrs:{disabled:t.helper.isEmpty(e.title)||t.helper.isEmpty(e.fileId)},on:{click:function(a){return t.action({action:"edit-quiz"},e)}}},[a("i",{staticClass:"fas fa-plus pt-1"}),a("span",[t._v(" Câu hỏi")])]):a("button",{staticClass:"mt-1 btn btn-outline-ghtk text-center rounded w-100",on:{click:function(a){return t.action({action:"view-quiz"},e)}}},[a("span",[t._v("Xem câu hỏi")])])])}),t._v(" "),"view"!==t.type?a("b-card",{staticClass:"col-sm-12 col-md-4 col-lg-4 col-xl-3 shadow-sm rounded mb-2 ml-0 mr-2 mt-2",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"position-relative cursor-pointer preview-disable",on:{click:t.addByDefaultLesson}},[a("div",{staticClass:"file-label-inner"},[a("i",{staticClass:"fas fa-plus file-icon"}),t._v(" "),a("b",{staticClass:"file-description"},[t._v("Tài liệu học")])])]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.defaultLesson.title,expression:"defaultLesson.title"}],staticClass:"mt-1 rounded text-center w-100 p-0",attrs:{placeholder:"Nhập tiêu đề tài liệu",maxlength:"70"},domProps:{value:t.defaultLesson.title},on:{focusout:t.addTitlleByDefaultLesson,input:function(e){e.target.composing||t.$set(t.defaultLesson,"title",e.target.value)}}}),t._v(" "),a("button",{staticClass:"mt-1 btn btn-outline-ghtk text-center rounded w-100 disable-button",attrs:{disabled:""}},[a("i",{staticClass:"fas fa-plus pt-1"}),a("span",[t._v(" Câu hỏi")])])]):t._e()],2),t._v(" "),a("ModalHlsPlayer",{attrs:{"cdn-link":t.cdnLink,showModal:t.showModalHls},on:{hide:function(e){t.showModalHls=!1}}}),t._v(" "),t._m(0)],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"float-left"},[e("i",{staticClass:"fa fa-info-circle text-ghtk",attrs:{"aria-hidden":"true"}}),this._v(" "),e("b",{staticClass:"text-ghtk"},[this._v("Khuyến nghị")]),this._v(": Bạn nên upload tài liệu dạng video trong khoảng thời gian trước 10:00h hoặc sau 18:00h")])}],!1,Cd,"data-v-736007aa",null).exports,kd={name:"ModalDetailTest",components:{},props:{tpPeriodId:{default:function(){return null}}},data:function(){return{loading:!1,data:[]}},created:function(){},computed:{},watch:{},methods:{formattedText:function(t){return t?t.replace(/\n/g,"</br>"):""},getData:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.loading=!0,ca.a.getPeriodTest({tp_period_id:t.tpPeriodId}).then(function(e){e.data.success?t.data=e.data.data:Me.a.showMessage(e.data.message||"Gặp lỗi khi lấy thông tin bài kiểm tra !","warning")}).catch(function(t){console.log(t)}).finally(function(){t.loading=!1});case 2:case"end":return e.stop()}},e,t)}))()},hideModal:function(){this.data=[],this.$bvModal.hide("modal-add-student")}}};var xd=function(t){a("Jg0L")},Sd=Object(y.a)(kd,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{class:"modal-custom",attrs:{id:"modal-detail-test",title:"Bài kiểm tra","header-class":"justify-content-center header-modal-custom",size:"xl","hide-footer":""},on:{hidden:t.hideModal,shown:t.getData}},[a("div",{staticClass:"wrapper exam"},[t.data.multiple_choice&&t.data.multiple_choice.questions&&t.data.multiple_choice.questions.length>0?a("div",{staticClass:"exam__element multiple-choice"},[a("div",{staticClass:"exam__element__title"},[a("div",{staticClass:"title"},[t._v("Phần trắc nghiệm")])]),t._v(" "),a("div",{staticClass:"exam__element__content"},t._l(t.data.multiple_choice.questions,function(e,n){return a("div",{staticClass:"question"},[a("div",{staticClass:"content"},[a("span",{staticClass:"question__content"},[t._v("Câu "+t._s(n+1)+": ")]),t._v(" "),a("span",{domProps:{innerHTML:t._s(t.formattedText(e.content))}})]),t._v(" "),t._l(e.answers,function(n,i){return a("div",{staticClass:"answers"},[a("div",{staticClass:"answer"},[n.is_correct?a("div",{staticClass:"checkbox-round",class:{"border-radius-ghtk-4":"multiple"===e.type}},[a("div",{staticClass:"checked correct",class:{"border-radius-ghtk-4":"multiple"===e.type}},["multiple"===e.type?a("div",{staticClass:"text-center text-white line-height-1-rem"},[t._v("✔")]):t._e()])]):a("div",{staticClass:"checkbox-round",class:{"border-radius-ghtk-4":"multiple"===e.type}}),t._v(" "),a("div",{staticStyle:{display:"inline-block","padding-left":"5px"}},[t._v("\n                                  "+t._s(String.fromCharCode(i+65)+". ")+" "),a("span",{domProps:{innerHTML:t._s(t.formattedText(n.content))}})])])])})],2)}),0)]):t._e(),t._v(" "),t.data.essay&&t.data.essay.questions&&t.data.essay.questions.length>0?a("div",{staticClass:"exam__element essay"},[a("div",{staticClass:"exam__element__title"},[a("div",{staticClass:"title"},[t._v("Phần tự luận")])]),t._v(" "),a("div",{staticClass:"exam__element__content"},t._l(t.data.essay.questions,function(e,n){return a("div",{staticClass:"question"},[a("div",{staticClass:"content"},[a("span",{staticClass:"question__content"},[t._v("Câu "+t._s(n+1)+": ")]),t._v(" "),a("span",{domProps:{innerHTML:t._s(t.formattedText(e.content))}})]),t._v(" "),a("div",{staticClass:"answer"},[a("span",{domProps:{innerHTML:t._s(t.formattedText(e.answer))}})])])}),0)]):t._e()])])],1)},[],!1,xd,"data-v-644008f1",null).exports,Md={name:"ModalDetailQuiz",components:{},props:{quiz:{default:function(){return null}}},data:function(){return{loading:!1,data:{}}},created:function(){},computed:{},watch:{},methods:{formattedText:function(t){return t?t.replace(/\n/g,"</br>"):""},getData:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.loading=!0,gd({question_id:t.quiz.questions}).then(function(e){e.data.success?t.data=e.data.data:Me.a.showMessage(e.data.message||"Gặp lỗi khi lấy thông tin bài kiểm tra !","warning")}).catch(function(t){console.log(t)}).finally(function(){t.loading=!1});case 2:case"end":return e.stop()}},e,t)}))()},cancelDelete:function(){this.$refs.modalDelete.hide()},confirmDelete:function(){this.$refs.modalDelete.hide(),this.$emit("action",{action:"delete-quiz-from-detail"})}}};var Td=function(t){a("S7x4")},Dd=Object(y.a)(Md,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{class:"modal-custom",attrs:{id:"modal-detail-quiz",title:"Xem câu hỏi","header-class":"justify-content-center header-modal-custom",size:"xl","hide-footer":""},on:{shown:t.getData}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"wrapper exam"},[a("div",{staticClass:"exam__element multiple-choice"},[a("div",{staticClass:"exam__element__content"},t._l(t.data,function(e,n){return a("div",{staticClass:"question"},[a("div",{staticClass:"content"},[a("span",{staticClass:"question__content"},[t._v("Câu "+t._s(n+1)+": ")]),t._v(" "),a("span",{domProps:{innerHTML:t._s(t.formattedText(e.content))}})]),t._v(" "),t._l(e.answers,function(n,i){return a("div",{staticClass:"answers"},[a("div",{staticClass:"answer"},[n.is_correct?a("div",{staticClass:"checkbox-round",class:{"border-radius-ghtk-4":"multiple"===e.type}},[a("div",{staticClass:"checked correct",class:{"border-radius-ghtk-4":"multiple"===e.type}},["multiple"===e.type?a("div",{staticClass:"text-center text-white line-height-1-rem"},[t._v("✔")]):t._e()])]):a("div",{staticClass:"checkbox-round",class:{"border-radius-ghtk-4":"multiple"===e.type}}),t._v(" "),a("div",{staticClass:"answer-content"},[t._v("\n                      "+t._s(String.fromCharCode(i+65)+". ")+" "),a("span",{domProps:{innerHTML:t._s(t.formattedText(n.content))}})])])])})],2)}),0)])]),t._v(" "),a("div",[a("div",{staticClass:"text-center mt-4"},[a("button",{staticClass:"btn btn-outline-ghtk btn-md rounded btn-edit-position",on:{click:function(e){return t.$emit("action",{action:"update-quiz"})}}},[t._v("\n              Chỉnh sửa\n            ")]),t._v(" "),a("button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-delete",modifiers:{"modal-delete":!0}}],staticClass:"btn btn-outline-danger btn-md rounded"},[t._v("\n              Xóa\n            ")])])])]),t._v(" "),a("b-modal",{ref:"modalDelete",attrs:{id:"modal-delete",size:"sm","header-class":"justify-content-center header-modal-custom",title:"Xóa tất cả câu hỏi","hide-header-close":"","hide-footer":""}},[a("div",[a("p",{staticClass:"text-center"},[t._v("Bạn có chắc chắn xóa tất cả Câu hỏi?")]),t._v(" "),a("div",{staticClass:"text-center mt-4 d-flex justify-content-sm-around"},[a("button",{staticClass:"btn btn-outline-danger btn-md rounded col-4",on:{click:t.cancelDelete}},[t._v("\n            Hủy\n          ")]),t._v(" "),a("button",{staticClass:"btn btn-outline-ghtk btn-md rounded col-4",on:{click:t.confirmDelete}},[t._v("\n            Xác nhận\n          ")])])])])],1)},[],!1,Td,"data-v-7eea7f6d",null).exports,Id=a("oLnp"),Pd=a.n(Id);Pd.a.autoDiscover=!1;var Ed=function(t){function e(){return Un()(this,e),Hn()(this,(e.__proto__||Nn()(e)).apply(this,arguments))}return jn()(e,t),zo()(e,[{key:"uploadFiles",value:function(t){var e=this;this._transformFiles(t,function(a){if(e.options.chunking){var n=a[0];t[0].upload.chunked=e.options.chunking&&(e.options.forceChunking||n.size>e.options.chunkSize),t[0].upload.totalChunkCount=Math.ceil(n.size/e.options.chunkSize)}if(t[0].upload.chunked){var i=t[0],s=a[0];i.upload.chunks=[];var o=function(){for(var a=0;void 0!==i.upload.chunks[a];)a++;if(!(a>=i.upload.totalChunkCount)){0;var n=a*e.options.chunkSize,o=Math.min(n+e.options.chunkSize,s.size),r={name:e._getParamName(0),data:s.webkitSlice?s.webkitSlice(n,o):s.slice(n,o),filename:i.upload.filename,chunkIndex:a};i.upload.chunks[a]={file:i,index:a,dataBlock:r,status:Pd.a.UPLOADING,progress:0,retries:0},e._uploadData(t,[r])}},r=function(){var t=i.upload.chunks[0];if(e.options.parallelChunkUploads&&t){if(t.status===Pd.a.UPLOADING)return;var a=void 0;a=!0===e.options.parallelChunkUploads?e.options.parallelUploads:parseInt(e.options.parallelChunkUploads),a=Math.min(a,i.upload.totalChunkCount);var n=i.upload.chunks.filter(function(t){return t.status===Pd.a.SUCCESS}).length,s=i.upload.chunks.filter(function(t){return t.status===Pd.a.UPLOADING}).length,r=i.upload.totalChunkCount-(s+n);if(1===r&&s>0)return;for(;r>0&&s<a&&(o(),s++,1!=--r););}else o()};i.upload.finishedChunkUpload=function(a,n){var s=!0;a.status=Pd.a.SUCCESS,a.response=n,a.dataBlock=null,a.xhr=null;for(var o=0;o<i.upload.totalChunkCount;o++){if(void 0===i.upload.chunks[o])return r();i.upload.chunks[o].status!==Pd.a.SUCCESS&&(s=!1)}s&&e.options.chunksUploaded(i,function(){e._finished(t,n,null)})},o()}else{for(var l=[],c=0;c<t.length;c++)l[c]={name:e._getParamName(c),data:a[c],filename:t[c].upload.filename};e._uploadData(t,l)}})}}]),e}(Pd.a),Ld=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=ad()({},{method:"post",filesizeBase:1024,maxFilesize:104857600,addRemoveLinks:!0,chunking:!0,chunkSize:5242880,parallelChunkUploads:20,retryChunks:!0,retryChunksLimit:3,disablePreviews:!0,autoProcessQueue:!0},e);return new Ed(t,a)},Ad={name:"LessonFileDropzone",props:{triggerUpload:{type:Boolean,default:!1},lectureId:{type:Number,default:0},cur_lesson:{},maxFileSizeMB:{type:Number,default:500},minChunkSizeMB:{type:Number,default:10},maxChunkSizeMB:{type:Number,default:50},maxUploadBodySizeMB:{type:Number,default:100},maxChunksPerFile:{type:Number,default:200}},data:function(){return{accept:["video","image","pdf"],dropzone:null}},created:function(){},mounted:function(){this.dropzone=Ld(this.$refs.dropzoneElement,{url:N.a.baseApiHrmUniUrl+"/education/api/tp/lessons/docs/upload",maxFilesize:this.maxFileSize,chunkSize:this.maxChunkSize}),this.dropzone.on("sending",this.onDzUploadFile),this.dropzone.on("uploadprogress",this.onDzUploadProgress),this.dropzone.on("success",this.onDzSuccess),this.dropzone.on("error",this.onDzError),this.dropzone.on("queuecomplete",this.onDzQueueComplete)},computed:{helper:function(){return Me.a},maxUploadBodySize:function(){return this.mbToByte(this.maxUploadBodySizeMB)},maxFileSize:function(){return this.mbToByte(this.maxFileSizeMB)},minChunkSize:function(){return this.mbToByte(this.minChunkSizeMB)},maxChunkSize:function(){return this.maxChunkSizeMB?this.mbToByte(this.maxChunkSizeMB):this.maxUploadBodySize}},watch:{triggerUpload:function(){this.$refs.selectFileInput.click()}},methods:{onDzUploadFile:function(t,e,a){a.append("type",Me.a.getTypeFile(t.type)),t.upload.chunked?e.open("POST",N.a.baseApiHrmUniUrl+"/education/api/tp/lessons/docs/upload-chunk",!0):e.open("POST",N.a.baseApiHrmUniUrl+"/education/api/tp/lessons/docs/upload",!0),e.setRequestHeader(this.getHeaderRequest(),this.helper.getToken())},getHeaderRequest:function(){return Me.a.isInIframe()?"GchatToken":"Authorization"},onDzUploadProgress:function(t,e,a){this.$emit("actionUploadLesson",{action:"upload-progress"},{lectureId:t.lectureId,lessonUploadId:t.lessonUploadId,progress:e})},onDzSuccess:function(t,e,a){e.is_finished?(this.$refs.selectFileInput.value="",t.file_id=e.data.id,t.storage=e.data.storage,t.file_type=e.data.type,e.data.path?(t.links=e.data.links,t.metadata=e.data.metadata):(t.links=[],t.metadata=[],Me.a.showMessage("Đang trong quá trình chuyển đổi tài liệu, bạn không thể xem tài liệu ngay lúc này!","warn")),this.$emit("actionUploadLesson",{action:"upload-file-success"},t)):e.success||Me.a.showMessage(e.message)},onDzError:function(t,e,a){switch(a.status){case 401:this.handError(a,e)}t.error={response:e,xhr:a},this.$refs.selectFileInput.value="",this.$emit("actionUploadLesson",{action:"upload-file-error"},t)},onDzQueueComplete:function(){this.$emit("actionUploadLesson",{action:"upload-all-file-success"})},handError:function(t,e){var a=this;return l()(o.a.mark(function n(){var i,s,r,l,c,d,u;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(i=new v.a("local"),s=new v.a("session",!1),r=1109,!(e.code===r||e.errors&&e.errors.includes(r))){a.next=6;break}return a.next=6,O.a.refreshToken();case 6:if(l=O.a.getToken(),c=0,!l||0!==c){a.next=14;break}return++c,t.config.headers.GchatToken=l,a.abrupt("return",ml.a.request(t.config));case 14:if((d=s.get("isReload"))&&"false"!==d){a.next=26;break}return i.remove(N.a.oidc.tokenIamStorage),s.set("isReload",!0),u=Object(A.a)(N.a.oidc),a.prev=19,a.next=22,u.run(window.location.href);case 22:a.next=26;break;case 24:a.prev=24,a.t0=a.catch(19);case 26:case"end":return a.stop()}},n,a,[[19,24]])}))()},onSelectFile:function(){if(this.$refs.selectFileInput.files.length){var t=this.$refs.selectFileInput.files.item(0);if(t){var e=this.helper.getFileType(t);if(!this.accept.includes(e))return void Me.a.showMessage("Vui lòng tải file đúng định dạng PDF, Video, Ảnh!","warning");if("video"===e&&t.size>this.maxFileSize)return void Me.a.showMessage("Dung lượng tối đa của file tài liệu dạng video là 500MB. Bạn vui lòng thử lại!","warning");if("video"!==e&&t.size>this.maxUploadBodySize)return void Me.a.showMessage("Dung lượng tối đa của file tài liệu văn bản là 100MB. Bạn vui lòng thử lại!","warning")}this.dropzone.options.chunkSize=this.calculateChunkSize(t.size),t.lectureId=this.lectureId,t.lessonUploadId=this.cur_lesson.uploadId,this.$emit("actionUploadLesson",{action:"start-upload"},t),this.dropzone.addFile(t)}},byteToMB:function(t){return t/1024/1024},mbToByte:function(t){return 1024*t*1024},calculateChunkSize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.maxChunksPerFile||100,a=this.minChunkSize,n=Math.ceil(t/a);if(t>this.minChunkSize){for(;n>e&&a<this.maxChunkSize;)a*=2,n=Math.ceil(t/a);a>this.maxChunkSize&&(a=this.maxChunkSize)}return a}}};var Od=function(t){a("FgI/")},Nd={name:"edit-period",data:function(){return{accept_file:["pdf","video","image","doc"],loading:!1,test_pdf:null,cur_lecture:{name:"",files:[]},cur_lectureId:null,cur_lesson:{title:""},defaultQuiz:{isEdit:!1,delete_questions:[],add_questions:[],questions:[]},trigger:{get_quiz:!1,get_question:!1,reset_test_data:!1,upload:!1},test:!1,tpPeriodId:null}},components:{LessonFileDropzone:Object(y.a)(Ad,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{hidden:"hidden"}},[e("div",{ref:"dropzoneElement",staticClass:"dropzone"}),this._v(" "),e("input",{ref:"selectFileInput",attrs:{type:"file",accept:"application/pdf, video/*, image/*"},on:{change:this.onSelectFile}})])},[],!1,Od,"data-v-1bbf4e40",null).exports,ModalDetailQuiz:Dd,ModalQuiz:bd,EditPeriodDocuments:Qc.a,InputLesson:wd,CheckboxCustom:pd,MultiSelectPosition:be.a,PeriodTest:ud,PeriodTestBuilder:li,ModalDetailTest:Sd},props:{lectures:{type:Array,default:function(){return[]}},type:{default:"edit"},syllabus:{default:function(){}}},computed:{helper:function(){return Me.a},viewOnly:function(){return"view"===this.type}},watch:{"syllabus.code":function(t){this.lectures.map(function(e){e.test.code=[t,e.content].filter(function(t){return t}).join(" - ")}),this.$forceUpdate()}},methods:{showModalDetailTest:function(t){this.tpPeriodId=t,this.$bvModal.show("modal-detail-test")},actionUploadLesson:function(t,e){if("upload-all-file-success"!==t.action){var a=this.lectures[this.cur_lectureId].lessons.find(function(t){return t.uploadId===e.lessonUploadId});if(a)switch(t.action){case"start-upload":a.progress=0,a.uploading=!0,this.$emit("disableSubmit",!0);break;case"upload-progress":a.progress=0;break;case"upload-file-success":a.fileId=e.file_id,"gdrive"===e.storage?a.fileUrl=e.links.gdrive:a.fileUrl=e.links.direct,e.links.thumbnail?a.fileThumbnail=e.links.thumbnail:a.fileThumbnail="image"===e.file_type?e.links.direct:Da.DEFAULT_THUMBNAIL,Me.a.showMessage("Upload tài liệu thành công","success");break;case"upload-file-error":a.uploading=!1,Me.a.showMessage(e.error.response.message,"warning")}}else this.$emit("disableSubmit",!1)},action:function(t,e){var a=this;if("delete-doc"===t.action&&("add"!==this.type&&null!==e.idLessonDelete&&this.lectures[e.lectureId].lessons_delete.push(e.idLessonDelete),this.lectures[e.lectureId].lessons=e.lessons),"edit-period-docs"===t.action){this.cur_lesson=e.cur_lesson,this.cur_lectureId=e.lectureId;var n=this.lectures[this.cur_lectureId].lessons.find(function(t){return t.order_number===a.cur_lesson.order_number});n?ad()(n,this.cur_lesson):this.lectures[this.cur_lectureId].lessons.push(this.cur_lesson),this.trigger.upload=!this.trigger.upload}if("delete-file"===t.action&&(e.cur_lesson.fileUrl="",e.cur_lesson.fileId=null,e.cur_lesson.fileThumbnail=null),"edit-test"===t.action&&(this.cur_lecture=e,this.trigger.get_question=!this.trigger.get_question,this.$bvModal.show("edit-period-test")),"change-test"===t.action&&(this.cur_lecture.test=t.data),"submit-test"===t.action&&(this.cur_lecture.test.questions=t.data,t.hasOwnProperty("dataStorage")&&(this.cur_lecture.test.dataStorage=t.dataStorage),"edit"===this.type&&t.isEdit&&(this.cur_lecture.isEdit=1),this.generateTestPdf(t.data),this.$bvModal.hide("edit-period-test")),"update-test-categories"===t.action&&(this.cur_lecture.test.code=[this.syllabus.code,this.cur_lecture.content].filter(function(t){return t}).join(" - "),this.cur_lecture.test.category_id=t.data.category_id),"view-quiz"===t.action&&(this.cur_lesson=e.cur_lesson,this.cur_lectureId=e.lectureId,this.$bvModal.show("modal-detail-quiz")),"update-quiz"===t.action&&(this.$bvModal.hide("modal-detail-quiz"),this.trigger.get_quiz=!this.trigger.get_quiz,this.cur_lesson.quiz.isEdit=!0,this.$bvModal.show("edit-quiz")),"edit-quiz"===t.action&&(this.cur_lesson=e.cur_lesson,this.cur_lectureId=e.lectureId,this.trigger.get_quiz=!this.trigger.get_quiz,this.$bvModal.show("edit-quiz")),"delete-quiz-from-detail"===t.action){var i=this.lectures[this.cur_lectureId].lessons.find(function(t){return t.order_number===a.cur_lesson.order_number});i.hasOwnProperty("id")?(i.quiz.isEdit=!1,i.quiz.delete_questions=JSON.parse(sa()(i.quiz.questions)),i.quiz.questions=[]):i.quiz=JSON.parse(sa()(this.defaultQuiz)),Me.a.showMessage("Xóa câu hỏi thành công!","success"),this.$bvModal.hide("modal-detail-quiz")}if("submit-quiz"===t.action){this.cur_lesson.quiz.questions=t.questions,this.cur_lesson.quiz.add_questions=t.addQuestion,this.cur_lesson.quiz.delete_questions=t.deleteQuestion;var s=this.lectures[this.cur_lectureId].lessons.find(function(t){return t.order_number===a.cur_lesson.order_number});ad()(s,this.cur_lesson),t.hasOwnProperty("dataStorage")&&(this.cur_lesson.quiz.dataStorage=t.dataStorage),this.cur_lesson.quiz.isEdit?Me.a.showMessage("Sửa câu hỏi thành công!!","success"):Me.a.showMessage("Thêm câu hỏi thành công!","success"),this.$bvModal.hide("edit-quiz")}},handleContentChange:function(t,e){t.test.code=[this.syllabus.code,e].filter(function(t){return t}).join(" - ")},generateTestPdf:function(t){var e=this;return l()(o.a.mark(function a(){var n,i,s,r,l;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(0!==t.length&&t){a.next=2;break}return a.abrupt("return",Me.a.showMessage("Bài kiểm tra chưa có câu hỏi","warning"));case 2:return n={question_ids:t.map(function(t){return t.id})},a.prev=3,e.loading=!0,a.next=7,Ii({params:n});case 7:i=a.sent,(s=i.data).success?(r="https://cache.giaohangtietkiem.vn",e.cur_lecture.test.pdf=s.data.file,e.cur_lecture.test.original_file=s.data.origin_file.slice(r.length),e.cur_lecture.test.file=s.data.file.slice(r.length),l="Tạo bài kiểm tra thành công","edit"===e.type&&(l="Chỉnh sửa bài kiểm tra thành công"),Me.a.showMessage(l,"success")):Me.a.showMessage(s.message),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(3),console.log(a.t0);case 15:return a.prev=15,e.loading=!1,a.finish(15);case 18:case"end":return a.stop()}},a,e,[[3,12,15,18]])}))()},manageTestDesc:function(t){return"view"===this.type?"Xem bài kiểm tra":Me.a.isEmpty(t)?"Tạo bài kiểm tra":"Sửa bài kiểm tra"},changeFormPeriod:function(t,e){t.form=e?"self":"offline"},decreaseMaxTime:function(t){t.max_test_time=parseInt(t.max_test_time)-5},increaseMaxTime:function(t){t.max_test_time=parseInt(t.max_test_time)+5},decreaseMaxRetestTotal:function(t){t.max_retest_total=parseInt(t.max_retest_total)-1},increaseMaxRetestTotal:function(t){t.max_retest_total=parseInt(t.max_retest_total)+1},manageQuizDesc:function(t){return!Me.a.isEmpty(t)&&t.isEdit?"Sửa câu hỏi":"Thêm câu hỏi"},eventFileDeleted:function(t){this.$emit("event-file-deleted",t)}}};var Rd=function(t){a("tm/M")},Ud=Object(y.a)(Nd,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[t._l(t.lectures,function(e,n){return a("div",{key:"period-"+n},[n>0?a("hr"):t._e(),t._v(" "),a("div",{staticClass:"font-weight-bold mx-4 text-black"},[t._v("\n      Buổi "+t._s(n+1)+"\n    ")]),t._v(" "),a("div",{staticClass:"row mt-2 mx-4"},[a("div",{staticClass:"col-md-2 mt-2 text-left pl-0 text-black"},[t._v("Tự học")]),t._v(" "),a("CheckboxCustom",{attrs:{"is-checked":"self"==e.form,id:"period"+n},on:{change:function(a){for(var n=arguments.length,i=Array(n);n--;)i[n]=arguments[n];return t.changeFormPeriod.apply(void 0,[e].concat(i))}}})],1),t._v(" "),a("div",{staticClass:"row mt-2 mx-4"},[t._m(0,!0),t._v(" "),a("b-form-input",{staticClass:"rounded col-md-10 text-center",attrs:{placeholder:"Nội dung",size:"xs",disabled:t.viewOnly,type:"text"},on:{input:function(a){for(var n=arguments.length,i=Array(n);n--;)i[n]=arguments[n];return t.handleContentChange.apply(void 0,[e].concat(i))}},model:{value:e.content,callback:function(a){t.$set(e,"content",a)},expression:"lecture.content"}})],1),t._v(" "),a("div",{staticClass:"row mt-2 mx-4"},[t._m(1,!0),t._v(" "),a("multi-select-position",{staticClass:"col-md-10 p-0 multiselect-ghtk multiselect-no-horizontal multiselect-center-placeholder",attrs:{"auto-close":!1,placeholder:"Chọn vị trí giảng viên",disabled:t.viewOnly,"position-ids":e.teacher_position},on:{handlePositionSelected:function(t){e.teacher_position=t?t.map(function(t){return t.id}).toString():""}}})],1),t._v(" "),a("div",{staticClass:"row mt-2 mx-4"},[a("label",{staticClass:"col-md-2 mt-2 text-left pl-0 text-black"},[t._v("Tài liệu")]),t._v(" "),a("InputLesson",{attrs:{type:t.type,lessons:e.lessons,lectureId:n},on:{action:function(e){return t.action.apply(void 0,arguments)},"event-file-deleted":t.eventFileDeleted}})],1),t._v(" "),a("div",{staticClass:"row mt-2 mx-4"},[t._m(2,!0),t._v(" "),"add"===t.type&&t.helper.isEmpty(e.test.questions)||"edit"===t.type&&!e.hasOwnProperty("id")&&t.helper.isEmpty(e.test.questions)?a("button",{staticClass:"col-md-10 btn btn-outline-ghtk text-center rounded",on:{click:function(a){return t.action({action:"edit-test"},e)}}},[t._v("\n        "+t._s(t.manageTestDesc(e&&e.test&&e.test.questions))+"\n      ")]):a("div",{staticClass:"col-md-10 d-flex p-0"},[a("b-form-input",{staticClass:"text-center d-inline-block",attrs:{value:e.test.code,type:"text",readonly:""}}),t._v(" "),a("button",{staticClass:"btn btn-outline-ghtk text-center rounded w-5 d-inline-flex justify-content-center",on:{click:function(a){return t.action({action:"edit-test"},e)}}},[a("i",{staticClass:"fas fa-pencil-alt pt-1"})]),t._v(" "),a("button",{staticClass:"btn btn-outline-ghtk text-center rounded w-5 d-inline-flex justify-content-center",on:{click:function(a){return t.showModalDetailTest(e.id)}}},[a("i",{staticClass:"ion ion-md-eye pt-1"})])],1)]),t._v(" "),a("div",{staticClass:"row mt-2 mx-4"},[t._m(3,!0),t._v(" "),a("div",{staticClass:"group-input-action col-md-10 p-0"},[a("b-form-input",{staticClass:"rounded text-center",attrs:{placeholder:"Thời gian làm bài (phút)",size:"xs",disabled:t.viewOnly,type:"number"},model:{value:e.max_test_time,callback:function(a){t.$set(e,"max_test_time",a)},expression:"lecture.max_test_time"}}),t._v(" "),a("div",{staticClass:"group-action group-input-action__remove",on:{click:function(a){return t.decreaseMaxTime(e)}}},[a("i",{staticClass:"ion ion-md-remove"})]),t._v(" "),a("div",{staticClass:"group-action group-input-action__add",on:{click:function(a){return t.increaseMaxTime(e)}}},[a("i",{staticClass:"ion ion-md-add"})])],1)]),t._v(" "),a("div",{staticClass:"row mt-2 mx-4"},[a("label",{staticClass:"col-md-2 mt-2 text-left pl-0 text-black"},[t._v("Số lần làm lại bài")]),t._v(" "),a("div",{staticClass:"group-input-action col-md-10 p-0"},[a("b-form-input",{staticClass:"rounded text-center w-100",attrs:{placeholder:"Số lần làm lại bài",size:"xs",disabled:t.viewOnly,type:"number"},model:{value:e.max_retest_total,callback:function(a){t.$set(e,"max_retest_total",a)},expression:"lecture.max_retest_total"}}),t._v(" "),a("div",{staticClass:"group-action group-input-action__remove",on:{click:function(a){return t.decreaseMaxRetestTotal(e)}}},[a("i",{staticClass:"ion ion-md-remove"})]),t._v(" "),a("div",{staticClass:"group-action group-input-action__add",on:{click:function(a){return t.increaseMaxRetestTotal(e)}}},[a("i",{staticClass:"ion ion-md-add"})])],1)])])}),t._v(" "),a("LessonFileDropzone",{attrs:{"trigger-upload":t.trigger.upload,"lecture-id":t.cur_lectureId,cur_lesson:t.cur_lesson},on:{actionUploadLesson:function(e){return t.actionUploadLesson.apply(void 0,arguments)}}}),t._v(" "),a("b-modal",{staticClass:"modal-test",attrs:{"modal-class":"modal-xxl",id:"edit-period-test","title-class":"font-weight-bold w-100 pl-5","header-class":"text-center",title:t.manageTestDesc(t.cur_lecture&&t.cur_lecture.test&&t.cur_lecture.test.questions),"hide-footer":"",static:""},on:{hidden:function(e){t.trigger.reset_test_data=!t.trigger.reset_test_data}}},[a("PeriodTest",{attrs:{"reset-data":t.trigger.reset_test_data,test:t.cur_lecture.test,type:t.type,"trigger-get-questions":t.trigger.get_question},on:{action:function(e){return t.action.apply(void 0,arguments)}}})],1),t._v(" "),a("b-modal",{staticClass:"modal-test",attrs:{"modal-class":"modal-xxl",id:"edit-quiz","title-class":"font-weight-bold w-100 pl-5","header-class":"text-center",title:t.manageQuizDesc(t.cur_lesson.quiz),"hide-footer":"",static:""}},[a("ModalQuiz",{attrs:{quiz:t.cur_lesson.quiz,type:t.type,"trigger-get-questions":t.trigger.get_quiz},on:{action:function(e){return t.action.apply(void 0,arguments)}}})],1),t._v(" "),a("ModalDetailTest",{attrs:{"tp-period-id":t.tpPeriodId}}),t._v(" "),a("ModalDetailQuiz",{attrs:{quiz:t.cur_lesson.quiz},on:{action:function(e){return t.action.apply(void 0,arguments)}}})],2)},[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"col-md-2 mt-2 text-left pl-0 text-black"},[this._v("Nội dung"),e("span",{staticClass:"text-danger ml-1"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"col-md-2 mt-2 text-left pl-0 text-black"},[this._v("Giảng viên"),e("span",{staticClass:"text-danger ml-1"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"col-md-2 mt-2 text-left pl-0 text-black"},[this._v("Bài kiểm tra"),e("span",{staticClass:"text-danger ml-1"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"col-md-2 mt-2 text-left pl-0 text-black"},[this._v("Thời gian làm bài (phút)"),e("span",{staticClass:"text-danger ml-1"},[this._v("*")])])}],!1,Rd,"data-v-530a221e",null).exports,$d={name:"CheckboxGhtk",props:{id:{type:String,default:""},value:{type:Boolean,default:!1}},methods:{onInput:function(t){this.$emit("input",t.target.checked)}}};var Hd=function(t){a("CZqh")},Bd=Object(y.a)($d,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"checkbox"},[a("label",{staticClass:"label",attrs:{for:t.id}},[t._t("default")],2),t._v(" "),a("div",{staticClass:"checkbox-custom-input-wrapper",class:{"checkbox-custom-input-wrapper--checked":t.value}},[a("input",{staticClass:"checkbox-hidden-input",attrs:{id:t.id,type:"checkbox"},domProps:{checked:t.value},on:{click:t.onInput}}),t._v(" "),t.value?a("span",{staticClass:"checkbox-custom-input",class:{"checkbox-custom-input--checked":t.value}},[t._v("\n        ✔ ")]):t._e()])])},[],!1,Hd,"data-v-d2f40fae",null).exports,jd={name:"view-doc-sub-syllabus",components:{ModalHlsPlayer:Ja},data:function(t){return{fileResponse:null,cdnLink:null,showModalHls:!1}},props:{lessons:{default:function(){return[]}}},computed:{helper:function(){return Me.a}},watch:{},methods:{previewLesson:function(t){return t.thumbnail},openLink:function(t){var e=this;return l()(o.a.mark(function a(){var n,i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.getLinkFiles(t.file_id);case 2:if(n=e.fileResponse[t.file_id],!(i=n.gdrive||n.direct||null)){a.next=13;break}if(!i.endsWith(".m3u8")){a.next=11;break}return e.cdnLink=i,e.showModalHls=!0,a.abrupt("return",!0);case 11:if("video"===n.type){a.next=13;break}return a.abrupt("return",window.open(i,"_blank"));case 13:Me.a.showMessage("Đang trong quá trình chuyển đổi tài liệu, bạn không thể xem tài liệu ngay lúc này!","warn");case 14:case"end":return a.stop()}},a,e)}))()},getLinkFiles:function(t){var e=this;return l()(o.a.mark(function a(){var n,i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,(n={}).file_id=[t],a.next=5,Qa(n);case 5:(i=a.sent).data.success?e.fileResponse=i.data.data:Me.a.showMessage(i.data.message,"warning"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),Me.a.showMessage(a.t0.message,"warning");case 12:case"end":return a.stop()}},a,e,[[0,9]])}))()}}};var Fd=function(t){a("g1mJ")},qd={name:"edit-syllabus",components:{ViewDocSubSyllabus:Object(y.a)(jd,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"profile-document"},[t._l(t.lessons||[],function(e,n){return[a("div",{key:"fileClass-"+n,staticClass:"profile-document__element"},[a("div",{staticClass:"w-100 title-document"},[t._v("\n            "+t._s(n+1+".  "+e.title)+"\n        ")]),t._v(" "),a("span",{staticClass:"cursor-pointer",on:{click:function(a){return t.openLink(e)}}},[a("img",{staticClass:"image-document",attrs:{src:t.previewLesson(e),alt:"Tài liệu buổi "+n}})])])]}),t._v(" "),a("ModalHlsPlayer",{attrs:{"cdn-link":t.cdnLink,showModal:t.showModalHls},on:{hide:function(e){t.showModalHls=!1}}})],2)},[],!1,Fd,"data-v-4f822d2b",null).exports,MultiSelectRegion:me.a,MultiSelectProvince:fe.a,MultiSelectStation:ge.a,MultiSelectPosition:be.a,MultiSelectDepartment:_e.a,MultiSelectSyllabus:ha,SelectWorkType:td,PeriodManage:Ud,Multiselect:la.a,EditPeriodDocuments:Qc.a,CheckboxCustom:pd,CheckboxGhtk:Bd,Draggable:fd.a},data:function(t){return{intervalCheckFile:null,fileIdNew:[],fileIdInit:[],fileUploaded:[],firstSelectWorkType:!0,accept:"image/*",selectedGatherType:null,loading:!1,active_student_inf:!1,active_period_inf:!1,typeOrganize:[{text:"Offline",value:"offline"},{text:"Online",value:"online"}],labelProgram:{type:String,default:"content"},old_syllabus:null,syllabus:{code:null,content:null,thumbnail:null,description:null,has_class:!1,required_tp:"",regions:"",province_ids:"",station_ids:"",department_ids:"",position_ids:"",work_type_ids:"",seniority_min:null,seniority_max:null,amount_min:null,student_gather_type:null,student_gather_positions:null,amount_max:null,benchmark:null,lectures:[{form:null,teacher_position:null,content:"",lessons:[],files:[],test:{name:"",questions:[]},max_test_time:0,max_retest_total:0}],time_end:null,time_start:new Date},lecture:{form:null,teacher_position:null,content:"",lessons:[],files:[],test:{name:"",questions:[]},max_test_time:0,max_retest_total:0},cur_lecture:{form:null,teacher_position:null,content:"",lessons:[],files:[],test:{name:"",questions:[]},max_test_time:0,max_retest_total:0},list_program_choice:[],program:{},isMaster:!1,numberReturn:0,dataProgram:[],subSyllabusData:[],triggerMaster:{region:!1,province:!1,department:!1,position:!1},availableStartDate:[],availableEndDate:[],disableSubmit:!1}},computed:{disableSubmitComputed:function(){if(!this.isMaster)return this.checkPreFile(),this.disableSubmit},viewOnly:function(){return"view"===this.type},helper:function(){return Me.a},addOnly:function(){return"add"!==this.type},isAdd:function(){return"add"===this.type},canEditPeriod:function(){return this.syllabus.update_permission||"add"===this.type},canEditChildTp:function(){return this.syllabus.update_permission||"add"===this.type},minTimeEnd:function(){var t=this.syllabus.time_start?new Date(this.syllabus.time_start):new Date;return t.setDate(t.getDate()+1)},maxTimeStart:function(){if(this.syllabus.time_end){var t=new Date(this.syllabus.time_end);return t.setDate(t.getDate()-1)}return null}},mounted:function(){"add"!==this.type&&this.isMaster&&this.$refs.upChecked.checkedNow()},props:{editSyllabusData:{},triggerSyllabus:{type:Boolean,default:!1},type:{type:String},listProgram:null},watch:{numberReturn:function(t,e){this.changeNumberReturn()},subSyllabusData:function(t,e){this.changeSubSyllabus()},triggerSyllabus:function(){this.fileUploaded=[],this.firstSelectWorkType=!0,"add"===this.type&&(this.isMaster=!1,this.$refs.upChecked.notCheck(),this.initSyllabus())},editSyllabusData:function(t){"edit"!==this.type&&"view"!==this.type||Me.a.isEmpty(t)||this.getDetailSyllbus(t)},"syllabus.time_end":function(){this.setAvailableStartDate()},"syllabus.time_start":function(){this.setAvailableEndDate()}},methods:{checkPreFile:function(){var t=this;clearInterval(this.intervalCheckFile),this.fileIdNew=this.syllabus.lectures.flatMap(function(t){return t.lessons.map(function(t){return t.fileId})});var e=this.fileIdNew.filter(function(e){return!t.fileIdInit.includes(e)}).filter(function(t){return t});(e=[].concat(d()(new Wc.a(e)))).length>0&&(this.disableSubmit=!0,this.intervalCheckFile=setInterval(l()(o.a.mark(function a(){var n,i,s,r,l;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,(n={}).file_id=e,a.next=5,Qa(n);case 5:(i=a.sent).data.success?(rn()(i.data.data).map(function(e){t.syllabus.lectures.forEach(function(t){t.lessons.forEach(function(t){t.fileId===e.id&&(t.progress=Number(e.percentage||0),t.progress<100?t.uploading=!0:t.uploading=!1)})})}),s=rn()(i.data.data).map(function(t){return Number(t.percentage)}),(r=s.every(function(t){return t>=100}))&&(t.fileIdInit=t.fileIdInit.concat(t.fileIdNew),(l=t.fileUploaded).push.apply(l,d()(rn()(i.data.data))),clearInterval(t.intervalCheckFile)),t.disableSubmit=!r):(clearInterval(t.intervalCheckFile),t.disableSubmit=!0,Me.a.showMessage(i.data.message,"warning")),a.next=14;break;case 9:a.prev=9,a.t0=a.catch(0),clearInterval(t.intervalCheckFile),t.disableSubmit=!0,Me.a.showMessage(a.t0.message,"warning");case 14:case"end":return a.stop()}},a,t,[[0,9]])})),3e3))},toggleRadioGather:function(){this.selectedGatherType!==event.target.value?this.selectedGatherType=event.target.value:this.selectedGatherType=null,this.syllabus.student_gather_type=this.selectedGatherType},setAvailableStartDate:function(){var t=null;if(this.syllabus.time_end){var e=new Date(this.syllabus.time_end),a=new Date;if(e.getTime()<a.getTime())return void(this.availableStartDate=[{start:new Date(this.syllabus.time_start),end:new Date(this.syllabus.time_start)}]);t=e.setDate(e.getDate()-1)}this.availableStartDate=[{start:new Date,end:t}],this.syllabus.time_start&&this.availableStartDate.push({start:new Date(this.syllabus.time_start),end:new Date(this.syllabus.time_start)})},setAvailableEndDate:function(){var t=new Date;new Date(this.syllabus.time_start)>new Date&&(t=new Date(this.syllabus.time_start)),this.availableEndDate=[{start:t,end:null}],this.syllabus.time_end&&this.availableEndDate.push({start:new Date(this.syllabus.time_end),end:new Date(this.syllabus.time_end)})},initSyllabus:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Me.a.isEmpty(e)?(this.list_program_choice=[],this.numberReturn=1,this.syllabus={code:null,content:null,thumbnail:null,description:null,required_tp:"",regions:"",province_ids:"",station_ids:"",department_ids:"",position_ids:"",work_type_ids:"",seniority_min:null,seniority_max:null,amount_min:null,amount_max:null,lectures:[{form:"offline",teacher_position:null,content:"",lessons:[],files:[],test:{name:"",questions:[]},max_test_time:0,max_retest_total:0}],time_end:"",time_start:new Date},this.selectedGatherType=null,this.subSyllabusData=[]):(e.hasOwnProperty("lectures")&&(e.lectures=e.lectures.map(function(t){return{id:t.id,order_number:t.order_number,form:t.form,content:t.content,max_test_time:t.max_test_time,max_retest_total:t.max_retest_total,teacher_position:t.teacher_position,test:t.test,lessons_delete:[],lessons:t.lessons.map(function(t){return{id:t.id,order_number:t.order_number,title:t.title,fileId:t.file_id,fileType:t.file_type,fileUrl:t.links.gdrive||t.links.direct,fileThumbnail:t.links.thumbnail,isEdit:!1,uploading:!1,progress:0,quiz:{isEdit:!1,delete_questions:[],add_questions:[],questions:t.add_questions}}})}})),this.syllabus=i()({},e,{update_permission:this.editSyllabusData.update_permission}),this.syllabus.time_end=e.time_end?new Date(e.time_end):"",this.syllabus.time_start=e.time_start?new Date(e.time_start):"",this.selectedGatherType=e.student_gather_type,e.child_syllabus?(this.isMaster=!0,this.$refs.upChecked.checkedNow(),this.list_program_choice=[],this.syllabus.child_syllabus.forEach(function(e,a){t.list_program_choice.push({idProgram:t.mapOptions(e)})}),this.numberReturn=this.list_program_choice.length,this.changeSelect()):(this.fileIdInit=this.syllabus.lectures.flatMap(function(t){return t.lessons.map(function(t){return t.fileId})}),this.$refs.upChecked.notCheck(),this.isMaster=!1),this.old_syllabus=JSON.parse(sa()(this.syllabus))),this.setAvailableStartDate(),this.setAvailableEndDate()},closeModal:function(){this.$emit("action",{action:"close-update-syllabus"})},mapOptions:function(t){return this.listProgram.find(function(e){return+e.id===t})},previewImageRender:function(t){if(Me.a.isEmpty(t))return"";var e=Me.a.getFileType(t);if("doc"===e)return"https://gs.giaohangtietkiem.vn/d/e24bec4ee88441bdb3e79466dd541152.png?height=250";if("object"===(void 0===t?"undefined":na()(t))){if("pdf"===e)return"https://gs.giaohangtietkiem.vn/d/d7d5ef9e764e4227b7aef2c11dfd1371.pngheight=250";if("video"===e)return"https://ghtk.me/images/icon-file-video.png?height=250";if("image"===e)return URL.createObjectURL(t)}else if(["pdf","video"].includes(e))return t+"?extract=thumb";return t},showImage:function(t){this.$bvModal.show(t)},openLink:function(t){window.open(t,"_blank")},changeSelect:function(){var t=this;this.dataProgram=[],this.list_program_choice.forEach(function(e,a){e.idProgram&&t.dataProgram.push(e.idProgram.id)}),this.dataProgram.length>0?this.getListSubSyllabus():(this.subSyllabusData=[],this.changeSubSyllabus())},getListSubSyllabus:function(){var t=this,e={syllabus:this.dataProgram};ca.a.getListSubSyllabus(e).then(function(e){e.data.success?(t.subSyllabusData=e.data.data,Me.a.showMessage(e.data.message,"success")):Me.a.showMessage(e.data.message,"false")}).catch(function(t){console.log(t)})},changeSubSyllabus:function(){if("add"!==this.type)return!0;var t=3,e=[],a=[],n=[],i=3,s=[],o=[],r=[],l=this.syllabus.regions,c=this.syllabus.province_ids,d=this.syllabus.department_ids,u=this.syllabus.position_ids;this.syllabus.regions="",this.syllabus.province_ids="",this.syllabus.station_ids="",this.syllabus.department_ids="",this.syllabus.position_ids="",this.syllabus.work_type_ids="",this.syllabus.benchmark=null,this.subSyllabusData.forEach(function(l,c){l.tp_config.region&&(e=e.concat(l.tp_config.region),l.tp_config.province_id||(t=Math.min(t,1)),a=a.concat(l.tp_config.province_id),l.tp_config.station_id||(t=Math.min(t,2)),n=n.concat(l.tp_config.station_id)),l.tp_config.department_id&&(s=s.concat(l.tp_config.department_id),l.tp_config.position_id||(i=Math.min(i,1)),o=o.concat(l.tp_config.position_id),l.tp_config.work_type_id||(i=Math.min(i,2)),r=r.concat(l.tp_config.work_type_id))}),t>=1&&(e=e.filter(function(t,e,a){return a.indexOf(t)===e}),this.syllabus.regions=e.toString()),this.triggerMaster.region=!(l===this.syllabus.regions),t>=2&&(a=a.filter(function(t,e,a){return a.indexOf(t)===e}),this.syllabus.province_ids=a.toString()),this.triggerMaster.province=!(c===this.syllabus.province_ids),t>=3&&(n=n.filter(function(t,e,a){return a.indexOf(t)===e}),this.syllabus.station_ids=n.toString()),i>=1&&(s=s.filter(function(t,e,a){return a.indexOf(t)===e}),this.syllabus.department_ids=s.toString()),this.triggerMaster.department=!(d===this.syllabus.department_ids),i>=2&&(o=o.filter(function(t,e,a){return a.indexOf(t)===e}),this.syllabus.position_ids=o.toString()),this.triggerMaster.position=!(u===this.syllabus.position_ids),i>=3&&(r=r.filter(function(t,e,a){return a.indexOf(t)===e}),this.syllabus.work_type_ids=r.toString()),this.syllabus.benchmark=null},imageUrlRender:function(t){var e=Me.a.getFileType(t);return t+=["pdf","video"].includes(e)?"?extract=thumb":"","doc"===e&&(t="https://cache.giaohangtietkiem.vn/d/88896e53582a41399fae1c24d0324a86.jpg?width=450&height=359"),t},customLabelProgram:function(t){var e=t.code,a=t.content,n=t.countPeriod;return void 0===e&&void 0===a&&void 0===n?"Chọn chương trình":e+" - "+a+" - "+n+" buổi"},changeNumberReturn:function(){var t=Number(this.numberReturn),e=this.list_program_choice.length;if(t<e)this.list_program_choice.splice(t,e-t),this.changeSelect();else if(t!==e)for(var a=e;a<this.numberReturn;a++)this.list_program_choice.push({idProgram:null})},action:function(t,e){"new-file"===t.action&&this.cur_lecture.files.push(t.data.file),"delete-file"===t.action&&(this.cur_lecture.files.splice(t.data.idx,1),Me.a.isEmpty(this.cur_lecture.file_creators)||this.cur_lecture.file_creators.splice(t.data.idx,1)),"edit-test"===t.action&&(Me.a.isEmpty(e.test)?e.test={name:e.content,questions:[]}:e.test.name=e.content,this.cur_lecture=e,this.$bvModal.show("edit-period-test")),"change-test"===t.action&&(this.cur_lecture.test=t.data)},disableSubmitChange:function(t){this.disableSubmit=t},validationSyllabus:function(){if(!this.syllabus.code)return Me.a.showMessage("Mã chương trình không được để trống!"),!1;if(!this.syllabus.content&&!this.isMaster)return Me.a.showMessage("Tên chương trình không được để trống!"),!1;if(!this.syllabus.description)return Me.a.showMessage("Mô tả chương trình không được để trống!"),!1;if(!this.syllabus.thumbnail)return Me.a.showMessage("Ảnh chương trình không được để trống!"),!1;if(!this.syllabus.time_start)return Me.a.showMessage("Ngày bắt đầu áp dụng không được để trống!"),!1;if(!this.syllabus.benchmark&&!this.isMaster)return Me.a.showMessage("Điểm đạt không được để trống!"),!1;if(this.syllabus.hasOwnProperty("student_gather_type")&&"manager"===this.syllabus.student_gather_type&&(!this.syllabus.hasOwnProperty("student_gather_positions")||""===this.syllabus.student_gather_positions)&&!this.isMaster)return Me.a.showMessage("Giá trị trường vị trí quản lý là bắt buộc"),!1;if(this.isMaster){if(!this.syllabus.content)return Me.a.showMessage("Nội dung master không được để trống!"),!1;if(!this.syllabus.regions&&!this.syllabus.province_ids&&!this.syllabus.station_ids)return Me.a.showMessage("Khu vực không được để trống!"),!1;if(!this.syllabus.department_ids)return Me.a.showMessage("Bộ phận không được để trống!"),!1;if(!this.syllabus.position_ids)return Me.a.showMessage("Vị trí không được để trống!"),!1;if(!this.syllabus.work_type_ids)return Me.a.showMessage("Kiểu nhân viên không được để trống!"),!1;if(!this.syllabus.seniority_min&&!this.syllabus.seniority_max)return Me.a.showMessage("Thâm niên (ngày) không được để trống!"),!1;if(!this.syllabus.amount_min&&!this.syllabus.amount_max)return Me.a.showMessage("Số lượng không được để trống!"),!1}return!0},validationPeriod:function(){var t=0,e=!0,a=!1,n=void 0;try{for(var i,s=fa()(this.syllabus.lectures);!(e=(i=s.next()).done);e=!0){var o=i.value;if(t++,!o.content)return Me.a.showMessage("Nội dung buổi "+t+" không được để trống!"),!1;if(!o.teacher_position)return Me.a.showMessage("Giảng viên buổi "+t+" không được để trống!"),!1;if(!o.test.original_file&&!o.hasOwnProperty("id"))return Me.a.showMessage("Bài kiểm tra buổi "+t+" không được để trống!"),!1;if(Number(o.max_test_time)<0)return Me.a.showMessage("Thời gian làm bài (phút) buổi "+t+" không được để trống!"),!1;if(!Me.a.isEmpty(o.lessons))if(this.validateLesson(o.lessons,t))return!1}}catch(t){a=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(a)throw n}}return!0},validateLesson:function(t,e){var a=this,n=function(t){if(t.title&&!t.fileId)return Me.a.showMessage("Tại buổi "+e+": Khối tài liệu "+t.order_number+" thiếu File đính kèm. Bạn vui lòng kiểm tra lại!"),{v:!0};if(!t.title&&t.fileId)return Me.a.showMessage("Tại buổi "+e+": Khối tài liệu "+t.order_number+" thiếu Tiêu đề. Bạn vui lòng kiểm tra lại!"),{v:!0};var n=a.fileUploaded.find(function(e){return"docs"===e.type&&e.id===t.fileId});return n&&!n.metadata.total_page?(Me.a.showMessage("Tại buổi "+e+": Hệ thống không ghi nhận được số trang của file tài liệu "+t.title+". Vui lòng kiểm tra file và thử lại!"),{v:!0}):void 0},i=!0,s=!1,o=void 0;try{for(var r,l=fa()(t);!(i=(r=l.next()).done);i=!0){var c=n(r.value);if("object"===(void 0===c?"undefined":na()(c)))return c.v}}catch(t){s=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(s)throw o}}return!1},submitSyllabus:function(){return!!this.validationSyllabus()&&("add"!==this.type||Me.a.isEmpty(this.syllabus.id)?"add"===this.type&&Me.a.isEmpty(this.syllabus.id)?this.createTrainingSyllabus():"edit"===this.type||"view"===this.type?this.editTrainingSyllabus():void 0:this.editTrainingSyllabus())},formDataSyllabus:function(){var t=new FormData,e=["thumbnail","lectures","time_start","time_end"];for(var a in this.syllabus)!this.syllabus[a]||e.includes(a)?"thumbnail"===a&&(this.syllabus[a]instanceof File||this.syllabus[a]instanceof Blob)?t.append(a,this.syllabus[a]):"time_start"!==a&&"time_end"!==a||!this.syllabus[a]||t.append(a,Me.a.formatDate(this.syllabus[a],"YYYY-MM-DD")):t.append(a,this.syllabus[a]);if(this.isMaster){var n=!0,i=!1,s=void 0;try{for(var o,r=fa()(this.dataProgram);!(n=(o=r.next()).done);n=!0){var l=o.value;t.append("sub_syllabuses[]",l)}}catch(t){i=!0,s=t}finally{try{!n&&r.return&&r.return()}finally{if(i)throw s}}}return t},createTrainingSyllabus:function(){var t=this;try{this.disableSubmit=!0,this.loading=!0;var e=new FormData;if(e=this.formDataSyllabus(),this.isMaster)Ya(e).then(function(e){e.data.success?(t.syllabus.id=e.data.data.tp_id,t.syllabus.thumbnail=e.data.data.thumbnail,Me.a.showMessage(e.data.message,"success"),t.$emit("action",{action:"update-syllabus-ok",data:{syllabus:t.syllabus}})):Me.a.showMessage(e.data.message,"warning")}).catch(function(t){Me.a.showMessage(t.response.data.message,"error")});else{if(!this.validationPeriod())return!1;Ba(e).then(function(e){e.data.success?(t.syllabus.id=e.data.data.tp_id,t.syllabus.thumbnail=e.data.data.thumbnail,Me.a.showMessage(e.data.message,"success"),t.createTpPeriod()):Me.a.showMessage(e.data.message,"warning")}).catch(function(t){Me.a.showMessage(t.response.data.message,"error")})}}catch(t){Me.a.showMessage(t.message,"warning")}finally{this.disableSubmit=!1,this.loading=!1}},editTrainingSyllabus:function(){var t=this;try{this.disableSubmit=!0,this.loading=!0;var e=new FormData;if((e=this.formDataSyllabus()).append("_method","put"),this.isMaster)za(e).then(function(e){e.data.success?(t.syllabus.id=e.data.data.tp_id,t.syllabus.thumbnail=e.data.data.thumbnail,Me.a.showMessage(e.data.message,"success"),t.$emit("action",{action:"update-syllabus-ok",data:{syllabus:t.syllabus}})):Me.a.showMessage(e.data.message,"warning")}).catch(function(t){Me.a.showMessage(t.response.data.message,"error")});else{if(!this.validationPeriod())return!1;ja(e).then(function(e){e.data.success?"add"===t.type?t.createTpPeriod():t.editTpPeriod():Me.a.showMessage(e.data.message,"warning")}).catch(function(t){Me.a.showMessage(t.response.data.message,"error")})}}catch(t){if(t.response&&413===t.response.status)return Me.a.showMessage("Dung lượng tài liệu tải lên quá lớn!","warning");Me.a.showMessage(t.message,"warning")}finally{this.disableSubmit=!1,this.loading=!1}},formatPeriodSend:function(){return this.syllabus.lectures.map(function(t){return{id:t.id,form:t.form,teacher_position:t.teacher_position,content:t.content,max_test_time:t.max_test_time,max_retest_total:t.max_retest_total,lessons_delete:t.lessons_delete,lessons:t.lessons.map(function(t){return{id:t.id,order_number:t.order_number,title:t.title,file_id:t.fileId,add_questions:t.quiz.add_questions,delete_questions:t.quiz.delete_questions}}),test:t.test.hasOwnProperty("original_file")?{id:t.test.id,questions:t.test.questions,code:t.test.code,pdf:t.test.pdf,original_file:t.test.original_file,file:t.test.file}:{}}})},createTpPeriod:function(){var t=this,e={tp_id:parseInt(this.syllabus.id),lectures:this.formatPeriodSend()};Fa(e).then(function(e){e.data.success?(Me.a.showMessage(e.data.message,"success"),t.$emit("action",{action:"update-syllabus-ok",data:{syllabus:t.syllabus}})):Me.a.showMessage(e.data.message,"warning")}).catch(function(t){Me.a.showMessage(t.response.data.message,"error")})},editTpPeriod:function(){var t=this,e={tp_id:parseInt(this.syllabus.id),lectures:this.formatPeriodSend()};qa(e).then(function(e){e.data.success?(Me.a.showMessage(e.data.message,"success"),t.$emit("action",{action:"update-syllabus-ok",data:{syllabus:t.syllabus}})):Me.a.showMessage(e.data.message,"warning")}).catch(function(t){Me.a.showMessage(t.response.data.message,"error")})},insertLecture:function(){var t=JSON.parse(sa()(this.lecture));t.form="offline",this.syllabus.lectures.push(t)},handleDepartmentSelected:function(t){this.syllabus.department_ids=t?t.map(function(t){return t.id}).toString():""},handlePositionSelected:function(t){this.syllabus.position_ids=t?t.map(function(t){return t.id}).toString():"",this.firstSelectWorkType&&(this.$refs.resetSelectWorkType.getListWorkType(this.syllabus.position_ids),this.firstSelectWorkType=!1)},handleStudentGatherSelected:function(t){this.syllabus.student_gather_positions=t?t.map(function(t){return t.id}).toString():""},handlePosition:function(t){this.syllabus.position_ids=t?t.map(function(t){return t.id}).toString():""},handleRegionSelected:function(t){this.syllabus.regions=t?t.map(function(t){return t.id}).toString():""},handleProvinceSelected:function(t){this.syllabus.province_ids=t?t.map(function(t){return t.id}).toString():""},handleStationSelected:function(t){this.syllabus.station_ids=t.length?t.map(function(t){return t.id}).toString():""},handleSyllabusSelected:function(t){this.syllabus.required_tp=t?t.map(function(t){return t.id}).toString():""},handleSelectedWorkType:function(t){this.syllabus.work_type_ids=t?t.map(function(t){return t.id}).toString():""},handleProgramSelected:function(t){this.syllabus.regions=t?t.map(function(t){return t.id}).toString():""},deletePro:function(t){"view"!==this.type&&(this.list_program_choice.splice(t,1),this.numberReturn--,this.changeSelect())},addThumbnail:function(t){this.syllabus.thumbnail={};var e=t.target.files||t.dataTransfer.files;e.size&&(e=[e]);var a=this.accept.split(", "),n=!0,i=!1,s=void 0;try{for(var o,r=fa()(e);!(n=(o=r.next()).done);n=!0){var l=o.value,c=l.type.split("/"),d=l.name.split(".").pop();if(!c||c.length<1)return;a.includes(l.type)||a.includes(c[0]+"/*")||a.includes("."+d)?this.syllabus.thumbnail=l:Me.a.showMessage("Định dạng file "+l.name+"  không được hỗ trợ !","warning")}}catch(t){i=!0,s=t}finally{try{!n&&r.return&&r.return()}finally{if(i)throw s}}t.target.value=null},getDetailSyllbus:function(t){var e=this;return l()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Ga({id:t.id}).then(function(t){t.data.success?e.initSyllabus(t.data.data):Me.a.showMessage(t.data.message,"warning")});case 2:case"end":return a.stop()}},a,e)}))()},eventFileDeleted:function(t){this.fileUploaded=this.fileUploaded.filter(function(e){return e.id!==parseInt(t)})}}};var Yd=function(t){a("DXZQ"),a("5/1o")},zd=Object(y.a)(qd,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"small-scrollbar"},[a("div",{staticClass:"mr-2"},[a("div",{staticClass:"row mt-2 mx-4"},[a("label",{staticClass:"col-md-2 mt-2 text-left pl-0 text-black"},[t._v("Master")]),t._v(" "),a("div",{staticClass:"col-sm-10 p-0"},[a("checkbox-custom",{ref:"upChecked",attrs:{"is-disabled":t.addOnly,id:"tp-master"},on:{model:function(e){t.isMaster=e}}})],1)]),t._v(" "),a("div",{staticClass:"d-flex mt-2"},[a("div",{staticClass:"w-100"},[a("div",{staticClass:"d-flex mt-2 mx-4"},[t._m(0),t._v(" "),a("b-form-input",{staticClass:"rounded col-md-10 text-center input-syllabus",attrs:{size:"xs",type:"text",maxlength:"5",disabled:!t.isAdd&&t.syllabus.has_class,placeholder:t.isMaster?"Mã CT master":"Mã chương trình"},model:{value:t.syllabus.code,callback:function(e){t.$set(t.syllabus,"code",e)},expression:"syllabus.code"}})],1),t._v(" "),a("div",{staticClass:"d-flex mt-2 mx-4"},[a("label",{staticClass:"col-md-2 mt-2 text-left pl-0 text-black"},[t._v(t._s(t.isMaster?"Nội dung master":"Tên chương trình")),a("span",{staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("b-form-input",{staticClass:"rounded col-md-10 text-center input-syllabus",attrs:{placeholder:t.isMaster?"Nội dung chương trình master":"Điền nội dung chính lớp học",size:"xs",type:"text",disabled:t.viewOnly},model:{value:t.syllabus.content,callback:function(e){t.$set(t.syllabus,"content",e)},expression:"syllabus.content"}})],1)]),t._v(" "),a("div",{staticClass:"mt-2 ml-2 mr-4"},[a("div",{staticClass:"cursor-pointer thumbnail__element",class:null!==t.syllabus.thumbnail?"preview-active":"preview-disable"},[null!==t.syllabus.thumbnail?a("img",{staticClass:"w-100 h-5rem",attrs:{src:t.previewImageRender(t.syllabus.thumbnail),alt:""}}):t._e(),t._v(" "),null!==t.syllabus.thumbnail?a("div",{staticClass:"thumbnail-extend mb-1"},[a("span",{staticClass:"update-thumbnail cursor-pointer d-inline-flex text-ghtk",on:{click:function(e){return t.$refs.inputThumbnail.click()}}},[a("i",{staticClass:"fas fa-pencil-alt cursor-pointer"}),t._v(" "),a("span",[t._v("Sửa")])])]):a("div",{staticClass:"file-label-inner",on:{click:function(e){return t.$refs.inputThumbnail.click()}}},[a("i",{staticClass:"fas fa-plus file-icon"}),t._v(" "),a("b",{staticClass:"file-description"},[t._v("Thêm ảnh")])]),t._v(" "),a("input",{ref:"inputThumbnail",staticClass:"custom-file-input d-none",attrs:{type:"file",multiple:!1,accept:t.accept},on:{input:t.addThumbnail}})])])]),t._v(" "),a("div",{staticClass:"d-flex mt-2 mx-4"},[t._m(1),t._v(" "),a("b-form-input",{staticClass:"rounded col-md-10 text-center",attrs:{placeholder:"Nhập mô tả chương trình",size:"xs",type:"text",disabled:t.viewOnly},model:{value:t.syllabus.description,callback:function(e){t.$set(t.syllabus,"description",e)},expression:"syllabus.description"}})],1),t._v(" "),a("div",{staticClass:"d-flex mt-2 mx-4"},[a("label",{staticClass:"col-md-2 mt-2 text-left pl-0 text-black"},[t._v("Yêu cầu")]),t._v(" "),a("multi-select-syllabus",{attrs:{"custom-class":"col-md-10 multiselect p-0 multiselect-ghtk multiselect-no-horizontal multiselect-center-placeholder","syllabus-ids":t.syllabus.required_tp,"auto-close":!1,"is-disabled":t.viewOnly,placeholder:"Chọn nội dung tiên quyết cần hoàn thành trước khi tham gia lớp này"},on:{handleSyllabusSelected:t.handleSyllabusSelected}})],1),t._v(" "),a("div",{staticClass:"d-flex mt-2 mx-4"},[t._m(2),t._v(" "),a("div",{staticClass:"col-md-10 d-flex justify-content-between p-0",staticStyle:{padding:"0 !important"}},[a("v-date-picker",{staticStyle:{width:"49%!important"},attrs:{value:t.syllabus.time_start,locale:"vi",color:"green","input-props":{placeholder:"Ngày bắt đầu",style:"font-size:14px; line-height: unset",class:"z-3 form-control rounded"},popover:{visibility:"focus"},"available-dates":t.availableStartDate},model:{value:t.syllabus.time_start,callback:function(e){t.$set(t.syllabus,"time_start",e)},expression:"syllabus.time_start"}}),t._v(" "),a("v-date-picker",{staticStyle:{width:"49%!important"},attrs:{locale:"vi",color:"green","input-props":{placeholder:"Ngày kết thúc",style:"font-size:14px; line-height: unset",class:"z-3 form-control rounded"},popover:{visibility:"focus"},"available-dates":t.availableEndDate},model:{value:t.syllabus.time_end,callback:function(e){t.$set(t.syllabus,"time_end",e)},expression:"syllabus.time_end"}})],1)])]),t._v(" "),t.isMaster?a("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle.programInfo",modifiers:{programInfo:!0}}],staticClass:"font-weight-bold text-dark w-100 text-left my-2 d-flex justify-content-between text-black",staticStyle:{"background-color":"#F7F7F7"},on:{click:function(e){t.active_period_inf=!t.active_period_inf}}},[t._v("\n    Chọn danh sách chương trình\n    "),a("i",{staticClass:"fa mt-1",class:t.active_period_inf?"fa-caret-down":"fa-caret-up",staticStyle:{color:"#a3a4a6","margin-right":"1.9rem"}})]):t._e(),t._v(" "),a("b-collapse",{staticClass:"mr-2",attrs:{visible:t.isMaster,id:"programInfo"}},[t.canEditChildTp?a("draggable",{on:{end:function(e){return t.changeSelect()}},model:{value:t.list_program_choice,callback:function(e){t.list_program_choice=e},expression:"list_program_choice"}},t._l(t.list_program_choice,function(e,n){return a("div",{key:n,staticClass:"row mt-2 mx-4"},[a("label",{staticClass:"col-md-2 mt-2 text-center pl-0 text-black"},[t._v(t._s(n+1))]),t._v(" "),a("div",{staticClass:"d-flex col-md-10 p-0 justify-content-between"},[a("div",{staticClass:"p-0 multiProgram cusDrag",staticStyle:{width:"100%","font-size":"14px !important"}},[a("b-input-group",{staticStyle:{width:"100%"}},[a("b-input-group-prepend",{staticStyle:{width:"5%"}},[a("b-input-group-text",{staticClass:"drag",staticStyle:{"border-right":"none","border-color":"#BDBDBD !important",cursor:"move"}},[a("i",{staticClass:"fa fa-bars",attrs:{"aria-hidden":"true"}})])],1),t._v(" "),a("multiselect",{staticClass:"cusMul",attrs:{"custom-class":"multiselect-ghtk multiselect-no-horizontal multiselect-center-placeholder",id:n,label:"content",placeholder:"Chọn chương trình","track-by":"id",selectedLabel:"Chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn",options:t.listProgram,searchable:!0,"allow-empty":!1,disabled:t.viewOnly,"custom-label":t.customLabelProgram},on:{input:function(e){return t.changeSelect()}},model:{value:e.idProgram,callback:function(a){t.$set(e,"idProgram",a)},expression:"p.idProgram"}})],1)],1),t._v(" "),a("div",{staticClass:"p-0 cusIcon"},[a("i",{staticClass:"fas fa-times-circle",staticStyle:{"font-size":"16px",color:"red","margin-top":"60%",cursor:"pointer"},on:{click:function(e){return t.deletePro(n)}}})])])])}),0):t._l(t.list_program_choice,function(e,n){return a("div",{key:n,staticClass:"row mt-2 mx-4"},[a("label",{staticClass:"col-md-2 mt-2 text-center pl-0 text-black"},[t._v(t._s(n+1))]),t._v(" "),a("div",{staticClass:"d-flex col-md-10 p-0 justify-content-between"},[a("div",{staticClass:"p-0 multiProgram",staticStyle:{width:"100%","font-size":"14px !important"}},[a("multiselect",{attrs:{"custom-class":"multiselect-ghtk multiselect-no-horizontal multiselect-center-placeholder",id:n,label:"content",placeholder:"Chọn chương trình","track-by":"id",selectedLabel:"Chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn",options:t.listProgram,searchable:!0,"allow-empty":!1,disabled:!0,"custom-label":t.customLabelProgram},model:{value:e.idProgram,callback:function(a){t.$set(e,"idProgram",a)},expression:"p.idProgram"}})],1)])])}),t._v(" "),a("div",{staticClass:"row mt-2 mx-4"},[a("label",{staticClass:"col-md-2 mt-2 text-center pl-0 text-black"}),t._v(" "),a("div",{staticClass:"d-flex col-md-10 p-0 justify-content-between"},[t.canEditChildTp?a("button",{staticClass:"btn btn-outline-ghtk rounded btn-sm",staticStyle:{width:"100%",height:"37px","margin-top":"0.6%","font-size":"14px !important"},on:{click:function(e){t.numberReturn++}}},[a("span",{},[a("i",{staticClass:"fas fa-plus"}),t._v(" Thêm chương trình")])]):t._e(),t._v(" "),a("div",{staticClass:"p-0 cusIcon"},[a("i",{staticClass:"fas fa-times-circle invisible",staticStyle:{"font-size":"16px",color:"red","margin-top":"60%",cursor:"pointer"}})])])]),t._v(" "),a("hr",{staticClass:"mx-4",staticStyle:{"border-top":"1px solid #00904A","margin-top":"1rem"}}),t._v(" "),a("div",{staticClass:"row mt-2 mx-4"},[a("label",{staticClass:"col-md-2 mt-2 text-left pl-0 text-black",staticStyle:{"font-size":"14px !important"}},[t._v("Tài liệu")]),t._v(" "),a("div",{staticStyle:{width:"80%"}},[a("div",{staticClass:"scrollbar scrollbar-primary"},[a("div",{staticClass:"force-overflow d-flex"},[t._l(t.subSyllabusData||[],function(e){return[t._l(e.tpPeriod||[],function(n){return[a("div",[a("b-modal",{attrs:{id:"view-period-documents"+e.id+n.id,"title-class":"font-weight-bold w-100","header-class":"text-center","modal-class":"modal-md","hide-footer":""},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v("\n                      Tài liệu học\n                    ")]},proxy:!0}],null,!0)},[t._v(" "),a("ViewDocSubSyllabus",{attrs:{lessons:n.files}})],1)],1),t._v(" "),a("div",{staticClass:"d-block  pr-2"},[a("div",{key:n.id,staticClass:"d-inline-block w-5re"},[n.files[0]?a("div",{staticClass:"profile-document__element mr-1",on:{click:function(a){return t.showImage("view-period-documents"+e.id+n.id)}}},[a("div",{staticClass:"document-type-desc"},[t._v("\n                        Buổi "+t._s(n.order_number)+"\n                      ")]),t._v(" "),a("div",{staticClass:"num-img-extend"},[a("i",{staticClass:"icon ion-md-eye cursor-pointer font-10 mr-1"}),t._v(" xem\n                      ")]),t._v(" "),a("span",[a("img",{staticClass:"image-document",attrs:{src:t.imageUrlRender(n.files[0].thumbnail),alt:"Tài liệu buổi "+n.id}})])]):a("div",{staticClass:"profile-document__element mr-1"},[a("div",{staticClass:"document-type-desc"},[t._v("\n                        Buổi "+t._s(n.order_number)+"\n                      ")]),t._v(" "),a("span",[a("img",{staticClass:"image-document",attrs:{src:"",alt:" Chưa có tài liệu"}})])])]),t._v(" "),a("div",{staticClass:"text-center font-12 mt-1 font-weight-bold"},[t._v("\n                    "+t._s(e.code)+"\n                  ")])])]})]})],2)])])]),t._v(" "),a("hr",{staticClass:"mx-4",staticStyle:{"border-top":"1px solid #00904A","margin-top":"1rem"}}),t._v(" "),a("div",{staticClass:"row mt-2 mx-4"},[a("label",{staticClass:"col-md-2 mt-2 text-left pl-0 text-black",staticStyle:{"font-size":"14px !important"}},[t._v("Bài kiểm tra")]),t._v(" "),a("div",{staticStyle:{width:"80%"}},[a("div",{staticClass:"scrollbar scrollbar-primary"},[a("div",{staticClass:"force-overflow d-flex"},[t._l(t.subSyllabusData||[],function(e){return[t._l(e.tpPeriod||[],function(n){return[a("div",{staticClass:"d-block pr-2"},[a("div",{key:n.id,staticClass:"d-inline-block w-5re"},[n.files_test[0]?a("div",{staticClass:"profile-document__element mr-1",on:{click:function(e){return t.openLink(n.files_test[0])}}},[a("div",{staticClass:"document-type-desc"},[t._v("\n                        Buổi "+t._s(n.order_number)+"\n                      ")]),t._v(" "),a("div",{staticClass:"num-img-extend"},[a("i",{staticClass:"icon ion-md-eye cursor-pointer font-10 mr-1"}),t._v(" xem\n                      ")]),t._v(" "),a("span",[["pdf","video","image","doc"].includes(t.helper.getFileType(n.files_test[0]))?a("img",{staticClass:"image-document",attrs:{src:t.imageUrlRender(n.files_test[0]),alt:"Tài liệu buổi "+n.id}}):t._e()])]):a("div",{staticClass:"profile-document__element mr-1"},[a("div",{staticClass:"document-type-desc"},[t._v("\n                        Buổi "+t._s(n.order_number)+"\n                      ")]),t._v(" "),a("span",[a("img",{staticClass:"image-document",attrs:{src:"",alt:" Chưa có tài liệu"}})])])]),t._v(" "),a("div",{staticClass:"text-center font-12 mt-1 font-weight-bold"},[t._v("\n                    "+t._s(e.code)+"\n                  ")])])]})]})],2)])])])],2),t._v(" "),a("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle.studentInfo",modifiers:{studentInfo:!0}}],staticClass:"font-weight-bold text-dark w-100 text-left my-2 d-flex justify-content-between text-black text-black",staticStyle:{"background-color":"#F7F7F7"},on:{click:function(e){t.active_student_inf=!t.active_student_inf}}},[t._v("\n    Thông tin học viên\n    "),a("i",{staticClass:"fa mt-1",class:t.active_student_inf?"fa-caret-down":"fa-caret-up",staticStyle:{color:"#a3a4a6","margin-right":"1.9rem"}})]),t._v(" "),a("b-collapse",{staticClass:"mr-2",attrs:{visible:"",id:"studentInfo"}},[a("div",{staticClass:"row mt-2 mx-4"},[a("label",{staticClass:"col-md-2 mt-2 text-left pl-0 text-black"},[t._v("\n        Khu vực\n        "),a("span",{directives:[{name:"show",rawName:"v-show",value:!!t.isMaster,expression:"!!isMaster"}],staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("div",{staticClass:"d-flex col-md-10 p-0 justify-content-between"},[a("div",{staticClass:"p-0",staticStyle:{width:"33%"}},[a("multi-select-region",{attrs:{"custom-class":"multiselect-ghtk multiselect-no-horizontal multiselect-center-placeholder",regions:t.syllabus.regions,"is-disabled":t.viewOnly},on:{handleSelectedRegion:t.handleRegionSelected}})],1),t._v(" "),a("div",{staticClass:"p-0",staticStyle:{width:"33%"}},[a("multi-select-province",{attrs:{"custom-class":"multiselect-ghtk multiselect-no-horizontal multiselect-center-placeholder","province-ids":t.syllabus.province_ids,"is-disabled":t.viewOnly,triggerDuplicateChange:t.triggerMaster.region,region:t.syllabus.regions},on:{handleTriggerDuplicateChange:function(e){t.triggerMaster.region=!1},handleProvinceSelected:t.handleProvinceSelected}})],1),t._v(" "),a("div",{staticClass:"p-0",staticStyle:{width:"33%"}},[a("multi-select-station",{attrs:{"custom-class":"multiselect-ghtk multiselect-no-horizontal multiselect-center-placeholder","auto-close":!1,"is-disabled":t.viewOnly,triggerDuplicateChange:t.triggerMaster.province,"province-ids":t.syllabus.province_ids,"station-ids":t.syllabus.station_ids},on:{handleTriggerDuplicateChange:function(e){t.triggerMaster.province=!1},handleStationSelected:t.handleStationSelected}})],1)])]),t._v(" "),a("div",{staticClass:"row mt-2 mx-4"},[a("label",{staticClass:"col-md-2 mt-2 text-left pl-0 text-black"},[t._v("\n        Bộ phận\n        "),a("span",{directives:[{name:"show",rawName:"v-show",value:!!t.isMaster,expression:"!!isMaster"}],staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("multi-select-department",{attrs:{"custom-class":"col-md-10 p-0 multiselect-ghtk multiselect-no-horizontal multiselect-center-placeholder","auto-close":!1,disabled:t.viewOnly,"department-ids":t.syllabus.department_ids},on:{handleDepartmentSelected:t.handleDepartmentSelected}})],1),t._v(" "),a("div",{staticClass:"row mt-2 mx-4"},[a("label",{staticClass:"col-md-2 mt-2 text-left pl-0 text-black"},[t._v("\n        Vị trí\n        "),a("span",{directives:[{name:"show",rawName:"v-show",value:!!t.isMaster,expression:"!!isMaster"}],staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("multi-select-position",{staticClass:"col-md-10 p-0 multiselect-ghtk multiselect-no-horizontal multiselect-center-placeholder",attrs:{"auto-close":!1,disabled:t.viewOnly,"position-ids":t.syllabus.position_ids,triggerDuplicateChange:t.triggerMaster.department,"department-ids":t.syllabus.department_ids},on:{handlePositionSelected:t.handlePositionSelected,handleTriggerDuplicateChange:function(e){t.triggerMaster.department=!1}}})],1),t._v(" "),a("div",{staticClass:"row mt-2 mx-4"},[a("label",{staticClass:"col-md-2 mt-2 text-left pl-0 text-black"},[t._v("\n        Kiểu nhân viên\n        "),a("span",{directives:[{name:"show",rawName:"v-show",value:!!t.isMaster,expression:"!!isMaster"}],staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("SelectWorkType",{ref:"resetSelectWorkType",staticClass:"col-md-10 p-0 multiselect-ghtk multiselect-no-horizontal multiselect-center-placeholder",attrs:{position:t.syllabus.position_ids,disabled:t.viewOnly,"auto-close":!1,multiple:"","append-group-type":""},model:{value:t.syllabus.work_type_ids,callback:function(e){t.$set(t.syllabus,"work_type_ids",e)},expression:"syllabus.work_type_ids"}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isMaster,expression:"!isMaster"}],staticClass:"row mt-2 mx-4"},[a("label",{staticClass:"col-md-2 mt-2 text-left pl-0 text-black"},[t._v("\n        Điểm đạt\n        "),a("span",{staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("b-form-input",{staticClass:"rounded text-center fs-15 col-md-10",attrs:{placeholder:"Nhập mức điểm đạt",disabled:t.viewOnly,size:"xs",step:".01",type:"number"},model:{value:t.syllabus.benchmark,callback:function(e){t.$set(t.syllabus,"benchmark",e)},expression:"syllabus.benchmark"}})],1),t._v(" "),a("div",{staticClass:"row mt-2 mx-4"},[a("label",{staticClass:"col-md-2 mt-2 text-left pl-0 text-black"},[t._v("\n        Thâm niên (ngày)\n        "),a("span",{directives:[{name:"show",rawName:"v-show",value:!!t.isMaster,expression:"!!isMaster"}],staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("div",{staticClass:"col-md-10 d-flex justify-content-between p-0"},[a("b-form-input",{staticClass:"rounded text-center fs-15",staticStyle:{width:"49%!important"},attrs:{placeholder:"Từ",disabled:t.viewOnly,size:"xs",type:"number"},on:{keypress:t.helper.onlyNumber},model:{value:t.syllabus.seniority_min,callback:function(e){t.$set(t.syllabus,"seniority_min",e)},expression:"syllabus.seniority_min"}}),t._v(" "),a("b-form-input",{staticClass:"rounded text-center fs-15",staticStyle:{width:"49%!important"},attrs:{placeholder:"Đến",disabled:t.viewOnly,size:"xs",type:"number"},on:{keypress:t.helper.onlyNumber},model:{value:t.syllabus.seniority_max,callback:function(e){t.$set(t.syllabus,"seniority_max",e)},expression:"syllabus.seniority_max"}})],1)]),t._v(" "),a("div",{staticClass:"row mt-2 mx-4"},[a("label",{staticClass:"col-md-2 mt-2 text-left pl-0 text-black"},[t._v("\n        Số lượng\n        "),a("span",{directives:[{name:"show",rawName:"v-show",value:!!t.isMaster,expression:"!!isMaster"}],staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("div",{staticClass:"col-md-10 d-flex justify-content-between p-0"},[a("b-form-input",{staticClass:"rounded text-center fs-15",staticStyle:{width:"49%!important"},attrs:{placeholder:"Từ",disabled:t.viewOnly,size:"xs",type:"number"},on:{keypress:t.helper.onlyNumber},model:{value:t.syllabus.amount_min,callback:function(e){t.$set(t.syllabus,"amount_min",e)},expression:"syllabus.amount_min"}}),t._v(" "),a("b-form-input",{staticClass:"rounded text-center fs-15",staticStyle:{width:"49%!important"},attrs:{placeholder:"Đến",disabled:t.viewOnly,size:"xs",type:"number"},on:{keypress:t.helper.onlyNumber},model:{value:t.syllabus.amount_max,callback:function(e){t.$set(t.syllabus,"amount_max",e)},expression:"syllabus.amount_max"}})],1)]),t._v(" "),t.isMaster?t._e():a("div",{staticClass:"row mt-2 mx-4"},[a("label",{staticClass:"col-md-2 mt-2 text-left pl-0 text-black"},[t._v("\n        Gom học viên\n        "),a("span",{directives:[{name:"show",rawName:"v-show",value:!!t.isMaster,expression:"!!isMaster"}],staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("div",{staticClass:"col-md-10 d-flex justify-content-between p-0 flex-column"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedGatherType,expression:"selectedGatherType"}],staticClass:"form-check-input",attrs:{type:"radio",name:"gender",value:"kpi"},domProps:{checked:t._q(t.selectedGatherType,"kpi")},on:{click:function(e){return e.stopPropagation(),t.toggleRadioGather.apply(null,arguments)},change:function(e){t.selectedGatherType="kpi"}}}),t._v(" "),a("label",{staticClass:"form-check-label"},[t._v("Cơ cấu team tính KPI")])]),t._v(" "),a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedGatherType,expression:"selectedGatherType"}],staticClass:"form-check-input",attrs:{type:"radio",name:"gender",value:"no_kpi"},domProps:{checked:t._q(t.selectedGatherType,"no_kpi")},on:{click:function(e){return e.stopPropagation(),t.toggleRadioGather.apply(null,arguments)},change:function(e){t.selectedGatherType="no_kpi"}}}),t._v(" "),a("label",{staticClass:"form-check-label"},[t._v("Cơ cấu team không tính KPI")])]),t._v(" "),a("div",{staticClass:"form-check",staticStyle:{display:"flex"}},[a("div",{staticStyle:{width:"25%"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.syllabus.student_gather_type,expression:"syllabus.student_gather_type"}],staticClass:"form-check-input",attrs:{type:"radio",name:"gender",value:"manager"},domProps:{checked:t._q(t.syllabus.student_gather_type,"manager")},on:{click:function(e){return e.stopPropagation(),t.toggleRadioGather.apply(null,arguments)},change:function(e){return t.$set(t.syllabus,"student_gather_type","manager")}}}),t._v(" "),a("label",{staticClass:"form-check-label"},[t._v("Theo quản lý")])]),t._v(" "),a("div",{staticStyle:{width:"75%"}},["manager"===t.syllabus.student_gather_type?a("multi-select-position",{staticClass:"col-md-10 p-0 multiselect-ghtk multiselect-no-horizontal multiselect-center-placeholder",attrs:{disabled:t.viewOnly,id:"student_gather_type","auto-close":!0,"position-ids":t.syllabus.student_gather_positions,notInGroup:[1]},on:{handlePositionSelected:t.handleStudentGatherSelected}}):t._e()],1)])])])]),t._v(" "),t.isMaster?t._e():a("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle.lectureInfo",modifiers:{lectureInfo:!0}}],staticClass:"font-weight-bold text-dark w-100 text-left my-2 d-flex justify-content-between text-black",staticStyle:{"background-color":"#F7F7F7"},on:{click:function(e){t.active_period_inf=!t.active_period_inf}}},[t._v("\n    Thông tin buổi học\n    "),a("i",{staticClass:"fa mt-1",class:t.active_period_inf?"fa-caret-down":"fa-caret-up",staticStyle:{color:"#a3a4a6","margin-right":"1.9rem"}})]),t._v(" "),a("b-collapse",{staticClass:"mr-2",attrs:{visible:!t.isMaster,id:"lectureInfo"}},[a("period-manage",{attrs:{type:t.type,syllabus:t.syllabus,lectures:t.syllabus.lectures},on:{disableSubmit:t.disableSubmitChange,"event-file-deleted":t.eventFileDeleted}}),t._v(" "),"view"!==t.type?a("button",{staticClass:"btn btn-outline-ghtk rounded btn-sm ml-4 mt-4",attrs:{disabled:!t.canEditPeriod},on:{click:function(e){return t.insertLecture()}}},[a("span",[a("i",{staticClass:"fas fa-plus"}),t._v(" Thêm buổi học")])]):t._e()],1),t._v(" "),a("div",{staticClass:"text-center my-3"},["view"!==t.type?a("button",{staticClass:"btn btn-ghtk btn-md rounded",class:t.disableSubmitComputed?"disable-button":"",attrs:{disabled:t.disableSubmitComputed},on:{click:t.submitSyllabus}},[t._v("\n      Xác nhận\n    ")]):t._e(),t._v(" "),"view"===t.type?a("button",{staticClass:"btn btn-ghtk btn-md rounded",on:{click:t.closeModal}},[t._v("\n      Đóng\n    ")]):t._e()])],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"col-md-2 mt-2 text-left pl-0 text-black"},[this._v("Mã chương trình"),e("span",{staticClass:"text-danger ml-1"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"col-md-2 mt-2 text-left pl-0 text-black"},[this._v("Mô tả"),e("span",{staticClass:"text-danger ml-1"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"col-md-2 mt-2 text-left pl-0 text-black"},[this._v("Ngày áp dụng"),e("span",{staticClass:"text-danger ml-1"},[this._v("*")])])}],!1,Yd,"data-v-09a80eac",null).exports,Gd={name:"period-line",components:{LineItem:Mr},props:{lectures:{}},data:function(t){return{}},computed:{},methods:{}};var Kd=function(t){a("FJSv")},Vd=Object(y.a)(Gd,function(){var t=this.$createElement,e=this._self._c||t;return e("ul",{staticClass:"onboard-line"},[this._l(this.lectures,function(t,a){return[e("LineItem",{key:a,attrs:{message:"Buổi "+t.order_number+": "+t.title,contentStyle:{width:"100%",display:"inline-block",padding:"0 0 0 1.5rem"},headStyle:{width:"0.5rem",height:"0.5rem","background-color":"#00904A",border:"2px solid transparent","border-radius":"100px",position:"absolute",top:"0.35rem"},tailStyle:{position:"absolute",left:"calc(0.837rem/2 - 4px)","border-left":"2px solid #e8e8e8",height:"calc(150% - 1rem)",top:"0.85rem"}}})]})],2)},[],!1,Kd,"data-v-31992984",null).exports,Qd={name:"education-row",components:{PeriodLine:Vd,LogLine:Ir},props:{syllabus:{type:Object,default:function(){return{}}},permissionEdit:{type:Boolean,default:!1}},mounted:function(){this.getLogSyllabus(this.syllabus),this.$refs.logLine.$el.addEventListener("scroll",this.handleScroll)},data:function(t){return{logSyllabus:{currentPage:0,totalPage:0,logs:[]},loadingLogs:!1}},watch:{syllabus:function(){this.logSyllabus.logs=[],this.getLogSyllabus(this.syllabus)}},computed:{helper:function(){return Me.a},organization_desc:function(){return"all"===this.syllabus.organization_type?"Offline, Online":"online"===this.syllabus.organization_type?"Online":"offline"===this.syllabus.organization_type?"Offline":""},statusMapper:function(){var t="";return"closed"===this.syllabus.status&&(t="Đóng"),"open"===this.syllabus.status?"Mở":t},canEdit:function(){return this.syllabus.update_permission||this.syllabus.force_update_permission}},methods:{getThumbnailPeriod:function(t){return t.documents[0].links.thumbnail},formatDate:function(t){var e=new Date(t),a=""+(e.getMonth()+1),n=""+e.getDate(),i=e.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[n,a,i].join("-")},getLogSyllabus:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return l()(o.a.mark(function i(){var s;return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,e.loadingLogs=!0,i.next=4,Va({tp_id:t.id,page:a,limit:n});case 4:s=i.sent,e.logSyllabus.logs=e.logSyllabus.logs.concat(s.data.data),e.logSyllabus.currentPage=s.data.current_page,e.logSyllabus.totalPage=s.data.total_page,i.next=13;break;case 10:i.prev=10,i.t0=i.catch(0),Me.a.showMessage(i.t0.message,"warning");case 13:return i.prev=13,e.loadingLogs=!1,i.finish(13);case 16:case"end":return i.stop()}},i,e,[[0,10,13,16]])}))()},handleScroll:function(){var t=this.$refs.logLine.$el;t.scrollTop+t.clientHeight>=t.scrollHeight&&this.logSyllabus.currentPage<this.logSyllabus.totalPage&&0!==this.logSyllabus.totalPage&&this.getLogSyllabus(this.syllabus,this.logSyllabus.currentPage+1)}}};var Xd=function(t){a("EfBK")},Wd=Object(y.a)(Qd,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{staticClass:"education-row"},[a("td",{staticClass:"border-right"},[a("div",{staticClass:"d-flex flex-column"},[a("div",{staticClass:"d-flex justify-content-between mb-1 ml-2 mt-1"},[a("span",[a("b",[t._v("Nội dung:")]),t._v(" "+t._s(t.syllabus.content))])]),t._v(" "),a("div",{staticClass:"mb-1 ml-2"},[a("b",[t._v("Mã chương trình:")]),t._v(" "+t._s(t.syllabus.code)+"\n      ")]),t._v(" "),a("div",{staticClass:"mb-1 ml-2"},[a("b",[t._v("Thời gian tạo:")]),t._v(" "+t._s(t.helper.formatDate(t.syllabus.created,"HH:mm:ss DD-MM-YYYY"))+"\n      ")]),t._v(" "),a("div",{staticClass:"mb-1 ml-2"},[a("b",[t._v("Ngày bắt đầu:")]),t._v(" "+t._s(t.syllabus.time_start?t.formatDate(t.syllabus.time_start):"")+"\n      ")]),t._v(" "),a("div",{staticClass:"mb-1 ml-2"},[a("b",[t._v("Ngày kết thúc:")]),t._v(" "+t._s(t.syllabus.time_end?t.formatDate(t.syllabus.time_end):"")+"\n      ")]),t._v(" "),a("div",{staticClass:"mb-1 ml-2"},[a("b",[t._v("Người tạo:")]),t._v(" "+t._s(t.syllabus.created_by)+"\n      ")])]),t._v(" "),a("b",{staticClass:"ml-2"},[t._v("Tài liệu:")]),t._v(" "),a("div",{staticClass:"profile-document mt-1 ml-2"},[t._l(t.syllabus.periods,function(e,n){return[e.documents.length>0?a("div",{key:n,staticClass:"d-inline-block position-relative mr-1 mb-1 profile-document-container cursor-pointer",on:{click:function(a){return t.$emit("action",{action:"view-documents",data:e})}}},[a("div",{staticClass:"document-type-desc"},[t._v("\n            Tài liệu buổi "+t._s(n+1)+"\n          ")]),t._v(" "),a("span",[a("img",{staticClass:"image-document",class:n,attrs:{src:t.getThumbnailPeriod(e),alt:""}})])]):t._e()]})],2)]),t._v(" "),a("td",{staticClass:"border-right"},[a("div",{staticClass:"d-flex flex-column"},[a("span",{staticClass:"mb-1 ml-2 mt-1"},[a("b",[t._v("Học viên:")]),t._v(" "+t._s(t.syllabus.positions))]),t._v(" "),a("span",{staticClass:"mb-1 ml-2"},[a("b",[t._v("Kiểu nhân viên:")]),t._v(" "+t._s(t.syllabus.work_types))]),t._v(" "),a("span",{staticClass:"mb-1 ml-2"},[a("b",[t._v("Thâm niên:")]),t._v(" "+t._s(t.syllabus.seniority_min)+"-"+t._s(t.syllabus.seniority_max)+" ngày")]),t._v(" "),a("span",{staticClass:"mb-1 ml-2"},[a("b",[t._v("Khu vực:")]),t._v(" "+t._s(t.syllabus.regions))]),t._v(" "),a("span",{staticClass:"mb-1 ml-2"},[a("b",[t._v("Yêu cầu:")]),t._v(" "+t._s(t.helper.isEmpty(t.syllabus.required_tp)?"Không":t.syllabus.required_tp))]),t._v(" "),a("span",{staticClass:"mb-1 ml-2"},[a("b",[t._v("Số lượng học viên:")]),t._v(" "+t._s(t.syllabus.amount_min)+"-"+t._s(t.syllabus.amount_max))])]),t._v(" "),a("div",{staticClass:"mb-1 ml-2"},[a("b",[t._v("Nội dung:")]),t._v(" "),a("PeriodLine",{attrs:{lectures:t.syllabus.periods}})],1),t._v(" "),a("div",{staticClass:"mt-3 ml-2"},[a("b",[t._v("Logs:")]),t._v(" "),a("LogLine",{ref:"logLine",staticClass:"ml-0 overflow-auto mh-10re mb-1",attrs:{"time-field":"created_at",logs:t.logSyllabus.logs,headStyle:{width:"0.25rem",height:"0.25rem",background:"black",top:"0.5rem"},tailStyle:{left:"0.05rem",height:"calc(100% - 0.12rem)",top:"0.8rem"}}}),t._v(" "),t.loadingLogs?a("div",{staticClass:"text-center mt-2"},[a("i",{staticClass:"fa fa-spin fa-spinner fa-2x ghtk-color"})]):t._e()],1)]),t._v(" "),a("td",{staticClass:"text-center"},[a("div",{staticClass:"d-flex flex-column align-items-center"},[a("button",{staticClass:"btn btn-sm btn-outline-ghtk btn-pill mb-2 mt-1 font-unset btn-cus",on:{click:function(e){return t.$emit("action",{action:t.canEdit?"edit-syllabus":"view-syllabus",data:{}})}}},[t._v("\n        "+t._s(t.canEdit?"Sửa":"Xem")+"\n      ")])])])])},[],!1,Xd,"data-v-01947b15",null).exports,Jd={name:"view-document-tp-period",components:{ModalHlsPlayer:Ja},data:function(t){return{cdnLink:null,showModalHls:!1}},props:{lessons:{default:function(){return[]}}},computed:{helper:function(){return Me.a}},watch:{},methods:{previewLesson:function(t){return t.links.thumbnail},getLinkFiles:function(t){var e=this;return l()(o.a.mark(function a(){var n,i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,(n={}).file_id=[t],a.next=5,Qa(n);case 5:(i=a.sent).data.success?e.fileResponse=i.data.data:Me.a.showMessage(i.data.message,"warning"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),Me.a.showMessage(a.t0.message,"warning");case 12:case"end":return a.stop()}},a,e,[[0,9]])}))()},openLink:function(t){var e=this;return l()(o.a.mark(function a(){var n,i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.getLinkFiles(t.file_id);case 2:if(n=e.fileResponse[t.file_id],!(i=n.gdrive||n.direct||null)){a.next=13;break}if(!i.endsWith(".m3u8")){a.next=11;break}return e.cdnLink=i,e.showModalHls=!0,a.abrupt("return",!0);case 11:if("video"===n.type){a.next=13;break}return a.abrupt("return",window.open(i,"_blank"));case 13:Me.a.showMessage("Đang trong quá trình chuyển đổi tài liệu, bạn không thể xem tài liệu ngay lúc này!","warn");case 14:case"end":return a.stop()}},a,e)}))()}}};var Zd=function(t){a("fjPt")},tu={name:"education-dashboard",components:{ViewDocumentTpPeriod:Object(y.a)(Jd,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"profile-document"},[t._l(t.lessons||[],function(e,n){return[a("div",{key:"fileClass-"+n,staticClass:"profile-document__element"},[a("div",{staticClass:"w-100 title-document"},[t._v("\n          "+t._s(n+1+".  "+e.title)+"\n        ")]),t._v(" "),a("span",{staticClass:"cursor-pointer",on:{click:function(a){return t.openLink(e)}}},[a("img",{staticClass:"image-document",attrs:{src:t.previewLesson(e),alt:"Tài liệu buổi "+n}})])])]})],2),t._v(" "),a("ModalHlsPlayer",{attrs:{"cdn-link":t.cdnLink,showModal:t.showModalHls},on:{hide:function(e){t.showModalHls=!1}}})],1)},[],!1,Zd,"data-v-5b19460a",null).exports,SelectStatusSyllabus:Vc,EducationRow:Wd,EditSyllabus:zd,MultiSelectRegion:me.a,MultiSelectProvince:fe.a,MultiSelectStation:ge.a,SingleSelectUser:Ie.a,MultiSelectDepartment:_e.a,MultiSelectPosition:be.a,TimeLine:Ce.a,MultiSelectHrTag:Ts.a,MultiSelectSyllabus:ha,EditPeriodDocuments:Qc.a,MultiSelectWorkType:Ms.a,SingleSelectDepartment:Gs.a,Multiselect:la.a},props:{scrollMode:{type:Boolean},blankMode:{type:Boolean}},data:function(t){return{loading:{statistic_syllabus:!1,statistic_classroom:!1},page:{syllabus:{page:1,total_row:0,limit:5}},filter:{region:null,province:null,station:null,employee:null,student_department:null,student_position:null,teacher_position:null,status:null,form:null,work_type:null,syllabus_id:null,prerequisite_syllabus_id:null,tag:null,date:null},triggerSyllabus:!1,edit_syllabus_type:"add",cur_syllabus:{},cur_work:{},statistics:{syllabus:{type:"syllabus",button_action:{create_new_syllabus:{desc:"+ Thêm",type:"add",alias:"create_syllabus"}}}},cur_row_data:{},cur_lecture:{},EditPeriodDocType:"view",resetEditSyllabus:!1,reload_tag:0,cur_tag_data:{record:{},attach:!0},list_data:[],resetSelectSyllabus:!1,listProgram:[]}},computed:{moment:Ye.a,loading_data:function(){return this.loading.statistic_syllabus||this.loading.statistic_classroom},helper:function(){return Me.a},editSyllabusTitle:function(){return"add"===this.edit_syllabus_type?"Tạo chương trình":"edit"===this.edit_syllabus_type?"Sửa chương trình":"view"===this.edit_syllabus_type?"Xem chương trình":void 0}},created:function(){this.cur_work=this.statistics.syllabus,Me.a.isEmpty(this.$route.query.id)||(this.filter.syllabus_id=this.$route.query.id),this.getAllSyllabusExceptMaster()},watch:{cur_work:{deep:!0,handler:function(t,e){this.search()}}},methods:{getAllSyllabusExceptMaster:function(){var t=l()(o.a.mark(function t(){var e,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(e={}).is_master=0,t.next=5,ca.a.getAllSyllabus(e);case 5:(a=t.sent).data.success?this.listProgram=a.data.data:Me.a.showMessage(a.data.message,"warning"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),Me.a.showMessage(t.t0.message,"warning");case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(){return t.apply(this,arguments)}}(),action:function(t,e){this.cur_row_data=t,"edit-syllabus"===e.action&&this.handleButtonAction({alias:"edit_syllabus"}),"view-syllabus"===e.action&&this.handleButtonAction({alias:"view-syllabus"}),"update-syllabus-status"===e.action&&this.updateStatusSyllabus(e.data.status,e.data.old_status),"update-syllabus-ok"===e.action&&(this.$bvModal.hide("modal-create-syllabus"),this.resetSelectSyllabus=!this.resetSelectSyllabus,this.getSyllabuses()),"close-update-syllabus"===e.action&&this.$bvModal.hide("modal-create-syllabus"),"view-documents"===e.action&&(this.cur_lecture=e.data,this.$bvModal.show("view-period-documents"))},search:function(){this.page.syllabus.page=1,this.getSyllabuses()},handleButtonAction:function(t){this.triggerSyllabus=!this.triggerSyllabus,"create_syllabus"===t.alias&&(this.edit_syllabus_type="add",this.$bvModal.show("modal-create-syllabus")),"edit_syllabus"===t.alias&&(this.edit_syllabus_type="edit",this.$bvModal.show("modal-create-syllabus")),"view-syllabus"===t.alias&&(this.edit_syllabus_type="view",Me.a.showMessage("Do chương trình đang có lớp học Đang diễn ra nên bạn chỉ có thể Xem!"),this.$bvModal.show("modal-create-syllabus"))},updateStatusSyllabus:function(t,e){var a=this;return l()(o.a.mark(function n(){var i;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a.loading.statistic_syllabus=!0,n.next=4,ca.a.editSyllabus({type:"single",old_syllabus:{id:a.cur_row_data.id,status:e},syllabus:{id:a.cur_row_data.id,status:t}});case 4:(i=n.sent).data.success?(Me.a.showMessage("Cập nhật trạng thái thành công!","success"),a.cur_row_data.status=t):Me.a.showMessage(i.data.message,"warning"),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),Me.a.showMessage(n.t0.message,"warning");case 11:return n.prev=11,a.loading.statistic_syllabus=!1,n.finish(11);case 14:case"end":return n.stop()}},n,a,[[0,8,11,14]])}))()},getSyllabuses:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading.statistic_syllabus=!0,a=i()({},t.filter),Me.a.isEmpty(t.filter.date)||(a.start_date=Me.a.formatDate(t.filter.date.start,"YYYY-MM-DD"),a.end_date=Me.a.formatDate(t.filter.date.end,"YYYY-MM-DD")),Me.a.isEmpty(a.form)||(a.form=a.form.value),e.next=7,Ka(i()({},a,t.page.syllabus));case 7:(n=e.sent).data.success?(Me.a.showMessage(n.data.message,"success"),t.list_data=n.data.data.data,t.page.syllabus.total_row=n.data.data.total):Me.a.showMessage(n.data.message,"warning"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),Me.a.showMessage(e.t0.message,"warning");case 14:return e.prev=14,t.loading.statistic_syllabus=!1,e.finish(14);case 17:case"end":return e.stop()}},e,t,[[0,11,14,17]])}))()},resetFilter:function(){for(var t in this.filter)"status"!==t&&(this.filter[t]=null)},formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD/MM/YYYY";return Me.a.formatDate(t,e)},handleProvinceSelected:function(t){this.filter.province=t?t.map(function(t){return t.id}).toString():""},handleStatusSelected:function(t){this.filter.status=t?t.id.toString():""},handleStationSelected:function(t){this.filter.station=t?t.map(function(t){return t.id}).toString():""},handleStudentDepartmentSelected:function(t){this.filter.student_department=t?t.id:""},handlePositionSelected:function(t){this.filter.position=t?t.map(function(t){return t.id}).toString():""},handleStudentPositionSelected:function(t){this.filter.student_position=t?t.map(function(t){return t.id}).toString():""},handleTeacherPositionSelected:function(t){this.filter.teacher_position=t?t.map(function(t){return t.id}).toString():""},handleHrTagSelected:function(t){this.filter.tag=t?t.map(function(t){return t.id}).toString():""},handleSyllabusSelected:function(t){this.filter.syllabus_id=t?t.map(function(t){return t.id}).toString():""},handlePreRequisiteSyllabusSelected:function(t){this.filter.prerequisite_syllabus_id=t?t.map(function(t){return t.id}).toString():""},handleRegionSelected:function(t){this.filter.region=t?t.map(function(t){return t.id}).toString():"",t||(this.filter.province="")},handleSelectedWorkType:function(t){this.filter.work_type=t?t.map(function(t){return t.id}).toString():""}}};var eu=function(t){a("Szb1")},au=Object(y.a)(tu,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"small-scrollbar work-dash"},[a("b-row",{staticClass:"header mt-2 mb-3 align-items-center d-flex justify-content-between px-3"},[a("div",{staticClass:"d-flex",staticStyle:{"align-items":"baseline"}},[a("h4",{staticClass:"m-0 font-weight-bold text-black"},[t._v("Đào tạo")]),t._v(" "),a("router-link",{staticClass:"m-0 header-setting",attrs:{to:"/staff-work/classes"}},[t._v("Quay lại")])],1),t._v(" "),a("div",{staticClass:"action-wrap"},[t._l(t.cur_work.button_action,function(e,n){return a("button",{key:n,staticClass:"btn btn-ghtk rounded btn-act",on:{click:function(a){return t.handleButtonAction(e)}}},[t._v("\n          "+t._s(e.desc)+"\n        ")])}),t._v(" "),a("div",{staticClass:"action-toggle"},[a("div",{staticClass:"action-toggle__left"},[t._v("Chương trình")]),t._v(" "),a("router-link",{staticClass:"link action-toggle__right",attrs:{to:"/staff-work/questions"}},[t._v("\n                  Câu hỏi\n            ")])],1)],2)]),t._v(" "),a("div",{staticClass:"row filter pb-2 justify-content-between input-border"},[a("div",{staticClass:"mb-1 input-filter"},[a("multi-select-syllabus",{attrs:{"custom-class":"z-5 multiselect-ghtk multiselect-no-horizontal","syllabuse-ids":t.filter.syllabus_id,"auto-close":!0,placeholder:"Tên/Mã CT",reset:t.resetSelectSyllabus},on:{handleSyllabusSelected:t.handleSyllabusSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter"},[a("SelectStatusSyllabus",{attrs:{"custom-class":"z-5 multiselect-ghtk multiselect-no-horizontal",regions:t.filter.region,"auto-close":!0,placeholder:"Trạng thái"},on:{input:t.handleStatusSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter"},[a("multi-select-region",{attrs:{"custom-class":"z-5 multiselect-ghtk multiselect-no-horizontal",regions:t.filter.region,"auto-close":!0,placeholder:"Miền"},on:{handleSelectedRegion:t.handleRegionSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter"},[a("multi-select-province",{attrs:{"custom-class":"z-5 multiselect-ghtk multiselect-no-horizontal","province-ids":t.filter.province,region:t.filter.region,"auto-close":!0,"hide-select":!0,placeholder:"Tỉnh"},on:{handleProvinceSelected:t.handleProvinceSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter"},[a("multi-select-station",{staticClass:"z-3 multiselect-ghtk multiselect-no-horizontal",attrs:{"province-ids":t.filter.province,"station-ids":t.filter.station,"auto-close":!0,isActive:!0,"hide-select":!0,placeholder:"Kho"},on:{handleStationSelected:t.handleStationSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter"},[a("single-select-department",{attrs:{"custom-class":"z-3 multiselect-ghtk multiselect-no-horizontal","department-id":t.filter.student_department,"auto-close":!0,"hide-selected":!0,placeholder:"Bộ phận học viên"},on:{handleSelectedDepartment:t.handleStudentDepartmentSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter"},[a("MultiSelectPosition",{staticClass:"z-3 multiselect-ghtk multiselect-no-horizontal",attrs:{"department-ids":t.filter.student_department,"position-ids":t.filter.student_position,"auto-close":!0,"hide-selected":!0,placeholder:"Vị trí học viên",isSyllabus:!0},on:{handlePositionSelected:t.handleStudentPositionSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter"},[a("MultiSelectWorkType",{attrs:{"custom-class":"z-3 multiselect-ghtk multiselect-no-horizontal","custom-multiselect-class":"z-3","auto-close":!0,multiple:!0,positionCustom:t.filter.student_position,placeholder:"Kiểu học viên",workTypeId:t.filter.work_type},on:{handleSelectedWorkType:t.handleSelectedWorkType}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter"},[a("single-select-user",{staticClass:"z-3 multiselect-ghtk multiselect-no-horizontal",attrs:{placeholder:"Người tạo"},on:{onChange:function(e){t.filter.creator=e?e.id:null}}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter"},[a("v-date-picker",{attrs:{mode:"range",locale:"vi",color:"green","input-props":{placeholder:"Thời gian tạo",style:"font-size:14px; line-height: unset",class:"z-3 form-control rounded"},popover:{visibility:"focus"}},model:{value:t.filter.date,callback:function(e){t.$set(t.filter,"date",e)},expression:"filter.date"}})],1),t._v(" "),a("div",{staticClass:"text-right input-filter"}),t._v(" "),a("div",{staticClass:"text-right input-filter"}),t._v(" "),a("div",{staticClass:"text-right input-filter"}),t._v(" "),a("div",{staticClass:"text-right input-filter"},[a("button",{staticClass:"btn btn-ghtk rounded w-100",staticStyle:{"line-height":"initial","font-size":"18px"},on:{click:function(e){return t.search()}}},[a("i",{staticClass:"fas fa-search",staticStyle:{padding:"0 10px"}}),t._v(" "),a("span",[t._v("Tìm kiếm")])])])]),t._v(" "),a("div",{staticClass:"mh-75 table-data",class:t.scrollMode&&"table-sticky"},[a("table",{staticClass:"table table-sm mb-0"},[t._m(0),t._v(" "),a("tbody",{directives:[{name:"loading",rawName:"v-loading",value:t.loading_data,expression:"loading_data"}],staticClass:"position-relative"},[t._l(t.list_data,function(e,n){return[a("EducationRow",{key:n,attrs:{syllabus:e},on:{action:function(a){for(var n=arguments.length,i=Array(n);n--;)i[n]=arguments[n];return t.action.apply(void 0,[e].concat(i))}}})]}),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:t.helper.isEmpty(t.list_data),expression:"helper.isEmpty(list_data)"}]},[a("td",{attrs:{colspan:"10"}},[a("div",{staticClass:"mih-25 d-flex justify-content-center align-items-center"},[a("b",{directives:[{name:"show",rawName:"v-show",value:!t.loading_data,expression:"!loading_data"}]},[t._v("Không có dữ liệu phù hợp !")])])])])],2)])]),t._v(" "),a("div",{staticClass:"row mt-3 align-items-center"},[a("div",{staticClass:"col col-md-9 text-left"},[a("b",{staticClass:"text-black"},[t._v("\n          Bản ghi/ trang\n        ")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.page.syllabus.limit,expression:"page.syllabus.limit"}],staticClass:"form-control form-control-sm w-4re text-ghtk rounded border-ghtk d-inline-block",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.page.syllabus,"limit",e.target.multiple?a:a[0])},function(e){return t.getSyllabuses()}]}},[a("option",[t._v("5")]),t._v(" "),a("option",[t._v("10")]),t._v(" "),a("option",[t._v("25")]),t._v(" "),a("option",[t._v("50")]),t._v(" "),a("option",[t._v("100")])]),t._v(" "),a("div",{staticClass:"z-0 d-inline-block"},[a("b-pagination",{staticClass:"paginator-ghtk mb-0",attrs:{size:"sm",align:"left","total-rows":+t.page.syllabus.total_row,"per-page":+t.page.syllabus.limit},on:{input:function(e){return t.getSyllabuses()}},model:{value:t.page.syllabus.page,callback:function(e){t.$set(t.page.syllabus,"page",e)},expression:"page.syllabus.page"}})],1)])]),t._v(" "),a("b-modal",{staticClass:"modal-syllabus",attrs:{id:"modal-create-syllabus","title-class":"w-100 pl-5","body-class":"p-0","header-class":"text-center","modal-class":"modal-xl","no-close-on-backdrop":!0,title:t.editSyllabusTitle,"hide-footer":"",static:""},on:{hidden:function(e){t.cur_row_data={}}}},[a("EditSyllabus",{attrs:{"edit-syllabus-data":t.cur_row_data,type:t.edit_syllabus_type,"list-program":t.listProgram,"trigger-syllabus":t.triggerSyllabus},on:{action:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return t.action.apply(void 0,[null].concat(n))}}})],1),t._v(" "),a("b-modal",{attrs:{id:"view-period-documents","title-class":"font-weight-bold w-100","header-class":"text-center","modal-class":"modal-md","hide-footer":""}},[a("template",{slot:"modal-header"},[a("h4",{staticClass:"w-100 m-0"},[t._v("Tài liệu học buổi "+t._s(this.cur_lecture.order_number))])]),t._v(" "),a("ViewDocumentTpPeriod",{attrs:{lessons:this.cur_lecture.documents}})],2)],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",{staticClass:"text-center"},[e("th",{staticClass:"w-30 text-black"},[this._v("Chương trình học")]),this._v(" "),e("th",{staticClass:"text-black"},[this._v("Đối tượng & Nội dung")]),this._v(" "),e("th",{staticClass:"text-black",staticStyle:{width:"16%"}},[this._v("Thao tác")])])])}],!1,eu,"data-v-f9e5c1bc",null).exports,nu={name:"update-order-stop-work",props:{idOrder:{default:null},profileId:{default:null},modalStyle:{default:!1,type:Boolean},orderType:{default:null},edit:{type:Boolean,default:!1}},components:{SelectOrderType:ke.a,SelectOrderStatus:ve.a,SelectOrderGroup:Dl.a,Datepicker:qi.a,Multiselect:la.a,FileViewUpload:Il.a,ModalDetailFile:Pl.a},created:function(){this.getType(),this.idOrder?(this.showAction=!0,this.detailOrder(this.idOrder)):this.profileId&&(this.getProfileInfo(this.profileId),this.employee.masterProfile.id=this.profileId,this.employee.masterProfile.staff_code=this.profileId)},data:function(t){return{loadingProfileInfo:!1,loadingOrderInfo:!1,eligibleCreate:!0,legalCreate:!0,isRelateOrder:null,duty:{insurance:null},censor:null,rejectReason:null,language:{vi:to.a},contractType:Fe.a.typeOptions,birthdayStatusOptions:or.a.birthdayStatusOptions,fileTypeOptions:or.a.fileTypeOptions,orderTypeOption:[],modifyConfig:{7:{oldInput:{class:"col-md-4",disable:!1,label:"Mức đóng BHXH cũ"},newInput:{class:"col-md-4",disable:!1,label:"Mức đóng BHXH mới"},inputFile:!1,showTimeChange:!0},8:{oldInput:{class:"col-md-4",disable:!1,label:"Nơi làm cũ"},newInput:{class:"col-md-4",disable:!1,label:"Nơi làm mới"},inputFile:!1,showTimeChange:!0},9:{oldInput:{class:"col-md-4",disable:!1,label:"Vị trí cũ"},newInput:{class:"col-md-4",disable:!1,label:"Vị trí mới"},inputFile:!1,showTimeChange:!0},13:{oldInput:{class:"col-md-4",disable:!1,label:"Họ và tên sai"},newInput:{class:"col-md-4",disable:!1,label:"Họ và tên đúng"},inputFile:!0,showTimeChange:!0},12:{oldInput:{class:"col-md-4",disable:!1,label:"Ngày sinh sai"},newInput:{class:"col-md-4",disable:!1,label:"Ngày sinh đúng"},inputFile:!0,showTimeChange:!0},32:{oldInput:{class:"col-md-4",disable:!1,label:"Tỉ lệ cũ (%)"},newInput:{class:"col-md-4",disable:!1,label:"Tỉ lệ mới (%)"},showTimeChange:!0,inputFile:!0}},order:{id:null,profile_id:null,order_category:null,order_group:null,order_type_id:null,order_type_alias:null,group_name:null,start_date:null,new_value:null,old_value:null,status:null,deadline:null,note:null,additional_info:{insurance_register:null,pay_rate:null,resp_allowance:null,birthday_status:null},files:[{type:null,file_exist:[],file_add:[]}]},employee:{masterProfile:{id:null,staff_code:null,region:null,fullname:null,status:null,birthday:null,insurance_register:null,health_ins_number:null},empProfile:{position_job:null,position_name:null},user:{id:null,username:null,station_id:null,status_id:null,station_name:null,work_type:null},e_contract:{file:null,savis_code:null},insurance:{id:null,insurance_id:null,status:null,from:null,to:null,insurance_desc:null,company_cost:null,worker_cost:null}},showEmployeeInfo:{staff_code:{category:["insurance","working_process"]},region:null,fullname:{category:["insurance","contract","working_process"]},mp_status:{category:["insurance","working_process"]},birthday:{category:["insurance"]},birthday_status:{category:["insurance"]},insurance_register:null,health_ins_number:null,position_name:{category:["insurance","working_process"]},username:null,station_id:null,status_id:null,station_name:{category:["insurance","working_process"]},work_type:{category:["working_process"]},insurance_id:null,insurance_status:null,insurance_from:null,insurancve_to:null,insurance_desc:{category:["insurance"]},company_cost:null,worker_cost:null},showNoteInput:{category:["working_process"],group:["modify","regime","supply_bhxh","supply_bhyt"],type:[]},staffCodeAlert:null,relateInfo:[],supply_bhxh:"supply_bhxh",filter:{insurance_desc:null,health_ins_number:null,insurance_register:null},showAction:!1}},computed:i()({},Object(_.c)({curUser:"userInfo"}),{showNote:function(){return this.showNoteInput.category.includes(this.order.order_category)||this.showNoteInput.group.includes(this.order.order_group)||this.showNoteInput.type.includes(this.order.order_type_alias)}}),watch:{"order.order_type_id":function(t,e){this.order.id&&(this.order.order_type_id=18),this.order.additional_info.pay_rate=1==+t||33==+t?32:2==+t?.5:null},"order.order_category":function(t,e){this.staffCodeAlert=null,this.idOrder||this.initAndFormatDataFromEmployee()},orderType:{immediate:!0,handler:function(t,e){this.staffCodeAlert=null,this.employee.masterProfile.staff_code=null,this.checkStaffCode(),t?this.initOrderType(t):this.selectGroupOrder(null)}},idOrder:function(t,e){this.staffCodeAlert=null,this.isRelateOrder=!1,t?this.detailOrder(t):this.resetAllData()},profileId:function(t,e){this.staffCodeAlert=null,t&&!this.idOrder?(this.getProfileInfo(t),this.employee.masterProfile.id=t,this.employee.masterProfile.staff_code=t):this.resetAllData()}},methods:{suggestData:function(){var t=this;if(!this.idOrder&&this.order.order_type_id&&this.order.order_type_alias&&this.order.profile_id&&this.employee.user.id){var e={orderTypeId:this.order.order_type_id,orderTypeAlias:this.order.order_type_alias,profileId:this.order.profile_id,userId:this.employee.user.id,orderCategory:this.order.orderCategory};Se.a.suggestData(e).then(function(e){if(e.data.success){if(e.data.data){if(!e.data.data.saveField||Me.a.isEmpty(e.data.data.suggestData))return;var a=e.data.data.saveField,n=e.data.data.suggestData;for(var i in n)t.order[a][i]=n[i];Me.a.isEmpty(n)&&t.resetObj(t.order[a])}}else e.data.data&&e.data.data.prevent&&(t.staffCodeAlert=e.data.message,t.legalCreate=!1),console.log(e.data.message||"Không lấy được dữ liệu gợi ý cho đề xuất !")}).catch(function(t){console.log(t)})}},getType:function(){var t=this;if(sessionStorage.getItem("hrOrderType"))return this.orderTypeOption=JSON.parse(sessionStorage.getItem("hrOrderType")),void this.initOrderType(this.orderType);Se.a.getType().then(function(e){e.data.success&&(sessionStorage.setItem("hrOrderType",sa()(e.data.data)),t.orderTypeOption=e.data.data,t.initOrderType(t.orderType))}).catch(function(t){console.log(t),Me.a.showMessage("Có lỗi xảy ra, không lấy được danh sách loại khai báo !")})},initOrderType:function(t){var e=null,a=!0,n=!1,i=void 0;try{for(var s,o=fa()(this.orderTypeOption);!(a=(s=o.next()).done);a=!0){var r=s.value;if(r&&!Me.a.isEmpty(r.types)&&(e=r.types.find(function(e){return e.alias===t})))break}}catch(t){n=!0,i=t}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}this.selectTypeOrder(e)},resetAllData:function(){this.selectGroupOrder(null),this.order.id=null,this.order.profile_id=null,this.order.status=null,this.order.files=[{type:null,file_exist:[],file_add:[]}],this.order.deadline=null,this.staffCodeAlert=null,this.censor=null,this.isRelateOrder=null,delete this.order.created_by,this.resetEmployee(),this.initOrderType(this.orderType)},resetEmployee:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;for(var e in this.employee)e!==t&&this.resetObj(this.employee[e])},checkStaffCode:function(){return this.employee.masterProfile.staff_code?this.employee.masterProfile.staff_code.length<8?(this.staffCodeAlert="Mã nhân viên phải bao gồm 8 ký tự số VD: 00345678",this.resetObj(this.employee.masterProfile,"staff_code"),void this.resetEmployee("masterProfile")):void(8!==this.employee.masterProfile.staff_code.length?Me.a.validValue(this.employee.masterProfile,"staff_code",{length:8}):this.getProfileInfo(this.employee.masterProfile.staff_code)):(this.staffCodeAlert=null,void this.resetEmployee())},validData:function(){var t="";return this.order.order_group||(t+="- Loại khai báo\n"),this.order.order_type_id||(t+="- Phương án đề xuất\n"),this.order.profile_id||(t+="- Chọn người lao động\n"),this.order.order_category&&"insurance"!==this.order.order_category||this.order.additional_info.birthday_status||(t+="- Chọn trạng thái ngày sinh\n",this.order.additional_info.birthday_status=""),this.order.additional_info.birthday_status||(t+="- Chỉ có năm sinh\n"),t||!0},updateOrder:function(){var t=this,e=this.validData();if(!0===e){var a=new FormData;for(var n in this.order)("object"!==na()(this.order[n])||this.order[n]instanceof Date)&&(this.order[n]?("order_group"===n&&(this.order[n]="supply_bhxh"),"order_type_name"===n&&(this.order[n]="Chốt sổ nghỉ việc"),"group_name"===n&&(this.order[n]="Cấp/Gộp/Chốt BHXH"),"order_type_alias"===n&&(this.order[n]="supply_bhxh_close"),"order_category_name"===n&&(this.order[n]="BHXH"),"order_category"===n&&(this.order[n]="insurance"),a.append(n,this.order[n])):a.append(n,""));if(Array.isArray(this.order.files)&&this.order.files.length){var i=!0,s=!1,o=void 0;try{for(var r,l=fa()(this.order.files);!(i=(r=l.next()).done);i=!0){var c=r.value;if(Array.isArray(c.file_add))for(var d in c.file_add)c.file_add[d]&&a.append(c.type+"["+d+"]",c.file_add[d])}}catch(t){s=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(s)throw o}}}this.$startLoading(),Se.a.updateOrder(a).then(function(e){e.data.success?(t.$emit("addOrderOk"),t.resetEmployee(),t.resetAllData(),t.showAction=!1,Me.a.showMessage(e.data.message||"Tạo đề xuất thành công","success")):Me.a.showMessage(e.data.message||"Tạo đề xuất không thành công!","warning")}).catch(function(t){console.log(t)}).then(function(e){t.$stopLoading()})}else alert("Vui lòng nhập đủ thông tin:\n"+e)},updateStatusOrder:function(){var t=this,e=new FormData;if(e.append("id",this.idOrder),e.append("action","duyet"),Array.isArray(this.order.files)&&this.order.files.length){var a=!0,n=!1,i=void 0;try{for(var s,o=fa()(this.order.files);!(a=(s=o.next()).done);a=!0){var r=s.value;if(Array.isArray(r.file_add))for(var l in r.file_add)r.file_add[l]&&e.append(r.type+"["+l+"]",r.file_add[l])}}catch(t){n=!0,i=t}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}}Se.a.updateStatus(e).then(function(e){e.data.success?(t.$emit("addOrderOk"),t.resetEmployee(),t.resetAllData(),t.showAction=!1,Me.a.showMessage(e.data.message||"Xác nhận bàn giao thành công","success")):Me.a.showMessage(e.data.message||"Không cập nhật được thông tin đề xuất !","warning")}).catch(function(t){console.log(t)}).then(function(e){t.$stopLoading()})},detailOrder:function(t){var e=this;t&&(this.showAction=!0,this.loadingOrderInfo=!0,Se.a.detailOrder({id:t}).then(function(t){t.data.success&&t.data.data?(e.order=t.data.data,"supply_bhxh"!==e.order.order_group&&(e.supply_bhxh="supply_bhxh"),e.duty=t.data.duty,e.censor=t.data.censor,e.relateInfo=t.data.relateInfo||[],t.data.data.profile_id&&(e.employee.masterProfile.staff_code=Me.a.genCode(t.data.data.profile_id,"","",8),e.getProfileInfo(e.employee.masterProfile.staff_code))):Me.a.showMessage(t.data.message||"Không lấy được đề xuất, vui lòng thử lại sau !","warning")}).catch(function(t){Me.a.showMessage("Có lỗi xảy ra, vui lòng thử lại sau !","warning")}).then(function(t){e.loadingOrderInfo=!1}))},getProfileInfo:function(t){var e=this;if(t||(t=this.profileId),t){this.loadingProfileInfo=!0;var a={profileId:t,category:this.order.order_category,group:this.order.order_group,alias:this.order.order_type_alias};Se.a.getProfile(a).then(function(t){t.data.success?(e.staffCodeAlert=null,e.employee=t.data.data,e.filter.insurance_desc=e.employee.insurance.insurance_desc||null,e.filter.health_ins_number=e.employee.masterProfile.health_ins_number||null,e.filter.insurance_register=e.employee.masterProfile.insurance_register||null,e.order.additional_info.birthday_status="dd/mm/yyyy",e.employee.masterProfile.birthday&&(e.employee.masterProfile.birthday=Ye()(e.employee.masterProfile.birthday).format("DD-MM-YYYY")),e.idOrder||(e.order.profile_id=e.employee.masterProfile.id,e.initAndFormatDataFromEmployee())):(Me.a.showMessage(t.data.message||"Không lấy được thông tin người lao động, vui lòng thử lại sau !","warning"),e.resetObj(e.employee.masterProfile,"staff_code"),e.resetEmployee("masterProfile"),e.resetData(),e.staffCodeAlert=t.data.message||"Không tồn tại nhân viên có mã "+e.employee.masterProfile.staff_code)}).catch(function(t){Me.a.showMessage("Có lỗi xảy ra, vui lòng thử lại sau !","warning")}).then(function(t){e.loadingProfileInfo=!1})}},initAndFormatDataFromEmployee:function(){this.order.order_category&&"insurance"!==this.order.order_category||(this.employee.masterProfile&&this.employee.masterProfile.id?this.employee.contract&&this.employee.contract.id?["indefinite","definite","definite_24","probation"].includes(this.employee.contract.type_contract)?this.employee.contract.end_date&&Ye()().isAfter(this.employee.contract.end_date)&&(this.staffCodeAlert=(this.contractType[this.employee.contract.type_contract]||"Hợp đồng")+" của nhân viên này đã hết hạn"):this.staffCodeAlert="Hợp đồng của nhân viên này"+(this.contractType[this.employee.contract.type_contract]?" là "+this.contractType[this.employee.contract.type_contract]:"")+" không phải hợp đồng lao động":this.staffCodeAlert="Nhân viên này chưa có hợp đồng lao động":this.staffCodeAlert=null,this.assignOldData())},canAddLicenses:function(){if(!this.order.files||!this.order.files.length)return!0;var t=this.order.files[this.order.files.length-1];return!!(t&&t.type&&(t.file_add&&t.file_add.length||t.file_exist&&t.file_exist.length))},addLicenses:function(){this.order.files.push({type:null,file_add:[],file_exist:[]})},deleteLicense:function(t){this.order.files[t]&&(this.order.files[t].file_exist&&this.order.files[t].file_exist.length?Me.a.showMessage("Không thể xóa chứng từ đã upload !"):this.order.files.splice(t,1))},selectTypeOrder:function(t){t?(this.order.order_type_id=t.id,this.order.order_type_alias=t.alias,this.order.order_group=t.group_alias,this.order.group_name=t.group_name,this.order.order_category=t.category):(this.order.order_type_id=null,this.order.order_type_alias=null),this.order.new_value=null,this.order.old_value=null,this.modifyConfig[this.order.order_type_id]&&!this.modifyConfig[this.order.order_type_id].inputFile&&(this.order.file=[]),"modify"===this.order.order_group&&this.assignOldData()},assignOldData:function(){"modify"===this.order.order_group&&(7==+this.order.order_type_id&&(this.order.old_value=this.employee.salary.salary,this.inputMoney(this.order,"old_value")),9==+this.order.order_type_id&&(this.order.old_value=this.employee.empProfile.position_job),8==+this.order.order_type_id&&(this.order.old_value=this.employee.user.station_id),32==+this.order.order_type_id&&(this.order.old_value=+this.employee.insurance.company_cost+ +this.employee.insurance.worker_cost))},selectGroupOrder:function(t){t?(this.order.group_name=t.name,this.order.order_group=t.alias,this.order.order_category=t.category):(this.order.group_name=null,this.order.order_group=null,this.order.order_category=null),t&&"up"===t.alias?this.order.order_type_id=1:this.order.order_type_id=null,this.order.order_type_alias=null,this.order.order_type_name=null,this.resetData()},resetData:function(){this.order.new_value=null,this.order.note=null,this.order.old_value=null,this.order.start_date=null,this.order.files=[{type:null,file_add:[],file_exist:[]}],this.order.additional_info?this.resetObj(this.order.additional_info):this.order.additional_info={}},resetObj:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Me.a.resetData(t,e)}}};var iu=function(t){a("1N6s")},su=Object(y.a)(nu,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"small-scrollbar"},[a("div",{staticClass:"order-type"},[a("b-form-row",[a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Loại khai báo"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Loại khai báo "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("select-order-group",{attrs:{"group-options":t.orderTypeOption,group:t.supply_bhxh,disabled:!!t.order.id,"category-group":!0,multiple:!1},on:{input:t.selectGroupOrder}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Phương án"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Phương án "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("select-order-type",{attrs:{"type-options":t.orderTypeOption,"has-group":!1,"group-alias":t.supply_bhxh,type:t.order.order_type_id,disabled:!!t.order.id},on:{input:t.selectTypeOrder}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Hạn duyệt"}},[a("Datepicker",{attrs:{language:t.language.vi,format:"dd/MM/yyyy",placeholder:"dd/mm/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},model:{value:t.order.deadline,callback:function(e){t.$set(t.order,"deadline",e)},expression:"order.deadline"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Trạng thái xử lý"}},[a("select-order-status",{attrs:{status:t.order.status,disabled:!0,placeholder:"Trạng thái"},on:{select:function(e){t.order.status=e?e.value:null}}})],1)],1)],1),t._v(" "),a("div",{staticClass:"employee-info"},[a("div",{staticClass:"header mb-3 mt-1 font-weight-bold"},[t._v("\n      Thông tin người lao động\n    ")]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingProfileInfo,expression:"loadingProfileInfo"}],staticClass:"position-relative"},[a("b-alert",{attrs:{show:!!t.staffCodeAlert&&!t.isRelateOrder,variant:"warning"}},[a("b",[t._v("Lưu ý: ")]),t._v(" "),a("span",{domProps:{innerHTML:t._s(t.staffCodeAlert)}})]),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Mã nhân viên",disabled:!(!t.profileId&&!t.order.id)}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Mã nhân viên "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.employee.masterProfile.staff_code,expression:"employee.masterProfile.staff_code"}],staticClass:"form-control",class:{"is-invalid":""===t.employee.masterProfile.staff_code},attrs:{type:"number",placeholder:"Mã nhân viên"},domProps:{value:t.employee.masterProfile.staff_code},on:{input:[function(e){e.target.composing||t.$set(t.employee.masterProfile,"staff_code",e.target.value)},t.checkStaffCode]}})]),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Họ và tên",disabled:!!t.employee.masterProfile.fullname}},[a("b-input",{attrs:{placeholder:"Họ và tên"},model:{value:t.employee.masterProfile.fullname,callback:function(e){t.$set(t.employee.masterProfile,"fullname",e)},expression:"employee.masterProfile.fullname"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Trạng thái BHXH hiện tại",disabled:!0}},[a("b-input",{attrs:{placeholder:"Trạng thái BHXH hiện tại"},model:{value:t.filter.insurance_desc,callback:function(e){t.$set(t.filter,"insurance_desc",e)},expression:"filter.insurance_desc"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Trạng thái MP",disabled:!!t.employee.masterProfile.status}},[a("b-input",{attrs:{placeholder:"trạng thái master profile"},model:{value:t.employee.masterProfile.status,callback:function(e){t.$set(t.employee.masterProfile,"status",e)},expression:"employee.masterProfile.status"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Vị trí",disabled:!!t.employee.empProfile.position_name}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.employee.empProfile.position_name,expression:"employee.empProfile.position_name"}],staticClass:"form-control",attrs:{placeholder:"Vị trí"},domProps:{value:t.employee.empProfile.position_name},on:{input:function(e){e.target.composing||t.$set(t.employee.empProfile,"position_name",e.target.value)}}})]),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Nơi làm việc (kho hiện tại)",disabled:!!t.employee.user.station_name}},[a("b-input",{attrs:{placeholder:"Nơi làm việc"},model:{value:t.employee.user.station_name,callback:function(e){t.$set(t.employee.user,"station_name",e)},expression:"employee.user.station_name"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Chỉ có năm sinh *",disabled:!!t.order.additional_info.birthday_status}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Chỉ có năm sinh "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("b-select",{attrs:{options:t.birthdayStatusOptions,state:""!==t.order.additional_info.birthday_status&&null},model:{value:t.order.additional_info.birthday_status,callback:function(e){t.$set(t.order.additional_info,"birthday_status",e)},expression:"order.additional_info.birthday_status"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Ngày sinh",disabled:!!t.employee.masterProfile.birthday}},[a("b-input",{attrs:{placeholder:"Ngày sinh"},model:{value:t.employee.masterProfile.birthday,callback:function(e){t.$set(t.employee.masterProfile,"birthday",e)},expression:"employee.masterProfile.birthday"}})],1)],1)],1)]),t._v(" "),a("b-alert",{attrs:{show:!!t.isRelateOrder,variant:"warning"}},[a("b",[t._v("Vui lòng nhập đủ thông tin cho đề xuất liên quan này")])]),t._v(" "),a("div",[a("div",{staticClass:"insurance"},[a("div",{staticClass:"header mb-3 mt-2 font-weight-bold"},[t._v("\n        BHXH, BHYT\n      ")]),t._v(" "),a("div",[a("b-form-row",[a("b-form-group",{staticClass:"col-md-4",attrs:{disabled:!0,label:"Mã số BHXH"}},[a("b-input",{attrs:{placeholder:"Mã số BHXH"},model:{value:t.employee.masterProfile.insurance_register,callback:function(e){t.$set(t.employee.masterProfile,"insurance_register",e)},expression:"employee.masterProfile.insurance_register"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4",attrs:{disabled:!0,label:"Mã số BHYT"}},[a("b-input",{attrs:{placeholder:"Mã số BHYT"},model:{value:t.employee.masterProfile.health_ins_number,callback:function(e){t.$set(t.employee.masterProfile,"health_ins_number",e)},expression:"employee.masterProfile.health_ins_number"}})],1)],1)],1)])])],1),t._v(" "),a("b-form-row",[a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.showNote,expression:"showNote"}],staticClass:"col-md-12",attrs:{label:"Ghi chú"}},[a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.order.note,expression:"order.note",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{name:"note",id:"note",rows:"2"},domProps:{value:t.order.note},on:{input:function(e){e.target.composing||t.$set(t.order,"note",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])],1),t._v(" "),a("fieldset",{staticClass:"border rounded form-group"},[a("legend",{staticClass:"d-inline col-form-label label-file"},[t._v("Thêm chứng từ/File (Nếu có)")]),t._v(" "),t._l(this.order.files,function(e,n){return a("b-form-row",{key:n,staticClass:"border-bottom align-items-center"},[a("b-form-group",{staticClass:"col-md-4 mb-0"},[a("b-select",{attrs:{disabled:t.showAction,options:t.fileTypeOptions[t.order.order_category],placeholde:"Chọn loại chứng từ/file"},model:{value:e.type,callback:function(a){t.$set(e,"type",a)},expression:"file.type"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-7 mb-0"},[a("file-view-upload",{staticClass:"d-inline-block",attrs:{"input-id":"file_insurance_"+n,"input-style":{width:"4rem"},"allow-delete":!1,hideUploadButton:!0,height:"5rem",files:e.file_exist||[],"file-add":e.file_add||[],edit:!t.showAction}})],1),t._v(" "),t.showAction?t._e():a("b-form-group",{staticClass:"col-md-1 mb-0 text-right"},[a("b-btn",{directives:[{name:"show",rawName:"v-show",value:!e.file_exist||!e.file_exist.length,expression:"!file.file_exist || !file.file_exist.length"}],attrs:{variant:"outline-danger",title:"Xóa chứng từ",size:"sm"},on:{click:function(e){return t.deleteLicense(n)}}},[a("i",{staticClass:"fas fa-times"})])],1)],1)}),t._v(" "),t.showAction?t._e():a("div",{staticClass:"text-left"},[a("b-btn",{attrs:{variant:"outline-ghtk",size:"sm",disabled:!t.canAddLicenses()},on:{click:function(e){return t.addLicenses()}}},[a("i",{staticClass:"fas fa-plus"}),t._v(" Thêm chứng từ/File")])],1)],2),t._v(" "),a("div",{staticClass:"modal-footer"}),t._v(" "),t.edit?a("div",[t.showAction||null!=t.idOrder?a("div",{staticClass:"text-center justify-content-center d-flex mt-3"},[a("b-btn",{staticClass:"w-25",attrs:{variant:"ghtk"},on:{click:t.updateStatusOrder}},[t._v("Xác nhận đã bàn giao")])],1):a("div",{staticClass:"text-center justify-content-center d-flex mt-3"},[a("b-btn",{staticClass:"w-25",attrs:{variant:"ghtk"},on:{click:t.updateOrder}},[t._v(" Tạo đề xuất ")])],1)]):t._e()],1)},[],!1,iu,"data-v-bdb80258",null).exports,ou={name:"InfoUserOrderResignWork",components:{SensitiveLabel:Eo.a},props:{order:{type:Object,default:function(){return{}}},type:{type:Object,default:function(){return{}}},duty:{default:!0},tableName:{type:String},updateVal:{type:Object},editableTag:{default:!0}},data:function(){return{isLoading:!1,listData:[],tags:[]}},watch:{order:{immediate:!0,handler:function(t){t&&t.tags&&(this.tags=t.tags)},updateVal:{immediate:!0,handler:function(t){t&&"tag"===t.field&&(this.tags=t.data)}}}},methods:{formatDate:function(t,e){return Ye()(t||null).format(e||"DD-MM-YYYY")},showModalPhone:function(t){var e=this;this.getPhoneNumber(t.profile.user_id).then(function(a){e.$set(t.profile,"tel",a)}),this.$bvModal.show("modal-number-phone-"+t.id)},closeModalPhone:function(t){this.$bvModal.hide("modal-number-phone-"+t)},getPhoneNumber:function(t){var e=this;return l()(o.a.mark(function a(){var n,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Es.a.getPhoneNumber({user_id:t});case 3:if(n=e.sent,!(i=n.data).success){e.next=9;break}return e.abrupt("return",i.data.tel);case 9:Me.a.showMessage(i.message);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),Me.a.showMessage(e.t0.message);case 15:return e.prev=15,e.finish(15);case 17:case"end":return e.stop()}},a,e,[[0,12,15,17]])}))()},showIcon:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"inline-block";document.getElementById(t).style.display=e},onDeleteTag:function(t){var e=this;return l()(o.a.mark(function a(){var n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!confirm("Bạn có chắc muốn xóa tag "+t.name+" ?")){a.next=7;break}return e.loading=!0,a.next=5,yn.a.detach({record_id:+t.record_id,table_name:t.table_name,hr_tag_id:+t.id});case 5:(n=a.sent).data.success?(e.tags=e.tags.filter(function(e){return+e.id!=+t.id}),e.order.tags=e.tags,e.$emit("clickAction",{action:"refreshHrTag"}),Me.a.showMessage(n.data.message||"Bỏ gắn tag thành công!","success")):Me.a.showMessage(n.data.message,"warning");case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),Me.a.showMessage(a.t0.message,"warning");case 12:return a.prev=12,e.loading=!1,a.finish(12);case 15:case"end":return a.stop()}},a,e,[[0,9,12,15]])}))()},showMessage:function(){Me.a.showMessage("Bạn không có quyền xem thông tin!","warning")},openLink:function(t,e){var a=t.split(".").pop();["pdf","docx"].includes(a)?window.open(t):this.$el.querySelector(".file-"+e).$viewer.show()},showImage:function(t,e){var a=t.length;if(1===a||""===t[1])this.openLink(t[0],e);else for(var n=0;n<a;n++)this.openLink(t[n],e)}}};var ru=function(t){a("rKK5")},lu=Object(y.a)(ou,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"box-user d-flex justify-content-between"},[a("div",{staticClass:"d-flex"},[a("div",{staticClass:"avt-user"},[a("img",{attrs:{src:t.order.profile.image_profile,alt:"avatar user",width:"52",height:"52"}})]),t._v(" "),a("div",{staticClass:"info-user ml-3"},[a("div",{staticClass:"info-user-name"},[a("b",[t._v(t._s(t.order.profile.fullname)+" ("+t._s(t.order.profile.username)+")")])]),t._v(" "),a("div",{staticClass:"info-user-position"},[t._v("\n          "+t._s(t.order.profile.position_name)+" - "+t._s(t.order.profile.station)+"\n        ")])])]),t._v(" "),a("div",{staticClass:"btn-chat"},[a("div",{staticClass:"mb-1"},[t.duty?a("b-dropdown",{staticClass:"p-0 dropdown-action-view",attrs:{size:"md",variant:"link","toggle-class":"text-decoration-none","no-caret":""}},[a("template",{staticClass:"p-0",slot:"button-content"},[a("b-btn",{staticClass:"btn-sm",attrs:{variant:"outline-ghtk",name:"stop-work-btn-view-duty",id:"stop-work-btn-view-duty"}},[t._v("Xem")])],1),t._v(" "),a("b-dropdown-item",[a("a",{attrs:{name:"stop-work-btn-sos-stop-work",id:"stop-work-btn-sos-stop-work"},on:{click:function(e){return t.$emit("clickAction",{action:"view_group_chat",channel_id:t.order.chat_channel_id})}}},[t._v("SOS nghỉ việc")])]),t._v(" "),a("b-dropdown-item",[a("a",{attrs:{name:"stop-work-btn-view-order",id:"stop-work-btn-view-order"},on:{click:function(e){return t.$emit("clickAction",{action:"view_order",order_id:t.order.id})}}},[t._v("Xem đề xuất")])]),t._v(" "),a("b-dropdown-item",[a("a",{attrs:{name:"stop-work-btn-view-profile-cod",id:"stop-work-btn-view-profile-cod",target:"_blank"},on:{click:function(e){return t.$emit("clickAction",{action:"view_profile_cod",data:t.order.profile})}}},[t._v("\n              Xem profile\n            ")])])],2):a("b-btn",{staticClass:"btn-sm",attrs:{variant:"outline-ghtk",name:"stop-work-btn-show-message",id:"stop-work-btn-show-message"},on:{click:function(e){return t.showMessage()}}},[t._v("Xem")])],1),t._v(" "),a("div",{staticClass:"mt-1"},[a("b-btn",{staticClass:"btn-sm",attrs:{variant:"outline-ghtk",name:"stop-work-btn-call",id:"stop-work-btn-call"},on:{click:function(e){return t.showModalPhone(t.order)}}},[t._v("Gọi")])],1)])]),t._v(" "),a("div",{staticClass:"mb-1 mt-1 d-flex"},[a("div",{staticClass:"text-start-date"},[a("b",[t._v(" Ngày bắt đầu nghỉ: "),a("span",[t._v(t._s(t.formatDate(t.order.resign_info.resign_date||t.order.created,"DD/MM/YYYY")))])])])]),t._v(" "),a("div",{staticClass:"btn-tags mb-1 mt-1"},[a("div",{staticClass:"d-flex mt-2 content-tag"},["da_huy"===t.order.status?a("div",{staticClass:"pl-1 pr-1 mr-1 mb-1 tag-danger"},[t._v("Đã hủy đề xuất")]):a("div",[t.order.checkTick.tickOrder?t._e():a("div",{staticClass:"pl-1 pr-1 mr-1 mb-1 tag-default"},[t._v("Chưa duyệt đề xuất")]),t._v(" "),t.order.checkTick.tickAsset?t._e():a("div",{staticClass:"pl-1 pr-1 mr-1 mb-1 tag-default"},[t._v("Chưa thu hồi CCDC")]),t._v(" "),t.order.checkTick.tickDeposit?t._e():a("div",[a("span",{staticClass:"pl-1 pr-1 mr-1 mb-1 tag-default"},[t._v("Chưa thanh toán cọc")])]),t._v(" "),t.order.checkTick.tickInsurance?t._e():a("div",[a("span",{staticClass:"pl-1 pr-1 mr-1 mb-1 tag-default"},[t._v("Chưa chốt sổ BHXH")])]),t._v(" "),t.order.checkTick.tickContract?t._e():a("div",[a("span",{staticClass:"pl-1 pr-1 mr-1 mb-1 tag-default"},[t._v("Chưa thanh lý HĐ")])])]),t._v(" "),t._l(t.order.fixedTags||[],function(e,n){return a("div",{key:"fixed_tag"+n,staticClass:"d-inline-block pr-2 pl-2 mb-1",style:e.style},[t._v(t._s(e.name))])}),t._v(" "),t._l(t.tags,function(e,n){return[a("div",{key:n,staticClass:"d-inline-block mr-1 mb-1 cursor-pointer position-relative",on:{mouseover:function(a){return t.showIcon("iconDelelteTag"+e.record_id+n)},mouseout:function(a){return t.showIcon("iconDelelteTag"+e.record_id+n,"none")},click:function(a){return t.onDeleteTag(e)}}},[a("div",{staticClass:"d-inline-block tag",style:JSON.parse(e.style)},[t._v("\n            "+t._s(e.name)+"\n          ")]),t._v(" "),a("i",{staticClass:"fa fa-times-circle deleteTag",attrs:{id:"iconDelelteTag"+e.record_id+n}})])]}),t._v(" "),t.editableTag?a("span",{staticClass:"d-inline-block cursor-pointer text-ghtk ml-2 align-items-baseline",on:{click:function(e){return t.$emit("action",{action:"tag",data:{}})}}},[a("i",{staticClass:"fas fa-plus"}),t._v(" Tag")]):t._e()],2)]),t._v(" "),a("div",{staticClass:"profile-document d-flex"},[t._l(t.order.files,function(e,n){return t.order.files?[a("div",{directives:[{name:"viewer",rawName:"v-viewer"}],key:n,staticClass:"position-relative mr-1",class:n<3?"d-inline-block":"d-none"},[a("div",{staticClass:"document-type-desc"},[t._v("\n          Đơn xin nghỉ việc CT"+t._s(t.order.id)+"\n        ")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.num_file>1,expression:"documentType.num_file > 1"}],staticClass:"num-img-extend"},[t._v("\n          +"+t._s(e.num_file-1)+"\n        ")]),t._v(" "),t._l(e.file_exist,function(t,e){return[a("img",{key:n+"_"+e,staticClass:"image-document",class:(e||n)&&"d-none",attrs:{width:"108",height:"150",src:t.link,alt:""}})]})],2)]:t._e()}),t._v(" "),t.order.orderInsurance?[t.order.orderInsurance.files?a("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"position-relative file-relate mr-1 file-relate",on:{click:function(e){return t.showImage(t.order.orderInsurance.files,"relate")}}},[a("div",{staticClass:"document-type-desc"},[t._v("\n          Sổ BHXH - BH"+t._s(t.order.orderInsurance.hrOrder.id)+"\n        ")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.order.orderInsurance.files.length-1>1,expression:"order.orderInsurance.files.length - 1 > 1"}],staticClass:"num-img-extend"},[t._v("\n          +"+t._s(t.order.orderInsurance.files.length-1)+"\n        ")]),t._v(" "),t._l(t.order.orderInsurance.files,function(t,e){return a("div",[a("b-img",{key:e,staticClass:"image-document",class:e&&"d-none",attrs:{width:"108",height:"150",src:t,alt:"file chốt sổ BHXH"}})],1)})],2):t._e()]:t._e(),t._v(" "),t.order.fileContract?[a("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"position-relative file-contract mr-1",on:{click:function(e){return t.showImage(t.order.fileContract.file,"contract")}}},[a("div",{staticClass:"document-type-desc"},[t._v("\n        Thanh lý HĐ - TL"+t._s(t.order.fileContract.code)+"\n        ")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.order.fileContract.file.length>1,expression:"order.fileContract.file.length > 1"}],staticClass:"num-img-extend"},[t._v("\n          +"+t._s(t.order.fileContract.file.length)+"\n        ")]),t._v(" "),t._l(t.order.fileContract.file,function(e,n){return a("div",{staticClass:"box-file-contract",on:{click:function(a){return t.openLink(e,"contract")}}},[a("b-img",{key:n,staticClass:"image-document-contract",class:n&&"d-none",attrs:{width:"108",height:"150",src:e,frameborder:"0",title:"File thanh lý hợp đồng"}})],1)})],2)]:t._e()],2),t._v(" "),a("div",[a("b-modal",{ref:"phone-number",attrs:{id:"modal-number-phone-"+t.order.id,title:"Gọi ứng viên",centered:"","hide-header-close":!0,"title-class":"w-100","header-class":"text-center modal-phone","hide-footer":"",size:"sm"}},[a("div",{staticClass:"pl-3"},[a("div",{staticClass:"mb-2"},[a("b",{staticClass:"font-weight-bold"},[t._v("Họ tên:")]),t._v(" "),a("span",[t._v(t._s(t.order.profile.fullname))])]),t._v(" "),a("div",{staticClass:"mb-2"},[a("b",{staticClass:"font-weight-bold"},[t._v("Vị trí:")]),t._v(" "),a("span",[t._v(t._s(t.order.profile.position_name))])]),t._v(" "),a("div",[a("b",{staticClass:"font-weight-bold"},[t._v("Số điện thoại:")]),t._v(" "),t.order.profile.tel?a("SensitiveLabel",{staticClass:"d-inline",attrs:{"data-input":t.order.profile.tel,"user-id":t.order.profile.user_id,type:"tel",source:"resign-work"}}):a("span",{staticClass:"mb-2"},[t._v("\n            không có số điện thoại\n          ")])],1)]),t._v(" "),a("div",{staticClass:"mt-2 d-flex justify-content-center"},[a("b-btn",{staticClass:"btn text-white btn__close-modal-phone font-weight-bold",on:{click:function(e){return t.closeModalPhone(t.order.id)}}},[t._v("\n          Đóng\n        ")])],1)])],1)])},[],!1,ru,"data-v-75cdabaa",null).exports,cu={name:"DetailStatusOrderResignWork",props:{data:{default:null},showStatus:{type:Boolean,default:!0},permission:{}},data:function(t){return{}},created:function(){},methods:{showModalCensor:function(t,e,a,n){this.permission.edit_action?Me.a.isEmpty(a)?Me.a.showMessage("Bạn chưa tạo đề xuất!","warning"):("chot_so_bhxh"!==t||Me.a.isEmpty(a)||(a=a.hrOrder.id),this.$emit("showCensors",{action:t,censors:e,orderId:a,masterId:n})):Me.a.showMessage("Bạn không có quyền thực hiện thao tác này!","warning")}}};var du=function(t){a("Anvs")},uu={name:"DetailLogOrderResignWork",props:{detailLog:{default:null}},methods:{formatDate:function(t,e){return Ye()(t||null).format(e||"DD-MM-YYYY HH:mm:ss")}}};var hu=function(t){a("TkZg")},pu={name:"row-data",components:{InfoUserOrderResignWork:lu,DetailStatusOrderResignWork:Object(y.a)(cu,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detail-log-orders mt-3"},[a("ul",{staticClass:"ant-timeline"},[t._m(0),t._v(" "),a("li",{staticClass:"ant-timeline-item"},[a("div",{staticClass:"ant-timeline-item-tail"}),t._v(" "),a("div",{staticClass:"ant-timeline-item-head-blue",class:t.data.checkTick.tickOrder?"ant-timeline-item-head-active":"ant-timeline-item-head"},[a("div",{staticClass:"checkmark"})]),t._v(" "),a("div",{staticClass:"ant-timeline-item-content"},[a("div",{staticClass:"row"},[t._m(1),t._v(" "),t.data.checkTick.tickOrder?t._e():a("div",{staticClass:"d-flex col-sm-6 col-md-8"},[t.data.userHandlerOrder.length>0?a("div",{staticClass:"content-right-status align-self-center"},[t.data.userHandlerOrder[0].avatar?a("span",{staticClass:"mr-1"},[a("img",{attrs:{src:t.data.userHandlerOrder[0].avatar,alt:"avt user",width:"25",height:"25"}})]):t._e(),t._v(" "),a("span",{staticClass:"info-user-name"},[t._v(t._s(t.data.userHandlerOrder[0].username||""))]),t._v(" - "),a("span",[t._v(t._s(t.data.userHandlerOrder[0].position_name||""))])]):a("div",{staticClass:"content-right-status align-self-center"},[a("span",[t._v("Đề xuất chưa gán người xử lý!")])]),t._v(" "),a("div",{staticClass:"item-button ml-3"},[a("b-btn",{staticClass:"text-success border-0 btn-default",on:{click:function(e){return t.showModalCensor("order_resign",t.data.userHandlerOrder,t.data.id,t.data.profile_id)}}},[a("i",{staticClass:"fas fa-edit text-success"})])],1)])])])]),t._v(" "),a("li",{staticClass:"ant-timeline-item"},[a("div",{staticClass:"ant-timeline-item-tail"}),t._v(" "),a("div",{staticClass:"ant-timeline-item-head-blue",class:t.data.checkTick.tickAsset?"ant-timeline-item-head-active":"ant-timeline-item-head"},[a("div",{staticClass:"checkmark"})]),t._v(" "),a("div",{staticClass:"ant-timeline-item-content"},[a("div",{staticClass:"row"},[t._m(2),t._v(" "),t.data.checkTick.tickAsset?t._e():a("div",{staticClass:"d-flex col-sm-6 col-md-8"},[t.data.userHandlerCCDC.length>0?a("div",{staticClass:"content-right-status align-self-center"},[t.data.userHandlerCCDC[0].avatar?a("span",{staticClass:"mr-1"},[a("img",{attrs:{src:t.data.userHandlerCCDC[0].avatar,alt:"avt user",width:"25",height:"25"}})]):t._e(),t._v(" "),a("span",{staticClass:"info-user-name"},[t._v(t._s(t.data.userHandlerCCDC[0].username||""))]),t._v(" - "),a("span",[t._v(t._s(t.data.userHandlerCCDC[0].position_name||""))])]):a("div",{staticClass:"content-right-status align-self-center"},[a("span",[t._v("Đề xuất chưa gán người xử lý!")])]),t._v(" "),a("div",{staticClass:"item-button ml-3"},[a("b-btn",{staticClass:"text-success border-0 btn-default",on:{click:function(e){return t.showModalCensor("thu_hoi_ccdc",t.data.userHandlerCCDC,t.data.id,t.data.profile_id)}}},[a("i",{staticClass:"fas fa-edit text-success"})])],1)])])])]),t._v(" "),t.data.hideStatus.deposit?t._e():a("li",{staticClass:"ant-timeline-item"},[a("div",{staticClass:"ant-timeline-item-tail"}),t._v(" "),a("div",{staticClass:"ant-timeline-item-head-blue",class:t.data.checkTick.tickDeposit?"ant-timeline-item-head-active":"ant-timeline-item-head"},[a("div",{staticClass:"checkmark"})]),t._v(" "),a("div",{staticClass:"ant-timeline-item-content"},[a("div",{staticClass:"row"},[t._m(3),t._v(" "),t.data.checkTick.tickDeposit?t._e():a("div",{staticClass:"d-flex col-sm-6 col-md-8"},[t.data.userHandlerDeposits.length>0?a("div",{staticClass:"content-right-status align-self-center"},[t.data.userHandlerDeposits[0].avatar?a("span",{staticClass:"mr-1"},[a("img",{attrs:{src:t.data.userHandlerDeposits[0].avatar,alt:"avt user",width:"25",height:"25"}})]):t._e(),t._v(" "),a("span",{staticClass:"info-user-name"},[t._v(t._s(t.data.userHandlerDeposits[0].username||""))]),t._v(" - "),a("span",[t._v(t._s(t.data.userHandlerDeposits[0].position_name||""))])]):a("div",{staticClass:"content-right-status align-self-center"},[a("span",[t._v("Đề xuất chưa gán người xử lý!")])]),t._v(" "),a("div",{staticClass:"item-button ml-3"},[a("b-btn",{staticClass:"text-success border-0 btn-default",on:{click:function(e){return t.showModalCensor("thanh_toan_coc",t.data.userHandlerDeposits,t.data.id,t.data.profile_id)}}},[a("i",{staticClass:"fas fa-edit text-success"})])],1)])])])]),t._v(" "),t.data.hideStatus.insurance?t._e():a("li",{staticClass:"ant-timeline-item"},[a("div",{staticClass:"ant-timeline-item-tail"}),t._v(" "),a("div",{staticClass:"ant-timeline-item-head-blue",class:t.data.checkTick.tickInsurance?"ant-timeline-item-head-active":"ant-timeline-item-head"},[a("div",{staticClass:"checkmark"})]),t._v(" "),a("div",{staticClass:"ant-timeline-item-content"},[a("div",{staticClass:"row"},[t._m(4),t._v(" "),t.data.checkTick.tickInsurance?t._e():a("div",{staticClass:"d-flex col-sm-6 col-md-8"},[t.data.userHandlerBHXH.length>0?a("div",{staticClass:"content-right-status align-self-center"},[t.data.userHandlerBHXH[0].avatar?a("span",{staticClass:"mr-1"},[a("img",{attrs:{src:t.data.userHandlerBHXH[0].avatar,alt:"avt user",width:"25",height:"25"}})]):t._e(),t._v(" "),a("span",{staticClass:"info-user-name"},[t._v(t._s(t.data.userHandlerBHXH[0].username||""))]),t._v(" - "),a("span",[t._v(t._s(t.data.userHandlerBHXH[0].position_name||""))])]):a("div",{staticClass:"content-right-status align-self-center mb-1"},[a("span",[t._v("Chưa có đề xuất chốt sổ bảo hiểm xã hội!")])]),t._v(" "),a("div",{staticClass:"item-button ml-3"},[a("b-btn",{staticClass:"text-success border-0 btn-default",on:{click:function(e){return t.showModalCensor("chot_so_bhxh",t.data.userHandlerBHXH,t.data.orderInsurance,t.data.profile_id)}}},[a("i",{staticClass:"fas fa-edit text-success"})])],1)])])])]),t._v(" "),a("li",{staticClass:"ant-timeline-item"},[a("div",{staticClass:"ant-timeline-item-tail"}),t._v(" "),a("div",{staticClass:"ant-timeline-item-head-blue",class:t.data.checkTick.tickContract?"ant-timeline-item-head-active":"ant-timeline-item-head"},[a("div",{staticClass:"checkmark"})]),t._v(" "),a("div",{staticClass:"ant-timeline-item-content"},[a("div",{staticClass:"row"},[t._m(5),t._v(" "),t.data.checkTick.tickContract?t._e():a("div",{staticClass:"d-flex col-sm-6 col-md-8"},[t.data.userHandlerHD.length>0?a("div",{staticClass:"content-right-status align-self-center"},[t.data.userHandlerHD[0].avatar?a("span",{staticClass:"mr-1"},[a("img",{attrs:{src:t.data.userHandlerHD[0].avatar,alt:"avt user",width:"25",height:"25"}})]):t._e(),t._v(" "),a("span",{staticClass:"info-user-name"},[t._v(t._s(t.data.userHandlerHD[0].username||""))]),t._v(" - "),a("span",[t._v(t._s(t.data.userHandlerHD[0].position_name||""))])]):a("div",{staticClass:"content-right-status align-self-center"},[a("span",[t._v("Đề xuất chưa gán người xử lý!")])]),t._v(" "),a("div",{staticClass:"item-button ml-3"},[a("b-btn",{staticClass:"text-success border-0 btn-default",on:{click:function(e){return t.showModalCensor("thanh_ly_hd",t.data.userHandlerHD,t.data.id,t.data.profile_id)}}},[a("i",{staticClass:"fas fa-edit text-success"})])],1)])])])])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"ant-timeline-item"},[e("div",{staticClass:"ant-timeline-item-tail"}),this._v(" "),e("div",{staticClass:"ant-timeline-item-head-active ant-timeline-item-head-blue"},[e("div",{staticClass:"checkmark"})]),this._v(" "),e("div",{staticClass:"ant-timeline-item-content"},[e("b",[this._v("Tạo đề xuất")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-sm-6 col-md-4 txt-status"},[e("b",[this._v("Duyệt đề xuất")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-sm-6 col-md-4 txt-status"},[e("b",[this._v("Thu hồi công cụ, dụng cụ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-sm-6 col-md-4 txt-status"},[e("b",[this._v("Thanh toán cọc")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-sm-6 col-md-4 txt-status"},[e("b",[this._v("Chốt sổ bảo hiểm xã hội")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-sm-6 col-md-4 txt-status"},[e("b",[this._v("Thanh lý hợp đồng")])])}],!1,du,"data-v-75b5bb1a",null).exports,DetailLogOrderResignWork:Object(y.a)(uu,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detail-logs-update"},[t._m(0),t._v(" "),a("div",{staticClass:"content-detail-log"},[t.detailLog?a("ul",{staticClass:"log-timeline"},t._l(t.detailLog,function(e,n){return a("li",{key:n,staticClass:"log-timeline-item"},[a("div",{staticClass:"log-timeline-item-tail"}),t._v(" "),a("div",{staticClass:"log-timeline-item-head ant-timeline-item-head-blue"}),t._v(" "),a("div",{staticClass:"log-timeline-item-content"},[a("span",[t._v(t._s(t.formatDate(e.created,"DD-MM-YYYY HH:mm:ss"))+" ")]),t._v(" "),e.created_by?a("span",[t._v(t._s(e.created_by.username||"")+"\n            "),e.created_by.position_name?a("span",[t._v("- "+t._s(e.created_by.position_name||""))]):t._e()]):t._e(),t._v(" "),!e.message||e.message.old||e.message.new?t._e():a("span",{domProps:{innerHTML:t._s(e.message)}})])])}),0):t._e()])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"log-title"},[e("b",{staticClass:"text-deatil-log"},[this._v("Chi tiết log")])])}],!1,hu,"data-v-1d168dc1",null).exports},props:{data:{default:null,type:Object},index:{default:null},editableTag:{default:!0},search:{default:!1},permission:{}},data:function(t){return{type:{order:"order",insurance:"insurance",contract:"contract"}}},computed:{},created:function(){},methods:{checkShowModal:function(t,e){var a={index:t,status:e,action:"checkShowModal"};this.$emit("changeAction",a)},showModalContract:function(t){var e={contract:t,action:"showModalContract"};this.$emit("changeAction",e)},updateStatus:function(t,e,a){var n={index:t,status:e,note:a,action:"updateStatus"};this.$emit("changeAction",n)},actionUpdateRecord:function(t){var e={data:t,action:"actionUpdateRecord"};this.$emit("changeAction",e)},handleToggleModalHrTag:function(){var t={data:arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,action:"handleToggleModalHrTag"};this.$emit("changeAction",t)},showListCensors:function(t){var e={censors:t.censors,type:t.action,orderId:t.orderId,masterId:t.masterId,action:"showListCensors"};this.$emit("changeAction",e)},showListCensorAccount:function(t){var e={data:t,action:"showListCensorAccount"};this.$emit("changeAction",e)},action:function(t,e){var a={data:t,arguments:e,action:"handleToggleModalHrTag"};this.$emit("changeAction",a)},showModalExplain:function(t){var e={order:t,action:"showModalExplainResign"};this.$emit("changeAction",e)},showAction:function(t,e){return!!e&&(!(t===this.type.order&&!e.order)&&(!(t===this.type.contract&&!e.contract)&&!(t===this.type.insurance&&!e.insurance)))},isShowCancelButton:function(){return"hoan_thanh"===this.data.status&&this.data.resign_info.resign_date>Ye()().format("YYYY-MM-DD")}}};var mu=function(t){a("/GU8")},fu=Object(y.a)(pu,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"pt-3"},[a("InfoUserOrderResignWork",{attrs:{permission:t.permission,order:t.data},on:{action:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return t.action.apply(void 0,[t.data].concat(n))},clickAction:t.actionUpdateRecord}})],1),t._v(" "),a("td",{staticClass:"pt-0"},[a("div",[a("DetailStatusOrderResignWork",{attrs:{data:t.data,permission:t.permission,editableTag:t.editableTag,tableName:"stop_working"},on:{toggleModalHrTag:t.handleToggleModalHrTag,showCensors:t.showListCensors}})],1),t._v(" "),a("div",[a("DetailLogOrderResignWork",{attrs:{permission:t.permission,detailLog:t.data.logs}})],1)]),t._v(" "),a("td",{staticClass:"text-center box-btn-action"},[a("div",{staticClass:"mt-2 mb-2"},[a("b-btn",{staticClass:"btn-sm",attrs:{variant:"outline-ghtk"},on:{click:function(e){return t.checkShowModal(t.index,"ghi_chu")}}},[t._v("Ghi chú")])],1),t._v(" "),t.showAction(t.type.order,t.data.showAction)&&t.permission.edit_action?a("div",{staticClass:"mb-2 mt-2"},[a("b-btn",{staticClass:"btn-sm",attrs:{variant:"outline-ghtk"},on:{click:function(e){return t.checkShowModal(t.index,"duyet")}}},[t._v("Duyệt\n        ")])],1):t._e(),t._v(" "),t.showAction(t.type.order,t.data.showAction)&&t.permission.edit_action?a("div",{staticClass:"mt-2 mb-2"},[a("b-btn",{staticClass:"btn__refuse btn-sm",attrs:{variant:"outline-danger"},on:{click:function(e){return t.checkShowModal(t.index,"tu_choi")}}},[t._v("Từ chối")])],1):t._e(),t._v(" "),t.isShowCancelButton()?a("div",{staticClass:"mt-2 mb-2"},[a("b-btn",{staticClass:"btn__refuse btn-sm",attrs:{variant:"outline-danger"},on:{click:function(e){return t.checkShowModal(t.index,"cancel")}}},[t._v("Hủy đề xuất")])],1):t._e(),t._v(" "),t.showAction(t.type.insurance,t.data.showAction)&&t.permission.edit_action?a("div",{staticClass:"mb-2 mt-2"},[a("b-btn",{staticClass:"btn-sm",attrs:{variant:"outline-ghtk"},on:{click:function(e){return t.checkShowModal(t.index,"chot_so")}}},[t._v("Chốt sổ BHXH\n        ")])],1):t._e(),t._v(" "),t.showAction(t.type.contract,t.data.showAction)&&t.permission.edit_action?a("div",{staticClass:"mt-2 mb-2"},[a("b-btn",{staticClass:"outline-ghtk btn-sm",attrs:{variant:"outline-ghtk"},on:{click:function(e){return t.showModalContract(t.data.contract)}}},[t._v("Thanh lý HĐ")])],1):t._e()])])},[],!1,mu,"data-v-73b9f926",null).exports,gu=a("cFmi"),vu=function(t){return Pe.a.get("ErpStaffResign/getStatisticUserResign",{params:t})},_u=function(t){return Pe.a.get("ErpStaffResign/getDataUserResign",{params:t})},bu=this,yu={name:"staff-resign-work-dashboard",components:{ApproveResignWorkModal:Yl.a,RowData:fu,UpdateOrder:ye.default,UpdateOrderResignWork:su,MultiSelectPosition:be.a,TimeLine:Ce.a,MultiSelectProvince:fe.a,MultiSelectStation:ge.a,MultiSelectRegion:me.a,SingleSelectUser:Ie.a,ModalLiquidateContract:Tl.a,HrTagModal:vi,MultiSelectHrTag:Ts.a,InfiniteLoading:Fr.a},data:function(t){return{loading:!1,loadingResign:{ProfileInfo:!1,orderInfo:!1},loadingTotal:!0,statusDeposit:!1,page:{current:1,total:0,per_page:10},filter:{province:null,station:null,typeResign:"stop_working",resign_info:null,username:null,department_id:null,position_id:null,search:!1,tabResign:null,tagName:null,tag:null},contract:{id:null,status:null,contract_number:null},listData:[],censors:[],typeInsurance:"insurance",typeResign:"stop_working",curOrder:{idx:null,id:null},idxCurrentOrderUpdateStatus:null,currentUserUpdateStatus:null,rejectReason:null,profile:null,statusOrder:null,totalOrderStop:0,totalChotSo:0,totalThanhLy:0,totalDeposit:0,totalAll:0,actionHandler:null,idHrOrder:null,userCensor:null,userCensorAccount:!1,masterId:null,statistics:{all:{tab:"all",tableName:"stop_working",type:"all",desc:"Tất cả",id:"stop-work-btn-all",name:"stop-work-btn-all",total:bu.totalAll},not_confirm_order_resign:{tableName:"stop_working",tab:"not_confirm_order_resign",type:"stop_working",desc:"Chưa duyệt đề xuất",id:"stop-work-btn-pending",name:"stop-work-btn-pending",total:0},not_confirm_recall_asset:{tableName:"stop_working",tab:"not_confirm_recall_asset",type:"status_CCDC",desc:"Chưa thu hồi CCDC",total:0,id:"stop-work-btn-not-refund-ccdc",name:"stop-work-btn-not-refund-ccdc"},not_confirm_payment_deposit:{tableName:"stop_working",tab:"not_confirm_payment_deposit",type:"new_deposit",desc:"Chưa thanh toán cọc",total:0,id:"stop-work-btn-deposit-not-paid",name:"stop-work-btn-deposit-not-paid"},not_confirm_order_insurance:{tableName:"stop_working",tab:"not_confirm_order_insurance",type:"suplly_bhxh",desc:"Chưa chốt sổ BHXH",total:0,id:"stop-work-btn-not-complete-social-insurance",name:"stop-work-btn-not-complete-social-insurance"},not_confirm_liquidation_contract:{tableName:"stop_working",tab:"not_confirm_liquidation_contract",type:"new_contract",desc:"Chưa thanh lý HĐ",total:0,id:"stop-work-btn-contract-liquidation",name:"stop-work-btn-contract-liquidation"}},cur_work:{},openModalHrTag:!1,curTagData:{record:{},attach:!0},recordUpdateVal:{type:"",data:null},reloadTag:0,tags:[],hr_order_data:{cur_type:{},cur_order:{},duty:[],reject_reason:null,create_order_type:null},editableTag:!0,resetUser:!1,cur_tag:{tableName:"all_stop_work"},checkReason:!1,cancelReason:null,isCancelingOrder:!1,checkDuty:!0,orderId:null,totalPerPage:6,checkLoadData:!0,checkLoadTotal:!0,permission:[],isShowApproveModal:!1}},computed:i()({},Object(_.c)({userInfo:"userInfo"})),watch:{cur_work:{deep:!0,handler:function(t,e){t.tableName&&(this.getTags(),this.reloadTag++),"rejected"===t.alias?this.editableTag=!1:this.editableTag=!0}}},created:function(){this.getDataUserResign(),this.getStatisticUserResign(),this.cur_work="all"},mounted:function(){Me.a.importLibraryTracingLogs()},beforeDestroy:function(){Me.a.removeLibraryTracingLogs()},methods:{resetCurData:function(){this.censors=[],this.curOrder.id=null,this.actionHandler=null,this.curOrder.idx=null,this.filter.search=!1,this.filter.tabResign=null,this.orderId=null},resetUpdateStatusData:function(){this.censors=[],this.idxCurrentOrderUpdateStatus=null,this.rejectReason="",this.actionHandler=null,this.$bvModal.hide("reject-reason-modal"),this.$bvModal.hide("reject-modal")},toggleApproveModal:function(t){this.isShowApproveModal=t},getDataUserResign:function(){var t=this;if(this.checkLoadData){this.checkLoadData=!1;var e=i()({},this.filter);e.perPage=this.page.per_page,e.page=this.page.current,this.loading=!0,_u(e).then(function(e){e.data.success?(t.listData=e.data.data,t.filter.search&&(t.page.total=e.data.totalSearch),t.permission=e.data.permission):Me.a.showMessage(e.data.message||"Không lấy được danh sách đề xuất !"),t.checkLoadData=!0,t.loading=!1}).catch(function(t){Me.a.showMessage("Có lỗi xảy ra, vui lòng thử lại sau !"),console.log(t)}).finally(function(e){t.checkLoadData=!0,t.loading=!1,t.masterId=null})}},getStatisticUserResign:function(){var t=this;if(this.checkLoadTotal){var e=i()({},this.filter);this.checkLoadTotal=!1,this.loading=!0,this.$startLoading(),vu(e).then(function(e){e.data.success?(t.statistics.not_confirm_order_resign.total=e.data.totalOrder||0,t.statistics.not_confirm_order_insurance.total=e.data.totalInsurance||0,t.statistics.not_confirm_liquidation_contract.total=e.data.totalContract||0,t.statistics.not_confirm_payment_deposit.total=e.data.totalDeposit||0,t.statistics.not_confirm_recall_asset.total=e.data.totalAsset||0,t.statistics.all.total=e.data.totalAll||0,t.page.total=e.data.totalAll||0):Me.a.showMessage(e.data.message||"Không lấy được số lượng các đề xuất !"),t.checkLoadTotal=!0}).catch(function(t){Me.a.showMessage("Có lỗi xảy ra, vui lòng thử lại sau !"),console.log(t)}).finally(function(e){t.loading=!1,t.checkLoadTotal=!0,t.loadingTotal=!1,t.$stopLoading()})}},getTags:function(){var t=this;yn.a.getList({table_name:"stop_working",scope:"global"}).then(function(e){e.data.success?t.tags=e.data.data:Me.a.showMessage(e.data.message||"Không lấy được dữ liệu thẻ tag!","warning")}).catch(function(t){Me.a.showMessage("Đã có lỗi xảy ra, vui lòng thử lại sau!","warning"),console.log(t)}).finally(function(){})},handleProvinceSelected:function(t){this.filter.province=t?t.map(function(t){return t.id}).toString():""},handleStationSelected:function(t){this.filter.station=t?t.map(function(t){return t.id}).toString():""},handleDepartmentSelected:function(t){this.filter.department_id=t?t.map(function(t){return t.id}).toString():""},handlePositionSelected:function(t){this.filter.position_id=t?t.map(function(t){return t.id}).toString():""},handleHrTagSelected:function(t){this.filter.tag=t?t.map(function(t){return t.id}).toString():""},selectedUser:function(t){this.filter.username=t},selectedUserCensor:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.userCensor=t},handleToggleModalHrTag:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(Me.a.isEmpty(t))return this.curTagData.attach=!1,void(this.openModalHrTag=!0);t&&(this.curTagData.attach=!0,this.curTagData.record=t,this.openModalHrTag=!0,this.getTags())},searchResign:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.loading=!0,this.filter.search=!1,t?(this.page.current=1,this.page.per_page=10,this.filter.tabResign=t):(this.filter.province||this.filter.tag||this.filter.username||this.filter.resign_info||this.filter.station||this.filter.department_id||this.filter.position_id)&&(this.filter.search=!0),e&&(this.cur_work=e,this.page.total=this.statistics[e].total||0),this.filter.typeResign=null,"all"===e&&this.resetCurData(),this.getStatisticUserResign(),this.getDataUserResign()},checkShowModal:function(t,e){Me.a.isEmpty(this.listData[t])||(this.masterId=null,"duyet"===e&&(this.idxCurrentOrderUpdateStatus=t,this.currentUserUpdateStatus=null,Me.a.isEmpty(this.listData[t].profile)||(this.currentUserUpdateStatus=this.listData[t].profile.username),this.toggleApproveModal(!0)),"ghi_chu"===e&&(this.idxCurrentOrderUpdateStatus=t,this.rejectReason=null,this.$bvModal.show("reject-reason-modal")),"tu_choi"===e&&(this.idxCurrentOrderUpdateStatus=t,this.$bvModal.show("reject-modal")),"cancel"===e&&(this.idxCurrentOrderUpdateStatus=t,this.$bvModal.show("cancel-resign-order-modal")),"chot_so"===e&&(this.curOrder.idx=this.listData[t].profile_id||null,this.masterId=this.listData[t].profile_id||null,this.curOrder.id=null,Me.a.isEmpty(this.listData[t].orderInsurance)||(this.curOrder.id=this.listData[t].orderInsurance.hrOrder.id),this.$bvModal.show("modal-order-resign-work")))},changeAction:function(t){return"checkShowModal"===t.action?(this.checkShowModal(t.index,t.status),!1):"showListCensors"===t.action?(this.masterId=t.masterId,this.idHrOrder=t.orderId,this.actionHandler=t.type,this.censors=t.censors,this.$bvModal.show("modal-censor-order"),!1):"handleToggleModalHrTag"===t.action?(this.handleToggleModalHrTag(t.data),!1):"actionUpdateRecord"===t.action?(this.actionUpdateRecord(t.data),!1):"updateStatus"===t.action?(this.updateStatus(t.index,t.status,t.note),!1):"showModalContract"===t.action?(this.contract=t.contract,this.$bvModal.show("detail-liquidate-contract-resign-work"),!1):void 0},updateUserHandler:function(t,e,a){var n=this;"delete"===e&&alert("Bạn có chắc chắn muốn xóa người này khỏi xử lý đề xuất!");var i={order_id:t.order_id||null,censor:t,type:e,action:a,master_id:this.masterId};this.loading=!0,this.$startLoading(),Se.a.updateUserHandler(i).then(function(t){t.data.success?(n.getDataUserResign(),n.$bvModal.hide("modal-censor-order"),Me.a.showMessage(t.data.message||"Cập nhật thành công người xử lý đề xuất!","success")):(n.masterId=null,Me.a.showMessage(t.data.message||"Cập nhật Không thành công người xử lý đề xuất!"))}).catch(function(t){Me.a.showMessage("Có lỗi xảy ra, vui lòng thử lại sau!"),n.actionHandler=null}).finally(function(t){n.loading=!1,n.userCensor=null,n.actionHandler=null,n.$stopLoading()})},updateCensor:function(t,e){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"add",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(t&&e)if(i&&"order_resign"!==i&&"chot_so_bhxh"!==i)this.updateUserHandler(e,n,i);else{"delete"===n&&alert("Bạn có chắc chắn muốn xóa người này khỏi xử lý đề xuất !");var s={order:t,censor:e,type:n};this.loading=!0,this.$startLoading(),Se.a.updateCensor(s).then(function(t){t.data.success?(a.getDataUserResign(),a.$bvModal.hide("modal-censor-order"),Me.a.showMessage(t.data.message||"Cập nhật thành công người xử lý đề xuất !","success")):(a.loading=!1,Me.a.showMessage(t.data.message||"Cập nhật Không thành công người xử lý đề xuất !"))}).catch(function(t){Me.a.showMessage("Có lỗi xảy ra, vui lòng thử lại sau !"),console.log(t)}).finally(function(t){a.userCensor=null,a.loading=!1,a.$stopLoading()})}else alert("Thiếu thông tin truyền vào !")},actionUpdateRecord:function(t){if("attachTag"===t.action&&(this.getDataUserResign(),this.reloadTag++,this.curTagData.record.tags&&t.data&&(this.curTagData.record.tags.push(t.data),this.recordUpdateVal.type="tag",this.recordUpdateVal.data=this.curTagData.record)),"refreshHrTag"===t.action&&(this.getTags(),this.getDataUserResign(),this.reloadTag++),"closeHrTag"===t.action&&(this.openModalHrTag=!1),"view_profile_cod"===t.action&&ze.a.redirectProfile(t.data.group_id,t.data.user_id,t.data.id),"view_group_chat"===t.action&&t.channel_id){window.open("https://ghtk.me/channel/internal/"+t.channel_id,"_blank")}"view_order"===t.action&&(this.orderId=t.order_id,this.$bvModal.show("modal-order-off-work"))},updateStatus:function(t,e){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e&&this.listData[t]&&this.listData[t]&&this.listData[t].id)if("tu_choi"!==e||n){if("duyet"===e||"tu_choi"===e)return"duyet"===e&&this.toggleApproveModal(!1),void this.approveResign(t,e,n);var i={id:this.listData[t].id,action:e,reason:n};Se.a.updateStatus(i).then(function(t){t.data.success?(Me.a.showMessage(t.data.message||"Cập nhật trạng thái thành công !","success"),"tu_choi"===e&&a.$bvModal.hide("reject-modal"),a.getStatisticUserResign(),a.getDataUserResign()):Me.a.showMessage(t.data.message||"Không thể chuyển trạng thái của đề xuất !","warning")}).catch(function(t){console.log(t),Me.a.showMessage("Đã có lỗi xảy ra, không thay đổi được trạng thái đề xuất !","warning")}).finally(function(t){a.resetUpdateStatusData()})}else alert("Vui lòng nhập lý do từ chối")},cancelOrder:function(t,e){var a=this;if(e){var n={reason:e};this.isCancelingOrder=!0,gu.a.cancelResignOrder(this.listData[t].id,n).then(function(e){e.data.success?(a.listData[t].status=e.data.data.status,Me.a.showMessage(e.data.message||"Hủy đề xuất thành công!","success"),a.getDataUserResign(),a.hideCancelOrderModal()):Me.a.showMessage(e.data.message||"Có lỗi xảy ra khi hủy đề xuất!","warning")}).catch(function(t){console.log(t),Me.a.showMessage(t.response.data.message||"Có lỗi xảy ra khi hủy đề xuất!","warning")}).finally(function(t){a.isCancelingOrder=!1})}else alert("Bạn chưa nhập lý do hủy.")},hideCancelOrderModal:function(){this.$bvModal.hide("cancel-resign-order-modal")},onCloseCancelModal:function(){this.cancelReason=null},approveResign:function(t,e,a){var n=this;return l()(o.a.mark(function i(){var s,r,l,c,d,u,h,p,m,f,g,v,_,b,y,C,w,k,x,S,M,T,D;return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(s="duyet"===e?"approve":"reject",(r=new FormData).append("type","event"),r.append("event",s),!We()(n.listData[t].resign_info).length){i.next=35;break}l=!0,c=!1,d=void 0,i.prev=8,u=fa()(ea()(n.listData[t].resign_info));case 10:if(l=(h=u.next()).done){i.next=21;break}if(p=h.value,m=Ze()(p,2),f=m[0],g=m[1]){i.next=17;break}return i.abrupt("continue",18);case 17:r.append("data["+f+"]",g);case 18:l=!0,i.next=10;break;case 21:i.next=27;break;case 23:i.prev=23,i.t0=i.catch(8),c=!0,d=i.t0;case 27:i.prev=27,i.prev=28,!l&&u.return&&u.return();case 30:if(i.prev=30,!c){i.next=33;break}throw d;case 33:return i.finish(30);case 34:return i.finish(27);case 35:if(a&&r.append("data[reason]",a),n.listData[t].note&&r.append("data[note]",n.listData[t].note),!Array.isArray(n.listData[t].files)){i.next=58;break}for(v=function(t){Array.isArray(t.file_add)&&t.file_add.forEach(function(e,a){r.append("files["+t.type+"]["+a+"]",e)})},_=!0,b=!1,y=void 0,i.prev=42,C=fa()(n.listData[t].files);!(_=(w=C.next()).done);_=!0)k=w.value,v(k);i.next=50;break;case 46:i.prev=46,i.t1=i.catch(42),b=!0,y=i.t1;case 50:i.prev=50,i.prev=51,!_&&C.return&&C.return();case 53:if(i.prev=53,!b){i.next=56;break}throw y;case 56:return i.finish(53);case 57:return i.finish(50);case 58:return n.loadingResign.orderInfo=!0,n.loading=!0,i.next=62,gu.a.updateResignationProposal(n.listData[t].id,r);case 62:x=i.sent,S=x.data,M=S.success,T=S.message,D=S.data,M?(n.listData[t].status=D.status,Me.a.showMessage(T||"Cập nhật trạng thái thành công !","success"),D.censor&&Array.isArray(D.censor)?n.censor=D.censor.map(function(t){return t.id}).toString():n.censor=null,"tu_choi"===e&&n.$bvModal.hide("reject-reason-modal-1"),n.modalStyle&&n.$emit("changeStatusOk",D),n.displayFrom&&"support-staff"===n.displayFrom&&"duyet"===e&&n.$emit("confirmSuccess")):Me.a.showMessage(T,"warning"),n.rejectReason=null,n.loadingResign.orderInfo=!1,n.loading=!1;case 68:case"end":return i.stop()}},i,n,[[8,23,27,35],[28,,30,34],[42,46,50,58],[51,,53,57]])}))()},addOrderOk:function(){this.getStatisticUserResign(),this.getDataUserResign(),this.$bvModal.hide("modal-order-resign-work"),this.$bvModal.hide("modal-order-off-work")},updateLiquidateOk:function(t){this.contract.status=t.contract_status,this.contract.liquidate_date=t.liquidate_date,this.getStatisticUserResign(),this.getDataUserResign()},resetFilter:function(){this.filter={province:null,station:null,typeResign:"stop_working",resign_info:null,username:null,department_id:null,position_id:null,search:!1,tabResign:null,tagName:null,tag:null}},gotoGroupChat:function(t){var e=this;t&&t.id&&(t.channel_id?window.open("https://i.ghtklab.com/channel/internal/"+t.channel_id,"_blank"):Se.a.createDirectChat({userId:t.id}).then(function(t){if(t.data.success){var e=t.data.data.channel_id;window.open("https://i.ghtklab.com/channel/internal/"+e,"_blank")}else Me.a.showMessage(t.data.message||"Tạo direct chat thất bại !")}).catch(function(t){Me.a.showMessage("Có lỗi xảy ra, vui lòng thử lại sau!"),console.log(t)}).finally(function(t){e.loading=!1}))},updateStaffLogNote:function(t,e){var a=this;if(e)if(this.listData[t]){var n={master_profile_id:this.listData[t].profile_id,user_id:this.listData[t].profile.user_id,id:this.listData[t].id,note:e};this.loading=!0,this.$startLoading(),Se.a.updateStaffLog(n).then(function(e){if(e.data.success){var n=e.data.data.LogErpDbStaffLog;a.listData[t].logs.push(n),Me.a.showMessage(e.data.message||"Thêm ghi chú thành công!","success"),a.resetUpdateStatusData()}else Me.a.showMessage(e.data.message||"Thêm ghi chú Không thành công!")}).finally(function(t){a.loading=!1,a.$stopLoading()})}else Me.a.showMessage("Không lấy được data update!");else alert("Vui lòng nhập thông tin!")}}};var Cu=function(t){a("5/fO")},wu=Object(y.a)(yu,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-none d-block fit-view-screen small-scrollbar main-stop-work"},[n("b-row",{staticClass:"mx-0 header my-2 align-items-center"},[n("b-col",{attrs:{md:"2",sm:"3"}},[n("h4",{staticClass:"m-0"},[n("b",{staticClass:"txt-title-main"},[t._v("Nghỉ việc")])])]),t._v(" "),n("b-col",{staticClass:"text-right header-tag",attrs:{md:"10",sm:"9"}},[t._l(t.statistics,function(e,a){return n("button",{key:a,staticClass:"btn btn-pill mb-1 mr-1",class:t.cur_work===a?"btn-ghtk text-white":"btn-ghtk-disable",attrs:{id:e.id,name:e.name},on:{click:function(n){return t.searchResign(e.tab,a)}}},[t._v("\n        "+t._s(e.desc)+"\n        "),e.tab&&"all"!==e.tab?n("span",[n("span",{directives:[{name:"show",rawName:"v-show",value:!t.loadingTotal,expression:"!loadingTotal"}]},[t._v("("+t._s(e.total)+")")]),t._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:t.loadingTotal,expression:"loadingTotal"}],staticClass:"fas fa-spinner fa-pulse"})]):t._e()])}),t._v(" "),n("span",{staticClass:"text-ghtk cursor-pointer mx-2",on:{click:function(e){return t.handleToggleModalHrTag(null)}}},[n("i",{staticClass:"fas fa-plus"}),t._v(" Tag")])],2)],1),t._v(" "),n("div",{staticClass:"row box-input-filter filter pb-2 justify-content-between input-border"},[n("div",{staticClass:"input-filter mb-2 mt-2"},[n("multi-select-province",{attrs:{"custom-class":"z-3 multiselect-ghtk multiselect-no-horizontal","province-ids":t.filter.province,"auto-close":!0,"hide-select":!0},on:{handleProvinceSelected:t.handleProvinceSelected}})],1),t._v(" "),n("div",{staticClass:"input-filter mb-2 mt-2"},[n("multi-select-station",{attrs:{"custom-class":"z-3 multiselect-ghtk multiselect-no-horizontal","station-ids":t.filter.station,"province-ids":t.filter.province,"auto-close":!0,"hide-select":!0},on:{handleStationSelected:t.handleStationSelected}})],1),t._v(" "),n("div",{staticClass:"input-filter mb-2 mt-2"},[n("single-select-user",{staticClass:"z-3 multiselect-ghtk multiselect-no-horizontal",attrs:{placeholder:"Nhân viên"},on:{onChange:t.selectedUser}})],1),t._v(" "),n("div",{staticClass:"input-filter mb-2 mt-2"},[n("multi-select-position",{attrs:{"department-ids":t.filter.department_id,"position-ids":t.filter.position_id,"auto-close":!1,"custom-class":"z-3 multiselect-ghtk multiselect-no-horizontal","hide-selected":!0},on:{handlePositionSelected:t.handlePositionSelected}})],1),t._v(" "),n("div",{staticClass:"input-filter mb-2 mt-2"},[n("MultiSelectHrTag",{attrs:{reload:t.reloadTag,tableName:"stop_working",disabled:!t.editableTag,"custom-class":"z-3 multiselect-ghtk multiselect-no-horizontal","auto-close":!0,"hide-selected":!0,placeholder:"Tag"},on:{handleHrTagSelected:t.handleHrTagSelected},model:{value:this.filter.tag,callback:function(e){t.$set(this.filter,"tag",e)},expression:"this.filter.tag"}})],1),t._v(" "),n("div",{staticClass:"input-filter mb-2 mt-2"},[n("v-date-picker",{attrs:{"custom-class":"z-3 multiselect-ghtk inp-date",locale:"vi",color:"green","input-props":{placeholder:"Ngày",style:"font-size:14px; border-radius: 0; border-color: #e8e8e8; padding: 8px 16px;",class:"form-control rounded"},popover:{visibility:"focus"}},model:{value:t.filter.resign_info,callback:function(e){t.$set(t.filter,"resign_info",e)},expression:"filter.resign_info"}})],1),t._v(" "),n("div",{staticClass:"input-filter mb-2 mt-2"},[n("b-btn",{staticClass:"btn_search",attrs:{name:"stop-work-btn-search",id:"stop-work-btn-search",variant:"ghtk"},on:{click:function(e){return t.searchResign()}}},[t._v("Tìm kiếm\n      ")])],1)]),t._v(" "),n("div",{staticClass:"order-table row mx-0 table-data table-sticky"},[n("div",{staticClass:"col col-12 table-content"},[n("table",{staticClass:"table table-hover table-order-list w-100 table-responsive-sm"},[t._m(0),t._v(" "),n("tbody",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"position-relative"},[t._l(t.listData,function(e,a){return[n("RowData",{key:a,attrs:{data:e,editableTag:t.editableTag,index:a,search:t.filter.search,permission:t.permission},on:{changeAction:t.changeAction}})]}),t._v(" "),n("tr",{directives:[{name:"show",rawName:"v-show",value:!t.listData||t.listData.length<1,expression:"(!listData || listData.length < 1)"}]},[n("td",{attrs:{colspan:"10"}},[n("div",{staticClass:"d-flex justify-content-center align-items-center"},[n("b",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}]},[t._v("Không có dữ liệu phù hợp !")])])])])],2)])])]),t._v(" "),n("div",{staticClass:"row mt-3 mb-3 mr-2 align-items-center"},[n("div",{staticClass:"col col-md-9 text-left"},[n("b",[t._v("\n        Bản ghi/ trang\n      ")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.page.per_page,expression:"page.per_page"}],staticClass:"form-control form-control-sm w-4re text-ghtk rounded border-ghtk d-inline-block",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.page,"per_page",e.target.multiple?a:a[0])},function(e){return t.getDataUserResign()}]}},[n("option",[t._v("5")]),t._v(" "),n("option",[t._v("10")]),t._v(" "),n("option",[t._v("25")]),t._v(" "),n("option",[t._v("50")]),t._v(" "),n("option",[t._v("100")])]),t._v(" "),n("div",{staticClass:"z-0 d-inline-block"},[n("b-pagination",{staticClass:"paginator-ghtk mb-0",attrs:{size:"sm",align:"left","total-rows":+t.page.total,"per-page":+t.page.per_page},on:{input:t.getDataUserResign},model:{value:t.page.current,callback:function(e){t.$set(t.page,"current",e)},expression:"page.current"}})],1)])]),t._v(" "),n("div",{staticClass:"modal-order row"},[n("b-modal",{attrs:{id:"modal-order-resign-work",centered:"",static:"","modal-class":"modal-xxl align-items-center",title:"THÔNG TIN ĐỀ XUẤT CHỐT SỔ BẢO HIỂM XÃ HỘI","header-class":"justify-content-center font-weight-bold","hide-footer":""},on:{hide:function(e){return t.resetCurData()}}},[n("update-order-resign-work",{attrs:{"id-order":t.curOrder.id||null,"modal-style":!0,"order-type":t.typeInsurance,profileId:t.masterId,edit:t.permission.edit_action,"hide-footer":""},on:{addOrderOk:t.addOrderOk}})],1),t._v(" "),n("approve-resign-work-modal",{attrs:{currentUserUpdateStatus:t.currentUserUpdateStatus,"is-show":t.isShowApproveModal,"is-dashboard":!0},on:{toggleModal:t.toggleApproveModal,changeAction:function(e){return t.updateStatus(t.idxCurrentOrderUpdateStatus,"duyet",t.rejectReason)}}}),t._v(" "),n("b-modal",{staticClass:"d-flex align-items-center",attrs:{centered:"",static:"",title:"Nhập lý do từ chối",id:"reject-modal","header-class":"justify-content-center","modal-class":"align-items-center","hide-footer":""}},[n("div",{staticClass:"text-center justify-content-center mb-2 txt-reason"},[t._v("Bạn có chắc chắn muốn từ chối nhân viên này?")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.rejectReason,expression:"rejectReason"}],staticClass:"form-control",attrs:{name:"reject-reason-input",rows:"5",placeholder:""},domProps:{value:t.rejectReason},on:{input:function(e){e.target.composing||(t.rejectReason=e.target.value)}}}),t._v(" "),n("div",{staticClass:"w-100 justify-content-center d-flex border-0 btn__action mt-2"},[n("b-btn",{staticClass:"btn__close text-white mr-1",on:{click:function(e){t.$bvModal.hide("reject-modal"),t.resetUpdateStatusData()}}},[t._v("Đóng")]),t._v(" "),n("b-btn",{staticClass:"btn__save text-white",attrs:{name:"resign-work-btn-confirm-reject-reason",id:"resign-work-btn-confirm-reject-reason"},on:{click:function(e){return t.updateStatus(t.idxCurrentOrderUpdateStatus,"tu_choi",t.rejectReason)}}},[t._v("Xác nhận")])],1)]),t._v(" "),n("b-modal",{staticClass:"d-flex align-items-center",attrs:{centered:"",static:"",title:"XÁC NHẬN HỦY ĐỀ XUẤT NGHỈ VIỆC",id:"cancel-resign-order-modal","header-class":"justify-content-center","modal-class":"align-items-center","hide-footer":""},on:{hide:function(e){return t.onCloseCancelModal()}}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isCancelingOrder,expression:"isCancelingOrder"}]},[n("div",{staticClass:"justify-content-center mb-2 txt-reason font-weight-bold"},[t._v("Vui lòng nhập lý do hủy đề xuất:")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.cancelReason,expression:"cancelReason"}],staticClass:"form-control",attrs:{rows:"1",placeholder:"Tối đa 255 ký tự"},domProps:{value:t.cancelReason},on:{input:function(e){e.target.composing||(t.cancelReason=e.target.value)}}}),t._v(" "),n("div",{staticClass:"mb-2 mt-3"},[n("b",[t._v("Lưu ý:")]),t._v(" Hành động này không thể hoàn tác. Bạn chắc chắn muốn hủy đề xuất?")]),t._v(" "),n("div",{staticClass:"w-100 d-flex justify-content-end border-0 btn__action mt-2"},[n("b-btn",{staticClass:"btn btn__close mr-1 btn-outline-danger",on:{click:function(e){return t.hideCancelOrderModal()}}},[t._v("Hủy")]),t._v(" "),n("b-btn",{staticClass:"btn btn__save text-white btn-ghtk",attrs:{name:"stop-work-btn-confirm-cancel-reason",id:"stop-work-btn-confirm-cancel-reason"},on:{click:function(e){return t.cancelOrder(t.idxCurrentOrderUpdateStatus,t.cancelReason)}}},[t._v("Xác nhận")])],1)])]),t._v(" "),n("b-modal",{attrs:{id:"reject-reason-modal",title:"Ghi chú",centered:"","title-class":"w-100","header-class":"text-center","modal-class":"align-items-center","hide-footer":"",size:"sm"}},[n("b-form-group",{attrs:{"label-size":"lg"}},[n("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.rejectReason,expression:"rejectReason",modifiers:{trim:!0}}],staticClass:"rounded form-control",attrs:{name:"reject-reason-input",rows:"4",placeholder:"Nhập ghi chú"},domProps:{value:t.rejectReason},on:{input:function(e){e.target.composing||(t.rejectReason=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.note,expression:"loading.note"}],staticClass:"d-flex justify-content-between"},[n("button",{staticClass:"btn btn-m-closed rounded text-white lh-0-8",on:{click:function(e){t.$bvModal.hide("reject-reason-modal"),t.resetUpdateStatusData()}}},[t._v("Đóng")]),t._v(" "),n("button",{staticClass:"btn btn-ghtk rounded text-white lh-0-8",attrs:{name:"resign-work-btn-save-note",id:"resign-work-btn-save-note"},on:{click:function(e){return t.updateStaffLogNote(t.idxCurrentOrderUpdateStatus,t.rejectReason)}}},[t._v("Lưu")])])],1),t._v(" "),n("ModalLiquidateContract",{attrs:{contractId:t.contract.contract_id,id:"detail-liquidate-contract-resign-work",title:"Thanh lý hợp đồng "+t.contract.contract_number,edit:t.permission.edit_action},on:{updateOk:t.updateLiquidateOk}}),t._v(" "),n("b-modal",{attrs:{title:"Cập nhật người xử lý",centered:"",id:"modal-censor-order",static:"","header-class":"justify-content-center","modal-class":"modal-xs align-items-center","hide-footer":""}},[t.censors?n("div",{staticClass:"modal-body list-user-censor"},t._l(t.censors,function(e,i){return n("div",{key:i},[n("div",{staticClass:"d-flex justify-content-between align-self-center content-censor mb-2"},[e?n("div",{staticClass:"info-censor align-items-center d-flex"},[e.avatar?n("div",{staticClass:"avt-censor mr-2"},[n("img",{attrs:{src:e.avatar,alt:"avt-user-censor",width:"30",height:"30"}})]):t._e(),t._v(" "),n("div",{staticClass:"name-censer mr-2 font-14"},[t._v("\n                    "+t._s(e.fullname)+" - "+t._s(e.username||"")+" - "+t._s(e.position_name)+"\n                  ")]),t._v(" "),n("div",{staticClass:"btn-chat mr-2"},[n("b-btn",{staticClass:"btn__chat border-0 btn btn-default p-0",on:{click:function(a){return t.gotoGroupChat(e)}}},[n("img",{attrs:{src:a("Ycr3"),alt:"icon chat",width:"24",height:"24"}})])],1)]):t._e(),t._v(" "),n("div",{staticClass:"btn-delete-user"},[n("b-btn",{staticClass:"btn text-danger border-danger btn-outline-default btn-sm",on:{click:function(a){return t.updateCensor(t.idHrOrder,{id:e.id,name:e.name,order_id:e.order_id||null},"delete",t.actionHandler)}}},[t._v("Xóa")])],1)]),t._v(" "),n("hr",{staticClass:"mt-2 mb-2"})])}),0):t._e(),t._v(" "),n("div",{staticClass:"d-flex justify-content-between border-0"},[n("div",{staticClass:"input-user-censor"},[n("single-select-user",{attrs:{reset:t.resetUser,user:t.userCensor,placeholder:"Nhập người xử lý"},on:{onChange:t.selectedUserCensor}})],1),t._v(" "),n("div",{staticClass:"footer-btn"},[n("b-btn",{staticClass:"btn btn__them",on:{click:function(e){return t.updateCensor(t.idHrOrder,t.userCensor,"add",t.actionHandler)}}},[t._v("Thêm")])],1)])]),t._v(" "),n("b-modal",{attrs:{id:"modal-order-off-work",static:"","modal-class":"modal-xxl",title:"THÔNG TIN ĐỀ XUẤT NGHỈ VIỆC","hide-footer":""},on:{hide:t.resetCurData}},[n("update-order",{attrs:{"id-order":t.orderId||null,"modal-style":!0,"order-type":t.typeResign},on:{addOrderOk:function(e){return t.addOrderOk()}}})],1)],1),t._v(" "),n("HrTagModal",{attrs:{open:t.openModalHrTag,attachPermission:t.curTagData.attach,scope:"global",recordId:t.curTagData.record.id,tableName:"stop_working",tags:t.tags},on:{action:t.actionUpdateRecord}})],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",{staticClass:"header-row screen-off"},[e("th",{staticClass:"text-center profile-col"},[e("b",[this._v("Nhân viên")])]),this._v(" "),e("th",{staticClass:"text-center log-col"},[e("b",[this._v("Trạng thái")])]),this._v(" "),e("th",{staticClass:"text-center action-col"},[e("b",[this._v("Thao tác")])])])])}],!1,Cu,"data-v-bda2681c",null).exports,ku={name:"QuestionsTable",props:{questions:{default:null},edit:{default:!1,type:Boolean},permission:{view:{default:!1,type:Boolean},edit:{default:!1,type:Boolean}}},directives:{autoresize:{bind:function(t){t.style.overflowY="hidden",t.style.resize="none"},created:function(t){t.style.height="auto",t.style.height=t.scrollHeight+2+"px"},update:function(t){t.style.height="auto",t.style.height=t.scrollHeight+2+"px"}}},data:function(){return{questionId:null,question:[],questionBefore:null}},watch:{edit:function(t){t&&this.editQuestion("confirm",this.question),this.questionId=null},questions:function(t,e){this.questionBefore=null}},methods:{formattedText:function(t){return t?t.replace(/\n/g,"</br>"):""},showModalAction:function(t,e){var a=this;if("edit"===t)return this.questions[e.index]&&this.questionBefore&&+this.questions[e.index].id!=+this.questionBefore.data.id&&(this.questions[this.questionBefore.index]=JSON.parse(sa()(this.questionBefore.data))),this.questionBefore={index:e.index,data:JSON.parse(sa()(e.question))},this.questionId=e.question.id,void this.$nextTick(function(){a.$refs["textarea-question-"+a.questionId].forEach(function(t){t.style.height="auto",t.style.height=t.scrollHeight+2+"px"})});this.$emit("action",{action:t,data:e.question||null})},confirmEdit:function(t,e){this.question=e.question,this.$emit("action",{action:t,data:e.question||null})},editQuestion:function(t,e){var a=this;return l()(o.a.mark(function n(){var i,s,r,l,c;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("cancel"!==t){n.next=4;break}return a.questionId=null,a.questions&&a.questions[e]&&(a.questions[e]=JSON.parse(sa()(a.questionBefore.data))),n.abrupt("return");case 4:if(!(Me.a.isEmpty(e.content)||Me.a.isEmpty(e.answers)||Me.a.isEmpty(e.id))){n.next=7;break}return Me.a.showMessage("Thiếu dữ liệu đầu vào!","warning"),n.abrupt("return");case 7:return i=e.id,s=a.checkDataAndConvert(e.answers),r=a.checkDataAndConvert(e.content),document.getElementById("icon_show_"+i).classList.add("active"),n.prev=11,n.next=14,Ei({question_id:i,content:r,answers:s});case 14:l=n.sent,(c=l.data).success?(a.$emit("action",{action:"confirm",data:e}),a.questionBefore=null,Me.a.showMessage(c.message||"Chỉnh sửa câu hỏi thành công trắc nghiệm!","success")):(a.$emit("action",{action:"errorEditQuestion"}),Me.a.showMessage(c.message||"Chỉnh sửa thất bại!","warning")),n.next=23;break;case 19:n.prev=19,n.t0=n.catch(11),a.$emit("action",{action:"errorEditQuestion"}),console.log(n.t0);case 23:return n.prev=23,document.getElementById("icon_show_"+i).classList.remove("active"),a.questionId=null,n.finish(23);case 27:case"end":return n.stop()}},n,a,[[11,19,23,27]])}))()},checkDataAndConvert:function(t){if("string"==typeof t&&(t=t.replace(/<\d/g,function(t){return t.replace("<","< ")})),Array.isArray(t))for(var e=0;e<t.length;e++)t[e].content&&(t[e].content=t[e].content.replace(/<\d/g,function(t){return t.replace("<","< ")}));return t}}};var xu=function(t){a("BKkZ")},Su=Object(y.a)(ku,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-questions-wrap"},[a("table",{staticClass:"table table-questions"},[t._m(0),t._v(" "),a("tbody",[t._l(t.questions,function(e,n){return a("tr",{key:n,staticClass:"questions-list"},[a("td",{staticClass:"question-element"},[a("div",{staticClass:"question-element__content",staticStyle:{display:"flex"}},[a("label",{staticClass:"label-question",attrs:{for:""}},[t._v("Câu "+t._s(n+1)+":")]),t._v(" "),t.questionId==e.id?a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"question.content"},{name:"autoresize",rawName:"v-autoresize"}],ref:"textarea-question-"+e.id,refInFor:!0,staticClass:"input-question inp-content-edit",attrs:{type:"text"},domProps:{value:e.content},on:{input:function(a){a.target.composing||t.$set(e,"content",a.target.value)}}}):a("div",{staticClass:"inp-content",staticStyle:{display:"inline-block"}},[a("pre",{staticClass:"pre-text"},[t._v(t._s(e.content))])])]),t._v(" "),a("div",{staticClass:"question-element__answers"},t._l(e.answers,function(n,i){return a("div",{key:i,staticClass:"question-element__answer d-flex",class:1==n.is_correct?"answer-true":""},[a("span",{staticStyle:{position:"relative",bottom:"-1px"}},[t._v(t._s(String.fromCharCode(97+i).toUpperCase())+".")]),t._v(" "),t.questionId==e.id?a("textarea",{directives:[{name:"model",rawName:"v-model",value:n.content,expression:"answer.content"},{name:"autoresize",rawName:"v-autoresize"}],ref:"textarea-question-"+e.id,refInFor:!0,staticClass:"inp-content-edit",attrs:{type:"text"},domProps:{value:n.content},on:{input:function(e){e.target.composing||t.$set(n,"content",e.target.value)}}}):a("pre",{staticClass:"pre-text"},[t._v(t._s(n.content))])])}),0),t._v(" "),a("div",{staticClass:"question-element__tags"},t._l(e.tags,function(e,n){return a("div",{key:n,staticClass:"question-element__tag"},[t._v("\n                      "+t._s(e)+"\n                    ")])}),0),t._v(" "),a("i",{staticClass:"fas fa-spinner fa-pulse icon-show-cus notActive",attrs:{id:"icon_show_"+e.id}})]),t._v(" "),t.questionId!==e.id&&t.permission.edit?a("td",{staticClass:"question__action"},[a("div",{staticClass:"btn-action-question"},[a("b-btn",{staticClass:"question__action_button",staticStyle:{"margin-bottom":"0.5rem"},attrs:{variant:"outline-ghtk"},on:{click:function(a){return t.showModalAction("edit",{question:e,index:n})}}},[t._v("\n                    Sửa\n                ")]),t._v(" "),a("b-btn",{staticClass:"question__action_button",attrs:{variant:"outline-ghtk"},on:{click:function(a){return t.showModalAction("delete",{question:e})}}},[t._v("\n                    Xóa\n                ")])],1)]):t.permission.edit&&t.questionId===e.id?a("td",{staticClass:"question__action"},[a("div",{staticClass:"btn-action-question"},[a("b-btn",{staticClass:"question__action_button",staticStyle:{"margin-bottom":"0.5rem"},attrs:{variant:"outline-ghtk"},on:{click:function(a){return t.confirmEdit("edit",{question:e})}}},[t._v("Xác nhận")]),t._v(" "),a("b-btn",{staticClass:"question__action_button",attrs:{variant:"outline-ghtk"},on:{click:function(e){return t.editQuestion("cancel",n)}}},[t._v("Hủy")])],1)]):t._e()])}),t._v(" "),0===t.questions.length?a("tr",[t._m(1)]):t._e()],2)])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",{staticClass:"header"},[e("th",{staticClass:"header__element",staticStyle:{"z-index":"2"}},[this._v("Danh sách câu hỏi")]),this._v(" "),e("th",{staticClass:"header__element th-action",staticStyle:{"z-index":"2"}},[this._v("Thao tác")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"text-center",attrs:{colspan:"10"}},[e("div",{staticStyle:{padding:"15px 10px"}},[this._v("Không có dữ liệu phù hợp !")])])}],!1,xu,"data-v-78a83eab",null).exports,Mu={name:"EssayQuestionsTable",props:{questions:{default:null},edit:{default:!1,type:Boolean},permission:{view:{default:!1,type:Boolean},edit:{default:!1,type:Boolean}}},directives:{autoresize:{bind:function(t){t.style.overflowY="hidden",t.style.resize="none"},created:function(t){t.style.height="auto",t.style.height=t.scrollHeight+2+"px"},update:function(t){t.style.height="auto",t.style.height=t.scrollHeight+2+"px"}}},data:function(){return{questionId:null,question:[],questionBefore:null}},watch:{edit:function(t){t&&this.editEssayQuestion("confirm",this.question),this.questionId=null},questions:function(t,e){this.questionBefore=null}},methods:{getStyleAnswer:function(t,e){if(null!==t.answer){if("class"===e)return"question-element__answer";if(t.answer.length)return""}return"margin"===e?"padding-top: 0.85rem;padding-bottom: 1.2rem;":"placeholder"===e?"Nhập để thêm đáp án":"top"===e?"top: 1.4rem":void 0},getClassElement:function(t){var e="question-edit";return+this.questionId==+t&&(e="question-edit_true"),e},showModalAction:function(t,e){var a=this;if("edit"===t)return this.questions[e.index]&&this.questionBefore&&+this.questions[e.index].id!=+this.questionBefore.data.id&&(this.questions[this.questionBefore.index]=JSON.parse(sa()(this.questionBefore.data))),this.questionBefore={index:e.index,data:JSON.parse(sa()(e.question))},this.questionId=e.question.id,void this.$nextTick(function(){a.$refs["textarea-question-"+a.questionId].forEach(function(t){t.style.height="auto",t.style.height=t.scrollHeight+2+"px"})});this.$emit("action",{action:t,data:e.question||null})},confirmEdit:function(t,e){this.question=e.question,this.$emit("action",{action:t,data:e.question||null})},editEssayQuestion:function(t,e){var a=this;return l()(o.a.mark(function n(){var i,s,r;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("cancel"!==t){n.next=4;break}return a.questionId=null,a.questions&&a.questions[e]&&(a.questions[e]=JSON.parse(sa()(a.questionBefore.data))),n.abrupt("return");case 4:if(!Me.a.isEmpty(e.content)&&!Me.a.isEmpty(e.id)){n.next=8;break}return Me.a.showMessage("Thiếu dữ liệu đầu vào!","warning"),a.$emit("action",{action:"confirmErrorFromEssayComponent",data:e}),n.abrupt("return");case 8:return i={question_id:e.id,content:e.content,answer:e.answer,has_test:e.hasTestQuestion,category_id:e.category_id},document.getElementById("icon_show_"+e.id).classList.add("active"),n.prev=10,n.next=13,Ci(i);case 13:s=n.sent,(r=s.data).success?(a.$emit("action",{action:"confirm",data:e}),Me.a.showMessage(r.message||"Chỉnh sửa câu hỏi thành công!","success"),a.questionBefore=null):(Me.a.showMessage(r.message||"Chỉnh sửa thất bại!","warning"),a.$emit("action",{action:"confirmErrorFromEssayComponent",data:e})),n.next=22;break;case 18:n.prev=18,n.t0=n.catch(10),422==+n.t0.response.status&&Me.a.showMessage(n.t0.response.data.message,"warning"),a.$emit("action",{action:"confirmErrorFromEssayComponent",data:e});case 22:return n.prev=22,document.getElementById("icon_show_"+e.id).classList.remove("active"),a.questionId=null,n.finish(22);case 26:case"end":return n.stop()}},n,a,[[10,18,22,26]])}))()}}};var Tu=function(t){a("H2gP")},Du=Object(y.a)(Mu,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-questions-wrap"},[a("table",{staticClass:"table table-questions"},[t._m(0),t._v(" "),a("tbody",[t._l(t.questions,function(e,n){return a("tr",{key:n,staticClass:"questions-list"},[a("td",{staticClass:"question-element"},[a("div",{staticClass:"question-element__content",class:t.questionId==e.id?"question-edit_true":"question-edit"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"question.content"}],ref:"textarea-question-"+e.id,refInFor:!0,staticClass:"inp-content",attrs:{disabled:t.questionId!=e.id},domProps:{value:e.content},on:{input:function(a){a.target.composing||t.$set(e,"content",a.target.value)}}}),t._v(" "),a("span",{staticClass:"number_question"},[t._v("Câu "+t._s(n+1)+": ")])]),t._v(" "),t.permission.edit?a("div",{staticClass:"question-element__answers",class:t.getClassElement(e.id),style:t.getStyleAnswer(e,"margin")},[a("div",{class:t.getStyleAnswer(e,"class")},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.answer,expression:"question.answer"}],ref:"textarea-question-"+e.id,refInFor:!0,staticClass:"inp-content inp-content-answer",attrs:{placeholder:t.getStyleAnswer(e,"placeholder"),disabled:t.questionId!=e.id},domProps:{value:e.answer},on:{input:function(a){a.target.composing||t.$set(e,"answer",a.target.value)}}}),t._v(" "),a("span",{staticClass:"number_answer",staticStyle:{color:"#00904A"},style:t.getStyleAnswer(e,"top")},[t._v("Đáp án: ")])])]):t._e(),t._v(" "),a("div",{staticClass:"question-element__tags"},t._l(e.tags,function(e,n){return a("div",{key:n,staticClass:"question-element__tag"},[t._v("\n                      "+t._s(e)+"\n                    ")])}),0),t._v(" "),a("i",{staticClass:"fas fa-spinner fa-pulse icon-show-cus notActive",attrs:{id:"icon_show_"+e.id}})]),t._v(" "),t.questionId!==e.id&&t.permission.edit?a("td",{staticClass:"question__action"},[a("div",{staticClass:"btn-action-question"},[a("b-btn",{staticClass:"question__action_button",staticStyle:{"margin-bottom":"0.5rem"},attrs:{variant:"outline-ghtk"},on:{click:function(a){return t.showModalAction("edit",{question:e,index:n})}}},[t._v("\n                  Sửa\n                ")]),t._v(" "),a("b-btn",{staticClass:"question__action_button",attrs:{variant:"outline-ghtk"},on:{click:function(a){return t.showModalAction("delete",{question:e})}}},[t._v("\n                  Xóa\n                ")])],1)]):t.permission.edit&&t.questionId===e.id?a("td",{staticClass:"question__action"},[a("div",{staticClass:"btn-action-question"},[a("b-btn",{staticClass:"question__action_button",staticStyle:{"margin-bottom":"0.5rem"},attrs:{variant:"outline-ghtk"},on:{click:function(a){return t.confirmEdit("edit",{question:e})}}},[t._v("Xác nhận")]),t._v(" "),a("b-btn",{staticClass:"question__action_button",attrs:{variant:"outline-ghtk"},on:{click:function(e){return t.editEssayQuestion("cancel",n)}}},[t._v("Hủy")])],1)]):t._e()])}),t._v(" "),0===t.questions.length?a("tr",[t._m(1)]):t._e()],2)])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",{staticClass:"header"},[e("th",{staticClass:"header__element",staticStyle:{"z-index":"2"}},[this._v("Danh sách câu hỏi")]),this._v(" "),e("th",{staticClass:"header__element th-action",staticStyle:{"z-index":"2"}},[this._v("Thao tác")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"text-center",attrs:{colspan:"10"}},[e("div",{staticStyle:{padding:"15px 10px"}},[this._v("Không có dữ liệu phù hợp !")])])}],!1,Tu,"data-v-1bbfd454",null).exports,Iu={name:"ModalUploadFile",props:{title:{default:"Thêm câu hỏi",type:String},id:{type:String,default:"modal-upload-file"},nameFile:{type:String,default:"câu hỏi"},height:{default:"150px",type:String},accept:{type:String,default:".pdf, .xlsx"},inputPlaceholder:{type:String,default:"Chọn file upload"},urlDefault:{type:String,default:null},typeQuestion:{type:Number,defautl:1}},data:function(t){return{fileAdd:null,fileDefault:"../../../assets/images/ghtk_excel.png",fileName:null}},methods:{initModal:function(){this.fileAdd=null},downloadFile:function(){Me.a.isEmpty(this.urlDefault)?Me.a.showMessage("Không có link file mẫu cần tải!","warning"):window.open(this.urlDefault,"_blank")},chooseFile:function(){this.$refs.inputChooseFile.click()},getFileType:function(t){if(!t)return Me.a.showMessage("Không có file!","warning");var e="";return e="string"==typeof t?t.split("?").shift().split(".").pop().toLowerCase():t.name.split(".").pop().toLowerCase(),this.fileName=t.name.split(".").shift(),["xls","xlsx","xlsb"].includes(e)?"excel":Me.a.showMessage("File không hợp lệ!","warning")},deleteFile:function(){this.fileAdd=null},addFile:function(t){this.fileAdd||(this.fileAdd=null);var e=t.target.files||t.dataTransfer.files;e.length>0&&(e=e[0]);var a=this.accept.split(", "),n=e.name.split(".").pop();if(!n)return Me.a.showMessage("File không hợp lệ!","warning");a.includes(e.type)||a.includes("."+n)?this.fileAdd=e:Me.a.showMessage("Định dạng file "+e.name+"  không được hỗ trợ !","warning"),t.target.value=null},uploadFile:function(){var t=this.$el.querySelectorAll(".bounder .btn-disable-file"),e=!0,a=!1,n=void 0;try{for(var i,s=fa()(t);!(e=(i=s.next()).done);e=!0){var o=i.value;o.nextElementSibling.classList.remove("file-deleted"),o.classList.remove("ion-md-refresh-circle"),o.classList.add("ion-md-close-circle")}}catch(t){a=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(a)throw n}}this.$emit("uploadFile",this.fileAdd)},closeModal:function(){this.$bvModal.hide(this.id),this.fileAdd=null}}};var Pu=function(t){a("rbXD"),a("xfyg")},Eu={name:"QuestionsManagement",components:{ModalUploadFile:Object(y.a)(Iu,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-upload-file",attrs:{id:"modal-upload-file"}},[n("b-modal",{staticClass:"d-flex align-items-center",attrs:{id:t.id,"hide-footer":"","hide-header-close":"","header-class":"justify-content-center",size:"sm","modal-class":"align-items-center",centered:"",static:""},on:{shown:t.initModal}},[n("template",{slot:"modal-title"},[n("div",{staticClass:"text-title pl-3"},[n("span",[t._v(t._s(t.title))])]),t._v(" "),n("div",{staticClass:"btn-close btn",on:{click:t.closeModal}},[n("i",{staticClass:"fa fa-times"})])]),t._v(" "),t.fileAdd?n("div",[n("div",{staticClass:"justify-content-center text-center txt-body"},[t._v("Click xác nhận để tải file excel "+t._s(t.nameFile)+"!")]),t._v(" "),n("div",{staticClass:"modal-show-file justify-content-center d-flex mt-4"},["excel"===t.getFileType(t.fileAdd)?n("div",{staticClass:"d-table"},[n("img",{style:{height:t.height},attrs:{src:a("juWg"),alt:"file-".nameFile}}),t._v(" "),n("div",{staticClass:"text-file-name my-1 text-center"},[t._v(t._s(t.fileName))])]):t._e(),t._v(" "),n("span",{staticClass:"icon ion-md-close-circle btn-disable-file a2",attrs:{title:"Xóa"},on:{click:t.deleteFile}})]),t._v(" "),n("div",{staticClass:"btn-action mt-3 justify-content-center align-items-center d-flex"},[n("b-button",{staticClass:"btn-ghtk text-center btn__confirm",on:{click:t.uploadFile}},[t._v("Xác nhận")])],1)]):n("div",[n("div",{staticClass:"justify-content-center text-center txt-body"},[t._v("Thêm file để tải lên file excel "+t._s(t.nameFile)+"!")]),t._v(" "),n("div",{staticClass:"justify-content-center mt-2 text-center txt-body"},[n("h5",[n("b",[t._v("KÉO THẢ FILE ĐỂ UPLOAD")])])]),t._v(" "),n("div",{staticClass:"btn-action d-flex mt-2 justify-content-center align-items-center"},[n("b-button",{staticClass:"mr-1 btn-outline-ghtk btn__file-default py-1 px-2",on:{click:t.downloadFile}},[t._v(" Tải file mẫu ")]),t._v(" "),n("b-button",{staticClass:"btn-outline-ghtk btn__choose-file py-1 px-2",on:{click:function(e){return t.chooseFile()}}},[t._v(" Chọn file ")])],1)]),t._v(" "),n("div",{staticClass:"custom-choose-file"},[n("input",{ref:"inputChooseFile",staticClass:"custom-file-input hide",attrs:{type:"file",multiple:!1,accept:t.accept,placeholder:t.inputPlaceholder,id:"input-".id,name:"input_"+t.id},on:{input:t.addFile}})])],2)],1)},[],!1,Pu,"data-v-8c02d868",null).exports,QuestionsTable:Su,MultiSelectSyllabus:ha,Datepicker:qi.a,SingleSelectUser:Ie.a,EssayQuestionsTable:Du,MultiSelectDepartment:_e.a,MultiSelectPosition:be.a},created:function(){this.initData()},data:function(){return{filter:{department_id:null,position_id:null,category_id:null,syllabus_id:null,creation_time:null,creator:null,question_content:null,page:1,limit:10},page:{current_page:1,per_page:15,total_page:0,current_page_essay:1,per_page_essay:15,total_page_essay:0},questions:[],essayQuestions:[],loading:!0,contentNotification:null,typeAction:null,questionId:null,editQuestion:!1,editEssayQuestion:!1,permission:{view:!1,edit:!1},typeQuestion:1,urlDownloadFile:"https://cache.giaohangtietkiem.vn/d/89d6bd47f07dae95fb327f1e2d01c534.xlsx",checkDeleteQuestion:!1}},methods:{initData:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getPermistion();case 2:t.getQuestionMultiple(),t.getEssayQuestions();case 4:case"end":return e.stop()}},e,t)}))()},getPermistion:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ki();case 3:(a=e.sent).data.success?((n=a.data.data).includes("education.view")&&(t.permission.view=!0),n.includes("education.edit")&&(t.permission.edit=!0)):Me.a.showMessage("Có lỗi xảy ra khi kiểm tra quyền người dùng","warning"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,t,[[0,7]])}))()},handleFilterSelected:function(t,e){this.filter[e]=t?t.id:null},handleFilterUnSelected:function(t){this.filter[t]=null},getQuestions:function(){1===this.typeQuestion?this.getQuestionMultiple():this.getEssayQuestions()},getQuestionMultiple:function(){var t=this;return l()(o.a.mark(function e(){var a,n,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,t.filter.page=t.page.current_page,t.filter.limit=t.page.per_page,(a=i()({},t.filter)).creation_time&&a.creation_time.start&&a.creation_time.end&&(a.creation_time_start=Me.a.formatDate(a.creation_time.start,"YYYY-MM-DD"),a.creation_time_end=Me.a.formatDate(a.creation_time.end,"YYYY-MM-DD"),delete a.creation_time),e.prev=5,e.next=8,xi(a);case 8:n=e.sent,(s=n.data).success?(t.questions=s.data.hasOwnProperty("questions")?s.data.questions:[],t.page.total_page=s.data.total):Me.a.showMessage(s.message||"Có lỗi xảy ra khi lấy danh sách câu hỏi trắc nghiệm","warning"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),console.log(e.t0);case 16:return e.prev=16,t.$nextTick(function(){t.loading=!1}),e.finish(16);case 19:case"end":return e.stop()}},e,t,[[5,13,16,19]])}))()},getEssayQuestions:function(){var t=this;return l()(o.a.mark(function e(){var a,n,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,t.filter.page=t.page.current_page_essay,t.filter.limit=t.page.per_page_essay,(a=i()({},t.filter)).creation_time&&a.creation_time.start&&a.creation_time.end&&(a.creation_time_start=Me.a.formatDate(a.creation_time.start,"YYYY-MM-DD"),a.creation_time_end=Me.a.formatDate(a.creation_time.end,"YYYY-MM-DD"),delete a.creation_time),e.prev=5,e.next=8,bi(a);case 8:n=e.sent,(s=n.data).success?(t.essayQuestions=s.data.hasOwnProperty("questions")?s.data.questions:[],t.page.total_page_essay=s.data.total):Me.a.showMessage(s.message||"Có lỗi xảy ra khi lấy danh sách câu hỏi tự luận","warning"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),console.log(e.t0);case 16:return e.prev=16,t.$nextTick(function(){t.loading=!1}),e.finish(16);case 19:case"end":return e.stop()}},e,t,[[5,13,16,19]])}))()},handleDepartmentSelected:function(t){null!==t&&(Array.isArray(t)||(t=[t])),this.filter.department_id=t?t.map(function(t){return t.id}).toString():""},handlePositionSelected:function(t){null!==t&&(Array.isArray(t)||(t=[t])),this.filter.position_id=t?t.map(function(t){return t.id}).toString():""},search:function(){1===this.typeQuestion?this.page.current_page=1:this.page.current_page_essay=1,this.getQuestions()},selectedUser:function(t){this.filter.username=t},showModalAdd:function(){2===this.typeQuestion?this.urlDownloadFile="https://cache.giaohangtietkiem.vn/d/0385d6fd2feef4aaf17c254a58583ac2.xlsx":this.urlDownloadFile="https://cache.giaohangtietkiem.vn/d/89d6bd47f07dae95fb327f1e2d01c534.xlsx",this.$bvModal.show("modal-upload-questions")},action:function(t){if("confirmErrorFromEssayComponent"===t.action&&(this.editEssayQuestion=!1),"errorEditQuestion"!==t.action){var e=!1,a="";if(this.typeAction=t.action,this.questionId=t.data.id,t.data.syllabuses&&t.data.syllabuses.length>0&&(e=!0,t.data.syllabuses.forEach(function(t){a+=t+", "})),"confirm"===this.typeAction)return this.getQuestions(),void(1===this.typeQuestion?this.editQuestion=!1:this.editEssayQuestion=!1);if("edit"!==this.typeAction||e)return"edit"===this.typeAction&&e?(this.contentNotification="Câu hỏi đang nằm trong các Bài kiểm tra thuộc chương trình "+a+"bạn có chắc chắn muốn Sửa không?",void this.$bvModal.show("modal-notification")):void("delete"===this.typeAction&&(this.contentNotification="Bạn có chắc chắn muốn Xóa câu hỏi không?",e&&(this.contentNotification="Không thể xóa câu hỏi do câu hỏi đang nằm trong các Bài kiểm tra thuộc chương trình "+a+" !",this.checkDeleteQuestion=!0),this.$bvModal.show("modal-notification")));1===this.typeQuestion?this.editQuestion=!0:this.editEssayQuestion=!0}else this.editQuestion=!1},confirmAction:function(t,e){"delete"!==t?"edit"===t&&(1===this.typeQuestion?this.editQuestion=!0:this.editEssayQuestion=!0,this.resetModal()):this.checkDeleteQuestion?this.resetModal():this.deleteQuestion(e)},resetModal:function(){this.$bvModal.hide("modal-notification"),this.checkDeleteQuestion=!1},deleteQuestion:function(t){var e=this;return l()(o.a.mark(function a(){var n,i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.loading=!0,a.prev=1,a.next=4,_i({question_id:t});case 4:if(n=a.sent,!(i=n.data).success){a.next=12;break}return e.resetModal(),e.changeListData("delete",t),a.abrupt("return",Me.a.showMessage(i.message||"Xóa câu hỏi thành công","success"));case 12:return a.abrupt("return",Me.a.showMessage(i.message||"Xóa câu hỏi không thành công!","warning"));case 13:a.next=18;break;case 15:a.prev=15,a.t0=a.catch(1),console.log(a.t0);case 18:return a.prev=18,e.loading=!1,a.finish(18);case 21:case"end":return a.stop()}},a,e,[[1,15,18,21]])}))()},changeListData:function(t,e){"delete"===t&&(1==+this.typeQuestion?this.questions=this.questions.filter(function(t){if(+t.id!=+e)return t}):this.essayQuestions=this.essayQuestions.filter(function(t){if(+t.id!=+e)return t}))},closeModal:function(){this.resetModal(),this.editQuestion=!1,this.editEssayQuestion=!1},importQuestions:function(t){1===this.typeQuestion?this.importQuestionsMultiple(t):this.importQuestionsAssay(t)},importQuestionsMultiple:function(t){var e=this;return l()(o.a.mark(function a(){var n,i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,e.$startLoading(),t){a.next=5;break}return Me.a.showMessage("Vui lòng chọn 1 file để upload !"),a.abrupt("return");case 5:return(n=new FormData).append("file",t),a.next=9,Si(n);case 9:if(!(i=a.sent).data.success){a.next=16;break}return a.next=13,e.getQuestionMultiple();case 13:Me.a.showMessage(i.data.message,"success"),a.next=17;break;case 16:Me.a.showMessage(i.data.message||"Không thể upload file, vui lòng liên hệ với IT để được hộ trợ !","warning");case 17:a.next=23;break;case 19:a.prev=19,a.t0=a.catch(0),Me.a.showMessage("Không thể upload file, vui lòng liên hệ với IT để được hỗ trợ !","warning"),console.log(a.t0);case 23:return a.prev=23,e.$stopLoading(),e.$bvModal.hide("modal-upload-questions"),a.finish(23);case 27:case"end":return a.stop()}},a,e,[[0,19,23,27]])}))()},importQuestionsAssay:function(t){var e=this;return l()(o.a.mark(function a(){var n,i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,e.$startLoading(),t){a.next=5;break}return Me.a.showMessage("Vui lòng chọn 1 file để upload !"),a.abrupt("return");case 5:return(n=new FormData).append("file",t),a.next=9,yi(n);case 9:if(!(i=a.sent).data.success){a.next=16;break}return a.next=13,e.getEssayQuestions();case 13:Me.a.showMessage(i.data.message,"success"),a.next=17;break;case 16:Me.a.showMessage(i.data.message||"Không thể upload file, vui lòng liên hệ với IT để được hộ trợ !","warning");case 17:a.next=23;break;case 19:a.prev=19,a.t0=a.catch(0),Me.a.showMessage("Không thể upload file, vui lòng liên hệ với IT để được hỗ trợ !","warning"),console.log(a.t0);case 23:return a.prev=23,e.$stopLoading(),e.$bvModal.hide("modal-upload-questions"),a.finish(23);case 27:case"end":return a.stop()}},a,e,[[0,19,23,27]])}))()}}};var Lu=function(t){a("qAfc")},Au=Object(y.a)(Eu,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"questions-wrap"}},[a("b-container",{attrs:{fluid:""}},[a("b-row",{staticClass:"header-wrap"},[a("b-col",{staticClass:"header"},[a("h4",{staticClass:"m-0 font-weight-bold text-black title"},[t._v("Đào tạo")]),t._v(" "),a("div",{staticClass:"action-wrap"},[a("div",{staticClass:"action-toggle"},[a("router-link",{staticClass:"link action-toggle--not-active",attrs:{to:"/staff-work/syllabus"}},[t._v("\n                      Chương trình\n                    ")]),t._v(" "),a("div",{staticClass:"action-toggle--active"},[t._v("Câu hỏi")])],1),t._v(" "),a("button",{staticClass:"btn btn-question",class:2===t.typeQuestion?"disabled-btn":"",on:{click:function(e){t.typeQuestion=1}}},[t._v("\n                    Trắc nghiệm\n                  ")]),t._v(" "),a("button",{staticClass:"btn btn-question",class:1===t.typeQuestion?"disabled-btn":"",on:{click:function(e){t.typeQuestion=2}}},[t._v("\n                    Tự luận\n                  ")]),t._v(" "),t.permission.edit?a("button",{staticClass:"btn btn-ghtk btn-add-cus rounded",on:{click:t.showModalAdd}},[t._v("\n                        + Thêm\n                    ")]):t._e()])])],1),t._v(" "),a("b-row",{staticClass:"filter"},[a("b-col",{attrs:{cols:"11"}},[a("b-row",[a("b-col",{staticClass:"col-2 pr-0"},[a("multi-select-department",{attrs:{"custom-class":"multiselect-ghtk multiselect-no-horizontal","auto-close":!0,"is-multiple":!1,placeholder:"Bộ phận","department-ids":t.filter.department_id},on:{handleDepartmentSelected:t.handleDepartmentSelected}})],1),t._v(" "),a("b-col",{staticClass:"col-2 pr-0"},[a("MultiSelectPosition",{staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{"is-multiple":!1,"position-ids":t.filter.position_id,"department-ids":t.filter.department_id,"auto-close":!0,"hide-selected":!0,placeholder:"Vị trí"},on:{handlePositionSelected:t.handlePositionSelected}})],1),t._v(" "),a("b-col",{staticClass:"col-2 pr-0"},[a("multi-select-syllabus",{attrs:{"custom-class":"z-5 multiselect-ghtk multiselect-no-horizontal","syllabuse-ids":t.filter.syllabus_id,"auto-close":!0,multiple:!1,placeholder:"Chương trình"},on:{select:function(e){return t.handleFilterSelected(e,"syllabus_id")},remove:function(e){return t.handleFilterUnSelected("syllabus_id")}}})],1),t._v(" "),a("b-col",{staticClass:"col-2 pr-0"},[a("v-date-picker",{attrs:{mode:"range",locale:"vi",color:"green","input-props":{placeholder:"Ngày tạo",class:"z-3 form-control rounded"},popover:{visibility:"focus"}},model:{value:t.filter.creation_time,callback:function(e){t.$set(t.filter,"creation_time",e)},expression:"filter.creation_time"}})],1),t._v(" "),a("b-col",{staticClass:"col-2 pr-0"},[a("single-select-user",{attrs:{placeholder:"Người tạo"},on:{select:function(e){return t.handleFilterSelected(e,"creator")},remove:function(e){return t.handleFilterUnSelected("creator")}}})],1),t._v(" "),a("b-col",{staticClass:"col-2 pr-0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.question_content,expression:"filter.question_content"}],staticClass:"form-control rounded",attrs:{placeholder:"Câu hỏi"},domProps:{value:t.filter.question_content},on:{input:function(e){e.target.composing||t.$set(t.filter,"question_content",e.target.value)}}})])],1)],1),t._v(" "),a("b-col",{attrs:{cols:"1"}},[a("button",{staticClass:"btn btn-ghtk rounded action-search",on:{click:t.search}},[t._v("\n                    Tìm kiếm\n                ")])])],1)],1),t._v(" "),a("b-container",{staticClass:"questions-page-content",attrs:{fluid:""}},[a("b-row",[1===t.typeQuestion?a("b-col",[a("QuestionsTable",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{questions:t.questions,edit:t.editQuestion,permission:t.permission},on:{action:t.action}})],1):t._e(),t._v(" "),2===t.typeQuestion?a("b-col",[a("EssayQuestionsTable",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{questions:t.essayQuestions,edit:t.editEssayQuestion,permission:t.permission},on:{action:t.action}})],1):t._e()],1),t._v(" "),a("b-row",[1===t.typeQuestion?a("b-col",{staticClass:"questions-page-pagination"},[a("b",[t._v("\n                  Bản ghi/ trang\n                ")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.page.per_page,expression:"page.per_page"}],staticClass:"form-control form-control-sm w-4re text-ghtk rounded border-ghtk d-inline-block",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.page,"per_page",e.target.multiple?a:a[0])},function(e){return t.getQuestions()}]}},[a("option",[t._v("15")]),t._v(" "),a("option",[t._v("25")]),t._v(" "),a("option",[t._v("35")]),t._v(" "),a("option",[t._v("45")]),t._v(" "),a("option",[t._v("55")])]),t._v(" "),a("div",{staticClass:"z-0 d-inline-block"},[a("b-pagination",{staticClass:"paginator-ghtk mb-0",attrs:{size:"sm",align:"left","total-rows":+t.page.total_page,"per-page":+t.page.per_page},on:{input:function(e){return t.getQuestions()}},model:{value:t.page.current_page,callback:function(e){t.$set(t.page,"current_page",e)},expression:"page.current_page"}})],1)]):t._e(),t._v(" "),2===t.typeQuestion?a("b-col",{staticClass:"questions-page-pagination"},[a("b",[t._v("\n              Bản ghi/ trang\n            ")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.page.per_page_essay,expression:"page.per_page_essay"}],staticClass:"form-control form-control-sm w-4re text-ghtk rounded border-ghtk d-inline-block",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.page,"per_page_essay",e.target.multiple?a:a[0])},function(e){return t.getQuestions()}]}},[a("option",[t._v("15")]),t._v(" "),a("option",[t._v("25")]),t._v(" "),a("option",[t._v("35")]),t._v(" "),a("option",[t._v("45")]),t._v(" "),a("option",[t._v("55")])]),t._v(" "),a("div",{staticClass:"z-0 d-inline-block"},[a("b-pagination",{staticClass:"paginator-ghtk mb-0",attrs:{size:"sm",align:"left","total-rows":+t.page.total_page_essay,"per-page":+t.page.per_page_essay},on:{input:function(e){return t.getQuestions()}},model:{value:t.page.current_page_essay,callback:function(e){t.$set(t.page,"current_page_essay",e)},expression:"page.current_page_essay"}})],1)]):t._e()],1)],1),t._v(" "),a("div",{staticClass:"modal-questions"},[a("ModalUploadFile",{attrs:{id:"modal-upload-questions",title:"Thêm câu hỏi",nameFile:"câu hỏi",urlDefault:t.urlDownloadFile,"type-question":t.typeQuestion},on:{uploadFile:t.importQuestions}}),t._v(" "),a("b-modal",{staticClass:"d-flex align-items-center modal-notification-cus",attrs:{id:"modal-notification","hide-footer":"","header-class":"justify-content-center","modal-class":"align-items-center",centered:"",static:"","hide-header-close":""},on:{hide:t.resetModal}},[a("template",{slot:"modal-title"},[a("div",{staticClass:"text-title pl-3"},[a("span",[t._v("Thông báo")])]),t._v(" "),a("div",{staticClass:"btn-close btn",on:{click:t.closeModal}},[a("i",{staticClass:"fa fa-times"})])]),t._v(" "),a("div",{staticClass:"text-center mb-2 text-black"},[t._v(t._s(t.contentNotification))]),t._v(" "),a("div",{staticClass:"btn-action d-flex justify-content-center mt-2"},["delete"!==t.typeAction?a("b-button",{staticClass:"btn-ghtk btn__confirm text-center",on:{click:function(e){return t.confirmAction(t.typeAction,t.questionId)}}},[t._v("Xác nhận")]):t._e(),t._v(" "),"delete"===t.typeAction?a("b-button",{staticClass:"btn-ghtk btn__confirm text-center",on:{click:function(e){return t.confirmAction(t.typeAction,t.questionId)}}},[t._v(t._s(t.checkDeleteQuestion?"Đóng":"Xác nhận"))]):t._e()],1)],2)],1)],1)},[],!1,Lu,"data-v-59fcd182",null).exports,Ou={name:"modal-student",components:{MultiSelectStation:ge.a,MultiSelectPosition:be.a,SingleSelectUser:Ie.a,MultiSelectClass:Sa,MultiSelectSyllabus:ha,Multiselect:la.a},props:{id:{default:"modal-student-no-class"}},data:function(t){return{filter:{station:null,username:null,position_id:null,class_id:null,syllabus_ids:null},loading:!1,page:{current:1,total:0,per_page:5},listStudent:[]}},created:function(){this.listStudents()},computed:{},watch:{},methods:{handleSyllabusSelected:function(t){this.filter.syllabus_ids=t?t.map(function(t){return t.id}).toString():""},handleStationSelected:function(t){this.filter.station=t?t.map(function(t){return t.id}).toString():""},selectedUser:function(t){this.filter.username=t},handlePositionSelected:function(t){this.filter.position_id=t?t.map(function(t){return t.id}).toString():""},search:function(){this.page.current=1,this.page.per_page=5,this.listStudents()},reset:function(){var t=this;We()(this.filter).forEach(function(e){t.filter[e]=null}),this.page={current:1,total:0,per_page:5},this.listStudents()},listStudents:function(){var t=this;this.$startLoading();var e=i()({},this.filter);e.limit=this.page.per_page,e.page=this.page.current,this.loading=!0,ca.a.getListStudentNoEnoughClass(e).then(function(e){e.data.success?(t.listStudent=e.data.data.data,t.page.total=e.data.data.total):Me.a.showMessage(e.data.message||"Lấy danh sách học viên chưa xếp lớp không thành công!")}).catch(function(t){Me.a.showMessage("Có lỗi xảy ra, vui lòng thử lại sau !"),console.log(t)}).finally(function(e){t.loading=!1,t.$stopLoading()})},confirmChooseClass:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.loading=!0,a=[],t.listStudent.map(function(t){Me.a.isEmpty(t.class_id)||a.push({user_id:t.user_id,class_id:t.class_id.id,tp_id:t.tp_id})}),!Me.a.isEmpty(a)){e.next=6;break}return e.abrupt("return",Me.a.showMessage("Vui lòng chọn lớp cho ít nhất một học viên trước khi nhấn xác nhận!","warning"));case 6:return e.next=8,ca.a.confirmChooseClass(i()({},a));case 8:(n=e.sent).data.success?(Me.a.showMessage(n.data.message,"success"),t.$bvModal.hide(t.id),t.$emit("resetCount")):Me.a.showMessage(n.data.message,"warning"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),Me.a.showMessage(e.t0.message,"warning");case 15:return e.prev=15,t.loading=!1,e.finish(15);case 18:case"end":return e.stop()}},e,t,[[0,12,15,18]])}))()}}};var Nu=function(t){a("zIFd")},Ru=Object(y.a)(Ou,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-student"},[a("b-modal",{attrs:{"header-class":"text-center justify-content-center d-flex",id:t.id,"modal-class":"modal-xl",title:"Học viên chưa xếp lớp","hide-footer":"",static:""},on:{show:t.reset}},[a("div",{staticClass:"modal-student-filter"},[a("div",{staticClass:"row box-input-filter filter pb-2 justify-content-between input-border my-2"},[a("div",{staticClass:"input-filter"},[a("single-select-user",{staticClass:"z-max multiselect-ghtk multiselect-no-horizontal",attrs:{placeholder:"Nhân viên"},on:{onChange:t.selectedUser}})],1),t._v(" "),a("div",{staticClass:"input-filter"},[a("multi-select-station",{attrs:{"custom-class":"z-max multiselect-ghtk multiselect-no-horizontal","station-ids":t.filter.station,"auto-close":!0,"hide-select":!0},on:{handleStationSelected:t.handleStationSelected}})],1),t._v(" "),a("div",{staticClass:"input-filter"},[a("multi-select-position",{attrs:{"position-ids":t.filter.position_id,"auto-close":!1,"custom-class":"z-max multiselect-ghtk multiselect-no-horizontal","hide-selected":!0},on:{handlePositionSelected:t.handlePositionSelected}})],1),t._v(" "),a("div",{staticClass:"input-filter"},[a("multi-select-syllabus",{attrs:{"custom-class":"z-max multiselect multiselect-ghtk multiselect-no-horizontal","syllabus-ids":t.filter.syllabus_ids,"activve-only":!0,"auto-close":!0,placeholder:"Lớp cần xếp"},on:{handleSyllabusSelected:t.handleSyllabusSelected}})],1),t._v(" "),a("div",{staticClass:"input-filter"},[a("button",{staticClass:"btn btn-ghtk rounded w-100",staticStyle:{"font-weight":"bold"},on:{click:function(e){return t.search()}}},[t._v("\n              Tìm kiếm\n            ")])])])]),t._v(" "),a("div",{staticClass:"modal-student-content"},[a("table",{staticClass:"table table-hover border-0 bg-white w-100 table-responsive-sm"},[a("thead",[a("tr",{staticClass:"header-row"},[a("th",{staticClass:"text-center",staticStyle:{width:"25%"}},[a("b",[t._v("Học viên")])]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{width:"15%"}},[t._v("Kho")]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{width:"15%"}},[t._v("Vị trí")]),t._v(" "),a("th",{staticClass:"text-center",staticStyle:{width:"25%"}},[t._v("Lớp cần xếp")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("Thao tác")])])]),t._v(" "),a("tbody",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"position-relative"},t._l(t.listStudent,function(e,n){return a("tr",{key:n},[a("td",{staticClass:"text-center font-weight-bold"},[t._v("\n              "+t._s(e.fullname+" | "+e.username)+"\n            ")]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(e.station_name))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(e.position_name))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(" "+t._s(e.class_name))]),t._v(" "),a("td",{staticClass:"text-center btn-action"},[a("multiselect",{staticClass:"multiselect-ghtk multiselect-no-horizontal",style:{"z-index":t.listStudent.length-n},attrs:{label:"code","track-by":"id",selectLabel:"",selectedLabel:"",deselectLabel:"",options:e.class_list,searchable:!1,multiple:!1,"close-on-select":!0,"hide-selected":!1,"allow-empty":!0,clearOption:!0},model:{value:e.class_id,callback:function(a){t.$set(e,"class_id",a)},expression:"student.class_id"}},[a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v("Chọn lớp")])])],1)])}),0)])]),t._v(" "),a("div",{staticClass:"modal-student-bottom d-flex justify-content-between align-items-center"},[a("div",{staticClass:"page-modal row ml-1 align-items-center"},[a("div",{staticClass:"z-0 d-inline-block"},[a("b-pagination",{staticClass:"paginator-ghtk mb-0",attrs:{size:"sm",align:"left","total-rows":+t.page.total,"per-page":+t.page.per_page},on:{input:function(e){return t.listStudents()}},model:{value:t.page.current,callback:function(e){t.$set(t.page,"current",e)},expression:"page.current"}})],1)]),t._v(" "),a("button",{staticClass:"btn btn-ghtk rounded",staticStyle:{height:"4vh",width:"20%","font-weight":"bold",padding:"0 0.25rem"},on:{click:t.confirmChooseClass}},[t._v("\n          Xác nhận\n        ")])])])],1)},[],!1,Nu,"data-v-3d9af833",null).exports,Uu={name:"rookie-detail-row",components:{PeriodLine:Vd},props:{syllabus:{type:Object,default:function(){return{}}},permissionEdit:{type:Boolean,default:!1},infoRookie:{type:Object,default:function(){return{}}},roleUserId:{},numberUserCalled:null},watch:{numberUserCalled:function(t,e){this.getLog("first")},infoRookie:function(t,e){this.getLog("first")}},computed:{helper:function(){return Me.a},statusMapper:function(){var t="";return"closed"===this.syllabus.status&&(t="Đóng"),"open"===this.syllabus.status?"Mở":t}},created:function(){this.getTimeDefault(),window.addEventListener("resize",this.handlerCollapse),Cn.eventBus.$on("changeCollapseWork",this.handlerCollapse),this.styleComingClass="width: 100%;"},mounted:function(){this.getLog("first")},destroyed:function(){Cn.eventBus.$off("changeCollapseWork",this.handlerCollapse),window.removeEventListener("resize",this.handlerCollapse)},data:function(t){return{styleComingClass:"",heightMax:"height: 62vh; overflow-y: scroll;",heightMin:"height: 31vh;",showClass:[],isChangeCms:!0,isChangeHp:!0,isChangeCp:!0,listLogOperate:[],listLogEduRookie:[],loadingLogOperation:!1,loadingLogEdu:!1,limit:15,startDate:null,endDate:null,maxTime:0,maxId:0,isLimit:!1,limitHeightOperation:0}},methods:{convertNameStation:function(t){return"Kho"===t.slice(0,3)||"kho"===t.slice(0,3)?t:"Kho "+t},onScrollLogOperation:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a='[id="'+t.roleUserId.userId+'"]',n=document.querySelector(a),t.limitHeightOperation||(t.limitHeightOperation=t.$refs.infoHeightLog.clientHeight),t.limitHeightOperation+n.scrollTop+100>n.scrollHeight&&!t.loadingLogOperation&&!t.isLimit&&t.getLogOperation("Add");case 4:case"end":return e.stop()}},e,t)}))()},getHeightTag:function(){return this.$refs.infoBox.clientHeight},getTimeDefault:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth(),n=new Date(e,a,0);a<=0&&(a=12+a,n=new Date(e-1,a,0));var i=Ye()(n).format("01/MM/YYYY"),s=Ye()().format("DD/MM/YYYY");this.startDate=i.split("/").reverse().join("-"),this.endDate=s.split("/").reverse().join("-")},reverseFormatDate:function(t){return t.split("/").reverse().join("-")},showClassToggle:function(t,e){var a=t+e;void 0===this.showClass[a]?this.showClass[a]=!1:this.showClass[a]=!this.showClass[a],"coming_up"===t?this.isChangeCms=!this.isChangeCms:"happening"===t?this.isChangeHp=!this.isChangeHp:"completed"===t&&(this.isChangeCp=!this.isChangeCp)},handlerCollapse:function(t){screen.width,this.styleComingClass="width: 100%;"},openLink:function(t){window.open(t,"_blank")},imageUrlRender:function(t){var e=Me.a.getFileType(t);return t+=["pdf","video"].includes(e)?"?extract=thumb":"","doc"===e&&(t="https://gs.giaohangtietkiem.vn/d/e24bec4ee88441bdb3e79466dd541152.png?height=250"),t},onOpenModal:function(t,e,a){this.$emit("onOpenModal",{modal:t,user:e,options:a})},onClickChat:function(t){this.$emit("onClickChat",t)},getLog:function(t){var e=this;return l()(o.a.mark(function a(){var n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if("first"!==t){a.next=3;break}if(e.roleUserId.roleCall&&void 0!==e.roleUserId.userId&&!e.roleUserId.isCalled){a.next=3;break}return a.abrupt("return",!0);case 3:return a.next=5,Ji.a.all([e.getLogOperation("first"),e.getLogEduRookie()]);case 5:if("first"!==t){a.next=10;break}return a.next=8,e.getHeightTag();case 8:n=a.sent,e.$emit("updateStatusCall",e.roleUserId.userId,n);case 10:case"end":return a.stop()}},a,e)}))()},getLogOperation:function(t){var e=this;return l()(o.a.mark(function a(){var n,i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.isLimit&&!e.loadingLogOperation){a.next=2;break}return a.abrupt("return",!0);case 2:return e.loadingLogOperation=!0,a.prev=3,n={start_date:e.startDate,end_date:e.endDate,user_id:e.roleUserId.userId,limit:e.limit,max_time:e.maxTime,max_id:e.maxId},a.next=7,ca.a.getListLogOperate(n);case 7:(i=a.sent).data.success?(e.listLogOperate="first"===t?i.data.data:e.listLogOperate.concat(i.data.data),e.maxTime=i.data.data.max_time,e.isLimit=i.data.data.is_limit,e.maxId=i.data.data.max_id):("first"===t&&(e.listLogOperate=[]),Me.a.showMessage(i.data.message,"warning")),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(3),console.error(a.t0);case 14:return a.prev=14,e.loadingLogOperation=!1,a.finish(14);case 17:case"end":return a.stop()}},a,e,[[3,11,14,17]])}))()},getLogEduRookie:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.loadingLogEdu){e.next=2;break}return e.abrupt("return",!0);case 2:return t.loadingLogEdu=!0,e.prev=3,a={student_ids:[t.roleUserId.userId]},e.next=7,ca.a.getListLogRookie(a);case 7:(n=e.sent).data.success&&(t.listLogEduRookie=n.data.data),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.error(e.t0);case 14:return e.prev=14,t.loadingLogEdu=!1,e.finish(14);case 17:case"end":return e.stop()}},e,t,[[3,11,14,17]])}))()}}};var $u=function(t){a("rbb8"),a("1LJd")},Hu=Object(y.a)(Uu,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{ref:"infoBox",staticClass:"education-row"},[a("td",{staticClass:"border-right leftTd"},[a("div",{staticClass:"leftContent"},[a("div",{staticClass:"d-flex infoUser"},[a("div",[a("img",{attrs:{src:t.infoRookie.image_profile,alt:""}})]),t._v(" "),a("div",{staticClass:"description"},[a("div",{staticClass:"d-flex justify-content-between",staticStyle:{"margin-bottom":"5px !important"}},[a("span",[a("b",{staticStyle:{"text-transform":"capitalize"}},[t._v("\n                "+t._s(t.infoRookie.fullname.toLowerCase())+" ("+t._s(t.infoRookie.username)+")\n              ")])])]),t._v(" "),a("div",[a("span",[t._v(t._s(t.infoRookie.position_name)+" - "+t._s(t.convertNameStation(t.infoRookie.station_name)))])])])]),t._v(" "),a("div",{staticClass:"popupView"},[a("button",{staticClass:"btn btn-sm btn-outline-ghtk btn-pill mb-2 font-unset",on:{click:function(e){return t.openLink("/adm/profile/staff/"+t.infoRookie.id)}}},[t._v("Xem")]),t._v(" "),a("button",{staticClass:"btn btn-sm btn-outline-ghtk btn-pill mb-2 font-unset",on:{click:function(e){return t.onOpenModal("callModal",t.infoRookie,{title:"Gọi học viên"})}}},[t._v("Gọi")]),t._v(" "),t.infoRookie.list_class.happening.length||t.infoRookie.list_class.completed.length?a("button",{staticClass:"btn btn-sm btn-outline-ghtk btn-pill mb-2 font-unset",on:{click:function(e){return t.onOpenModal("noteModal",t.infoRookie,{callback:t.getLogEduRookie})}}},[t._v("Ghi chú")]):t._e()]),t._v(" "),a("div",{staticClass:"class-log-document"},[a("b",{staticStyle:{display:"inline-block","margin-top":"0.4rem"}},[t._v("Bài kiểm tra")]),t._v(" "),a("div",{staticClass:"row mt-2 mx-4",staticStyle:{"margin-left":"inherit !important",width:"30vw"}},[a("div",{staticClass:"documentParent"},[a("div",{staticClass:"scrollbar scrollbar-primary",style:t.infoRookie.file_test.length>5?"overflow-x: scroll;":""},[a("div",{staticClass:"force-overflow d-flex"},[t._l(t.infoRookie.file_test||[],function(e,n){return[a("div",{staticClass:"d-block docChild"},[a("div",{key:n,staticClass:"d-inline-block w-5re"},[e.file?a("div",{staticClass:"profile-document__element",on:{click:function(a){return t.openLink(e.file)}}},[a("div",{staticClass:"document-type-desc"},[t._v("\n                          "+t._s(Math.floor(e.score))+" / 10\n                        ")]),t._v(" "),t._m(0,!0),t._v(" "),a("span",[["pdf","video","image","doc"].includes(t.helper.getFileType(e.file))?a("img",{staticClass:"image-document",attrs:{src:t.imageUrlRender(e.file),alt:"Bài kiểm tra "}}):t._e()])]):a("div",{staticClass:"profile-document__element mr-1"},[a("div",{staticClass:"document-type-desc"},[t._v("\n                          "+t._s(Math.floor(e.score))+" / 10\n                        ")]),t._v(" "),t._m(1,!0)])]),t._v(" "),a("div",{staticClass:"text-center font-weight-bold testTitle"},[a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticStyle:{"background-color":"white !important",color:"#000 !important","font-size":"0.9rem","font-weight":"800"},attrs:{disabled:!0,title:e.code}},[t._v("\n                          "+t._s(e.code.slice(0,4)+"...")+"\n                      ")])],1)])]})],2)])])])]),t._v(" "),a("div",[a("div",{staticClass:"btn-tags mb-1 mt-1"},[a("div",{staticClass:"d-flex mt-3 mb-3 content-tag"},[t._l(t.infoRookie.tags||[],function(e,n){return a("div",{key:n},[a("div",{staticClass:"d-inline-block mr-2 pr-2 pl-2 mb-1 tag-item font-14"},[t._v("\n                "+t._s(e.name)+"\n              ")])])}),t._v(" "),a("span",{staticClass:"d-inline-block pt-1 cursor-pointer text-ghtk ml-2 align-items-baseline font-14",on:{click:function(e){return t.onOpenModal("tagModal",t.infoRookie)}}},[a("i",{staticClass:"fas fa-plus"}),t._v(" Tag\n            ")])],2)])]),t._v(" "),t.listLogOperate.length>0?a("div",{ref:"infoHeightLog",staticClass:"logOperation",style:t.listLogOperate.length>8?"overflow-y: scroll;":0===t.listLogOperate.length?"height: 2vh !important":"",attrs:{id:t.infoRookie.id},on:{scroll:t.onScrollLogOperation}},[a("b",[t._v("Log Vận Hành")]),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.loadingLogOperation,expression:"loadingLogOperation"}],staticClass:"fas fa-spinner fa-pulse cusSpinnerOpe"}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.loadingLogOperation&&t.listLogOperate.length>0,expression:"!loadingLogOperation && listLogOperate.length > 0"}],staticClass:"detail-logs"},[a("div",{staticClass:"content-detail-log"},[a("ul",{staticClass:"log-timeline"},t._l(t.listLogOperate,function(e,n){return a("li",{key:n,staticClass:"log-timeline-item"},[a("div",{staticClass:"log-timeline-item-tail",style:n===t.listLogOperate.length-1?"display:none;":""}),t._v(" "),a("div",{staticClass:"log-timeline-item-head",style:e.bad?" background-color: #FD0101;":" background-color: #000000;"}),t._v(" "),a("div",{staticClass:"log-timeline-item-content"},[a("span",[t._v(t._s(e.created_at)+" "+t._s(e.content)+" ")])])])}),0)])])]):t._e()])]),t._v(" "),a("td",{staticClass:"border-right rightTd"},[a("div",{staticClass:"d-flex flex-column"},[a("div",{staticClass:"comingSoon",staticStyle:{"margin-bottom":"2px"}},[a("b-button",{staticClass:"class-title d-flex justify-content-between titleClass",on:{click:function(e){t.infoRookie.list_class.coming_up.length>0&&t.showClassToggle("coming_up",t.infoRookie.id)}}},[a("div",[t._v("\n            Sắp học | "+t._s(t.infoRookie.list_class.coming_up.length)+" lớp\n          ")]),t._v(" "),t.infoRookie.list_class.coming_up.length>0?a("div",[t.showClass["coming_up"+t.infoRookie.id]?a("i",{staticClass:"fas fa-chevron-down",staticStyle:{color:"#AEAEAE"}}):a("i",{staticClass:"fas fa-chevron-right",staticStyle:{color:"#AEAEAE"}})]):t._e()]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!!(t.isChangeCms&&t.infoRookie.list_class.coming_up.length>0)&&(void 0===t.showClass["coming_up"+t.infoRookie.id]||t.showClass["coming_up"+t.infoRookie.id]),expression:"isChangeCms && (infoRookie.list_class.coming_up.length > 0) ? (typeof(showClass['coming_up'+infoRookie.id]) !== 'undefined' ? showClass['coming_up'+infoRookie.id] : true) : false"}],staticClass:"contentClassComing",style:t.styleComingClass},t._l(t.infoRookie.list_class.coming_up,function(e,n){return a("p",{key:n},[t._v("\n            "+t._s(e.code)+" - "+t._s(e.content)+" | "+t._s(e.count)+" buổi\n          ")])}),0)],1),t._v(" "),a("div",{staticClass:"happening",staticStyle:{"margin-bottom":"2px"}},[a("b-button",{staticClass:"class-title d-flex justify-content-between titleClass",on:{click:function(e){t.infoRookie.list_class.happening.length>0&&t.showClassToggle("happening",t.infoRookie.id)}}},[a("div",[t._v("\n            Đang học | "+t._s(t.infoRookie.list_class.happening.length)+" lớp\n          ")]),t._v(" "),t.infoRookie.list_class.happening.length>0?a("div",[t.showClass["happening"+t.infoRookie.id]?a("i",{staticClass:"fas fa-chevron-down",staticStyle:{color:"#AEAEAE"}}):a("i",{staticClass:"fas fa-chevron-right",staticStyle:{color:"#AEAEAE"}})]):t._e()]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!!(t.isChangeHp&&t.infoRookie.list_class.happening.length>0)&&(void 0===t.showClass["happening"+t.infoRookie.id]||t.showClass["happening"+t.infoRookie.id]),expression:"isChangeHp && (infoRookie.list_class.happening.length > 0) ? (typeof(showClass['happening'+infoRookie.id]) !== 'undefined' ? showClass['happening'+infoRookie.id] : true) : false"}],staticClass:"cusBox",style:t.infoRookie.list_class.happening.length>=2?t.heightMax:t.heightMin},t._l(t.infoRookie.list_class.happening||[],function(e,n){return a("div",{key:n,staticClass:"contentHappening"},[a("div",{staticClass:"titleHr",style:"0"===e.is_master?"color: #000":"color: #00904A"},[t._v(t._s(e.class_code)+" - "+t._s(e.content)+" - "+t._s(e.count)+" buổi "+t._s("1"===e.is_master?" | "+e.periods_content:""))]),t._v(" "),a("div",{staticClass:"infoHr"},[a("div",{staticClass:"infoDetailHr"},[a("div",{staticClass:"d-flex infoUser"},[a("div",[a("img",{attrs:{src:e.teacher.image_profile,alt:""}})]),t._v(" "),a("div",{staticClass:"description"},[a("div",{staticClass:"d-flex justify-content-between",staticStyle:{"margin-bottom":"5px !important"}},[a("span",[a("b",[t._v(t._s(e.teacher.fullname)+" ("+t._s(e.teacher.username)+")")])])]),t._v(" "),a("div",[a("span",[t._v(t._s(e.teacher.position_name))])])])])]),t._v(" "),a("div",{staticClass:"actionHr"},[a("button",{staticClass:"btn btn-sm btn-outline-ghtk btnChat",staticStyle:{"border-radius":"100px !important"},on:{click:function(a){return t.onClickChat(e.teacher.id)}}},[t._v("Chat")]),t._v(" "),a("button",{staticClass:"btn btn-sm btn-outline-ghtk btnCall",staticStyle:{"border-radius":"100px !important"},on:{click:function(a){return t.onOpenModal("callModal",e.teacher,{title:"Gọi HR"})}}},[t._v("Gọi")])]),t._v(" "),a("div",{staticClass:"stationHr"},[t._v("\n                "+t._s(t.convertNameStation(e.station_name))+"\n              ")])]),t._v(" "),a("div",{staticClass:"logEdu"},[a("b",[t._v("Log đào tạo")]),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.loadingLogEdu,expression:"loadingLogEdu"}],staticClass:"fas fa-spinner fa-pulse cusSpinnerEdu"}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.loadingLogEdu,expression:"!loadingLogEdu"}],staticClass:"detail-logs"},[a("div",{staticClass:"content-detail-log"},[t.listLogEduRookie[t.infoRookie.id]?a("ul",{staticClass:"log-timeline"},t._l(t.listLogEduRookie[t.infoRookie.id][e.id]||[],function(n,i){return a("li",{key:i,staticClass:"log-timeline-item"},[a("div",{staticClass:"log-timeline-item-tail",style:i===t.listLogEduRookie[t.infoRookie.id][e.id].length-1?"display:none;":""}),t._v(" "),a("div",{staticClass:"log-timeline-item-head",staticStyle:{"background-color":"#00904A"}}),t._v(" "),a("div",{staticClass:"log-timeline-item-content"},[a("span",[t._v(t._s(n.created)+" "+t._s(n.message)+" ")])])])}),0):t._e()])])]),t._v(" "),a("hr",{directives:[{name:"show",rawName:"v-show",value:t.infoRookie.list_class.happening.length>=2,expression:"infoRookie.list_class.happening.length >= 2"}],staticStyle:{"background-color":"#00904A",width:"95%","margin-top":"1.2rem"}})])}),0)],1),t._v(" "),a("div",{staticClass:"happening completed",staticStyle:{"margin-bottom":"2px"}},[a("b-button",{staticClass:"class-title d-flex justify-content-between titleClass",on:{click:function(e){t.infoRookie.list_class.completed.length>0&&t.showClassToggle("completed",t.infoRookie.id)}}},[a("div",[t._v("\n            Hoàn thành | "+t._s(t.infoRookie.list_class.completed.length)+" lớp\n          ")]),t._v(" "),t.infoRookie.list_class.completed.length>0?a("div",[t.showClass["completed"+t.infoRookie.id]?a("i",{staticClass:"fas fa-chevron-down",staticStyle:{color:"#AEAEAE"}}):a("i",{staticClass:"fas fa-chevron-right",staticStyle:{color:"#AEAEAE"}})]):t._e()]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!!(t.isChangeCp&&t.infoRookie.list_class.completed.length>0)&&(void 0===t.showClass["completed"+t.infoRookie.id]||t.showClass["completed"+t.infoRookie.id]),expression:"isChangeCp && (infoRookie.list_class.completed.length > 0) ? (typeof(showClass['completed'+infoRookie.id]) !== 'undefined' ? showClass['completed'+infoRookie.id] : true) : false"}],style:t.infoRookie.list_class.completed.length>=2?t.heightMax:t.heightMin},t._l(t.infoRookie.list_class.completed||[],function(e,n){return a("div",{key:n,staticClass:"contentHappening"},[a("div",{staticClass:"titleHr",style:"0"===e.is_master?"color: #000":"color: #00904A"},[t._v(t._s(e.class_code)+" - "+t._s(e.content)+" - "+t._s(e.count)+" buổi "+t._s("1"===e.is_master?" | "+e.periods_content:""))]),t._v(" "),a("div",{staticClass:"infoHr"},[a("div",{staticClass:"infoDetailHr"},[a("div",{staticClass:"d-flex infoUser"},[a("div",[a("img",{attrs:{src:e.teacher.image_profile,alt:""}})]),t._v(" "),a("div",{staticClass:"description"},[a("div",{staticClass:"d-flex justify-content-between",staticStyle:{"margin-bottom":"5px !important"}},[a("span",[a("b",[t._v(t._s(e.teacher.fullname)+" ("+t._s(e.teacher.username)+")")])])]),t._v(" "),a("div",[a("span",[t._v(t._s(e.teacher.position_name))])])])])]),t._v(" "),a("div",{staticClass:"actionHr"},[a("button",{staticClass:"btn btn-sm btn-outline-ghtk btnChat",staticStyle:{"border-radius":"100px !important"},on:{click:function(a){return t.onClickChat(e.teacher.id)}}},[t._v("Chat")]),t._v(" "),a("button",{staticClass:"btn btn-sm btn-outline-ghtk btnCall",staticStyle:{"border-radius":"100px !important"},on:{click:function(a){return t.onOpenModal("callModal",e.teacher,{title:"Gọi HR"})}}},[t._v("Gọi")])]),t._v(" "),a("div",{staticClass:"stationHr"},[t._v("\n                "+t._s(t.convertNameStation(e.station_name))+"\n              ")])]),t._v(" "),a("div",{staticClass:"logEdu"},[a("b",[t._v("Log đào tạo")]),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.loadingLogEdu,expression:"loadingLogEdu"}],staticClass:"fas fa-spinner fa-pulse cusSpinnerEdu"}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.loadingLogEdu,expression:"!loadingLogEdu"}],staticClass:"detail-logs"},[a("div",{staticClass:"content-detail-log"},[t.listLogEduRookie[t.infoRookie.id]?a("ul",{staticClass:"log-timeline"},t._l(t.listLogEduRookie[t.infoRookie.id][e.id]||[],function(n,i){return a("li",{key:i,staticClass:"log-timeline-item"},[a("div",{staticClass:"log-timeline-item-tail",style:i===t.listLogEduRookie[t.infoRookie.id][e.id].length-1?"display:none;":""}),t._v(" "),a("div",{staticClass:"log-timeline-item-head",staticStyle:{"background-color":"#00904A"}}),t._v(" "),a("div",{staticClass:"log-timeline-item-content"},[a("span",[t._v(t._s(n.created)+" "+t._s(n.message))])])])}),0):t._e()])])]),t._v(" "),a("hr",{directives:[{name:"show",rawName:"v-show",value:t.infoRookie.list_class.completed.length>=2,expression:"infoRookie.list_class.completed.length >= 2"}],staticStyle:{"background-color":"#00904A",width:"95%","margin-top":"1.2rem"}})])}),0)],1)])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"num-img-extend"},[e("i",{staticClass:"icon ion-md-eye cursor-pointer font-10 mr-1"}),this._v(" Xem\n                        ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("img",{staticClass:"image-document",attrs:{src:"",alt:" Chưa có tài liệu"}})])}],!1,$u,"data-v-2d1d2653",null).exports,Bu=a("4zEa");var ju=function(t){a("0Dxw")},Fu={components:{VueSimpleSuggest:Object(y.a)(Bu.a,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vue-simple-suggest",class:[t.styles.vueSimpleSuggest,{designed:!t.destyled,focus:t.isInFocus}],on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab"))return null;t.isTabbed=!0}}},[a("div",{ref:"inputSlot",staticClass:"input-wrapper",class:t.styles.inputWrapper,attrs:{role:"combobox","aria-haspopup":"listbox","aria-owns":t.listId,"aria-expanded":t.listShown&&!t.removeList?"true":"false"}},[t._t("default",function(){return[a("input",t._b({staticClass:"default-input",class:t.styles.defaultInput,domProps:{value:t.text||""}},"input",t.$attrs,!1))]})],2),t._v(" "),a("transition",{attrs:{name:"vue-simple-suggest"}},[t.listShown&&!t.removeList?a("ul",{staticClass:"suggestions",class:t.styles.suggestions,attrs:{id:t.listId,role:"listbox","aria-labelledby":t.listId}},[this.$scopedSlots["misc-item-above"]?a("li",{class:t.styles.miscItemAbove},[t._t("misc-item-above",null,{suggestions:t.suggestions,query:t.text})],2):t._e(),t._v(" "),t._l(t.suggestions,function(e,n){return a("li",{key:t.getId(e,n),staticClass:"suggest-item",class:[t.styles.suggestItem,{selected:t.isSelected(e),hover:t.isHovered(e)}],attrs:{role:"option","aria-selected":t.isHovered(e)||t.isSelected(e)?"true":"false",id:t.getId(e,n)},on:{mouseenter:function(a){return t.hover(e,a.target)},mouseleave:function(e){return t.hover(void 0)},click:function(a){return t.suggestionClick(e,a)}}},[t._t("suggestion-item",function(){return[a("span",[t._v(t._s(t.displayProperty(e)))])]},{autocomplete:function(){return t.autocompleteText(e)},suggestion:e,query:t.text})],2)}),t._v(" "),this.$scopedSlots["misc-item-below"]?a("li",{class:t.styles.miscItemBelow},[t._t("misc-item-below",null,{suggestions:t.suggestions,query:t.text})],2):t._e()],2):t._e()])],1)},[],!1,ju,null,null).exports},props:{open:{default:!1},options:{default:{}},user:{default:null},canAccess:{type:Boolean,default:!1},attachPermission:{type:Boolean,default:!0},deletePermission:{type:Boolean,default:!0}},data:function(){return{openModal:!1,loading:!1,suggest_tags:null,selected_tag:null,checkInput:!0,suggestStyle:{vueSimpleSuggest:"position-relative",inputWrapper:"input-group mb-3",defaultInput:"form-control"}}},watch:{open:function(t){this.openModal=t},canAccess:function(t){t&&this.getTags()}},methods:{close:function(){this.openModal=!1,this.selected_tag=null,this.$refs.suggestTag.setText(null),this.$refs.suggestTag.select(null),this.$emit("onCloseModal","tagModal")},onShow:function(){this.user.tags||this.getUserTags()},onInputChanged:function(t){this.checkInput&&(this.selected_tag=t),this.$refs.suggestTag.input.focus(),this.checkInput=!0},onSuggestClick:function(t,e){this.checkInput=!1},onSuggestSelect:function(t){this.selected_tag=t},onSubmit:function(t){var e=this;return l()(o.a.mark(function a(){var n,i,s,r,l,c,d;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e.selected_tag){a.next=2;break}return a.abrupt("return");case 2:if(t.preventDefault(),a.prev=3,e.loading=!0,n=void 0,(i=Object(e.selected_tag).hasOwnProperty("id"))||(s=e.suggest_tags.find(function(t){return t.name.toString().toLowerCase().trim()===e.selected_tag.toString().toLowerCase().trim()}))&&(i=!0,e.selected_tag=s),!i){a.next=16;break}if(!e.user.tags.find(function(t){return t.id===e.selected_tag.id})){a.next=11;break}return a.abrupt("return");case 11:return a.next=13,Re({tag_id:e.selected_tag.id,user_id:e.user.id});case 13:n=a.sent,a.next=21;break;case 16:return e.selected_tag=e.selected_tag.toString().trim(),e.selected_tag=e.selected_tag.charAt(0).toUpperCase()+e.selected_tag.slice(1),a.next=20,Ae({tag_name:e.selected_tag,user_id:e.user.id});case 20:n=a.sent;case 21:if(r=n.data,l=r.success,c=r.message,d=r.data,!l){a.next=29;break}if(e.user.tags.push(d),i){a.next=27;break}return a.next=27,e.getTags();case 27:a.next=30;break;case 29:Me.a.showMessage(c,"warning");case 30:a.next=35;break;case 32:a.prev=32,a.t0=a.catch(3),Me.a.showMessage(a.t0.message,"error");case 35:return a.prev=35,e.$refs.suggestTag.setText(null),e.$refs.suggestTag.select(null),e.loading=!1,a.finish(35);case 40:case"end":return a.stop()}},a,e,[[3,32,35,40]])}))()},onDetachTag:function(t){var e=this;return l()(o.a.mark(function a(){var n,i,s,r;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!confirm("Bạn có chắc muốn gỡ tag "+t.name+" ?")){a.next=8;break}return e.loading=!0,a.next=5,Ue({user_id:e.user.id,tag_id:t.id});case 5:n=a.sent,i=n.data,s=i.success,r=i.message,s?e.user.tags=e.user.tags.filter(function(e){return e.id!==t.id}):Me.a.showMessage(r,"warning");case 8:a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),Me.a.showMessage(a.t0.message,"error");case 13:return a.prev=13,e.loading=!1,a.finish(13);case 16:case"end":return a.stop()}},a,e,[[0,10,13,16]])}))()},onDeteleTag:function(t){var e=this;return l()(o.a.mark(function a(){var n,i,s,r;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!confirm("Bạn có chắc muốn xóa tag "+t.name+" ?")){a.next=8;break}return e.loading=!0,a.next=5,Oe({tag_id:t.id});case 5:n=a.sent,i=n.data,s=i.success,r=i.message,s?(e.user.tags=e.user.tags.filter(function(e){return e.id!==t.id}),e.suggest_tags=e.suggest_tags.filter(function(e){return e.id!==t.id})):Me.a.showMessage(r,"warning");case 8:a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),Me.a.showMessage(a.t0.message,"error");case 13:return a.prev=13,e.loading=!1,a.finish(13);case 16:case"end":return a.stop()}},a,e,[[0,10,13,16]])}))()},getUserTags:function(){var t=this;return l()(o.a.mark(function e(){var a,n,i,s,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,Ne({user_ids:[t.user.id]});case 4:a=e.sent,n=a.data,i=n.success,s=n.message,r=n.data,i?t.user.tags=r[t.user.id]||[]:Me.a.showMessage(s,"warning"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Me.a.showMessage(e.t0.message,"error");case 12:return e.prev=12,t.loading=!1,e.finish(12);case 15:case"end":return e.stop()}},e,t,[[0,9,12,15]])}))()},getTags:function(){var t=this;return l()(o.a.mark(function e(){var a,n,i,s,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Le();case 3:a=e.sent,n=a.data,i=n.success,s=n.message,r=n.data,i?t.suggest_tags=r:Me.a.showMessage(s,"warning"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Me.a.showMessage(e.t0.message,"error");case 11:case"end":return e.stop()}},e,t,[[0,8]])}))()}}};var qu=function(t){a("7rYh")},Yu=Object(y.a)(Fu,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{attrs:{title:"Tạo và quản lý thẻ phân loại","header-class":"text-center justify-content-center d-flex",static:"",scrollable:"","hide-footer":""},on:{hidden:function(e){return t.close()},show:function(e){return t.onShow()}},model:{value:t.openModal,callback:function(e){t.openModal=e},expression:"openModal"}},[a("div",{staticClass:"col-md-12 form"},[a("b-form",{on:{submit:t.onSubmit}},[a("div",{staticClass:"form-group"},[a("vue-simple-suggest",{ref:"suggestTag",attrs:{id:"tag_suggest",mode:"select",list:t.suggest_tags,"max-suggestions":10,"min-length":2,"display-attribute":"name","value-attribute":"id","filter-by-query":!0,styles:t.suggestStyle,placeholder:"Nhập tên tag mới"},on:{input:t.onInputChanged,"suggestion-click":t.onSuggestClick,select:t.onSuggestSelect},model:{value:t.selected_tag,callback:function(e){t.selected_tag=e},expression:"selected_tag"}},[a("input",{staticClass:"form-control",attrs:{placeholder:"Nhập tên tag mới",required:""}}),t._v(" "),a("b-input-group-append",[a("b-button",{attrs:{variant:"outline-success",name:"btn-modal-save-tag",id:"btn-modal-save-tag",disabled:!t.selected_tag},on:{click:t.onSubmit}},[a("i",{staticClass:"fa fa-save"})])],1)],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"position-relative mih-5re"},[t.user?a("b-list-group",t._l(t.user.tags||[],function(e,n){return a("b-list-group-item",{key:n,staticClass:"d-flex align-items-center mb-2"},[a("span",{staticClass:"mr-auto",attrs:{id:"tag_"+e.id}},[t._v(t._s(e.name))]),t._v(" "),t.attachPermission?a("b-button",{staticClass:"add-tag",attrs:{variant:"outline-warning",size:"sm"},on:{click:function(a){return t.onDetachTag(e)}}},[a("i",{staticClass:"fa fa-minus-square"})]):t._e(),t._v(" "),t.deletePermission?a("b-button",{attrs:{variant:"outline-danger",size:"sm"},on:{click:function(a){return t.onDeteleTag(e)}}},[a("i",{staticClass:"fa fa-trash"})]):t._e()],1)}),1):t._e()],1)],1)])],1)])],1)},[],!1,qu,"data-v-77d2eef2",null).exports,zu={name:"ModalContact",props:{open:{default:!1},options:{default:null},user:{default:null}},data:function(){return{openModal:!1,loading:!1}},watch:{open:function(t){this.openModal=t}},methods:{close:function(){this.openModal=!1,this.$emit("onCloseModal","callModal")},onShow:function(){this.getUserPhoneNumber()},getTitle:function(){return this.options&&Object.hasOwn(this.options,"title")?this.options.title:"Gọi điện"},getUserPhoneNumber:function(){var t=this;return l()(o.a.mark(function e(){var a,n,i,s,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,Be({user_id:t.user.id});case 4:a=e.sent,n=a.data,i=n.success,s=n.message,r=n.data,i?t.user.tel=r.tel:Me.a.showMessage(s,"warning"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Me.a.showMessage(e.t0.message,"error");case 12:return e.prev=12,t.loading=!1,e.finish(12);case 15:case"end":return e.stop()}},e,t,[[0,9,12,15]])}))()},closeModalContact:function(){this.currentUser=null,this.$bvModal.hide("modal-contact")},resetModal:function(){this.currentUser=null}}};var Gu=function(t){a("0qbh"),a("fjub")},Ku=Object(y.a)(zu,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{attrs:{title:t.getTitle(),"header-class":"text-center justify-content-center d-flex",size:"sm",centered:"",static:"","hide-footer":""},on:{hidden:function(e){return t.close()},show:function(e){return t.onShow()}},model:{value:t.openModal,callback:function(e){t.openModal=e},expression:"openModal"}},[t.user?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("div",[a("b",[t._v("Họ tên: ")]),a("span",{staticStyle:{"text-transform":"capitalize"}},[t._v(t._s(t.user.fullname.toLowerCase()))])]),t._v(" "),a("div",[a("b",[t._v("Vị trí: ")]),a("span",[t._v(t._s(t.user.position_name))])]),t._v(" "),a("div",[a("b",[t._v("Số điện thoại: ")]),a("span",[t._v(t._s(t.user.tel))])])]):t._e(),t._v(" "),a("div",{staticClass:"text-center mt-3"},[a("b-btn",{staticClass:"button-close-modal-contact",attrs:{variant:"ghtk"},on:{click:function(e){return t.close()}}},[t._v("Đóng")])],1)])],1)},[],!1,Gu,"data-v-efccbdd4",null).exports,Vu={name:"ModalNote",props:{open:{default:!1},options:{default:{}},user:{default:{}}},data:function(){return{loading:!1,openModal:!1,class_ids:[],currentNote:null}},watch:{open:function(t){this.openModal=t}},methods:{onShow:function(){this.user.hasOwnProperty("list_class")&&(this.user.list_class.happening.length>0?this.class_ids=this.user.list_class.happening.map(function(t){return t.id}):this.class_ids=this.user.list_class.completed.length>0?[this.user.list_class.completed[0].id]:[])},onClose:function(){this.class_ids=[],this.currentNote=null,this.openModal=!1,this.$emit("onCloseModal","noteModal")},getNotes:function(t){var e=this;return l()(o.a.mark(function a(){var n,i,s,r,l;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.loading=!0,a.prev=1,a.next=4,$e({user_id:e.user.id,class_ids:t||e.class_ids});case 4:n=a.sent,i=n.data,s=i.success,r=i.message,l=i.data,s?console.log("getNotes",l):Me.a.showMessage(r,"warning"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),Me.a.showMessage(a.t0.message,"error");case 12:return a.prev=12,e.loading=!1,a.finish(12);case 15:case"end":return a.stop()}},a,e,[[1,9,12,15]])}))()},onSaveNote:function(){var t=this;return l()(o.a.mark(function e(){var a,n,i,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,He({user_id:t.user.id,master_profile_id:t.user.master_profile_id,class_ids:t.class_ids,note:t.currentNote});case 4:a=e.sent,n=a.data,i=n.success,s=n.message,i?(t.options.callback&&t.options.callback(),t.onClose()):Me.a.showMessage(s,"warning"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),Me.a.showMessage(e.t0.message,"error");case 12:return e.prev=12,t.loading=!1,e.finish(12);case 15:case"end":return e.stop()}},e,t,[[1,9,12,15]])}))()}}};var Qu=function(t){a("5ajp"),a("S0H1")},Xu={name:"rookie-manager",components:{RookieNoteModal:Object(y.a)(Vu,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{title:"Thêm ghi chú","modal-class":"modal-custom","header-class":"text-center justify-content-center d-flex",centered:"",static:"",id:"modal-note","hide-footer":""},on:{show:function(e){return t.onShow()},hide:function(e){return t.onClose()}},model:{value:t.openModal,callback:function(e){t.openModal=e},expression:"openModal"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"modal-note"},[a("div",[a("b-form-textarea",{attrs:{id:"textarea-small",size:"sm",placeholder:"Nhập ghi chú",rows:"4"},model:{value:t.currentNote,callback:function(e){t.currentNote=e},expression:"currentNote"}})],1)]),t._v(" "),a("div",{staticClass:"text-center mb-2"},[a("b-btn",{staticClass:"button-deny-modal",attrs:{variant:"ghtk",id:"btn-save-add-note",name:"btn-save-add-note"},on:{click:function(e){return t.onSaveNote()}}},[t._v("Lưu")])],1)])},[],!1,Qu,"data-v-30c47176",null).exports,RookieCallModal:Ku,RookieDetailRow:Hu,RookieTagModal:Yu,ModalConfirmTraining:is,ModalAttendance:gn,ModalAddStudent:pn,ModalDeleteAcademy:Ea,ModalStudentNoClass:Ru,TimeLine:Ce.a,ModalConfirmClass:Pn,ModalCompletePeriod:Kn,ModalRollUp:Tn,ListAcademy:xn,SingleSelectUser:Ie.a,Multiselect:la.a,PeriodTestBuilder:li,ModalSendTest:ui,MultiSelectUser:pa.a,MultiSelectClass:Sa,EditPeriodDocuments:Qc.a,ModalCreateClassV2:sn,MultiSelectProvince:fe.a,MultiSelectRegion:me.a,MultiSelectStation:ge.a,MultiSelectPosition:be.a,MultiSelectSyllabus:ha},props:{scrollMode:{type:Boolean,default:!0},blankMode:{type:Boolean}},data:function(t){return{canAccess:!1,loading:{listRookie:!1,logOperation:!1,logEducation:!1},isActiveTab:"status0",status:null,rookieStatuses:[{alias:"tat_ca",status:"tat_ca",name:"Tất cả"},{alias:"chua_xep_lop",status:"chua_xep_lop",name:"Chưa xếp lớp"},{alias:"chua_diem_danh",status:"chua_diem_danh",name:"Chưa điểm danh"},{alias:"chua_lam_bai",status:"chua_lam_bai",name:"Chưa làm bài"},{alias:"diem_kem",status:"diem_kem",name:"Điểm kém"},{alias:"the_phat",status:"the_phat",name:"Thẻ phạt"},{alias:"da_nghi",status:"da_nghi",name:"Đã nghỉ"}],loadingStatistic:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0},statistic:{tat_ca:null,chua_xep_lop:null,chua_diem_danh:null,chua_lam_bai:null,diem_kem:null,the_phat:null,da_nghi:null},permissionHr:!1,permissionVh:!1,permissionIt:!1,list_data:[],changeFilter:!0,filter:{region:"",province:"",station:"",student_position:"",userIds:[],syllabus:"",type:"tat_ca"},page:{rookie:{current_page:1,total_row:0,per_page:5}},list_log_operate:[],attachPermission:!0,selected_user:null,modalOptions:null,showTagModal:!1,showCallModal:!1,showNoteModal:!1,isLimitUser:!1,listCheckUserIsCalled:{},limitHeight:0,isSetScrollCompleted:!0,numberUserCalled:2,param:{type:"tat_ca",provinces:[],stations:[],positions:[],userIds:[],syllabus:[]},tmpProvinces:[],tabScroll:{leftShow:!1,rightShow:!1}}},created:function(){var t=this;return l()(o.a.mark(function e(){var a,n,i,s,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee();case 2:if(a=e.sent,n=a.data,i=n.success,s=n.message,!i){e.next=14;break}return t.canAccess=!0,e.next=8,t.getListRookie();case 8:return e.next=10,t.getStatisticRookie();case 10:(r=document.getElementById("tab-work"))&&t.checkScrollTab(null,r),e.next=16;break;case 14:t.canAccess=!1,Me.a.showMessage(s||"Bạn không có quyền truy cập màn Học viên!","warning");case 16:case"end":return e.stop()}},e,t)}))()},computed:i()({helper:function(){return Me.a},loading_data:function(){return this.loading.listRookie},dutySyllabus:function(){return this.$route.query.dutySyllabus}},Object(_.c)({permissions:"education/getPermissions"})),watch:{status:function(t,e){this.filter.status=t?t.map(function(t){return t.status}).toString():""}},mounted:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.addEventListener("resize",t.handleScrollTab);case 1:case"end":return e.stop()}},e,t)}))()},beforeDestroy:function(){Me.a.removeLibraryTracingLogs(),window.removeEventListener("resize",this.handleScrollTab)},methods:i()({},Object(_.b)({setPermissions:"education/setPermissions"}),{onScrollTable:function(){var t=this;return l()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=document.querySelector("#tableRookie")).clientHeight+a.scrollTop+100>=t.limitHeight)||t.loading.listRookie||t.isLimitUser){e.next=5;break}if(!t.isSetScrollCompleted){e.next=5;break}return e.next=5,t.setDataCallWhenScroll();case 5:case"end":return e.stop()}},e,t)}))()},scrollTab:function(t,e){(t=document.getElementById(t))&&t.scroll({left:t.scrollLeft+("right"===e?150:-150)})},handleScrollTab:function(){var t=document.getElementById("tab-work");t&&this.checkScrollTab(null,t)},checkScrollTab:function(t,e){e.scrollWidth>e.offsetWidth?(this.tabScroll.rightShow=!0,this.tabScroll.leftShow=!0):(this.tabScroll.rightShow=!1,this.tabScroll.leftShow=!1),e.scrollLeft<3?this.tabScroll.leftShow=!1:e.offsetWidth+e.scrollLeft+3>=e.scrollWidth&&(this.tabScroll.rightShow=!1),this.tabScroll.rightShow?e.style.marginRight="2rem":e.style.marginRight="0"},setDataCallWhenScroll:function(){var t=this;this.isSetScrollCompleted=!1;var e=0;rn()(this.listCheckUserIsCalled).forEach(function(a){if(2===e)return!0;a.isCalled||(t.listCheckUserIsCalled["user_id_"+a.userId].roleCall=!0,t.numberUserCalled++,e++)})},search:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setDefault();case 2:t.page.currentPage=1,t.page.perPage=5,t.changeFilter=!0,t.buildQuery(),t.getStatisticRookie(),t.getListRookie();case 8:case"end":return e.stop()}},e,t)}))()},searchByStatus:function(t,e){var a=this;return l()(o.a.mark(function n(){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.setDefault();case 2:a.filter.type=t,a.isActiveTab=e,a.buildQuery(),a.getStatisticRookie(),a.getListRookie();case 7:case"end":return n.stop()}},n,a)}))()},searchAll:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setDefault();case 2:t.filter.region=null,t.filter.provinces=null,t.filter.stations=null,t.filter.positions=null,t.filter.userIds=null,t.filter.syllabus=null,t.filter.type="tat_ca",t.getStatisticRookie(),t.getListRookie();case 11:case"end":return e.stop()}},e,t)}))()},setDefault:function(){document.querySelector("#tableRookie").scrollTop=0,this.limitHeight=0,this.numberUserCalled=2},handleProvinceSelected:function(t){this.filter.province=t?t.map(function(t){return t.id}).toString():"",this.changeFilter=!0},handleStationSelected:function(t){this.filter.station=t?t.map(function(t){return t.id}).toString():"",this.changeFilter=!0},handleStudentPositionSelected:function(t){this.filter.student_position=t?t.map(function(t){return t.id}).toString():"",this.changeFilter=!0},handleSyllabusSelected:function(t){this.filter.syllabus=t.length?t.map(function(t){return t.id}).toString():"",this.changeFilter=!0},handleRegionSelected:function(t){this.filter.region=t?t.map(function(t){return t.id}).toString():"",this.changeFilter=!0,t||(this.filter.province="")},buildQuery:function(){this.param={type:"tat_ca",provinces:[],stations:[],positions:[],userIds:[],syllabus:[]},this.filter.station.length>0&&(this.param.stations=this.filter.station.split(",")),this.filter.province.length>0&&(this.param.provinces=this.filter.province.split(",")),0===this.filter.province.length&&this.filter.region.length>0&&this.filter.region.length<15&&(this.param.provinces=this.tmpProvinces),this.filter.student_position.length>0&&(this.param.positions=this.filter.student_position.split(",")),this.filter.syllabus.length>0&&(this.param.syllabus=this.filter.syllabus.split(",")),null!==this.filter.userIds&&this.filter.userIds.length>0&&(this.param.userIds=this.filter.userIds.map(function(t){return t.id})),this.param.type=this.filter.type},getStatisticRookie:function(){var t=this;return l()(o.a.mark(function e(){var a,n,i,s,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.changeFilter){e.next=3;break}return e.abrupt("return",!0);case 3:t.changeFilter=!1,t.loadingStatistic[0]=!0,t.loadingStatistic[1]=!0,t.loadingStatistic[2]=!0,t.loadingStatistic[3]=!0,t.loadingStatistic[4]=!0,t.loadingStatistic[5]=!0,t.loadingStatistic[6]=!0,t.loadingStatistic[7]=!0,a={provinces:t.param.provinces,stations:t.param.stations,positions:t.param.positions,userIds:t.param.userIds,syllabus:t.param.syllabus,type:"tat_ca"},n=a,ca.a.getStatisticRookie(n).then(function(e){e.data.success?(t.statistic.tat_ca=e.data.data.tat_ca,t.statistic.da_nghi=e.data.data.da_nghi):Me.a.showMessage(e.data.message,"warning")}).catch(function(t){console.error(t)}).then(function(){t.loadingStatistic[0]=!1,t.loadingStatistic[6]=!1}),(i=a).type="chua_xep_lop",ca.a.getStatisticRookie(i).then(function(e){e.data.success?t.statistic.chua_xep_lop=e.data.data.chua_xep_lop:Me.a.showMessage(e.data.message,"warning")}).catch(function(t){console.error(t)}).then(function(){t.loadingStatistic[1]=!1}),(s=a).type="chua_diem_danh",ca.a.getStatisticRookie(s).then(function(e){e.data.success?(t.statistic.chua_diem_danh=e.data.data.chua_diem_danh,t.statistic.chua_lam_bai=e.data.data.chua_lam_bai,t.statistic.diem_kem=e.data.data.diem_kem):Me.a.showMessage(e.data.message,"warning")}).catch(function(t){console.log(t)}).then(function(){t.loadingStatistic[2]=!1,t.loadingStatistic[3]=!1,t.loadingStatistic[4]=!1}),(r=a).type="the_phat",ca.a.getStatisticRookie(r).then(function(e){e.data.success?t.statistic.the_phat=e.data.data.the_phat:Me.a.showMessage(e.data.message,"warning")}).catch(function(t){console.error(t)}).then(function(){t.loadingStatistic[5]=!1}),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(0),Me.a.showMessage(e.t0.message,"error");case 29:case"end":return e.stop()}},e,t,[[0,26]])}))()},getListRookie:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading.listRookie=!0,a=i()({},t.param),e.next=5,ca.a.getListRookie(i()({},a,t.page.rookie));case 5:(n=e.sent).data.success?(Me.a.showMessage(n.data.message,"success"),t.list_data=n.data.data,t.page.rookie.total_row=Number(n.data.total),t.list_data.length>0&&(t.listCheckUserIsCalled=t.setDataCheckCalled(t.list_data))):Me.a.showMessage(n.data.message,"warning"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Me.a.showMessage(e.t0.message,"error");case 12:return e.prev=12,t.loading.listRookie=!1,e.finish(12);case 15:case"end":return e.stop()}},e,t,[[0,9,12,15]])}))()},setDataCheckCalled:function(t){for(var e=3===t.length?3:2,a=[],n=0;n<t.length;n++){var i="user_id_"+t[n].id;a[i]=n<e?{userId:t[n].id,roleCall:!0,isCalled:!1}:{userId:t[n].id,roleCall:!1,isCalled:!1}}return a},onOpenModal:function(t){var e=t.modal,a=t.user,n=t.options;switch(this.selected_user=a,this.modalOptions=n||{},e){case"tagModal":this.showTagModal=!0;break;case"callModal":this.showCallModal=!0;break;case"noteModal":this.showNoteModal=!0}},onCloseModal:function(t){switch(this.selected_user=null,this.modalOptions=null,t){case"tagModal":this.showTagModal=!1;break;case"callModal":this.showCallModal=!1;break;case"noteModal":this.showNoteModal=!1}},onClickChat:function(t){var e=this;return l()(o.a.mark(function a(){var n,i,s,r,l,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je({user_id:t});case 2:n=e.sent,i=n.data,s=i.success,r=i.message,l=i.data,s?(c=l.channel_id,Me.a.openLink("https://ghtk.me/channel/internal/"+c)):Me.a.showMessage(r,"warning");case 5:case"end":return e.stop()}},a,e)}))()},updateStatusCall:function(t,e){this.listCheckUserIsCalled["user_id_"+t].isCalled=!0,this.limitHeight+=e,this.checkCallAllCompleted()===this.numberUserCalled&&(this.isSetScrollCompleted=!0)},checkCallAllCompleted:function(){var t=0;return rn()(this.listCheckUserIsCalled).forEach(function(e){e.isCalled&&t++}),t}})};var Wu=function(t){a("OEkN"),a("6aA6"),a("8M/B")},Ju=Object(y.a)(Xu,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-none d-md-block main-content"},[a("div",{staticClass:"header-padding text-center-y d-flex",staticStyle:{"justify-content":"space-between","margin-top":"0.8rem","margin-bottom":"0.8rem"}},[a("div",{staticClass:"d-flex"},[a("div",{staticClass:"d-flex pt-1"},[a("h4",{staticClass:"m-0 font-weight-bold",staticStyle:{width:"5rem"}},[t._v("Đào tạo")]),t._v(" "),t.dutySyllabus?a("router-link",{staticClass:"m-0 header-setting",staticStyle:{width:"5rem"},attrs:{to:"/staff-work/syllabus"}},[t._v("Cài đặt")]):t._e()],1),t._v(" "),a("div",{staticClass:"action-toggle ml-3"},[a("router-link",{staticClass:"link action-toggle--not-active",attrs:{to:"/staff-work/classes"}},[t._v("Lớp Học")]),t._v(" "),a("div",{staticClass:"action-toggle--active"},[t._v("Học Viên")])],1)]),t._v(" "),t.canAccess?a("div",{staticClass:"text-right tab-work-scroll"},[t.tabScroll.leftShow?a("div",{staticClass:"pre-tab pre-tab-left"},[a("div",{staticClass:"pre-btn text-ghtk",on:{click:function(e){return t.scrollTab("tab-work","left")}}},[a("i",{staticClass:"ion ion-ios-arrow-back"})])]):t._e(),t._v(" "),a("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.checkScrollTab,expression:"checkScrollTab"},{name:"resize",rawName:"v-resize",value:t.checkScrollTab,expression:"checkScrollTab"}],staticClass:"work-options",attrs:{id:"tab-work"}},t._l(t.rookieStatuses,function(e,n){return a("div",{key:"status"+n,staticClass:"px-1 d-inline-block"},[a("b-btn",{staticClass:"rounded pd-5 w-100",attrs:{variant:t.isActiveTab==="status"+n?"ghtk":"outline-ghtk-color-custom"},on:{click:function(a){return t.searchByStatus(e.status,"status"+n)}}},[e.name?a("span",[t._v(t._s(e.name))]):t._e(),t._v(" "),a("span",[a("i",{directives:[{name:"show",rawName:"v-show",value:t.loadingStatistic[n],expression:"loadingStatistic[index]"}],staticClass:"fas fa-spinner fa-pulse"}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.loadingStatistic[n]&&![null,void 0].includes(t.statistic[e.alias]),expression:"!loadingStatistic[index] &&  ![null, undefined].includes(statistic[rookieStatus.alias])"}]},[t._v("\n                            ("+t._s(t.statistic[e.alias]||0)+")\n                          ")])])])],1)}),0),t._v(" "),t.tabScroll.rightShow?a("div",{staticClass:"pre-tab pre-tab-right"},[a("div",{staticClass:"pre-btn text-ghtk",on:{click:function(e){return t.scrollTab("tab-work","right")}}},[a("i",{staticClass:"ion ion-ios-arrow-forward"})])]):t._e()]):t._e()]),t._v(" "),a("div",{staticClass:"mx-0 filter pb-1 row z-3",staticStyle:{"margin-right":"-4px !important"}},[a("div",{staticClass:"mb-1 input-filter pl-2 pr-1"},[a("multi-select-region",{attrs:{"custom-class":"multiselect-ghtk multiselect-no-horizontal",regions:t.filter.region,"auto-close":!0,placeholder:"Miền"},on:{handleSelectedRegion:t.handleRegionSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter pl-2 pr-1"},[a("multi-select-province",{attrs:{"custom-class":"multiselect-ghtk multiselect-no-horizontal","province-ids":t.filter.province,region:t.filter.region,"auto-close":!0,"hide-select":!0,placeholder:"Tỉnh"},on:{handleProvinceSelected:t.handleProvinceSelected,handleProvinceOption:function(e){t.tmpProvinces=e}}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter pl-2 pr-1"},[a("multi-select-station",{staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{"province-ids":t.filter.province,"station-ids":t.filter.station,"auto-close":!0,isActive:!0,"hide-select":!0,placeholder:"Kho"},on:{handleStationSelected:t.handleStationSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter pl-2 pr-1"},[a("multi-select-syllabus",{attrs:{"custom-class":"multiselect-ghtk multiselect-no-horizontal","syllabuse-ids":t.filter.syllabus,"auto-close":!0,placeholder:"Chương trình"},on:{handleSyllabusSelected:t.handleSyllabusSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter pl-2 pr-1"},[a("MultiSelectPosition",{staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{"position-ids":t.filter.student_position,"auto-close":!0,"hide-selected":!0,placeholder:"Vị trí",isSyllabus:!0},on:{handlePositionSelected:t.handleStudentPositionSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter pl-2 pr-1"},[a("MultiSelectUser",{attrs:{"custom-class":"z-3 multiselect-ghtk multiselect-no-horizontal","custom-multiselect-class":"z-3","auto-close":!0,multiple:!0,placeholder:"username",stationId:t.filter.station},on:{onChange:function(e){t.filter.userIds=e,t.changeFilter=!0}}})],1),t._v(" "),a("div",{staticClass:"input-filter pr-2 pl-1"},[a("b-btn",{staticClass:"filter-containter__btn-search btn-header-class",attrs:{disabled:!t.canAccess,variant:"ghtk"},on:{click:function(e){return t.search()}}},[t._v(" Tìm kiếm")])],1)]),t._v(" "),a("div",{staticClass:"table-data cusTable",class:"table-sticky",staticStyle:{"max-height":"81vh"},attrs:{id:"tableRookie"},on:{scroll:t.onScrollTable}},[a("table",{staticClass:"table table-sm mb-0"},[t._m(0),t._v(" "),a("tbody",{directives:[{name:"loading",rawName:"v-loading",value:t.loading_data,expression:"loading_data"}],staticClass:"position-relative"},[t._l(t.list_data,function(e){return[a("RookieDetailRow",{key:e.id,attrs:{infoRookie:e,"role-user-id":t.listCheckUserIsCalled["user_id_"+e.id],"number-user-called":t.numberUserCalled,"can-access":t.canAccess},on:{onClickChat:t.onClickChat,onOpenModal:t.onOpenModal,updateStatusCall:t.updateStatusCall}})]}),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:t.helper.isEmpty(t.list_data),expression:"helper.isEmpty(list_data)"}]},[a("td",{attrs:{colspan:"10"}},[a("div",{staticClass:"mih-25 d-flex justify-content-center align-items-center"},[a("b",{directives:[{name:"show",rawName:"v-show",value:!t.loading_data,expression:"!loading_data"}]},[t._v("Không có dữ liệu phù hợp !")])])])])],2)])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.helper.isEmpty(t.list_data),expression:"!helper.isEmpty(list_data)"}],staticClass:"row mt-3 align-items-center"},[a("div",{staticClass:"col col-md-9 text-left"},[a("div",{staticClass:"z-0 d-inline-block"},[a("b-pagination",{staticClass:"paginator-ghtk mb-0",attrs:{size:"sm",align:"left","total-rows":+t.page.rookie.total_row,"per-page":+t.page.rookie.per_page},on:{input:function(e){return t.getListRookie()}},model:{value:t.page.rookie.current_page,callback:function(e){t.$set(t.page.rookie,"current_page",e)},expression:"page.rookie.current_page"}})],1)])]),t._v(" "),a("RookieTagModal",{attrs:{open:t.showTagModal,user:t.selected_user,options:t.modalOptions,"attach-permission":t.attachPermission,"can-access":t.canAccess},on:{onCloseModal:t.onCloseModal}}),t._v(" "),a("RookieCallModal",{attrs:{open:t.showCallModal,user:t.selected_user,options:t.modalOptions,"can-access":t.canAccess},on:{onCloseModal:t.onCloseModal}}),t._v(" "),a("RookieNoteModal",{attrs:{open:t.showNoteModal,user:t.selected_user,options:t.modalOptions,"can-access":t.canAccess},on:{onCloseModal:t.onCloseModal}})],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",{staticClass:"text-left"},[e("th",{staticClass:"w-40 text-black",staticStyle:{"border-bottom":"2px solid #f1f1f2",height:"3rem","vertical-align":"middle","background-color":"#f7f7f7"}},[this._v("Học viên")]),this._v(" "),e("th",{staticClass:"text-black",staticStyle:{"border-bottom":"2px solid #f1f1f2",height:"3rem","vertical-align":"middle","background-color":"#f7f7f7"}},[this._v("Lớp học")])])])}],!1,Wu,"data-v-4533a8c7",null).exports,Zu=function(t){return Na.a.post("/user-management/staff-list",t)},th=function(t){return Na.a.get("/tags/check-permission",t)},eh=function(t){return Na.a.get("/user-management/staff-log",{params:t})},ah=function(t){return Na.a.post("/user-management/set-leader",t)},nh=function(t){return Na.a.post("/user-management/add-note",t)},ih=function(t){return Na.a.get("/user-management/get-phone",{params:t})},sh=function(t){return t.with_delete=1,Na.a.get("/reporting-line/is-leader-of-staff",{params:t})},oh=function(t){return Uo.a.post("/erp/detect-image-checkin/set-remote-attendance",t)},rh=function(t){return Uo.a.post("/erp/detect-image-checkin/remove-remote-attendance",t)},lh={name:"ModalContact",props:{open:{default:!1},options:{default:null},user:{default:null}},components:{SensitiveLabel:Eo.a},data:function(){return{openModal:!1,loading:!1}},watch:{open:function(t){this.openModal=t}},methods:{close:function(){this.user.tel=null,this.openModal=!1,this.$emit("onCloseModal","callModal")},onShow:function(){},getTitle:function(){return this.options&&Object.hasOwn(this.options,"title")?this.options.title:"Gọi điện"},getUserPhoneNumber:function(){var t=this;return l()(o.a.mark(function e(){var a,n,i,s,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,ih({user_id:t.user.id,view_mode:t.options.viewMode});case 4:a=e.sent,n=a.data,i=n.success,s=n.message,r=n.data,i?t.user.tel=r.tel:Me.a.showMessage(s,"warning"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Me.a.showMessage(e.t0.message,"error");case 12:return e.prev=12,t.loading=!1,e.finish(12);case 15:case"end":return e.stop()}},e,t,[[0,9,12,15]])}))()},closeModalContact:function(){this.currentUser=null,this.$bvModal.hide("modal-contact")},resetModal:function(){this.currentUser=null}}};var ch=function(t){a("s2RU"),a("T+SE")},dh=Object(y.a)(lh,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{attrs:{title:t.getTitle(),"header-class":"text-center justify-content-center d-flex",size:"sm",centered:"",static:"","hide-footer":""},on:{hidden:function(e){return t.close()},show:function(e){return t.onShow()}},model:{value:t.openModal,callback:function(e){t.openModal=e},expression:"openModal"}},[t.user?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("div",[a("b",[t._v("Họ tên: ")]),a("span",{staticStyle:{"text-transform":"capitalize"}},[t._v(t._s(t.user.fullname.toLowerCase()))])]),t._v(" "),a("div",[a("b",[t._v("Vị trí: ")]),a("span",[t._v(t._s(t.user.position.position_name))])]),t._v(" "),a("div",[a("b",[t._v("Số điện thoại: ")]),t._v(" "),a("SensitiveLabel",{staticClass:"d-inline",attrs:{"data-input":t.user.master_profile.tel,"user-id":t.user.id,type:"tel",source:"staff-management"}}),t._v(" "),a("span",[t._v(t._s(t.user.tel))])],1)]):t._e(),t._v(" "),a("div",{staticClass:"text-center mt-3"},[a("b-btn",{staticClass:"button-close-modal-contact",attrs:{variant:"ghtk"},on:{click:function(e){return t.close()}}},[t._v("Đóng")])],1)])],1)},[],!1,ch,"data-v-3fc8d1ad",null).exports,uh={name:"AddStaffNoteModal",props:{open:{default:!1},options:{default:{}},user:{default:{}}},data:function(){return{loading:!1,openModal:!1,currentNote:null}},watch:{open:function(t){this.openModal=t}},methods:{onShow:function(){},onClose:function(){this.currentNote=null,this.openModal=!1,this.$emit("onCloseModal","noteModal")},onSaveNote:function(){var t=this;return l()(o.a.mark(function e(){var a,n,i,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t.currentNote){e.next=2;break}return e.abrupt("return",Me.a.showMessage("Vui lòng nhập ghi chú","warning"));case 2:return t.loading=!0,e.prev=3,e.next=6,nh({user_id:t.user.id,note:t.currentNote,view_mode:t.options.viewMode});case 6:a=e.sent,n=a.data,i=n.success,s=n.message,i?(t.options.callback&&t.options.callback(),Me.a.showMessage(s,"success"),t.onClose()):Me.a.showMessage(s,"warning"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),Me.a.showMessage(e.t0.message,"error");case 14:return e.prev=14,t.loading=!1,e.finish(14);case 17:case"end":return e.stop()}},e,t,[[3,11,14,17]])}))()}}};var hh=function(t){a("0adn"),a("ETVN")},ph=Object(y.a)(uh,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{title:"Thêm ghi chú","modal-class":"modal-custom","header-class":"text-center justify-content-center d-flex",centered:"",static:"",id:"modal-note","hide-footer":""},on:{show:function(e){return t.onShow()},hide:function(e){return t.onClose()}},model:{value:t.openModal,callback:function(e){t.openModal=e},expression:"openModal"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"modal-note"},[a("div",[a("b-form-textarea",{attrs:{id:"textarea-small",size:"sm",placeholder:"Nhập ghi chú",rows:"4"},model:{value:t.currentNote,callback:function(e){t.currentNote=e},expression:"currentNote"}})],1)]),t._v(" "),a("div",{staticClass:"text-center mb-2"},[a("b-btn",{staticClass:"button-deny-modal",attrs:{variant:"ghtk",id:"btn-save-add-note",name:"btn-save-add-note"},on:{click:function(e){return t.onSaveNote()}}},[t._v("Lưu")])],1)])},[],!1,hh,"data-v-f132d37a",null).exports,mh={name:"ChangeStatusAccountModal",components:{Multiselect:la.a},props:{title:{type:String,default:"Mở khoá tài khoản"},open:{default:!1},options:{default:{}},user:{default:{}},listAccount:{type:Array,default:function(){return[]}},statusChange:{type:String,default:"lock"}},data:function(){return{loading:!1,openModal:!1,employee:null}},watch:{open:function(t){this.openModal=t,this.employee=null}},methods:{onClose:function(){this.employee=null,this.$emit("onCloseModal","changeSttModal")},onSaveChange:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return l()(o.a.mark(function a(){var n,i,s;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t.employee||null!==e){a.next=2;break}return a.abrupt("return",Me.a.showMessage("Vui lòng chọn tài khoản"));case 2:return a.prev=2,t.loading=!0,n="lock"===t.statusChange?2:3,i=null===e?t.employee.id:e.id,a.next=8,qo.a.updateStatus(i,n);case 8:(s=a.sent).data.success?(t.options.callback&&t.options.callback({userIdAcc:i,statusIdAfter:n}),Me.a.showMessage("Đã thay đổi trạng thái tài khoản","success"),t.onClose()):Me.a.showMessage(s.data.message,"warning"),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(2),Me.a.showMessage(a.t0.message,"error");case 15:return a.prev=15,t.loading=!1,a.finish(15);case 18:case"end":return a.stop()}},a,t,[[2,12,15,18]])}))()}}};var fh=function(t){a("mBBi"),a("4DgD"),a("SLYf")},gh=Object(y.a)(mh,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{staticClass:"modal-cus",attrs:{title:"lock"===t.statusChange?"Khoá tài khoản":"Mở khoá tài khoản","modal-class":"modal-custom","header-class":"text-center justify-content-center d-flex",centered:"",static:"",id:"modal-change-acc","hide-footer":""},on:{hide:function(e){return t.onClose()}},model:{value:t.openModal,callback:function(e){t.openModal=e},expression:"openModal"}},[a("div",{staticClass:"modal-title"},[t.listAccount.length>1?a("div",{staticClass:"title-cus"},[a("p",{staticClass:"title-cus-p1"},[t._v("Vui lòng chọn 01 tài khoản bạn muốn")]),t._v(" "),a("p",{staticClass:"title-cus-p2"},[t._v(t._s("lock"===t.statusChange?"Khoá!":"Mở khoá!"))])]):t._e(),t._v(" "),0===t.listAccount.length?a("div",{staticClass:"title-cus"},[a("p",{staticClass:"title-cus-p1"},[t._v("Không có tài khoản "+t._s("lock"===t.statusChange?"nào đang mở khoá!":"bị khoá!"))])]):t._e(),t._v(" "),1===t.listAccount.length?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"title-cus"},[a("p",{staticClass:"title-cus-p1"},[t._v("Bạn có chắc chắn muốn chuyển trạng")]),t._v(" "),a("p",{staticClass:"title-cus-p2"},[t._v("thái của tài khoản "+t._s(t.listAccount[0].username)+" sang")]),t._v(" "),"lock"!==t.statusChange?a("p",{staticClass:"title-cus-p3"},[t._v("đang hoạt động không?")]):t._e(),t._v(" "),"lock"===t.statusChange?a("p",{staticClass:"title-cus-p3"},[t._v("tạm khoá không?")]):t._e()]):t._e()]),t._v(" "),t.listAccount.length>1?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"modal-change-acc"},[a("div",[a("Multiselect",{attrs:{options:t.listAccount,label:"username","track-by":"id",placeholder:"Chọn tài khoản",multiple:!1,"allow-empty":!1,"close-on-select":!0,"deselect-label":"","select-label":""},model:{value:t.employee,callback:function(e){t.employee=e},expression:"employee"}})],1)]):t._e(),t._v(" "),a("div",{staticClass:"text-center mb-2"},[t.listAccount.length>1?a("b-btn",{staticClass:"button-deny-modal",attrs:{variant:"ghtk",id:"btn-save-change",name:"btn-save-change"},on:{click:function(e){return t.onSaveChange()}}},[t._v("Xác nhận")]):t._e(),t._v(" "),1===t.listAccount.length?a("b-btn",{staticClass:"button-deny-modal",attrs:{variant:"ghtk",id:"btn-save-change-new",name:"btn-save-change-new"},on:{click:function(e){return t.onSaveChange(t.listAccount[0])}}},[t._v("Xác nhận")]):t._e(),t._v(" "),0===t.listAccount.length?a("b-btn",{staticClass:"button-deny-modal",attrs:{variant:"ghtk",id:"btn-save",name:"btn-save"},on:{click:function(e){return t.onClose()}}},[t._v("Đóng")]):t._e()],1)])},[],!1,fh,"data-v-3f17c16c",null).exports,vh={name:"staff-detail-row",components:{ClassManager:fs,PeriodLine:Vd},props:{viewMode:{type:String,default:"leader_tree"},syllabus:{type:Object,default:function(){return{}}},permissionEdit:{type:Boolean,default:!1},infoEmployee:{type:Object,default:function(){return{}}},userId:null,currentUser:null,idLoadingModalEval:null},watch:{infoEmployee:function(t,e){this.page=1,this.getLogDetail("first")},idLoadingModalEval:function(t,e){this.idLoadingModalEval===+this.infoEmployee.id&&null!==this.infoEmployee.id?this.loadingModalEval=!0:this.loadingModalEval=!1}},computed:i()({helper:function(){return Me.a},statusMapper:function(){var t="";return"closed"===this.syllabus.status&&(t="Đóng"),"open"===this.syllabus.status?"Mở":t}},Object(_.c)({authUser:"userInfo"})),created:function(){this.checkValidJoinDateOrComebackDate(),Cn.eventBus.$on("updateLogStaff",this.handleEventUpdateLog)},mounted:function(){this.listAccount=this.infoEmployee.sub_accounts,this.infoEmployee.link_avatar=null!==this.infoEmployee.link_avatar?this.infoEmployee.link_avatar:"https://uploads-ssl.webflow.com/5fb85f26f126ce08d792d2d9/62d66b80b43387c88d617c8c_After_kime%402x-100.jpg",this.page=1,this.getLogDetail("first")},destroyed:function(){Cn.eventBus.$off("updateLogStaff",this.handleEventUpdateLog)},data:function(t){return{styleComingClass:"width: 100%;",showClass:[],listLogDetail:[],loadingLogDetail:!1,limit:15,page:1,perPage:10,isLimit:!1,listAccount:[],loadingModalEval:!1}},methods:{formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD/MM/YYYY";return Me.a.formatDate(t,e)},handleEventUpdateLog:function(t){t===this.infoEmployee.id&&(this.isLimit=!1,this.page=1,this.getLogDetail("first"))},updateStatusAccount:function(t){var e=t.userIdAcc,a=t.statusIdAfter;null!==this.listAccount&&this.updateStatusAcc(e,a),+e==+this.infoEmployee.id&&(this.infoEmployee.status_id=a),this.isLimit=!1,this.page=1,this.getLogDetail("first")},updateStatusAcc:function(t,e){for(var a=0;a<this.listAccount.length;a++)this.listAccount[a].id===t&&(this.listAccount[a].status_id=e)},getListLeader:function(t){var e=t.listLeader;t.log;this.infoEmployee.leaders=e,this.isLimit=!1,this.page=1,this.getLogDetail("first")},getLogUpdateNode:function(){this.isLimit=!1,this.page=1,this.getLogDetail("first")},checkManagerValid:function(){return!!this.infoEmployee.leaders.map(function(t){return t.id}).includes(+this.authUser.User.id)},checkValidJoinDateOrComebackDate:function(){var t=null===this.infoEmployee.master_profile.comeback_date?this.infoEmployee.master_profile.join_date:this.infoEmployee.master_profile.comeback_date,e=new Date;return+Me.a.calDistanceDate(t,e)>=10},convertNameStation:function(t){return"Kho"===t.slice(0,3)||"kho"===t.slice(0,3)?t:"Kho "+t},onScrollLogDetail:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a='[id="'+t.userId+'"]',n=document.querySelector(a),t.$refs.infoHeightLog.clientHeight+n.scrollTop+100>n.scrollHeight&&!t.loadingLogDetail&&!t.isLimit&&(t.page++,t.getLogDetail("Add"));case 4:case"end":return e.stop()}},e,t)}))()},openLink:function(t){window.open(t,"_blank")},onOpenModal:function(t,e,a){this.$emit("onOpenModal",{modal:t,user:e,options:a})},onOpenModalEvaluation:function(){return this.checkValidJoinDateOrComebackDate()?this.checkManagerValid()?void this.$emit("onOpenModalEvaluation",this.infoEmployee.id):Me.a.showMessage("Chỉ quản lý trực tiếp mới được đánh giá","warning"):Me.a.showMessage("Chỉ đánh giá được nhân viên đã làm việc tối thiểu 10 ngày","warning")},onClickChat:function(t){this.$emit("onClickChat",t)},getLogDetail:function(t){var e=this;return l()(o.a.mark(function a(){var n,i,s,r,l,c;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.isLimit&&!e.loadingLogDetail){a.next=2;break}return a.abrupt("return",!0);case 2:return e.loadingLogDetail=!0,a.prev=3,n={user_id:e.userId,per_page:e.perPage,page:e.page,view_mode:e.viewMode},a.next=7,eh(n);case 7:i=a.sent,s=i.data,r=s.success,l=s.message,c=s.data,r?(e.listLogDetail="first"===t?c:e.listLogDetail.concat(c),+i.data.current_page==+i.data.last_page&&(e.isLimit=!0),e.page=i.data.current_page):("first"===t&&(e.listLogDetail=[]),Me.a.showMessage(l,"warning")),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(3),console.error(a.t0);case 15:return a.prev=15,e.loadingLogDetail=!1,a.finish(15);case 18:case"end":return a.stop()}},a,e,[[3,12,15,18]])}))()},viewDetail:function(){this.$emit("viewDetailStaff",this.infoEmployee,this._uid)},openModalFromInfoStaff:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments[1];arguments[2]===this._uid&&(this.infoEmployee=e,"openAcc"===t?this.$refs.actionOpenAcc.click():"lockAcc"===t?this.$refs.actionLockAcc.click():"changeLeader"===t?this.$refs.actionChangeLeader.click():"evaluation"===t?this.$refs.actionEvaluation.click():"note"===t&&this.$refs.actionNote.click())},onChangeDataRemoteCheckin:function(t,e,a){a===this._uid&&(this.infoEmployee=e,this.userId=this.infoEmployee.id,this.infoEmployee.can_remote_attendance=t,this.$bvModal.hide("modal-info-staff"),this.$emit("changeRemoteCheckin"))}}};var _h=function(t){a("lq6y"),a("GXGd")},bh=Object(y.a)(vh,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{ref:"infoBox",staticClass:"education-row"},[a("td",{staticClass:"leftTd"},[a("div",{staticClass:"leftContent"},[a("div",{staticClass:"row infoUser"},[a("div",{},[a("img",{attrs:{src:t.infoEmployee.master_profile.image_profile||t.infoEmployee.link_avatar,alt:""}})]),t._v(" "),a("div",{staticClass:"description col-8 p-1"},[a("div",{staticClass:"d-flex justify-content-between",staticStyle:{"margin-bottom":"5px !important"}},[a("span",[a("b",{staticStyle:{"text-transform":"capitalize"}},[t._v("\n                "+t._s(t.infoEmployee.fullname.toLowerCase())+" ("+t._s(t.infoEmployee.username)+")\n              ")])])]),t._v(" "),a("div",[a("span",[t._v(t._s(t.infoEmployee.position.position_name)+" - "+t._s(t.convertNameStation(t.infoEmployee.station.name)))])])]),t._v(" "),a("div",{staticClass:"popupView col-2 pl-0"},[a("button",{staticClass:"btn btn-sm btn-outline-ghtk btn-pill mb-2 font-unset",on:{click:t.viewDetail}},[t._v("Xem")]),t._v(" "),a("button",{staticClass:"btn btn-sm btn-outline-ghtk btn-pill mb-2 font-unset",on:{click:function(e){return t.onOpenModal("callModal",t.infoEmployee,{title:"Gọi học viên"})}}},[t._v("Gọi")])])]),t._v(" "),a("div",{staticClass:"class-log-document"},[a("b",{staticClass:"b-info-cus"},[t._v("Ngày vào: ")]),a("span",[t._v(t._s(null===t.infoEmployee.master_profile.comeback_date?t.formatDate(t.infoEmployee.master_profile.join_date):t.formatDate(t.infoEmployee.master_profile.comeback_date)))])]),t._v(" "),a("div",{staticClass:"class-log-document"},[a("b",{staticClass:"b-info-cus"},[t._v("Quản lý: ")]),t._v(" "),t._l(t.infoEmployee.leaders,function(e,n){return a("span",{key:n,staticClass:"text-capitalize"},[t._v(t._s((n>0?", ":"")+e.fullname.toLowerCase()))])})],2),t._v(" "),a("div",{staticClass:"class-log-document"},[a("b",{staticClass:"b-info-cus"},[t._v("Tài khoản: ")]),t._v(" "),a("div",[a("ul",{staticClass:"log-timeline content-detail-log p-0 ul-cus"},t._l(t.listAccount,function(e,n){return a("li",{key:n,staticClass:"log-timeline-item"},[a("div",{staticClass:"log-timeline-item-head",style:3!==e.status_id?" background-color: #FD0101 !important;":" background-color: #00904A !important;"}),t._v(" "),a("div",{staticClass:"log-timeline-item-content"},[a("span",[t._v(t._s(e.username)+" - "+t._s(e.station.name)+" - "+t._s(e.position.position_name)+" ")])])])}),0)])]),t._v(" "),a("div",{staticStyle:{"margin-top":"-1.2rem!important"}},[a("div",{staticClass:"btn-tags mb-2"},["active"===t.infoEmployee.master_profile.status?a("div",{staticClass:"d-inline-block mr-2 pr-2 pl-2 tag-item font-14"},[t._v("\n              Đang làm việc\n            ")]):t._e(),t._v(" "),"not_verified"===t.infoEmployee.master_profile.status?a("div",{staticClass:"d-inline-block mr-2 pr-2 pl-2 tag-item font-14"},[t._v("\n              Chờ nhận việc\n            ")]):t._e(),t._v(" "),"pause"===t.infoEmployee.master_profile.status?a("div",{staticClass:"d-inline-block mr-2 pr-2 pl-2 tag-item font-14"},[t._v("\n              Tạm dừng công việc\n            ")]):t._e(),t._v(" "),"disable"===t.infoEmployee.master_profile.status?a("div",{staticClass:"d-inline-block mr-2 pr-2 pl-2 tag-item font-14"},[t._v("\n              Đã nghỉ việc\n            ")]):t._e(),t._v(" "),t.infoEmployee.can_remote_attendance?a("div",{staticClass:"d-inline-block mr-2 pr-2 pl-2 tag-warning font-14"},[t._v("\n              Điểm danh từ xa\n            ")]):t._e()])])])]),t._v(" "),a("td",{staticClass:"rightTd"},[a("div",{staticClass:"d-flex flex-column",staticStyle:{"padding-left":"0.3rem"}},[a("div",{staticClass:"log-cus"},[a("i",{directives:[{name:"show",rawName:"v-show",value:t.loadingLogDetail,expression:"loadingLogDetail"}],staticClass:"fas fa-spinner fa-pulse cusSpinnerEdu"}),t._v(" "),t.listLogDetail.length>0?a("div",{staticClass:"log-cus-detail"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.loadingLogDetail&&t.listLogDetail.length>0,expression:"!loadingLogDetail && listLogDetail.length > 0"}],staticClass:"detail-logs"},[a("div",{staticClass:"content-detail-log"},[a("ul",{ref:"infoHeightLog",staticClass:"log-timeline ul-log-cus",attrs:{id:t.infoEmployee.id},on:{scroll:t.onScrollLogDetail}},t._l(t.listLogDetail,function(e,n){return a("li",{key:n,staticClass:"log-timeline-item"},[a("div",{staticClass:"log-timeline-item-tail",style:n===t.listLogDetail.length-1?"display:none;":""}),t._v(" "),a("div",{staticClass:"log-timeline-item-head",style:" background-color: #00904A;"}),t._v(" "),a("div",{staticClass:"log-timeline-item-content"},[a("span",[t._v(t._s(t.formatDate(e.action_created,"DD/MM/YYYY HH:mm:ss"))+" ")]),t._v(" "),a("span",{domProps:{innerHTML:t._s(e.message)}})])])}),0)])])]):t._e()])])]),t._v(" "),a("td",{staticClass:"text-center actionCus"},[a("div",{staticClass:"popupAction pl-0",staticStyle:{"padding-top":"1rem"}},[a("button",{ref:"actionLockAcc",staticClass:"btn btn-sm btn-outline-ghtk btn-pill mb-2 font-unset btn-cus-action",style:1===t.infoEmployee.status_id?"color: #8b8b8b; background-color: rgb(241, 241, 242); border-color: rgb(219,219,219)":"",attrs:{disabled:1===t.infoEmployee.status_id},on:{click:function(e){return t.onOpenModal("changeSttModal",t.infoEmployee,{statusChange:"lock",callback:t.updateStatusAccount})}}},[t._v("Khoá TK")]),t._v(" "),a("button",{ref:"actionOpenAcc",staticClass:"btn btn-sm btn-outline-ghtk btn-pill mb-2 font-unset btn-cus-action",style:1===t.infoEmployee.status_id?"color: #8b8b8b; background-color: rgb(241, 241, 242); border-color: rgb(219,219,219)":"",attrs:{disabled:1===t.infoEmployee.status_id},on:{click:function(e){return t.onOpenModal("changeSttModal",t.infoEmployee,{statusChange:"unlock",callback:t.updateStatusAccount})}}},[t._v("Mở TK")]),t._v(" "),a("button",{ref:"actionChangeLeader",staticClass:"btn btn-sm btn-outline-ghtk btn-pill mb-2 font-unset btn-cus-action",style:1===t.infoEmployee.status_id?"color: #8b8b8b; background-color: rgb(241, 241, 242); border-color: rgb(219,219,219)":"",attrs:{disabled:1===t.infoEmployee.status_id},on:{click:function(e){return t.onOpenModal("changeLeader",t.infoEmployee,{callback:t.getListLeader})}}},[t._v("Sửa NQL")]),t._v(" "),a("button",{ref:"actionEvaluation",staticClass:"btn btn-sm btn-outline-ghtk btn-pill mb-2 font-unset btn-cus-action",style:1!==t.infoEmployee.status_id&&t.checkManagerValid()&&t.checkValidJoinDateOrComebackDate()?"":"color: #8b8b8b; background-color: rgb(241, 241, 242); border-color: rgb(219,219,219)",attrs:{disabled:1===t.infoEmployee.status_id},on:{click:function(e){return t.onOpenModalEvaluation()}}},[t._v("Đánh giá "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.loadingModalEval,expression:"loadingModalEval"}],staticClass:"fas fa-spinner fa-pulse"})]),t._v(" "),a("button",{ref:"actionNote",staticClass:"btn btn-sm btn-outline-ghtk btn-pill mb-2 font-unset btn-cus-action",on:{click:function(e){return t.onOpenModal("noteModal",t.infoEmployee,{callback:t.getLogUpdateNode})}}},[t._v("Ghi chú")])])])])},[],!1,_h,"data-v-d1fa1c12",null).exports,yh={name:"ModalChangeLeader",components:{Multiselect:la.a,MultiSelectUser:pa.a},props:{title:{type:String,default:"Sửa người quản lý"},open:{default:!1},options:{default:{}},authUser:{default:{}},user:{default:{}},listLeader:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,openModal:!1,leaderIds:[]}},watch:{open:function(t){this.openModal=t}},methods:{onClose:function(){this.user=null,this.listLeader=[],this.leaderIds=[],this.$emit("onCloseModal","changeLeader")},onSaveChangeOwner:function(){var t=this;return l()(o.a.mark(function e(){var a,n,i,s,r,l,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(a={staff_id:t.user.id,leader_ids:t.leaderIds.map(function(t){return t.hasOwnProperty("id")?t.id:t.id_leader}),view_mode:t.options.viewMode}).leader_ids&&0!==a.leader_ids.length){e.next=3;break}return e.abrupt("return",Me.a.showMessage("Vui lòng chọn người quản lý","warning"));case 3:return e.prev=3,t.loading=!0,e.next=7,ah(a);case 7:if(n=e.sent,i=n.data,s=i.success,r=i.message,l=i.data,!s){e.next=19;break}return e.next=12,sh({staff_id:t.user.id});case 12:e.sent.data.success?t.options.callback&&(c=l.leaders,Array.isArray(c)||(c=rn()(c)),t.options.callback({listLeader:[].concat(d()(c)),log:l.log})):t.$emit("reduceStaffList",t.user.id),Me.a.showMessage("Chỉnh sửa người quản lý thành công","success"),t.$emit("changeSuccess",!0),t.onClose(),e.next=20;break;case 19:Me.a.showMessage(r,"warning");case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(3),Me.a.showMessage(e.t0);case 25:return e.prev=25,t.loading=!1,e.finish(25);case 28:case"end":return e.stop()}},e,t,[[3,22,25,28]])}))()}}};var Ch=function(t){a("Fyw1"),a("mMK4"),a("v4vJ")},wh=Object(y.a)(yh,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{staticClass:"modal-cus",attrs:{title:"Sửa người quản lý","modal-class":"modal-custom","header-class":"text-center justify-content-center d-flex",centered:"",static:"",id:"modal-change-acc","hide-footer":""},on:{hide:function(e){return t.onClose()}},model:{value:t.openModal,callback:function(e){t.openModal=e},expression:"openModal"}},[a("div",{staticClass:"modal-title"},[a("div",{staticClass:"title-cus"},[a("p",{staticClass:"title-cus-p1"},[t._v("Vui lòng chọn 01 hoặc nhiều Người quản lý cho nhân viên "+t._s(null==typeof t.user?t.user.username:""))])])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"modal-change-acc"},[a("div",[a("MultiSelectUser",{staticStyle:{"margin-top":"0rem !important"},attrs:{"custom-class":"z-3 multiselect-ghtk multiselect-no-horizontal mt-0","custom-multiselect-class":"z-3","auto-close":!0,multiple:!0,placeholder:"Nhập username người quản lý",users:t.listLeader,stationId:null==typeof t.user?t.user.station_id:""},on:{onChange:function(e){t.leaderIds=e}}})],1)]),t._v(" "),a("div",{staticClass:"text-center mb-2"},[a("b-btn",{staticClass:"button-deny-modal",attrs:{variant:"ghtk",id:"btn-save-change",name:"btn-save-change"},on:{click:function(e){return t.onSaveChangeOwner()}}},[t._v("Xác nhận")])],1)])},[],!1,Ch,"data-v-132769c5",null).exports,kh=a("23wW"),xh=a("iUkY"),Sh=a("5H57"),Mh=a("9Wgl"),Th=a("qkSh"),Dh=a("agCp"),Ih=a("MpJk"),Ph={name:"ModalInfoStaff",components:{},props:{user:{type:null|Object,default:null},uidComponentStaff:{type:null|Number,default:null}},data:function(){return{isLoading:!1,data:{},mainUser:{},resetComponent:!0,contract:{},userWorkHistory:[],promotionWorkHistory:[],pauseWorkDetail:[],referencePeople:[]}},watch:{user:function(){this.getProfile()}},computed:i()({commonHelpers:function(){return Me.a}},Object(_.c)({authUser:"userInfo"})),methods:{getTypeContract:function(t){return t&&Fe.a.getTypeOptions().filter(function(e){return e.value===t})[0].text||""},checkValidJoinDateOrComebackDate:function(){var t=null===this.user.master_profile.comeback_date?this.user.master_profile.join_date:this.user.master_profile.comeback_date,e=new Date;return+Me.a.calDistanceDate(t,e)>=10},checkManagerValid:function(){return!!this.user.leaders.map(function(t){return t.id}).includes(+this.authUser.User.id)},getProfile:function(){var t,e=this;this.$startLoading(),this.isLoading=!0,Dh.a.getProfile({master_id:this.user.master_profile_id}).then((t=l()(o.a.mark(function t(a){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.data.hasOwnProperty("success")){t.next=14;break}if(!a.data.success){t.next=14;break}return e.data=a.data.data,e.data.listUsers&&e.data.listUsers.length>0&&(e.mainUser=e.data.listUsers.find(function(t){return+t.User.main_profile_id==+t.EmpProfile.id}),e.mainUser.EmpPosition.id&&(e.mainUser.EmpPosition.position_job=e.mainUser.EmpPosition.id)),e.data.contract&&e.data.contract.active&&(e.contract=e.data.contract.active||{}),e.data.detail.reference_people&&(e.referencePeople=JSON.parse(e.data.detail.reference_people)),t.next=8,e.showDetail("transfer");case 8:return t.next=10,e.showDetail("promotion");case 10:return t.next=12,e.showPauseWorkDetail();case 12:e.resetComponent=!1,e.resetComponent=!0;case 14:case"end":return t.stop()}},t,e)})),function(e){return t.apply(this,arguments)})).catch(function(t){e.$bvModal.hide("modal-info-staff"),console.log(t)}).then(function(){e.isLoading=!1,e.$stopLoading()})},showPauseWorkDetail:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.$startLoading(),e.next=4,qo.a.getUserPauseWorkHistory({id:t.user.master_profile_id});case 4:if(a=e.sent,(n=a.data).success){e.next=9;break}return Me.a.showMessage(n.message||"Có lỗi xảy ra","warning"),e.abrupt("return");case 9:t.pauseWorkDetail=n.histories.filter(function(t){return!1===t.ErpPauseWorkHistory.is_deleted}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),Me.a.showMessage(e.t0.message,"warning");case 15:return e.prev=15,t.$stopLoading(),e.finish(15);case 18:case"end":return e.stop()}},e,t,[[0,12,15,18]])}))()},showDetail:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transfer";return l()(o.a.mark(function a(){var n,i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t.$startLoading(),a.next=4,qo.a.getUserWorkHistory({id:t.user.master_profile_id,type:e});case 4:if(n=a.sent,(i=n.data).success){a.next=9;break}return Me.a.showMessage(i.message||"Có lỗi xảy ra","warning"),a.abrupt("return");case 9:"transfer"===e?t.userWorkHistory=i.histories:"promotion"===e&&(t.promotionWorkHistory=i.histories),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),Me.a.showMessage(a.t0.message,"warning");case 15:return a.prev=15,t.$stopLoading(),a.finish(15);case 18:case"end":return a.stop()}},a,t,[[0,12,15,18]])}))()},openLink:function(t){window.open(t,"_blank")},onOpenModal:function(t){this.$emit("onOpenModalStaff",t)}},filters:{showType:function(t){switch(t){case"station":return"Kho";case"department":return"Bộ phận";case"position":return"Vị trí";case"jobType":return"Hình thức";case"appoint":return"Bổ nhiệm";case"reduction":return"Giáng chức";case"disable_date":return"Ngày tài khoản ngừng hoạt động";case"ranking":return"Cấp bậc nhân viên";case"active_date":return"Ngày tài khoản bắt đầu hoạt động";case"manager_level":return"Cấp bậc quản lý";default:return"N/A"}},formatDate:function(t){return t?Ye()(t).format("DD-MM-YYYY"):"N/A"},created:function(t){return Ye()(t).format("DD-MM-YYYY H:mm:ss")},typeToText:function(t){return Ih.b.find(function(e){return e.value===t})&&Ih.b.find(function(e){return e.value===t}).text||"N/A"}}};var Eh=function(t){a("LyYT"),a("i4vo")},Lh=Object(y.a)(Ph,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{staticClass:"custom-modal",attrs:{size:"lg",scrollable:"","hide-footer":"",title:"THÔNG TIN NHÂN VIÊN","header-class":"justify-content-center",centered:"",id:"modal-info-staff"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"m-2"},[a("div",{staticClass:"card"},[a("div",{staticClass:"mt-2 mb-2 mr-3 ml-3"},[a("div",{staticClass:"d-flex justify-content-between m-1"},[a("h3",{staticClass:"card-title-info"},[t._v("Thông tin cá nhân")]),t._v(" "),a("button",{staticClass:"btn btn-ghtk btn-sm",on:{click:function(e){return t.openLink("/adm/profile/staff/"+t.user.id)}}},[t._v("Xem chi tiết")])]),t._v(" "),t.data.detail&&t.mainUser.EmpPosition?a("div",{staticClass:"mt-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-3"},[a("img",{staticClass:"avatar mr-2",attrs:{src:t.data.detail.image_profile,alt:"avatar"}})]),t._v(" "),a("div",{staticClass:"col-3"},[a("p",{staticClass:"info-detail"},[t._v("Họ và tên")]),t._v(" "),a("p",{staticClass:"text-wrap"},[t._v(t._s(t.data.detail.fullname))]),t._v(" "),a("p",{staticClass:"info-detail"},[t._v("Ngày vào")]),t._v(" "),a("p",{staticClass:"text-wrap"},[t._v(t._s(t.data.detail.join_date))])]),t._v(" "),a("div",{staticClass:"col-3"},[a("p",{staticClass:"info-detail"},[t._v("Vị trí")]),t._v(" "),a("p",{staticClass:"text-wrap"},[t._v(t._s(t.mainUser.EmpPosition.position_name))]),t._v(" "),a("p",{staticClass:"info-detail"},[t._v("Ngày thử việc")]),t._v(" "),a("p",{staticClass:"text-wrap"},[t._v(t._s(t.data.detail.trial_date))])]),t._v(" "),a("div",{staticClass:"col-3"},[a("p",{staticClass:"info-detail"},[t._v("Chức vụ")]),t._v(" "),a("p",{staticClass:"text-wrap"},[t._v(t._s(t.data.detail.chuc_vu))]),t._v(" "),a("p",{staticClass:"info-detail"},[t._v("Ngày chính thức")]),t._v(" "),a("p",{staticClass:"text-wrap"},[t._v(t._s(t.data.detail.contract_date))])])])]):t._e()])]),t._v(" "),a("div",{staticClass:"card mt-2"},[a("div",{staticClass:"mt-2 mb-2 mr-3 ml-3"},[a("h3",{staticClass:"card-title-info"},[t._v("Thông tin hợp đồng")]),t._v(" "),a("div",{staticClass:"info mt-4"},[a("div",{staticClass:"d-flex justify-content-around"},[a("div",[a("p",{staticClass:"info-detail"},[t._v("Mã hợp đồng")]),t._v(" "),a("p",{staticClass:"text-wrap"},[t._v(t._s(t.contract.contract_number))])]),t._v(" "),a("div",[a("p",{staticClass:"info-detail"},[t._v("Loại hợp đồng")]),t._v(" "),a("p",{staticClass:"text-wrap"},[t._v(t._s(t.getTypeContract(t.contract.type_contract)))])]),t._v(" "),a("div",[a("p",{staticClass:"info-detail"},[t._v("Ngày ký")]),t._v(" "),a("p",{staticClass:"text-wrap"},[t._v(t._s(t.contract.contract_date))])]),t._v(" "),a("div",[a("p",{staticClass:"info-detail"},[t._v("Ngày bắt đầu")]),t._v(" "),a("p",{staticClass:"text-wrap"},[t._v(t._s(t.contract.start_date))])]),t._v(" "),a("div",[a("p",{staticClass:"info-detail"},[t._v("Ngày kết thúc")]),t._v(" "),a("p",{staticClass:"text-wrap"},[t._v(t._s(t.contract.end_date))])])])])])]),t._v(" "),a("div",{staticClass:"card mt-2"},[a("div",{staticClass:"mt-2 mb-2 mr-3 ml-3"},[a("h3",{staticClass:"card-title-info"},[t._v("Thông tin quá trình công tác")]),t._v(" "),a("div",{staticClass:"info mt-4 ml-3 mr-3"},[a("p",{staticClass:"sub-title mt-0"},[t._v("Điều chuyển/Thuyên chuyển")]),t._v(" "),a("table",{staticClass:"w-100"},[a("thead",[a("tr",[a("th",{staticClass:"w-25"},[t._v("Ngày hiệu lực")]),t._v(" "),a("th",{staticClass:"w-25"},[t._v("Phân loại")]),t._v(" "),a("th",{staticClass:"w-25"},[t._v("Thay đổi từ")]),t._v(" "),a("th",{staticClass:"w-25"},[t._v("Thay đổi thành")])])]),t._v(" "),t.userWorkHistory&&t.userWorkHistory.length>0?a("tbody",t._l(t.userWorkHistory,function(e,n){return a("tr",{key:n},[a("td",[t._v(t._s(t._f("formatDate")(e.ErpWorkHistory.start_date)))]),t._v(" "),a("td",[t._v(t._s(t._f("showType")(e.ErpWorkHistory.type)))]),t._v(" "),a("td",[t._v(t._s(e.ErpWorkHistory.from_text))]),t._v(" "),a("td",[t._v(t._s(e.ErpWorkHistory.to_text))])])}),0):t._e()]),t._v(" "),t.userWorkHistory&&t.userWorkHistory.length<1?a("div",{staticClass:"w-100"},[a("span",[t._v("Hiện chưa có lịch sử công việc")])]):t._e(),t._v(" "),a("p",{staticClass:"sub-title mt-4"},[t._v("Bổ nhiệm/Giáng chức")]),t._v(" "),a("table",{staticClass:"w-100"},[a("thead",[a("tr",[a("th",{staticClass:"w-25"},[t._v("Ngày hiệu lực")]),t._v(" "),a("th",{staticClass:"w-25"},[t._v("Phân loại")]),t._v(" "),a("th",{staticClass:"w-25"},[t._v("Chức danh cũ")]),t._v(" "),a("th",{staticClass:"w-25"},[t._v("Chức danh mới")])])]),t._v(" "),t.promotionWorkHistory&&t.promotionWorkHistory.length>0?a("tbody",t._l(t.promotionWorkHistory,function(e,n){return a("tr",{key:n},[a("td",[t._v(t._s(t._f("formatDate")(e.ErpWorkHistory.start_date)))]),t._v(" "),a("td",[t._v(t._s(t._f("showType")(e.ErpWorkHistory.type)))]),t._v(" "),a("td",[t._v(t._s(e.ErpWorkHistory.from_text))]),t._v(" "),a("td",[t._v(t._s(e.ErpWorkHistory.to_text))])])}),0):t._e()]),t._v(" "),t.promotionWorkHistory&&t.promotionWorkHistory.length<1?a("div",{staticClass:"w-100"},[a("span",[t._v("Hiện chưa có lịch sử công việc")])]):t._e(),t._v(" "),a("p",{staticClass:"sub-title mt-4"},[t._v("Tạm dừng/Ngừng công tác")]),t._v(" "),a("table",{staticClass:"w-100"},[a("thead",[a("tr",[a("th",{staticClass:"w-25"},[t._v("Loại thay đổi")]),t._v(" "),a("th",{staticClass:"w-25"},[t._v("Ngày bắt đầu")]),t._v(" "),a("th",{staticClass:"w-25"},[t._v("Ngày kết thúc")]),t._v(" "),a("th",{staticClass:"w-25"},[t._v("Lý do")])])]),t._v(" "),t.pauseWorkDetail&&t.pauseWorkDetail.length>0?a("tbody",t._l(t.pauseWorkDetail,function(e,n){return a("tr",{key:n},[a("td",[t._v(t._s(t._f("typeToText")(e.ErpPauseWorkHistory.type)))]),t._v(" "),a("td",[t._v(t._s(t._f("formatDate")(e.ErpPauseWorkHistory.start_date)))]),t._v(" "),a("td",[t._v(t._s(t._f("formatDate")(e.ErpPauseWorkHistory.end_date)))]),t._v(" "),a("td",[t._v(t._s(e.ErpPauseWorkHistory.reason))])])}),0):t._e()]),t._v(" "),t.pauseWorkDetail&&t.pauseWorkDetail.length<1?a("div",{staticClass:"w-100"},[a("span",[t._v("Hiện chưa có lịch sử nghỉ việc")])]):t._e()])])]),t._v(" "),a("div",{staticClass:"card mt-2"},[a("div",{staticClass:"mt-2 mb-2 mr-3 ml-3"},[a("h3",{staticClass:"card-title-info"},[t._v("Thông tin người tham chiếu")]),t._v(" "),a("table",{staticClass:"mt-4 ml-3 w-100"},[a("thead",[a("tr",[a("th",{staticClass:"w-20"},[t._v("Họ và tên")]),t._v(" "),a("th",{staticClass:"w-20"},[t._v("Mối quan hệ")]),t._v(" "),a("th",{staticClass:"w-20"},[t._v("Ngày sinh")]),t._v(" "),a("th",{staticClass:"w-20"},[t._v("CMND/CCCD")]),t._v(" "),a("th",{staticClass:"w-20"},[t._v("Số điện thoại")])])]),t._v(" "),a("tbody",{staticClass:"reference-people"},t._l(t.referencePeople,function(e,n){return a("tr",{key:n},[a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",[t._v(t._s(e.relation))]),t._v(" "),a("td",[t._v(t._s(t.commonHelpers.formatDate(e.birthday)))]),t._v(" "),a("td",[t._v(t._s(e.personal_id_number))]),t._v(" "),a("td",[t._v(t._s(e.mobile))])])}),0)]),t._v(" "),t.referencePeople&&t.referencePeople.length<1?a("div",[a("span",[t._v("Chưa có thông tin người tham chiếu")])]):t._e()])]),t._v(" "),t.user?a("div",{staticClass:"mt-3"},[a("button",{staticClass:"d-flex justify-content-between align-items-center list-action p-2 w-100 action-staff",style:1===t.user.status_id?"color: #8b8b8b; background-color: rgb(241, 241, 242); border-color: rgb(219,219,219)":"",attrs:{disabled:1===t.user.status_id},on:{click:function(e){return t.onOpenModal("openAcc")}}},[a("span",{staticClass:"ml-3"},[t._v("Mở tài khoản")]),a("i",{staticClass:"fa fa-chevron-right icon-right mr-3",attrs:{"aria-hidden":"true"}})]),t._v(" "),a("button",{staticClass:"d-flex justify-content-between align-items-center list-action p-2 w-100 action-staff",style:1===t.user.status_id?"color: #8b8b8b; background-color: rgb(241, 241, 242); border-color: rgb(219,219,219)":"",attrs:{disabled:1===t.user.status_id},on:{click:function(e){return t.onOpenModal("lockAcc")}}},[a("span",{staticClass:"ml-3"},[t._v("Khóa tài khoản")]),a("i",{staticClass:"fa fa-chevron-right icon-right mr-3",attrs:{"aria-hidden":"true"}})]),t._v(" "),a("button",{staticClass:"d-flex justify-content-between align-items-center list-action p-2 w-100 action-staff",style:1===t.user.status_id?"color: #8b8b8b; background-color: rgb(241, 241, 242); border-color: rgb(219,219,219)":"",attrs:{disabled:1===t.user.status_id},on:{click:function(e){return t.onOpenModal("changeLeader")}}},[a("span",{staticClass:"ml-3"},[t._v("Sửa NQL")]),a("i",{staticClass:"fa fa-chevron-right icon-right mr-3",attrs:{"aria-hidden":"true"}})]),t._v(" "),a("button",{staticClass:"d-flex justify-content-between align-items-center list-action p-2 w-100 action-staff",style:1!==t.user.status_id&&t.checkManagerValid()&&t.checkValidJoinDateOrComebackDate()?"":"color: #8b8b8b; background-color: rgb(241, 241, 242); border-color: rgb(219,219,219)",attrs:{disabled:1===t.user.status_id},on:{click:function(e){return t.onOpenModal("evaluation")}}},[a("span",{staticClass:"ml-3"},[t._v("Đánh giá")]),a("i",{staticClass:"fa fa-chevron-right icon-right mr-3",attrs:{"aria-hidden":"true"}})]),t._v(" "),a("button",{staticClass:"d-flex justify-content-between align-items-center list-action p-2 w-100 action-staff",on:{click:function(e){return t.onOpenModal("note")}}},[a("span",{staticClass:"ml-3"},[t._v("Ghi chú")]),a("i",{staticClass:"fa fa-chevron-right icon-right mr-3",attrs:{"aria-hidden":"true"}})]),t._v(" "),t.user.has_remote_attendance?a("button",{staticClass:"d-flex justify-content-between align-items-center list-action p-2 w-100 action-staff",style:1===t.user.status_id?"color: #8b8b8b; background-color: rgb(241, 241, 242); border-color: rgb(219,219,219)":"",attrs:{disabled:1===t.user.status_id},on:{click:function(e){return t.onOpenModal("setRemoteCheckin")}}},[a("span",{staticClass:"ml-3"},[t._v("Config điểm danh từ xa")]),a("i",{staticClass:"fa fa-chevron-right icon-right mr-3",attrs:{"aria-hidden":"true"}})]):t._e()]):t._e()])])],1)},[],!1,Eh,"data-v-5dbf24c3",null).exports,Ah={name:"ModalSetRemoteCheckIn",props:{user:{type:null|Object,default:null}},data:function(){return{loading:!1}},methods:{setRemoteCheckin:function(){var t=this;return l()(o.a.mark(function e(){var a,n,i,s,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.loading=!0,a=null,!t.user.can_remote_attendance){e.next=9;break}return e.next=6,rh({user_id:t.user.id});case 6:a=e.sent,e.next=12;break;case 9:return e.next=11,oh({user_id:t.user.id});case 11:a=e.sent;case 12:n=a.data,i=n.success,s=n.message,r=n.data,i?(t.$bvModal.hide("config-set-remote-checkin"),t.$emit("changeDataRemoteCheckin",r.can_remote_attendance)):Me.a.showMessage(s,"warning"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),Me.a.showMessage(e.t0.message,"error");case 19:return e.prev=19,t.loading=!1,e.finish(19);case 22:case"end":return e.stop()}},e,t,[[0,16,19,22]])}))()}}};var Oh=function(t){a("tNAD"),a("cq0H")},Nh={name:"staff-management",components:{ModalSetRemoteCheckIn:Object(y.a)(Ah,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{title:"Config điểm danh từ xa","header-class":"text-center justify-content-center d-flex",size:"sm",centered:"",static:"","hide-footer":"",id:"config-set-remote-checkin"}},[t.user?a("div",[a("div",[t._v("Bạn có muốn nhân sự "+t._s(t.user.fullname)+" - "+t._s(t.user.username)+" - "+t._s(t.user.position.position_name)+" "+t._s(t.user.can_remote_attendance?"hủy":"được")+" điểm danh từ xa ?")])]):t._e(),t._v(" "),a("div",{staticClass:"text-center mt-3"},[a("b-btn",{staticClass:"button-close-modal-contact close-btn mr-1",attrs:{variant:"ghtk"},on:{click:function(e){return t.$bvModal.hide("config-set-remote-checkin")}}},[t._v("Hủy")]),t._v(" "),a("b-btn",{staticClass:"button-close-modal-contact",attrs:{variant:"ghtk"},on:{click:t.setRemoteCheckin}},[t._v("Xác nhận")])],1)])],1)},[],!1,Oh,"data-v-8adbd6a6",null).exports,ModalInfoStaff:Lh,Multiselect:la.a,MultiSelectProvince:fe.a,MultiSelectRegion:me.a,MultiSelectStation:ge.a,MultiSelectPosition:be.a,SelectProfileStatus:Sh.a,MultiSelectUser:pa.a,ModalChangeLeader:wh,AddStaffNoteModal:ph,CallStaffModal:dh,StaffDetailRow:bh,ChangeStatusAccountModal:gh,ModalEditEvaluation:kh.a,VisitHomeForm:xh.a},props:{scrollMode:{type:Boolean},blankMode:{type:Boolean}},data:function(t){return{viewMode:"leader_tree",selectedViewMode:"leader_tree",allowGroups:[1,3,4,5,6,8,9,10,15,19,21,22,24,25],loading:{listEmployee:!1},status:null,permissionHr:!1,permissionVh:!1,permissionIt:!1,list_data:[],changeFilter:!0,filter:{region:"",province:"",station:"",position:"",mp_status:"",joinDate:null,userIds:[]},pagination:{current_page:1,per_page:10,total:0},attachPermission:!0,selected_user:null,modalOptions:null,showTagModal:!1,showCallModal:!1,showNoteModal:!1,showChangeSttModal:!1,showChangeLeaderModal:!1,param:{regions:[],provinces:[],stations:[],positions:[],mp_status:[],staff_ids:[]},listAccount:[],listLeader:[],statusChange:null,perPage:10,isPermission:!1,messageCheckRole:"Đang truy cập...",imgInfo:"https://dauso1900.vn/wp-content/uploads/2020/04/84181473_2862109443850624_6202619776917831680_o.png",evaluatedPermissionExpired:!1,managerCriteria:Mh.a.defaultManagerCriteriaFstar,isManagement:"",evaluationModal:{},from:"",to:"",userInfo:{},evaluations:[],loadingModal:!1,userIdChoice:null,idLoadingModal:null,isPermissionViewTagManagement:!1,visitHome:{info:{staff_code:!0,character_by_guardian:null,date_visit_home:null,employee_career_path:null,employee_sharing:null,family_economic:null,guardian_agree:null,guardian_know_responsibility:null,guardian_work_state:null,is_breadwinner:null,note:null,user_visit_home:null,file_visit:[],file_visit_add:[],file_visit_delete:[]},required:{staff_code:!0,character_by_guardian:!0,date_visit_home:!0,employee_career_path:!0,employee_sharing:!0,family_economic:!0,guardian_agree:!0,guardian_know_responsibility:!0,guardian_work_state:!0,is_breadwinner:!0,user_visit_home:!0,file_visit:!0,locate_guardian_house:!0}},addClassScroll:!1,currentStaff:null,uidComponentStaff:null}},created:function(){this.authUser.User&&this.checkPermission()},computed:i()({helper:function(){return Me.a},loading_data:function(){return this.loading.listEmployee},countListStaff:function(){return this.list_data&&Array.isArray(this.list_data)?this.list_data.length:0}},Object(_.c)({permissions:"education/getPermissions"}),Object(_.c)({authUser:"userInfo"}),{criteria:function(){return this.userInfo.ErpUser&&15!=+this.userInfo.ErpUser.group_id?Mh.a.defaultCriteriaFstar:Mh.a.techCriteriaFstar},isHrStaff:function(){return this.authUser&&3===parseInt(this.authUser.User.group_id)}}),watch:{authUser:{handler:function(t,e){(!e.User&&t.User||t.User.id!==e.User.id)&&this.checkPermission()}}},methods:i()({changeDataRemoteCheckin:function(t){var e=this,a=this.$refs.staffDetailRow.find(function(t){t._uid=e.uidComponentStaff});a&&a.onChangeDataRemoteCheckin(t,this.currentStaff,this.uidComponentStaff)},onOpenModalStaff:function(t){var e=this;if("setRemoteCheckin"===t&&this.currentStaff.has_remote_attendance)this.$bvModal.show("config-set-remote-checkin");else{var a=this.$refs.staffDetailRow.find(function(t){t._uid=e.uidComponentStaff});a&&a.openModalFromInfoStaff(t,this.currentStaff,this.uidComponentStaff)}}},Object(_.b)({setPermissions:"education/setPermissions"}),{onChangeViewMode:function(){this.viewMode===this.selectedViewMode||this.loading.listEmployee||(this.viewMode=this.selectedViewMode,this.list_data=[],this.pagination.current_page=1,this.pagination.per_page=10,this.pagination.total=0,this.getListEmployee())},checkPermission:function(){var t=this;return l()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.authUser||!t.authUser.User){e.next=17;break}if(a=parseInt(t.authUser.User.group_id),t.isHrStaff&&(t.viewMode="hr_team",t.selectedViewMode="hr_team"),!t.allowGroups.includes(a)){e.next=12;break}return t.getListEmployee(),t.getPermissionEvaluationExpired(),t.getDateSalary(),t.isPermission=!0,e.next=10,t.getPermissionViewLinkTag();case 10:e.next=15;break;case 12:t.messageCheckRole="Bạn không có quyền thao tác !",t.imgInfo="https://cache.giaohangtietkiem.vn/d/479f30a04d3d49da901783561217fcbe.jpg?width=450&height=346",Me.a.showMessage("Bạn không có quyền thao tác");case 15:e.next=19;break;case 17:t.imgInfo="https://cache.giaohangtietkiem.vn/d/479f30a04d3d49da901783561217fcbe.jpg?width=450&height=346",t.messageCheckRole="Bạn chưa đăng nhập !";case 19:case"end":return e.stop()}},e,t)}))()},getPermissionViewLinkTag:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,th();case 3:e.sent.data.success?t.isPermissionViewTagManagement=!0:t.isPermissionViewTagManagement=!1,e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),t.isPermissionViewTagManagement=!1;case 11:return e.prev=11,e.finish(11);case 13:case"end":return e.stop()}},e,t,[[0,7,11,13]])}))()},getDateSalary:function(){var t=new Date,e=t.getMonth()+1,a=t.getFullYear(),n=12==+e?1:e+1,i=1==+n?a+1:a;this.from=a+"-"+e+"-21",this.to=i+"-"+n+"-20"},onScrollTable:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:+document.querySelector("#tableRookie").scrollTop>0?t.addClassScroll=!0:t.addClassScroll=!1;case 2:case"end":return e.stop()}},e,t)}))()},search:function(){this.list_data=[],this.pagination.current_page=1,this.pagination.per_page=10,this.pagination.total=0,this.buildQuery(),this.getListEmployee()},handleProvinceSelected:function(t){this.filter.province=t?t.map(function(t){return t.id}).toString():"",this.changeFilter=!0},handleStationSelected:function(t){this.filter.station=t?t.map(function(t){return t.id}).toString():"",this.changeFilter=!0},handleStudentPositionSelected:function(t){this.filter.position=t?t.map(function(t){return t.id}).toString():"",this.changeFilter=!0},handleRegionSelected:function(t){this.filter.region=t?t.map(function(t){return t.id}).toString():"",t||(this.filter.province=""),this.changeFilter=!0},handleMpStatusSelected:function(t){this.filter.mp_status=t?t.map(function(t){return t.value}).join(","):null,this.changeFilter=!0},handleUsersSelected:function(t){this.filter.userIds=t,null!==this.filter.userIds&&(this.changeFilter=!0)},buildQuery:function(){this.param={provinces:[],stations:[],positions:[],mp_status:[],staff_ids:[]},this.filter.region.length>0&&(this.param.regions=this.filter.region.split(",")),this.filter.province.length>0&&(this.param.provinces=this.filter.province.split(",")),this.filter.station.length>0&&(this.param.stations=this.filter.station.split(",")),this.filter.position.length>0&&(this.param.positions=this.filter.position.split(",")),this.filter.mp_status.length>0&&(this.param.mp_status=this.filter.mp_status.split(",")),null!==this.filter.userIds&&this.filter.userIds.length>0&&(this.param.staff_ids=this.filter.userIds.map(function(t){return t.id})),null!==this.filter.joinDate&&(this.param.join_date_from=Me.a.formatDate(this.filter.joinDate.start,"YYYY-MM-DD"),this.param.join_date_to=Me.a.formatDate(this.filter.joinDate.end,"YYYY-MM-DD"))},getPermissionEvaluationExpired:function(){var t=this;Th.a.getPermissionEvaluationExpired().then(function(e){e.data.success&&(t.evaluatedPermissionExpired=e.data.allowed)})},getListEmployee:function(){var t=this;return l()(o.a.mark(function e(){var a,n,s,r,l,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.loading.listEmployee){e.next=2;break}return e.abrupt("return");case 2:return t.changeFilter=!1,e.prev=3,t.loading.listEmployee=!0,a={filters:i()({},t.param),page:t.pagination.current_page,per_page:t.pagination.per_page,view_mode:t.viewMode},e.next=8,Zu(a);case 8:n=e.sent,s=n.data,r=s.success,l=s.message,c=s.data,r?(t.list_data=c,n.data.current_page&&n.data.per_page&&(t.pagination=n.data,delete t.pagination.success,delete t.pagination.message,delete t.pagination.data),t.pagination.current_page||(t.pagination.current_page=a.page),t.pagination.per_page||(t.pagination.current_page=a.per_page)):Me.a.showMessage(l,"warning"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),Me.a.showMessage(e.t0.message,"error");case 16:return e.prev=16,t.loading.listEmployee=!1,e.finish(16);case 19:case"end":return e.stop()}},e,t,[[3,13,16,19]])}))()},onOpenModal:function(t){var e=t.modal,a=t.user,n=t.options;if(this.selected_user=a,this.modalOptions=n||{},this.modalOptions.viewMode=this.viewMode,n.hasOwnProperty("statusChange")&&(this.statusChange=n.statusChange),"changeSttModal"===e){var i=this.convertData(a);this.listAccount=[].concat(d()(i),[{id:a.id,username:a.username,isMain:!0,status_id:a.status_id}]),"lock"===this.statusChange?this.listAccount=this.listAccount.filter(function(t){return 3===t.status_id}):this.listAccount=this.listAccount.filter(function(t){return 3!==t.status_id})}if("changeLeader"===e){var s=this.convertDataLeader(a);this.listLeader=[].concat(d()(s))}switch(e){case"tagModal":this.showTagModal=!0;break;case"callModal":this.showCallModal=!0;break;case"noteModal":this.showNoteModal=!0;break;case"changeSttModal":this.showChangeSttModal=!0;break;case"changeLeader":this.showChangeLeaderModal=!0}},reduceStaffList:function(t){this.list_data=this.list_data.filter(function(e){return e.id!==t})},onCloseModal:function(t){switch(this.selected_user=null,this.modalOptions=null,t){case"tagModal":this.showTagModal=!1;break;case"callModal":this.showCallModal=!1;break;case"noteModal":this.showNoteModal=!1;break;case"changeSttModal":this.showChangeSttModal=!1;break;case"changeLeader":this.showChangeLeaderModal=!1}},onOpenModalEvaluation:function(t){var e=this;return l()(o.a.mark(function a(){var n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.evaluationModal=null,e.loadingModal=!0,e.idLoadingModal=t,n={id:t,from:e.from,to:e.to},e.userIdChoice=t,a.next=7,Ji.a.all([e.checkIsManagement(t),e.getEvaluationByUser(n)]).then(function(t){return t.includes("error")?(e.loadingModal=!1,e.idLoadingModal=null,Me.a.showMessage("Đã xảy ra lỗi khi lấy thông tin đánh giá của nhân viên","warning")):e.checkNotEnoughEva(e.evaluations)?(e.$bvModal.show("modal-edit-evaluation"),e.loadingModal=!1,void(e.idLoadingModal=null)):(e.loadingModal=!1,e.idLoadingModal=null,Me.a.showMessage("Bạn không có quyền đánh giá hoặc chưa đến chu kì đánh giá","warning"))});case 7:case"end":return a.stop()}},a,e)}))()},getEvaluationByUser:function(){var t=l()(o.a.mark(function t(e){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Th.a.getEvaluationByUser(e);case 3:(a=t.sent).data.hasOwnProperty("success")&&(a.data.success?(this.userInfo=a.data.data.UserInfo,this.evaluations=a.data.data.Evaluations):Me.a.showMessage(a.data.message,"warning")),t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return","error");case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}(),checkIsManagement:function(){var t=l()(o.a.mark(function t(e){var a,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={id:e},t.next=4,Th.a.checkIsManagement(a);case 4:(n=t.sent).data.hasOwnProperty("success")&&(n.data.success?n.data.success&&(this.isManagement=n.data.data):Me.a.showMessage(n.data.message,"warning")),t.next=11;break;case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return","error");case 11:case"end":return t.stop()}},t,this,[[0,8]])}));return function(e){return t.apply(this,arguments)}}(),checkNotEnoughEva:function(t){if(this.evaluatedPermissionExpired)return!0;if(this.userInfo.ErpUser&&15===parseInt(this.userInfo.ErpUser.group_id))return!0;var e=(new Date).getDate();return!(e>9&&e<21||e>24)&&(e>20&&e<25&&t.length<2||e>4&&e<9&&t.length<1)},onClickChat:function(t){var e=this;return l()(o.a.mark(function a(){var n,i,s,r,l,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je({user_id:t});case 2:n=e.sent,i=n.data,s=i.success,r=i.message,l=i.data,s?(c=l.channel_id,Me.a.openLink("https://ghtk.me/channel/internal/"+c)):Me.a.showMessage(r,"warning");case 5:case"end":return e.stop()}},a,e)}))()},convertData:function(t){var e=[];return t.hasOwnProperty("sub_accounts")&&null!==t.sub_accounts&&t.sub_accounts.forEach(function(t){e.push({id:t.id,username:t.username,isMain:!1,status_id:t.status_id})}),e},convertDataLeader:function(t){var e=[];return t.hasOwnProperty("leaders")&&t.leaders.length>0&&t.leaders.forEach(function(t){e.push({id:t.id,username:t.username,name:t.name})}),e},viewDetailStaff:function(t,e){this.currentStaff=t,this.uidComponentStaff=e,this.$bvModal.show("modal-info-staff")}})};var Rh=function(t){a("OEkN"),a("6aA6"),a("KRb+")},Uh=Object(y.a)(Nh,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-none d-md-block main-content"},[t.isPermission?a("div",[a("div",{staticClass:"mx-1 mt-2 mb-2 row"},[a("div",{staticClass:"header-padding text-center-y"},[t._m(0),t._v(" "),t.isPermissionViewTagManagement?a("div",{staticClass:"tag-cus",staticStyle:{"align-items":"baseline"}},[a("div",{staticClass:"m-0"},[a("router-link",{staticClass:"link action-toggle--not-active",attrs:{to:"/staff-work/tags-management"}},[t._v("\n              Quản lý Tags\n            ")])],1)]):t._e()])]),t._v(" "),a("div",{staticClass:"mx-0 filter pb-1 row z-3 mb-1"},[a("div",{staticClass:"row w-100"},[a("div",{staticClass:"col-3 mb-2"},[a("multi-select-region",{attrs:{"custom-class":"multiselect-ghtk multiselect-no-horizontal",regions:t.filter.region,"auto-close":!0,placeholder:"Miền"},on:{handleSelectedRegion:t.handleRegionSelected}})],1),t._v(" "),a("div",{staticClass:"col-3 mb-2"},[a("multi-select-province",{attrs:{"custom-class":"multiselect-ghtk multiselect-no-horizontal","province-ids":t.filter.province,region:t.filter.region,"auto-close":!0,"hide-select":!0,placeholder:"Tỉnh"},on:{handleProvinceSelected:t.handleProvinceSelected}})],1),t._v(" "),a("div",{staticClass:"col-3 mb-2"},[a("multi-select-station",{staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{"province-ids":t.filter.province,"station-ids":t.filter.station,"auto-close":!0,isActive:!0,"hide-select":!0,placeholder:"Kho"},on:{handleStationSelected:t.handleStationSelected}})],1),t._v(" "),a("div",{staticClass:"col-3 mb-2"},[a("MultiSelectPosition",{staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{"position-ids":t.filter.position,"auto-close":!0,"hide-selected":!0,placeholder:"Vị trí",isSyllabus:!0},on:{handlePositionSelected:t.handleStudentPositionSelected}})],1),t._v(" "),a("div",{staticClass:"col-3 mb-0 mt-0"},[a("SelectProfileStatus",{staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{multiple:!0,"auto-close":!0,"hide-select":!0,status:t.filter.mp_status},on:{change:t.handleMpStatusSelected}})],1),t._v(" "),a("div",{staticClass:"col-3 mb-0 mt-0"},[a("MultiSelectUser",{staticStyle:{"margin-top":"0rem !important"},attrs:{"custom-class":"z-3 multiselect-ghtk multiselect-no-horizontal mt-0","custom-multiselect-class":"z-3","auto-close":!0,multiple:!0,placeholder:"username",stationId:t.filter.station},on:{onChange:t.handleUsersSelected}})],1),t._v(" "),a("div",{staticClass:"col-3 mb-0 mt-0 placeholder-contain"},[a("v-date-picker",{attrs:{mode:"range",locale:"vi",color:"green","input-props":{placeholder:"Ngày vào GHTK",style:"border: 1px solid #BDBDBD; font-size: 14px;"},popover:{visibility:"focus"}},model:{value:t.filter.joinDate,callback:function(e){t.$set(t.filter,"joinDate",e)},expression:"filter.joinDate"}})],1),t._v(" "),a("div",{staticClass:"col-3 mb-0 mt-0"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedViewMode,expression:"selectedViewMode"}],staticClass:"form-control custom-select",attrs:{disabled:!t.isHrStaff},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedViewMode=e.target.multiple?a:a[0]},function(e){return t.onChangeViewMode()}]}},[a("option",{attrs:{value:"leader_tree"}},[t._v("Theo Cấp Quản Lý")]),t._v(" "),a("option",{attrs:{value:"hr_team"}},[t._v("Theo Team HR")])])])])]),t._v(" "),a("div",{staticClass:"col mb-3",attrs:{id:"btn-search"}},[a("b-btn",{staticClass:"filter-containter__btn-search btn-header-class",attrs:{variant:"ghtk",disabled:t.loading_data},on:{click:function(e){return t.search()}}},[t._v("Tìm kiếm\n      ")])],1),t._v(" "),a("div",{ref:"tableRef",staticClass:"table-data cusTable ml-1",class:"table-sticky",staticStyle:{"max-height":"88vh"},attrs:{id:"tableRookie"},on:{scroll:t.onScrollTable}},[a("table",{staticClass:"table table-sm mb-0"},[a("thead",[a("tr",{staticClass:"text-left"},[a("th",{staticClass:"w-30 text-black th-cus",class:t.addClassScroll?"th-cus-scroll":""},[t._v("Thông tin nhân viên")]),t._v(" "),a("th",{staticClass:"w-60 text-black th-cus",class:t.addClassScroll?"th-cus-scroll":""},[t._v("Log chi tiết")]),t._v(" "),a("th",{staticClass:"w-10 text-black th-cus",class:t.addClassScroll?"th-cus-scroll":"",staticStyle:{padding:"0rem !important","text-align":"center"}},[t._v("Thao tác\n          ")])])]),t._v(" "),a("tbody",{directives:[{name:"loading",rawName:"v-loading",value:t.loading_data,expression:"loading_data"}],staticClass:"position-relative"},[t._l(t.list_data,function(e){return[a("StaffDetailRow",{key:e.id,ref:"staffDetailRow",refInFor:!0,attrs:{"view-mode":t.viewMode,"id-loading-modal-eval":t.idLoadingModal,infoEmployee:e,"user-id":e.id,"eval-permission-expired":t.evaluatedPermissionExpired},on:{onClickChat:t.onClickChat,onOpenModal:t.onOpenModal,onOpenModalEvaluation:t.onOpenModalEvaluation,viewDetailStaff:t.viewDetailStaff,changeRemoteCheckin:t.search}})]}),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:t.helper.isEmpty(t.list_data),expression:"helper.isEmpty(list_data)"}]},[a("td",{attrs:{colspan:"10"}},[a("div",{staticClass:"mih-25 d-flex justify-content-center align-items-center"},[a("b",{directives:[{name:"show",rawName:"v-show",value:!t.loading_data,expression:"!loading_data"}]},[t._v("Không có dữ liệu phù hợp !")])])])])],2)])]),t._v(" "),a("div",{staticClass:"row mt-2 justify-content-between",staticStyle:{"line-height":"35px"},attrs:{id:"pagination"}},[a("div",{staticClass:"col order-first"},[a("b-pagination",{staticClass:"paginator-ghtk mb-0",attrs:{align:"left",size:"sm","total-rows":t.pagination.total,"per-page":t.pagination.per_page,"first-text":"<<","prev-text":"<","next-text":">","last-text":">>",disabled:!t.countListStaff},on:{input:t.getListEmployee},model:{value:t.pagination.current_page,callback:function(e){t.$set(t.pagination,"current_page",e)},expression:"pagination.current_page"}})],1),t._v(" "),a("div",{staticClass:"col text-center font-14"},[a("label",{staticClass:"font-weight-bold"},[t._v("Đang hiển thị:")]),t._v(" "),a("span",[t._v(t._s(t.countListStaff)+"/"+t._s(t.pagination.total))])]),t._v(" "),a("div",{staticClass:"col action order-last"},[a("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.visit-home-form",modifiers:{"visit-home-form":!0}}],staticClass:"float-right",attrs:{disabled:!t.countListStaff,variant:"ghtk"}},[t._v("+ Thêm thông\n          tin thăm nhà\n        ")])],1)]),t._v(" "),a("CallStaffModal",{attrs:{open:t.showCallModal,user:t.selected_user,options:t.modalOptions},on:{onCloseModal:t.onCloseModal}}),t._v(" "),a("ModalSetRemoteCheckIn",{attrs:{user:t.currentStaff},on:{changeDataRemoteCheckin:t.changeDataRemoteCheckin}}),t._v(" "),a("AddStaffNoteModal",{attrs:{open:t.showNoteModal,user:t.selected_user,options:t.modalOptions,title:"Ghi chú"},on:{onCloseModal:t.onCloseModal}}),t._v(" "),a("ChangeStatusAccountModal",{attrs:{open:t.showChangeSttModal,user:t.selected_user,options:t.modalOptions,"status-change":t.statusChange,"list-account":t.listAccount},on:{onCloseModal:t.onCloseModal}}),t._v(" "),a("ModalChangeLeader",{attrs:{open:t.showChangeLeaderModal,user:t.selected_user,options:t.modalOptions,"list-leader":t.listLeader,authUser:t.authUser},on:{reduceStaffList:t.reduceStaffList,onCloseModal:t.onCloseModal,changeSuccess:t.search}}),t._v(" "),a("modal-edit-evaluation",{attrs:{"loading-modal":t.loadingModal,"user-id":t.userIdChoice,"evaluated-permission-expired":t.evaluatedPermissionExpired,"manager-criteria":t.managerCriteria,"group-id":t.userInfo.ErpUser&&t.userInfo.ErpUser.group_id,criteria:t.criteria,evaluation:t.evaluationModal,isManagement:t.isManagement}}),t._v(" "),a("b-modal",{attrs:{title:"Cập nhật thông tin thăm nhà",titleClass:"w-100 text-center",id:"visit-home-form","hide-footer":"",static:"","modal-class":"modal-xxl"},on:{hidden:function(e){return t.helper.resetData(t.visitHome.info)}}},[a("VisitHomeForm",{attrs:{visitInfo:t.visitHome.info,requiredField:t.visitHome.required,"select-staff":"","update-button":""}})],1)],1):t._e(),t._v(" "),t.isPermission?t._e():a("div",{staticStyle:{"text-align":"center","margin-top":"19%","font-size":"30px","font-weight":"500"}},[a("img",{staticStyle:{width:"242px","margin-bottom":"2rem"},attrs:{src:t.imgInfo,alt:""}}),t._v(" "),a("p",[t._v(t._s(t.messageCheckRole))])]),t._v(" "),a("ModalInfoStaff",{attrs:{user:t.currentStaff,uidComponentStaff:t.uidComponentStaff},on:{onOpenModalStaff:t.onOpenModalStaff}})],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"d-flex",staticStyle:{"align-items":"baseline"}},[e("h4",{staticClass:"m-0 font-weight-bold",staticStyle:{"font-size":"22px !important"}},[this._v("Quản lý nhân viên")])])}],!1,Rh,"data-v-0559d12e",null).exports,$h={name:"tags-detail-row",components:{},props:{infoTags:{type:Object,default:function(){return{}}},dataUpdate:{default:null},subjectIndex:null},watch:{dataUpdate:function(t,e){var a=this.dataUpdate.dataModalOld.departmentIndex,n=this.dataUpdate.dataModalOld.positionIndex,i=this.dataUpdate.dataModalOld.typeIndex,s=this.dataUpdate.dataModalOld.categoryIndex,o=0;(o=this.dataUpdate.tags.length>0?this.dataUpdate.tags[0].category_id:this.dataUpdate.dataModalOld.category.category_id,this.infoTags.departments[a].positions[n])&&(this.infoTags.departments[a].positions[n].category_types[i]&&this.infoTags.departments[a].positions[n].category_types[i].categories[s]&&+this.infoTags.departments[a].positions[n].category_types[i].categories[s].category_id==+o&&(this.infoTags.departments[a].positions[n].category_types[i].categories[s].tags=this.dataUpdate.tags))}},created:function(){},computed:{},mounted:function(){},data:function(t){return{}},methods:{onOpenModal:function(t,e,a){this.$emit("onOpenModal",{nameModal:t,type:e,options:a})}}};var Hh=function(t){a("z76f"),a("/cL2")},Bh=Object(y.a)($h,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tags-row content-row"},[a("div",{staticClass:"subject-name"},[a("div",{on:{click:function(e){return t.onOpenModal("TopicModal","Edit-Topic",t.infoTags)}}},[t._v(t._s(t.infoTags.subject_name))])]),t._v(" "),a("div",{staticClass:"subject-content"},t._l(t.infoTags.departments,function(e,n){return a("div",{staticClass:"department-cus",attrs:{id:n}},[a("div",{staticClass:"department-name"},[a("div",[t._v(t._s(e.department_name))])]),t._v(" "),a("div",{staticClass:"department-content"},t._l(e.positions,function(i,s){return a("div",{staticClass:"positions-cus",attrs:{id:s}},[a("div",{staticClass:"positions-name"},[a("div",[t._v(t._s(i.position_name))])]),t._v(" "),a("div",{staticClass:"positions-content"},t._l(i.category_types,function(o,r){return a("div",{staticClass:"type-cus",attrs:{id:r}},[a("div",{staticClass:"type-name"},[a("div",[t._v(t._s("individual"===o.name?"Cá nhân":"family"===o.name?"Gia đình":"Công việc"))])]),t._v(" "),a("div",{staticClass:"type-content"},t._l(o.categories,function(o,l){return a("div",{staticClass:"category-cus",attrs:{id:l}},[a("div",{staticClass:"category-name"},[a("div",[a("span",[t._v("# "+t._s(o.category_name))])])]),t._v(" "),a("div",{staticClass:"tag-content"},t._l(o.tags,function(e,n){return a("span",{staticClass:"tag-cus",style:"good"===e.tags.type?"background-color: #00904A;":"background-color: #FD0000;",attrs:{id:n}},[t._v("\n                          # "+t._s(e.tags.name)+"\n                        ")])}),0),t._v(" "),a("div",{staticClass:"action-cus"},[a("div",{staticClass:"action-cus-content"},[a("button",{staticClass:"btn btn-sm btn-outline-ghtk btn-pill mb-2 font-unset btn-cus-action",on:{click:function(e){return t.onOpenModal("TagModal","AddTag",{subjectId:t.infoTags.subject_id,departmentIndex:n,positionIndex:s,typeIndex:r,categoryIndex:l,category:o,from:"fromRow"})}}},[t._v("+ Tag")]),t._v(" "),a("button",{staticClass:"btn btn-sm btn-outline-ghtk btn-pill mb-2 font-unset btn-cus-action",staticStyle:{"margin-bottom":"0.4rem !important"},on:{click:function(a){return t.onOpenModal("TopicModal","Edit",{subjectId:t.infoTags.subject_id,subjectName:t.infoTags.subject_name,departmentId:e.department_id,positionId:i.position_id,categories:i.category_types,from:"fromRow"})}}},[t._v("Sửa")])])])])}),0)])}),0)])}),0)])}),0)])},[],!1,Hh,"data-v-08981b2c",null).exports,jh=a("yQFU"),Fh={name:"multi-select-topics",components:{Multiselect:la.a},props:{placeholder:{default:"Chủ đề"},autoClose:{default:!1},hideSelected:{default:!1},disabled:{default:!1},isSearchable:{default:!0},listTopicId:{default:null},addDataTopic:{default:0}},computed:{},created:function(){this.getListOptions()},watch:{option:function(t,e){this.$emit("handleSelectedTopic",t)},listTopicId:function(t,e){this.options&&this.options.length>0&&this.setList()},addDataTopic:function(t,e){t>0&&this.getListOptions()}},mounted:function(){},data:function(t){return{option:null,options:[],isLoading:!1}},methods:{setList:function(){var t=this;this.listTopicId?(this.option=[],this.listTopicId.split(",").forEach(function(e){if(e){var a=t.options.find(function(t){return+t.id==+e});a&&t.option.push(a)}})):this.option=null},getListOptions:function(){var t=l()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.isLoading=!0,t.next=3,jh.a.getListTopics();case 3:e=t.sent;try{e.data.success&&(this.options=e.data.data)}catch(t){console.log(t)}finally{this.isLoading=!1}case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}};var qh=function(t){a("TiAa")},Yh=Object(y.a)(Fh,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Multiselect",{attrs:{loading:t.isLoading,options:t.options,mutilple:!1,searchable:t.isSearchable,placeholder:t.placeholder,label:"name","track-by":"id",selectedLabel:"",deselectLabel:"X",selectLabel:"","close-on-select":t.autoClose,"hide-selected":t.hideSelected,disabled:t.disabled},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy kết quả")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,qh,"data-v-602f6756",null).exports,zh={name:"multi-select-tags",components:{Multiselect:la.a},props:{placeholder:{default:"Tag"},autoClose:{default:!1},hideSelected:{default:!1},disabled:{default:!1},isSearchable:{default:!0},listTagId:{default:null},listPositionId:{default:null}},computed:{},created:function(){this.getListOptions()},watch:{option:function(t,e){this.$emit("handleSelectedTag",t)},listTagId:function(t,e){this.options&&this.options.length>0&&this.setList()},listPositionId:function(t,e){this.params=t,this.option=null,this.getListOptions()}},mounted:function(){},data:function(t){return{option:null,options:[],isLoading:!1,params:null}},methods:{setList:function(){var t=this;this.listTagId?(this.option=[],this.listTagId.split(",").forEach(function(e){if(e){var a=t.options.find(function(t){return+t.id==+e.id});a&&t.option.push(a)}})):this.option=null},getListOptions:function(){var t=l()(o.a.mark(function t(){var e,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={position_id:this.params},this.isLoading=!0,t.next=4,jh.a.getListTags(e);case 4:a=t.sent;try{a.data.success&&(this.options=a.data.data)}catch(t){console.log(t)}finally{this.isLoading=!1}case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}};var Gh=function(t){a("qkO+")},Kh=Object(y.a)(zh,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Multiselect",{attrs:{loading:t.isLoading,options:t.options,mutilple:!1,searchable:t.isSearchable,placeholder:t.placeholder,label:"tag_name","track-by":"tag_id",selectedLabel:"",deselectLabel:"X",selectLabel:"","close-on-select":t.autoClose,"hide-selected":t.hideSelected,disabled:t.disabled},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy kết quả")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,Gh,"data-v-5fb78b72",null).exports;var Vh=function(t){a("kTC2")},Qh={name:"TagModal",components:{checkbox:Object(y.a)({name:"checkbox",components:{},props:{isDisabled:{default:!1},id:{default:null},createdChecked:{default:!1},itemTwoChecked:{default:!1}},created:function(){this.checked=this.createdChecked},data:function(){return{checked:!1}},watch:{itemTwoChecked:function(t,e){this.checked===t&&this.check()}},methods:{check:function(){this.checked=!this.checked,this.$emit("check",this.checked)}}},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"checkbox-custom"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],attrs:{type:"checkbox",id:t.id,disabled:t.isDisabled},domProps:{checked:Array.isArray(t.checked)?t._i(t.checked,null)>-1:t.checked},on:{click:t.check,change:function(e){var a=t.checked,n=e.target,i=!!n.checked;if(Array.isArray(a)){var s=t._i(a,null);n.checked?s<0&&(t.checked=a.concat([null])):s>-1&&(t.checked=a.slice(0,s).concat(a.slice(s+1)))}else t.checked=i}}}),t._v(" "),a("label",{class:t.isDisabled&&"disabled",attrs:{for:t.id}})])])},[],!1,Vh,"data-v-7b850c06",null).exports,CheckboxCustom:pd},props:{open:{default:!1},dataModalTag:{type:Object,default:function(){}},departmentIndex:{default:null},positionIndex:{default:null},typeIndex:{default:null}},data:function(){return{loading:!1,openModal:!1,nameTag:null,isTagGood:!0,isTagBad:!1,listTags:[],tagAdd:[],tagRemove:[],params:{category_id:null,tags_add:[],tags_remove:[]},idRandom:1}},watch:{open:function(t){this.openModal=t,this.listTags=[],this.nameTag=null,this.params.category_id=null,this.params.tags_add=[],this.params.tags_remove=[],this.dataModalTag&&this.setDataModal()}},mounted:function(){},methods:{onShow:function(){},setDataModal:function(){var t=this;this.dataModalTag.category&&(this.params.category_id=this.dataModalTag.category.category_id,this.dataModalTag.category.tags.forEach(function(e){t.listTags.push({category_id:t.dataModalTag.category.category_id||null,category_name:t.dataModalTag.category.category_name||null,tags:{id:e.hasOwnProperty("tags")?e.tags.id:e.id,name:e.hasOwnProperty("tags")?e.tags.name:e.name,type:e.hasOwnProperty("tags")?e.tags.type:e.type}})}))},onClose:function(){this.openModal=!1,this.$emit("onCloseModal","TagModal")},toggleShowItemClose:function(t,e){t="modal_tag_"+t,document.getElementById(t).style.display=e?"inline-block":"none"},deleteTag:function(t,e){this.listTags.splice(e,1),String(t).includes("new")?this.params.tags_add=this.params.tags_add.filter(function(e){return e.id!==t}):this.params.tags_remove.push(t)},onEnter:function(t){t&&this.AddTag()},AddTag:function(){this.listTags.push({category_id:this.dataModalTag.category.category_id||null,category_name:this.dataModalTag.category.category_name||null,tags:{id:"new_"+this.idRandom,name:this.nameTag,type:this.isTagGood?"good":"bad"}}),this.params.tags_add.push({id:"new_"+this.idRandom,name:this.nameTag,type:this.isTagGood?"good":"bad"}),this.idRandom++,this.nameTag=null},onSave:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("fromTopic"!==t.dataModalTag.from){e.next=5;break}t.$emit("updateListTag",i()({listTag:t.listTags},t.dataModalTag)),t.onClose(),e.next=21;break;case 5:if(0!==t.params.tags_add.length||0!==t.params.tags_remove.length){e.next=7;break}return e.abrupt("return",Me.a.showMessage("Vui lòng thêm tag mới","warning"));case 7:return t.loading=!0,e.prev=8,e.next=11,jh.a.changeTagCategories(t.params);case 11:(a=e.sent).data.success?(n=[],a.data.data.tags_added.length>0&&(n=a.data.data.tags_added.map(function(e){return{category_id:t.dataModalTag.category.category_id||null,category_name:t.dataModalTag.category.category_name||null,tags:{id:e.id,name:e.name,type:e.type}}})),t.listTags=[].concat(d()(t.listTags),d()(n)).filter(function(t){return!String(t.tags.id).includes("new")}),t.$emit("updateTagSuccess",{dataModalOld:t.dataModalTag,tags:t.listTags}),Me.a.showMessage(a.data.message,"success"),t.onClose()):Me.a.showMessage(a.data.message,"warning"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),Me.a.showMessage(e.t0.response.data.message,"warning");case 18:return e.prev=18,t.loading=!1,e.finish(18);case 21:case"end":return e.stop()}},e,t,[[8,15,18,21]])}))()}}};var Xh=function(t){a("ahjL"),a("CRSl")},Wh=Object(y.a)(Qh,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{title:"Tạo tag mới","modal-class":"modal-custom","header-class":"text-center justify-content-center d-flex",centered:"",static:"",id:"modal-tag","hide-footer":""},on:{show:function(e){return t.onShow()},hide:function(e){return t.onClose()}},model:{value:t.openModal,callback:function(e){t.openModal=e},expression:"openModal"}},[a("div",{staticClass:"modal-tag"},[a("div",{staticClass:"row mt-2 mx-4"},[a("label",{staticClass:"col-md-2 mt-2 text-left text-black",staticStyle:{"font-size":"14px","font-weight":"600","line-height":"21px"}},[t._v("Thêm tag")]),t._v(" "),a("b-form-input",{staticClass:"col-md-9 rounded",attrs:{placeholder:"Nhập nội dung tag",size:"xs",type:"text"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onEnter(t.nameTag)}},model:{value:t.nameTag,callback:function(e){t.nameTag=e},expression:"nameTag"}}),t._v(" "),a("b-button",{staticClass:"col-md-1 p-0",staticStyle:{"margin-left":"0.5rem"},attrs:{variant:"outline-success",name:"btn-modal-save-tag",id:"btn-modal-save-tag",disabled:!t.nameTag},on:{click:function(e){return t.AddTag()}}},[a("i",{staticClass:"fa fa-save",staticStyle:{margin:"auto"}})])],1),t._v(" "),a("div",{staticClass:"row mt-3 mx-4 checkbox-cus"},[a("label",{staticClass:"col-md-2 mt-2 text-left text-black"}),t._v(" "),a("div",{staticClass:"col-md-4 d-flex p-0"},[a("div",[a("checkbox",{attrs:{"created-checked":!0,"item-two-checked":t.isTagBad,id:"idTagGood"},on:{check:function(e){t.isTagGood=e}}})],1),t._v(" "),a("div",{staticStyle:{"line-height":"21px"}},[t._v("Tag ưu điểm")])]),t._v(" "),a("div",{staticClass:"col-md-6 d-flex p-0"},[a("div",[a("checkbox",{attrs:{"created-checked":!1,"item-two-checked":t.isTagGood,id:"idTagBad"},on:{check:function(e){t.isTagBad=e}}})],1),t._v(" "),a("div",{staticStyle:{"line-height":"21px"}},[t._v("Tag lưu ý")])])]),t._v(" "),a("div",{staticClass:"row mx-4 add-list-tag"},[a("label",{staticClass:"col-md-2 mt-2 text-left text-black"}),t._v(" "),a("div",{staticClass:"col-md-9 p-0",staticStyle:{"font-size":"12px"}},t._l(t.listTags||[],function(e,n){return a("span",{staticClass:"span-tag",style:"bad"===e.tags.type?"background-color:#FD0000 ":"background-color: #00904A;",attrs:{id:n},on:{mouseover:function(a){return t.toggleShowItemClose(e.tags.id,!0)},mouseleave:function(a){return t.toggleShowItemClose(e.tags.id,!1)}}},[t._v("\n          # "+t._s(e.tags.name)+" "),a("span",{staticClass:"close-cus",attrs:{id:"modal_tag_"+e.tags.id},on:{click:function(a){return t.deleteTag(e.tags.id,n)}}},[a("i",{staticClass:"ion ion-md-close",attrs:{"aria-hidden":"true"}})])])}),0)])]),t._v(" "),a("div",{staticClass:"text-center mb-2"},[a("b-btn",{staticClass:"button-deny-modal",attrs:{variant:"ghtk",id:"btn-save-add-note",name:"btn-save-add-note"},on:{click:function(e){return t.onSave()}}},[t._v("Xác nhận")])],1)])},[],!1,Xh,"data-v-5ec4d761",null).exports,Jh={name:"multi-select-position-v2",components:{Multiselect:la.a},props:{departmentIds:{default:null},positionIds:{default:null},autoClose:{default:null},hideSelected:{default:null},placeholder:{default:"Chọn vị trí"},disabled:{default:!1},listPosition:{},departmentId:{},triggerDuplicateChange:{default:!1},isMultiple:{default:!0}},data:function(){return{option:null,options:[],triggerDuplicate:!1,cachePositionKey:"allPositionForTag"}},created:function(){this.getList(this.departmentIds)},watch:{option:function(t,e){this.$emit("handlePositionSelected",t)},departmentIds:function(t,e){this.getList(t)},listPosition:{immediate:!0,handler:function(t,e){this.getList(),this.option=null}},departmentId:{immediate:!0,handler:function(t,e){this.getList()}},triggerDuplicateChange:function(t,e){this.triggerDuplicate=t},positionIds:function(t,e){this.triggerDuplicate||this.options&&this.options.length>0&&this.setList()}},methods:{upTriger:function(){this.triggerDuplicateChange=!1},reset:function(){this.option=null},setList:function(){var t=this;this.positionIds&&this.positionIds.length>0?(this.option=[],this.positionIds.split(",").forEach(function(e){if(e){var a=t.options.find(function(t){return+t.id==+e});a&&t.option.push(a)}})):this.option=null},getList:function(t){var e=this;if(!t&&sessionStorage.getItem(this.cachePositionKey))return this.options=JSON.parse(sessionStorage.getItem(this.cachePositionKey)),this.listPosition&&this.setListOption(this.listPosition),this.departmentId&&this.setListOptionByDepartmentId(this.departmentId),void this.setList();var a=t?t.split(","):[];jh.a.getAllPositionByDepartmentIds({department_ids:a}).then(function(a){if(a.data.success){var n=a.data.data.map(function(t){return{id:t.id,name:t.name,$isDisabled:t.is_disabled}});e.options=n,e.triggerDuplicate=!1,e.$emit("handleTriggerDuplicateChange",!1),e.setList(),t||sessionStorage.setItem(e.cachePositionKey,sa()(e.options)),e.listPosition&&e.setListOption(e.listPosition),e.departmentId&&e.setListOptionByDepartmentId(e.departmentId)}}).catch(function(t){console.log(t)})},setListOption:function(t){this.options=this.options.filter(function(e){return!!t.includes(parseInt(e.id))||(!!t.includes(e.id)||void 0)})},setListOptionByDepartmentId:function(t){this.options=this.options.filter(function(e){if(parseInt(t)===parseInt(e.department_id))return!0}),this.setList()},setListOptionSyllarbus:function(){this.options=this.options.filter(function(t){if(1!==parseInt(t.department_id))return!0}),this.setList()}}},Zh=Object(y.a)(Jh,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{attrs:{options:t.options,multiple:t.isMultiple,placeholder:t.placeholder,label:"name","track-by":"id",selectedLabel:"",deselectLabel:"X",selectLabel:"","close-on-select":t.autoClose,"hide-selected":t.hideSelected,disabled:t.disabled},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,null,null,null).exports,tp=[{id:1,name:"Cá nhân",type:"individual"},{id:2,name:"Gia đình",type:"family"},{id:3,name:"Công việc",type:"work"}],ep={ADD:"Add",EDIT_ALL:"Edit",EDIT_TOPIC:"Edit-Topic"},ap={name:"TopicModal",computed:{modalType:function(){return ep}},components:{MultiSelectDepartment:_e.a,MultiSelectPositionV2:Zh},props:{open:{default:!1},typeModal:{default:ep.ADD},dataModal:{default:null},dataUpdateTopic:{default:null},funcCallback:null},data:function(t){return{loading:!1,openModal:!1,category:"",typeCheckbox:1,subjectId:null,departmentIds:null,positionIds:null,optionsType:[{id:1,name:"Cá nhân",type:"individual"},{id:2,name:"Gia đình",type:"family"},{id:3,name:"Công việc",type:"work"}],params:{subject_id:null,subject_name:null,position_ids:[],categories:[]},categoryType:{family:[],individual:[],work:[]},list_category_choice:[],showTagModal:!1,idIndividualRandom:1,idFamilyRandom:1,idWorkRandom:1,listTagBefore:{family:[],individual:[],work:[]},isLoading:!1}},created:function(){this.list_category_choice=this.categoryType.individual},watch:{open:function(t){switch(this.openModal=t,this.typeModal){case ep.EDIT_ALL:this.dataModal&&(this.optionsType=tp,this.setDataModalTopic());break;case ep.EDIT_TOPIC:this.dataModal&&(this.optionsType=tp,this.setDataUpdate());break;default:this.resetDataModal()}},typeCheckbox:function(t,e){1==+this.typeCheckbox?this.list_category_choice=this.categoryType.individual:2==+this.typeCheckbox?this.list_category_choice=this.categoryType.family:this.list_category_choice=this.categoryType.work},dataUpdateTopic:function(t,e){var a=this.dataUpdateTopic.indexCategory,n=this.dataUpdateTopic.listTag.map(function(t){return t.tags});1==+this.dataUpdateTopic.type?this.categoryType.individual[a].tags=n:2==+this.dataUpdateTopic.type?this.categoryType.family[a].tags=n:this.categoryType.work[a].tags=n}},methods:{onShow:function(){},toggleShowItemClose:function(t,e){t="modal_topic_"+t,document.getElementById(t).style.display=e?"inline-block":"none"},deleteTag:function(t,e,a){this.list_category_choice[t].tags.splice(e,1)},resetDataModal:function(){this.params.subject_name=null,this.params.subject_id=null,this.departmentIds=null,this.subjectId=null,this.positionIds=null,this.typeCheckbox=1,this.params.categories=[],this.categoryType.family=[],this.categoryType.individual=[],this.categoryType.work=[],this.list_category_choice=this.categoryType.individual,this.optionsType=tp},setDataModalTopic:function(){var t=this;this.resetDataModal(),this.params.subject_id=this.dataModal.subjectId,this.params.subject_name=this.dataModal.subjectName,this.departmentIds=String(this.dataModal.departmentId),this.subjectId=this.dataModal.subjectId,this.positionIds=String(this.dataModal.positionId),this.optionsType=tp,this.dataModal.categories.forEach(function(e){e.categories.forEach(function(a){var n=a.tags.map(function(t){return{id:t.tags.id,name:t.tags.name,type:t.tags.type}});t.categoryType[e.name].push({category_id:a.category_id,name:a.category_name,tags:n,tags_before:n.map(function(t){return t.id}),type:e.name})})}),this.typeCheckbox=1,this.list_category_choice=this.categoryType.individual},setDataUpdate:function(){this.resetDataModal(),this.params.subject_name=this.dataModal.subject_name,this.params.subject_id=this.dataModal.subject_id},onClose:function(){this.openModal=!1,this.$emit("onCloseModal","TopicModal")},onSave:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.typeModal!==ep.EDIT_ALL){e.next=2;break}return e.abrupt("return",t.EditTopicAndTag());case 2:return e.abrupt("return",t.AddTopicAndTag());case 3:case"end":return e.stop()}},e,t)}))()},AddTopicAndTag:function(){var t=this;return l()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.validateAndConvertData()){e.next=2;break}return e.abrupt("return",!1);case 2:return t.typeModal===ep.ADD&&(t.params.subject_id=null),e.prev=3,t.isLoading=!0,e.next=7,jh.a.ApiAddTopicAndTag(t.params);case 7:(a=e.sent).data.success?(Me.a.showMessage("Thành công","success"),t.typeModal===ep.ADD?t.$emit("AddTopicAndTagSuccess"):t.$emit("updateCategorySuccess",{subjectId:t.params.subject_id}),t.onClose()):Me.a.showMessage(a.data.message,"warning"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),Me.a.showMessage(e.t0.response.data.message,"warning");case 14:return e.prev=14,t.isLoading=!1,e.finish(14);case 17:case"end":return e.stop()}},e,t,[[3,11,14,17]])}))()},EditTopicAndTag:function(){var t=this;return l()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.validateDataEdit()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,t.isLoading=!0,e.next=6,jh.a.ApiUpdateTopicAndTag(t.params);case 6:(a=e.sent).data.success?(Me.a.showMessage("Cập nhật chủ đề và tag thành công","success"),t.$emit("updateCategorySuccess",{subjectId:t.dataModal.subjectId}),t.onClose()):Me.a.showMessage(a.data.message,"warning"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),Me.a.showMessage(e.t0.response.data.message,"warning");case 13:return e.prev=13,t.isLoading=!1,e.finish(13);case 16:case"end":return e.stop()}},e,t,[[2,10,13,16]])}))()},resetData:function(t){"name"===t&&(this.params.subject_name=null),"department"===t&&(this.departmentIds=null),"position"===t&&(this.positionIds=null,this.$refs.reset.setList())},validateAndConvertData:function(){if(this.typeModal===ep.EDIT_TOPIC&&!this.params.subject_id)return Me.a.showMessage("Không xác định được id chủ đề","warning"),!1;if(null===this.params.subject_name||""===this.params.subject_name)return Me.a.showMessage("Thiếu tên chủ đề","warning"),!1;if(null===this.departmentIds||""===this.departmentIds)return Me.a.showMessage("Thiếu bộ phận","warning"),!1;if(0===this.params.position_ids.length)return Me.a.showMessage("Thiếu vị trí","warning"),!1;var t=0,e=[].concat(d()(this.categoryType.individual),d()(this.categoryType.work),d()(this.categoryType.family)),a=[];if(e.length>0){for(var n=0;n<e.length;n++){var i=e[n];if(null==i.name||0===i.tags.length){var s="work"===i.type?"công việc":"family"===i.type?"gia đình":"cá nhân";Me.a.showMessage("Vui lòng điền đầy đủ các trường ở loại "+s),t=1;break}a.push({name:i.name,type:i.type,tags:i.tags.map(function(t){return{name:t.name,type:t.type}})})}this.params.categories=a}else this.params.categories=[];return 1!==t&&(0!==this.params.categories.length||(Me.a.showMessage("Thiếu danh mục","warning"),!1))},handleDepartmentSelected:function(t){null!==t&&(Array.isArray(t)||(t=[t])),this.departmentIds=t?t.map(function(t){return t.id}).toString():""},handlePositionSelected:function(t){null!==t&&(Array.isArray(t)||(t=[t])),this.params.position_ids=t?t.map(function(t){return t.id}):[]},AddTopic:function(){1==+this.typeCheckbox?(this.categoryType.individual.push({category_id:"individual_"+this.idIndividualRandom,name:null,type:"individual",tags:[]}),this.idIndividualRandom++):2==+this.typeCheckbox?(this.categoryType.family.push({category_id:"family_"+this.idFamilyRandom,name:null,type:"family",tags:[]}),this.idFamilyRandom++):(this.categoryType.work.push({category_id:"work_"+this.idWorkRandom,name:null,type:"work",tags:[]}),this.idWorkRandom++)},deleteCategory:function(t,e,a,n){if(this.typeModal===ep.EDIT_ALL&&"number"==typeof a){if(!this.departmentIds)return Me.a.showMessage("Thiếu bộ phận");if(!this.positionIds)return Me.a.showMessage("Thiếu vị trí");if(!this.subjectId)return Me.a.showMessage("Thiếu id chủ đề");this.$emit("openModalConfirm",{nameModal:"ConfirmModal",type:"Confirm",options:{idCategory:a,categoryName:n,subjectId:this.subjectId}})}else 1==+this.typeCheckbox?this.categoryType.individual.splice(t,1):2==+this.typeCheckbox?this.categoryType.family.splice(t,1):this.categoryType.work.splice(t,1)},openTagModal:function(t,e,a){this.$emit("openAddTag",{nameModal:t,type:e,options:a})},validateDataEdit:function(){if(!this.params.subject_id)return Me.a.showMessage("Không xác định được id chủ đề","warning"),!1;if(null===this.params.subject_name||""===this.params.subject_name)return Me.a.showMessage("Thiếu tên chủ đề","warning"),!1;if(0===this.params.position_ids.length)return Me.a.showMessage("Thiếu vị trí","warning"),!1;this.params.position_id=this.params.position_ids[0];var t=0,e=[].concat(d()(this.categoryType.individual),d()(this.categoryType.work),d()(this.categoryType.family)),a=[];if(e.length>0){for(var n=0;n<e.length;n++){var i=e[n];if(null==i.name||0===i.tags.length){var s="work"===i.type?"công việc":"family"===i.type?"gia đình":"cá nhân";Me.a.showMessage("Vui lòng điền đầy đủ các trường ở loại "+s),t=1;break}var o="number"==typeof i.category_id?i.category_id:null,r=[],l=[];if(o){var c=this.convertDataTag(i.tags,i.tags_before);r=c.tags_add,l=c.tags_remove}else r=i.tags.map(function(t){return{name:t.name,type:t.type}});a.push({id:o,name:i.name,type:i.type,tags_add:r,tags_remove:l})}this.params.categories=a}else this.params.categories=[];return 1!==t&&(0!==this.params.categories.length||(Me.a.showMessage("Thiếu danh mục","warning"),!1))},convertDataTag:function(t,e){var a={tags_add:[],tags_remove:[]},n=t.map(function(t){return t.id});return t.forEach(function(t){e.includes(t.id)||String(t.id).includes("new")&&a.tags_add.push({name:t.name,type:t.type})}),a.tags_remove=e.filter(function(t){return!n.includes(t)}),a}}};var np=function(t){a("ymRw"),a("mxZO")},ip=Object(y.a)(ap,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"modal-lg",attrs:{title:t.typeModal===t.modalType.ADD?"Thêm chủ đề và tag":t.typeModal===t.modalType.EDIT_ALL?"Sửa danh mục và tag":"Sửa chủ đề","modal-class":"modal-custom","header-class":"text-center justify-content-center d-flex",centered:"",static:"",id:"modal-topic","hide-footer":""},on:{show:function(e){return t.onShow()},hide:function(e){return t.onClose()}},model:{value:t.openModal,callback:function(e){t.openModal=e},expression:"openModal"}},[a("div",{staticClass:"modal-topic"},[a("div",{staticClass:"topic-cus row mt-2 mx-4 div-reset"},[a("label",{staticClass:"col-md-2 mt-2 text-left pl-0 text-black"},[t._v("Chủ đề"),a("span",{staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("b-form-input",{staticClass:"rounded col-md-10",attrs:{placeholder:"Nhập nội dung chủ đề",disabled:t.typeModal===t.modalType.EDIT_TOPIC,size:"xs",type:"text"},model:{value:t.params.subject_name,callback:function(e){t.$set(t.params,"subject_name",e)},expression:"params.subject_name"}}),t._v(" "),t.params.subject_name?a("span",{staticClass:"span-reset",on:{click:function(e){return t.resetData("name")}}},[a("i",{staticClass:"ion ion-md-close"})]):t._e()],1),t._v(" "),a("div",{staticClass:"topic-cus row mt-2 mx-4",class:t.departmentIds?"div-reset":""},[a("label",{staticClass:"col-md-2 mt-2 text-left pl-0 text-black"},[t._v("\n        Bộ phận\n        "),a("span",{staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("multi-select-department",{attrs:{"custom-class":t.typeModal===t.modalType.EDIT_ALL?"col-md-10 p-0 multiselect-ghtk multiselect-no-horizontal cus-x":"col-md-10 p-0 multiselect-ghtk multiselect-no-horizontal","auto-close":!0,"is-multiple":!0,placeholder:"Chọn bộ phận",disabled:t.typeModal===t.modalType.EDIT_ALL,"department-ids":t.departmentIds},on:{handleDepartmentSelected:t.handleDepartmentSelected}}),t._v(" "),t.typeModal!==t.modalType.EDIT_ALL&&t.departmentIds?a("span",{staticClass:"span-reset",on:{click:function(e){return t.resetData("department")}}},[a("i",{staticClass:"ion ion-md-close"})]):t._e()],1),t._v(" "),a("div",{staticClass:"topic-cus row mt-2 mx-4",class:t.params.position_ids.length>0?"div-reset":""},[a("label",{staticClass:"col-md-2 mt-2 text-left pl-0 text-black"},[t._v("\n        Vị trí\n        "),a("span",{staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("multi-select-position-v2",{ref:"reset",class:t.typeModal===t.modalType.EDIT_ALL?"col-md-10 p-0 multiselect-ghtk multiselect-no-horizontal cus-x":"col-md-10 p-0 multiselect-ghtk multiselect-no-horizontal",attrs:{"is-multiple":!0,"position-ids":t.positionIds,"department-ids":t.departmentIds,"auto-close":!0,"hide-selected":!0,disabled:t.typeModal===t.modalType.EDIT_ALL||!t.departmentIds,placeholder:t.departmentIds?"Chọn vị trí":"Vui lòng chọn bộ phận trước khi chọn vị trí"},on:{handlePositionSelected:t.handlePositionSelected}}),t._v(" "),t.typeModal!==t.modalType.EDIT_ALL&&t.params.position_ids.length>0?a("span",{staticClass:"span-reset",on:{click:function(e){return t.resetData("position")}}},[a("i",{staticClass:"ion ion-md-close"})]):t._e()],1),t._v(" "),a("div",{staticClass:"topic-cus row mt-2 mx-4"},[a("label",{staticClass:"col-md-2 mt-2 text-left pl-0 text-black"},[t._v("\n        Loại\n        "),a("span",{staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("b-form-radio-group",{staticClass:"col-md-10 p-0 mt-2 radio-cus",attrs:{options:t.optionsType,"value-field":"id","text-field":"name","disabled-field":"notEnabled"},model:{value:t.typeCheckbox,callback:function(e){t.typeCheckbox=e},expression:"typeCheckbox"}})],1),t._v(" "),a("div",{staticClass:"topic-cus row mt-2 mx-4"},[a("label",{staticClass:"col-md-2 mt-2 text-left pl-0 pt-3 text-black"},[t._v("\n        Danh mục\n        "),a("span",{staticClass:"text-danger ml-1"},[t._v("*")])]),t._v(" "),a("div",{staticClass:"col-md-10 p-0 mt-2",class:t.list_category_choice.length>4?"cus-scroll":""},[t._l(t.list_category_choice,function(e,n){return a("div",{key:n,staticClass:"d-flex mb-2"},[a("div",{staticClass:"col-md-11 p-0 justify-content-between"},[a("div",{staticClass:"p-0",class:e.tags.length>0?"input-category-cus":"input-category"},[a("b-form-input",{staticClass:"rounded",attrs:{placeholder:"Nhập danh mục",size:"xs",type:"text"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"c.name"}}),t._v(" "),a("div",{staticClass:"add-list-tag"},[t._l(e.tags||[],function(e,i){return a("span",{staticClass:"span-tag",style:"bad"===e.type?"background-color:#FD0000 ":"background-color: #00904A;",attrs:{id:i},on:{mouseover:function(a){return t.toggleShowItemClose(e.id,!0)},mouseleave:function(a){return t.toggleShowItemClose(e.id,!1)}}},[a("span",{staticClass:"close-cus",attrs:{id:"modal_topic_"+e.id},on:{click:function(e){return t.deleteTag(n,i)}}},[a("i",{staticClass:"ion ion-md-close",attrs:{"aria-hidden":"true"}})]),t._v("\n                  # "+t._s(e.name))])}),t._v(" "),a("span",{staticClass:"span-add",on:{click:function(a){return t.openTagModal("TagModal","AddTag",{category:e,from:"fromTopic",type:t.typeCheckbox,indexCategory:n})}}},[a("i",{staticClass:"ion ion-ios-add"}),t._v("Tag")])],2)],1)]),t._v(" "),a("div",{staticClass:"p-0 cusIcon-trash",staticStyle:{position:"relative"}},[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(a){return t.deleteCategory(n,t.typeModal,e.category_id,e.name)}}},[a("svg",{staticClass:"cus-svg",attrs:{width:"18",height:"22",viewBox:"0 0 18 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M1.52386 6.54961V19.2436C1.52386 19.9939 1.79898 20.6985 2.27958 21.204C2.75797 21.711 3.42374 21.9988 4.12049 22H13.8686C14.5656 21.9988 15.2313 21.711 15.7095 21.204C16.1901 20.6985 16.4653 19.9939 16.4653 19.2436V6.54961C17.4206 6.29603 18.0397 5.37306 17.9119 4.39273C17.7839 3.4126 16.9489 2.67942 15.9603 2.67922H13.3224V2.03519C13.3254 1.4936 13.1113 0.973553 12.7279 0.590962C12.3445 0.208571 11.8236 -0.00435998 11.2821 6.76958e-05H6.70706C6.16547 -0.00435998 5.64462 0.208571 5.26122 0.590962C4.87783 0.973553 4.66369 1.4936 4.66671 2.03519V2.67922H2.02881C1.04023 2.67942 0.205215 3.4126 0.0772145 4.39273C-0.0505843 5.37306 0.568486 6.29603 1.52386 6.54961ZM13.8686 20.9696H4.12049C3.23958 20.9696 2.5543 20.2128 2.5543 19.2436V6.59489H15.4348V19.2436C15.4348 20.2128 14.7495 20.9696 13.8686 20.9696ZM5.69715 2.03519C5.69373 1.76691 5.79918 1.5087 5.98957 1.31931C6.17976 1.12993 6.43858 1.02588 6.70706 1.03051H11.2821C11.5505 1.02588 11.8094 1.12993 11.9995 1.31931C12.1899 1.5085 12.2954 1.76691 12.292 2.03519V2.67922H5.69715V2.03519ZM2.02881 3.70966H15.9603C16.4725 3.70966 16.8877 4.12485 16.8877 4.63705C16.8877 5.14926 16.4725 5.56445 15.9603 5.56445H2.02881C1.51661 5.56445 1.10142 5.14926 1.10142 4.63705C1.10142 4.12485 1.51661 3.70966 2.02881 3.70966Z",fill:"#EA0505","fill-opacity":"0.8"}})]),t._v(" "),a("span",{staticClass:"vector-cus"},[t._v("|||")])])])])}),t._v(" "),a("div",{staticClass:"d-flex"},[a("div",{staticClass:"col-md-11 p-0 justify-content-between"},[a("button",{staticClass:"btn btn-outline-ghtk rounded btn-sm btn-add-category",on:{click:function(e){return t.AddTopic()}}},[a("span",{},[a("i",{staticClass:"ion ion-ios-add"}),t._v(" Danh mục")])])]),t._v(" "),a("div",{staticClass:"p-0 cusIcon-trash"},[a("i",{staticClass:"fas fa-times-circle i-trash",staticStyle:{color:"#ffffff !important"}})])])],2)])]),t._v(" "),a("div",{staticClass:"text-center mb-2"},[a("b-btn",{staticClass:"button-deny-modal btn-save",attrs:{variant:"ghtk",disabled:t.isLoading,id:"btn-save-add-note",name:"btn-save-add-note"},on:{click:function(e){return t.onSave()}}},[t._v("Xác nhận")])],1)])},[],!1,np,"data-v-14d8fb70",null).exports,sp={name:"ConfirmModal",props:{open:{default:!1},dataModal:{default:null}},data:function(){return{loading:!1,openModal:!1,category:{}}},watch:{open:function(t){this.openModal=t,this.category=this.dataModal}},methods:{onShow:function(){},onClose:function(){this.openModal=!1,this.$emit("onCloseModal","ConfirmModal")},onSave:function(){var t=this;return l()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.category.idCategory){e.next=2;break}return e.abrupt("return",Me.a.showMessage("Thiếu category Id"));case 2:return e.prev=2,t.loading=!0,e.next=6,jh.a.ApiDeleteCategory({category_id:t.category.idCategory});case 6:(a=e.sent).data.success?(t.$emit("updateCategorySuccess",{subjectId:t.category.subjectId}),Me.a.showMessage("Xoá danh mục thành công","success")):Me.a.showMessage(a.data.message,"warning"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),Me.a.showMessage(e.t0.message,"error");case 13:return e.prev=13,t.loading=!1,e.finish(13);case 16:case"end":return e.stop()}},e,t,[[2,10,13,16]])}))()}}};var op=function(t){a("D56I"),a("5/cN")},rp=Object(y.a)(sp,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{title:"Xoá danh mục","modal-class":"modal-custom","header-class":"text-center justify-content-center d-flex",centered:"",static:"",id:"modal-confirm","hide-footer":""},on:{show:function(e){return t.onShow()},hide:function(e){return t.onClose()}},model:{value:t.openModal,callback:function(e){t.openModal=e},expression:"openModal"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"modal-confirm"},[a("div",{staticStyle:{"text-align":"center"}},[a("p",{staticClass:"mb-0"},[t._v("Bạn có chắc chắn muốn Xoá Danh Mục")]),t._v(" "),a("p",{staticClass:"mb-0"},[t._v(t._s(this.category.categoryName)+" không ?")])])]),t._v(" "),a("div",{staticClass:"text-center mb-2"},[a("b-btn",{staticClass:"button-deny-modal",attrs:{variant:"ghtk",id:"btn-save-add-note",name:"btn-save-add-note"},on:{click:function(e){return t.onSave()}}},[t._v("Xác nhận")])],1)])},[],!1,op,"data-v-017f0420",null).exports,lp={name:"tag-management",components:{Multiselect:la.a,TagsDetailRow:Bh,MultiSelectPosition:be.a,MultiSelectDepartment:_e.a,MultiSelectTopics:Yh,MultiSelectTags:Kh,TagModal:Wh,TopicModal:ip,ConfirmModal:rp},props:{scrollMode:{type:Boolean},blankMode:{type:Boolean}},data:function(t){return{loading:{listTopics:!1},status:null,listTopicOptions:[],listTagOptions:[],permissionHr:!1,permissionVh:!1,permissionIt:!1,showConfirmModal:!1,list_data:[],filter:{topics:[],department_ids:[],positions:[],tags:[]},page:1,total_page:0,per_page:2,listTopicId:"",listTagId:"",param:{topicId:null,department_ids:null,positions:null,tagId:null},attachPermission:!0,modalOptions:null,showTopicModal:!1,showTagModal:!1,listTag:[],typeModal:"Add",dataModalTopic:null,fCallBack:null,dataModalTag:null,dataCategory:null,dataUpdateTopic:null,dataModalConfirm:null,dataTopicSuccess:0}},created:function(){this.getDataTopics()},computed:i()({helper:function(){return Me.a},loading_data:function(){return this.loading.listTopics}},Object(_.c)({permissions:"education/getPermissions"})),watch:{page:function(t,e){this.getDataTopics()}},methods:i()({},Object(_.b)({setPermissions:"education/setPermissions"}),{handleSelectedTopic:function(t){null!==t?(Array.isArray(t)||(t=[t]),this.param.topicId=t?t.map(function(t){return t.id}).toString():""):this.param.topicId=""},handleSelectedTag:function(t){null!==t?(Array.isArray(t)||(t=[t]),this.param.tagId=t?t.map(function(t){return t.tag_id}).toString():""):this.param.tagId=""},search:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:1!==t.page?t.page=1:t.getDataTopics();case 1:case"end":return e.stop()}},e,t)}))()},handleDepartmentSelected:function(t){null!==t&&(Array.isArray(t)||(t=[t])),this.param.department_ids=t?t.map(function(t){return t.id}).toString():""},handlePositionSelected:function(t){null!==t&&(Array.isArray(t)||(t=[t])),this.param.positions=t?t.map(function(t){return t.id}).toString():""},getDataTopics:function(t){var e=this;return l()(o.a.mark(function a(){var n,i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e.loading.listTopics=!0,n={subject_id:e.param.topicId,department_id:e.param.department_ids,position_id:e.param.positions,tag_id:e.param.tagId,page:e.page},t&&(n.subject_id=t.subjectId),a.next=6,jh.a.getDataTopics(n);case 6:if(!(i=a.sent).data.success){a.next=17;break}if(e.list_data=i.data.data.data,e.total_page=Number(i.data.data.total)||0,!t&&!e.param.topicId){a.next=15;break}return a.next=13,e.$refs.resetListTopic.getListOptions();case 13:e.listTopicId=t?String(t.subjectId):String(e.param.topicId),e.$refs.resetListTopic.setList();case 15:a.next=18;break;case 17:Me.a.showMessage(i.data.message,"warning");case 18:a.next=23;break;case 20:a.prev=20,a.t0=a.catch(0),Me.a.showMessage(a.t0.response.data.message,"warning");case 23:return a.prev=23,e.loading.listTopics=!1,a.finish(23);case 26:case"end":return a.stop()}},a,e,[[0,20,23,26]])}))()},AddTopicAndTagSuccess:function(){this.dataTopicSuccess++,this.changeParams(),1!==this.page?this.page=1:this.getDataTopics()},updateTagSuccess:function(t){this.dataCategory=t},updateListTag:function(t){this.dataUpdateTopic=t},UpdateCategorySuccess:function(t){var e=this;return l()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.subjectId&&(1!==e.page?(e.param.topicId=t.subjectId,e.page=1):e.getDataTopics(t),e.showConfirmModal=!1,e.showTopicModal=!1);case 1:case"end":return a.stop()}},a,e)}))()},changeParams:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.param.topicId=t||null,this.param.department_ids=e||null,this.param.positions=a||null,this.param.tag_id=n||null},onOpenModal:function(t){var e=t.nameModal,a=t.type,n=t.options;switch("AddTag"===a?this.dataModalTag=n:"Confirm"===a?this.dataModalConfirm=n:(this.dataModalTopic=n,this.typeModal=a),e){case"TopicModal":this.showTopicModal=!0;break;case"TagModal":this.showTagModal=!0;break;case"ConfirmModal":this.showConfirmModal=!0}},onCloseModal:function(t){switch(t){case"TopicModal":this.showTopicModal=!1;break;case"TagModal":this.showTagModal=!1;break;case"ConfirmModal":this.showConfirmModal=!1}}})};var cp=function(t){a("OEkN"),a("6aA6"),a("0Np3")},dp=Object(y.a)(lp,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-none d-md-block main-content"},[a("div",{staticClass:"mx-0 my-2 row"},[a("div",{staticClass:"col-6 input-filter header-padding text-center-y"},[a("div",{staticClass:"d-flex w-100 manage-cus"},[a("div",{staticClass:"employee-cus",staticStyle:{"align-items":"baseline"}},[a("div",{staticClass:"m-0 font-weight-bold"},[a("router-link",{staticClass:"link action-toggle--not-active",attrs:{to:"/staff-work/staff-management"}},[t._v("\n              Quản lý nhân viên\n            ")])],1)]),t._v(" "),t._m(0)])]),t._v(" "),a("div",{staticClass:"col-6 text-right tab-class-action"},[a("div",{staticClass:"px-1 d-inline-block cusBtn"},[a("b-btn",{staticClass:"rounded pd-5 w-100",attrs:{variant:"outline-cus"},on:{click:function(e){return t.onOpenModal({nameModal:"TopicModal",type:"Add",options:{}})}}},[a("span",[a("i",{staticClass:"ion ion-ios-add mr-2"}),t._v("Chủ đề")])])],1)])]),t._v(" "),a("div",{staticClass:"mx-0 filter pb-1 row z-3",staticStyle:{"margin-top":"0.7rem","margin-bottom":"0.7rem"}},[a("div",{staticClass:"mb-1 input-filter pr-1"},[a("multi-select-topics",{ref:"resetListTopic",staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{"auto-close":!0,disabled:!1,"list-topic-id":t.listTopicId,"add-data-topic":t.dataTopicSuccess},on:{handleSelectedTopic:t.handleSelectedTopic}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter pl-2 pr-1"},[a("multi-select-department",{attrs:{"custom-class":"multiselect-ghtk multiselect-no-horizontal","auto-close":!0,"is-multiple":!1,placeholder:"Bộ phận","department-ids":t.param.department_ids},on:{handleDepartmentSelected:t.handleDepartmentSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter pl-2 pr-1"},[a("MultiSelectPosition",{staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{"is-multiple":!1,"position-ids":t.param.positions,"department-ids":t.param.department_ids,"auto-close":!0,"hide-selected":!0,placeholder:"Vị trí"},on:{handlePositionSelected:t.handlePositionSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter pl-2 pr-2"},[a("multi-select-tags",{staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{"auto-close":!0,disabled:!1,"list-position-id":t.param.positions,"list-tag-id":t.listTagId},on:{handleSelectedTag:t.handleSelectedTag}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter pr-3 pl-1"},[a("b-btn",{staticClass:"filter-containter__btn-search btn-header-class",attrs:{variant:"ghtk"},on:{click:function(e){return t.search()}}},[t._v(" Tìm kiếm")])],1)]),t._v(" "),a("div",{staticClass:"table-data cusTable mr-3",attrs:{id:"tableTags"}},[t._m(1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading_data,expression:"loading_data"}],staticClass:"position-relative"},[t._l(t.list_data,function(e,n){return[a("TagsDetailRow",{key:n,attrs:{infoTags:e,"subject-index":n,"data-update":t.dataCategory},on:{onOpenModal:t.onOpenModal}})]}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.helper.isEmpty(t.list_data),expression:"helper.isEmpty(list_data)"}]},[a("div",[a("div",{staticClass:"mih-50 d-flex justify-content-center align-items-center"},[a("b",{directives:[{name:"show",rawName:"v-show",value:!t.loading_data,expression:"!loading_data"}]},[t._v("Không có dữ liệu phù hợp !")])])])])],2)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.helper.isEmpty(t.list_data),expression:"!helper.isEmpty(list_data)"}],staticClass:"row mt-3 align-items-center"},[a("div",{staticClass:"col col-md-9 text-left"},[a("div",{staticClass:"z-0 d-inline-block"},[a("b-pagination",{staticClass:"paginator-ghtk mb-0",attrs:{size:"sm",align:"left","total-rows":+t.total_page,"per-page":+t.per_page},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)])]),t._v(" "),a("TagModal",{attrs:{open:t.showTagModal,"data-modal-tag":t.dataModalTag},on:{onCloseModal:t.onCloseModal,updateTagSuccess:t.updateTagSuccess,updateListTag:t.updateListTag}}),t._v(" "),a("TopicModal",{attrs:{open:t.showTopicModal,"type-modal":t.typeModal,"data-modal":t.dataModalTopic,"func-callback":t.fCallBack,"data-update-topic":t.dataUpdateTopic},on:{onCloseModal:t.onCloseModal,openAddTag:t.onOpenModal,AddTopicAndTagSuccess:t.AddTopicAndTagSuccess,openModalConfirm:t.onOpenModal,updateCategorySuccess:t.UpdateCategorySuccess}}),t._v(" "),a("ConfirmModal",{attrs:{open:t.showConfirmModal,"data-modal":t.dataModalConfirm},on:{onCloseModal:t.onCloseModal,updateCategorySuccess:t.UpdateCategorySuccess}})],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tag-cus",staticStyle:{"align-items":"baseline"}},[e("div",{staticClass:"m-0"},[this._v("Quản lý Tags")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-left title-table"},[a("div",{staticClass:"w-7 text-black th-cus"},[a("div",{staticStyle:{"margin-left":"auto !important"}},[t._v("Chủ đề")])]),t._v(" "),a("div",{staticClass:"w-7 text-black th-cus"},[a("div",[t._v("Bộ phận")])]),t._v(" "),a("div",{staticClass:"w-7 text-black th-cus"},[a("div",[t._v("Vị trí")])]),t._v(" "),a("div",{staticClass:"w-7 text-black th-cus"},[a("div",[t._v("Loại")])]),t._v(" "),a("div",{staticClass:"w-12 text-black th-cus"},[a("div",[t._v("Danh mục")])]),t._v(" "),a("div",{staticClass:"w-53 text-black th-cus"},[a("div",[t._v("Thông tin tag")])]),t._v(" "),a("div",{staticClass:"w-7 text-black th-cus action-header"},[a("div",{staticStyle:{"margin-left":"auto !important"}},[t._v("Thao tác")])])])}],!1,cp,"data-v-016aea3d",null).exports,up=a("/g5g"),hp=function(t){return Na.a.get("hr-care/get-ticket",{params:t})},pp=function(t){return Na.a.post("hr-care/insert-log",t)},mp=function(){return Na.a.get("hr-care/get-ticket-types")},fp=function(t){return Na.a.post("hr-care/complete-ticket",t)},gp=function(t){return Na.a.get("hr-care/get-logs",{params:t})},vp={name:"multi-select-problem",components:{Multiselect:la.a},props:{customClass:{default:"multiselect-primary"},placeholder:{default:"Loại vấn đề"},limit:{default:5},autoClose:{default:!1},hideSelect:{default:!1},isDisabled:{default:!1}},data:function(){return{problemOption:null,problemOptions:[]}},methods:{handleInput:function(t){this.$emit("handleProblemSelected",t)},getProblemOptions:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,mp();case 3:(a=e.sent).data.success&&(n=ea()(a.data.data),t.problemOptions=n.map(function(t){var e=Ze()(t,2);return{id:e[0],name:e[1]}})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),Me.a.showMessage("Có lỗi khi lấy loại vấn đề!","error","Lỗi");case 11:case"end":return e.stop()}},e,t,[[0,7]])}))()}},created:function(){this.getProblemOptions()}};var _p=function(t){a("pZLP")},bp=Object(y.a)(vp,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{class:t.customClass,attrs:{options:t.problemOptions,multiple:!0,limit:t.limit,placeholder:t.placeholder,label:"name","track-by":"id",selectedLabel:"","deselect-label":"X",selectLabel:"","close-on-select":t.autoClose,"hide-selected":t.hideSelect,disabled:t.isDisabled},on:{input:function(e){return t.handleInput(t.problemOption)}},model:{value:t.problemOption,callback:function(e){t.problemOption=e},expression:"problemOption"}},[a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,_p,"data-v-0ced5104",null).exports,yp={name:"ExplanationModal",props:{title:{type:String,default:"Giải trình"},explanationModalId:{type:String,default:"explanation-modal"},isReadOnly:{type:Boolean,default:!1},ticketInfo:{type:Object}},data:function(){return{form:{awareness:null,reason:null,plan_detail:null,plan_types:[],plan:{options:[{id:"1",name:"Thay đổi địa điểm"},{id:"2",name:"Thay đổi tuyến"},{id:"3",name:"Thay đổi vị trí làm việc"},{id:"4",name:"Cần người đồng hành"},{id:"5",name:"Tham gia lớp đào tạo"},{id:"6",name:"Hướng dẫn thủ tục"},{id:"7",name:"Phương án khác"}]}},awarenessElementId:"awareness",reasonElementId:"reason",planElementId:"plan",inputAwarenessElementId:"input-awareness",inputReasonElementId:"input-reason",inputPlanElementId:"input-plan",messages:{required:"Trường này không được để trống",plan:"Vui lòng chọn ít nhất 1 phương án"}}},created:function(){this.isReadOnly&&(this.form.awareness=this.ticketInfo.staff_opinion?this.ticketInfo.staff_opinion:"",this.form.reason=this.ticketInfo.reason?this.ticketInfo.reason:"",this.form.plan_detail=this.ticketInfo.plan_detail?this.ticketInfo.plan_detail:"",this.form.plan_types=this.ticketInfo.plan_types?We()(this.ticketInfo.plan_types):[]),this.awarenessElementId=Me.a.generateUniqueId(this.awarenessElementId),this.reasonElementId=Me.a.generateUniqueId(this.reasonElementId),this.planElementId=Me.a.generateUniqueId(this.planElementId),this.inputAwarenessElementId=Me.a.generateUniqueId(this.inputAwarenessElementId),this.inputReasonElementId=Me.a.generateUniqueId(this.inputReasonElementId),this.inputPlanElementId=Me.a.generateUniqueId(this.inputPlanElementId)},methods:{validateState:function(t){if(null!==this.form[t]){if(0===this.form[t].length)return this.messages.required="Trường này không được để trống",!1;if(this.form[t].length>500)return this.messages.required="Trường này không được nhập quá 500 ký tự",!1}return null},closeModal:function(){this.$bvModal.hide(this.explanationModalId)},save:function(){if(!this.form.awareness||!this.form.reason||!this.form.plan_types.length>0||!this.form.plan_detail)return this.form.awareness=this.form.awareness?this.form.awareness.trim():"",this.form.reason=this.form.reason?this.form.reason.trim():"",this.form.plan_detail=this.form.plan_detail?this.form.plan_detail.trim():"",void Me.a.showMessage("Vui lòng nhập đầy đủ thông tin","warning","Thông báo");this.form.awareness.length>500||this.form.plan_detail.length>500||this.form.reason.length>500?Me.a.showMessage("Không nhập quá 500 ký tự","warning","Thông báo"):this.completeTicket()},completeTicket:function(){var t=this;return l()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={ticket_id:t.ticketInfo.id,content:t.form.content,staff_opinion:t.form.awareness,reason:t.form.reason,plan_detail:t.form.plan_detail,plan_types:t.form.plan_types},e.prev=1,e.next=4,fp(a);case 4:(n=e.sent).data.success?(Me.a.showMessage("Giải trình thành công","success","Thành công"),t.closeModal(),t.$parent.$parent.$parent.$parent.getTickets()):Me.a.showMessage(n.data.message||"Có lỗi xảy ra khi giải trình!","error","Lỗi"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),Me.a.showMessage(e.t0.response.data.message,"error");case 12:case"end":return e.stop()}},e,t,[[1,8]])}))()}}};var Cp=function(t){a("MFZ1")},wp=Object(y.a)(yp,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{attrs:{id:t.explanationModalId,"modal-class":"modal-custom",size:"lg",centered:"",static:"","hide-footer":"","hide-header":""}},[n("div",{staticClass:"title-explanation-modal"},[n("span",[t._v(t._s(t.title))]),t._v(" "),n("button",{staticClass:"btn-hide-explanation-modal",on:{click:function(e){return t.closeModal()}}},[n("img",{attrs:{src:a("RaU2"),alt:"icon-hide"}})])]),t._v(" "),n("div",{staticClass:"content-explanation-modal"},[n("b-form-group",{attrs:{id:"input-group-awareness",label:"Nhận thức của NLĐ về thực trạng ","label-for":t.awarenessElementId}},[n("span",{attrs:{slot:"label"},slot:"label"},[t._v("Thực trạng "),n("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),n("b-form-input",{attrs:{disabled:t.isReadOnly,id:t.awarenessElementId,name:t.awarenessElementId,"aria-describedby":t.inputAwarenessElementId,state:t.validateState("awareness"),type:"text",placeholder:"Nhập thực trạng của NLĐ"},model:{value:t.form.awareness,callback:function(e){t.$set(t.form,"awareness",e)},expression:"form.awareness"}}),t._v(" "),n("b-form-invalid-feedback",{staticClass:"invalid-text",attrs:{id:t.inputAwarenessElementId}},[t._v("\n          "+t._s(t.messages.required)+"\n        ")])],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-reason",label:"Nguyên nhân ","label-for":t.reasonElementId}},[n("span",{attrs:{slot:"label"},slot:"label"},[t._v("Nguyên nhân "),n("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),n("b-form-input",{attrs:{disabled:t.isReadOnly,id:t.reasonElementId,name:t.reasonElementId,"aria-describedby":t.inputReasonElementId,state:t.validateState("reason"),type:"text",placeholder:"Nhập nguyên nhân"},model:{value:t.form.reason,callback:function(e){t.$set(t.form,"reason",e)},expression:"form.reason"}}),t._v(" "),n("b-form-invalid-feedback",{staticClass:"invalid-text",attrs:{id:t.inputReasonElementId}},[t._v("\n          "+t._s(t.messages.required)+"\n        ")])],1),t._v(" "),n("b-form-group",{attrs:{id:"input-group-plan",label:"Phương án ","label-for":t.planElementId}},[n("span",{attrs:{slot:"label"},slot:"label"},[t._v("Phương án "),n("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),t._l(t.form.plan.options,function(e){return n("div",{staticClass:"input-plan-checkbox"},[n("b-form-checkbox",{staticClass:"button-checkbox",attrs:{disabled:t.isReadOnly,value:e.id,name:"check-button",button:"","button-variant":"checkbox-outline-ghtk"},model:{value:t.form.plan_types,callback:function(e){t.$set(t.form,"plan_types",e)},expression:"form.plan_types"}},[t._v("\n            "+t._s(e.name)+"\n          ")])],1)}),t._v(" "),n("b-form-input",{attrs:{disabled:t.isReadOnly,id:t.planElementId,name:t.planElementId,"aria-describedby":t.inputPlanElementId,state:t.validateState("plan_detail"),type:"text",placeholder:"Chi tiết"},model:{value:t.form.plan_detail,callback:function(e){t.$set(t.form,"plan_detail",e)},expression:"form.plan_detail"}}),t._v(" "),n("b-form-invalid-feedback",{staticClass:"invalid-text",attrs:{id:t.inputPlanElementId}},[t._v("\n          "+t._s(t.messages.required)+"\n        ")])],2),t._v(" "),t.isReadOnly?n("div",{staticClass:"text-complete-by mb-1"},[n("i",[t._v(t._s(t.ticketInfo.log))])]):t._e()],1),t._v(" "),t.isReadOnly?t._e():n("div",{staticClass:"text-center mt-2 mb-2"},[n("b-btn",{staticClass:"btn button-close-explanation-modal",attrs:{variant:"ghtk"},on:{click:function(e){return t.save()}}},[t._v("\n        Xác nhận\n      ")])],1)])},[],!1,Cp,"data-v-6c81ce50",null).exports,kp={name:"NoteModal",props:{title:{type:String,default:"Ghi chú"},noteModalId:{type:String,default:"note-modal"},ticketId:{type:Number}},data:function(){return{form:{content:null},noteElementId:"note",inputNoteId:"input-note",messages:{required:"Bạn chưa nhập nội dung ghi chú"}}},created:function(){this.noteElementId=Me.a.generateUniqueId(this.noteElementId),this.inputNoteId=Me.a.generateUniqueId(this.inputNoteId)},methods:{validateState:function(t){return null!==this.form[t]?this.form[t].length>0:null},closeModal:function(){this.$bvModal.hide(this.noteModalId)},save:function(){if(!this.form.content)return this.form.content="",void Me.a.showMessage(this.messages.required,"warning","Thông báo");this.createNote()},createNote:function(){var t=this;return l()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pp({ticket_id:t.ticketId,content:t.form.content});case 3:(a=e.sent).data.success?(Me.a.showMessage("Tạo ghi chú thành công","success","Thành công"),t.closeModal(),t.form.content=null,t.$parent.$parent.$parent.isRefreshDataLog=!0):Me.a.showMessage(a.data.message||"Có lỗi khi tạo ghi chú!","error","Lỗi"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),Me.a.showMessage("Có lỗi khi tạo ghi chú!","error","Lỗi");case 11:case"end":return e.stop()}},e,t,[[0,7]])}))()}}};var xp=function(t){a("uMFG")},Sp={name:"Action",components:{NoteModal:Object(y.a)(kp,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{attrs:{id:t.noteModalId,"modal-class":"modal-custom",size:"lg",centered:"",static:"","hide-footer":"","hide-header":""}},[n("div",{staticClass:"title-note-modal"},[n("span",[t._v(t._s(t.title))]),t._v(" "),n("button",{staticClass:"btn-hide-note-modal",on:{click:function(e){return t.closeModal()}}},[n("img",{attrs:{src:a("RaU2"),alt:"icon-hide"}})])]),t._v(" "),n("div",{staticClass:"content-note-modal"},[n("b-form-group",[n("b-form-textarea",{attrs:{id:t.noteElementId,name:t.noteElementId,"aria-describedby":t.inputNoteId,state:t.validateState("content"),placeholder:"Nhập ghi chú"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}}),t._v(" "),n("b-form-invalid-feedback",{staticClass:"invalid-text",attrs:{id:t.inputNoteId}},[t._v("\n        "+t._s(t.messages.required)+"\n      ")])],1)],1),t._v(" "),n("div",{staticClass:"text-center mt-2 mb-2"},[n("b-btn",{staticClass:"btn button-close-note-modal",attrs:{variant:"ghtk"},on:{click:function(e){return t.save()}}},[t._v("\n      Lưu\n    ")])],1)])},[],!1,xp,"data-v-b375a714",null).exports,ExplanationModal:wp},props:{ticketInfo:{type:Object}},data:function(){return{explanationModalId:"explanation-modal",noteModalId:"note-modal"}},created:function(){this.explanationModalId=Me.a.generateUniqueId("explanation-modal"),this.noteModalId=Me.a.generateUniqueId("note-modal")},computed:{isSuccess:function(){return 1===this.ticketInfo.status}},methods:{openExplanationModal:function(){this.$bvModal.show(this.explanationModalId)},openNoteModal:function(){this.$bvModal.show(this.noteModalId)}}};var Mp=function(t){a("jibg")},Tp=Object(y.a)(Sp,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"action"},[a("div",{staticClass:"btn"},[t.isSuccess?a("div",{staticClass:"btn-detail"},[a("button",{on:{click:function(e){return t.openExplanationModal()}}},[t._v("\n        Chi tiết\n      ")])]):a("div",{staticClass:"btn-action"},[a("button",{on:{click:function(e){return t.openExplanationModal()}}},[t._v("\n        Hoàn thành\n      ")]),t._v(" "),a("button",{on:{click:function(e){return t.openNoteModal()}}},[t._v("\n        Ghi chú\n      ")])])]),t._v(" "),a("ExplanationModal",{attrs:{explanationModalId:t.explanationModalId,title:"Giải trình",isReadOnly:t.isSuccess,ticketInfo:t.ticketInfo}}),t._v(" "),a("NoteModal",{attrs:{noteModalId:t.noteModalId,title:"Ghi chú",ticketId:t.ticketInfo.id}})],1)},[],!1,Mp,"data-v-d1d3cd92",null).exports,Dp={name:"RefundTicket",components:{Action:Tp},props:{ticketInfo:{type:Object}},computed:{ticketRefundLink:function(){return N.a.domainGhtkAdmin+"/admin/issues-refund?id="+this.ticketInfo.detail.ticket_id},orderLink:function(){return N.a.domainGhtkAdmin+"/admin?alias="+this.ticketInfo.detail.pkg_order}}};var Ip=function(t){a("ja0D")},Pp=Object(y.a)(Dp,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"take-care-ticket ticket-refund"},[a("div",{staticClass:"content"},[a("table",[a("thead",[a("tr",[a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.ticketInfo.id)+"/Bồi hoàn")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("Mã ticket bồi hoàn: "),a("a",{attrs:{href:t.ticketRefundLink}},[a("u",[t._v(t._s(t.ticketInfo.detail.ticket_id))])])]),t._v(" "),a("td",[t._v("Mã đơn hàng: "),a("a",{attrs:{href:t.orderLink}},[a("u",[t._v(t._s(t.ticketInfo.detail.pkg_order))])])])]),t._v(" "),a("tr",[a("td",[t._v("Tiền bồi hoàn: "),a("span",[t._v(t._s(t.ticketInfo.detail.refund_money))])]),t._v(" "),a("td",[t._v("Loại bồi hoàn: "),a("span",[t._v(t._s(t.ticketInfo.detail.refund_type))])])])])])]),t._v(" "),a("Action",{attrs:{ticketInfo:t.ticketInfo}})],1)},[],!1,Ip,"data-v-72d90cdb",null).exports,Ep={name:"LowIncomeTicket",components:{Action:Tp},props:{ticketInfo:{type:Object}},methods:{moneyFormat:function(t){return Me.a.moneyFormat(t)}}};var Lp=function(t){a("k7Ql")},Ap=Object(y.a)(Ep,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"take-care-ticket low-income-ticket"},[a("div",{staticClass:"content"},[a("table",[a("thead",[a("tr",[a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.ticketInfo.id)+"/Thu nhập thấp")])])]),t._v(" "),t.ticketInfo.detail.salary_user?a("tbody",[a("tr",[a("td",[t._v("Lương (tạm tính): "),a("span",[t._v(t._s(t.ticketInfo.detail.salary_user))])])]),t._v(" "),a("tr",[a("td",[t._v("Trung bình lương của kho (tạm tính): "),a("span",[t._v(t._s(t.ticketInfo.detail.salary_station))])])])]):t._e(),t._v(" "),t.ticketInfo.detail.salary_month?a("tbody",[a("tr",[a("td",[t._v("Lương kỳ hiện tại: "),a("span",[t._v(t._s(t.ticketInfo.detail.salary_month))])])]),t._v(" "),a("tr",[a("td",[t._v("Trung kỳ trước: "),a("span",[t._v(t._s(t.ticketInfo.detail.salary_last_month))])])])]):t._e()])]),t._v(" "),a("Action",{attrs:{ticketInfo:t.ticketInfo}})],1)},[],!1,Lp,"data-v-877d77bc",null).exports,Op={name:"PenaltyCardTicket",components:{Action:Tp},props:{ticketInfo:{type:Object}},computed:{countDocument:function(){return We()(this.ticketInfo.detail.penalty_document).length}}},Np=[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[this._v("Thẻ đỏ "),e("img",{attrs:{src:a("JeF4"),alt:"red_card"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[this._v("Thẻ vàng "),e("img",{attrs:{src:a("DDmj"),alt:"yellow_card"}})])}];var Rp=function(t){a("aSgd")},Up=Object(y.a)(Op,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"take-care-ticket penalty-card-ticket"},[a("div",{staticClass:"content"},[a("table",[a("thead",[a("tr",[a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.ticketInfo.id)+"/Thẻ phạt")])])]),t._v(" "),a("tbody",[a("tr",["red"===t.ticketInfo.detail.penalty_type?a("td",[t._v("\n          Loại hình: "),t._m(0)]):a("td",[t._v("\n          Loại hình: "),t._m(1)]),t._v(" "),a("td",[t._v("Mức phạt: "),a("span",[t._v(t._s(t.ticketInfo.detail.penalty_level))])]),t._v(" "),t.countDocument>0?a("td",{staticClass:"image-report",attrs:{rowspan:"4"}},[[a("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"position-relative mr-1 d-inline-block"},[a("div",{staticClass:"num-img-extend",class:t.countDocument>1?"":"d-none"},[t._v("\n                +"+t._s(t.countDocument-1)+"\n              ")]),t._v(" "),t._l(t.ticketInfo.detail.penalty_document,function(t,e){return[a("img",{key:e,staticClass:"image-document",class:e<1?"d-inline-block":"d-none",attrs:{src:t,alt:"Biên bản"}})]}),t._v(" "),a("div",{staticClass:"document-type-desc"},[t._v("\n                Biên bản\n              ")])],2)]],2):t._e()]),t._v(" "),a("tr",[a("td",[t._v("Giá trị phạt: "),a("span",[t._v(t._s(t.ticketInfo.detail.penalty_money))])]),t._v(" "),a("td",[t._v("Nội dung: "),a("span",[t._v(t._s(t.ticketInfo.detail.penalty_content))])])]),t._v(" "),a("tr",[a("td",[t._v("Ngày vi phạm: "),a("span",[t._v(t._s(t.ticketInfo.detail.penalty_date))])]),t._v(" "),a("td",[t._v("Người gán thẻ: "),a("span",[t._v(t._s(t.ticketInfo.detail.penalty_created_by))])])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("\n          Lý do phạt: "),a("span",[t._v(t._s(t.ticketInfo.detail.penalty_reason))])])])])])]),t._v(" "),a("Action",{attrs:{ticketInfo:t.ticketInfo}})],1)},Np,!1,Rp,"data-v-33266c8b",null).exports,$p={name:"UnauthorizedAbsenceTicket",components:{Action:Tp},props:{ticketInfo:{type:Object}}};var Hp=function(t){a("uBro")},Bp=Object(y.a)($p,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"take-care-ticket unauthorized-absence-ticket"},[a("div",{staticClass:"content"},[a("table",[a("thead",[a("tr",[a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.ticketInfo.id)+"/Nghỉ không phép")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("Nghỉ không phép: "),a("span",[t._v(t._s(t.ticketInfo.detail.date_on_leave))])])]),t._v(" "),t.ticketInfo.detail.date_on_leave_2?a("tr",[a("td",[t._v("Nghỉ không phép: "),a("span",[t._v(t._s(t.ticketInfo.detail.date_on_leave_2))])])]):t._e()])])]),t._v(" "),a("Action",{attrs:{ticketInfo:t.ticketInfo}})],1)},[],!1,Hp,"data-v-531dc94e",null).exports,jp={name:"OvertimeTicket",components:{Action:Tp},props:{ticketInfo:{type:Object}}};var Fp=function(t){a("OkkX")},qp=Object(y.a)(jp,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"take-care-ticket overtime-ticket"},[a("div",{staticClass:"content"},[a("table",[a("thead",[a("tr",[a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.ticketInfo.id)+"/Tăng ca")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v(t._s(t.ticketInfo.detail.title_week_1))])]),t._v(" "),a("tr",[a("td",[t._v("\n          Checkin: "),a("span",[t._v(t._s(t.ticketInfo.detail.checkin_week_1))]),t._v("\n          / Checkout: "),a("span",[t._v(t._s(t.ticketInfo.detail.checkout_week_1))]),t._v("\n          ("+t._s(t.ticketInfo.detail.range_time_week_1)+")\n        ")])]),t._v(" "),a("tr",[a("td",[t._v("Lý do tăng ca: "),a("span",[t._v(t._s(t.ticketInfo.detail.reason_week_1))])])]),t._v(" "),t._m(0),t._v(" "),a("tr",[a("td",[t._v(t._s(t.ticketInfo.detail.title_week_2))])]),t._v(" "),a("tr",[a("td",[t._v("\n          Checkin: "),a("span",[t._v(t._s(t.ticketInfo.detail.checkin_week_1))]),t._v("\n          / Checkout: "),a("span",[t._v(t._s(t.ticketInfo.detail.checkout_week_1))]),t._v("\n          ("+t._s(t.ticketInfo.detail.range_time_week_1)+")\n        ")])]),t._v(" "),a("tr",[a("td",[t._v("Lý do tăng ca: "),a("span",[t._v(t._s(t.ticketInfo.detail.reason_week_2))])])])])])]),t._v(" "),a("Action",{attrs:{ticketInfo:t.ticketInfo}})],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td")])}],!1,Fp,"data-v-81457d78",null).exports,Yp={name:"StaffContactModal",props:{contactInfo:{type:Object,default:null},title:{type:String,default:"Gọi nhân viên"},contactModalId:{type:String,default:"contact-modal-staff"}},methods:{closeModal:function(){this.$bvModal.hide(this.contactModalId)}}};var zp=function(t){a("CbBl")},Gp=Object(y.a)(Yp,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{attrs:{id:t.contactModalId,"modal-class":"modal-custom",size:"sm",centered:"",static:"","hide-footer":"","hide-header":""}},[n("div",{staticClass:"title-contact-modal"},[n("span",[t._v(t._s(t.title))]),t._v(" "),n("button",{staticClass:"btn-hide-modal",on:{click:function(e){return t.closeModal()}}},[n("img",{attrs:{src:a("RaU2"),alt:"icon-hide"}})])]),t._v(" "),t.contactInfo?n("div",{staticClass:"content-contact-modal"},[n("div",[n("b",[t._v("Họ tên: ")]),n("span",[t._v(t._s(t.contactInfo.fullname))])]),t._v(" "),n("div",[n("b",[t._v("Vị trí: ")]),n("span",[t._v(t._s(t.contactInfo.position_name))])]),t._v(" "),n("div",[n("b",[t._v("Số điện thoại: ")]),n("span",[t._v(t._s(t.contactInfo.tel))])])]):t._e(),t._v(" "),n("div",{staticClass:"text-center mt-2 mb-2"},[n("b-btn",{staticClass:"btn button-close-contact-modal",attrs:{variant:"ghtk"},on:{click:function(e){return t.closeModal()}}},[t._v("\n      Đóng\n    ")])],1)])},[],!1,zp,"data-v-3b01706e",null).exports,Kp={name:"RoutineCareTicket",components:{Action:Tp},props:{ticketInfo:{type:Object}}};var Vp=function(t){a("Nzzg")},Qp=Object(y.a)(Kp,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"take-care-ticket routine-care-ticket"},[a("div",{staticClass:"content"},[a("table",[a("thead",[a("tr",[a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.ticketInfo.id)+"/Chăm sóc định kỳ")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("Lương tháng trung bình: "),a("span",[t._v(t._s(t.ticketInfo.detail.salary))])])]),t._v(" "),a("tr",[a("td",[t._v("Đề xuất chờ duyệt: "),a("span",[t._v(t._s(t.ticketInfo.detail.asset_order_pending))])])]),t._v(" "),a("tr",[a("td",[t._v("Hồ sơ: "),a("span",[t._v(t._s(t.ticketInfo.detail.document))])])]),t._v(" "),a("tr",[a("td",[t._v("Tag xấu: "),a("span",[t._v(t._s(t.ticketInfo.detail.tag_bad))])])])])])]),t._v(" "),a("Action",{attrs:{ticketInfo:t.ticketInfo}})],1)},[],!1,Vp,"data-v-5b4ab2a9",null).exports,Xp={name:"RockieTicket",components:{Action:Tp},props:{ticketInfo:{type:Object}}};var Wp=function(t){a("CIh5")},Jp=Object(y.a)(Xp,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"take-care-ticket penalty-card-ticket"},[a("div",{staticClass:"content"},[a("table",[a("thead",[a("tr",[a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.ticketInfo.id)+"/Tân binh")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("\n          Ngày cần liên hệ: "),a("span",[t._v(t._s(t.ticketInfo.detail.date_contact))])])]),t._v(" "),a("tr",[a("td",[t._v("Danh sách hồ sơ còn thiếu: "),a("span",[t._v(t._s(t.ticketInfo.detail.missing_document))])])])])])]),t._v(" "),a("Action",{attrs:{ticketInfo:t.ticketInfo}})],1)},[],!1,Wp,"data-v-0a397af1",null).exports,Zp={name:"LogDetail",components:{LoadingMiniBottom:a("mCOD").a},props:{ticketIds:{type:Array,default:function(t){return[]}},isRefreshData:{type:Boolean,default:!1},isCloseLogs:{type:Boolean,default:!1}},data:function(){return{collapseId:"collapse",logDetailId:"log-detail",elementLogDetail:null,offset_id:0,limit:10,isLoading:!1,dataLogs:[],stopLoadData:!1,isShowCollapse:!1}},created:function(){this.collapseId=Me.a.generateUniqueId(this.collapseId),this.logDetailId=Me.a.generateUniqueId(this.logDetailId)},watch:{isRefreshData:function(t){t&&this.refreshDataLog()},isCloseLogs:function(){this.closeCollapseLogs()}},methods:{hideCollapseLogs:function(){this.isShowCollapse=!1},closeCollapseLogs:function(){this.isShowCollapse&&(this.$root.$emit("bv::toggle::collapse",this.collapseId),this.isShowCollapse=!1)},showCollapseLogs:function(){this.isShowCollapse=!0,this.refreshDataLog()},refreshDataLog:function(){this.dataLogs=[],this.offset_id=0,this.stopLoadData=!1,this.loadDataLog(),this.$parent.isRefreshDataLog=!1},loadDataLog:function(){var t=this;this.isLoading=!0,gp({offset_id:this.offset_id,limit:this.limit,ticket_ids:this.ticketIds}).then(function(e){var a;e.data.data.length<t.limit&&(t.stopLoadData=!0),(a=t.dataLogs).push.apply(a,d()(e.data.data)),t.offset_id=t.dataLogs[t.dataLogs.length-1].id,t.isLoading=!1}).catch(function(e){t.isLoading=!1,console.log(e)})},handleScroll:function(){if(!this.stopLoadData&&!this.isLoading){var t=this.$refs[this.logDetailId];t.scrollTop+t.clientHeight+100>=t.scrollHeight&&this.loadDataLog()}}}};var tm=function(t){a("CoZ9")},em={name:"StaffTicket",components:{RefundTicket:Pp,LowIncomeTicket:Ap,PenaltyCardTicket:Up,UnauthorizedAbsenceTicket:Bp,OvertimeTicket:qp,StaffContactModal:Gp,RoutineCareTicket:Qp,RockieTicket:Jp,LogDetail:Object(y.a)(Zp,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:t.logDetailId,staticClass:"mt-2 log-detail",on:{scroll:function(e){return t.handleScroll()}}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:t.collapseId,expression:"collapseId"}],staticClass:"w-100",attrs:{variant:"log-detail"}},[t._v("\n    Chi tiết log\n    "),n("span",[n("img",{attrs:{src:a("Z1wn"),alt:"accordion"}})])]),t._v(" "),n("b-collapse",{ref:t.collapseId,staticClass:"mt-2",attrs:{id:t.collapseId},on:{show:t.showCollapseLogs,hide:t.hideCollapseLogs}},[n("b-card",{staticClass:"border-0",attrs:{"no-body":""}},[n("ul",{staticClass:"ant-timeline m-0"},[t._l(t.dataLogs,function(e,a){return n("li",{key:a,staticClass:"ant-timeline-item"},[n("div",{staticClass:"ant-timeline-item-tail"}),t._v(" "),n("div",{staticClass:"ant-timeline-item-head-log"}),t._v(" "),n("div",{staticClass:"ant-timeline-item-content"},[n("span",{domProps:{innerHTML:t._s(e.log_detail)}})])])}),t._v(" "),n("li",{directives:[{name:"show",rawName:"v-show",value:0===t.dataLogs.length,expression:"dataLogs.length === 0"}]},[n("div",{staticClass:"text-center"},[t._v("Không có dữ liệu!")])]),t._v(" "),n("loading-mini-bottom",{attrs:{enable:t.isLoading}})],2)])],1)],1)},[],!1,tm,"data-v-79f36932",null).exports},props:{staffTicketInfo:{type:Object},isCloseLogs:{type:Boolean,default:!1}},data:function(){return{contactInfo:null,contactModalId:"contact-modal-staff",isRefreshDataLog:!1}},created:function(){this.contactModalId=Me.a.generateUniqueId("contact-modal")},computed:{getTicketIds:function(){return this.staffTicketInfo.ticket_detail.map(function(t){return t.id})},countTicketWait:function(){return this.staffTicketInfo.ticket_detail.filter(function(t){return 0===t.status}).length},sortTickets:function(){return this.sortTicket(this.staffTicketInfo.ticket_detail)},formatJoinDate:function(){return Me.a.formatDate(this.staffTicketInfo.info_user.seniority_date,"DD-MM-YYYY")}},methods:{openModalContact:function(){this.$bvModal.show(this.contactModalId)},openStaffProfileScreen:function(){window.open("/adm/profile/staff/"+this.staffTicketInfo.user_id,"_blank")},openChatBox:function(t){var e={user_id:t};Se.a.createDirectChat(e).then(function(t){if(t.data.success){var e=t.data.data.channel_id;window.open(N.a.gchatDomain+"/channel/internal/"+e,"_blank")}else Me.a.showMessage(t.data.message||"Tạo direct chat thất bại!","error","Lỗi")}).catch(function(t){Me.a.showMessage("Có lỗi xảy ra, vui lòng thử lại sau!","error","Lỗi"),console.log(t)})},sortTicket:function(t){return t.sort(function(t,e){return t.status-e.status})}}};var am=function(t){a("mvUk")},nm=Object(y.a)(em,function(){var t=this,e=t.$createElement,n=t._self._c||e;return Object.keys(t.staffTicketInfo.info_user).length>0?n("div",{staticClass:"staff-ticket"},[n("div",{staticClass:"info w-35"},[n("div",{staticClass:"d-flex justify-content-between"},[n("div",{staticClass:"profile mt-1 mr-2 mb-1"},[n("img",{staticClass:"img-circle image-gallery m-2",attrs:{alt:"avatar",src:t.staffTicketInfo.info_user.image_profile}}),t._v(" "),n("div",{staticClass:"d-inline-block"},[n("div",{staticClass:"member-info"},[t._v(t._s(t.staffTicketInfo.info_user.fullname)+" ("+t._s(t.staffTicketInfo.info_user.username)+")")]),t._v(" "),n("div",{staticClass:"position"},[t._v(t._s(t.staffTicketInfo.info_user.position_name)+" - "+t._s(t.staffTicketInfo.info_user.work_type_description)+" - "+t._s(t.staffTicketInfo.info_user.station_name))])])]),t._v(" "),n("div",{staticClass:"btn-profile m-2"},[n("button",{on:{click:function(e){return t.openStaffProfileScreen()}}},[t._v("\n          Xem\n        ")]),t._v(" "),n("button",{on:{click:function(e){return t.openModalContact(t.staffTicketInfo)}}},[t._v("\n          Gọi\n        ")])])]),t._v(" "),n("div",{staticClass:"statistics m-2"},[n("div",[n("b",[t._v("Ngày vào: "),n("span",[t._v(t._s(t.formatJoinDate))])])]),t._v(" "),n("div",{staticClass:"manager"},[n("b",[t._v("Quản lý:")]),t._v(" "),n("div",{staticClass:"ml-1"},t._l(t.staffTicketInfo.list_leader,function(e,i){return n("span",{key:i},[t._v("\n            "+t._s(e.fullname)+"\n            "),n("b-btn",{staticClass:"button-chat border-0 p-0",on:{click:function(a){return t.openChatBox(e.id)}}},[n("img",{staticClass:"icon-chat ml-2",attrs:{src:a("UjNx"),alt:"icon-chat"}})]),t._v(" "),n("br")],1)}),0)]),t._v(" "),n("div",[n("b",[t._v("Vấn đề: "),n("span",[t._v(t._s(t.staffTicketInfo.count_ticket))])])]),t._v(" "),n("div",[n("span",[t._v("\n          Bồi hoàn: "+t._s(t.staffTicketInfo.count_refund)+"\n        ")])]),t._v(" "),n("div",[n("span",[t._v("\n          Thẻ phạt: "+t._s(t.staffTicketInfo.count_penalty)+"\n        ")])]),t._v(" "),n("div",[n("span",[t._v("\n          Thu nhập thấp: "+t._s(t.staffTicketInfo.count_salary)+"\n        ")])]),t._v(" "),n("div",[n("span",[t._v("\n          Nghỉ không phép: "+t._s(t.staffTicketInfo.count_leave)+"\n        ")])]),t._v(" "),n("div",[n("span",[t._v("\n          Tăng ca: "+t._s(t.staffTicketInfo.count_overtime)+"\n        ")])]),t._v(" "),n("div",[n("span",[t._v("\n          Chăm sóc định kỳ: "+t._s(t.staffTicketInfo.count_default)+"\n        ")])])]),t._v(" "),n("StaffContactModal",{attrs:{contactInfo:t.staffTicketInfo.info_user,contactModalId:t.contactModalId,title:"Gọi nhân viên"}})],1),t._v(" "),n("div",{staticClass:"multi-ticket w-65 m-2"},[n("div",{staticClass:"statistics-title mb-1"},[n("b",[t._v("Cần xử lý "),n("span",[t._v("("+t._s(t.countTicketWait)+")")])])]),t._v(" "),t._l(t.sortTickets,function(e){return[1===e.type?n("div",[n("RoutineCareTicket",{attrs:{ticketInfo:e}})],1):2===e.type?n("div",[n("RefundTicket",{attrs:{ticketInfo:e}})],1):3===e.type?n("div",[n("PenaltyCardTicket",{attrs:{ticketInfo:e}})],1):4===e.type?n("div",[n("LowIncomeTicket",{attrs:{ticketInfo:e}})],1):5===e.type?n("div",[n("UnauthorizedAbsenceTicket",{attrs:{ticketInfo:e}})],1):6===e.type?n("div",[n("OvertimeTicket",{attrs:{ticketInfo:e}})],1):7===e.type?n("div",[n("RockieTicket",{attrs:{ticketInfo:e}})],1):t._e()]}),t._v(" "),n("LogDetail",{attrs:{ticketIds:t.getTicketIds,isRefreshData:t.isRefreshDataLog,isCloseLogs:t.isCloseLogs}})],2)]):t._e()},[],!1,am,"data-v-4d44c119",null).exports,im={name:"Paginate",props:{page:{type:Object}},methods:{changePaginate:function(){this.$emit("changePaginate",this.page.currentPage)}}};var sm=function(t){a("Se4l")},om={name:"take-care",components:{Paginate:Object(y.a)(im,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"paginate row mt-3"},[a("div",{staticClass:"col col-md-10 text-left"},[a("span",[t._v("Bản ghi/ trang")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.page.perPage,expression:"page.perPage"}],staticClass:"form-control form-control-sm w-4re text-ghtk rounded border-ghtk d-inline-block",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.page,"perPage",e.target.multiple?a:a[0])},function(e){return t.changePaginate()}]}},[a("option",[t._v("5")]),t._v(" "),a("option",[t._v("10")]),t._v(" "),a("option",[t._v("25")]),t._v(" "),a("option",[t._v("50")]),t._v(" "),a("option",[t._v("100")])]),t._v(" "),a("div",{staticClass:"z-0 d-inline-block"},[a("b-pagination",{staticClass:"paginator-ghtk mb-0",attrs:{size:"sm",align:"left","total-rows":+t.page.totalItems,"per-page":+t.page.perPage},on:{input:function(e){return t.changePaginate()}},model:{value:t.page.currentPage,callback:function(e){t.$set(t.page,"currentPage",e)},expression:"page.currentPage"}})],1)])])},[],!1,sm,"data-v-6f67a452",null).exports,StaffTicket:nm,TimeLine:Ce.a,MultiSelectRegion:me.a,MultiSelectProvince:fe.a,MultiSelectStation:ge.a,MultiSelectPosition:be.a,SingleSelectUser:Ie.a,MultiSelectProblem:bp,MultiSelectDepartment:_e.a},props:{scrollMode:{type:Boolean,default:!0}},computed:{moment:Ye.a},data:function(t){return{loading:!1,isCloseLogs:!1,page:{currentPage:1,totalPages:10,perPage:10,totalItems:100},filter:{regions:null,provinces:null,stations:null,departments:null,positions:null,user_ids:null,ticket_types:null,createdDate:{start:Ye()().subtract(1,"month").toDate(),end:Ye()().toDate()},type:"all"},createdDateDefault:{start:Ye()().subtract(1,"month").format("YYYY-MM-DD"),end:Ye()().format("YYYY-MM-DD")},data:{all:0,wait:0,success:0,data:[{user_id:null,info_user:null,list_leader:null,ticket_detail:null,count_ticket:0,count_refund:0,count_penalty:0,count_salary:0,count_leave:0,count_overtime:0,count_default:0}]}}},created:function(){this.getTickets()},methods:{handleReloadPage:function(){this.getTickets()},handleProvinceSelected:function(t){this.filter.provinces=t?t.map(function(t){return t.id}).toString():""},handleRegionSelected:function(t){this.filter.regions=t?t.map(function(t){return t.id}).toString():""},handleStationSelected:function(t){this.filter.stations=t?t.map(function(t){return t.id}).toString():""},handleDepartmentSelected:function(t){this.filter.departments=t?t.map(function(t){return t.id}).toString():""},handlePositionSelected:function(t){this.filter.positions=t?t.map(function(t){return t.id}).toString():""},handleProblemSelected:function(t){this.filter.ticket_types=t?t.map(function(t){return t.id}).toString():""},getTickets:function(){var t=this;return l()(o.a.mark(function e(){var a,n,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,(a=Me.a.cloneDeep(t.filter)).regions=a.regions?a.regions.split(","):null,a.provinces=a.provinces?a.provinces.split(","):null,a.stations=a.stations?a.stations.split(","):null,a.departments=a.departments?a.departments.split(","):null,a.positions=a.positions?a.positions.split(","):null,a.ticket_types=a.ticket_types?a.ticket_types.split(","):null,a.user_ids=a.user_ids?a.user_ids.split(","):null,a.from=t.createdDateDefault.start,a.to=t.createdDateDefault.end,a.createdDate&&(a.from=Me.a.formatDate(t.filter.createdDate.start,"YYYY-MM-DD"),a.to=Me.a.formatDate(t.filter.createdDate.end,"YYYY-MM-DD")),n={page:t.page.currentPage,limit:t.page.perPage},e.prev=13,e.next=16,hp(i()({},a,n));case 16:if(!(s=e.sent).data){e.next=30;break}t.data=Me.a.cloneDeep(s.data.data),e.t0=t.filter.type,e.next="wait"===e.t0?22:"success"===e.t0?24:26;break;case 22:return t.page.totalItems=t.data.wait,e.abrupt("break",28);case 24:return t.page.totalItems=t.data.success,e.abrupt("break",28);case 26:return t.page.totalItems=t.data.all,e.abrupt("break",28);case 28:t.page.totalPages=Math.ceil(t.page.totalItems/t.page.perPage),t.loading=!1;case 30:e.next=37;break;case 32:e.prev=32,e.t1=e.catch(13),t.loading=!1,console.log(e.t1),Me.a.showMessage("Có lỗi khi lấy tickets!","error","Lỗi");case 37:case"end":return e.stop()}},e,t,[[13,32]])}))()},getTypeTicket:function(t){this.isCloseLogs=!this.isCloseLogs,this.filter.type=t,this.getTickets()}}};var rm=function(t){a("l///")},lm=Object(y.a)(om,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"small-scrollbar take-care m-2"},[a("b-row",{staticClass:"header my-2 align-items-center"},[a("b-col",{attrs:{md:"4"}},[a("h4",{staticClass:"m-0"},[t._v("Chăm sóc nhân viên")])]),t._v(" "),a("b-col",{staticClass:"text-right",attrs:{md:"8"}},[a("button",{staticClass:"btn btn-pill btn-statistic",class:"all"===t.filter.type?"btn-ghtk":"btn-ghtk-disable",on:{click:function(e){return t.getTypeTicket("all")}}},[t._v("\n        Tất cả "),a("span",[t._v("("+t._s(t.data.all)+")")])]),t._v(" "),a("button",{staticClass:"btn btn-pill btn-statistic",class:"wait"===t.filter.type?"btn-ghtk":"btn-ghtk-disable",on:{click:function(e){return t.getTypeTicket("wait")}}},[t._v("\n        Cần xử lý "),a("span",[t._v("("+t._s(t.data.wait)+")")])]),t._v(" "),a("button",{staticClass:"btn btn-pill btn-statistic mr-1",class:"success"===t.filter.type?"btn-ghtk":"btn-ghtk-disable",on:{click:function(e){return t.getTypeTicket("success")}}},[t._v("\n        Hoàn thành "),a("span",[t._v("("+t._s(t.data.success)+")")])])])],1),t._v(" "),a("div",{staticClass:"row filter pb-2 justify-content-between input-border"},[a("div",{staticClass:"mb-1 input-filter"},[a("multi-select-region",{attrs:{"custom-class":"z-5 multiselect-ghtk multiselect-no-horizontal",placeholder:"Miền","auto-close":!0,"hide-select":!0},on:{handleSelectedRegion:t.handleRegionSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter"},[a("multi-select-province",{attrs:{"custom-class":"z-5 multiselect-ghtk multiselect-no-horizontal",placeholder:"Tỉnh","province-ids":t.filter.province,"auto-close":!0,"hide-select":!0},on:{handleProvinceSelected:t.handleProvinceSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter"},[a("multi-select-station",{attrs:{"custom-class":"z-5 multiselect-ghtk multiselect-no-horizontal",placeholder:"Kho","province-ids":t.filter.province,"station-ids":t.filter.station,"auto-close":!0,"hide-select":!0},on:{handleStationSelected:t.handleStationSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter"},[a("multi-select-department",{attrs:{"department-ids":t.filter.departments,placeholder:"Bộ phận","auto-close":!0,"hide-select":!0},on:{handleDepartmentSelected:t.handleDepartmentSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter"},[a("multi-select-position",{staticClass:"multiselect-ghtk",attrs:{"department-ids":t.filter.departments,"custom-class":"z-5 multiselect-ghtk multiselect-no-horizontal",placeholder:"Vị trí","auto-close":!0,"hide-select":!0},on:{handlePositionSelected:t.handlePositionSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter"},[a("single-select-user",{staticClass:"z-5 multiselect-ghtk multiselect-no-horizontal",attrs:{placeholder:"Nhân viên"},on:{onChange:function(e){t.filter.user_ids=e?e.id.toString():null}}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter"},[a("multi-select-problem",{staticClass:"multiselect-ghtk",attrs:{"custom-class":"z-5 multiselect-ghtk multiselect-no-horizontal","auto-close":!0,"hide-select":!0},on:{handleProblemSelected:t.handleProblemSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 input-filter"},[a("v-date-picker",{attrs:{mode:"range",locale:"vi",color:"green","input-props":{placeholder:"Thời gian tạo",style:"border-color: #BDBDBD"},popover:{visibility:"focus"}},model:{value:t.filter.createdDate,callback:function(e){t.$set(t.filter,"createdDate",e)},expression:"filter.createdDate"}})],1)]),t._v(" "),a("div",{staticClass:"row filter pb-2 justify-content-between input-border d-flex flex-row-reverse"},[a("div",{staticClass:"text-right input-filter"},[a("button",{staticClass:"btn btn-ghtk rounded w-100",on:{click:t.handleReloadPage}},[t._v("\n        Tìm kiếm\n      ")])])]),t._v(" "),a("div",{staticClass:"mh-75 table-data",class:t.scrollMode&&"table-sticky"},[a("table",{staticClass:"table table-sm mb-0 bordered"},[t._m(0),t._v(" "),a("tbody",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"position-relative"},[t._l(t.data.data,function(e,n){return a("tr",{key:n},[a("td",{attrs:{colspan:"2"}},[a("StaffTicket",{attrs:{staffTicketInfo:e,isCloseLogs:t.isCloseLogs}})],1)])}),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]},[t._m(1)]),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:!t.loading&&!t.data.data.length,expression:"!loading && !data.data.length"}]},[t._m(2)])],2)])]),t._v(" "),a("div",[a("Paginate",{attrs:{page:t.page},on:{changePaginate:function(e){return t.handleReloadPage()}}})],1)],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",{staticClass:"text-center"},[e("th",{staticClass:"w-15"},[e("b",[this._v("Nhân viên")])]),this._v(" "),e("th",{staticClass:"w-35"},[e("b",[this._v("Danh sách vấn đề")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"font-weight-bold text-center no-record",attrs:{colspan:"2"}},[e("div",{staticClass:"my-5"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"font-weight-bold text-center no-record",attrs:{colspan:"2"}},[e("div",{staticClass:"my-5"},[this._v("Không có ticket cần xử lý !")])])}],!1,rm,"data-v-0883f7ac",null).exports,cm=[{name:"statistic",path:"/staff-work",component:zc,children:[{path:"recruitment",component:up.default,props:{showIframeProp:!0}},{path:"onboard",component:wc,props:{scrollMode:!0}},{path:"contracts",component:Qe,props:{class:"w-100"}},{name:"class-manager",path:"classes",component:fs,props:{menuWork:!0}},{name:"syllabus-manager",path:"syllabus",component:au,props:{scrollMode:!0}},{path:"rookie",component:Ju,props:{scrollMode:!0}},{path:"tags-management",component:dp,props:{scrollMode:!0}},{path:"questions",component:Au},{path:"deposit",component:gs.default,props:{scrollMode:!0}},{path:"f-star",component:vs.default,props:{scrollMode:!0}},{path:"station-operation",component:Ss},{path:"works",component:Ml},{path:"stop-working",component:Vl},{path:"closing-shift",component:Rc},{path:"checkin",component:Hc,props:{scrollMode:!0}},{path:"staff-resign",component:wu,props:{scrollMode:!0}},{path:"staff-management",component:Uh,props:{scrollMode:!0},meta:{middleware:[R]}},{path:"take-care",component:lm,props:{scrollMode:!0}}]}],dm={name:"LayoutAdminRecruitment",components:{"app-layout-navbar":C,"app-layout-sidenav":S},mounted:function(){this.layoutHelpers.init(),this.layoutHelpers.update(),this.layoutHelpers.setAutoUpdate(!0)},beforeDestroy:function(){this.layoutHelpers.destroy()},methods:{closeSidenav:function(){this.layoutHelpers.setCollapsed(!0)}}};var um=function(t){a("6aA6"),a("NNGF"),a("iXC/"),a("k38u")},hm=[{path:"/recruitment",component:Object(y.a)(dm,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"layout-wrapper layout-2"},[e("div",{staticClass:"layout-inner"},[e("app-layout-sidenav"),this._v(" "),e("div",{staticClass:"layout-container"},[e("app-layout-navbar"),this._v(" "),e("div",{staticClass:"wrapper-content mt-4 mb-2 ml-2 mr-2"},[e("router-view")],1)],1)],1),this._v(" "),e("div",{staticClass:"layout-overlay",on:{click:this.closeSidenav}})])},[],!1,um,null,null).exports,children:[{name:"create-candidate-recruitment",path:"candidate/create",component:function(){return Promise.all([a.e(0),a.e(8)]).then(a.bind(null,"i/Pv"))},props:!0},{name:"candidates",path:"recruitment",component:function(){return new Promise(function(t){t()}).then(a.bind(null,"/g5g"))},props:!0},{name:"config",path:"config",component:function(){return a.e(184).then(a.bind(null,"f1dr"))},props:!0}]},{path:"/recruitment",component:_t,children:[{name:"update-candidate",path:"candidate/edit/:id",component:function(){return Promise.all([a.e(0),a.e(43)]).then(a.bind(null,"3lha"))},props:!0}]}],pm=[{path:"/config-role",component:L,children:[{path:"manage",component:function(){return a.e(97).then(a.bind(null,"ZGN+"))}}]}],mm=[{path:"/truck-monitor",component:L,children:[{path:"export-salary",component:function(){return Promise.all([a.e(0),a.e(226)]).then(a.bind(null,"Dw/K"))}}]}],fm=[{path:"/team-config",component:L,children:[{name:"list-team-config",path:"list",component:function(){return a.e(30).then(a.bind(null,"vb88"))},meta:{}},{name:"list-team-config-new",path:"list-new",component:function(){return Promise.all([a.e(0),a.e(33)]).then(a.bind(null,"dnYG"))},meta:{}}]}],gm={name:"permission-layout",components:{},data:function(){return{isOpenSideBar:!0}},methods:{toggleSideBar:function(){this.isOpenSideBar?(document.getElementById("sideBar").style.width="52px",document.getElementById("content").style.marginLeft="52px"):(document.getElementById("sideBar").style.width="250px",document.getElementById("content").style.marginLeft="250px"),this.isOpenSideBar=!this.isOpenSideBar},checkActiveClass:function(t){return this.$route.name===t?"active":""}}};var vm=function(t){a("6aA6"),a("NNGF"),a("iXC/"),a("k38u"),a("sVUT")},_m=[{path:"/rbac",component:Object(y.a)(gm,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"router-transitions"},[a("div",{staticClass:"wrapper"},[a("div",{staticClass:"sidebar",attrs:{id:"sideBar"}},[a("div",{staticClass:"sidebar-header"},[a("div",{staticClass:"logo"},[a("img",{staticClass:"logo",attrs:{src:"https://cache.giaohangtietkiem.vn/d/d65b6bfede4370045a2010d9c6adaf99.png",alt:"ECOM JSC","data-aui-responsive-header-index":"0",width:100}}),t._v(" "),t.isOpenSideBar?a("label",{attrs:{for:""}},[t._v("Quản lý phân quyền HRM")]):t._e()])]),t._v(" "),a("div",{staticClass:"link-cus"},[a("router-link",{class:t.checkActiveClass("role-dashboard"),attrs:{to:{path:"/rbac/role-dashboard"}}},[a("i",{staticClass:"ion ion-ios-albums"}),t._v(t._s(t.isOpenSideBar?"Quản lý Role":"")+"\n        ")]),t._v(" "),a("router-link",{class:t.checkActiveClass("permission-dashboard"),attrs:{to:{path:"/rbac/permission-dashboard"}}},[a("i",{staticClass:"ion ion-ios-folder-open"}),t._v(t._s(t.isOpenSideBar?"Quản lý Permission":"")+"\n        ")]),t._v(" "),a("router-link",{class:t.checkActiveClass("position-dashboard"),attrs:{to:{path:"/rbac/position-dashboard"}}},[a("i",{staticClass:"ion ion-ios-ribbon"}),t._v(t._s(t.isOpenSideBar?"Quản lý quyền Position":"")+"\n        ")]),t._v(" "),a("router-link",{class:t.checkActiveClass("user-dashboard"),attrs:{to:{path:"/rbac/user-dashboard"}}},[a("i",{staticClass:"ion ion-ios-person"}),t._v(t._s(t.isOpenSideBar?"Quản lý quyền User":"")+"\n        ")]),t._v(" "),a("router-link",{class:t.checkActiveClass("document"),attrs:{to:{path:"/rbac/document"}}},[a("i",{staticClass:"ion ion-ios-book"}),t._v(t._s(t.isOpenSideBar?"Document":"")+"\n        ")])],1)]),t._v(" "),a("div",{staticClass:"content",attrs:{id:"content"}},[a("div",{staticClass:"btn-toggle",on:{click:t.toggleSideBar}},[t.isOpenSideBar?a("i",{staticClass:"ion ion-ios-arrow-dropleft-circle"}):a("i",{staticClass:"ion ion-ios-arrow-dropright-circle"})]),t._v(" "),a("router-view")],1)])])},[],!1,vm,"data-v-0526a071",null).exports,children:[{name:"permission-dashboard",path:"permission-dashboard",component:function(){return Promise.all([a.e(0),a.e(4)]).then(a.bind(null,"bzcD"))}},{name:"permission-dashboard-permission",path:"permission-dashboard/:permission_name",component:function(){return Promise.all([a.e(0),a.e(4)]).then(a.bind(null,"bzcD"))}},{name:"role-dashboard",path:"role-dashboard",component:function(){return Promise.all([a.e(0),a.e(5)]).then(a.bind(null,"3X4L"))}},{name:"role-dashboard-role",path:"role-dashboard/:role_name",component:function(){return Promise.all([a.e(0),a.e(5)]).then(a.bind(null,"3X4L"))}},{name:"user-dashboard",path:"user-dashboard",component:function(){return Promise.all([a.e(0),a.e(12)]).then(a.bind(null,"1zjg"))}},{name:"user-dashboard-user",path:"user-dashboard/:user_id",component:function(){return Promise.all([a.e(0),a.e(12)]).then(a.bind(null,"1zjg"))}},{name:"position-dashboard",path:"position-dashboard",component:function(){return Promise.all([a.e(0),a.e(11)]).then(a.bind(null,"3J1t"))}},{name:"position-dashboard-id",path:"position-dashboard/:position_id",component:function(){return Promise.all([a.e(0),a.e(11)]).then(a.bind(null,"3J1t"))}},{name:"document",path:"document",component:function(){return a.e(218).then(a.bind(null,"aPy4"))}}]}],bm=[{path:"/emp-position",component:L,children:[{name:"EmpPositionManager",path:"manage",component:function(){return Promise.all([a.e(0),a.e(89)]).then(a.bind(null,"M8yA"))}}]}],ym=[{path:"/new-member",component:L,children:[{path:"list",name:"list-new-members",component:function(){return a.e(47).then(a.bind(null,"vJMs"))}}]}],Cm=this;u.default.use(h.a),u.default.use(m.a);var wm,km=[{path:"/",component:L,children:[{path:"",beforeEnter:function(){window.location.href=window.location.origin+"/admin"}}]}].concat(d()(I),d()(H),d()($),d()(U),d()(B),d()(j),d()(q),d()(Y),d()(z),d()(G),d()(K),d()(V),d()(Q),d()(W),d()(J),d()(tt),d()(et),d()(at),d()(nt),d()(it),d()(st),d()(ot),d()(rt),d()(lt),d()(ct),d()(X),d()(dt),d()(ut),d()(ht),d()(mt),d()(ft),d()(pt),d()(gt),d()(bt),d()(yt),d()(Ct),d()(wt),d()(St),d()(kt),d()(xt),d()(Mt),d()(Z),d()(Tt),d()(Dt),d()(It),d()(Pt),d()(Et),d()(Lt),d()(At),d()(Ot),d()(Rt),d()(Ut),d()($t),d()(Ht),d()(Ft),d()(qt),d()(jt),d()(ce),d()(Yt),d()(zt),d()(Gt),d()(de),d()(ue),d()(Bt),d()(he),d()(bm),d()(Nt),d()(Kt),d()(pe),d()(ym),d()(Xt),d()(Qt),d()(Wt),d()(Jt),d()(cm),d()(hm),d()(Vt),d()(Zt),d()(te),d()(ee),d()(ae),d()(pm),d()(ne),d()(ie),d()(se),d()(oe),d()(re),d()(mm),d()(le),d()(fm),d()(F),d()(_m),[{path:"*",redirect:"/error/404"}]),xm=new h.a({base:"/adm/",mode:"history",routes:km});xm.afterEach(function(){window.layoutHelpers&&window.layoutHelpers.isSmallScreen()&&!window.layoutHelpers.isCollapsed()&&setTimeout(function(){return window.layoutHelpers.setCollapsed(!0,!0)},10),Object(f.a)().scrollTop(0,0)}),window.popStateDetected=!1,window.addEventListener("popstate",function(){window.popStateDetected=!0}),xm.addRoutes([{path:"/auth/callback",beforeEnter:function(){var t=l()(o.a.mark(function t(e,a,n){var i,s,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=Object(A.c)(N.a.oidc),t.next=4,i.handle();case 4:if(!t.sent){t.next=9;break}s=i.getRefererPath()||"/adm/",(r=new v.a("local")).set(N.a.cacheKey.callbackRefererPath,s),r.get("isLoginAdminFailed")?g.a.dispatch("loginByIamToken"):window.location.href=s;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}},t,Cm,[[0,11]])}));return function(e,a,n){return t.apply(this,arguments)}}()},{path:"/signout",beforeEnter:(wm=l()(o.a.mark(function t(e,a,n){var i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=new A.b(N.a.oidc),t.prev=1,t.next=4,i.signOut({revokeAccessToken:!0,postLogoutRedirectUri:N.a.oidc.authnUrl+"/sign-out"});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),window.location.href=N.a.oidc.authnUrl+"/sign-out";case 9:case"end":return t.stop()}},t,Cm,[[1,6]])})),function(t,e,a){return wm.apply(this,arguments)})}]),xm.beforeEach(function(t,e,a){if(window.popStateDetected=!1,document.body.classList.add("app-loading"),t.meta.middleware){var n=Array.isArray(t.meta.middleware)?t.meta.middleware:[t.meta.middleware],s={from:e,next:a,router:xm,to:t},o=function t(e,a,n){var s=a[n];return s?function(){e.next.apply(e,arguments);var o=t(e,a,n+1);s(i()({},e,{next:o}))}:e.next}(s,n,1);return n[0](i()({},s,{next:o}))}setTimeout(function(){return a()},10)});e.a=xm},Ycr3:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKZSURBVHgBxZbPddpAEMa/UTjENzowriDQAdywOARXgNIBqgBTAfJ7uUMqSHKx/V4OViqw0gHpQCecl8TazOwuJEIrIRHy8l0Q2tX8dnbnzxLqaDHsADQG4Zz/8TPadiSFoi9AFiO8j+uYonJIn42eBTzjNU/r47CpFFAfoLI5w9fNgIthH+QtYbxhL9Q7/o3ZYJIzphf1sstmuiCa8JuuHVmVgYvAG38GhWsDwg2wiRDGKepo4TMYSwteM3SwD80Do9GCvZjyU8KTr6q25gD4mi3PXFByeMawzaC2V6XQYWCPhaGb3taeZwc7BqbWJ4GJwns+RxVC4oDOltvXBkjeTP8qdRrYDnoXsdFYp5QEogbqHEMAiaxjz6xKSs3NA0NZLWb2zcDPj4XJCz+ASY0GyvILl4IQjRKOFkmbacsktuh7XPiWSKK2jSZSUgAQ5d+pz8zp4q1/3jIGOVhdZ6eee2jkoZfyuSWOAWP7R3bRqvzebM0aJ5TH6fBVP+ky9c9kbT+n4qFswcTURKmXDkkSH1ZcGuWkXuniHn5KGEixeelN4AL+ro8HJPmGQfF73dr6kLTDtrRFlw/6pcounKu0SVutb4kz8CJfFhvYmhqboJHkJAYSLZ2rrNlciwu9HGuY9Elrw9sZ1K2IoWZFfy99FFK8pT7rmqpFeytamUYqnZsnHd2e2DMDa7Mj3Clud7np5SaGd4H1VD54QFNJaskOEb1nGPZhIvcVIxo98uwupreUM+YKCnPNGJud2d59OGKVeuPaoZJKk6W5tWzvOJHf0Weyk9fO11oNmlcFWVVpS3UO6cjVK09tb/sDouF8Q1B8VXxa1eml1bWUXjwa4+Vb1FRVQAZlEtJXR+ehQ17piMIc6ql3Sth/0S+xzypAwDudfgAAAABJRU5ErkJggg=="},YfoY:function(t,e,a){"use strict";var n=a("Gu7T"),i=a.n(n),s={name:"SweetModal",props:{title:{type:String,required:!1,default:""},overlayTheme:{type:String,required:!1,default:"light"},modalTheme:{type:String,required:!1,default:"light"},blocking:{type:Boolean,required:!1,default:!1},pulseOnBlock:{type:Boolean,required:!1,default:!0},icon:{type:String,required:!1,default:""},hideCloseButton:{type:Boolean,required:!1,default:!1},enableMobileFullscreen:{type:Boolean,required:!1,default:!0},width:{type:[Number,String],required:!1,default:null}},mounted:function(){this.tabs=this.$children.filter(function(t){return t.cmpName&&"tab"==t.cmpName}),this.has_tabs&&(this.currentTab=this._changeTab(this.tabs[0])),document.addEventListener("keyup",this._onDocumentKeyup)},beforeDestroy:function(){document.removeEventListener("keyup",this._onDocumentKeyup)},data:function(){return{visible:!1,is_open:!1,is_bouncing:!1,tabs:[],backups:{body:{height:null,overflow:null}}}},computed:{has_title:function(){return this.title||this.$slots.title},has_tabs:function(){return this.tabs.length>0},has_content:function(){return this.$slots.default},current_tab:function(){return this.tabs.filter(function(t){return!0===t.active})[0]},overlay_classes:function(){return["sweet-modal-overlay","theme-"+this.overlayTheme,"sweet-modal-clickable",{"is-visible":this.visible,blocking:this.blocking}]},modal_classes:function(){return["sweet-modal","theme-"+this.modalTheme,{"has-title":this.has_title,"has-tabs":this.has_tabs,"has-content":this.has_content,"has-icon":this.icon,"is-mobile-fullscreen":this.enableMobileFullscreen,"is-visible":this.visible,"is-alert":this.icon&&!this.has_tabs||!this.icon&&!this.title&&!this.$slots.title,bounce:this.is_bouncing}]},modal_style:function(){var t=this.width,e=null;return null!==t&&(Number(t)==t&&(t+="px"),e="none"),{width:t,maxWidth:e}}},methods:{open:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e&&this.has_tabs){var a=this.tabs.filter(function(t){return t.id===e});if(a.length>0)this.currentTab=this._changeTab(a[0]);else{var n=this.tabs[e];n&&(this.currentTab=this._changeTab(n))}}this.is_open=!0,this._lockBody(),this._animateIcon(),setTimeout(function(){return t.visible=!0},30),this.$emit("open")},close:function(){var t=this;this.visible=!1,this._unlockBody(),setTimeout(function(){return t.is_open=!1},300),this.$emit("close")},bounce:function(){var t=this;this.is_bouncing=!0,setTimeout(function(){return t.is_bouncing=!1},330)},_lockBody:function(){this.backups.body.height=document.body.style.height,this.backups.body.overflow=document.body.style.overflow,document.body.style.height="100%",document.body.style.overflow="hidden"},_unlockBody:function(){document.body.style.height=this.backups.body.height,document.body.style.overflow=this.backups.body.overflow},_onOverlayClick:function(t){t.target.classList&&!t.target.classList.contains("sweet-modal-clickable")||(this.blocking?this.pulseOnBlock&&this.bounce():this.close())},_onDocumentKeyup:function(t){27==t.keyCode&&(this.blocking?this.pulseOnBlock&&this.bounce():this.close())},_changeTab:function(t){this.tabs.map(function(e){return e.active=e==t}),this.currentTab=t},_getClassesForTab:function(t){return["sweet-modal-tab",{active:t.active,disabled:t.disabled}]},_animateIcon:function(){var t=this;if(this.icon)switch(this.icon){case"success":setTimeout(function(){t._applyClasses(t.$refs.icon_success,{"":["animate"],".sweet-modal-tip":["animateSuccessTip"],".sweet-modal-long":["animateSuccessLong"]})},80);break;case"warning":this._applyClasses(this.$refs.icon_warning,{"":["pulseWarning"],".sweet-modal-body":["pulseWarningIns"],".sweet-modal-dot":["pulseWarningIns"]});break;case"error":setTimeout(function(){t._applyClasses(t.$refs.icon_error,{"":["animateErrorIcon"],".sweet-modal-x-mark":["animateXMark"]})},80)}},_applyClasses:function(t,e){for(var a in e){var n,s,o=e[a],r=void 0;(n=(r=""==a?t:t.querySelector(a)).classList).remove.apply(n,i()(o)),(s=r.classList).add.apply(s,i()(o))}}}},o=a("XyMi");var r=function(t){a("klHB")},l=Object(o.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.is_open,expression:"is_open"}],class:t.overlay_classes,on:{click:t._onOverlayClick}},[a("div",{class:t.modal_classes,style:t.modal_style},[a("div",{staticClass:"sweet-box-actions"},[t._t("box-action"),t._v(" "),t.hideCloseButton?t._e():a("div",{staticClass:"sweet-action-close",on:{click:t.close}},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z",fill:"#292c34"}})])])],2),t._v(" "),t.has_title||t.has_tabs?a("div",{staticClass:"sweet-title"},[t.has_tabs&&!t.has_title?[a("ul",{staticClass:"sweet-modal-tabs"},t._l(t.tabs,function(e){return a("li",{class:t._getClassesForTab(e)},[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t._changeTab(e)}}},[a("div",{staticClass:"sweet-modal-valign"},[e.icon?a("span",{staticClass:"sweet-modal-tab-icon",domProps:{innerHTML:t._s(e.icon)}}):t._e(),t._v(" "),a("span",{staticClass:"sweet-modal-tab-title"},[t._v(t._s(e.title))])])])])}),0)]:t._e(),t._v(" "),t.has_title?[t.title?a("h2",{domProps:{innerHTML:t._s(t.title)}}):t._e(),t._v(" "),t._t("title")]:t._e()],2):t._e(),t._v(" "),t.has_title&&t.has_tabs?a("ul",{staticClass:"sweet-modal-tabs"},t._l(t.tabs,function(e){return a("li",{class:t._getClassesForTab(e)},[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t._changeTab(e)}}},[a("div",{staticClass:"sweet-modal-valign"},[e.icon?a("span",{staticClass:"sweet-modal-tab-icon",domProps:{innerHTML:t._s(e.icon)}}):t._e(),t._v(" "),a("span",{staticClass:"sweet-modal-tab-title"},[t._v(t._s(e.title))])])])])}),0):t._e(),t._v(" "),a("div",{ref:"content",staticClass:"sweet-content"},["error"==t.icon?a("div",{ref:"icon_error",staticClass:"sweet-modal-icon sweet-modal-error"},[t._m(0)]):t._e(),t._v(" "),"warning"==t.icon?a("div",{ref:"icon_warning",staticClass:"sweet-modal-icon sweet-modal-warning"},[a("span",{staticClass:"sweet-modal-body"}),t._v(" "),a("span",{staticClass:"sweet-modal-dot"})]):t._e(),t._v(" "),"info"==t.icon?a("div",{ref:"icon_info",staticClass:"sweet-modal-icon sweet-modal-info"}):t._e(),t._v(" "),"success"==t.icon?a("div",{ref:"icon_success",staticClass:"sweet-modal-icon sweet-modal-success"},[a("span",{staticClass:"sweet-modal-line sweet-modal-tip"}),t._v(" "),a("span",{staticClass:"sweet-modal-line sweet-modal-long"}),t._v(" "),a("div",{staticClass:"sweet-modal-placeholder"}),t._v(" "),a("div",{staticClass:"sweet-modal-fix"})]):t._e(),t._v(" "),t.$slots.default?a("div",{staticClass:"sweet-content-content"},[t._t("default")],2):t._e()]),t._v(" "),t.$slots.button?a("div",{staticClass:"sweet-buttons"},[t._t("button")],2):t._e()])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"sweet-modal-x-mark"},[e("span",{staticClass:"sweet-modal-line sweet-modal-left"}),this._v(" "),e("span",{staticClass:"sweet-modal-line sweet-modal-right"})])}],!1,r,null,null);e.a=l.exports},YhJi:function(t,e,a){"use strict";var n,i=a("Xxa5"),s=a.n(i),o=a("exGp"),r=a.n(o),l=a("RUzx"),c=a.n(l),d=a("frDO"),u=a("HhAh"),h=a.n(u),p={name:"select-user",props:{value:{default:null},stationId:{default:null},codType:{default:null},statusId:{default:null},placeholder:{default:null},hideSelected:{default:!0},autoClose:{default:!0},clearOnSelect:{default:!0},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!0}},components:{Multiselect:c.a},data:function(){return{option:null,options:[],asyncLoading:!1,message:"Nhập ít nhất 2 ký tự"}},watch:{value:{immediate:!0,deep:!0,handler:function(t){this.option=t}}},methods:{find:h()((n=r()(s.a.mark(function t(e){var a,n=this;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.options=[],!(e.length<2)){t.next=4;break}return this.message="Nhập ít nhất 2 ký tự",t.abrupt("return");case 4:return this.asyncLoading=!0,a={term:e,onlyMainUser:0,station_id:this.stationId,cod_type:this.codType,status_id:this.statusId},t.next=8,d.a.apiGetListUsers(a).then(function(t){t.data.success?n.options=t.data.data:n.message="Không tìm thấy kết quả"}).catch(function(){n.message="Không tìm thấy kết quả"}).finally();case 8:this.asyncLoading=!1;case 9:case"end":return t.stop()}},t,this)})),function(t){return n.apply(this,arguments)}),500)}},m=a("XyMi"),f=Object(m.a)(p,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{attrs:{disabled:t.disabled,options:t.options,label:"name","track-by":"id",placeholder:t.placeholder,multiple:t.multiple,searchable:!0,loading:t.asyncLoading,"internal-search":!1,"clear-on-select":t.clearOnSelect,"close-on-select":t.autoClose,"hide-selected":t.hideSelected,"show-labels":!1},on:{"search-change":t.find,select:function(e){t.$emit("select",e)},remove:function(e){t.$emit("remove",e)},input:function(e){t.$emit("input",e)}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Không có kết quả phù hợp !")]),t._v(" "),a("span",{attrs:{slot:"noOptions"},slot:"noOptions"},[t._v(t._s(t.message))]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,null,null,null);e.a=f.exports},YlZe:function(t,e,a){"use strict";var n=a("Xxa5"),i=a.n(n),s=a("exGp"),o=a.n(s),r=a("RUzx"),l=a.n(r),c=a("xF2Z"),d={name:"single-select-position",components:{Multiselect:l.a},props:{isDisabled:{type:Boolean},departmentName:{},departmentId:{},positionJob:{},isShowDepartmentAlias:{type:Boolean,default:!0},listPositionDisable:null,reset:{},placeholder:{default:"Chọn vị trí làm việc"}},data:function(){return{option:null,options:[]}},created:function(){this.getList()},watch:{isShowDepartmentAlias:function(t,e){this.getList()},departmentName:{immediate:!0,handler:function(t,e){this.option=null,this.options=[],t?this.getPositionListByDepartment(t):this.getList()}},departmentId:{immediate:!0,handler:function(t,e){this.option=null,this.options=[],t?this.getPositionListByDepartment(t):this.getList()}},option:function(t,e){this.$emit("handleSelectedPosition",t)},positionJob:function(t,e){t?this.setSelectedOption():this.option=null},reset:function(){this.option=null}},methods:{setSelectedOption:function(){var t=this;if(this.options.length>0&&this.positionJob){var e=this.options.find(function(e){return+e.id==+t.positionJob});e&&(this.option=e)}},disablePosition:function(){var t=this;if(null!=this.listPositionDisable){var e=[];this.options.forEach(function(a){t.listPositionDisable.includes(parseInt(a.id))&&(a.$isDisabled=!0),e.push(a)}),this.options=e}},getList:function(){var t=this;return o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("position/getPositions");case 2:t.options=t.isShowDepartmentAlias?t.$store.getters["position/positionsWithDepartmentAlias"]:t.$store.getters["position/allPositions"],t.disablePosition(),t.setSelectedOption();case 5:case"end":return e.stop()}},e,t)}))()},getPositionListByDepartment:function(t){var e=this,a={department:t};c.a.getPositionListByDepartment(a).then(function(t){t.data.success&&(e.options=t.data.data,e.disablePosition(),e.setSelectedOption())}).catch(function(t){console.log(t)})}}},u=a("XyMi"),h=Object(u.a)(d,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{attrs:{options:t.options,placeholder:t.placeholder,label:"name","track-by":"id",selectedLabel:"",deselectLabel:"X",selectLabel:"",searchable:!0,disabled:t.isDisabled},on:{select:function(e){t.$emit("select",e)},remove:function(e){t.$emit("remove",e)}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,null,null,null);e.a=h.exports},Ypg3:function(t,e,a){"use strict";var n=a("Xxa5"),i=a.n(n),s=a("exGp"),o=a.n(s),r=a("RUzx"),l={name:"single-select-work-change-type",components:{Multiselect:a.n(r).a},props:{placeholder:{type:String,default:"Chọn loại thay đổi"},typeId:{type:Number},typeAlias:{type:String},isResignType:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1}},data:function(){return{option:null,options:[]}},created:function(){this.getListWorkChangeType()},watch:{option:function(t,e){this.$emit("handleSelectedWorkChangeType",t)},typeId:function(t,e){t?this.setSelectedOption():this.option=null},typeAlias:function(t,e){t?this.setSelectedOption():this.option=null}},methods:{setSelectedOption:function(){var t=this;this.options&&this.options.length&&this.typeId?this.option=this.options.find(function(e){return parseInt(e.id)===parseInt(t.typeId)})||null:this.options&&this.options.length&&this.typeAlias&&(this.option=this.options.find(function(e){return e.alias===t.typeAlias})||null)},getListWorkChangeType:function(){var t=this;return o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("workHistory/getListWorkChangeType");case 2:t.options=t.$store.getters["workHistory/listWorkChangeTypes"],t.options&&t.options.length>0&&t.isResignType&&(t.options=t.options.filter(function(t){return["normal_quit","terminate_contract","agree_terminate_contract","arbitrarily_quit","fired"].includes(t.alias)})),t.setSelectedOption();case 5:case"end":return e.stop()}},e,t)}))()}}},c=a("XyMi");var d=function(t){a("mDu3")},u=Object(c.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{attrs:{options:t.options,placeholder:t.placeholder,disabled:t.isDisabled,label:"description","track-by":"alias",selectedLabel:"",deselectLabel:"X",selectLabel:"Chọn",searchable:!0},on:{select:function(e){t.$emit("select",e)},input:function(e){t.$emit("input",e)},remove:function(e){t.$emit("remove",e)}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,d,"data-v-6aa50813",null);e.a=u.exports},Yw12:function(t,e,a){"use strict";var n=a("fZjL"),i=a.n(n),s=a("Xxa5"),o=a.n(s),r=a("exGp"),l=a.n(r),c=a("7zFw"),d=a("hC/b"),u={name:"CandidateTagModal",props:{recordId:{default:null},tagsCandidate:{default:null},attachPermission:{type:Boolean,default:!0},permissions:{default:function(){return{manageGlobalTag:!1}}}},data:function(){return{personalTags:[],globalTags:[],loading:!1,tag:"",tagGlobal:""}},methods:{getTags:function(){var t=this;return l()(o.a.mark(function e(){var a,n,i,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.tag="",t.loading=!0,e.prev=2,a={},e.next=6,c.a.getTags(a);case 6:n=e.sent,(i=n.data).success?(t.globalTags=i.data.tag_global?t.convertObjectToArray(i.data.tag_global):[],t.personalTags=i.data.tag_personal?t.convertObjectToArray(i.data.tag_personal):[],s=[],t.tagsCandidate&&(s=t.tagsCandidate.map(function(t){return t.tag_id})),t.globalTags&&(t.globalTags=t.globalTags.map(function(t){return s.includes(t.id)?{id:t.id,name:t.name,attached:!0}:{id:t.id,name:t.name,attached:!1}})),t.personalTags&&(t.personalTags=t.personalTags.map(function(t){return s.includes(t.id)?{id:t.id,name:t.name,attached:!0}:{id:t.id,name:t.name,attached:!1}}))):d.a.showMessage(i.message||"Không thuộc vùng quản lý !","warning"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:return e.prev=14,t.loading=!1,e.finish(14);case 17:case"end":return e.stop()}},e,t,[[2,11,14,17]])}))()},convertObjectToArray:function(t){return i()(t).map(function(e){return t[e]})},close:function(){this.resetData(),this.$bvModal.hide("candidate-tag-modal")},resetData:function(){this.personalTags=[],this.globalTags=[]},canManageGlobalTags:function(){return this.permissions&&this.permissions.manageGlobalTag},createTag:function(t,e){var a=this;return l()(o.a.mark(function n(){var i,s,r;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(a.tag.length>20)){n.next=3;break}return d.a.showMessage("Độ dài tag cần nhỏ hơn 20 kí tứ","warning"),n.abrupt("return");case 3:return t.preventDefault(),n.prev=4,i={name:a.tag,type:e},n.next=8,c.a.createTag(i);case 8:s=n.sent,(r=s.data).success?(a.getTags(),d.a.showMessage(r.message,"success")):d.a.showMessage(r.message||"Không thuộc vùng quản lý !","warning"),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(4),console.log(n.t0);case 16:return n.prev=16,n.finish(16);case 18:case"end":return n.stop()}},n,a,[[4,13,16,18]])}))()},deleteTag:function(t){var e=this;return l()(o.a.mark(function a(){var n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!confirm("Bạn có chắc muốn xóa tag "+t.name+" ?")){a.next=6;break}return a.next=4,c.a.deleteTag({tag_id:t.id});case 4:(n=a.sent).data.success?(d.a.showMessage(n.data.message,"success"),e.getTags()):d.a.showMessage(n.data.message,"warning");case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),d.a.showMessage(a.t0.message,"warning");case 11:return a.prev=11,a.finish(11);case 13:case"end":return a.stop()}},a,e,[[0,8,11,13]])}))()},attachTag:function(t){var e=this;return l()(o.a.mark(function a(){var n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e.loading=!0,a.next=4,c.a.attachTag({tag_id:t.id,candidate_id:e.recordId});case 4:(n=a.sent).data.success?(d.a.showMessage(n.data.message,"success"),e.$emit("attach",{candidate_id:e.recordId,tag_id:t.id,tag_name:t.name,tag_type:t.type}),e.$bvModal.hide("candidate-tag-modal")):d.a.showMessage(n.data.message||"Không gắn được tag","warning"),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),d.a.showMessage(a.t0.message,"warning");case 11:return a.prev=11,a.finish(11);case 13:case"end":return a.stop()}},a,e,[[0,8,11,13]])}))()}}},h=a("XyMi");var p=function(t){a("8PFr")},m=Object(h.a)(u,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{attrs:{title:"Tạo và quản lý thẻ phân loại",id:"candidate-tag-modal",scrollable:""},on:{hidden:function(e){return t.close()},shown:t.getTags}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"col-md-12 form"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Tag chung")]),t._v(" "),t.canManageGlobalTags()?a("b-input-group",{staticClass:"mb-3"},[a("b-form-input",{attrs:{type:"text",placeholder:"Nhập tên tag mới"},model:{value:t.tag,callback:function(e){t.tag=e},expression:"tag"}}),t._v(" "),a("b-input-group-append",[a("b-button",{attrs:{variant:"outline-success",id:"hr-tag-modal-btn-save",name:"hr-tag-modal-btn-save"},on:{click:t.createTag}},[a("i",{staticClass:"fa fa-save"})])],1)],1):t._e(),t._v(" "),t.globalTags?a("div",[a("b-list-group",t._l(t.globalTags,function(e,n){return a("b-list-group-item",{key:n,staticClass:"d-flex align-items-center"},[a("span",{staticClass:"mr-auto"},[t._v(t._s(e.name))]),t._v(" "),t.recordId&&!e.attached?a("b-button",{staticClass:"add-tag",attrs:{variant:"outline-success"},on:{click:function(a){return t.attachTag(e)}}},[a("i",{staticClass:"fa fa-tag"})]):t._e(),t._v(" "),t.canManageGlobalTags()?a("b-button",{attrs:{variant:"outline-danger"},on:{click:function(a){return t.deleteTag(e)}}},[a("i",{staticClass:"fa fa-trash"})]):t._e()],1)}),1)],1):t._e()],1),t._v(" "),a("b-form",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Tag cá nhân")]),t._v(" "),a("b-input-group",{staticClass:"mb-3"},[a("b-form-input",{attrs:{type:"text",placeholder:"Nhập tên tag mới"},model:{value:t.tag,callback:function(e){t.tag=e},expression:"tag"}}),t._v(" "),a("b-input-group-append",[a("b-button",{attrs:{variant:"outline-success",id:"hr-tag-modal-btn-save",name:"hr-tag-modal-btn-save"},on:{click:t.createTag}},[a("i",{staticClass:"fa fa-save"})])],1)],1),t._v(" "),a("div",[a("b-list-group",t._l(t.personalTags,function(e,n){return a("b-list-group-item",{key:n,staticClass:"d-flex align-items-center"},[a("span",{staticClass:"mr-auto"},[t._v(t._s(e.name))]),t._v(" "),t.recordId&&!e.attached?a("b-button",{staticClass:"add-tag",attrs:{variant:"outline-success"},on:{click:function(a){return t.attachTag(e)}}},[a("i",{staticClass:"fa fa-tag"})]):t._e(),t._v(" "),a("b-button",{attrs:{variant:"outline-danger"},on:{click:function(a){return t.deleteTag(e)}}},[a("i",{staticClass:"fa fa-trash"})])],1)}),1)],1)],1)])],1),t._v(" "),a("template",{slot:"modal-footer"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.close()}}},[t._v("Đóng")])])],2)],1)},[],!1,p,"data-v-631ab8e1",null);e.a=m.exports},Z1wn:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAICAYAAADN5B7xAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABXSURBVHgBhYtBDQAhDASb3OeeJwEJSDgnSMACDpGABRzAEmjCowtN5tF25pE5HrygCh915AcNFOCIHJaTx/ItmUUqD5IeHYlMmUXxJFvRVbaiq7xH3np0JqIeh7xphPsAAAAASUVORK5CYII="},"ZBG+":function(t,e){},ZPgE:function(t,e){},Zkjy:function(t,e){},"a/7L":function(t,e,a){"use strict";var n=a("xT3c"),i=a("vfns"),s=a("RUzx"),o={name:"single-select-station",components:{Multiselect:a.n(s).a},props:{selectClass:"",stationId:{},regionId:{},provinceId:{},isDisabled:{type:Boolean},placeholder:{default:"Chọn kho"},reset:{},isActive:{default:!1}},data:function(){return{option:null,options:[],storage:null}},created:function(){this.storage=new i.a,this.getAllStation()},watch:{provinceId:function(t,e){t?this.getStationListByProvinceId(t):(this.option=null,this.getAllStation())},option:function(t,e){this.$emit("handleSelectedStation",t)},regionId:function(t,e){t?this.getStationListByRegionId(t):this.getAllStation()},stationId:function(t,e){t?this.setSelectedOption():this.option=null},reset:function(){this.option=null}},methods:{resetOption:function(){this.option=null},setSelectedOption:function(){var t=this;this.options.length>0&&this.stationId&&(this.option=this.options.find(function(e){return parseInt(e.id)===parseInt(t.stationId)}))},getAllStation:function(){var t=this,e=this.storage.get("allStationOfGHTK");e?(this.options=e,this.setSelectedOption()):n.a.getAllStation({is_active:this.isActive}).then(function(e){e.data.success&&(t.options=e.data.data,t.storage.set("allStationOfGHTK",t.options),t.setSelectedOption())}).catch(function(t){console.log(t)})},getStationListByProvinceId:function(t){var e=this,a={provinceId:t};n.a.getStationListByProvinceId(a).then(function(t){t.data.success&&(e.options=t.data.data,e.option=null)}).catch(function(t){console.log(t)})},getStationListByRegionId:function(t){var e=this,a={regionId:t};n.a.getStationListByRegionId(a).then(function(t){t.data.success&&(e.options=t.data.data,e.option=null)}).catch(function(t){console.log(t)})}}},r=a("XyMi");var l=function(t){a("1cl8")},c=Object(r.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{class:t.selectClass,attrs:{options:t.options,disabled:t.isDisabled,placeholder:t.placeholder,label:"name","track-by":"name",selectedLabel:"",deselectLabel:"X",selectLabel:"",searchable:!0},on:{select:function(e){t.$emit("select",e)},remove:function(e){t.$emit("remove",e)}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,l,"data-v-a4fffa4e",null);e.a=c.exports},a8aA:function(t,e){},aD9H:function(t,e){},aSgd:function(t,e){},agCp:function(t,e,a){"use strict";var n=a("PikB"),i=a("JJbb"),s=a("Saf8");e.a={searchStaff:function(t){return n.a.get("AdSearchStaff/searchStaff",{params:t})},exportExcel:function(t){return n.a.get("AdSearchStaff/exportExcel",{params:t})},getListWhStaffByStationId:function(t){return n.a.get("AdSearchWHStaff/getListWhStaffByStationId",{params:t})},getListLoadingBlockByUserAndDate:function(t){return n.a.post("AdSearchWHStaff/getListLoadingBlockByUserAndDate",{params:t})},getContractDetail:function(t){return n.a.get("AdContract/getContractDetail",{params:t})},getUserOfContract:function(t){return n.a.get("AdContract/getUserOfContract",{params:t})},createContract:function(t){return n.a.post("AdContract/createContract",t)},updateContract:function(t){return n.a.post("AdContract/updateContract",t)},disableContract:function(t){return n.a.post("AdContract/disableContract",t)},getListColumnsExport:function(){return n.a.get("/AdSearchStaff/getListColumnsExport")},getContractList:function(t){return n.a.get("AdContract/getContractList",{params:t})},getContractById:function(t){return n.a.get("AdContract/getContractById",{params:t})},getAllProvince:function(){return n.a.get("AdContract/getAllProvince")},getProvinceByRegionId:function(t){return n.a.get("AdContract/getProvinceByRegionId",{params:t})},getAllStation:function(){return n.a.get("AdContract/getAllStation")},getStationListByProvinceId:function(t){return n.a.get("AdContract/getStationListByProvinceId",{params:t})},getStationListByRegionId:function(t){return n.a.get("AdContract/getStationListByRegionId",{params:t})},getProfile:function(t){return n.a.get("AdMasterProfile/getProfile",{params:t})},checkSameCmnd:function(t){return n.a.post("AdMasterProfile/checkSameCmnd",t)},addProfile:function(t){return n.a.post("AdMasterProfile/add",t)},editProfile:function(t){return n.a.post("AdMasterProfile/edit",t)},editVirtualProfile:function(t){return n.a.post("AdMasterProfile/editVirtualProfile",t)},editShift:function(t){return i.a.post("ErpKpiShift/updateShiftConfig",t)},getConfigByUser:function(t){return i.a.get("ErpKpiShift/getConfigByUser",{params:t})},deleteProfile:function(t){return n.a.get("AdMasterProfile/deleteProfile",{params:t})},getUser:function(t){return n.a.get("AdUsers/getUser",{params:t})},getShiftByProfile:function(t){return n.a.get("AdUsers/getShiftByProfile",{params:t})},checkEditLevel:function(t){return n.a.get("AdUsers/checkEditLevel",{params:t})},addUser:function(t){return n.a.post("AdUsers/addUser",t)},editUser:function(t){return n.a.post("AdUsers/editUser",t)},getModuleByStation:function(t){return n.a.get("AdMasterProfile/getModulesByStation",{params:t})},getAllMasterProfile:function(t){return n.a.get("AdMasterProfile/getAllMasterProfile",{params:t})},getMasterProfile:function(t){return n.a.get("AdMasterProfile/getMasterProfile",{params:t})},getWorkTypeByPositionJob:function(t){return n.a.get("AdUsers/getworktypeV2",{params:t})},getListBank:function(t){return n.a.get("AdMasterProfile/getListBanks",{params:t})},getListBrandsByBankCode:function(t){return n.a.get("AdMasterProfile/getListBrandsByBankCode",{params:t})},getListModuleByStationId:function(t){return n.a.get("AdSearchWHStaff/getListModuleByStationId",{params:t})},getListExternalStation:function(t){return n.a.get("AdStations/getListExternalStationForSelection",{params:t})},getLeaderByStation:function(t){return n.a.get("AdUsers/getLeaderByStation",{params:t})},updateConfigReportLineMultipleStaff:function(t){return n.a.post("AdReportingLine/updateConfigReportLineMultipleStaff",{params:t})},updateConfigReportLineSingleStaff:function(t){return n.a.post("AdReportingLine/updateConfigReportLineSingleStaff",{params:t})},getListConfigByLeader:function(t){return n.a.get("AdReportingLine/getReportingLineConfig",{params:t})},getManagerEmployeeOfUser:function(t){return n.a.get("AdReportingLine/getManagerEmployeeOfUser",{params:t})},updateManagerEmployeeOfUser:function(t){return n.a.post("AdReportingLine/updateManagerEmployeeOfUser",t)},checkCanCustomUserName:function(t){return n.a.get("AdUsers/checkCanCustomUserName",{params:t})},suggestManagerEmployeeForUser:function(t){return n.a.post("AdUsers/suggestManagerEmployeeForUser",t)},getMemberLeaderChange:function(t){return n.a.get("AdUsers/getMemberChangeInDate",{params:t})},checkPermissionEditCmnd:function(t){return n.a.get("AdMasterProfile/checkPermissionEditCmnd",{params:t})},getContractByProfile:function(t){return n.a.get("AdContract/getContractByProfile",{params:t})},getListAppendix:function(t){return n.a.get("AdContract/getListAppendix",{params:t})},uploadFileContract:function(t){return n.a.post("AdContract/uploadFileContract",t)},getFileContract:function(t){return n.a.get("AdContract/getFileContract",{params:t})},getFileContractNew:function(t){return s.a.get("econtract/get-list-file-contract",{params:t})},getFileEContractNew:function(t){return s.a.get("econtract/get-file-contract",{params:t})},uploadFileSalary:function(t){return n.a.post("AdContract/uploadFileSalary",t)},checkStatusUploadSalary:function(t){return n.a.get("AdContract/checkStatusUploadSalary",{params:t})},checkPermissionUploadSalary:function(t){return n.a.get("AdContract/CheckPermissionUploadSalary",{params:t})},quickChangePassword:function(t){return n.a.post("AdUsers/quickChangePassword",t)},createNewUser:function(t){return n.a.post("AdUsers/createNewUser",t)},checkIsChangeKpi:function(t){return n.a.get("AdUsers/checkIsChangeKpi",{params:t})}}},ahjL:function(t,e){},b2C9:function(t,e,a){"use strict";var n=a("fZjL"),i=a.n(n),s=a("Zx67"),o=a.n(s),r=a("Zrlr"),l=a.n(r),c=a("wxAW"),d=a.n(c),u=a("zwoO"),h=a.n(u),p=a("Pf15"),m=a.n(p),f=function(t){function e(){return l()(this,e),h()(this,(e.__proto__||o()(e)).apply(this,arguments))}return m()(e,t),d()(e,[{key:"getStatusName",value:function(t){return e.listStatus[t]}},{key:"getStatusClass",value:function(t){switch(t){case"contact":return"badge badge-default";case"interview":return"badge badge-primary";case"take_job":case"taken":return"badge badge-success";case"rejected":return"badge badge-danger";case"expect_join":case"selected":return"badge badge-info";case"save_info":return"badge badge-light";default:return"badge badge-default"}}},{key:"getStatusOptions",value:function(){var t=[],a=e.listStatus;return i()(a).forEach(function(e){t.push({value:e,name:a[e]})}),t}}]),e}(a("MUME").a);f.listStatus={contact:"Cần liên hệ",received:"Đã tiếp nhận",contact_fail:"Liên hệ không thành công",cancel_recruit:"Hủy ứng tuyển",interview:"Đã hẹn phỏng vấn",saveinfo:"Lưu thông tin",expect_join:"Đã trúng tuyển",take_job:"Đã nhận việc",rejected:"Trượt phỏng vấn",refused:"Từ chối nhận việc",noStatus:"Chưa có trạng thái",selected:"Trúng tuyển",new:"Đã ứng tuyển",save_info:"Lưu thông tin",taken:"Nhận việc"},f.referralEnums={facebook:"Facebook/internet",web:"Jobsite tuyển dụng",workfes:"Ngày hội việc làm",gtvlservice:"Dịch vụ GTVL",ghtk:"Nhân viên GHTK",employee:"Giới thiệu nội bộ",friend:"Bạn bè, người thân",collabor:"CTV tuyển dụng",other:"Khác",outdoor:"Quảng cáo ngoài trời"},f.sourceOptions={outdoor:[{text:"Poster/Banner/Tờ rơi",value:"poster"},{text:"Booth tuyển dụng",value:"booth"}],facebook:[{text:"Ads",value:"ads"},{text:"Cá nhân",value:"personal"}],web:[{text:"Ybox",value:"ybox"},{text:"Vieclam24h",value:"vieclam24h"},{text:"Timviecnhanh",value:"timviecnhanh"},{text:"JobsGO",value:"jobsgo"},{text:"Top CV",value:"topcv"},{text:"Career Builder",value:"career_builder"},{text:"Chợ tốt",value:"cho_tot"},{text:"Career Link",value:"career_link"},{text:"Khác",value:"other"}]},f.sourceDesc={outdoor:{poster:"Poster/Banner/Tờ rơi",booth:"Booth tuyển dụng"},facebook:{ads:"Ads",personal:"Cá nhân"},web:{ybox:"Ybox",vieclam24h:"Vieclam24h",timviecnhanh:"Timviecnhanh",jobsgo:"JobsGO",topcv:"Top CV",career_builder:"Career Builder",cho_tot:"Chợ tốt",career_link:"Career Link",other:"Khác"}},f.joinTimeOption=[{desc:"Ngay sau phỏng vấn",value:"after_interview"},{desc:"Trong tuần này",value:"in_week"},{desc:"Trong tuần tới",value:"next_week"},{desc:"Trao đổi thêm khi phỏng vấn",value:"unknown"}],f.workTypeDesc={fulltime:"Full-time",parttime:"Part-time",inprovince:"Nội tỉnh",interprovince:"Liên tỉnh",longdistance:"Đường dài"},f.workShiftDesc={day:"Ca ngày",night:"Ca đêm",all:"Cả 2 ca",morning:"Ca sáng",afternoon:"Ca chiều",befornight:"Ca tối",sunday:"Chuyên chủ nhật"},e.a=f},"bJ+M":function(t,e,a){"use strict";var n=a("PikB"),i=a("Saf8"),s=a("4pAE");e.a={getCandidateList:function(t){return n.a.get("/manage-candidates/getCandidates",{params:t})},getCandidateListV2:function(t){return n.a.get("/manage-candidates/getCandidateV2s",{params:t})},getCountCandidateV2s:function(t){return n.a.get("/manage-candidates/getCountCandidateV2s",{params:t})},apiGetListCandidates:function(t){return n.a.get("/manage-candidates/apiGetListCandidates",{params:t})},getJobList:function(t){return n.a.get("manage-candidates/jobs")},getReffererList:function(t){return n.a.get("manage-candidates/referrers")},getCandidateInfo:function(t){return n.a.get("manage-candidates/getCandidateById",{params:t})},checkCandidateExist:function(t){return n.a.get("manage-candidates/checkCandidateExist",{params:t})},seachCandidate:function(t){return n.a.get("manage-candidates/seachCandidate",{params:t})},getProcessorList:function(t){return n.a.get("manage-candidates/processors")},updateStatus:function(t){return n.a.put("manage-candidates/changeStatus",t)},updateStatusCandidate:function(t){return n.a.put("manage-candidates/updateStatusCandidate",t)},addComment:function(t){return n.a.post("manage-candidates/comment",t)},addProcessor:function(t){return n.a.post("manage-candidates/addProcessor",t)},removeProcessor:function(t){return n.a.delete("manage-candidates/removeProcessor",{params:t})},getCurrUser:function(t){return n.a.get("manage-candidates/getInfoCurrentUser",t)},updateCandidate:function(t){return n.a.post("manage-candidates/updateCandidate",t)},createCandidate:function(t){return n.a.post("manage-candidates/createCandidate",t)},linkToMasterProfile:function(t){return n.a.put("manage-candidates/linkToMasterProfile",t)},existedMasterProfile:function(t){return n.a.get("manage-candidates/existedMasterProfile",{params:t})},updateAppointmentDate:function(t){return n.a.post("manage-candidates/updateAppointmentDate",t)},exportCandidateList:function(t){return n.a.post("manage-candidates/exportCandidates",t)},importCandidateList:function(t){return n.a.post("manage-candidates/importCandidates",t)},checkCanExport:function(){return n.a.get("manage-candidates/canExportCandidates")},updateReferrer:function(t){return n.a.put("manage-candidates/updateReferrer",t)},exportCvCandidate:function(t){return n.a.get("manage-candidates/exportCvCandidate",{params:t})},getListTagByHr:function(t){return n.a.get("AdCandidates/getListTagByHr",{params:t})},addTagByHr:function(t){return n.a.post("AdCandidates/addTagByHr",t)},deleteTagByHr:function(t){return n.a.post("AdCandidates/deleteTagByHr",t)},cancelAttachTag:function(t){return n.a.post("AdCandidates/cancelAttachTag",t)},attachTagCandidate:function(t){return n.a.post("AdCandidates/attachTagCandidate",t)},evaluateCandidate:function(t){return n.a.post("AdCandidates/evaluateCandidate",t)},getDataEvaluationById:function(t){return n.a.get("manage-candidates/getDataEvaluationById",{params:t})},sendSmsToCandidate:function(t){return n.a.post("manage-candidates/sendSmsToCandidate",t)},getFileCandidate:function(t){return n.a.get("manage-candidates/getFileCandidate",{params:t})},getTagsOfCandidate:function(t){return n.a.post("manage-candidates/getTagsOfCandidate",t)},sendSmsAccToEmployee:function(t){return n.a.post("manage-candidates/sendSmsAccToEmployee",t)},quickCreateCandidate:function(t){return n.a.post("AdCandidates/quickCreateCandidate",t)},countCandidateByStatus:function(t){return n.a.get("AdCandidates/countCandidateByStatus",{params:t})},countCandidateByTag:function(t){return n.a.get("AdCandidates/countCandidateByTag",{params:t})},getJobOrCandidate:function(t){return n.a.get("AdCandidates/getJobOrCandidate",{params:t})},updateStatusJob:function(t){return n.a.post("manage-candidates/updateStatusJob",t)},reviewCandidate:function(t){return n.a.post("manage-candidates/reviewCandidate",t)},getCandidateReview:function(t){return n.a.get("manage-candidates/get-candidate-review",{params:t})},getLogs:function(t){return i.a.get("/candidate/get-log-mp",{params:t})},getLatestLog:function(t){return i.a.get("/candidate/get-latest-log-mp",{params:t})},addNote:function(t){return s.a.post("/recruitment/candidate/add-comment",t)}}},bkph:function(t,e,a){"use strict";var n=a("RUzx"),i={name:"multi-select-region",components:{Multiselect:a.n(n).a},props:{isSelectAll:{default:1},autoClose:{default:!1},hideSelected:{default:!1},limitProp:{default:5},isDisabled:{default:!1},regions:{default:null},placeholder:{default:"Chọn miền"},customClass:{default:"multiselect-primary"}},data:function(){return{option:null,options:[{id:"HN",name:"Hà Nội"},{id:"HCM",name:"Thành Phố HCM"},{id:"MB",name:"Miền Bắc"},{id:"MT",name:"Miền Trung"},{id:"MN",name:"Miền Nam"}]}},created:function(){this.setSelectedOption()},watch:{regions:function(t,e){this.setSelectedOption()},option:function(t,e){this.$emit("handleSelectedRegion",t)}},methods:{setSelectedOption:function(){var t=this;this.options.length>0&&this.regions?(this.option=[],this.regions.split(",").forEach(function(e){var a=t.options.find(function(t){return""+t.id==""+e});a&&t.option.push(a)})):this.option=null}}},s=a("XyMi");var o=function(t){a("48eD")},r=Object(s.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{class:t.customClass,attrs:{options:t.options,multiple:!0,placeholder:t.placeholder,label:"name","track-by":"id","selected-label":"","deselect-label":"X","select-label":"Chọn",disabled:t.isDisabled,limit:t.limitProp,"hide-selected":t.hideSelected,"close-on-select":t.autoClose},on:{input:function(e){t.$emit("input",e)}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,o,"data-v-100e6e7a",null);e.a=r.exports},cA8J:function(t,e){},cFmi:function(t,e,a){"use strict";var n=a("Saf8");e.a={addHrOrderNote:function(t,e){return n.a.post("/hr-order/"+t+"/note",e)},updateHandler:function(t,e){return n.a.post("/hr-order/"+t+"/handler",e)},updateResignationProposal:function(t,e){return n.a.post("/hr-order/resignations/"+t,e)},cancelResignOrder:function(t,e){return n.a.post("/hr-order/resignations/cancel/"+t,e)},countResignationProposals:function(){return n.a.get("/hr-order/resignations/count")},searchResignationProposals:function(){return n.a.get("/hr-order/resignations/search")},getPreResignationProposalDetail:function(t){return n.a.get("/hr-order/pre-resignations/"+t)},createPreResignationProposal:function(t){return n.a.post("/hr-order/pre-resignations",t)},updatePreResignationProposal:function(t,e){return n.a.post("/hr-order/pre-resignations/"+t,e)},unexpectedResignation:function(t,e){return n.a.post("/hr-order/pre-resignations/"+t+"/unexpected-resign",e)}}},cQX6:function(t,e){},cq0H:function(t,e){},csCE:function(t,e,a){"use strict";var n=a("mvHQ"),i=a.n(n),s=a("RUzx"),o=a.n(s),r=a("xF2Z"),l={name:"single-select-department",components:{Multiselect:o.a},props:{departmentName:{},departmentId:{},customClass:"",isDisabled:{type:Boolean},placeholder:{default:"Chọn bộ phận"}},data:function(){return{option:null,options:[],readonly:!1}},created:function(){this.getList()},watch:{option:function(t,e){this.$emit("handleSelectedDepartment",t)},departmentName:function(t,e){this.setSelectedOption()},departmentId:function(t,e){t?this.setSelectedOption():this.option=null}},methods:{getList:function(){var t=this;if(sessionStorage.getItem("allDepartment"))return this.options=JSON.parse(sessionStorage.getItem("allDepartment")),void this.setSelectedOption();r.a.getDepartmentList().then(function(e){e.data.success&&(t.options=e.data.data,t.setSelectedOption(),sessionStorage.setItem("allDepartment",i()(t.options)))}).catch(function(t){console.log(t)})},setSelectedOption:function(){var t=this;this.options.length>0&&this.departmentName&&(this.option=this.options.find(function(e){return e.name===t.departmentName})),this.options.length>0&&this.departmentId&&(this.option=this.options.find(function(e){return parseInt(e.id)===parseInt(t.departmentId)}))}}},c=a("XyMi"),d=Object(c.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("multiselect",{class:t.customClass,attrs:{options:t.options,placeholder:"Chọn bộ phận",label:"name","track-by":"name",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn",searchable:!0,disabled:t.isDisabled},on:{select:function(e){t.$emit("select",e)},remove:function(e){t.$emit("remove",e)}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])],1)},[],!1,null,null,null);e.a=d.exports},d6YO:function(t,e,a){"use strict";var n=a("Dd8w"),i=a.n(n),s=a("Xxa5"),o=a.n(s),r=a("exGp"),l=a.n(r),c=a("RUzx"),d={name:"single-select-province-tax",components:{Multiselect:a.n(c).a},props:{placeholder:{type:String,default:"Chọn tỉnh"},isDisabled:{type:Boolean},provinceCode:{default:null},state:Boolean},data:function(){return{option:null,options:[]}},watch:{option:function(t,e){this.$emit("handleSelectedProvince",t)},provinceCode:function(){var t=this;this.provinceCode&&(this.option=this.options.find(function(e){return parseInt(e.id)===parseInt(t.provinceCode)}))}},created:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.getters["location/getRealProvinces"];case 2:t.options=e.sent,t.setDisplayName();case 4:case"end":return e.stop()}},e,t)}))()},methods:{setDisplayName:function(){this.options=this.options.map(function(t){var e=null===t.end_date||new Date(t.end_date)>new Date?t.prefix+" "+t.name:t.prefix+" "+t.name+" (Cũ)";return i()({},t,{name:e})})}}},u=a("XyMi");var h=function(t){a("04d5")},p=Object(u.a)(d,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mb-4"},[a("multiselect",{class:{stateTrue:!0===t.state,stateFalse:0==t.state},attrs:{placeholder:t.placeholder,disabled:t.isDisabled,options:t.options,label:"name","track-by":"name",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn"},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])],1)},[],!1,h,"data-v-7ca601f8",null);e.a=p.exports},"d8s/":function(t,e){},d9Jv:function(t,e){},dAhr:function(t,e,a){"use strict";var n=a("mcfJ"),i=a("XyMi");var s=function(t){a("9xWJ")},o=Object(i.a)(n.a,void 0,void 0,!1,s,null,null);e.a=o.exports},dbv8:function(t,e,a){"use strict";var n=a("RUzx"),i=a.n(n),s=a("CAWZ"),o={components:{Multiselect:i.a},props:{documentId:null,reset:!1,positionId:null,customClass:""},data:function(){return{option:null,options:[]}},created:function(){this.getList()},watch:{option:function(t){this.$emit("handleSelected",t)},documentId:function(t){t?this.setSelectedOption():this.option=null},reset:function(){this.option=null},positionId:function(t){this.positionId=t,this.getList()}},methods:{getList:function(){var t=this;s.a.getDocumentTypes({positionId:this.positionId}).then(function(e){var a=e.data;if(a.success){var n=[];a.data.list.map(function(t){n.push({id:t.ErpDocument.id,name:(t.ErpDocument.sub_type?t.ErpDocument.sub_type:"Không xác định")+" - "+t.ErpDocument.name})}),t.options=n,t.setSelectedOption()}}).catch(function(t){console.log(t)})},setSelectedOption:function(){var t=this;this.options.length>0&&this.documentId&&(this.option=this.options.find(function(e){return parseInt(e.id)===parseInt(t.documentId)}))}}},r=a("XyMi"),l=Object(r.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("multiselect",{class:t.customClass,attrs:{options:t.options,placeholder:"Loại hồ sơ",label:"name","track-by":"name",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn",searchable:!0},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v("Loại hồ sơ")])])],1)},[],!1,null,null,null);e.a=l.exports},dgSy:function(t,e){},dsUA:function(t,e){},e1UT:function(t,e){},eDz7:function(t,e){},eHUP:function(t,e,a){"use strict";var n=a("Saf8");e.a={getListTeam:function(t){return n.a.get("team/list-all-team",{params:t})},addMember:function(t,e){return n.a.post("team/"+t+"/member",e)},getTeamConfig:function(t){return n.a.get("team/list-team",{params:t})},getTeamDetail:function(t){return n.a.get("/team/get-team-detail",{params:{team_id:t}})},deleteTeam:function(t){return n.a.delete("/team/"+t)},getUserInfo:function(t){return n.a.get("/team/member",{params:{member_id:t}})},getListSkill:function(t){return n.a.get("/user-profile/skills",{params:t})},updateSkill:function(t){return n.a.post("/tag-staffs/update-tags",t)},getSkillOfUser:function(t){return n.a.get("/user-profile/"+t+"/skills")},getTeamConfigs:function(t){return n.a.get("teams/list-team",{params:t})},getChildTeam:function(t){return n.a.get("teams/get-children-team",{params:t})},removeTeam:function(t){return n.a.delete("teams/delete/"+t)},searchTeam:function(t){return n.a.get("teams/search",{params:t})},getTeamFromSearch:function(t){return n.a.get("teams/get-team-from-search",{params:t})},getUserActiveByTeam:function(t){return n.a.get("teams/get-user-active-by-team",{params:t})},getUserHistoryByTeam:function(t){return n.a.get("teams/get-user-history-by-team",{params:t})},updateSkillTeam:function(t){return n.a.post("teams/update-skill",t)},updateTeam:function(t){return n.a.post("teams/update",t)},addMemberTeam:function(t){return n.a.post("teams/add-member",t)},updateMemberTeam:function(t){return n.a.post("teams/update-member",t)},updatePositionMember:function(t){return n.a.post("teams/update-position-member",t)},deleteMember:function(t){return n.a.delete("teams/delete-member/"+t)},infoUserInTeam:function(t){return n.a.post("teams/info-user-in-team",t)},getTimeLine:function(t){return n.a.get("teams/get-timeline",{params:t})},getCountPosition:function(t){return n.a.get("teams/get-count-position",{params:t})},updateTeamKpi:function(t){return n.a.post("teams/update-team-kpi",t)}}},eLJX:function(t,e){},eQ2R:function(t,e){},"eX/7":function(t,e){},eitH:function(t,e,a){"use strict";var n=a("PikB");e.a={getReports:function(t){return n.a.get("/AdHr/getEkycReports",{params:t})},approveEkycReport:function(t){return n.a.post("/AdHr/approveEkycReport",t)},confirmIdentifyData:function(t){return n.a.post("/AdProfiles/confirmIdentifyData",t)},rejectEkycData:function(t){return n.a.post("/AdProfiles/rejectEkycData",t)},getEkycImages:function(t){return n.a.get("/AdProfiles/getEkycImages",{params:t})},getConfirmedEkycData:function(t){return n.a.post("/AdProfiles/getConfirmedEkycData",t)}}},ekMm:function(t,e){},fBxE:function(t,e){},fEi7:function(t,e,a){"use strict";a.d(e,"b",function(){return f});var n,i,s=a("Xxa5"),o=a.n(s),r=a("exGp"),l=a.n(r),c=a("mtWM"),d=a.n(c),u=a("4WGu"),h=this,p=new(a("vfns").a)("local"),m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{access_token:null,refresh_token:null};p.set(u.a.gchat.authStorage,t)},f=function(){var t=null;try{var e=p.get(u.a.gchat.authStorage);e&&e.access_token&&"null"!==e.access_token&&(t=e.access_token)}catch(t){u.a.isDev&&console.error("[Gchat] getAccessToken",t)}return t},g=function(){var t=null;try{var e=p.get(u.a.gchat.authStorage);e&&e.refresh_token&&"null"!==e.refresh_token&&(t=e.refresh_token)}catch(t){u.a.isDev&&console.error("[Gchat] getRefreshToken",t)}return t},v=(n=l()(o.a.mark(function t(){var e,a,n,i,s,r,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=null,t.prev=1,u.a.gchat.domain){t.next=5;break}return u.a.isDev&&console.error("[Gchat] verifyToken","gchat auth domain is undefined!"),t.abrupt("return",null);case 5:if(a=void 0,(a=l||f())&&"null"!==a){t.next=10;break}return u.a.isDev&&console.error("[Gchat] verifyToken","gchat access token is null!"),t.abrupt("return",null);case 10:return t.next=12,d.a.get(u.a.gchat.authDomain+"/api/v3/auth/access_token",{headers:{Authorization:"Bearer "+a,apptype:"web"}});case 12:n=t.sent,i=n.data,s=i.success,r=i.data,s&&(e=r.access_token),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),u.a.isDev&&console.error("[Gchat] verifyToken error: ",t.t0);case 20:return t.abrupt("return",e);case 21:case"end":return t.stop()}},t,h,[[1,17]])})),function(){return n.apply(this,arguments)}),_=(i=l()(o.a.mark(function t(){var e,a,n,i,s,r,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=null,t.prev=1,u.a.gchat.authDomain){t.next=5;break}return u.a.isDev&&console.error("[Gchat] refreshToken","gchat auth domain is undefined!"),t.abrupt("return",null);case 5:if(a=void 0,(a=l||g())&&"null"!==a){t.next=10;break}return u.a.isDev&&console.error("[Gchat] refreshToken","gchat refresh token is null!"),t.abrupt("return",null);case 10:return t.next=12,d.a.post(u.a.gchat.authDomain+"/api/v3/auth/refresh_token",{refresh_token:a},{headers:{apptype:"web"}});case 12:n=t.sent,i=n.data,s=i.success,r=i.data,s&&r.access_token&&(e=r.access_token,m(r)),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),u.a.isDev&&console.error("[Gchat] refreshToken error: ",t.t0);case 20:return t.abrupt("return",e);case 21:case"end":return t.stop()}},t,h,[[1,17]])})),function(){return i.apply(this,arguments)});e.a={saveGchatAuth:m,getToken:f,getRefreshToken:g,verifyToken:v,refreshToken:_}},fXsv:function(t,e){},fjPt:function(t,e){},fjub:function(t,e){},fogI:function(t,e){},frDO:function(t,e,a){"use strict";var n=a("JJbb");e.a={apiGetAllProvince:function(t){return n.a.get("sos/apiGetAllProvince",{params:t})},apiGetAllStation:function(t){return n.a.get("sos/apiGetAllStation",{params:t})},apiGetListUsers:function(t){return n.a.get("sos/apiGetListUsers",{params:t})},apiGetAllReasonTicket:function(t){return n.a.get("sos/apiGetAllReasonTicket",{params:t})},apiGetRelationParentToChild:function(t){return n.a.get("sos/apiGetRelationParentToChild",{params:t})},apiGetTickets:function(t){return n.a.get("sos/apiGetListTickets",{params:t})},apiExportTickets:function(t){return n.a.get("sos/apiExportTickets",{params:t})},apiGetInfoUserLogin:function(){return n.a.get("sos/apiGetInfoUserLogin")},apiInsertLogTicket:function(t){return n.a.post("sos/apiInsertLogTicket",t)},apiRemoveUserHandleTicket:function(t){return n.a.post("sos/apiRemoveUserHandleTicket",t)},apiAddUserHandleTicket:function(t){return n.a.post("sos/apiAddUserHandleTicket",t)},apiChangeStatusTicket:function(t){return n.a.post("sos/apiChangeStatusTicket",t)},apiGetListUsersHandleTicket:function(t){return n.a.get("sos/apiGetListUsersHandleTicket",{params:t})},apiChangeTypeTicket:function(t){return n.a.post("sos/apiChangeTypeTicket",t)},apiGetCountTicketGroupByType:function(t){return n.a.get("sos/apiGetCountTicketGroupByType",{params:t})},apiChangeStatusTicketUser:function(t){return n.a.post("sos/apiChangeStatusTicketUser",t)},addComment:function(t){return n.a.post("sos/comment",t)}}},fwrr:function(t,e,a){"use strict";var n=a("mtWM"),i=a.n(n),s=a("4WGu"),o=a("Saf8"),r=s.a.domainApiHrm+"/graphql/public";e.a={graphqlQuery:function(t){return i.a.post(r,{query:t})},getProvinceByRegion:function(t){var e=t.page?t.page:1,a=t.limit?t.limit:1e3,n=t.regions?t.regions:"",i=t.scope?t.scope:"all";return o.a.get(r,{params:{query:"\n        {\n            ProvinceListingV2(\n                limit: "+a+"\n                page: "+e+'\n                regions: "'+n+'"\n                scope: "'+i+'"\n            ){\n                data {\n                    id\n                    name\n                    start_date\n                    end_date\n                    prefix\n                }\n                total\n                current_page\n            }\n        }'}})}}},fwz2:function(t,e){},g0Nb:function(t,e){},g1mJ:function(t,e){},g7zU:function(t,e){},gRdF:function(t,e){},glWn:function(t,e){},gqte:function(t,e){},"h0+N":function(t,e){},"hC/b":function(t,e,a){"use strict";var n=a("d7EF"),i=a.n(n),s=a("W3Iv"),o=a.n(s),r=a("mvHQ"),l=a.n(r),c=a("BO1k"),d=a.n(c),u=a("fZjL"),h=a.n(u),p=a("pFYg"),m=a.n(p),f=a("7+uW"),g=a("PJh5"),v=a.n(g),_=a("4WGu"),b=a("vfns"),y=a("fEi7"),C=a("4WGu");e.a={getToken:function(){var t=new b.a("local").get(C.a.oidc.tokenIamStorage),e="";if(t&&t.accessToken&&(e=C.a.bearerKey+" "+t.accessToken.accessToken),this.isInIframe()){var a=y.a.getToken();a&&(e=a)}return e},isInIframe:function(){try{return window.self!==window.top}catch(t){return!0}},isOnAdminDomain:function(){var t=new URL(_.a.domain),e=new URL(document.referrer||location.origin);return t.host===e.host},getBaseHost:function(t){try{var e=new URL(t).host;if(e.split(".").length<=2)return e;var a=e.indexOf(".");return e.substr(a+1)}catch(t){return console.log(t),null}},isJsonString:function(t){try{JSON.parse(t)}catch(t){return!1}return!0},isEmpty:function(t){return!(t instanceof Date||t instanceof File)&&(!t||("string"==typeof t&&!t.trim()||(!(!Array.isArray(t)||0!==t.length)||"object"===(void 0===t?"undefined":m()(t))&&0===h()(t).length)))},upperCaseEachFirstLetter:function(t){if(t)return t.split(" ").map(function(t){return t.toLowerCase().charAt(0).toUpperCase()+t.toLowerCase().slice(1)}).join(" ")},checkValidDateFormat:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD";return v()(t,e).format(e)===t},showMessage:function(t,e,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4e3;a||(a="Thông báo"),"success"===e?f.default.notify({group:"default",type:"bg-success text-white",title:a,text:t,duration:n}):"error"===e?f.default.notify({group:"default",type:"bg-danger text-white",title:a,text:t,duration:n}):f.default.notify({group:"default",type:"bg-warning text-dark",title:a,text:t,duration:n})},encodeQueryData:function(t){return h()(t).map(function(e){return[e,t[e]].map(encodeURIComponent).join("=")}).join("&")},formatDate:function(t,e){return t?v()(t).format(e||"DD-MM-YYYY"):null},showToast:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;"success"===e?f.default.notify({group:"toast",type:"bg-success text-white toast-style",title:'<i class="fas fa-info-circle"></i> Thông báo<i class="fas fa-times float-right"></i>',text:t,duration:a}):"error"===e?f.default.notify({group:"toast",type:"bg-danger text-dark toast-style",title:'<i class="fas fa-info-circle"></i> Lỗi<i class="fas fa-times float-right"></i>',text:t,duration:a}):"warning"===e?f.default.notify({group:"toast",type:"bg-warning text-dark toast-style",title:'<i class="fas fa-info-circle"></i> Lưu ý<i class="fas fa-times float-right"></i>',text:t,duration:a}):f.default.notify({group:"toast",type:"bg-info text-dark toast-style",title:'<i class="fas fa-info-circle"></i> Thông báo<i class="fas fa-times float-right"></i>',text:t,duration:a})},cleanToast:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"toast";f.default.notify({group:t,clean:!0})},formatMoney:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return t?a+(t+="").replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,e)+n:"0"},inputMoney:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:",";if(!t||!t[e])return null;var n=t[e]+"";t[e]=n.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,a)},reformatMoney:function(t){return t.replace(/\D/g,"")},replaceData:function(t,e,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";try{if("object"!==(void 0===t?"undefined":m()(t))&&!e)return t.replace(a,n);if("string"==typeof e&&(!t[e]||"string"!=typeof t[e]))return;if(Array.isArray(e)&&e.length){var i=!0,s=!1,o=void 0;try{for(var r,l=d()(e);!(i=(r=l.next()).done);i=!0){var c=r.value;t[c]&&"string"==typeof t[c]&&(t[c]=t[c].replace(a,n))}}catch(t){s=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(s)throw o}}}}catch(t){console.log(t)}},openLink:function(t){t?window.open(t,"_blank"):this.showMessage("Chưa có tài liệu","warn")},validValue:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{max:null,min:null,length:null};return void 0===t||null===t?null:"object"===(void 0===t?"undefined":m()(t))?void 0===e||null===e?null:""===t[e]||null===t[e]||void 0===t[e]?t[e]:(!isNaN(a.max)&&t[e]>+a.max&&(t[e]=+a.max),!isNaN(a.min)&&t[e]<+a.min&&(t[e]=+a.min),!isNaN(a.length)&&(t[e]+"").length>+a.length&&(t[e]=t[e].substring(0,+a.length)),t[e]):""===t||null===t||void 0===t?t[e]:(!isNaN(a.max)&&+t>+a.max&&(t=+a.max),!isNaN(a.min)&&+t<+a.min&&(t=+a.min),!isNaN(a.length)&&(t+"").length>+a.length&&(t=t.substring(0,+a.length)),t)},resetData:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(Array.isArray(t))return t.splice(0,t.length),t;if(a<1||t instanceof File||t instanceof Date)return t=null;if(t instanceof Object)for(var n in e?Array.isArray(e)||(e=[e]):e=[],t)e.includes(n)||(Array.isArray(t[n])?t[n].splice(0,t[n].length):1===a||t[n]instanceof File||t[n]instanceof Date?t[n]=null:t[n]instanceof Object?this.resetData(t[n],e,a-1):t[n]=null);else t=null;return t},genCode:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"BH",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6;return e+"0".repeat(n>(t+="").length?n-t.length:0)+t+a},getFileType:function(t){if(!t)return null;var e="";if(t instanceof File||t instanceof Blob){if(t.type.includes("video/"))return"video";if(t.type.includes("audio/"))return"audio";if(t.type.includes("image/"))return"image";if("application/pdf"===t.type)return"pdf";e=t.name.split(".").pop().toLowerCase()}else e=t.split("?").shift().split(".").pop().toLowerCase();return["jpeg","png","gif","tiff","psd","jpg","eps","ai","indd","raw","bmp","svg"].includes(e)?"image":["pdf"].includes(e)?"pdf":["doc","docx","odt","rtf"].includes(e)?"doc":["xls","xlsx","xlsb"].includes(e)?"excel":["txt","csv"].includes(e)?"text":["mpeg","mp4","avi","ts","webm","3gp","3g2","mov","mkv"].includes(e)?"video":["mp3","aac","ogg","opus","wav"].includes(e)?"audio":["zip","rar","7z","tar"].includes(e)?"zip":"other"},onlyNumber:function(t){var e=t.keyCode?t.keyCode:t.which;(e<48||e>57)&&45!==e&&t.preventDefault()},importLibraryTracingLogs:function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://web-analytic.ghtklab.com/tracing.js",t.id="trackings";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)},removeLibraryTracingLogs:function(){document.getElementById("trackings").remove()},filterHtml:function(t){return t=(t=t.replaceAll(/<(\/?[^ >]+)([^>]*)>/g,"<$1>")).replaceAll(/<\/?script>/gi,"")},removeVietnameseTone:function(t){return(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a")).replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e")).replace(/ì|í|ị|ỉ|ĩ/g,"i")).replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o")).replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u")).replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y")).replace(/đ/g,"d")).replace(/À|Á|Ạ|Ả|Ã|Â|Ầ|Ấ|Ậ|Ẩ|Ẫ|Ă|Ằ|Ắ|Ặ|Ẳ|Ẵ/g,"A")).replace(/È|É|Ẹ|Ẻ|Ẽ|Ê|Ề|Ế|Ệ|Ể|Ễ/g,"E")).replace(/Ì|Í|Ị|Ỉ|Ĩ/g,"I")).replace(/Ò|Ó|Ọ|Ỏ|Õ|Ô|Ồ|Ố|Ộ|Ổ|Ỗ|Ơ|Ờ|Ớ|Ợ|Ở|Ỡ/g,"O")).replace(/Ù|Ú|Ụ|Ủ|Ũ|Ư|Ừ|Ứ|Ự|Ử|Ữ/g,"U")).replace(/Ỳ|Ý|Ỵ|Ỷ|Ỹ/g,"Y")).replace(/Đ/g,"D")).toLowerCase()).replace(/[\r\n\t ]+/g," ")).trim()},arrayWrap:function(t){return t?Array.isArray(t)?t:[t]:[]},calDistanceDate:function(t,e){var a=new Date(t),n=new Date(e),i=Math.abs((n.getTime()-a.getTime())/864e5);return Math.ceil(i)},createFormData:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(e||(e=new FormData),!t)return e;var n="";for(var i in t)n=a?t[i]instanceof File?a.replaceAll("]","").replaceAll("[",".")+"["+i+"]":a+"["+i+"]":i,"boolean"==typeof t[i]?e.append(n,t[i]?1:0):t[i]||0===t[i]?["string","number","bigint"].includes(m()(t[i]))||t[i]instanceof File?e.append(n,t[i]):t[i]instanceof Date?e.append(n,t[i].toISOString()):t[i]instanceof Date?e.append(n,t[i].toISOString()):this.createFormData(t[i],e,n):e.append(n,"");return e},cloneDeep:function(t){return JSON.parse(l()(t))},updateObjectByKeys:function(t,e,a){if(t&&"object"===(void 0===t?"undefined":m()(t))&&Array.isArray(e)&&0!==e.length){for(var n=t,i=e.length-1,s=0;s<i;s++){var o=e[s];n.hasOwnProperty(o)&&"object"===m()(n[o])||(n[o]={}),n=n[o]}n[e[i]]=a}},format_date:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD",a=new Date(t);if(isNaN(a))return"Invalid date";var n={M:a.getMonth()+1,D:a.getDate(),Y:a.getFullYear(),H:a.getHours(),m:a.getMinutes(),s:a.getSeconds()};return e.replace(/(M+|D+|Y+|H+|m+|s+)/g,function(t,e){var a=n[e.charAt(0)];return e.length>1&&(a=("0"+a).slice(-e.length)),a})},addFieldValue:function(t,e,a){null!==a&&void 0!==a&&""!==a&&(Array.isArray(a)?a.forEach(function(a,n){"object"===(void 0===a?"undefined":m()(a))&&null!==a?o()(a).forEach(function(a){var s=i()(a,2),o=s[0],r=s[1];t.append(e+"["+n+"]["+o+"]",r)}):t.append(e+"["+n+"]",a)}):"object"===(void 0===a?"undefined":m()(a))&&null!==a?o()(a).forEach(function(a){var n=i()(a,2),s=n[0],o=n[1];t.append(e+"["+s+"]",o)}):t.append(e,a))},appendDataToFormData:function(t,e){var a=!0,n=!1,i=void 0;try{for(var s,o=d()(e);!(a=(s=o.next()).done);a=!0){var r=s.value,l=r.name,c=r.value;this.addFieldValue(t,l,c)}}catch(t){n=!0,i=t}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}},removeVietnameseAccent:function(t){for(var e=["aàảãáạăằẳẵắặâầẩẫấậ","dđ","eèẻẽéẹêềểễếệ","iìỉĩíị","oòỏõóọôồổỗốộơờởỡớợ","uùủũúụưừửữứự","yỳỷỹýỵ","AÀẢÃÁẠĂẰẲẴẮẶÂẦẨẪẤẬ","DĐ","EÈẺẼÉẸÊỀỂỄẾỆ","IÌỈĨÍỊ","OÒỎÕÓỌÔỒỔỖỐỘƠỜỞỠỚỢ","UÙỦŨÚỤƯỪỬỮỨỰ","YỲỶỸÝỴ"],a=0;a<e.length;a++){var n=new RegExp("["+e[a].substr(1)+"]","g"),i=e[a][0];t=t.replace(n,i)}return t},validatePositiveNumber:function(t){var e=t.which||t.keyCode,a=String.fromCharCode(e);(/\D/.test(a)||parseFloat(a)<0)&&t.preventDefault()},generateUniqueId:function(t){return t?t+"-"+this.randomStringWithTimestamp():this.randomStringWithTimestamp()},randomStringWithTimestamp:function(){return Math.random().toString(36).substring(2,9)+"-"+v.a.now()},moneyFormat:function(t){return t?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):"0"},appendFormData:function(t,e,a){var n=this;!e||"object"!==(void 0===e?"undefined":m()(e))||e instanceof Date||e instanceof File?e&&t.append(a,e):h()(e).forEach(function(i){n.appendFormData(t,e[i],a?a+"["+i+"]":i)})},getTypeFile:function(t){return t.startsWith("image/")||["jpeg","jpg","jpe","jif","jfif","gif","tiff","tif","psd","eps","ai","indd","raw","png","svg","webp","xbm","ico","cur","bmp","avif","apng"].includes(t.replace("image/",""))?"image":t.startsWith("audio/")||["mp3","aif","cda","mpa","ogg","wav","wma","wpl","mid","midi"].includes(t.replace("audio/",""))?"audio":t.startsWith("video/")||["mp4","mpg","mpeg","avi","flv","m4v","rm","swf","vob","wmv","mov","mkv","h264","3gp","3g2"].includes(t.replace("video/",""))?"video":["pdf","doc","docx","odt","txt","tex","wpd","xps","rtf","md"].includes(t.replace("application/",""))?"docs":"unknown"},downloadFileFromBlob:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pdf",n=window.URL.createObjectURL(t),i=document.createElement("a");i.href=n,i.setAttribute("download",e+"."+a),document.body.appendChild(i),i.click()},base64ToBlob:function(t,e){for(var a=atob(t),n=[],i=0;i<a.length;i+=512){for(var s=a.slice(i,i+512),o=new Array(s.length),r=0;r<s.length;r++)o[r]=s.charCodeAt(r);var l=new Uint8Array(o);n.push(l)}return new Blob(n,{type:e})}}},i4vo:function(t,e){},iFqU:function(t,e){},iOPZ:function(t,e){},iUkY:function(t,e,a){"use strict";var n=a("Xxa5"),i=a.n(n),s=a("exGp"),o=a.n(s),r=a("YhJi"),l=a("pedj"),c=a("IC97"),d=a("D52M"),u=a("SNri"),h=a("hC/b"),p=a("Zx67"),m=a.n(p),f=a("Zrlr"),g=a.n(f),v=a("zwoO"),_=a.n(v),b=a("Pf15"),y=a.n(b),C=function(t){function e(){return g()(this,e),_()(this,(e.__proto__||m()(e)).apply(this,arguments))}return y()(e,t),e}(a("MUME").a);C.yesNoOptions=[{value:1,text:"Có"},{value:0,text:"Không"}],C.workStateOptions=[{value:"stable_job",text:"Có việc làm ổn định"},{value:"precarious_job",text:"Có việc nhưng bấp bênh"},{value:"unemployee",text:"Thất nghiệp"},{value:"age_over",text:"Quá tuổi lao động"}],C.careerPathOptions=[{value:"long_term",text:"Sẽ gắn bó lâu dài"},{value:"temporary",text:"Chỉ làm tạm thời"},{value:"about_to_quit",text:"Đang có ý định nghỉ"}],C.familyEconomicOptions=[{value:"rich",text:"Khá giả"},{value:"normal",text:"Bình thường"},{value:"poor",text:"Khó khăn"},{value:"very_poor",text:"Rất khó khăn"}],C.infoTypeDesc={staff_code:"Mã MP",fullname:"Họ và tên nhân viên",character_by_guardian:"Tính cách nhân viên qua đánh giá của NBL",date_visit_home:"Ngày thăm nhà",employee_career_path:"Nhân viên chia sẻ gì về định hướng gắn bó?",employee_sharing:"Nhân viên kể gì về công việc ở GHTK?",family_economic:"Tình hình kinh tế gia đình",guardian_agree:"NBL đồng ý bảo lãnh",guardian_know_responsibility:"NLĐ hiểu về trách nhiệm bảo lãnh",guardian_work_state:"Tình hình việc làm của NBL",is_breadwinner:"Nhân viên có phải trụ cột kinh tế gia đình không?",note:"Ghi chú",user_visit_home:"Người đi thăm",file_visit:"Ảnh check-in tại nhà NBL",locate_guardian_house:"Định vị nhà của NBL"};var w=C,k=a("RUzx"),x=a.n(k),S=a("TwHU"),M=a("2QYU"),T=a("Lo5R"),D=a("F/2K"),I=a("qOi5"),P=a("+rLF"),E={name:"visit-home-form",components:{Multiselect:x.a,Datepicker:c.a,SelectUser:r.a,FileViewUpload:l.a,SingleSelectRelation:M.a,SingleSelectPoiIdentityCard:T.a,SingleSelectProvince:D.a,SingleSelectDistrict:I.a,SingleSelectSubDistrict:P.a},props:{selectStaff:{type:Boolean,default:!1},updateButton:{type:Boolean,default:!1},requiredField:{type:Object,default:function(t){return{}}},visitInfo:{type:Object,default:function(t){return{}}},fromProfileUser:{type:Boolean,default:!1}},data:function(t){return{loading:!1,infoTypeDesc:w.infoTypeDesc,yesNoOptions:w.yesNoOptions,workStateOptions:w.workStateOptions,careerPathOptions:w.careerPathOptions,familyEconomicOptions:w.familyEconomicOptions,noti:{staffCode:null},guardian:{status:null,bltnds_reason:[],resident_province:null,resident_district:null,resident_sub_district:null,resident_detail:null,current_province:null,current_district:null,current_sub_district:null,current_detail:null},isValidLocate:!0,messageError:"",options:{statusBltndsOption:[{text:"Duyệt",value:"approved",disabled:!1},{text:"Từ chối",value:"rejected",disabled:!1}],approveBltndsOption:S.a,rejectBltndsOption:S.e}}},watch:{"visitInfo.staff_code":function(t){this.checkStaffCode()}},computed:{vi:function(t){return d.a}},methods:{checkStaffCode:function(){return this.visitInfo.staff_code?this.visitInfo.staff_code.length<8?(this.noti.staffCode="Mã nhân viên phải bao gồm 8 ký tự số VD: 00345678",h.a.resetData(this.visitInfo,"staff_code"),void h.a.resetData(this.guardian)):this.visitInfo.staff_code.length>8?(this.noti.staffCode="Mã nhân viên phải bao gồm 8 ký tự số VD: 00345678",h.a.resetData(this.visitInfo,"staff_code"),void h.a.resetData(this.guardian)):void(8===this.visitInfo.staff_code.length&&(this.noti.staffCode=null,this.getVisitHomeInfo(+this.visitInfo.staff_code),this.getGuardian(+this.visitInfo.staff_code))):(this.noti.staffCode=null,h.a.resetData(this.visitInfo,"staff_code"),void h.a.resetData(this.guardian))},checkValidLocateData:function(){if(this.messageError="",this.visitInfo&&this.visitInfo.locate_guardian_house){this.visitInfo.locate_guardian_house.length>100&&(this.messageError="Nhập tối đa 100 kí tự"),this.visitInfo.locate_guardian_house.length<7&&(this.messageError="Nhập tối thiểu 7 kí tự");var t=this.visitInfo.locate_guardian_house.split("")||[],e=["",".",","];if(t.length>0)for(var a in t)if(isNaN(+t[a])&&!e.includes(t[a])){this.messageError="Chỉ được nhập các số từ 0-9, dấu (.) (,) và khoảng trắng.";break}}this.messageError.length>0?this.isValidLocate=!1:this.isValidLocate=!0},validateVisitInfo:function(t){var e=[];for(var a in this.requiredField||[])"file_visit"!==a?h.a.isEmpty(t[a])&&0!==t[a]&&e.push(this.infoTypeDesc[a]||a):t.file_visit_add.length+t.file_visit.length<=t.file_visit_delete.length&&e.push(this.infoTypeDesc[a]||a);return e},updateVisitHomeInfo:function(t){var e=this;return o()(i.a.mark(function a(){var n,s,o,r;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(n=e.validateVisitInfo(t))||!n.length){a.next=4;break}return alert("Vui lòng nhập đủ thông tin:\n- "+n.join("\n- ")),a.abrupt("return");case 4:if(e.isValidLocate){a.next=7;break}return alert("Định dạng trường Định vị thăm nhà chưa đúng"),a.abrupt("return");case 7:return(s=h.a.createFormData(t)).append("master_profile_id",+t.staff_code),s.delete("fullname"),e.loading=!0,a.next=13,u.a.updateVisitHomeInfo(s);case 13:o=a.sent,r=o.data,e.loading=!1,r.success?(h.a.showMessage(r.message||"Cập nhật thông tin thăm nhà thành công !","success"),e.getVisitHomeInfo(+e.visitInfo.staff_code)):h.a.showMessage(r.message||"Có lỗi khi cập nhật thông tin thăm nhà !"),e.$emit("update",r);case 18:case"end":return a.stop()}},a,e)}))()},getVisitHomeInfo:function(t){var e=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return o()(i.a.mark(function n(){var s,o,r;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return e.loading=!0,n.next=5,u.a.getVisitHomeInfo({master_profile_id:t,get_profile_info:a});case 5:if(s=n.sent,o=s.data,e.loading=!1,o.success)if(e.noti.staffCode=null,h.a.isEmpty(o.data))h.a.isEmpty(e.visitInfo)?e.visitInfo={}:h.a.resetData(e.visitInfo);else{for(r in o.data)e.visitInfo[r]=o.data[r];o.data.date_visit_home||h.a.resetData(e.visitInfo,["staff_code","fullname"]),e.visitInfo.file_visit_add.length=0,e.visitInfo.file_visit_delete.length=0}else e.noti.staffCode=o.message,h.a.showMessage(o.message||"Có lỗi khi lấy thông tin thăm nhà !");case 9:case"end":return n.stop()}},n,e)}))()},getGuardian:function(){var t=o()(i.a.mark(function t(e){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,u.a.getGuardian({master_profile_id:e});case 4:(a=t.sent).data.success?h.a.isEmpty(a.data.data)?h.a.isEmpty(this.guardian)?this.guardian={}:h.a.resetData(this.guardian):(a.data.data.bltnds_reason||(a.data.data.bltnds_reason=[]),this.guardian=a.data.data):h.a.showMessage(a.data.message||"Có lỗi xảy ra","warning"),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0),h.a.showMessage(t.t0.response.data.message||"Có lỗi xảy ra","warning");case 12:return t.prev=12,this.loading=!1,t.finish(12);case 15:case"end":return t.stop()}},t,this,[[1,8,12,15]])}));return function(e){return t.apply(this,arguments)}}()}},L=a("XyMi"),A=Object(L.a)(E,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("b-alert",{attrs:{show:!!t.noti.staffCode,variant:"warning"}},[a("b",[t._v("Lưu ý: ")]),t._v(" "),a("span",{domProps:{innerHTML:t._s(t.noti.staffCode)}})]),t._v(" "),a("b-form-row",[a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.selectStaff,expression:"selectStaff"}],staticClass:"col-md-3"},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.infoTypeDesc.staff_code)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.requiredField.staff_code,expression:"requiredField.staff_code"}],staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.visitInfo.staff_code,expression:"visitInfo.staff_code"}],staticClass:"form-control",class:{"is-invalid":""===t.visitInfo.staff_code},attrs:{type:"number"},domProps:{value:t.visitInfo.staff_code},on:{input:function(e){e.target.composing||t.$set(t.visitInfo,"staff_code",e.target.value)}}})]),t._v(" "),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.selectStaff,expression:"selectStaff"}],staticClass:"col-md-3",attrs:{label:"Họ và tên nhân viên"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.infoTypeDesc.fullname)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.requiredField.fullname,expression:"requiredField.fullname"}],staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("b-input",{attrs:{disabled:""},model:{value:t.visitInfo.fullname,callback:function(e){t.$set(t.visitInfo,"fullname",e)},expression:"visitInfo.fullname"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Người đi thăm"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.infoTypeDesc.user_visit_home)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.requiredField.user_visit_home,expression:"requiredField.user_visit_home"}],staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("SelectUser",{model:{value:t.visitInfo.user_visit_home,callback:function(e){t.$set(t.visitInfo,"user_visit_home",e)},expression:"visitInfo.user_visit_home"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3 z-100",attrs:{label:"Ngày thăm nhà"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.infoTypeDesc.date_visit_home)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.requiredField.date_visit_home,expression:"requiredField.date_visit_home"}],staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("datepicker",{attrs:{language:t.vi,placeholder:"",format:"dd-MM-yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,required:!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},model:{value:t.visitInfo.date_visit_home,callback:function(e){t.$set(t.visitInfo,"date_visit_home",e)},expression:"visitInfo.date_visit_home"}})],1)],1),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col-md-3",attrs:{label:"NLĐ hiểu về trách nhiệm bảo lãnh","label-class":"text-overflow-ellipsis"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.infoTypeDesc.guardian_know_responsibility)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.requiredField.guardian_know_responsibility,expression:"requiredField.guardian_know_responsibility"}],staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("b-select",{attrs:{options:t.yesNoOptions},model:{value:t.visitInfo.guardian_know_responsibility,callback:function(e){t.$set(t.visitInfo,"guardian_know_responsibility",e)},expression:"visitInfo.guardian_know_responsibility"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Tình hình việc làm của NBL","label-class":"text-overflow-ellipsis"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.infoTypeDesc.guardian_work_state)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.requiredField.guardian_work_state,expression:"requiredField.guardian_work_state"}],staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("b-select",{attrs:{options:t.workStateOptions},model:{value:t.visitInfo.guardian_work_state,callback:function(e){t.$set(t.visitInfo,"guardian_work_state",e)},expression:"visitInfo.guardian_work_state"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"NBL đồng ý bảo lãnh"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.infoTypeDesc.guardian_agree)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.requiredField.guardian_agree,expression:"requiredField.guardian_agree"}],staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("b-select",{attrs:{options:t.yesNoOptions},model:{value:t.visitInfo.guardian_agree,callback:function(e){t.$set(t.visitInfo,"guardian_agree",e)},expression:"visitInfo.guardian_agree"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Nhân viên chia sẻ gì về định hướng gắn bó?","label-class":"text-overflow-ellipsis"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.infoTypeDesc.employee_career_path)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.requiredField.employee_career_path,expression:"requiredField.employee_career_path"}],staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("b-select",{attrs:{options:t.careerPathOptions},model:{value:t.visitInfo.employee_career_path,callback:function(e){t.$set(t.visitInfo,"employee_career_path",e)},expression:"visitInfo.employee_career_path"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Nhân viên kể gì về công việc ở GHTK?","label-class":"text-overflow-ellipsis"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.infoTypeDesc.employee_sharing)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.requiredField.employee_sharing,expression:"requiredField.employee_sharing"}],staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.visitInfo.employee_sharing,expression:"visitInfo.employee_sharing",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{rows:"1"},domProps:{value:t.visitInfo.employee_sharing},on:{input:function(e){e.target.composing||t.$set(t.visitInfo,"employee_sharing",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Tình hình kinh tế gia đình","label-class":"text-overflow-ellipsis"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.infoTypeDesc.family_economic)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.requiredField.family_economic,expression:"requiredField.family_economic"}],staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("b-select",{attrs:{options:t.familyEconomicOptions},model:{value:t.visitInfo.family_economic,callback:function(e){t.$set(t.visitInfo,"family_economic",e)},expression:"visitInfo.family_economic"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Nhân viên có phải trụ cột kinh tế gia đình không?","label-class":"text-overflow-ellipsis"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.infoTypeDesc.is_breadwinner)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.requiredField.is_breadwinner,expression:"requiredField.is_breadwinner"}],staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("b-select",{attrs:{options:t.yesNoOptions},model:{value:t.visitInfo.is_breadwinner,callback:function(e){t.$set(t.visitInfo,"is_breadwinner",e)},expression:"visitInfo.is_breadwinner"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Tính cách nhân viên qua đánh giá của NBL","label-class":"text-overflow-ellipsis"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.infoTypeDesc.character_by_guardian)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.requiredField.character_by_guardian,expression:"requiredField.character_by_guardian"}],staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.visitInfo.character_by_guardian,expression:"visitInfo.character_by_guardian",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{rows:"1"},domProps:{value:t.visitInfo.character_by_guardian},on:{input:function(e){e.target.composing||t.$set(t.visitInfo,"character_by_guardian",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Định vị nhà của NBL","label-class":"text-overflow-ellipsis"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.infoTypeDesc.locate_guardian_house)+" "),t.fromProfileUser?t._e():a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.visitInfo.locate_guardian_house,expression:"visitInfo.locate_guardian_house"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Nhập"},domProps:{value:t.visitInfo.locate_guardian_house},on:{input:[function(e){e.target.composing||t.$set(t.visitInfo,"locate_guardian_house",e.target.value)},function(e){return t.checkValidLocateData()}]}}),t._v(" "),t.isValidLocate?t._e():a("span",{staticClass:"text-danger d-inline-block mt-1"},[t._v(" "+t._s(t.messageError)+" ")])])],1),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col-md-6",attrs:{label:"Ghi chú"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.infoTypeDesc.note)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.requiredField.note,expression:"requiredField.note"}],staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.visitInfo.note,expression:"visitInfo.note",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{rows:"2"},domProps:{value:t.visitInfo.note},on:{input:function(e){e.target.composing||t.$set(t.visitInfo,"note",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("b-form-group",{staticClass:"col-md-6",attrs:{label:"Ảnh check-in tại nhà NBL"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.infoTypeDesc.file_visit)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.requiredField.file_visit,expression:"requiredField.file_visit"}],staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("FileViewUpload",{staticClass:"d-inline-block",attrs:{"input-id":"file_visit","input-style":{width:"3.75rem"},hideUploadButton:!0,height:"3.75rem",edit:!0,"input-placeholder":"Thêm ảnh",files:t.visitInfo.file_visit,"file-add":t.visitInfo.file_visit_add,"file-delete":t.visitInfo.file_visit_delete}})],1)],1),t._v(" "),t.fromProfileUser?t._e():a("b-form-row",{staticClass:"mt-1"},[a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Trạng thái duyệt"}},[a("b-form-select",{attrs:{disabled:!0,options:t.options.statusBltndsOption},model:{value:t.guardian.status,callback:function(e){t.$set(t.guardian,"status",e)},expression:"guardian.status"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3 z-100",attrs:{label:"Lý do duyệt/từ chối"}},[a("Multiselect",{attrs:{multiple:"",disabled:!0,options:"rejected"===t.guardian.status?t.options.rejectBltndsOption:t.options.approveBltndsOption,"track-by":"value",label:"text",placeholder:"","select-label":"",deselectLabel:"X"},model:{value:t.guardian.bltnds_reason,callback:function(e){t.$set(t.guardian,"bltnds_reason",e)},expression:"guardian.bltnds_reason"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Mối quan hệ với NLĐ"}},[a("SingleSelectRelation",{attrs:{disabled:!0,relationOption:"guardian"},model:{value:t.guardian.relation,callback:function(e){t.$set(t.guardian,"relation",e)},expression:"guardian.relation"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Họ và tên"}},[a("b-input",{attrs:{disabled:!0,type:"text"},model:{value:t.guardian.fullname,callback:function(e){t.$set(t.guardian,"fullname","string"==typeof e?e.trim():e)},expression:"guardian.fullname"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Số điện thoại"}},[a("b-input",{attrs:{disabled:!0,type:"text",name:"guardian-phone"},model:{value:t.guardian.phone,callback:function(e){t.$set(t.guardian,"phone","string"==typeof e?e.trim():e)},expression:"guardian.phone"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Ngày sinh người bảo lãnh"}},[a("Datepicker",{attrs:{disabled:!0,placeholder:"",format:"dd-MM-yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,required:!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},model:{value:t.guardian.birthday,callback:function(e){t.$set(t.guardian,"birthday",e)},expression:"guardian.birthday"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"CMND/CCCD"}},[a("b-input",{attrs:{disabled:!0,id:"guardian-personal-id",name:"guardian-personal-id"},model:{value:t.guardian.personal_id,callback:function(e){t.$set(t.guardian,"personal_id","string"==typeof e?e.trim():e)},expression:"guardian.personal_id"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Ngày cấp CMND/CCCD"}},[a("Datepicker",{attrs:{disabled:!0,placeholder:"",format:"dd-MM-yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,required:!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},model:{value:t.guardian.personal_id_date,callback:function(e){t.$set(t.guardian,"personal_id_date",e)},expression:"guardian.personal_id_date"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Nơi cấp CMND/CCCD"}},[a("single-select-poi-identity-card",{attrs:{"is-disabled":!0,placeholder:"",provinceId:t.guardian.personal_id_place}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Nơi xác thực giấy bảo lãnh"}},[a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.guardian.license_place,expression:"guardian.license_place",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{disabled:!0,rows:"1"},domProps:{value:t.guardian.license_place},on:{input:function(e){e.target.composing||t.$set(t.guardian,"license_place",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Thông tin khai thác thêm từ NBL"}},[a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.guardian.other_info,expression:"guardian.other_info",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{disabled:!0,rows:"1"},domProps:{value:t.guardian.other_info},on:{input:function(e){e.target.composing||t.$set(t.guardian,"other_info",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("b-form-group",{staticClass:"col-md-3",attrs:{label:"Ghi chú"}},[a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.guardian.note,expression:"guardian.note",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{disabled:!0,rows:"1"},domProps:{value:t.guardian.note},on:{input:function(e){e.target.composing||t.$set(t.guardian,"note",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("b-form-row",{staticClass:"px-0 mx-0 col-md-12"},[a("div",{staticClass:"col-md-6 col-lg-6 col-xl-6"},[a("h6",{staticClass:"mb-2"},[t._v("Nơi đăng ký hộ khẩu thường trú")]),t._v(" "),a("b-form-row",[a("div",{staticClass:"col-md-4"},[a("single-select-province",{attrs:{placeholder:"","is-disabled":!0,provinceId:t.guardian.resident_province}})],1),t._v(" "),a("div",{staticClass:"col-md-4"},[a("single-select-district",{attrs:{placeholder:"","is-disabled":!0,provinceId:t.guardian.resident_province,districtId:t.guardian.resident_district}})],1),t._v(" "),a("div",{staticClass:"col-md-4"},[a("single-select-sub-district",{attrs:{placeholder:"","is-disabled":!0,provinceId:t.guardian.resident_province,districtId:t.guardian.resident_district,subDistrictId:t.guardian.resident_sub_district}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-12 mt-2",attrs:{label:"Chi tiết thường trú"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Chi tiết thường trú")]),t._v(" "),a("b-form-textarea",{attrs:{disabled:!0,name:"resident-address-detail",rows:"1"},model:{value:t.guardian.resident_detail,callback:function(e){t.$set(t.guardian,"resident_detail",e)},expression:"guardian.resident_detail"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"col-md-6 col-lg-6 col-xl-6"},[a("h6",{staticClass:"mb-2"},[t._v("Địa chỉ hiện tại")]),t._v(" "),a("b-form-row",[a("div",{staticClass:"col-md-4"},[a("single-select-province",{attrs:{placeholder:"","is-disabled":!0,provinceId:t.guardian.current_province}})],1),t._v(" "),a("div",{staticClass:"col-md-4"},[a("single-select-district",{attrs:{placeholder:"","is-disabled":!0,provinceId:t.guardian.current_province,districtId:t.guardian.current_district}})],1),t._v(" "),a("div",{staticClass:"col-md-4"},[a("single-select-sub-district",{attrs:{placeholder:"","is-disabled":!0,provinceId:t.guardian.current_province,districtId:t.guardian.current_district,subDistrictId:t.guardian.current_sub_district}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-12 mt-2",attrs:{label:"Chi tiết chỗ ở"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Chi tiết chỗ ở")]),t._v(" "),a("b-form-textarea",{attrs:{disabled:!0,placeholder:"Chi tiết chỗ ở",rows:"1"},model:{value:t.guardian.current_detail,callback:function(e){t.$set(t.guardian,"current_detail",e)},expression:"guardian.current_detail"}})],1)],1)],1)])],1),t._v(" "),a("div",{staticClass:"text-center"},[t.updateButton?a("b-btn",{staticClass:"w-5re",attrs:{variant:"ghtk"},on:{click:function(e){return t.updateVisitHomeInfo(t.visitInfo)}}},[t._v("Lưu")]):t._e()],1)],1)},[],!1,null,null,null);e.a=A.exports},"iXC/":function(t,e){},ibkE:function(t,e,a){"use strict";var n=a("Gu7T"),i=a.n(n),s=a("RUzx"),o=a.n(s),r=a("oonE"),l={name:"select-contract-type",components:{Multiselect:o.a},props:{contractType:{default:null},placeholder:{type:String,default:"Chọn loại hợp đồng"},disabled:{type:Boolean,default:!1},state:{default:null,type:Boolean},multiple:{default:!1,type:Boolean},autoClose:{default:!0},hideSelect:{default:!1}},data:function(){return{storage:null,option:[],options:r.a.arrayTypeContract}},created:function(){this.setSelectedOption()},watch:{option:function(t,e){this.$emit("change",t)},contractType:function(t,e){this.setSelectedOption()}},methods:{setSelectedOption:function(){var t=this;if(this.multiple){if(this.options.length>0&&this.contractType){var e;this.option=[];var a=this.contractType.split(","),n=this.options.filter(function(t){return a.includes(t.value)});(e=this.option).push.apply(e,i()(n))}}else this.options.length>0&&this.contractType?this.option=this.options.find(function(e){return e.value===t.contractType})||null:this.option=null}}},c=a("XyMi"),d=Object(c.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("multiselect",{class:{stateTrue:!0===t.state,stateFalse:0==t.state},attrs:{options:t.options,placeholder:t.placeholder,multiple:t.multiple,disabled:t.disabled,label:"desc","track-by":"value","close-on-select":t.autoClose,"hide-selected":t.hideSelect,selectedLabel:"",deselectLabel:"X",selectLabel:""},on:{input:function(e){t.$emit("input",e)},select:function(e){t.$emit("select",e)},remove:function(e){t.$emit("remove",e)}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))]),t._v(" "),a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")])])],1)},[],!1,null,null,null);e.a=d.exports},ih5F:function(t,e,a){"use strict";var n=a("+cgA"),i=a("YJw0"),s=a("hC/b"),o=a("PJh5"),r=a.n(o),l={name:"censor",props:{smallView:{default:!1},order:{default:function(t){return{}}},orderId:{}},components:{MultiSelectUser:n.a},data:function(t){return{loading:!1}},computed:{deadline:function(){return this.order.censors&&this.order.censors.length?this.getDeadline(this.order):null},moment:function(){return r.a},canUpdateCensor:function(){return!(this.order.delete||["da_duyet","tu_choi","hoan_thanh","da_huy"].includes(this.order.status))}},created:function(){!this.order.censors&&this.orderId&&this.getCensorForOrder(this.orderId)},watch:{orderId:function(t,e){t&&!this.order.censors&&this.getCensorForOrder(t)}},methods:{getDeadline:function(t){if(!t||!t.censors||!t.censors.length||["hoan_thanh","da_duyet","thieu_ho_so","tu_choi","co_ket_qua","nhan_ket_qua"].includes(t.status))return null;var e=null;return t.censors.forEach(function(t){t&&t.deadline&&(!e||r()(t.deadline)<e)&&(e=r()(t.deadline))}),e?e.format("YYYY-MM-DD H:m:s"):null},getCensorForOrder:function(t){var e=this;t&&(this.loading=!0,i.a.getCensorForOrder({order_id:t}).then(function(t){t.data.success?e.order.censors=t.data.data||[]:s.a.showMessage(t.data.message||"Có lỗi khi lấy người duyệt của đề xuất !")}).catch(function(t){console.log(t),s.a.showMessage("Có lỗi khi lấy người duyệt của đề xuất !")}).then(function(t){e.loading=!1}))},updateCensor:function(t,e){var a=this;!e||"add"!==e&&"delete"!==e||(this.$startLoading(),i.a.updateCensor({order:this.orderId||this.order.id,censor:t,type:e}).then(function(n){n.data.success?(s.a.showMessage(n.data.message||("add"===e?"Thêm người duyệt thành công":"Xóa người duyệt thành công"),"success"),a.order.logs.unshift(n.data.data),a.$emit("updateCensor")):("add"===e?a.order.censors.pop():a.order.censors?a.order.censors.push(t):a.order.censors=[t],s.a.showMessage(n.data.message||"Không cập nhật được người duyệt, vui lòng thử lại sau !","warning"))}).catch(function(t){console.log(t),s.a.showMessage("Không cập nhật được người duyệt, vui lòng thử lại sau !","warning")}).finally(function(t){a.$stopLoading()}))}}},c=a("XyMi"),d=Object(c.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[t.deadline?a("div",{class:t.moment()>t.moment(t.deadline)?"text-danger":"text-ghtk"},[t._v("\n    Hạn xử lý: "+t._s(t.moment(t.deadline).format("HH:mm:ss DD/MM/YYYY"))+"\n  ")]):t._e(),t._v(" "),a("MultiSelectUser",{class:t.smallView?"font-12":"font-13",attrs:{disabled:!t.canUpdateCensor,placeholder:"Chọn người xử lý",users:t.order.censors,"hide-selected":!1},on:{select:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return t.updateCensor.apply(void 0,n.concat(["add"]))},remove:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return t.updateCensor.apply(void 0,n.concat(["delete"]))},input:function(e){t.order.censors=e||[]}}})],1)},[],!1,null,null,null);e.a=d.exports},iiMH:function(t,e,a){"use strict";var n={props:{title:{type:String,required:!0},id:{type:String,required:!0},icon:{type:String,required:!1,default:null},disabled:{type:Boolean,required:!1,default:!1}},data:function(){return{active:!1}},computed:{cmpName:function(){return"tab"}}},i=a("XyMi");var s=function(t){a("iFqU")},o=Object(i.a)(n,function(){var t=this.$createElement;return(this._self._c||t)("div",{class:["sweet-modal-tab",{active:this.active}]},[this._t("default")],2)},[],!1,s,null,null);e.a=o.exports},ir9N:function(t,e){},jMTq:function(t,e){},ja0D:function(t,e){},jibg:function(t,e){},jqoz:function(t,e){},juWg:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGcAAAB3CAYAAAAel15iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAx0SURBVHgB7Z0JWFVlGsf/93Ivl+0iO8gmi0lAAQKBG4K4FWqWyVhj2aIt08xkCw9PzdMoY8202NPMRI3ZaNM0UeNWudRMlA5a4oKKKIEDuaCphaCC7F6g9ztWbpwD59578Fzu9/M5wuF85149//u9592+gwZmkJeXl9Pd3b0YdoxWq/2ArsGjdC3OQiF0sIDAwEC4urrCXujq6sKRI0fQ2dnJvr9Lo9G0ZWRkPFRUVGSCAlgkTmxsLEJCQmAvmEwmHD9+HDqdDnq9Hk1NTXNIHB2Jcy8d7oaV0YIjG0dHR2RlZcHNzc2BTNs9ZNpezsnJsboJ4eKYCQmD8ePHw2g0ggTKof3fw8pwcSzA29sb48aNg8FgYLuPL1y48CVYES6Ohfj4+GDSpElwcnJiCuUuWLDgCTJzjrACXBwr4Ovri8zMTMHEkQf3Kpm5P5FAFjlbDC6OlfD398fEiRPh7OzM7kFP0rYwOzvbARbAxbEiHh4egpPg4uKiod3fUajxFM0gs68xF8fK+Pn5CU4C3YO0NHteIDM3m75qYAZcHAUICAjAhAkTWDykpWzCUpo92TADLo5CsBk0duxYJpAzzZy/kRc3BTLh4ihIaGgoEhMTWarHmxKlK2gGjZVzPhdHYVj+MSEhgXlwLL2zmgTK6Ou5XJx+gAmUnJzMBPKl7QMSKKEv53Fx+gEHBwfExcUJIpF5C6AfFZJAcb2dx8XpR1JTUxEdHf3TDFq9aNGiG6XGc3H6maSkJMTExLBvr6OC3UeULA0WG8vF6WdYoY7NoPDwcLYbSTNoE5m4sJ7GcnGuAZQ1QHp6OiIiItj3bAb9mwQKvXIcF+caQY4BRo4cibCwMCZQKgm0kkyc+2VjwLlmsHL3JTMolX60mWaQz0/HuTjXGOZmszRPZGQk2034MQ7yYDtcHBXATNyoUaOEdA8xgQRalpuba+TiqATWapWWliZktIk7qCa0xOJSqj3S3NyMdevWQQna29uFrzR7ZnNxZEJFNKHjs6GhAUrB7kPsPbg4MmAXjTUTss5P+mRDKcrKylBVVcXFkQMLHtnMURqWRRC+Cn93Q+P13PgRDibNg7QXgV56qP/ZVRLkBkd8saMGzmXOUCMa+hM6yA8ZQ4YjLSReuLC2hgZ5GTrfTl1Ot6Z7Ef2H9Bhg6LQ6pA9JwPMZD0KvtQ1DsX37dlRUVEBLwswhif44EIVhmLpM2Hh4F14vWUPfd8KW0Go03U/CDoLRlRWbUNP4HWwJbRcwDHbAeZpB+2sPwZbQDlRz1hN1zYqtEFQEu0rfKBeZKAPPrakYLo6KMcvxDzb6IcDNS3JMRd1htJxvh7kEuHnT+/hKjvma3qPVgvdQO2aJE+oRgPybn2B+uOiYV7Z9gIL9n8EcXPXOWDollyJ8f9Exu04ewPz//gUDGbPMWsmJCqyt+lJyzIPDp9HFDYA5zIm/RVKY9s7zeGvPepqZbRjImCXO+U4T3t9fiHZTh+iYQU5u+G3KTNk5rQjPIGTHjJMc89nBndhFH5CBjtkOwTenv8WHB7ZIjmE5rZTAGPQVlvt6KPFWeDoZRcecaTtHqZhViqbs1YJF3trbpRvQ0N4sepxdbDZ7WI28LyQHRWNSRIrocSbIkl0f4ZSNBZPmYlGatq71LN7c/TGeGnEnZX97Xpsa6xuOGVHpWF35P8nXYuc/PfpuSTNYVvsNPqneCmtwtKUexXVVkIue/p23BSXDQXPhA7ejqQbHzsv/sPjrjBhjjICU0bc4h76qYiPGhyUhOfB60TGPJN+O4m/LceLcKdExd8ZOQKi7uBPQamrHW7vXWuSeX0rlueN4tVq+N+lncMeUwOE/i7OpsRqFjfJFvtFlMEYbw4W6kxgWB6GdXV3IL1kNU7d4Ot7b2R1z4iaLHvd18cC98VmQYnPNXmwjge0Jq2QIyinbu7qiSHLMtGFpCOwhqGRm7LHUbPi4DBI9l82WxcUFsDesIk5XdxeWl67HafKkxHDRG/Bo8oyrfp4YEIXJEk4A4+971uJ0ayPsDavl1upazuIfezdIuriZ4YkYE3JxQZeW7PYTI2ZB7yBetTh09gRWVm6CPWLVovqK8o3IGjoS0T5hPR531hkwP/UXlGGoFKL8u26YKHhzYrAS80tbC9DSYf1MgF6jg7ej/EekedE5l97CXRwc4amT3+TirjWgt/DcquKwauNzW97B8mnPwFlv6HHMUK9gzI67GZuorv/AcOml+RuqioVUkRJk+sUIm6XM9x8rbEpg9ZJBZd0RrOolppmbMAXPpt0HLyd30TEsuH2//HO7yASIoUg9552yT+kGLuUcOCFpcJTUS2B91VeoPn0M9owijVxnyLNasvsj5I76pVm9YrXNZ/BGyYdQkq+O7cNrFJ/JheX98ic/DscfnZj86kIU11dDLjHuQXg2ZrpkEKpYl92HlUUYH56EEUGxss5jZuzPO1aizaRsEa2xvQWHzhyHXPxcPCl0uGhq6zuacLD5lOzXcaOaFXsVKadAsTI1i33yd64SnAQ5lFAR7YtDJeAo3ENQWVeDlV/3PUZppuLZS8X/ElxojsLiMBP1NgWm9S19W8vCMteHTp8A5wKKd9+wtMuyvet7dYlZEY1lnTkX6Ze2+2MNtULWmkXlYtRSAa0/zVmQ0YeSsWMgFy/KsDtcUjwc7hkGnUb+ZzzI2at/MwQ9YdA5Clnn3lzqKO8Q3EKpn7X//xL9Qbz/UGGzlOmBicKmBIqbtezoTAzz6tsvo/jNTXdgsNEHnAsoOnNY/eae+Ml9Hu9DRbdHkm5DXtFyigGUTdu0dbSjvsm8RbeBnr4/l9PPNDegubUVcjHoHeE7SLoxUzFxmF2eN3yaELTJgTV4MK9t//cHoSTbqkux+JO3IRdfoyfemvc8XdwLGYIln7yHon3bIJe48Gi8/MAzQtlEDMXEifcfhulm3HCd6B71eMos/OrTxeigsoJSmKi83tIu/xPf7Oh02aw+bzKhua0FcunLOYrcc9jNf0Ha/X1uibqSxMHDMDM6A/aOIuLMTZyKIR7inTRNHa0o/U46Wfgw3Xv8XOWZxIGG1cUJ8xiMmddnSo5ZUbERL2x9V7LX2d3giqnDRsOesbo4DyRMhbeLeBGtrrUBy0rXC+28yyi1I8V98VlC77S9YlWHIDU4FpMipTtpXi4uQNuPjYEF+z7D1OtGI4JmW08YHV2Edt6nPs8XftOgNUmKiMVf730WcnHU6amWc/GyzZs8C9NHTIRcDFTG763J32risOLT/JRsGCQ6ab46ug9bavb+vM+8sTdK1mDxhF+LrvUZExJPNaEbUEzFMWvi5TpI2CwlyDtA2JTAambt9uh00a4bBls2snTPuquWjWypKZXs5NSRx/fYTTNFe7EHMlYRx9/NC/f30k676chufH3q6sCSPVXjtZ0rJZ2DKJ9QZMdKOxkDEYvFYeZobsI0+LuKpyJOtzUKToBY2aCq/hje62WJ4sOJ081eKWerWCzOjX6RmHF9uuSYjw98KXhnUhTsL0RtyxnR44MMbuS9yf4VNDaNReKwWZM7avZl9Y0rOd54Ckt3f4zeaGxvxus710imbG4ZmoqUYHkNI7aMReIwNzjaN0z0OGvyeHXHij7nyDZUb8V2iQ5Plnd7MnWWzTyay1LMFsdocMG8xFsl+67YgqnNNXvQV9g9KX/nakkxo7xDcWuU/ISqLWK2OHfFTkSIu5/o8XMdLVi8tUBYXCWHg/XfknNQKDnm0ZtmUBbC8hhF7ZglTiSlVGb2shz9nbL/4Gjj95ALS8e/S+fWNIify3qs2VofW3w0pBzMMt6ezkasqSwSPd5JsYu5T+9gNLQ34Q+blyMlSHwVAGsGYUtKBvKDIswSZ9eJA8KmJKXfVQmbPcOfGqVimDjWTfeqGGYGbQkmjvwWeRvlOu9g2BLabi3ehx0Qx5oI/SxvIuxPtA5N2he70bUZAxj2YL2nR90tZBhsCe33rxTW6rVdMynQf5H25ff4qBi2aHjckES8mZXT565TNXF5FJeXofOELlAHk+RHbDri57p1Oz09Ji0NgwPUmcZnSVn22BZbzMP99Lj8y//leUUmStof7e3k4LyMehbJBzh59PocTo758DhHxXBxVAwXR8VwcVQMF0fFcHFUDBdHxXBxVAwXR8VwcVQMF0fFcHFUDBdHxXBxVAwXR8VwcVQMF0fFcHFUDBdHxXBxVAwXR8VwcVQMF0fFcHFUDBdHxVjUq1peXo7Dhw+DY13q6uqErxaJc/LkSXCU4wfMs9xZ+kQiBAAAAABJRU5ErkJggg=="},jwCl:function(t,e,a){"use strict";var n=a("mvHQ"),i=a.n(n),s=a("Xxa5"),o=a.n(s),r=a("exGp"),l=a.n(r),c=a("RUzx"),d={name:"single-select-work-change-reason",components:{Multiselect:a.n(c).a},props:{typeId:{type:Number},typeAlias:{},reasonAlias:{type:String},isDisabled:{type:Boolean,default:!1}},data:function(){return{placeholder:"Chọn lý do",option:null,options:[],fullOptions:[]}},created:function(){this.getListWorkChangeReason()},watch:{option:function(t,e){this.$emit("handleSelectedWorkChangeReason",t)},typeId:function(t,e){this.setListOptions()},typeAlias:function(t,e){this.setListOptions()},reasonAlias:function(t,e){t?this.setSelectedOption():this.option=null}},methods:{setSelectedOption:function(){var t=this;this.options&&this.options.length&&this.reasonAlias&&(this.option=this.options.find(function(e){return e.alias===t.reasonAlias})||null)},getListWorkChangeReason:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("workHistory/getListWorkChangeReason");case 2:return e.next=4,t.$store.getters["workHistory/listWorkChangeReasons"];case 4:t.fullOptions=e.sent,t.setListOptions();case 6:case"end":return e.stop()}},e,t)}))()},setListOptions:function(){var t=this;if(this.typeId)this.options=this.fullOptions.filter(function(e){return e.change_type_id===parseInt(t.typeId)});else if(this.typeAlias){var e=Array.isArray(this.typeAlias)?this.typeAlias:[this.typeAlias];this.options=this.fullOptions.filter(function(t){return e.includes(t.change_type_alias)})}else this.options=JSON.parse(i()(this.fullOptions));this.setSelectedOption()}}},u=a("XyMi");var h=function(t){a("sbT+")},p=Object(u.a)(d,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{attrs:{options:t.options,placeholder:t.placeholder,disabled:t.isDisabled,label:"description","track-by":"alias",selectedLabel:"",deselectLabel:"X",selectLabel:"Chọn",searchable:!0},on:{select:function(e){t.$emit("select",e)},input:function(e){t.$emit("input",e)},remove:function(e){t.$emit("remove",e)}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,h,"data-v-e2791232",null);e.a=p.exports},jykp:function(t,e,a){"use strict";var n=a("Zx67"),i=a.n(n),s=a("Zrlr"),o=a.n(s),r=a("wxAW"),l=a.n(r),c=a("zwoO"),d=a.n(c),u=a("Pf15"),h=a.n(u),p=function(t){function e(){return o()(this,e),d()(this,(e.__proto__||i()(e)).apply(this,arguments))}return h()(e,t),l()(e,null,[{key:"checkGroupWHStaff",value:function(t){var e=parseInt(t);return e===this.WH_STAFF||e===this.WH_STAFF_ONSITE}}]),e}(a("MUME").a);p.WH_STAFF=23,p.WH_STAFF_ONSITE=26,e.a=p},k38u:function(t,e){},k7Ql:function(t,e){},k8gF:function(t,e){},kEmi:function(t,e){},kQz9:function(t,e){},kRJf:function(t,e,a){"use strict";var n,i=a("Xxa5"),s=a.n(i),o=a("//Fk"),r=a.n(o),l=a("exGp"),c=a.n(l),d=a("mtWM"),u=a.n(d),h=a("4WGu"),p=a("hC/b"),m=a("fEi7"),f=a("vfns"),g=a("R1Q+"),v=this,_=new f.a("local"),b=new f.a("session",!1),y=!p.a.isInIframe(),C=0,w=(n=c()(s.a.mark(function t(e){var a,n,i,o,l,c;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e.response,n=a.status,i=a.data,t.t0=n,t.next=400===t.t0?4:401===t.t0?5:402===t.t0?29:404===t.t0?30:405===t.t0?31:419===t.t0?32:500===t.t0?33:34;break;case 4:return t.abrupt("break",35);case 5:if(y){t.next=16;break}if(!(1109===i.code||i.errors&&i.errors.includes(1109))){t.next=9;break}return t.next=9,m.a.refreshToken();case 9:if(!(o=m.a.getToken())||0!==C){t.next=14;break}return++C,e.config.headers.GchatToken=o,t.abrupt("return",u.a.request(e.config));case 14:t.next=28;break;case 16:if((l=b.get("isReload"))&&"false"!==l){t.next=28;break}return _.remove(h.a.oidc.tokenIamStorage),b.set("isReload",!0),c=Object(g.a)(h.a.oidc),t.prev=21,t.next=24,c.run(window.location.href);case 24:t.next=28;break;case 26:t.prev=26,t.t1=t.catch(21);case 28:case 29:case 30:case 31:case 32:case 33:case 34:return t.abrupt("break",35);case 35:return t.abrupt("return",r.a.reject(e));case 36:case"end":return t.stop()}},t,v,[[21,26]])})),function(t){return n.apply(this,arguments)}),k=u.a.create({baseURL:h.a.baseApiKpiNewUrl});k.interceptors.request.use(function(t){var e=_.get(h.a.oidc.tokenIamStorage);if(e&&e.accessToken&&(t.headers.Authorization=h.a.bearerKey+" "+e.accessToken.accessToken),!y){var a=m.a.getToken();a&&(t.headers.GchatToken=a)}return t}),k.interceptors.response.use(function(t){return C=0,t},w),e.a=k},kTC2:function(t,e){},kXEz:function(t,e){},"kk+f":function(t,e){},klHB:function(t,e){},klKj:function(t,e,a){"use strict";var n=a("hC/b"),i=a("pedj"),s=a("bJ+M"),o={name:"file-candidate",components:{FileViewUpload:i.a},props:{idCandidate:{default:null},fileExist:{type:Object,default:function(t){return{avatar_file:[],personal_id_file:[],curriculum_vitae_file:[],guarantee_file:[],contract_file:[],asset_responsibility_file:[],commitment_cheat_file:[],commitment_security_file:[],driver_license_file:[]}}},fileAdd:{type:Object,default:function(t){return{avatar_file:[],personal_id_file:[],curriculum_vitae_file:[],guarantee_file:[],contract_file:[],asset_responsibility_file:[],commitment_cheat_file:[],commitment_security_file:[],driver_license_file:[]}}},edit:{default:!0},allowDelete:{default:!1}},data:function(t){return{}},created:function(){this.idCandidate&&this.getFileCandidate()},watch:{idCandidate:function(t,e){t&&this.getFileCandidate(t)}},methods:{getFileCandidate:function(t){var e=this;t||(t=this.idCandidate||null),t&&s.a.getFileCandidate({candidate_id:t}).then(function(t){t.data.success?(e.fileExist||(e.fileExist={}),e.fileExist.avatar_file=t.data.data.avatar_file||[],e.fileExist.personal_id_file=t.data.data.personal_id_file||[],e.fileExist.curriculum_vitae_file=t.data.data.curriculum_vitae_file||[],e.fileExist.guarantee_file=t.data.data.guarantee_file||[],e.fileExist.contract_file=t.data.data.contract_file||[],e.fileExist.asset_responsibility_file=t.data.data.asset_responsibility_file||[],e.fileExist.commitment_cheat_file=t.data.data.commitment_cheat_file||[],e.fileExist.commitment_security_file=t.data.data.commitment_security_file||[]):n.a.showMessage(t.data.message||"Không lấy được file hồ sơ ứng viên !","warning")}).catch(function(t){n.a.showMessage("Đã có lỗi xảy ra, không lấy được file hồ sơ ứng viên !","warning")})}}},r=a("XyMi");var l=function(t){a("gRdF")},c=Object(r.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-form-row",{staticClass:"form-file"},[a("b-form-group",{staticClass:"col-md-6 border rounded",attrs:{label:"CMND/CCCD"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("CMND/CCCD "),a("span",{directives:[{name:"show",rawName:"v-show",value:!!t.edit,expression:"!!edit"}],staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("file-view-upload",{attrs:{"input-id":"CMND/CCCD","input-style":{width:"5rem"},"allow-delete":t.allowDelete,"hide-upload-button":!0,height:"5rem",edit:t.edit,files:t.fileExist.personal_id_file,"file-add":t.fileAdd.personal_id_file,"is-thumbnail":!0}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-6 border rounded",attrs:{label:"Giấy bảo lãnh trách nhiệm dân sự"}},[a("file-view-upload",{attrs:{"input-id":"guarantee_file","input-style":{width:"5rem"},"allow-delete":t.allowDelete,"hide-upload-button":!0,height:"5rem",edit:t.edit,files:t.fileExist.guarantee_file,"file-add":t.fileAdd.guarantee_file}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-12 border rounded",attrs:{label:"Sổ hộ khẩu"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Sổ hộ khẩu "),a("span",{directives:[{name:"show",rawName:"v-show",value:!!t.edit,expression:"!!edit"}],staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("file-view-upload",{attrs:{"input-id":"curriculum_vitae_file","input-style":{width:"5rem"},"allow-delete":t.allowDelete,"hide-upload-button":!0,height:"5rem",edit:t.edit,files:t.fileExist.curriculum_vitae_file,"file-add":t.fileAdd.curriculum_vitae_file}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-6 border rounded",attrs:{label:"Hợp đồng dịch vụ"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Hợp đồng dịch vụ "),a("span",{directives:[{name:"show",rawName:"v-show",value:!!t.edit,expression:"!!edit"}],staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("file-view-upload",{attrs:{"input-id":"contract_file","input-style":{width:"5rem"},"allow-delete":t.allowDelete,"hide-upload-button":!0,height:"5rem",edit:t.edit,files:t.fileExist.contract_file,"file-add":t.fileAdd.contract_file}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-6 border rounded",attrs:{label:"Hợp đồng trách nhiệm vật chất"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Hợp đồng trách nhiệm vật chất "),a("span",{directives:[{name:"show",rawName:"v-show",value:!!t.edit,expression:"!!edit"}],staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("file-view-upload",{attrs:{"input-id":"asset_responsibility_file","input-style":{width:"5rem"},"allow-delete":t.allowDelete,"hide-upload-button":!0,height:"5rem",edit:t.edit,files:t.fileExist.asset_responsibility_file,"file-add":t.fileAdd.asset_responsibility_file}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-6 border rounded",attrs:{label:"Cam kết không gian lận"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Cam kết không gian lận "),a("span",{directives:[{name:"show",rawName:"v-show",value:!!t.edit,expression:"!!edit"}],staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("file-view-upload",{attrs:{"input-id":"commitment_cheat_file","input-style":{width:"5rem"},"allow-delete":t.allowDelete,"hide-upload-button":!0,height:"5rem",edit:t.edit,files:t.fileExist.commitment_cheat_file,"file-add":t.fileAdd.commitment_cheat_file}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-6 border rounded",attrs:{label:"Cam kết bảo mật thông tin"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Cam kết bảo mật thông tin "),a("span",{directives:[{name:"show",rawName:"v-show",value:!!t.edit,expression:"!!edit"}],staticClass:"text-danger"},[t._v("(*)")])]),t._v(" "),a("file-view-upload",{attrs:{"input-id":"commitment_security_file","input-style":{width:"5rem"},"allow-delete":t.allowDelete,"hide-upload-button":!0,height:"5rem",edit:t.edit,files:t.fileExist.commitment_security_file,"file-add":t.fileAdd.commitment_security_file}})],1)],1)},[],!1,l,"data-v-adcee698",null);e.a=c.exports},kvRg:function(t,e){},"l///":function(t,e){},l48y:function(t,e,a){"use strict";var n=a("RUzx"),i={name:"single-select-profile-region",components:{Multiselect:a.n(n).a},props:{selectClass:"",placeholder:{type:String,default:"Chọn miền"},region:{type:String},multiple:{type:Boolean,default:!1},all:{type:Boolean,default:!1},reset:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1}},data:function(){return{option:null,options:[{name:"TP Hà Nội",id:"HN"},{name:"Miền Bắc",id:"MB"},{name:"Miền Trung",id:"MT"},{name:"TP Hồ Chí Minh",id:"HCM"},{name:"Miền Nam",id:"MN"}]}},created:function(){this.all&&this.options.unshift({id:-1,name:"Toàn quốc"}),this.setSelectedOption()},watch:{option:function(t,e){this.$emit("handleSelectedRegion",t)},region:function(t,e){t?this.setSelectedOption():this.option=null},reset:function(){this.option=null}},methods:{setSelectedOption:function(){var t=this;if(this.options.length>0&&this.region)if(this.multiple){this.option=[];for(var e=this.region.split(","),a=!0,n=["MN","MB","MT","HN","HCM"],i=0;i<n.length;i++){var s=n[i];e.includes(s)||(a=!1)}if(a)return void this.option.push({id:-1,name:"Toàn quốc"});e.forEach(function(e){var a=t.options.find(function(t){return t.id===e});a&&t.option.push(a)})}else{var o=this.options.find(function(e){return e.id===t.region});this.option=o}},handleInput:function(t){if(this.all){var e=t.findIndex(function(t){return-1===t.id});if(t&&e>=0&&e===t.length-1)this.option=[{id:-1,name:"Toàn quốc"}];else{var a=t.filter(function(t){return-1!==t.id});this.option=a}}}}},s=a("XyMi");var o=function(t){a("q67u")},r=Object(s.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("multiselect",{staticClass:"multiselect-primary",class:t.selectClass,attrs:{options:t.options,placeholder:t.placeholder,label:"name","track-by":"id",selectedLabel:"",deselectLabel:"X",selectLabel:"",searchable:!0,multiple:t.multiple,disabled:t.isDisabled},on:{input:t.handleInput},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])],1)},[],!1,o,"data-v-7f166ce7",null);e.a=r.exports},lBHt:function(t,e,a){"use strict";var n=a("RUzx"),i=a.n(n),s=a("s5Jn"),o=a("HhAh"),r=a.n(o),l=a("phbQ"),c=a("0XQL"),d={props:{multiple:!1,resetAfter:{default:!1},user:{type:Object,default:null},inScope:{default:!1},statusId:{default:null},isSelectMainUser:{type:String,default:"no"},reset:{},placeholder:{default:"Nhập ít nhất 2 ký tự"},customClass:{default:"multiselect-primary"},trainingSyllabusId:{default:null},roles:{default:null},isDisabled:{type:Boolean,default:!1},targetApi:{type:String,default:"admin"}},name:"single-select-user",components:{Multiselect:i.a,depositService:s.a,debounce:r.a},watch:{asyncSelected:function(){this.$emit("onChange",this.asyncSelected)},user:{immediate:!0,handler:function(){this.user&&this.user.id?this.asyncSelected=this.user:this.asyncSelected=null}},reset:function(){this.asyncSelected=null}},data:function(){return{asyncSelected:null,asyncFound:[],asyncLoading:!1,asyncTimeout:null,message:"Nhập ít nhất 2 ký tự"}},computed:{},created:function(){},methods:{asyncFind:r()(function(t){var e=this;if(t.length<2)return this.asyncFound=[],void(this.message="Nhập ít nhất 2 ký tự");if(this.asyncLoading=!0,this.asyncFound=[],"hrm"===this.targetApi){var a={username:t,mp_status:c.a.ACTIVE_STATUS};l.a.searchUser(a).then(function(t){t.data.hasOwnProperty("success")&&(t.data.success?e.asyncFound=t.data.data:e.message="Không tìm thấy kết quả")}).catch(function(){e.message="Không tìm thấy kết quả"}).then(function(){e.asyncLoading=!1})}else s.a.apiGetListUsers({term:t,isSelectMainUser:this.isSelectMainUser,inScope:this.inScope,trainingSyllabusId:this.trainingSyllabusId,statusId:this.statusId,roles:this.roles}).then(function(t){t.data.hasOwnProperty("success")&&(t.data.success?e.asyncFound=t.data.data:e.message="Không tìm thấy kết quả")}).catch(function(){e.message="Không tìm thấy kết quả"}).then(function(){e.asyncLoading=!1})},500)}},u=a("XyMi"),h=Object(u.a)(d,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{attrs:{label:"name","track-by":"id",placeholder:t.placeholder,options:t.asyncFound,multiple:t.multiple,searchable:!0,loading:t.asyncLoading,"allow-empty":!0,"internal-search":!1,"clear-on-select":!0,"close-on-select":!0,"hide-selected":!1,"selected-label":"","deselect-label":"X","select-label":"",disabled:t.isDisabled,"reset-after":t.resetAfter},on:{"search-change":t.asyncFind,select:function(e){t.$emit("select",e)},remove:function(e){t.$emit("remove",e)}},model:{value:t.asyncSelected,callback:function(e){t.asyncSelected=e},expression:"asyncSelected"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("không có kết quả phù hợp !")]),t._v(" "),a("span",{attrs:{slot:"noOptions"},slot:"noOptions"},[t._v(t._s(t.message))]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,null,null,null);e.a=h.exports},lFpS:function(t,e){},lYvY:function(t,e){},ldSf:function(t,e){},lq6y:function(t,e){},"m+wD":function(t,e){},mBBi:function(t,e){},mCOD:function(t,e,a){"use strict";var n=a("XyMi");var i=function(t){a("teh7"),a("G+44")},s=Object(n.a)({name:"loading-mini-bottom",props:["enable"],method:{}},function(){var t=this.$createElement,e=this._self._c||t;return!0===this.enable?e("div",{staticClass:"loading fixed-loading"},[this._m(0)]):this._e()},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sk-three-bounce sk-primary"},[e("div",{staticClass:"sk-child sk-bounce1"}),this._v(" "),e("div",{staticClass:"sk-child sk-bounce2"}),this._v(" "),e("div",{staticClass:"sk-child sk-bounce3"})])}],!1,i,"data-v-d2a6791c",null);e.a=s.exports},mDu3:function(t,e){},mMK4:function(t,e){},mMWI:function(t,e){},mcfJ:function(t,e,a){"use strict";(function(t){var n=a("iwQb");if("server"!==t.env.VUE_ENV){var i=a("ytml").default,s=a("QzLT");if("undefined"!=typeof window&&"Worker"in window&&-1===navigator.appVersion.indexOf("MSIE 10")){var o=a("yQBj");s.GlobalWorkerOptions.workerPort=new o}var r=Object(n.a)(i(s))}else r=Object(n.a)({});e.a=r}).call(e,a("W2nU"))},msBV:function(t,e,a){"use strict";var n=a("Dd8w"),i=a.n(n),s=a("CpaI"),o=a("RUzx"),r={name:"single-select-district-tax",components:{Multiselect:a.n(o).a},props:{districtCode:{default:null},provinceCode:{default:null},isDisabled:{type:Boolean},state:Boolean},data:function(){return{option:null,options:[]}},watch:{provinceCode:function(t,e){this.option=null,t&&parseInt(t)!==parseInt(e)?this.getListDistrictByProvinceCode(t):t||(this.options=[])},option:function(t,e){this.$emit("handleSelectedDistrict",t)}},mounted:function(){this.provinceCode&&this.getListDistrictByProvinceCode(this.provinceCode)},methods:{setDisplayName:function(){this.options=this.options.map(function(t){var e=null===t.end_date||new Date(t.end_date)>new Date?t.prefix+" "+t.name:t.prefix+" "+t.name+" (Cũ)";return i()({},t,{name:e})})},getListDistrictByProvinceCode:function(t){var e=this,a={province_ids:[t]};s.a.getDistrictByProvinceIdHrmV2(a).then(function(t){t.data.success&&(e.options=t.data.data,e.districtCode&&null===e.option&&(e.option=e.options.find(function(t){return parseInt(t.code)===parseInt(e.districtCode)})),e.setDisplayName())}).catch(function(t){console.log(t)})}}},l=a("XyMi");var c=function(t){a("7BWE")},d=Object(l.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mb-4"},[a("multiselect",{attrs:{options:t.options,disabled:t.isDisabled,placeholder:"Chọn quận/huyện",label:"name","track-by":"name",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn",searchable:!0},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v("Chọn quận/huyện")])])],1)},[],!1,c,"data-v-510d6ca0",null);e.a=d.exports},mvUk:function(t,e){},mxZO:function(t,e){},nEp0:function(t,e,a){"use strict";var n=a("BO1k"),i=a.n(n),s=a("RUzx"),o=a.n(s),r=a("bJ+M"),l={name:"single-select-candidate-position",components:{Multiselect:o.a},props:{jobId:{default:null},hrview:{default:null},customClass:{default:""},multiple:{default:!1}},data:function(){return{positionOption:null,positionOptions:[]}},created:function(){this.getJobs()},watch:{jobId:function(t,e){if(t){var a=this.positionOptions.find(function(e){return e.id===t});this.positionOption=a||null}else this.positionOption=null},positionOption:function(t,e){this.$emit("handleChoosePosition",t)}},methods:{getJobs:function(){var t=this;r.a.getJobList().then(function(e){if(e.data.success){if(t.hrview)t.positionOptions=e.data.data;else{var a=null,n=function(n){(a=e.data.data.find(function(t){return t.id===n}))&&t.positionOptions.push(a)},s=!0,o=!1,r=void 0;try{for(var l,c=i()(["1","2","3"]);!(s=(l=c.next()).done);s=!0){n(l.value)}}catch(t){o=!0,r=t}finally{try{!s&&c.return&&c.return()}finally{if(o)throw r}}}if(t.jobId){var d=t.positionOptions.find(function(e){return e.id===t.jobId});d&&(t.positionOption=d)}}}).catch(function(t){console.log(t)})}}},c=a("XyMi"),d=Object(c.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("multiselect",{class:t.customClass,attrs:{options:t.positionOptions,placeholder:"Chọn vị trí",label:"job_name","track-by":"id",selectedLabel:"Đã chọn",selectLabel:"",deselectLabel:"X",searchable:!0,multiple:t.multiple},model:{value:t.positionOption,callback:function(e){t.positionOption=e},expression:"positionOption"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v("Chọn vị trí")])])],1)},[],!1,null,null,null);e.a=d.exports},nJAo:function(t,e){},nmJh:function(t,e){},"o1+c":function(t,e){},o1vX:function(t,e,a){"use strict";var n=a("7pbi"),i=a("hC/b"),s=this,o={props:{userId:{required:!0},orderId:{default:null},type:{type:String,required:!0},dataInput:{default:"***"},source:{type:String,required:!0},className:{default:""},placeHolder:{default:""}},name:"sensitive-form-input",components:{EyeButton:n.a},watch:{dataInput:function(t,e){this.inputValue=t}},data:function(){return{inputValue:s.dataInput,isLoading:!1}},computed:{},created:function(){},methods:{setRawData:function(t){i.a.isEmpty(t)||(this.inputValue=t),this.$emit("returnRawData",t)}}},r=a("XyMi");var l=function(t){a("xvYD")},c=Object(r.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sensitive-form-input",class:t.className},[a("b-form-input",{attrs:{disabled:"",value:t.dataInput,placeholder:t.placeHolder}}),t._v(" "),a("eye-button",{staticClass:"sensitive-form-input__eye-icon",attrs:{source:t.source,type:t.type,"user-id":t.userId,"order-id":t.orderId},on:{returnRawData:t.setRawData}})],1)},[],!1,l,"data-v-00a4052d",null);e.a=c.exports},o5g8:function(t,e){},o5n9:function(t,e){},oDnH:function(t,e){},oXjO:function(t,e,a){"use strict";e.a={TECHNOLOGY_CENTER:2,MEDIA_CULTURE:3,BUSINESS_DEVELOPMENT:4,ACCOUNTANT:5,HR:7,LASTMILE:9,MIDLEMILE:10,TRUCK_OPERATION:11,CUSTOMER_SERVICE_B2C:12,CUSTOMER_SERVICE_C2C:13,COD:14,LEGAL:16,POST_OFFICES_DEPARTMENT:17,ASSISTANT_AND_SECRETARY:19,MEDIA:20,MARKETING:21,PDA:22,INSPECT_OPERATION:23,FINANCE:24,SUPPLY_MANAGEMENT:26,OFFICE_DEPARTMENT:27,CONSTRUCTION_GROUND:28,XFAST_DEPARTMENT:29}},oYhB:function(t,e){},oco6:function(t,e){},oonE:function(t,e,a){"use strict";var n=a("fZjL"),i=a.n(n),s=a("Zx67"),o=a.n(s),r=a("Zrlr"),l=a.n(r),c=a("wxAW"),d=a.n(c),u=a("zwoO"),h=a.n(u),p=a("Pf15"),m=a.n(p),f=a("MUME"),g=a("PJh5"),v=a.n(g),_=function(t){function e(){return l()(this,e),h()(this,(e.__proto__||o()(e)).apply(this,arguments))}return m()(e,t),d()(e,null,[{key:"getTypeOptions",value:function(){var t=[];return i()(e.typeOptions).forEach(function(a){t.push({text:e.typeOptions[a],value:a})}),t}},{key:"calculateEndDateByContractType",value:function(t,e){var a="";switch(t){case"parttime":case"definite":a=v()(e).add(12,"months").subtract(1,"days").format("YYYY-MM-DD");break;case"definite_24":a=v()(e).add(24,"months").subtract(1,"days").format("YYYY-MM-DD");break;case"apprenticeship":a=v()(e).add(3,"months").subtract(1,"days").format("YYYY-MM-DD");break;case"probation":a=v()(e).add(2,"months").subtract(1,"days").format("YYYY-MM-DD")}return a}}]),e}(f.a);_.typeOptions={probation:"Thử việc",parttime:"Cộng tác viên",partnership:"Hợp tác kinh doanh",definite:"Có thời hạn 12 tháng",definite_24:"Có thời hạn 24 tháng",indefinite:"Không thời hạn",service_contract:"Hợp đồng dịch vụ",apprenticeship:"Hợp đồng học việc"},_.status={active:"Có hiệu lực",draft:"Bản nháp",disable:"Hết hiệu lực",signed:"Đã ký"},_.salaryDateOps=[{text:"Ngày vào",value:"join_date"},{text:"Sau 2 tháng từ ngày vào",value:"after_2_month"},{text:"Sau 1 tháng từ ngày vào",value:"after_1_month"}],_.arrayTypeContract=[{value:"indefinite",desc:"Không thời hạn"},{value:"definite",desc:"Thời hạn 12 tháng"},{value:"definite_24",desc:"Thời hạn 24 tháng"},{value:"probation",desc:"Thử việc"},{value:"partnership",desc:"Hợp tác kinh doanh"},{value:"parttime",desc:"Cộng tác viên"},{value:"service_contract",desc:"Dịch vụ"},{value:"apprenticeship",desc:"Học việc"}],_.printStatus={not_print:"Chưa in",printed:"Đã in",received:"Đã nhận"},_.printStatusOption=[{value:"not_print",desc:"Chưa in"},{value:"printed",desc:"Đã in"},{value:"received",desc:"Đã nhận"}],_.reasonLiquidate=[{value:"unilaterally",text:"(1) Do Bên B đơn phương chấm dứt HĐLĐ - Nghỉ ngang"},{value:"agreement",text:"(2) Do 2 bên thỏa thuận chấm dứt - Nghỉ việc đúng quy trình/ Cho thôi việc"},{value:"expire",text:"(3) Hợp đồng hết thời hạn đã giao kết."},{value:"other",text:"Khác (Điền chi tiết lý do)"}],_.appendixType=["probation","parttime","definite","definite_24","indefinite"],_.optionalAppendixType=["service_contract","apprenticeship"],_.noEndDateType=["indefinite","service_contract"],_.fastContractOption=[{text:"Hợp tác kinh doanh",value:"partnership"},{text:"Cộng tác viên",value:"parttime"},{text:"Hợp đồng dịch vụ",value:"service_contract"}],e.a=_},p25i:function(t,e){},pZLP:function(t,e){},pedj:function(t,e,a){"use strict";var n=a("pFYg"),i=a.n(n),s=a("BO1k"),o=a.n(s),r=a("d7EF"),l=a.n(r),c=a("hC/b"),d=(a("N1kN"),a("Ls4C")),u=a("xF2Z"),h=a("EAZf"),p=a.n(h);a("7+uW").default.use(p.a);var m={name:"file-view-upload",props:{files:{type:Array,default:function(){return[]}},fileAdd:{type:Array,default:function(){return[]}},fileDelete:{type:Array,default:function(){return[]}},edit:{type:Boolean,default:!1},imagePreviewClass:{default:"image-preview"},loading:{type:Boolean,default:!1},accept:{type:String,default:"image/*, .pdf"},hideUploadButton:{type:Boolean,default:!1},inputPlaceholder:{type:String,default:"Thêm file"},multiple:{type:Boolean,default:!0},camera:{type:String,default:null},labelClass:{default:"custom-file-label"},height:{default:"150px",type:String},inputCombine:{type:Boolean,default:!1},inputId:{type:String,default:"add-file-box"},scrollbarOption:{type:Object,default:function(){return{wheelSpeed:.2,wheelPropagation:!0,suppressScrollX:!0}}},blurImage:{default:null},inputStyle:{default:null},allowDelete:{default:!0},labelIndex:{default:0},isThumbnail:{default:!1},onlyDelete:{type:Boolean,default:!1},fileDeleteId:{type:Array,default:function(){return[]}},isShowFileExist:{default:!0},isDataEncrypt:{type:Boolean,default:!1}},components:{PerfectScrollbar:d.a},data:function(){return{fileData:[]}},computed:{isBlur:function(){return this.blurImage&&this.fileAdd[0]&&this.fileAdd[0].link},fileFormatted:function(){var t=[],e=!0,a=!1,n=void 0;try{for(var s,r=o()(this.files.entries());!(e=(s=r.next()).done);e=!0){var c=s.value,d=l()(c,2),u=d[0],h=d[1];"string"==typeof h?t.push({name:"File "+(u+1),link:h,media_type:this.getMediaType(h),deleted:!1}):h&&"object"===(void 0===h?"undefined":i()(h))?(h.name||(h.name="File "+(u+1)),h.link||(h.link="#"),h.media_type||(h.media_type=this.getMediaType(h.link)),h.deleted=!1,t.push(h)):t.push({name:"File "+(u+1),link:"#",media_type:"other",deleted:!1})}}catch(t){a=!0,n=t}finally{try{!e&&r.return&&r.return()}finally{if(a)throw n}}return t}},watch:{isBlur:function(t,e){var a=this.$el.querySelector("#custom-file-label > :first-child");a&&(t?a.classList.add("is-blur-image"):a.classList.remove("is-blur-image"))},"fileAdd.0":function(t,e){var a=this.$el.querySelector("#custom-file-label > :first-child");if(a){var n=null;n=this.edit&&this.inputCombine&&t?"height: 100%; background-repeat: no-repeat; background-position: center; background-size: contain; background-color: transparent; background-image: url("+this.fileAdd[0].link+");":"height: 100%; line-height: "+this.height,a.style=n}}},methods:{addFile:function(t){this.fileAdd||(this.fileAdd=[]);var e=t.target.files;e&&0!==e.length||this.multiple||(this.revorkePreview(this.fileAdd),this.fileAdd.shift()),e.size&&(e=[e]);var a=this.accept.split(", "),n=!0,i=!1,s=void 0;try{for(var r,l=o()(e);!(n=(r=l.next()).done);n=!0){var d=r.value,u=d.type.split("/"),h=d.name.split(".").pop();if(!u||u.lenght<1)return;a.includes(d.type)||a.includes(u[0]+"/*")||a.includes("."+h)?(this.multiple||(this.revorkePreview(this.fileAdd),this.fileAdd.length=0),d.media_type=this.getMediaType(d.name),d.link=URL.createObjectURL(d),this.fileAdd.push(d)):c.a.showMessage("Định dạng file "+d.name+"  không được hỗ trợ !","warning")}}catch(t){i=!0,s=t}finally{try{!n&&l.return&&l.return()}finally{if(i)throw s}}this.$emit("onChange",this.fileAdd),t.target.value=null},deleteFileUploaded:function(t){if(t.deleted=!t.deleted,t.deleted)this.fileDelete&&this.fileDelete.push(t.link),this.fileDeleteId&&this.fileDeleteId.push(t.id);else{if(!this.fileDelete&&!this.fileDeleteId)return;var e=this.fileDelete.indexOf(t.link);e>=0&&(this.fileDelete.splice(e,1),this.fileDeleteId.splice(e,1))}},revorkePreview:function(t){var e=!0,a=!1,n=void 0;try{for(var i,s=o()(t);!(e=(i=s.next()).done);e=!0){var r=i.value;URL.revokeObjectURL(r.link)}}catch(t){a=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(a)throw n}}},deleteFileAdded:function(t){this.revorkePreview([this.fileAdd[t]]),this.fileAdd.splice(t,1)},openLink:function(t){if(this.isDataEncrypt&&t.content_file){var e=c.a.base64ToBlob(t.content_file,"application/pdf");c.a.downloadFileFromBlob(e,t.name)}else window.open(t.link,"_blank")},getMediaType:function(t){var e;return e=t.split("?").shift().split(".").pop().toLowerCase(),["jpeg","png","gif","tiff","psd","jpg","eps","ai","indd","raw","bmp","svg"].includes(e)?"image":["pdf"].includes(e)?"pdf":["doc","docx","odt","rtf"].includes(e)?"doc":["xls","xlsx","xlsb"].includes(e)?"excel":["txt","csv"].includes(e)?"text":["mpeg","mp4","avi","ts","webm","3gp","3g2"].includes(e)?"video":["mp3","aac","ogg","opus","wav"].includes(e)?"audio":["zip","rar","7z","tar"].includes(e)?"zip":"other"},uploadFile:function(){this.$emit("update-file")},getOriginImage:function(t){var e={urls:[t.link]};u.a.getOriginImage(e).then(function(e){e.data.success&&e.data.urls?t.link=e.data.urls[0]&&e.data.urls[0].path:c.a.showMessage("Không lấy được ảnh nét !","warning")}).catch(function(t){console.log(t),c.a.showMessage("Không lấy được ảnh nét !","warning")})}}},f=a("XyMi");var g=function(t){a("Wf9h")},v=Object(f.a)(m,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"viewer",rawName:"v-viewer"},{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("perfect-scrollbar",{staticClass:"scrollbar-file",attrs:{options:t.scrollbarOption}},[t.isShowFileExist?t._l(t.fileFormatted,function(e,n){return a("div",{key:n+"files",staticClass:"bounder"},[t.edit&&t.allowDelete||t.onlyDelete?a("span",{staticClass:"icon btn-disable-file",class:e.deleted?"ion-md-refresh-circle":"ion-md-close-circle",attrs:{title:e.deleted?"Lấy lại":"Xóa"},on:{click:function(a){return t.deleteFileUploaded(e)}}}):t._e(),t._v(" "),"image"===e.media_type?a("div",{staticClass:"d-table",class:e.deleted&&"file-deleted"},[a("img",{class:t.imagePreviewClass,style:{height:t.height,filter:t.blurImage&&e.link?"blur(15px)":null},attrs:{src:e.link,alt:e.name},on:{click:function(a){t.isThumbnail&&t.getOriginImage(e)}}})]):a("div",{staticClass:"d-table mr-3 a2"},[a("b-badge",{attrs:{variant:"ghtk"},on:{click:function(a){return t.openLink(e)}}},[a("span",{staticClass:"font-weight-bold h4"},[t._v(t._s(e.name))])])],1)])}):t._e(),t._v(" "),t.edit&&!t.inputCombine?a("div",{staticClass:"d-inline-block"},t._l(t.fileAdd||[],function(e,n){return a("div",{key:e.name+"file-add"+n,staticClass:"bounder"},[a("span",{staticClass:"icon ion-md-close-circle btn-disable-file",attrs:{title:"Xóa"},on:{click:function(e){return t.deleteFileAdded(n)}}}),t._v(" "),"image"===e.media_type?a("div",{staticClass:"d-table"},[a("img",{class:t.imagePreviewClass,style:{height:t.height},attrs:{src:e.link,alt:e.name}})]):a("div",{staticClass:"d-table mr-3"},[a("b-badge",{attrs:{variant:"ghtk"}},[a("span",{staticClass:"font-weight-bold h4"},[t._v(t._s(e.name))])])],1)])}),0):t._e(),t._v(" "),t.edit?a("div",{staticClass:"bounder"},[a("div",{staticClass:"d-table dragdrop",style:{height:t.height}},[a("div",{staticClass:"custom-file"},[a("div",{staticClass:"invisible"},[a("input",{staticClass:"custom-file-input",style:t.inputStyle,attrs:{type:"file",multiple:t.multiple,accept:t.accept,placeholder:t.inputPlaceholder,id:t.inputId,name:"input_"+t.inputId},on:{input:t.addFile}})]),t._v(" "),a("label",{staticClass:"custom-file-label m-0",style:{height:t.height,"z-index":t.labelIndex},attrs:{for:t.inputId,id:"custom-file-label"}},[t._t("label",function(){return[a("div",{staticClass:"file-label-inner",style:{"line-height":t.height}},[a("div",{class:{"label-content":t.fileAdd&&t.fileAdd[0]&&t.inputCombine}},[a("div",{staticStyle:{position:"absolute",left:"45%",top:"-0.7rem"}},[a("i",{staticClass:"ion ion-ios-add"})]),t._v(t._s(t.inputPlaceholder))])])]})],2)])])]):t._e()],2),t._v(" "),t.edit&&!t.hideUploadButton?a("div",{staticClass:"w-100 text-center"},[a("hr"),t._v(" "),t._t("update-btn-content",function(){return[a("b-btn",{attrs:{variant:"ghtk"},on:{click:t.uploadFile}},[a("i",{staticClass:"fas fa-upload"}),t._v(" Cập nhật file\n      ")])]})],2):t._e()],1)},[],!1,g,"data-v-2b5d46d0",null);e.a=v.exports},phbQ:function(t,e,a){"use strict";var n=a("PikB"),i=a("Saf8");e.a={updateStatus:function(t,e){var a={user_id:t,status_id:e};return n.a.post("/AdProfiles/updateStatusUser",a)},changeVirtualUserStatus:function(t,e){var a={user_id:t,virtual_user:e};return n.a.post("/AdUsers/changeVirtualUserStatus",a)},getValidSalaryFormulasOfCod:function(){return n.a.get("/AdUsers/getValidSalaryFormulasOfCod")},calculateCodFormula:function(t){return n.a.get("/AdUsers/calculateCodFormula",{params:t})},getLeaveUsers:function(t){return n.a.get("/AdUsers/getLeaveUsers",{params:t})},updateLeaveBlance:function(t){return n.a.post("/AdUsers/updateLeaveBlanceVer2",t)},getLogs:function(t){return n.a.get("/AdUsers/getLogs",{params:t})},fetchDataForUserFilter:function(t){return n.a.get("AdUsers/fetchDataForUserFilter",{params:t})},getSpecialPermissions:function(t){return n.a.get("/AdUsers/getSpecialPermissions",{params:t})},getBasicInfoById:function(t){return n.a.get("/AdUsers/getBasicInfoById",{params:t})},getUserInfo:function(){return n.a.get("AdUsers/getUserInfo")},getUserDetailInfo:function(t){return n.a.get("AdUsers/getUserDetailInfo",{params:t})},updateMainUser:function(t){return n.a.post("/AdUsers/updateMainUser",t)},getListUser:function(t){return n.a.get("AdUsers/getListUser",{params:t})},searchUser:function(t){return i.a.get("user/search",{params:t})},getAllLeaveType:function(){return n.a.get("AdTimeSheetManager/getAllLeaveType")},createLeaveBlance:function(t){return n.a.post("/AdUsers/createLeaveBlance",t)},updateWorkHistory:function(t){return n.a.post("/AdUsers/updateWorkHistory",t)},getUserWorkHistory:function(t){return n.a.get("/AdUsers/getUserWorkHistory",{params:t})},updatePauseWorkHistory:function(t){return n.a.post("/AdMasterProfile/resign",t)},addLogPauseWorkHistory:function(t){return n.a.post("/AdMasterProfile/addLogPauseWorkHistory",t)},getUserPauseWorkHistory:function(t){return n.a.get("/AdUsers/getUserPauseWorkHistory",{params:t})},removeWorkHistory:function(t){return n.a.get("/AdUsers/removeWorkHistory",{params:t})},removePauseWorkHistory:function(t){return n.a.get("/AdUsers/removePauseWorkHistory",{params:t})},getNewLogs:function(t){return n.a.get("/AdUsers/getNewLogs",{params:{profile_id:t}})},addCancelPauseWorkHistory:function(t){return n.a.post("/AdMasterProfile/cancelResign",t)},createZoiperAcc:function(t){return i.a.post("/call-center/create-user-phone",t)},getPhoneByUserId:function(t){return i.a.get("/user/get-phone",{params:t})},canPer:function(t){return i.a.get("/user/can",{params:t})},suggestManagerEmployee:function(t){return i.a.post("/user/suggest-manager-employee",t)},updateManagerEmployee:function(t){return i.a.post("/user/update-manager-employee",t)},confirmStatus:function(t){return i.a.get("/link-leader/get-status-confirm",{params:t})},loginByGchatToken:function(t){return n.a.post("/AdUsers/loginByGchatToken",t)},loginByIamToken:function(t){return n.a.post("/AdUsers/loginByToken",t)},updateDefaultWork:function(t){return i.a.post("/default-work/update-job-web",t)},getUserChangeLog:function(t){return i.a.get("/user/get-change-logs",{params:t})},getMpChangeLog:function(t){return i.a.get("/staff-log/get-mp-change-logs",{params:t})},getAuthUserInfo:function(){return i.a.get("/user/get-auth-user-info")}}},poZo:function(t,e,a){"use strict";var n=a("Dd8w"),i=a.n(n),s=a("NYxO");e.a={computed:i()({},Object(s.c)({userInfo:"userInfo"})),methods:{checkPermissionExportAllPage:function(){return this.userInfo&&this.userInfo.hasOwnProperty("User")&&["ngoctv5","namtt11","itninhnt","itphihv1"].includes(this.userInfo.User.username)}}}},"pr+G":function(t,e){},pu4W:function(t,e,a){"use strict";var n=a("RUzx"),i={name:"single-select-referral",components:{Multiselect:a.n(n).a},props:{reset:!1,referral:{type:String},hrview:{default:!0},placeholder:{default:"Chọn nguồn giới thiệu"}},data:function(){return{selectedReferral:null,referralHrOptions:[{name:"Mạng xã hội",value:"facebook"},{name:"Jobsite tuyển dụng",value:"web"},{name:"Ngày hội việc làm",value:"workfes"},{name:"Giới thiệu nội bộ",value:"employee"},{name:"Quảng cáo ngoài trời",value:"outdoor"},{name:"Đối tác tuyển dụng",value:"other"}],referralCandidateOptions:[{name:"Mạng xã hội",value:"facebook"},{name:"Jobsite tuyển dụng",value:"web"},{name:"Ngày hội việc làm",value:"workfes"},{name:"Giới thiệu nội bộ",value:"employee"},{name:"Quảng cáo ngoài trời",value:"outdoor"},{name:"Khác",value:"other"}]}},watch:{selectedReferral:function(t,e){this.$emit("on-select",t)},referral:function(t,e){t?this.hrview?this.selectedReferral=this.referralHrOptions.find(function(e){return e.value===t}):this.selectedReferral=this.referralCandidateOptions.find(function(e){return e.value===t}):this.selectedReferral=null},reset:function(){this.selectedReferral=null}}},s=a("XyMi"),o=Object(s.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("multiselect",{attrs:{options:t.hrview?t.referralHrOptions:t.referralCandidateOptions,placeholder:t.placeholder,label:"name","track-by":"value",selectedLabel:"Đã chọn",deselectLabel:"X",selectLabel:"",searchable:!0},on:{select:function(e){return t.$emit("select",e)}},model:{value:t.selectedReferral,callback:function(e){t.selectedReferral=e},expression:"selectedReferral"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])],1)},[],!1,null,null,null);e.a=o.exports},q67u:function(t,e){},q75W:function(t,e,a){"use strict";var n=a("Zx67"),i=a.n(n),s=a("Zrlr"),o=a.n(s),r=a("wxAW"),l=a.n(r),c=a("zwoO"),d=a.n(c),u=a("Pf15"),h=a.n(u),p=function(t){function e(){return o()(this,e),d()(this,(e.__proto__||i()(e)).apply(this,arguments))}return h()(e,t),l()(e,null,[{key:"showNumberInput",value:function(t){return e.listTypeNumberInput.includes(parseInt(t))}},{key:"labelNumberInput",value:function(t){switch(t){case e.rewardPenaltyTypes.type_reward_personal:return"Thưởng cá nhân";case e.rewardPenaltyTypes.type_reward_collective:return"Thưởng tập thể";case e.rewardPenaltyTypes.type_penalty_card:return"Thẻ phạt"}}},{key:"recompenseTypeName",value:function(t){switch(t){case e.rewardPenaltyTypes.type_reward_personal:case e.rewardPenaltyTypes.type_reward_collective:return"reward";case e.rewardPenaltyTypes.type_penalty_card:return"penalty"}}}]),e}(a("MUME").a);p.rewardPenaltyTypes={type_reward_personal:0,type_reward_collective:1,type_penalty_card:3},p.rewardStatusTag={0:"propose-status",1:"cancel-status",2:"approve-status",3:"approve-status",7:"approve-status"},p.rewardStatus={request:0,reject:1,confirm_by_manager:2,confirm_by_head:3,delete:4,confirm_by_hr:7},p.optionLevelKeys={honors:"honors",cash:"cash",warning:"warning"},p.optionLevelRewards={honors:"Tuyên dương",cash:"Thưởng tiền"},p.optionLevelPenalties={warning:"Cảnh cáo",cash:"Tiền mặt"},p.optionLevels={penalty:[{value:p.optionLevelKeys.warning,text:p.optionLevelPenalties.warning},{value:p.optionLevelKeys.cash,text:p.optionLevelPenalties.cash}],reward:[{value:p.optionLevelKeys.honors,text:p.optionLevelRewards.honors},{value:p.optionLevelKeys.cash,text:p.optionLevelRewards.cash}]},p.optionCategories={penalty:[{value:"yellow_card",text:"Thẻ vàng"},{value:"red_card",text:"Thẻ đỏ"}],reward:[{value:"instant_bonus",text:"Thưởng nóng"},{value:"month_star",text:"Ngôi sao tháng"},{value:"dedication_bonus",text:"Thưởng cống hiến"}]},p.fStarTypes={penalty:"penalty",reward:"reward"},p.listTypeNumberInput=[p.rewardPenaltyTypes.type_reward_personal,p.rewardPenaltyTypes.type_reward_collective,p.rewardPenaltyTypes.type_penalty_card],e.a=p},qAfc:function(t,e){},qOi5:function(t,e,a){"use strict";var n=a("Dd8w"),i=a.n(n),s=a("vfns"),o=a("CpaI"),r=a("RUzx"),l={name:"single-select-district",components:{Multiselect:a.n(r).a},props:{isGetAll:{type:Boolean,default:!1},id:{default:"select-district"},provinceId:null,districtId:null,isDisabled:{type:Boolean},state:{type:Boolean,default:null},placeholder:{type:String,default:"Chọn quận/huyện"}},data:function(){return{storage:null,option:null,options:[]}},created:function(){this.storage=new s.a,this.getListDistrict()},watch:{option:function(t,e){this.$emit("handleSelectedDistrict",t)},provinceId:function(t,e){this.option=null,this.options=[],null!==t&&this.getListDistrict()},districtId:function(t,e){null!==t&&""!==t&&this.setSelectedOption()}},methods:{setSelectedOption:function(){var t=this;this.options.length>0&&this.districtId&&(this.option=this.options.find(function(e){return parseInt(e.id)===parseInt(t.districtId)}))},setDisplayName:function(){this.options=this.options.map(function(t){var e=null===t.end_date||new Date(t.end_date)>new Date?t.prefix+" "+t.name:t.prefix+" "+t.name+" (Cũ)";return i()({},t,{name:e})})},getListDistrict:function(){var t=this;if(!this.isGetAll&&!this.provinceId)return this.options=[],void(this.option=null);var e="listDistrictsByProvince-"+this.provinceId;this.isGetAll&&(e="listAllDistricts");var a=this.storage.get(e);if(a)this.options=a,this.setDisplayName(),this.setSelectedOption();else{var n={province_ids:[this.provinceId]};o.a.getDistrictByProvinceIdHrmV2(n).then(function(a){a.data.success&&(t.options=a.data.data,t.storage.set(e,t.options),t.setDisplayName(),t.setSelectedOption())}).catch(function(t){console.log(t)})}}}},c=a("XyMi");var d=function(t){a("P1TD")},u=Object(c.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{class:{stateTrue:!0===t.state,stateFalse:0==t.state},attrs:{id:t.id,options:t.options,placeholder:t.placeholder,disabled:t.isDisabled,label:"name","track-by":"id",selectedLabel:"",deselectLabel:"X",selectLabel:""},on:{select:function(e){t.$emit("select",e)},input:function(e){t.$emit("input",e)},remove:function(e){t.$emit("remove",e)}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,d,"data-v-4292b38b",null);e.a=u.exports},qcnM:function(t,e,a){"use strict";var n=a("Xxa5"),i=a.n(n),s=a("exGp"),o=a.n(s),r=a("TwHU"),l=a("PJh5"),c=a.n(l),d=(a("N1kN"),a("EAZf")),u=a.n(d),h=a("7+uW"),p=a("dAhr"),m=a("xF2Z"),f=a("4WGu"),g=a("hC/b"),v=a("GoQ2"),_=a("zmAe"),b=a("7pbi");h.default.use(u.a);var y={components:{SensitiveLinkLabel:_.a,EyeButton:b.a,Viewer:u.a,pdf:p.a},props:{permissions:{},item:{},masterProfile:{},closingShiftLayout:{default:!1},authUserDutyId:null},data:function(){return{optionLevelCredit:r.d,privateUrls:[]}},computed:{helper:function(){return g.a},canRejectDocument:function(){return"Đã duyệt"!==this.item.ProfileDocument.status||this.permissions.delete_approved_doc}},mounted:function(){},methods:{imageSrc:function(t){return 58==+this.item.ProfileDocument.document_id?"https://cache.giaohangtietkiem.vn/d/6dfaffd8b31844a380c72b9a191894e5.png":(this.checkPdf(t)&&(t=f.a.baseUrl+"/static/img/pdf.png"),t)},openFile:function(t){var e=this;return o()(i.a.mark(function a(){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.item.ErpDocument.private||e.privateUrls[t]){a.next=4;break}return a.next=3,e.getClearPath(t);case 3:e.privateUrls[t]=a.sent;case 4:e.privateUrls[t]&&(t=e.privateUrls[t]),t&&window.open(t,"_blank");case 6:case"end":return a.stop()}},a,e)}))()},getClearPath:function(t){var e=this;return o()(i.a.mark(function a(){var n,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t.includes("https://")||t.includes("http://"))&&(t=new URL(t).pathname),e.next=3,m.a.apiGetClearFile({path:t});case 3:return n=e.sent,s=n.data,e.abrupt("return",s.data);case 6:case"end":return e.stop()}},a,e)}))()},variant:function(t){switch(t){case"Chưa duyệt":return"status-waiting";case"Đã duyệt":return"outline-ghtk";case"Từ chối":return"status-reject";default:return""}},showCicDetail:function(t){this.$emit("showCicDetail",t)},approve:function(t,e){this.$emit("approve",{doc:t,status:e})},isCCCD:function(t){return 2==+t},checkImage:function(t){return null!=t.match(/^http[^\?]*.(jpg|jpeg|gif|png|tiff|bmp)(\?(.*))?$/gim)},checkPdf:function(t){return null!=t.match(/\.(pdf|PDF)$/)},remove:function(t){this.$emit("remove",t)},viewIdentify:function(){var t=this;return o()(i.a.mark(function e(){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.getOriginImage({urls:t.item.ProfileDocument.files});case 2:a=e.sent,(n=a.data).success&&(t.item.ProfileDocument.files=n.urls.map(function(t){return t.path}));case 5:case"end":return e.stop()}},e,t)}))()},setRawData:function(t){g.a.isEmpty(t)||(this.item.ProfileDocument.files=t)},getHealthClassName:function(t){return(new v.a).getClassName(t)}},filters:{dateFormated:function(t){return c()(t).format("DD/MM/YYYY")}},watch:{}},C=a("XyMi");var w=function(t){a("MUl9"),a("ZBG+")},k=Object(C.a)(y,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("div",{staticClass:"mb-1 image-wrap"},[a("b-carousel",{directives:[{name:"viewer",rawName:"v-viewer"}],ref:"profileDocsSlide",staticClass:"document-carousel-custom",staticStyle:{"text-shadow":"1px 1px 2px #333",height:"250px",border:"1px solid #ddd"},attrs:{background:"#ababab",interval:4e4,controls:!0,indicators:!0}},t._l(t.item.ProfileDocument.files,function(e,n){return a("b-carousel-slide",{key:"slide-"+n,scopedSlots:t._u([t.checkImage(e)||t.isCCCD(t.item.ProfileDocument.document_id)?{key:"img",fn:function(){return[a("img",{staticClass:"w-100",attrs:{src:t.imageSrc(e),alt:t.item.ErpDocument.name}})]},proxy:!0}:{key:"img",fn:function(){return[a("img",{class:["w-100 tracking-action","tracking-open-file-document-"+t.item.ProfileDocument.document_id,"tracking-uid-"+t.masterProfile.user_id],attrs:{src:t.imageSrc(e),alt:t.item.ErpDocument.name},on:{click:function(a){return t.openFile(e)}}})]},proxy:!0}],null,!0)})}),1),t._v(" "),a("div",[a("b-button-group",{staticClass:"btn-block mt-1 mb-1",attrs:{size:"sm"}},[a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.focus",modifiers:{focus:!0}}],class:["mt-0 tracking-action","tracking-watch-video-document-"+t.item.ProfileDocument.document_id,"tracking-uid-"+t.masterProfile.user_id],attrs:{disabled:!t.item.ProfileDocument.videos,block:"",variant:"light rounded-0",title:"Video"},on:{click:function(e){return t.openFile(t.item.ProfileDocument.videos)}}},[a("i",{staticClass:"fa fa-video"}),t._v(" Xem video\n            ")]),t._v(" "),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.focus",modifiers:{focus:!0}}],staticClass:"mt-0 p-0",attrs:{disabled:!t.item.ErpDocument.private||58==+t.item.ProfileDocument.document_id,block:"",variant:"light rounded-0",title:"Lưu ý - Người xem ảnh sẽ được lưu lại"}},[a("EyeButton",{class:"w-100 h-100 pt-1 tracking-docid-"+t.item.ProfileDocument.document_id,attrs:{source:"'take-sharp-picture'",type:"image",dataInput:t.item.ProfileDocument.files?t.item.ProfileDocument.files.join(","):"",userId:t.masterProfile.user_id,label:"Lấy ảnh nét"},on:{returnRawData:t.setRawData}})],1)],1)],1),t._v(" "),a("b-button",{staticClass:"rounded",staticStyle:{height:"2rem"},attrs:{block:"",variant:t.variant(t.item.ProfileDocument.status),size:"sm"}},[t._v("\n          "+t._s("Từ chối"===t.item.ProfileDocument.status?"Đã từ chối":t.item.ProfileDocument.status)+"\n        ")])],1),t._v(" "),a("div",{staticClass:"info"},[a("div",{staticClass:"mb-1 text-black"},[a("b",[t._v(t._s(t.item.ErpDocument.name))])]),t._v(" "),a("div",{staticClass:"mb-1 text-black"},[a("b",[t._v("Ngày tạo: ")]),t._v(t._s(t._f("dateFormated")(t.item.ProfileDocument.created)))]),t._v(" "),a("div",{staticClass:"mb-1 text-black"},[a("b",[t._v("Số trang: ")]),t._v(t._s(t.item.ProfileDocument.num_of_pages))]),t._v(" "),5==+t.item.ProfileDocument.document_id?a("div",[a("div",{staticClass:"mb-1 text-black"},[a("b",[t._v("Phân loại: ")]),t._v(t._s(t.getHealthClassName(t.item.ErpDocumentHealthCert.class)))])]):13==+t.item.ProfileDocument.document_id?a("div",[a("div",{staticClass:"mb-1 text-black"},[a("b",[t._v("Số bằng: ")]),t._v(t._s(t.masterProfile.ErpDriverLicense.no_number))]),t._v(" "),a("div",{staticClass:"mb-1 text-black"},[a("b",[t._v("Ngày cấp: ")]),t._v(" "),t.masterProfile.ErpDriverLicense.beginning_date?a("span",[t._v(t._s(t._f("dateFormated")(t.masterProfile.ErpDriverLicense.beginning_date)))]):t._e()]),t._v(" "),a("div",{staticClass:"mb-1 text-black"},[a("b",[t._v("Ngày hết hạn: ")]),t._v(" "),t.masterProfile.ErpDriverLicense.expiry_date?a("span",[t._v("\n              "+t._s(t._f("dateFormated")(t.masterProfile.ErpDriverLicense.expiry_date))+"\n            ")]):a("span",[t._v("\n              "+t._s(t.masterProfile.ErpDriverLicense.no_number?"Vô thời hạn":"")+"\n            ")])]),t._v(" "),a("div",{staticClass:"mb-1 text-black"},[a("b",[t._v("Hạng bằng: ")]),t._v(t._s(t.masterProfile.ErpDriverLicense.class))])]):60==+t.item.ProfileDocument.document_id?a("div",[a("div",{staticClass:"mb-1 text-black"},[a("b",[t._v("Biển số xe: ")]),t._v(t._s(t.item.ErpVehicleRC.head_license_plate)+"-"+t._s(t.item.ErpVehicleRC.tail_license_plate))])]):10==+t.item.ProfileDocument.document_id?a("div",[a("div",{staticClass:"mb-1 text-black"},[a("b",[t._v("Họ tên người bảo lãnh: ")]),t._v(t._s(t.masterProfile.guardian.fullname))]),t._v(" "),a("div",{staticClass:"mb-1 text-black"},[a("b",[t._v("Mối quan hệ: ")]),t._v(t._s(t.masterProfile.guardian.relation))]),t._v(" "),a("div",{staticClass:"mb-1 text-black"},[a("b",[t._v("Số CMND/CCCD: ")]),t._v(" "),a("SensitiveLinkLabel",{staticClass:"d-inline",attrs:{"data-input":t.masterProfile.guardian.personal_id,"user-id":t.masterProfile.user_id,type:"guardian_identity_card_number",source:"ProfileManager.DocumentUploadItem"}})],1),t._v(" "),a("div",{staticClass:"mb-1 text-black"},[a("b",[t._v("Số điện thoại: ")]),a("SensitiveLinkLabel",{staticClass:"d-inline",attrs:{"data-input":t.masterProfile.guardian.phone,"user-id":t.masterProfile.user_id,type:"guardian_phone",source:"ProfileManager.DocumentUploadItem"}})],1)]):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:["Đã duyệt","Từ chối"].includes(t.item.ProfileDocument.status),expression:"['Đã duyệt', 'Từ chối'].includes(item.ProfileDocument.status)"}]},[a("b",[t._v(t._s("Đã duyệt"===t.item.ProfileDocument.status?"Người duyệt":"Người từ chối")+":")]),t._v(" "),t.item.ProfileDocument.modified_by?a("span",{staticClass:"text-black"},[t._v("\n            "+t._s(t.item.ProfileDocument.modified_by.username)+" - "+t._s(t.item.ProfileDocument.modified_by.position_name)+"\n          ")]):t._e()])])]),t._v(" "),a("div",[a("b-button-group",{staticClass:"btn-block",attrs:{size:"sm"}},[58==+t.item.ProfileDocument.document_id&&"Đã duyệt"===t.item.ProfileDocument.status?a("b-button",{staticClass:"mt-0",attrs:{block:"",variant:"outline-ghtk"},on:{click:function(e){return t.showCicDetail(t.item)}}},[t._v("Chi tiết")]):t._e(),t._v(" "),"Chưa duyệt"===t.item.ProfileDocument.status?a("b-button",{staticClass:"mt-0",attrs:{block:"",variant:"outline-ghtk"},on:{click:function(e){return t.approve(t.item,!0)}}},[t._v("Duyệt")]):t._e(),t._v(" "),"Chưa duyệt"===t.item.ProfileDocument.status?a("b-button",{staticClass:"mt-0",attrs:{block:"",variant:"status-waiting"},on:{click:function(e){return t.approve(t.item,!1)}}},[t._v("Từ chối")]):t._e(),t._v(" "),t.canRejectDocument?a("b-button",{staticClass:"mt-0",attrs:{block:"",variant:"outline-danger"},on:{click:function(e){return t.remove(t.item.ProfileDocument.id)}}},[t._v("Hủy")]):t._e()],1)],1)])},[],!1,w,"data-v-4bca03d2",null);e.a=k.exports},qfMG:function(t,e){},"qkO+":function(t,e){},qkSh:function(t,e,a){"use strict";var n=a("JJbb");e.a={getEvaluationList:function(t){return n.a.get("evaluations/list",{params:t})},getRecompenseAndVoteOfUser:function(t){return n.a.get("evaluations/getRecompenseAndVoteOfUser",{params:t})},getEvaluationByUser:function(t){return n.a.get("evaluations/getEvaluationByUser",{params:t})},getAvgEvaluationOfUserByMonth:function(t){return n.a.get("evaluations/getAvgEvaluationOfUserByMonth",{params:t})},addEvaluation:function(t){return n.a.post("evaluations/add",t)},getListEvaluationNotes:function(t){return n.a.get("evaluations/getListEvaluationNotes",{params:t})},addNote:function(t){return n.a.post("evaluations/addNote",t)},changeStatusEvaluationOfStaff:function(t){return n.a.post("evaluations/changeStatusEvaluationOfStaff",t)},changeStatusRecompenseOfStaff:function(t){return n.a.post("evaluations/changeStatusRecompenseOfStaff",t)},uploadReport:function(t){return n.a.post("evaluations/uploadReport",t)},checkIsManagement:function(t){return n.a.get("evaluations/checkIsManagement",{params:t})},getPermissionEvaluationExpired:function(){return n.a.get("ErpEvaluation/getPermissionEvaluationExpired")},exportRecompense:function(t){return n.a.get("ErpEvaluation/exportRecompenseList",{params:t})},exportEvaluation:function(t){return n.a.get("ErpEvaluation/exportEvaluationList",{params:t})},addRecompense:function(t){return n.a.post("recompenses/add",t)},getImageMinutes:function(t){return n.a.get("ErpEvaluation/getImageMinutes",{params:t})},updateImageMinutes:function(t){return n.a.post("evaluations/updateImageMinutes",t)},getListCauseShop:function(t){return n.a.get("ErpRecompense/getListCauseShop",{params:t})},getListShopVote:function(t){return n.a.get("ErpRecompense/getListShopVote",{params:t})},updateStatusCodPenalty:function(t){return n.a.post("ErpRecompense/updateStatusCodPenalty",t)},updatePenaltyCard:function(t){return n.a.post("ErpRecompense/updatePenaltyCard",t)},updateUserPenalty:function(t){return n.a.post("ErpRecompense/updateUserPenalty",t)},deleteChannelId:function(t){return n.a.post("ErpRecompense/deleteChannelId",t)},apiGetListCod:function(t){return n.a.get("ErpEvaluation/apiGetListCod",{params:t})},getReasonShopVote:function(t){return n.a.get("ErpRecompense/getReasonShopVote",{params:t})},checkJobStatus:function(t){return n.a.get("ErpEvaluation/checkJobStatus",{params:t})},exportData:function(t){return n.a.get("ErpRecompense/exportShopPenalty",{params:t})},getPermissionShopVote:function(){return n.a.get("ErpRecompense/getPermissionShopVote")}}},qwjJ:function(t,e,a){"use strict";var n={name:"select-option",props:{value:{type:String,default:""},options:{default:[]},selectClass:{default:null},optionClass:{default:null},placeholder:{default:""}},data:function(){return{}},methods:{}},i=a("XyMi"),s=Object(i.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("select",{staticClass:"form-control",class:t.selectClass,domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}},[a("option",{attrs:{disabled:"",hidden:"",selected:""},domProps:{value:!t.value&&t.value}},[t._v(t._s(t.placeholder))]),t._v(" "),t._t("options",function(){return t._l(t.options,function(e,n){return a("option",{key:n,class:t.optionClass,domProps:{value:e.value}},[t._v(t._s(e.text))])})})],2)},[],!1,null,null,null);e.a=s.exports},"r/1a":function(t,e){},r30F:function(t,e){},r4fb:function(t,e){},r6qh:function(t,e){},rFiI:function(t,e){},rKK5:function(t,e){},rbXD:function(t,e){},rbb8:function(t,e){},rstE:function(t,e){},s1yC:function(t,e){},s2RU:function(t,e){},s5Jn:function(t,e,a){"use strict";var n,i=a("JJbb"),s=a("Xxa5"),o=a.n(s),r=a("//Fk"),l=a.n(r),c=a("exGp"),d=a.n(c),u=a("mtWM"),h=a.n(u),p=a("4WGu"),m=a("hC/b"),f=a("fEi7"),g=a("vfns"),v=a("R1Q+"),_=this,b=new g.a("local"),y=new g.a("session",!1),C=!m.a.isInIframe(),w=0,k=(n=d()(o.a.mark(function t(e){var a,n,i,s,r,c;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e.response,n=a.status,i=a.data,t.t0=n,t.next=400===t.t0?4:401===t.t0?5:402===t.t0?29:404===t.t0?30:405===t.t0?31:419===t.t0?32:500===t.t0?33:34;break;case 4:return t.abrupt("break",35);case 5:if(C){t.next=16;break}if(!(1109===i.code||i.errors&&i.errors.includes(1109))){t.next=9;break}return t.next=9,f.a.refreshToken();case 9:if(!(s=f.a.getToken())||0!==w){t.next=14;break}return++w,e.config.headers.GchatToken=s,t.abrupt("return",h.a.request(e.config));case 14:t.next=28;break;case 16:if((r=y.get("isReload"))&&"false"!==r){t.next=28;break}return b.remove(p.a.oidc.tokenIamStorage),y.set("isReload",!0),c=Object(v.a)(p.a.oidc),t.prev=21,t.next=24,c.run(window.location.href);case 24:t.next=28;break;case 26:t.prev=26,t.t1=t.catch(21);case 28:case 29:case 30:case 31:case 32:case 33:case 34:return t.abrupt("break",35);case 35:return t.abrupt("return",l.a.reject(e));case 36:case"end":return t.stop()}},t,_,[[21,26]])})),function(t){return n.apply(this,arguments)}),x=h.a.create({baseURL:p.a.baseApiKpiSalaryUrl});x.interceptors.request.use(function(t){var e=b.get(p.a.oidc.tokenIamStorage);if(e&&e.accessToken&&(t.headers.Authorization=p.a.bearerKey+" "+e.accessToken.accessToken),!C){var a=f.a.getToken();a&&(t.headers.GchatToken=a)}return t}),x.interceptors.response.use(function(t){return w=0,t},k);var S=x,M=a("Saf8");e.a={getGroupIdOfUser:function(t){return i.a.get("ErpDeposits/getGroupIdOfUser",{params:t})},getAll:function(t){return i.a.get("ErpDeposits/getAll",{params:t})},add:function(t){return i.a.post("ErpDeposits/add",t)},changeStatusDeposit:function(t){return i.a.post("ErpDeposits/changeStatusDeposit",t)},saveDepositNote:function(t){return i.a.post("ErpDeposits/saveDepositNote",t)},insertDataUserDisabled:function(t){return i.a.post("ErpDeposits/insertDataUserDisabled",t)},insertOldDeposit:function(t){return i.a.post("ErpDeposits/insertOldDeposit",t)},insertDepositsByExcel:function(t){return i.a.post("ErpDeposits/insertDepositsByExcel",t)},insertRefundsByExcel:function(t){return i.a.post("ErpDeposits/insertRefundsByExcel",t)},requestRefund:function(t){return i.a.post("ErpDeposits/requestRefund",t)},getListRefunds:function(t){return i.a.get("ErpDeposits/getListRefunds",{params:t})},changeStatusRequestRefund:function(t){return i.a.post("ErpDeposits/changeStatusRequestRefund",t)},getListRefundByHr:function(t){return i.a.get("ErpDeposits/getListRefundByHr",{params:t})},apiGetListUsers:function(t){return i.a.get("ErpDeposits/apiGetListUsers",{params:t})},updateInitialDeposit:function(t){return i.a.post("ErpDeposits/updateInitialDeposit",t)},deleteDeposit:function(t){return i.a.post("ErpDeposits/deleteDeposit",t)},getListUserNotHaveDeposit:function(t){return i.a.get("ErpDeposits/getListUserNotHaveDeposit",{params:t})},setOriginDeposit:function(t){return i.a.post("ErpDeposits/setOriginDeposit",t)},getPermissionDeposit:function(){return i.a.get("ErpDeposits/getPermissionDeposit")},exportDeposit:function(t){return i.a.get("ErpDeposits/exportDeposit",{params:t})},exportDepositRefund:function(t){return i.a.get("ErpDeposits/exportDepositRefund",{params:t})},checkJobStatus:function(t){return i.a.get("ErpDeposits/checkJobStatus",{params:t})},getListWorkType:function(t){return i.a.get("ErpDeposits/getListWorkType",{params:t})},getConfigDeposits:function(t){return i.a.get("ErpDeposits/getConfigDeposits",{params:t})},updateConfigDeposit:function(t){return i.a.post("ErpDeposits/updateConfigDeposit",t)},deleteConfig:function(t){return i.a.post("ErpDeposits/deleteConfig",t)},updateConfig:function(t){return i.a.post("ErpDeposits/updateConfig",t)},updateDepositState:function(t){return i.a.post("ErpDeposits/updateDepositState",t)},exportDepositConfig:function(){return i.a.post("ErpDeposits/exportDepositConfig")},checkCanRedirect:function(t){return i.a.get("/ErpKpi/checkHasConfig",{params:t})},exportDepositSalary:function(t){return S.get("/common/deposit/export",{params:t})},exportRedundantDeposit:function(){return M.a.get("/deposit/get-redundant-deposit")}}},sTwz:function(t,e){},sVUT:function(t,e){},"sbT+":function(t,e){},sbYV:function(t,e){},"sd+D":function(t,e){},sv5i:function(t,e){},sveD:function(t,e){},t0rc:function(t,e,a){"use strict";var n=a("Dd8w"),i=a.n(n),s=a("RRo+"),o=a.n(s),r=a("SQMU"),l=a("hC/b"),c={name:"radio-change-status",props:{dependant:{type:Object,default:function(t){return{}}},disabled:!1},data:function(){return{note:null,oldStatus:null,options:[{text:"Chờ",value:"wait"},{text:"Thành công",value:"success"},{text:"Lỗi",value:"error"},{text:"Thiếu hồ sơ",value:"incompleteFile"}]}},computed:{radioName:function(){return"radio-status-dependant-"+Math.random().toString()}},methods:{checkStatus:function(t){this.oldStatus=this.dependant.register_status,"error"===t?this.$bvModal.show("note-error-"+this.dependant.id):this.updateStatusDepentdentPerson(t)},resetStatus:function(){this.oldStatus&&(this.dependant.register_status=this.oldStatus)},updateStatusDepentdentPerson:function(t){var e=this;if(t){this.$startLoading();var a={dependantId:this.dependant.id,status:t||this.dependant.register_status,note:"error"===t?this.note:null};r.a.updateRegisterStatusDependant(a).then(function(a){a.data.success?(e.note=null,"success"!==e.oldStatus&&"success"!==t||t===e.oldStatus||e.$emit("dataChange"),e.oldStatus=null,e.$bvModal.hide("note-error-"+e.dependant.id),l.a.showMessage(a.data.message,"success")):(e.dependant.register_status=e.oldStatus,l.a.showMessage(a.data.message,"warning"))}).catch(function(t){e.dependant.register_status=e.oldStatus,l.a.showMessage("Không thể cập nhật trạng thái !","warning"),console.log(t)}).then(function(t){e.$stopLoading()})}}}},d=a("XyMi"),u=Object(d.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-form-group",{attrs:{disabled:t.disabled}},[a("b-form-radio-group",{attrs:{options:t.options,name:t.radioName},on:{change:t.checkStatus},model:{value:t.dependant.register_status,callback:function(e){t.$set(t.dependant,"register_status",e)},expression:"dependant.register_status"}})],1),t._v(" "),a("b-modal",{attrs:{id:"note-error-"+t.dependant.id,title:"Thêm ghi chú",static:"",centered:""},on:{hide:t.resetStatus}},[a("b-textarea",{attrs:{autofocus:"",placeholder:"Thêm ghi chú",rows:"5","max-rows":"8"},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}}),t._v(" "),a("div",{staticClass:"w-100 text-center",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("b-btn",{attrs:{variant:"success"},on:{click:function(e){return t.updateStatusDepentdentPerson(t.dependant.register_status)}}},[t._v("OK")])],1)],1)],1)},[],!1,null,null,null).exports,h=a("Zx67"),p=a.n(h),m=a("Zrlr"),f=a.n(m),g=a("zwoO"),v=a.n(g),_=a("Pf15"),b=a.n(_),y=function(t){function e(){return f()(this,e),v()(this,(e.__proto__||p()(e)).apply(this,arguments))}return b()(e,t),e}(a("MUME").a);y.relationship=["","Con","Vợ/chồng","Cha/mẹ","Khác"],y.optionRelationship=[{text:"-- Chọn mối quan hệ --",value:null},{text:"Con",value:1},{text:"Vợ/chồng",value:2},{text:"Cha/mẹ",value:3},{text:"Khác",value:4}],y.statusDesc={wait:"Chờ",success:"Thành công",error:"Lỗi",incompleteFile:"Thiếu hồ sơ"},y.optionStatus=[{text:"-- Chọn trạng thái đăng kí --",value:null},{text:"Chờ",value:"wait"},{text:"Thành công",value:"success"},{text:"Lỗi",value:"error"},{text:"Thiếu hồ sơ",value:"incompleteFile"}];var C=y,w={name:"quick-update-status-dependant",props:{optionMonth:{type:Array,default:null},optionStatus:{type:Array,default:null},id:{default:"quick-update-status-dependant"}},components:{RadioChangeStatus:u},data:function(){return{dataChange:!1,relationshipDesc:C.relationship,dependants:[],filterSearch:{month:null,status:null,limit:20,page:1,totalItems:0},loading:!1}},methods:{resetModal:function(){this.dataChange&&this.$emit("dataChange"),this.dataChange=!1,this.filterSearch.month=null,this.filterSearch.status=null,this.filterSearch.page=1,this.dependants=[]},formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD-MM-YYYY";return t?l.a.formatDate(t,e):null},searchDependant:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.filterSearch.month&&this.filterSearch.status?(o()(e)&&(this.filterSearch.page=parseInt(e)),this.loading=!0,r.a.getDependantForQuickUpdate(this.filterSearch).then(function(e){e.data.success?(t.dependants=e.data.data||[],t.filterSearch.totalItems=e.data.pagination.total||0):l.a.showMessage(e.data.message,"warning")}).catch(function(t){console.log(t),l.a.showMessage("Đã có lỗi xảy ra !","warning")}).then(function(e){t.loading=!1})):l.a.showMessage("Bạn cần chọn tháng đăng kí và trạng thái !","warning")}}},k=Object(d.a)(w,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{"hide-footer":"",id:t.id,title:"Cập nhập nhanh trạng thái đăng kí của NPT","modal-class":"modal-xxl"},on:{hide:t.resetModal}},[a("b-row",[a("div",{staticClass:"col-md-8 text-left"},[a("b-row",[a("b-form-select",{staticClass:"col-md-4 mr-2",attrs:{size:"md",options:t.optionMonth},model:{value:t.filterSearch.month,callback:function(e){t.$set(t.filterSearch,"month",e)},expression:"filterSearch.month"}}),t._v(" "),a("b-form-select",{staticClass:"col-md-4 mr-2",attrs:{size:"md",options:t.optionStatus},model:{value:t.filterSearch.status,callback:function(e){t.$set(t.filterSearch,"status",e)},expression:"filterSearch.status"}}),t._v(" "),a("b-button",{attrs:{variant:"success",title:"Tìm kiếm"},on:{click:t.searchDependant}},[a("i",{staticClass:"fa fa-search"})])],1)],1),t._v(" "),a("div",{staticClass:"overflow-auto col-md-4 text-right"},[a("b-pagination",{attrs:{"total-rows":t.filterSearch.totalItems,"per-page":t.filterSearch.limit,"aria-controls":"my-table",align:"right"},on:{change:t.searchDependant},model:{value:t.filterSearch.page,callback:function(e){t.$set(t.filterSearch,"page",e)},expression:"filterSearch.page"}})],1)]),t._v(" "),a("table",{staticClass:"table table-sm table-hover table-bordered"},[a("thead",[a("tr",[a("th",{staticClass:"text-center"},[t._v("STT")]),t._v(" "),a("th",[t._v("Tên nhân viên")]),t._v(" "),a("th",[t._v("Mã nhân viên")]),t._v(" "),a("th",[t._v("Ngày đăng kí")]),t._v(" "),a("th",[t._v("Tháng bắt đầu giảm trừ")]),t._v(" "),a("th",[t._v("Họ tên NPT")]),t._v(" "),a("th",[t._v("Quan hệ")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("Trạng thái đăng kí")])])]),t._v(" "),a("tbody",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"position-relative"},[t._l(t.dependants,function(e,n){return a("tr",{key:e.id},[a("td",{staticClass:"text-center"},[t._v(t._s((t.filterSearch.page-1)*t.filterSearch.limit+n+1))]),t._v(" "),a("td",[t._v(t._s(e.mp_fullname))]),t._v(" "),a("td",[t._v(t._s(e.staff_code))]),t._v(" "),a("td",[t._v(t._s(t.formatDate(e.created)))]),t._v(" "),a("td",[t._v(t._s(t.formatDate(e.from_reduce)))]),t._v(" "),a("td",[t._v(t._s(e.fullname))]),t._v(" "),a("td",[t._v(t._s(t.relationshipDesc[e.relationship]))]),t._v(" "),a("td",{staticClass:"text-center"},[a("RadioChangeStatus",{attrs:{dependant:e},on:{dataChange:function(e){t.dataChange=!0}}})],1)])}),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:!t.dependants||!t.dependants.length,expression:"!dependants || !dependants.length"}]},[a("td",{staticClass:"text-center h-25vh align-middle",attrs:{colspan:"20"}},[a("b",[t._v("Không có dữ liệu nào !")])])])],2)])],1)},[],!1,null,null,null).exports,x=a("fZjL"),S=a.n(x),M=a("IC97"),T=a("D52M"),D=a("d6YO"),I=a("msBV"),P=a("7QXo"),E=a("HhAh"),L=a.n(E),A=a("PJh5"),O=a.n(A),N=a("7+uW"),R=a("sUu7");N.default.use(R.a,{fieldsBagName:"veeFields"});var U={name:"update-depentdent-person",props:{curEdit:{default:null},staffcode:{default:null},id:{default:"update-dependant-person"}},components:{Datepicker:M.a,SingleSelectProvinceTax:D.a,SingleSelectDistrictTax:I.a,SingleSelectCommuneTax:P.a},data:function(t){return{language:{vi:T.a},addBtnDisabled:!1,infoUserSuccess:"",noti:"",validStaffCode:!1,validCMNDDependant:!1,validMstDependant:!0,existDependant:!1,dependant:{master_profile_id:null,dependantId:null,staff_code:null,fullname:null,birthday:"",age:null,gender:null,tax_iden_number:null,personal_id_number:null,relationship:null,number_gks:null,number_book_gks:null,provinceId:null,districtId:null,communeId:null,from_reduce:"",to_reduce:"",fileCmndDependant:null,fileBirthCertificate:null,fileInabilityToWork:null,fileHousehold:null,fileXNNPTTNCN:null,fileDKNPT:null,fileOther:null,fileAuthority:null,fileDetailIncome:null,fileTemporaryResidence:null,fileConfirmOfCommittee:null},relationship:[{text:"Con",value:1},{text:"Vợ/chồng",value:2},{text:"Cha/mẹ",value:3},{text:"Khác",value:4}],gender:[{text:"Nam",value:"male"},{text:"Nữ",value:"female"}],note:{notEmpty:"Không để trống trường này !",tax:"Người phụ thuộc với MST tương ứng đã tồn tại !"},linkFile:{DKNPT:"/erp/ErpDependentPerson/download20DKNPT",Authority:"/erp/ErpDependentPerson/downloadAuthority",XNNPTTNCN:"/erp/ErpDependentPerson/downloadXNNPTTNCN",DetailIncome:"/erp/ErpDependentPerson/downloadDetailIncome"}}},computed:{moment:O.a,btnAddTitle:function(){return this.dependant.tax_iden_number?"Đăng kí thay đổi":this.curEdit?"Cập nhật":"Đăng kí mới"},hasTax:function(){return!(this.curEdit||!this.dependant.tax_iden_number)}},watch:{"dependant.staff_code":function(t,e){t&&this.checkUsername(t)},"dependant.tax_iden_number":function(){this.dependant.personal_id_number=null,this.resetBirthForm()},"dependant.birthday":function(t,e){this.calculateAge()}},methods:{initData:function(){this.resetForm(),this.curEdit?this.getDependant(this.curEdit):this.staffcode&&(this.dependant.staff_code=this.staffcode)},validField:function(t){return null===t?null:!(t<0||0===t.length)&&void 0},calculateAge:function(){if(this.dependant.birthday){var t=O()(this.dependant.birthday);this.dependant.age=Math.round(O()().diff(t,"months")/12*100)/100}else this.dependant.age=null},limitLength:function(t,e){this.dependant[t].length>e&&(this.dependant[t]=this.dependant[t].substring(0,e))},checkWorkAge:function(){return!this.dependant.gender&&this.dependant.age>14&&this.dependant.age<60.25||this.dependant.age>14&&("male"===this.dependant.gender&&this.dependant.age<60.25||"female"===this.dependant.gender&&this.dependant.age<55.33)},checkDataUpdate:function(){var t=!0;return this.existDependant&&(t=!1),this.dependant.staff_code?this.validStaffCode||(t=!1):(this.dependant.staff_code="",t=!1),this.dependant.fullname||(this.dependant.fullname="",t=!1),null!==this.dependant.gender&&""!==this.dependant.gender||(this.dependant.gender="",t=!1),this.dependant.birthday||(this.dependant.birthday=null,t=!1),this.dependant.relationship||(this.dependant.relationship="",t=!1),this.dependant.from_reduce||(this.dependant.from_reduce=null,t=!1),this.dependant.tax_iden_number||(this.dependant.age<15&&(this.dependant.personal_id_number||(this.dependant.number_gks||(this.dependant.number_gks="",t=!1),this.dependant.number_book_gks||(this.dependant.number_book_gks="",t=!1),this.dependant.provinceId||(this.dependant.provinceId="",t=!1),this.dependant.districtId||(this.dependant.districtId="",t=!1),this.dependant.communeId||(this.dependant.communeId="",t=!1))),this.dependant.age>=15&&!this.dependant.personal_id_number&&(this.dependant.personal_id_number="",t=!1)),t},setForm:function(t){if(t.id&&(this.dependant.dependantId=t.id),t.master_profile_id&&(this.dependant.master_profile_id=t.master_profile_id),t.staff_code&&(this.dependant.staff_code=t.staff_code),t.tax_iden_number&&(this.dependant.tax_iden_number=t.tax_iden_number),t.fullname&&(this.dependant.fullname=t.fullname),t.birthday&&(this.dependant.birthday=t.birthday),t.gender&&(this.dependant.gender=t.gender),t.relationship&&(this.dependant.relationship=t.relationship),t.number_gks&&(this.dependant.number_gks=t.number_gks),t.number_book_gks&&(this.dependant.number_book_gks=t.number_book_gks),t.birthplace_province&&(this.dependant.provinceId=t.birthplace_province.code),t.birthplace_district&&(this.dependant.districtId=t.birthplace_district.code),t.birthplace_sub_district&&(this.dependant.communeId=t.birthplace_sub_district.code),t.from_reduce){var e=new Date(t.from_reduce),a=e.getMonth()+1;a<10&&(a="0"+a),this.dependant.from_reduce=e.getFullYear()+"-"+a}if(t.to_reduce){var n=new Date(t.to_reduce),i=n.getMonth()+1;i<10&&(i="0"+i),this.dependant.to_reduce=n.getFullYear()+"-"+i}t.fileCmndDependant&&(this.dependant.fileCmndDependant=t.fileCmndDependant),t.fileBirthCertificate&&(this.dependant.fileBirthCertificate=t.fileBirthCertificate),t.fileInabilityToWork&&(this.dependant.fileInabilityToWork=t.fileInabilityToWork),t.fileHousehold&&(this.dependant.fileHousehold=t.fileHousehold),t.fileXNNPTTNCN&&(this.dependant.fileXNNPTTNCN=t.fileXNNPTTNCN),t.fileDKNPT&&(this.dependant.fileDKNPT=t.fileDKNPT),t.fileAuthority&&(this.dependant.fileAuthority=t.fileAuthority),t.personal_id_number&&(this.dependant.personal_id_number=t.personal_id_number)},resetForm:function(){this.dependant.dependantId=null,this.dependant.staff_code&&!this.curEdit||(this.dependant.master_profile_id=null),this.dependant.staff_code=null,this.dependant.tax_iden_number=null,this.dependant.fullname=null,this.dependant.birthday="",this.dependant.age=null,this.dependant.gender=null,this.dependant.personal_id_number=null,this.dependant.relationship=null,this.dependant.number_gks=null,this.dependant.number_book_gks=null,this.dependant.provinceId=null,this.dependant.districtId=null,this.dependant.communeId=null,this.dependant.from_reduce="",this.dependant.to_reduce="",this.dependant.fileCmndDependant=null,this.dependant.fileBirthCertificate=null,this.dependant.fileInabilityToWork=null,this.dependant.fileHousehold=null,this.dependant.fileXNNPTTNCN=null,this.dependant.fileDKNPT=null,this.dependant.fileAuthority=null},resetBirthForm:function(){this.dependant.number_gks=null,this.dependant.number_book_gks=null,this.dependant.provinceId=null,this.dependant.districtId=null,this.dependant.communeId=null},downloadFile:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&this.linkFile[t]?window.open(this.linkFile[t],"_blank"):l.a.showMessage("không tồn tại link đường đẫn cho file này, liên hệ với IT để được hỗ trợ !","warning")},checkUsername:L()(function(t){var e=this;t.length<5||r.a.checkUserByStaffCode({staff_code:t}).then(function(t){t.data.success?(e.validStaffCode=!0,e.dependant.master_profile_id=t.data.data.master_profile_id,e.noti="",e.infoUserSuccess="Người nộp thuế : "+t.data.data.name+"( "+t.data.data.birthday+" )"):(e.dependant.master_profile_id=null,e.validStaffCode=!1,e.noti="Mã nhân viên nộp thuế không đúng!")})},500),checkDependantByName:function(){var t=this;if(this.dependant.master_profile_id&&this.dependant.fullname){var e={master_profile_id:this.dependant.master_profile_id,dependantName:this.dependant.fullname};r.a.checkDependantByName(e).then(function(e){e.data.success&&e.data.data?e.data.data.id!==t.curEdit&&(t.existDependant=!0):t.existDependant=!1}).catch(function(e){t.existDependant=!1,console.log(e)})}},checkDependantByMst:L()(function(t){var e=this;if(10===t.length){var a={mst:t};r.a.checkDependantByMst(a).then(function(a){if(a.data.success&&a.data.data){var n=a.data.data;if(!n.ErpDependantPeople&&!n.MasterProfile)return void(e.validMstDependant=!0);n.ErpDependantPeople.tax_iden_number===t&&(e.validMstDependant=!1,e.note.tax="Người phụ thuộc với MST tương ứng đã tồn tại !"),n.MasterProfile.tax_iden_number===t&&(e.validMstDependant=!1,e.note.tax="Nhập MST của Người phụ thuộc nếu có, không nhập MST của người nộp thuế !")}else e.validMstDependant=!0}).catch(function(t){console.log(t),e.validMstDependant=!0})}},500),checkDependantByCMND:L()(function(t){var e=this;if([9,12].includes(t.length)){var a={CMND:this.dependant.personal_id_number};r.a.checkDependantByCMND(a).then(function(t){t.data.success&&t.data.data&&t.data.data.id!==e.curEdit?e.validCMNDDependant=!0:e.validCMNDDependant=!1})}},500),addDependant:function(){var t=this;if(this.checkDataUpdate()){this.addBtnDisabled=!0;var e={};for(var a in this.dependant)null!==this.dependant[a]&&""!==this.dependant[a]&&this.dependant[a]!==[]&&(e[a]=this.dependant[a]);var n=new FormData;S()(e).forEach(function(t){if(0===t.indexOf("file"))for(var a=0;a<e[t].length;a++)n.append(t+"["+a+"]",e[t][a]);else if("birthday"===t||"from_reduce"===t||"to_reduce"===t){var i=new Date(e[t]);n.append(t,i.toISOString().split("T")[0])}else null!==e[t]&&n.append(t,e[t])}),r.a.addDependantPerson(n).then(function(e){e.data.success?(l.a.showMessage(e.data.message,"success"),t.$emit("updateOk"),t.$bvModal.hide("update-dependant-person")):l.a.showMessage(e.data.message,"warning")}).catch(function(t){l.a.showMessage("Các file tải lên vượt quá dung lượng cho phép (>15MB). Vui lòng kiểm tra lại.","warning"),console.log(t)}).then(function(e){t.addBtnDisabled=!1})}else alert("Cần nhập đúng và đầy đủ thông tin cần thiết !")},getDependant:function(t){var e=this;t?(this.loading=!0,r.a.getDependantById({dependantId:t}).then(function(t){console.log(t.data.data),t.data.success?e.setForm(t.data.data):l.a.showMessage(t.data.message||"Không lấy được thông tin NPT !","warning")}).catch(function(t){l.a.showMessage("Có lỗi xảy ra, không lấy được thông tin NPT !","warning")}).then(function(t){e.loading=!1})):l.a.showMessage("không có ID người phụ thộc cần lấy thông tin !","warning")},handleSelectedProvince:function(t){this.dependant.provinceId=t?t.id:""},handleSelectedDistrict:function(t){this.dependant.districtId=t?t.id:""},handleSelectedCommune:function(t){this.dependant.communeId=t?t.id:""}}};var $=function(t){a("6EiC"),a("wDSl")},H=Object(d.a)(U,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{"hide-footer":"",id:t.id,title:t.curEdit?"Chỉnh sửa người phụ thuộc":"Thêm người phụ thuộc","modal-class":"modal-xxl",static:""},on:{shown:t.initData,hide:t.resetForm}},[a("form",{attrs:{autocomplete:"off"}},[a("b-row",[a("b-card",{staticClass:"col-md-6"},[a("b-col",[a("b-form-group",{attrs:{"label-cols-sm":"3"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Mã Nhân Viên"),a("span",{staticClass:"red-text"},[t._v("*")])]),t._v(" "),a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{disabled:!!t.curEdit,state:t.validField(t.dependant.staff_code),name:"staff-code",type:"number"},on:{input:function(e){return t.checkUsername()}},model:{value:t.dependant.staff_code,callback:function(e){t.$set(t.dependant,"staff_code",e)},expression:"dependant.staff_code"}}),t._v(" "),!t.validStaffCode&&t.dependant.staff_code?a("span",{staticClass:"noti-error",attrs:{id:"notification-warnning"}},[t._v(t._s(t.noti))]):t._e(),t._v(" "),t.validStaffCode&&t.dependant.staff_code?a("span",{staticClass:"noti-success",attrs:{id:"notification-success"}},[t._v(t._s(t.infoUserSuccess))]):t._e(),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"required"==t.errors.firstRule("staff-code"),expression:"errors.firstRule('staff-code') == 'required'"}],staticClass:"noti-error"},[t._v(t._s(t.note.notEmpty))])],1),t._v(" "),a("b-form-group",{attrs:{"label-cols-sm":"3"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Họ và tên NPT "),a("span",{staticClass:"red-text"},[t._v("*")])]),t._v(" "),a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{state:t.validField(t.dependant.fullname),name:"fullname",maxlength:"100"},on:{blur:function(e){return t.checkDependantByName()}},model:{value:t.dependant.fullname,callback:function(e){t.$set(t.dependant,"fullname",e)},expression:"dependant.fullname"}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!this.curEdit&&t.existDependant,expression:"!this.curEdit && existDependant"}],staticClass:"noti-error"},[t._v("NPT với tên tương ứng đã tồn tại")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"required"==t.errors.firstRule("fullname"),expression:"errors.firstRule('fullname') == 'required'"}],staticClass:"noti-error"},[t._v(t._s(t.note.notEmpty)+" ")])],1),t._v(" "),a("b-form-group",{attrs:{"label-cols-sm":"3"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Ngày sinh NPT "),a("span",{staticClass:"red-text"},[t._v("*")])]),t._v(" "),a("Datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"input-class":{"invalid-input":null===t.dependant.birthday},format:"dd/MM/yyyy",bootstrapStyling:!0,"monday-first":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0,placeholder:"Ngày sinh NPT",name:"birthday","use-utc":!0,language:t.language.vi},model:{value:t.dependant.birthday,callback:function(e){t.$set(t.dependant,"birthday",e)},expression:"dependant.birthday"}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"required"==t.errors.firstRule("birthday"),expression:"errors.firstRule('birthday') == 'required'"}],staticClass:"noti-error"},[t._v(t._s(t.note.notEmpty)+" ")]),t._v(" "),a("span",[t._v("Tuổi : "+t._s(t.dependant.age))])],1),t._v(" "),a("b-form-group",{attrs:{"label-cols-sm":"3"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Giới tính "),a("span",{staticClass:"red-text"},[t._v("*")])]),t._v(" "),a("b-form-select",{attrs:{options:t.gender,state:t.validField(t.dependant.gender)},model:{value:t.dependant.gender,callback:function(e){t.$set(t.dependant,"gender",e)},expression:"dependant.gender"}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols-sm":"3"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Quan hệ với người nộp thuế "),a("span",{staticClass:"red-text"},[t._v("*")])]),t._v(" "),a("b-form-select",{attrs:{options:t.relationship,state:t.validField(t.dependant.relationship)},scopedSlots:t._u([{key:"first",fn:function(){return[a("option",{attrs:{disabled:""},domProps:{value:null}},[t._v("---Quan hệ với người nộp thuế---")])]},proxy:!0}]),model:{value:t.dependant.relationship,callback:function(e){t.$set(t.dependant,"relationship",e)},expression:"dependant.relationship"}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols-sm":"3"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Từ tháng "),a("span",{staticClass:"red-text"},[t._v("*")])]),t._v(" "),a("Datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{language:t.language.vi,"minimum-view":"month","input-class":{"invalid-input":null===t.dependant.from_reduce},format:"MM/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0,placeholder:"",name:"from_reduce","use-utc":!0},model:{value:t.dependant.from_reduce,callback:function(e){t.$set(t.dependant,"from_reduce",e)},expression:"dependant.from_reduce"}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"required"==t.errors.firstRule("from_reduce"),expression:"errors.firstRule('from_reduce') == 'required'"}],staticClass:"noti-error"},[t._v(t._s(t.note.notEmpty)+" ")])],1),t._v(" "),a("b-form-group",{attrs:{"label-cols-sm":"3",label:"Đến tháng"}},[a("Datepicker",{attrs:{language:t.language.vi,"minimum-view":"month",format:"MM/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0,placeholder:"",name:"to_reduce","use-utc":!0},model:{value:t.dependant.to_reduce,callback:function(e){t.$set(t.dependant,"to_reduce",e)},expression:"dependant.to_reduce"}})],1)],1)],1),t._v(" "),a("b-card",{staticClass:"col-md-6"},[a("b-col",[a("b-form-group",{attrs:{"label-cols-sm":"3",label:"MST của NPT"}},[a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:{numeric:!0,length:10},expression:"{numeric: true, length: 10}"}],class:{"is-danger":t.errors.has("tax-dependant")},attrs:{name:"tax-dependant",type:"number"},on:{keyup:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return t.limitLength.apply(void 0,["tax_iden_number",10].concat(n))},input:t.checkDependantByMst},model:{value:t.dependant.tax_iden_number,callback:function(e){t.$set(t.dependant,"tax_iden_number",e)},expression:"dependant.tax_iden_number"}}),t._v(" "),!t.validMstDependant&&t.dependant.tax_iden_number?a("p",{staticClass:"noti-error"},[t._v(t._s(t.note.tax))]):t._e(),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"numeric"==t.errors.firstRule("tax-dependant"),expression:"errors.firstRule('tax-dependant') == 'numeric'"}],staticClass:"help is-danger"},[t._v("Vui lòng nhập số ")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"length"==t.errors.firstRule("tax-dependant"),expression:"errors.firstRule('tax-dependant') == 'length'"}],staticClass:"help is-danger"},[t._v("Mã số thuế không đúng ")])],1),t._v(" "),!(this.dependant.age>=15)&&this.dependant.age||t.hasTax?t._e():a("b-form-group",{attrs:{"label-cols-sm":"3",label:"Số CMND/Hộ chiếu của NPT"}},[a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,numeric:!0,min:9,max:12,regex:/^(.{12}|.{9})$/},expression:"{required:true, numeric: true, min: 9, max: 12, regex: /^(.{12}|.{9})$/}"}],class:{"is-danger":t.errors.has("personal-id-dependant")},attrs:{name:"personal-id-dependant",state:!(!t.dependant.personal_id_number&&t.dependant.age>14)&&null,type:"number"},on:{keyup:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];return t.limitLength.apply(void 0,["personal_id_number",12].concat(n))},input:t.checkDependantByCMND},model:{value:t.dependant.personal_id_number,callback:function(e){t.$set(t.dependant,"personal_id_number",e)},expression:"dependant.personal_id_number"}}),t._v(" "),t.validCMNDDependant&&t.dependant.personal_id_number?a("p",{staticClass:"noti-error"},[t._v("NPT với CMND tương ứng đã tồn tại")]):t._e(),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"required"==t.errors.firstRule("personal-id-dependant")&&t.dependant.age>14,expression:"errors.firstRule('personal-id-dependant') == 'required'  && dependant.age > 14"}],staticClass:"help is-danger"},[t._v(t._s(t.note.notEmpty)+" ")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"numeric"==t.errors.firstRule("personal-id-dependant"),expression:"errors.firstRule('personal-id-dependant') == 'numeric'"}],staticClass:"help is-danger"},[t._v("Vui lòng nhập số")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"min"==t.errors.firstRule("personal-id-dependant"),expression:"errors.firstRule('personal-id-dependant') == 'min'"}],staticClass:"help is-danger"},[t._v("Không đủ ký tự CMND ")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"max"==t.errors.firstRule("personal-id-dependant"),expression:"errors.firstRule('personal-id-dependant') == 'max'"}],staticClass:"help is-danger"},[t._v("Vượt quá ký tự CMND")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"regex"==t.errors.firstRule("personal-id-dependant"),expression:"errors.firstRule('personal-id-dependant') == 'regex'"}],staticClass:"help is-danger"},[t._v("Số CMND không đúng")])],1),t._v(" "),t.hasTax||t.dependant.age>17||t.dependant.personal_id_number?t._e():a("div",[a("h6",[t._v("Thông tin trên giấy khai sinh NPT(với NPT không có CMND)")]),t._v(" "),a("b-row",[a("b-col",[a("b-form-group",{attrs:{"label-cols-sm":"3"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Số "),a("span",{staticClass:"red-text"},[t._v("*")])]),t._v(" "),a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{state:!(""===t.dependant.number_gks&&(t.dependant.age<15||!t.dependant.personal_id_number))&&null,name:"number-shk-id-dependant"},model:{value:t.dependant.number_gks,callback:function(e){t.$set(t.dependant,"number_gks",e)},expression:"dependant.number_gks"}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"required"==t.errors.firstRule("number-shk-id-dependant")&&(t.dependant.age<15||!t.dependant.personal_id_number),expression:"errors.firstRule('number-shk-id-dependant') == 'required' && (dependant.age < 15 || !dependant.personal_id_number)"}],staticClass:"noti-error"},[t._v(t._s(t.note.notEmpty))])],1)],1),t._v(" "),a("b-col",[a("b-form-group",{attrs:{"label-cols-sm":"3"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Quyển số "),a("span",{staticClass:"red-text"},[t._v("*")])]),t._v(" "),a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{state:!(""===t.dependant.number_book_gks&&(t.dependant.age<15||!t.dependant.personal_id_number))&&null,name:"number-book-shk-id-dependant"},model:{value:t.dependant.number_book_gks,callback:function(e){t.$set(t.dependant,"number_book_gks",e)},expression:"dependant.number_book_gks"}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"required"==t.errors.firstRule("number-book-shk-id-dependant")&&(t.dependant.age<15||!t.dependant.personal_id_number),expression:"errors.firstRule('number-book-shk-id-dependant') == 'required' && (dependant.age < 15 || !dependant.personal_id_number)"}],staticClass:"noti-error"},[t._v(t._s(t.note.notEmpty))])],1)],1)],1),t._v(" "),a("b-row",[a("b-col",[a("b-form-group",{attrs:{"label-cols-sm":"3"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Tỉnh/Thành phố "),a("span",{staticClass:"red-text"},[t._v("*")])]),t._v(" "),a("single-select-province-tax",{attrs:{state:t.validField(t.dependant.provinceId),"province-code":t.dependant.provinceId},on:{handleSelectedProvince:t.handleSelectedProvince}})],1)],1)],1),t._v(" "),a("b-row",[a("b-col",[a("b-form-group",{attrs:{"label-cols-sm":"3"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Quận/Huyện "),a("span",{staticClass:"red-text"},[t._v("*")])]),t._v(" "),a("single-select-district-tax",{attrs:{"province-code":t.dependant.provinceId,"district-code":t.dependant.districtId,name:"province"},on:{handleSelectedDistrict:t.handleSelectedDistrict}})],1)],1)],1),t._v(" "),a("b-row",[a("b-col",[a("b-form-group",{attrs:{"label-cols-sm":"3"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("Phường/Xã "),a("span",{staticClass:"red-text"},[t._v("*")])]),t._v(" "),a("single-select-commune-tax",{attrs:{"province-code":t.dependant.provinceId,"district-code":t.dependant.districtId,"commune-code":t.dependant.communeId},on:{handleSelectedCommune:t.handleSelectedCommune}})],1)],1)],1)],1)],1)],1)],1)],1),t._v(" "),a("br"),t._v(" "),a("b-row",[t.curEdit?t._e():a("b-card",{staticClass:"col-md-12"},[a("h5",{attrs:{align:"center"}},[t._v("Hồ sơ đăng kí NPT")]),t._v(" "),a("b-row",[a("b-col",[a("b-card",{attrs:{"sub-title":"Tài liệu thông tin người phụ thuộc"}},[t.dependant.personal_id_number||t.dependant.age>14?a("b-form-group",{attrs:{"label-cols-sm":"3",label:"CMND người phụ thuộc"}},[a("b-form-file",{attrs:{multiple:"",accept:"image/* , .pdf",state:t.validField(t.dependant.fileCmndDependant),placeholder:"Ảnh/Scan CMND người phụ thuộc","drop-placeholder":"Drop file here..."},scopedSlots:t._u([{key:"file-name",fn:function(e){var n=e.names;return t._l(n,function(e,n){return a("b-badge",{key:n,staticClass:"mr-1",attrs:{variant:"primary"}},[t._v(t._s(e))])})}}],null,!1,2907993316),model:{value:t.dependant.fileCmndDependant,callback:function(e){t.$set(t.dependant,"fileCmndDependant",e)},expression:"dependant.fileCmndDependant"}})],1):t._e(),t._v(" "),t.dependant.age<18&&!t.dependant.personal_id_number&&!t.dependant.tax_iden_number?a("b-form-group",{attrs:{"label-cols-sm":"3",label:"Giấy khai sinh"}},[a("b-form-file",{attrs:{multiple:"",accept:"image/* , .pdf",state:t.validField(t.dependant.fileBirthCertificate),placeholder:"Giấy khai sinh người phụ thuộc","drop-placeholder":"Drop file here..."},scopedSlots:t._u([{key:"file-name",fn:function(e){var n=e.names;return t._l(n,function(e,n){return a("b-badge",{key:n,staticClass:"mr-1",attrs:{variant:"primary"}},[t._v(t._s(e))])})}}],null,!1,2907993316),model:{value:t.dependant.fileBirthCertificate,callback:function(e){t.$set(t.dependant,"fileBirthCertificate",e)},expression:"dependant.fileBirthCertificate"}})],1):t._e(),t._v(" "),t.checkWorkAge()&&1!==t.dependant.relationship?a("b-form-group",{attrs:{"label-cols-sm":"3",label:"Chứng nhận không thể lao động"}},[a("b-form-file",{attrs:{multiple:"",accept:"image/* , .pdf",state:t.validField(t.dependant.fileInabilityToWork),placeholder:"Chứng nhận không có khả năng lao động","drop-placeholder":"Drop file here..."},scopedSlots:t._u([{key:"file-name",fn:function(e){var n=e.names;return t._l(n,function(e,n){return a("b-badge",{key:n,staticClass:"mr-1",attrs:{variant:"primary"}},[t._v(t._s(e))])})}}],null,!1,2907993316),model:{value:t.dependant.fileInabilityToWork,callback:function(e){t.$set(t.dependant,"fileInabilityToWork",e)},expression:"dependant.fileInabilityToWork"}})],1):t._e(),t._v(" "),4!==t.dependant.relationship?a("div",[1!==t.dependant.relationship?a("b-form-group",{attrs:{"label-cols-sm":"3",label:"Sổ hộ khẩu"}},[a("b-form-file",{attrs:{multiple:"",accept:"image/* , .pdf",state:t.validField(t.dependant.fileHousehold),placeholder:"Sổ hộ khẩu","drop-placeholder":"Drop file here..."},scopedSlots:t._u([{key:"file-name",fn:function(e){var n=e.names;return t._l(n,function(e,n){return a("b-badge",{key:n,staticClass:"mr-1",attrs:{variant:"primary"}},[t._v(t._s(e))])})}}],null,!1,2907993316),model:{value:t.dependant.fileHousehold,callback:function(e){t.$set(t.dependant,"fileHousehold",e)},expression:"dependant.fileHousehold"}})],1):t._e(),t._v(" "),a("b-form-group",{attrs:{"label-cols-sm":"3",label:"Giấy tờ khác (nếu có)"}},[a("b-form-file",{staticClass:"mb-3",attrs:{multiple:"",accept:"image/* , .pdf, .doc, dot, .wbk, dotx, dotm, .docx, .docm, docb",placeholder:"Giấy tờ khác","drop-placeholder":"Drop file here..."},scopedSlots:t._u([{key:"file-name",fn:function(e){var n=e.names;return t._l(n,function(e,n){return a("b-badge",{key:n,staticClass:"mr-1",attrs:{variant:"primary"}},[t._v(t._s(e))])})}}],null,!1,2907993316),model:{value:t.dependant.fileOther,callback:function(e){t.$set(t.dependant,"fileOther",e)},expression:"dependant.fileOther"}})],1)],1):a("div",[a("span",{staticClass:"text-danger"},[t._v("Nhập ít nhất 1 trong 4 loại hồ sơ dưới đây")]),t._v(" "),a("b-form-group",{attrs:{"label-cols-sm":"3",label:"Giấy xác nhận nghĩa vụ nuôi dưỡng (nếu có)"}},[a("b-form-file",{attrs:{multiple:"",accept:"image/* , .pdf, .doc, dot, .wbk, .dotx, .dotm, .docx, .docm, .docb",state:t.validField(t.dependant.fileXNNPTTNCN),placeholder:"Giấy xác nhận nghĩa vụ nuôi dưỡng","drop-placeholder":"Drop file here..."},scopedSlots:t._u([{key:"file-name",fn:function(e){var n=e.names;return t._l(n,function(e,n){return a("b-badge",{key:n,staticClass:"mr-1",attrs:{variant:"primary"}},[t._v(t._s(e))])})}}],null,!1,2907993316),model:{value:t.dependant.fileXNNPTTNCN,callback:function(e){t.$set(t.dependant,"fileXNNPTTNCN",e)},expression:"dependant.fileXNNPTTNCN"}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols-sm":"3",label:"Sổ hộ khẩu (cùng Sổ hộ khẩu)"}},[a("b-form-file",{attrs:{multiple:"",accept:"image/* , .pdf, .doc, dot, .wbk, .dotx, .dotm, .docx, .docm, .docb",placeholder:"Sổ hộ khẩu (cùng Sổ hộ khẩu)","drop-placeholder":"Drop file here..."},scopedSlots:t._u([{key:"file-name",fn:function(e){var n=e.names;return t._l(n,function(e,n){return a("b-badge",{key:n,staticClass:"mr-1",attrs:{variant:"primary"}},[t._v(t._s(e))])})}}],null,!1,2907993316),model:{value:t.dependant.fileHousehold,callback:function(e){t.$set(t.dependant,"fileHousehold",e)},expression:"dependant.fileHousehold"}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols-sm":"3",label:"Đăng ký tạm trú (không cùng Sổ hộ khẩu)"}},[a("b-form-file",{attrs:{multiple:"",accept:"image/* , .pdf, .doc, dot, .wbk, .dotx, .dotm, .docx, .docm, .docb",placeholder:"Đăng ký tạm trú (không cùng Sổ hộ khẩu)","drop-placeholder":"Drop file here..."},scopedSlots:t._u([{key:"file-name",fn:function(e){var n=e.names;return t._l(n,function(e,n){return a("b-badge",{key:n,staticClass:"mr-1",attrs:{variant:"primary"}},[t._v(t._s(e))])})}}],null,!1,2907993316),model:{value:t.dependant.fileTemporaryResidence,callback:function(e){t.$set(t.dependant,"fileTemporaryResidence",e)},expression:"dependant.fileTemporaryResidence"}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols-sm":"3",label:"Tờ khai có xác nhận của UBND xã nơi NPT cư trú"}},[a("b-form-file",{attrs:{multiple:"",accept:"image/* , .pdf, .doc, dot, .wbk, .dotx, .dotm, .docx, .docm, .docb",placeholder:"Tờ khai có xác nhận của UBND xã nơi NPT cư trú","drop-placeholder":"Drop file here..."},scopedSlots:t._u([{key:"file-name",fn:function(e){var n=e.names;return t._l(n,function(e,n){return a("b-badge",{key:n,staticClass:"mr-1",attrs:{variant:"primary"}},[t._v(t._s(e))])})}}],null,!1,2907993316),model:{value:t.dependant.fileConfirmOfCommittee,callback:function(e){t.$set(t.dependant,"fileConfirmOfCommittee",e)},expression:"dependant.fileConfirmOfCommittee"}})],1)],1)],1)],1),t._v(" "),a("b-col",[a("b-card",{attrs:{"sub-title":"Giấy tờ phục vụ việc đăng kí"}},[a("b-form-group",{attrs:{"label-cols-sm":"3",label:"Giấy đăng kí 20-DK-TH-NPT"}},[a("b-form-file",{staticClass:"mb-3",attrs:{multiple:"",accept:"image/* , .pdf, .doc, dot, .wbk, dotx, dotm, .docx, .docm, docb",state:t.validField(t.dependant.fileDKNPT),placeholder:"Mẫu đăng kí 20-DK-TH-NPT","drop-placeholder":"Drop file here..."},scopedSlots:t._u([{key:"file-name",fn:function(e){var n=e.names;return t._l(n,function(e,n){return a("b-badge",{key:n,staticClass:"mr-1",attrs:{variant:"primary"}},[t._v(t._s(e))])})}}],null,!1,2907993316),model:{value:t.dependant.fileDKNPT,callback:function(e){t.$set(t.dependant,"fileDKNPT",e)},expression:"dependant.fileDKNPT"}})],1),t._v(" "),a("b-form-group",{attrs:{"label-cols-sm":"3",label:"Giấy ủy quyền ĐK NPT"}},[a("b-form-file",{staticClass:"mb-3",attrs:{multiple:"",accept:"image/* , .pdf, .doc, dot, .wbk, dotx, dotm, .docx, .docm, docb",state:t.validField(t.dependant.fileAuthority),placeholder:"Giấy ủy quyền","drop-placeholder":"Drop file here..."},scopedSlots:t._u([{key:"file-name",fn:function(e){var n=e.names;return t._l(n,function(e,n){return a("b-badge",{key:n,staticClass:"mr-1",attrs:{variant:"primary"}},[t._v(t._s(e))])})}}],null,!1,2907993316),model:{value:t.dependant.fileAuthority,callback:function(e){t.$set(t.dependant,"fileAuthority",e)},expression:"dependant.fileAuthority"}})],1),t._v(" "),t.dependant.age>=18||t.dependant.age>=15&&1!==t.dependant.relationship?a("b-form-group",{attrs:{"label-cols-sm":"3",label:"Kê khai thu nhập"}},[a("b-form-file",{attrs:{multiple:"",accept:"image/* , .pdf, .doc, dot, .wbk, .dotx, .dotm, .docx, .docm, .docb",state:t.validField(t.dependant.fileDetailIncome),placeholder:"File kê khai thu nhập","drop-placeholder":"Drop file here..."},scopedSlots:t._u([{key:"file-name",fn:function(e){var n=e.names;return t._l(n,function(e,n){return a("b-badge",{key:n,staticClass:"mr-1",attrs:{variant:"primary"}},[t._v(t._s(e))])})}}],null,!1,2907993316),model:{value:t.dependant.fileDetailIncome,callback:function(e){t.$set(t.dependant,"fileDetailIncome",e)},expression:"dependant.fileDetailIncome"}})],1):t._e(),t._v(" "),a("div",[t._v("Mẫu đăng kí : "),a("b-link",{on:{click:function(e){return t.downloadFile("DKNPT")}}},[t._v("Mẫu 20-DK-TH-NPT -> tải xuống")])],1),t._v(" "),a("div",[t._v("Mẫu giấy ủy quyền : "),a("b-link",{on:{click:function(e){return t.downloadFile("Authority")}}},[t._v("Ủy quyền đăng ký NPT -> tải xuống")])],1),t._v(" "),4===t.dependant.relationship?a("div",[t._v("Mẫu giấy trực tiếp nuôi dưỡng : "),a("b-link",{on:{click:function(e){return t.downloadFile("XNNPTTNCN")}}},[t._v("Mẫu 07/XN-NPT-TNCN -> tải xuống")])],1):t._e(),t._v(" "),t.dependant.age>=18||t.dependant.age>=15&&1!==t.dependant.relationship?a("div",[t._v("Kê khai thu nhập : "),a("b-link",{on:{click:function(e){return t.downloadFile("DetailIncome")}}},[t._v("Mẫu kê khai thu nhập -> tải xuống")])],1):t._e()],1)],1)],1)],1)],1),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"d-flex justify-content-between align-items-center justify-content-between"},[a("div",[t._v("Tổng dung lượng các file không được vượt quá 15MB mỗi lần tải lên!")]),t._v(" "),a("div",[a("b-btn",{attrs:{variant:"success btn-round",disabled:t.validCMNDDependant||!t.validMstDependant||t.addBtnDisabled||t.existDependant},on:{click:function(e){return t.addDependant()}}},[t._v(t._s(t.btnAddTitle))])],1)])],1)},[],!1,$,"data-v-4a16ed10",null).exports,B={name:"modal-note-dependant",props:{dependants:{default:function(t){return[]}},id:{default:"modal-note-dependant"}},data:function(t){return{editNote:{type:"edit",dependant:null,new_note:null}}},watch:{},methods:{edit:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"edit";t&&(this.editNote.dependant=t.id,this.editNote.type=e,"edit"===e?this.editNote.new_note=t.note:(this.editNote.new_note=null,this.updateNote(t)))},cancle:function(){this.editNote.dependant=this.editNote.new_note=null,this.editNote.type="edit"},updateNote:function(t){var e=this;if(t)if(this.editNote.dependant){var a={id:this.editNote.dependant,note:this.editNote.new_note,type:this.editNote.type};r.a.updateNote(a).then(function(e){e.data.success?(t.note=e.data.data.note,l.a.showMessage("Cập nhật ghi chú thành công","success")):l.a.showMessage(e.data.mesage||"Không cập nhật được ghi chú !","warning")}).catch(function(t){l.a.showMessage("Đã có lỗi xảy ra, vui lòng thử lại sau !","warning"),console.log(t)}).then(function(t){e.editNote.dependant=e.editNote.new_note=null,e.editNote.type="edit"})}else l.a.showMessage("Không có ID người phụ thuộc !","warning");else l.a.showMessage("Không có người phụ thuộc tương ứng !","warning")}}},j=Object(d.a)(B,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{"hide-footer":"",id:t.id,title:"Ghi chú",static:"",centered:"",size:"lg"}},[a("table",{staticClass:"table table-hover table-bordered table-striped table-sm"},[a("thead",[a("tr",[a("th",[t._v("NPT")]),t._v(" "),a("th",[t._v("Ghi chú")]),t._v(" "),a("th",{staticClass:"w-15"},[t._v("Thao tác")])])]),t._v(" "),a("tbody",t._l(t.dependants,function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.fullname))]),t._v(" "),+t.editNote.dependant!=+e.id||"delete"===t.editNote.type?a("td",[t._v(t._s(e.note))]):a("td",[a("b-form-textarea",{attrs:{rows:1,"max-rows":3},model:{value:t.editNote.new_note,callback:function(e){t.$set(t.editNote,"new_note",e)},expression:"editNote.new_note"}})],1),t._v(" "),a("td",[t.editNote.dependant!==e.id||"delete"===t.editNote.type?a("div",[a("b-btn",{attrs:{size:"sm",variant:"outline-success",title:"Chỉnh sửa ghi chú"},on:{click:function(a){return t.edit(e)}}},[a("i",{staticClass:"ion ion-md-create"})]),t._v(" "),a("b-btn",{attrs:{size:"sm",variant:"outline-danger",title:"Xóa ghi chú"},on:{click:function(a){return t.edit(e,"delete")}}},[a("i",{staticClass:"ion ion-md-trash"})])],1):a("div",[a("b-btn",{attrs:{size:"sm",variant:"outline-success",title:"Lưu thay đổi"},on:{click:function(a){return t.updateNote(e)}}},[a("i",{staticClass:"fa fa-file"})]),t._v(" "),a("b-btn",{attrs:{size:"sm",variant:"outline-danger",title:"Hủy thay đổi"},on:{click:t.cancle}},[a("i",{staticClass:"fa fa-times"})])],1)])])}),0)])])},[],!1,null,null,null).exports,F={name:"modal-log-dependant",props:{profile:{default:null},id:{default:"modal-log-dependant"}},data:function(t){return{logs:[],loading:!1}},methods:{getLog:function(t){var e=this;t||(t=this.profile),t?(this.loading=!0,r.a.getHistoryDependant({masterProfileId:t}).then(function(t){t.data.success?e.logs=t.data.data:l.a.showMessage(t.data.message||"Không lấy được log","warning")}).catch(function(t){console.log(t),l.a.showMessage("Đã có lỗi xảy ra !","warning")}).then(function(t){e.loading=!1})):l.a.showMessage("Không có ID Profile người lao động cần lấy log NPT !","warning")}}},q=Object(d.a)(F,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{"hide-footer":"",id:t.id,title:"Lịch sử",static:"",centered:"",size:"lg"},on:{show:function(e){return t.getLog()}}},[a("div",{staticClass:"mh-75 overflow-auto"},t._l(t.logs,function(e,n){return a("div",{key:n,staticClass:"mb-1"},[a("div",{staticClass:"mb-2"},[t._v("Người phụ thuộc : "),a("b",[t._v(t._s(e.fullname))])]),t._v(" "),a("table",{staticClass:"table table-hover table-bordered table-striped table-sm"},[a("tbody",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"position-relative"},t._l(e.logs,function(e){return a("tr",{key:e.id},[a("td",{attrs:{width:"50%"}},[a("b",[t._v(t._s(e.fullname))]),t._v(" ("+t._s(e.created)+")")]),t._v(" "),a("td",[t._v(t._s(e.content))])])}),0)])])}),0)])},[],!1,null,null,null).exports,Y=(a("N1kN"),a("EAZf")),z=a.n(Y);N.default.use(z.a);var G={name:"modal-file-dependant",props:{dependant:{type:Object,default:function(t){return{}}},id:{default:"modal-file-dependant"}},components:{},data:function(t){return{fileDependant:[],fileAdded:{fileCmndDependant:[],fileBirthCertificate:[],fileInabilityToWork:[],fileHousehold:[],fileXNNPTTNCN:[],fileDKNPT:[],fileOther:[],fileAuthority:[],fileDetailIncome:[],fileTemporaryResidence:[],fileConfirmOfCommittee:[]},fileDeleted:{fileCmndDependant:[],fileBirthCertificate:[],fileInabilityToWork:[],fileHousehold:[],fileXNNPTTNCN:[],fileDKNPT:[],fileOther:[],fileAuthority:[],fileDetailIncome:[],fileTemporaryResidence:[],fileConfirmOfCommittee:[]},edit:!1,notEnoughFile:!1,loading:!1,options:{url:"data-src"}}},watch:{edit:function(t,e){if(!t){this.fileAdded.fileCmndDependant=[],this.fileAdded.fileBirthCertificate=[],this.fileAdded.fileInabilityToWork=[],this.fileAdded.fileHousehold=[],this.fileAdded.fileXNNPTTNCN=[],this.fileAdded.fileDKNPT=[],this.fileAdded.fileOther=[],this.fileAdded.fileAuthority=[],this.fileDeleted.fileCmndDependant=[],this.fileDeleted.fileBirthCertificate=[],this.fileDeleted.fileInabilityToWork=[],this.fileDeleted.fileHousehold=[],this.fileDeleted.fileXNNPTTNCN=[],this.fileDeleted.fileDKNPT=[],this.fileDeleted.fileOther=[],this.fileDeleted.fileAuthority=[];for(var a=this.$el.querySelectorAll(".file-deleted"),n=0,i=0|a.length;n<i;n=n+1|0)a[n].classList.remove("file-deleted");var s=this.$el.querySelector("#topFile");s&&s.scrollTo({top:0,behavior:"smooth"})}}},methods:{setEdit:function(){this.edit=!this.edit},deleteFile:function(t,e,a,n){if(n){if(t.target.classList.contains("ion-md-close-circle"))this.fileDeleted[e].push(this.fileDependant[e].files[a].id),t.target.setAttribute("title","Lấy lại");else{var i=this.fileDeleted[e].indexOf(this.fileDependant[e].files[a].id);i>=0&&(this.fileDeleted[e].splice(i,1),t.target.setAttribute("title","Xóa"))}t.target.classList.toggle("ion-md-close-circle"),t.target.classList.toggle("ion-md-refresh-circle"),t.target.nextElementSibling.classList.toggle("file-deleted")}else this.fileAdded[e].splice(a,1)},formatNames:function(t){return t?t.length+" files":""},getUrl:function(t){return URL.createObjectURL(t)},openLink:function(t){window.open(t,"_blank")},showFileType:function(t,e){return this.edit?!(!0!==t.required&&"fileOther"!==e&&!t.files.length):t.files.length>0},getFileDependant:function(){var t=this;this.dependant&&this.dependant.id&&(this.loading=!0,r.a.getFileByDependantId({dependantId:this.dependant.id}).then(function(e){e.data.success?t.fileDependant=e.data.data.fileData||[]:l.a.showMessage(e.data.message||"Không lấy được file hồ sơ NPT !","warning")}).catch(function(t){l.a.showMessage("Không lấy được dữ liệu !","warning")}).then(function(e){t.loading=!1}))},updateFile:function(){var t=this;if(this.dependant&&this.dependant.id){this.loading=!0;var e=new FormData;e.append("dependantId",this.dependant.id),S()(this.fileAdded).forEach(function(a){for(var n=t.fileAdded[a].length,i=0;i<n;i++)e.append(a+"["+i+"]",t.fileAdded[a][i])}),S()(this.fileDeleted).forEach(function(a){for(var n=t.fileDeleted[a].length,i=0;i<n;i++)e.append(a+"["+i+"]",t.fileDeleted[a][i])}),r.a.updateFileDependant(e).then(function(e){e.data.success?(t.getFileDependant(),t.$emit("dataChange"),t.edit=!1,l.a.showMessage(e.data.message||"Cập nhật file hồ sơ NPT thành công","success")):l.a.showMessage(e.data.message,"warning")}).catch(function(t){l.a.showMessage("Đã có lỗi xảy ra","warning")}).then(function(e){t.loading=!1})}}}};var K=function(t){a("eLJX")},V={name:"modal-list-dependant",components:{NoteDependant:j,LogDependant:q,RadioChangeStatus:u,UpdateDependantPerson:H,FileDependant:Object(d.a)(G,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{id:t.id,"modal-class":"modal-xl",static:"",center:"","hide-footer":""},on:{shown:t.getFileDependant}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"position-relative"},[a("div",{staticClass:"text-right"},[a("b-link",{directives:[{name:"show",rawName:"v-show",value:!t.edit,expression:"!edit"}],on:{click:t.setEdit}},[t._v("Chỉnh sửa")]),t._v(" "),a("b-link",{directives:[{name:"show",rawName:"v-show",value:t.edit,expression:"edit"}],on:{click:t.setEdit}},[t._v("Hủy")])],1),t._v(" "),a("div",{staticClass:"mh-75 overflow-auto"},[a("div",{staticClass:"text-danger mb-2 text-left",attrs:{id:"topFile"}},[t.notEnoughFile?a("span",[a("i",{staticClass:"fas fa-info-circle"}),t._v(" Thiếu file:\n        ")]):t._e(),t._v(" "),t._l(t.fileDependant,function(e,n){return a("i",{key:n+"0"},[t._v("\n          "+t._s(!e.required||e.files&&e.files.length?"":(t.notEnoughFile=!0,e.desc+", "))+"\n        ")])})],2),t._v(" "),a("div",{directives:[{name:"viewer",rawName:"v-viewer",value:t.options,expression:"options"}]},[t._l(t.fileDependant,function(e,n){return[t.showFileType(e,n)?a("div",{key:n,staticClass:"text-left"},[a("div",{staticClass:"div-file-type"},[a("span",{staticClass:"span-file-type"},[t._v(t._s(e.desc))])]),t._v(" "),t._l(e.files,function(e,i){return a("div",{key:e.id,staticClass:"img-bounder"},[t.edit?a("span",{staticClass:"icon ion-md-close-circle btn-disable-file z-3",attrs:{title:"Xóa"},on:{click:function(e){return t.deleteFile(e,n,i,!0)}}}):t._e(),t._v(" "),0===e.type.indexOf("image")?a("img",{staticClass:"mt-2 mr-3",attrs:{src:e.link_file,alt:e.name,"data-src":e.source_file||e.link_file}}):a("div",{staticClass:"mt-2 mr-3"},[a("b-link",{on:{click:function(a){return t.openLink(e.source_file||e.link_file)}}},[a("b-badge",{staticClass:"font-large",attrs:{variant:"primary"}},[t._v(t._s(e.name))])],1)],1)])}),t._v(" "),t._l(t.fileAdded[n],function(e,i){return a("div",{key:i,staticClass:"img-bounder"},[t.edit?a("span",{staticClass:"icon ion-md-close-circle btn-disable-file z-3",attrs:{title:"Xóa"},on:{click:function(e){return t.deleteFile(e,n,i,!1)}}}):t._e(),t._v(" "),0===e.type.indexOf("image")?a("img",{staticClass:"mt-2 mr-3",attrs:{src:t.getUrl(e),alt:e.name}}):a("b-link",{staticClass:"mr-3"},[a("b-badge",{staticClass:"font-large",attrs:{variant:"primary"}},[t._v(t._s(e.name))])],1)],1)}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit,expression:"edit"}],staticClass:"img-bounder"},[a("b-form-group",{staticClass:"dragdrop"},[a("b-form-file",{attrs:{multiple:"",accept:"image/*, .pdf",placeholder:"Thêm file","file-name-formatter":t.formatNames},model:{value:t.fileAdded[n],callback:function(e){t.$set(t.fileAdded,n,e)},expression:"fileAdded[name]"}})],1)],1)],2):t._e()]})],2)]),t._v(" "),a("div",{staticClass:"text-center mt-3"},[a("b-btn",{directives:[{name:"show",rawName:"v-show",value:t.edit,expression:"edit"}],attrs:{variant:"success"},on:{click:t.updateFile}},[t._v("Cập nhật")])],1)])])},[],!1,K,"data-v-0e15f798",null).exports},props:{profile:{default:null},mpFullname:{default:null},id:{default:"modal-list-dependant"},filter:{default:function(t){return{}},type:Object}},data:function(t){return{dependants:[],canUpdateStatus:!0,loading:!1,dataChange:!1,curDependant:{},relationship:C.relationship}},watch:{},methods:{getDependantOfProfile:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.loading=!0,e||(e=this.profile),e){var a={profile:e,month:this.filter.month,status:this.filter.status};r.a.getDependantOfProfile(a).then(function(e){e.data.success?t.dependants=e.data.data||[]:l.a.showMessage(e.data.message||"Không lấy được danh sách người phụ thuộc !","warning")}).catch(function(t){l.a.showMessage("Không lấy được danh sách người phụ thuộc !","warning")}).then(function(e){t.loading=!1})}else this.dependants.length=0},deleteDependant:function(t){var e=this;confirm("Bạn có chắc chắn muốn xóa người phụ thuộc "+t.fullname+" không ?")&&(this.$startLoading(),r.a.deleteDependant({dependantId:t.id}).then(function(t){t.data.success?(e.getDependantOfProfile(),l.a.showMessage(t.data.message,"success")):(!1===t.data.success&&l.a.showMessage(t.data.message||"Không xóa được người phụ thuộc !","warning"),"permission"===t.data.type&&(e.canUpdateStatus=!1))}).catch(function(t){l.a.showMessage("Đã có lỗi xảy ra !","warning")}).then(function(t){e.$stopLoading()}))},checkDataChange:function(){this.dataChange&&this.$emit("dataChange")},updateDependant:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&(this.curDependant=t,this.$bvModal.show("update-dependant-person-on-list"))},viewFile:function(t){t&&(this.curDependant=t,this.$bvModal.show("modal-file-dependant"))},formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD-MM-YYYY";return t?l.a.formatDate(t,e):null}}},Q=Object(d.a)(V,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{attrs:{"hide-footer":"",static:"",centered:"","modal-class":"modal-xxl",title:"Danh sách người phụ thuộc "+t.mpFullname,id:t.id},on:{hide:t.checkDataChange,shown:function(e){return t.getDependantOfProfile()}}},[a("div",{staticClass:"text-right"},[a("b-btn",{attrs:{size:"sm",variant:"outline-ghtk"},on:{click:function(e){return t.$bvModal.show("modal-log-dependant")}}},[a("i",{staticClass:"ion ion-md-information-circle-outline"}),t._v(" Lịch sử\n      ")]),t._v(" "),a("b-btn",{attrs:{size:"sm",variant:"outline-ghtk"},on:{click:function(e){return t.$bvModal.show("modal-note-dependant")}}},[a("i",{staticClass:"ion ion-md-alert"}),t._v(" Ghi chú\n      ")])],1),t._v(" "),a("table",{staticClass:"table table-hover table-bordered table-sm"},[a("thead",{staticClass:"thead-light"},[a("tr",[a("th",[t._v("STT")]),t._v(" "),a("th",[t._v("Họ và tên")]),t._v(" "),a("th",[t._v("Ngày sinh")]),t._v(" "),a("th",[t._v("Mã số thuế")]),t._v(" "),a("th",[t._v("Quốc tịch")]),t._v(" "),a("th",[t._v("CMND")]),t._v(" "),a("th",[t._v("Mối quan hệ")]),t._v(" "),a("th",[t._v("Bắt đầu giảm trừ")]),t._v(" "),a("th",[t._v("Kết thúc giảm trừ")]),t._v(" "),a("th",[t._v("Hồ sơ")]),t._v(" "),a("th",[t._v("Trạng thái")]),t._v(" "),a("th",[t._v("Thao tác")])])]),t._v(" "),a("tbody",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"position-relative"},t._l(t.dependants,function(e,n){return a("tr",{key:e.id},[a("td",[t._v(t._s(n+1))]),t._v(" "),a("td",[t._v(t._s(e.fullname))]),t._v(" "),a("td",[t._v(t._s(t.formatDate(e.birthday,"DD-MM-YYYY")))]),t._v(" "),a("td",[t._v(t._s(e.tax_iden_number))]),t._v(" "),a("td",[t._v(t._s(e.nationality))]),t._v(" "),a("td",[t._v(t._s(e.personal_id_number))]),t._v(" "),a("td",[t._v(t._s(t.relationship[e.relationship]))]),t._v(" "),a("td",[t._v(t._s(t.formatDate(e.from_reduce,"MM-YYYY")))]),t._v(" "),a("td",[t._v(t._s(t.formatDate(e.to_reduce,"MM-YYYY")))]),t._v(" "),a("td",{staticClass:"text-center"},[a("b-btn",{attrs:{variant:"outline-secondary",size:"sm"},on:{click:function(a){return t.viewFile(e)}}},[a("i",{staticClass:"icon ion-ios-document"})])],1),t._v(" "),a("td",[a("RadioChangeStatus",{attrs:{dependant:e,disable:!t.canUpdateStatus},on:{dataChange:function(e){t.dataChange=!0}}})],1),t._v(" "),a("td",{staticClass:"text-center"},[a("div",[a("b-btn",{attrs:{variant:"outline-ghtk mb-1",size:"sm",title:"Chỉnh sửa người phụ thuộc này"},on:{click:function(a){return t.updateDependant(e)}}},[a("i",{staticClass:"ion ion-md-create"})]),t._v(" "),a("b-btn",{attrs:{variant:"outline-danger mb-1",size:"sm",title:"Xóa người phụ thuộc này",disabled:!t.canUpdateStatus},on:{click:function(a){return t.deleteDependant(e)}}},[a("i",{staticClass:"ion ion-md-trash"})])],1)])])}),0)])]),t._v(" "),a("NoteDependant",{attrs:{dependants:t.dependants}}),t._v(" "),a("LogDependant",{attrs:{profile:t.profile}}),t._v(" "),a("UpdateDependantPerson",{attrs:{id:"update-dependant-person-on-list",curEdit:t.curDependant.id},on:{updateOk:t.getDependantOfProfile}}),t._v(" "),a("FileDependant",{attrs:{dependant:t.curDependant},on:{dataChange:t.getDependantOfProfile}})],1)},[],!1,null,null,null).exports,X=a("F/2K"),W=a("a/7L"),J=a("l48y"),Z=a("NYxO"),tt={name:"manage-dependant",mixins:[a("poZo").a],props:["dataSearchInput"],components:{QuickUpdateStatusDependant:k,ListDependant:Q,UpdateDependantPerson:H,SingleSelectProvince:X.a,SingleSelectStation:W.a,SingleSelectRegion:J.a},data:function(){return{loading:null,staffcode:null,curProfile:null,curProfileName:null,pageData:{curPage:1,totalPages:0,totalItems:0,perPage:20},items:[],filter:{provinceId:null,stationId:null,regionId:null,taxIdenNumberPersonalId:null,fullnameUsername:null,month:null,year:null,status:null,page:null},optionsYear:[{text:"-- Chọn năm --",value:null}],optionsMonth:[{text:"-- Chọn tháng đăng kí --",value:null},{text:"Tháng 1 (21/12 -> 20/01)",value:"1"},{text:"Tháng 2 (21/1 -> 20/02)",value:"2"},{text:"Tháng 3 (21/2 -> 20/03)",value:"3"},{text:"Tháng 4 (21/3 -> 20/04)",value:"4"},{text:"Tháng 5 (21/4 -> 20/05)",value:"5"},{text:"Tháng 6 (21/5 -> 20/06)",value:"6"},{text:"Tháng 7 (21/6 -> 20/07)",value:"7"},{text:"Tháng 8 (21/7 -> 20/08)",value:"8"},{text:"Tháng 9 (21/8 -> 20/09)",value:"9"},{text:"Tháng 10 (21/9 -> 20/10)",value:"10"},{text:"Tháng 11 (21/10 -> 20/11)",value:"11"},{text:"Tháng 12 (21/11 -> 20/12)",value:"12"}],optionStatus:C.optionStatus,addingDependant:!1}},computed:i()({},Object(Z.c)({curUser:"userInfo"})),created:function(){this.createYearOption(),this.dataSearchInput&&(this.filter=i()({},this.filter,this.dataSearchInput)),this.getDependant()},methods:{createYearOption:function(){for(var t=(new Date).getFullYear(),e=0;e<10;e++)this.optionsYear.push({text:"Năm "+(t-e),value:t-e})},listDependant:function(t){this.curProfile=t.mp_id,this.curProfileName=t.fullname,this.$bvModal.show("modal-list-dependant")},handleSelectedProvince:function(t){this.filter.provinceId=t?t.id:null},handleSelectedStation:function(t){this.filter.stationId=t?t.id:null},handleSelectedRegion:function(t){this.filter.regionId=t?t.id:null},getDependant:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loading=!0,this.pageData.curPage=e,this.filter.page=this.pageData.curPage,r.a.dependantPersonCheck(this.filter).then(function(e){if(e.data.success){t.items=e.data.data;var a=t.items.length;a<e.data.pagination.per_page?t.pageData.totalItems=a:t.pageData.totalItems=e.data.pagination.per_page*e.data.pagination.current_page+1,t.pageData.perPage=e.data.pagination.per_page}else l.a.showMessage(e.data.message||"Không lấy được thông tin NPT !","warning")}).catch(function(t){console.log(t)}).then(function(e){t.loading=!1})},checkCanUpdateRegisterStatus:function(){var t=this;this.curUser.User&&this.curUser.User.username?r.a.checkCanUpdateRegisterStatus({username:this.curUser.User.username}).then(function(e){e.data.success&&e.data.data&&e.data.data.allowUpdate?t.$bvModal.show("quick-update-status-dependant"):l.a.showMessage("Bạn không có quyền cập nhật trạng thái đăng ký NPT !","warning")}).catch(function(t){console.log(t)}):l.a.showMessage("Bạn không có quyền cập nhật trạng thái đăng ký NPT !","warning")},addDependant:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.addingDependant=!0,setTimeout(function(){t.staffcode=e,t.$bvModal.show("update-dependant-person")},100)},exportDependant:function(){var t="";for(var e in this.filter)null!==this.filter[e]&&""!==this.filter[e]&&"page"!==e&&(t+=e+"="+this.filter[e]+"&");window.open("/erp/ErpDependentPerson/exportDependant?"+t,"_blank")}}},et=Object(d.a)(tt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"small-scrollbar"},[a("b-row",{staticClass:"align-items-center"},[a("b-col",{attrs:{cols:"4"}}),t._v(" "),a("b-col",{staticClass:"text-right",attrs:{cols:"8"}},[a("b-btn",{attrs:{variant:"ghtk"},on:{click:function(e){return t.getDependant(1)}}},[a("span",{staticClass:"ion ion-md-search"}),t._v(" Tìm kiếm")]),t._v(" "),a("b-btn",{attrs:{variant:"ghtk"},on:{click:function(e){return t.addDependant()}}},[a("span",{staticClass:"ion ion-md-add"}),t._v(" Thêm NPT")]),t._v(" "),t.checkPermissionExportAllPage()?a("b-btn",{attrs:{variant:"ghtk"},on:{click:t.exportDependant}},[a("span",{staticClass:"ion ion-md-download"}),t._v(" Xuất Excel ")]):t._e(),t._v(" "),a("b-btn",{attrs:{variant:"ghtk"},on:{click:t.checkCanUpdateRegisterStatus}},[t._v("Cập nhập nhanh trạng thái đăng kí của NPT")])],1)],1),t._v(" "),a("div",{staticClass:"seperate-xs my-1"}),t._v(" "),a("b-row",{staticClass:"mb-3"},[a("b-col",{staticClass:"mb-1",attrs:{cols:"2"}},[a("b-input",{attrs:{placeholder:"Họ tên/Username nhân viên"},model:{value:t.filter.fullnameUsername,callback:function(e){t.$set(t.filter,"fullnameUsername",e)},expression:"filter.fullnameUsername"}})],1),t._v(" "),a("b-col",{attrs:{cols:"2"}},[a("b-input",{attrs:{placeholder:"CMND/Mã nhân viên/Mã số thuế"},model:{value:t.filter.taxIdenNumberPersonalId,callback:function(e){t.$set(t.filter,"taxIdenNumberPersonalId",e)},expression:"filter.taxIdenNumberPersonalId"}})],1),t._v(" "),a("b-col",{attrs:{cols:"2"}},[a("single-select-region",{on:{handleSelectedRegion:t.handleSelectedRegion}})],1),t._v(" "),a("b-col",{attrs:{cols:"2"}},[a("single-select-province",{attrs:{regionName:t.filter.regionId,"custom-class":""},on:{handleSelectedProvince:t.handleSelectedProvince}})],1),t._v(" "),a("b-col",{attrs:{cols:"2"}},[a("single-select-station",{attrs:{"province-id":t.filter.provinceId,"custom-class":""},on:{handleSelectedStation:t.handleSelectedStation}})],1),t._v(" "),a("b-col",{attrs:{cols:"2",md:"2"}},[a("b-form-select",{attrs:{options:t.optionStatus},model:{value:t.filter.status,callback:function(e){t.$set(t.filter,"status",e)},expression:"filter.status"}})],1),t._v(" "),a("b-col",{attrs:{cols:"2"}},[a("b-form-select",{attrs:{options:t.optionsYear},model:{value:t.filter.year,callback:function(e){t.$set(t.filter,"year",e)},expression:"filter.year"}})],1),t._v(" "),a("b-col",{attrs:{cols:"2"}},[a("b-form-select",{attrs:{options:t.optionsMonth},model:{value:t.filter.month,callback:function(e){t.$set(t.filter,"month",e)},expression:"filter.month"}})],1),t._v(" "),a("b-col",{staticClass:"text-right",attrs:{sm:"8"}})],1),t._v(" "),a("div",{staticClass:"paging mx-1"},[a("div",{staticClass:"z-0 d-inline-block"},[a("b-pagination",{staticClass:"mb-1",attrs:{size:"sm",align:"left","hide-goto-end-buttons":"","total-rows":+t.pageData.totalItems,"per-page":t.pageData.perPage},on:{change:t.getDependant},model:{value:t.pageData.curPage,callback:function(e){t.$set(t.pageData,"curPage",e)},expression:"pageData.curPage"}})],1)]),t._v(" "),a("table",{staticClass:"table table-sm table-hover table-bordered"},[t._m(0),t._v(" "),a("tbody",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"position-relative"},[t._l(t.items,function(e,n){return a("tr",{key:e.mp_id},[a("td",{staticClass:"text-center"},[t._v(t._s((t.pageData.curPage-1)*t.pageData.perPage+n+1))]),t._v(" "),a("td",[t._v(t._s(e.fullname))]),t._v(" "),a("td",[t._v(t._s(e.staff_code))]),t._v(" "),a("td",[t._v(t._s(e.position.department+" - "+e.position.position_name))]),t._v(" "),a("td",[t._v(t._s(e.Station))]),t._v(" "),a("td",[t._v(t._s(e.no_of_dependants?e.no_of_dependants+"/"+e.sumOfDependant:"0/"+e.sumOfDependant))]),t._v(" "),a("td",{staticClass:"text-center"},[a("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-sm",modifiers:{"modal-sm":!0}}],attrs:{variant:"outline-ghtk",title:"Xem người phụ thuộc",size:"sm"},on:{click:function(a){return t.listDependant(e)}}},[a("i",{staticClass:"ion ion-md-eye"})]),t._v(" "),a("b-btn",{attrs:{variant:"outline-ghtk",title:"Thêm người phụ thuộc",size:"sm"},on:{click:function(a){return t.addDependant(e.staff_code)}}},[a("i",{staticClass:"ion ion-md-add"})])],1)])}),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:!t.items||!t.items.length,expression:"!items || !items.length"}]},[t._m(1)])],2)]),t._v(" "),a("ListDependant",{attrs:{profile:t.curProfile,filter:t.filter,mpFullname:t.curProfileName}}),t._v(" "),t.addingDependant?a("UpdateDependantPerson",{attrs:{staffcode:t.staffcode},on:{updateOk:function(e){return t.getDependant()}}}):t._e(),t._v(" "),a("QuickUpdateStatusDependant",{attrs:{optionMonth:t.optionsMonth,optionStatus:t.optionStatus},on:{dataChange:function(e){return t.getDependant()}}})],1)},[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"text-center"},[t._v("STT")]),t._v(" "),a("th",[t._v("Tên nhân viên")]),t._v(" "),a("th",[t._v("Mã nhân viên")]),t._v(" "),a("th",[t._v("Vị trí")]),t._v(" "),a("th",[t._v("kho")]),t._v(" "),a("th",[t._v("Số NPT")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("Chi tiết")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"text-center h-25vh align-middle",attrs:{colspan:"8"}},[e("b",[this._v("Không có người lao động nào !")])])}],!1,null,null,null);e.a=et.exports},tNAD:function(t,e){},tZVL:function(t,e){},teh7:function(t,e){},tf68:function(t,e,a){"use strict";var n=a("Xxa5"),i=a.n(n),s=a("exGp"),o=a.n(s),r=a("hC/b"),l=a("O6r3"),c=a("G0J2"),d=(a("3f40"),a("4qOc"),a("+cgv"),a("JanS")),u=a.n(d),h={components:{quillEditor:c.quillEditor},props:["page"],mounted:function(){this.name=this.page.name,this.note=this.page.note,this.video=this.page.file},data:function(){return{optionEdittor:u.a.optionEdittor,name:"",note:"",file:null,video:null}},methods:{editPage:function(){var t=this;return o()(i.a.mark(function e(){var a,n,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=new FormData,t.video?a.append("video",t.video):t.file&&a.append("file",t.file),a.append("name",t.name),a.append("note",t.note),a.append("id",t.page.id),e.next=8,l.a.editTrainingPage(a);case 8:n=e.sent,(s=n.data).success?(t.$emit("refreshTest"),r.a.showMessage(s.message,"success")):r.a.showMessage(s.message,"warning"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),r.a.showMessage(e.t0.message,"warning");case 16:return e.prev=16,t.loading=!1,e.finish(16);case 19:case"end":return e.stop()}},e,t,[[0,13,16,19]])}))()},isImage:function(t){if(!t)return null;return/[/.](gif|jpg|jpeg|tiff|png)$/i.test(t)}},watch:{page:function(t){this.name=t.name,this.note=t.note,this.video=t.file,this.file=null}}},p=a("XyMi");var m=function(t){a("xFSM"),a("ZPgE")},f=Object(p.a)(h,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-page"},[a("b-form-input",{staticClass:"page-title",attrs:{placeholder:"Tiêu đề trang"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),t.video?a("div",{staticClass:"video-box"},[t.isImage(t.video)?a("img",{staticClass:"uploaded-img",attrs:{src:t.video}}):a("video",{attrs:{width:"100",height:"100",controls:""}},[a("source",{attrs:{src:t.video,type:"video/mp4"}}),t._v("\n          Your browser does not support the video tag.\n        ")]),t._v(" "),a("b-button",{staticClass:"ml-1 delete",attrs:{size:"sm",variant:"danger"},on:{click:function(e){t.video=null}}},[t._v("\n          Xóa "),a("i",{staticClass:"fa fa-trash"})])],1):a("b-form-group",{attrs:{label:"Video"}},[a("b-form-file",{staticClass:"custom-file",attrs:{multiple:!1,accept:".mp4, image/*",placeholder:"Vui lòng chọn file upload..."},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}})],1),t._v(" "),a("quill-editor",{ref:"myQuillEditor",attrs:{options:t.optionEdittor},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}}),t._v(" "),a("button",{staticClass:"my-btn save",on:{click:t.editPage}},[t._v("Lưu "),a("i",{staticClass:"fa fa-floppy-o",attrs:{"aria-hidden":"true"}})])],1)},[],!1,m,"data-v-c9bac294",null);e.a=f.exports},"tm/M":function(t,e){},tu42:function(t,e){},"u/b+":function(t,e){},u1Qr:function(t,e,a){"use strict";var n=a("7pbi"),i=a("hC/b"),s=this,o={props:{userId:{required:!0},orderId:{default:null},staffLogId:{default:null},type:{type:String,required:!0},dataInput:{default:"***"},source:{type:String,required:!0},className:{default:""},placeHolder:{default:""}},name:"sensitive-label",components:{EyeButton:n.a},data:function(){return{inputValue:s.dataInput,isShowData:!1,isLoading:!1}},watch:{dataInput:function(t,e){this.inputValue=t}},computed:{},created:function(){this.inputValue=this.dataInput},methods:{setRawData:function(t){i.a.isEmpty(t)||(this.inputValue=t,this.isShowData=!0),this.$emit("returnRawData",t)}}},r=a("XyMi");var l=function(t){a("O7cK")},c=Object(r.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sensitive-label",class:t.className},[a("span",[t._v(t._s(t.inputValue))]),t._v(" "),t.isShowData?t._e():a("eye-button",{staticClass:"sensitive-label__eye-icon",attrs:{source:t.source,type:t.type,"user-id":t.userId,"staff-log-id":t.staffLogId,"order-id":t.orderId},on:{returnRawData:t.setRawData}})],1)},[],!1,l,"data-v-2216b5ee",null);e.a=c.exports},uBro:function(t,e){},uMFG:function(t,e){},uSev:function(t,e){},udGv:function(t,e){},ufke:function(t,e,a){"use strict";var n=a("RUzx"),i=a.n(n),s=a("agCp"),o={name:"single-select-worktype",components:{Multiselect:i.a},props:{positionJob:{},workTypeId:{},isDisabled:{type:Boolean}},data:function(){return{option:null,options:[]}},created:function(){this.positionJob&&this.getWorkTypeByPositionJob(this.positionJob)},watch:{positionJob:function(t,e){t&&(this.option=null,this.options=[],this.getWorkTypeByPositionJob(t))},option:function(t,e){this.$emit("handleSelectedWorkType",t)},workTypeId:function(t,e){t?this.setSelectedOption():this.option=null}},methods:{setSelectedOption:function(){var t=this;this.workTypeId&&this.options&&this.options.length&&(this.option=this.options.find(function(e){return parseInt(e.id)===parseInt(t.workTypeId)}))},getWorkTypeByPositionJob:function(t){var e=this;if(t){var a={position_id:t};s.a.getWorkTypeByPositionJob(a).then(function(t){t.data.success?(e.options=t.data.data,e.workTypeId&&e.setSelectedOption()):e.options=[]}).catch(function(t){console.log(t)})}}}},r=a("XyMi"),l=Object(r.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"select-user-work-type"},[a("multiselect",{attrs:{options:t.options,disabled:t.isDisabled,label:"name","track-by":"name",placeholder:"Chọn kiểu nhân viên",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn",searchable:!0},on:{select:function(e){return t.$emit("select",e)}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v("Chọn kiểu nhân viên")])])],1)},[],!1,null,null,null);e.a=l.exports},uo3f:function(t,e){},uslO:function(t,e,a){var n={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn-bd":"1C9R","./bn-bd.js":"1C9R","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-in":"yJfC","./en-in.js":"yJfC","./en-nz":"dyB6","./en-nz.js":"dyB6","./en-sg":"NYST","./en-sg.js":"NYST","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-mx":"USNP","./es-mx.js":"USNP","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fil":"rMbQ","./fil.js":"rMbQ","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./ga":"U5Iz","./ga.js":"U5Iz","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-deva":"VGQH","./gom-deva.js":"VGQH","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it-ch":"/E8D","./it-ch.js":"/E8D","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ku":"kI9l","./ku.js":"kI9l","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./oc-lnc":"KOFO","./oc-lnc.js":"KOFO","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tk":"+WRH","./tk.js":"+WRH","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-mo":"+WA1","./zh-mo.js":"+WA1","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function i(t){return a(s(t))}function s(t){var e=n[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}i.keys=function(){return Object.keys(n)},i.resolve=s,t.exports=i,i.id="uslO"},v4vJ:function(t,e){},vEo5:function(t,e,a){"use strict";var n=a("Dd8w"),i=a.n(n),s=a("vfns"),o=a("CpaI"),r=a("RUzx"),l={name:"multi-select-districts",components:{Multiselect:a.n(r).a},props:{provinceId:null,districtId:{default:[]},isDisabled:{type:Boolean},placeholder:{default:"Chọn quận/huyện"},clearSelect:{default:!1},closeSelect:{default:!1}},data:function(){return{storage:null,option:[],options:[]}},created:function(){this.storage=new s.a,this.getListDistrict()},watch:{provinceId:function(t,e){this.option=[],this.options=[],this.$emit("onChange",null),this.getListDistrict()}},methods:{input:function(t){this.$emit("onChange",t)},setSelectedOption:function(){var t=this;this.options.length>0&&this.districtId&&(this.option=this.options.filter(function(e){return t.districtId.includes(""+e.id)||t.districtId.includes(+e.id)}))},setDisplayName:function(){this.options=this.options.map(function(t){var e=null===t.end_date||new Date(t.end_date)>new Date?t.prefix+" "+t.name:t.prefix+" "+t.name+" (Cũ)";return i()({},t,{name:e})})},getListDistrict:function(){var t=this;if(!this.provinceId||null==this.provinceId)return this.options=[],void(this.option=null);var e="listDistrictsByProvince-"+this.provinceId,a=this.storage.get(e);if(a)this.options=a,this.setDisplayName(),this.setSelectedOption();else{var n={provinceId:[this.provinceId]};o.a.getDistrictByProvinceIdHrmV2(n).then(function(a){a.data.success&&(t.options=a.data.data,t.storage.set(e,t.options),t.setDisplayName(),t.setSelectedOption())}).catch(function(t){console.log(t)})}}}},c=a("XyMi");var d=function(t){a("m+wD")},u=Object(c.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{attrs:{options:t.options,placeholder:t.placeholder,multiple:!0,disabled:t.isDisabled,label:"name","track-by":"id","close-on-select":t.closeSelect,"clear-on-select":t.clearSelect,selectedLabel:"",deselectLabel:"X",selectLabel:"Chọn"},on:{input:t.input},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,d,"data-v-be1c2f48",null);e.a=u.exports},vFIp:function(t,e){},vfns:function(t,e,a){"use strict";var n=a("mvHQ"),i=a.n(n),s=a("Zrlr"),o=a.n(s),r=a("wxAW"),l=a.n(r),c=function(){function t(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];switch(o()(this,t),this.JsonSerialize=!0,e){case"session":default:this.storageEngine=sessionStorage;break;case"local":this.storageEngine=localStorage}this.JsonSerialize=a}return l()(t,[{key:"get",value:function(t){var e=this.storageEngine.getItem(t);return e?this.JsonSerialize?JSON.parse(e):e:null}},{key:"set",value:function(t,e){try{this.JsonSerialize&&(e=i()(e)),this.storageEngine.setItem(t,e)}catch(t){}}},{key:"remove",value:function(t){this.storageEngine.removeItem(t)}},{key:"clear",value:function(){this.storageEngine.clear()}},{key:"slice",value:function(t){var e=this.get(t);return this.remove(t),e}}]),t}();e.a=c},vi95:function(t,e){},w6Ui:function(t,e,a){"use strict";var n=a("HMpe"),i=a("Xz4E").SideNav,s={name:"sidenav",props:{orientation:{type:String,default:"vertical"},animate:{type:Boolean,default:!0},accordion:{type:Boolean,default:!0},closeChildren:{type:Boolean,default:!1},showDropdownOnHover:{type:Boolean,default:!1},onOpen:Function,onOpened:Function,onClose:Function,onClosed:Function},mounted:function(){this.orientation="horizontal"===this.orientation?"horizontal":"vertical",this.sidenav=new i(this.$el,{orientation:this.orientation,animate:this.animate,accordion:this.accordion,closeChildren:this.closeChildren,showDropdownOnHover:this.showDropdownOnHover,onOpen:this.onOpen,onOpened:this.onOpened,onClose:this.onClose,onClosed:this.onClosed},n.a)},beforeDestroy:function(){this.sidenav&&this.sidenav.destroy(),this.sidenav=null}},o=a("XyMi");var r=function(t){a("d8s/")},l=Object(o.a)(s,function(){var t=this.$createElement;return(this._self._c||t)("nav",{staticClass:"sidenav",class:"sidenav-"+this.orientation},[this._t("default")],2)},[],!1,r,null,null).exports,c={name:"sidenav-link",props:{href:String,icon:String,target:{type:String,default:"_self"},linkClass:{type:String,default:""},badge:{default:null},badgeClass:{type:String,default:""},disabled:{type:Boolean,default:!1},active:{type:Boolean,default:!1}}},d=Object(o.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sidenav-item",class:{active:t.active,disabled:t.disabled}},[a("a",{staticClass:"sidenav-link",class:t.linkClass,attrs:{href:t.href,target:t.target}},[t.icon?a("i",{staticClass:"sidenav-icon",class:t.icon}):t._e(),t._v(" "),a("div",[t._t("default")],2),t._v(" "),t.badge?a("div",{staticClass:"pl-1 ml-auto"},[a("div",{staticClass:"badge",class:t.badgeClass},[t._v(t._s(t.badge))])]):t._e()])])},[],!1,null,null,null).exports,u={name:"sidenav-router-link",props:{to:null,replace:{type:Boolean,default:!1},append:{type:Boolean,default:!1},exact:{type:Boolean,default:!1},event:null,icon:String,linkClass:{type:String,default:""},badge:{default:null},badgeClass:{type:String,default:""},disabled:{type:Boolean,default:!1},active:{type:Boolean,default:!1}}},h=Object(o.a)(u,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-link",{staticClass:"sidenav-item",class:{active:t.active,disabled:t.disabled},attrs:{tag:"div","active-class":"active",to:t.to,replace:t.replace,append:t.append,exact:t.exact,event:t.event}},[a("a",{staticClass:"sidenav-link",class:t.linkClass},[t.icon?a("i",{staticClass:"sidenav-icon",class:t.icon}):t._e(),t._v(" "),a("div",[t._t("default")],2),t._v(" "),t.badge?a("div",{staticClass:"pl-1 ml-auto"},[a("div",{staticClass:"badge",class:t.badgeClass},[t._v(t._s(t.badge))])]):t._e()])])},[],!1,null,null,null).exports,p={name:"sidenav-menu",props:{icon:String,linkClass:{type:String,default:""},badge:{default:null},badgeClass:{type:String,default:""},disabled:{type:Boolean,default:!1},active:{type:Boolean,default:!1},open:{type:Boolean,default:!1}}},m=Object(o.a)(p,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sidenav-item",class:{active:t.active,disabled:t.disabled,open:t.open}},[a("a",{staticClass:"sidenav-link sidenav-toggle",class:t.linkClass,attrs:{href:"javascript:void(0)"}},[t.icon?a("i",{staticClass:"sidenav-icon",class:t.icon}):t._e(),t._v(" "),a("div",[t._t("link-text")],2),t._v(" "),t.badge?a("div",{staticClass:"pl-1 ml-auto"},[a("div",{staticClass:"badge",class:t.badgeClass},[t._v(t._s(t.badge))])]):t._e()]),t._v(" "),a("div",{staticClass:"sidenav-menu"},[t._t("default")],2)])},[],!1,null,null,null).exports,f=Object(o.a)({name:"sidenav-header"},function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"sidenav-header"},[this._t("default")],2)},[],!1,null,null,null).exports,g=Object(o.a)({name:"sidenav-block"},function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"sidenav-block"},[this._t("default")],2)},[],!1,null,null,null).exports,v=Object(o.a)({name:"sidenav-divider"},function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"sidenav-divider"})},[],!1,null,null,null).exports;a.d(e,"a",function(){return l}),a.d(e,"e",function(){return d}),a.d(e,"g",function(){return h}),a.d(e,"f",function(){return m}),a.d(e,"d",function(){return f}),a.d(e,"b",function(){return g}),a.d(e,"c",function(){return v})},wDSl:function(t,e){},wfYm:function(t,e){},x8dU:function(t,e){},xF2Z:function(t,e,a){"use strict";var n=a("PikB"),i=a("JJbb"),s=a("Saf8");e.a={getUserList:function(t){return n.a.get("AdProfiles/getUserList",{params:t})},getPositionList:function(){return n.a.get("AdProfiles/getPositionList")},getDepartmentList:function(){return n.a.get("AdProfiles/getDepartmentList")},getPositionListByDepartment:function(t){return n.a.get("AdProfiles/getPositionListByDepartment",{params:t})},getAllPositionByDepartmentIds:function(t){return n.a.get("/AdProfiles/getAllPositionByDepartmentIds",{params:t})},getDutiesList:function(){return n.a.get("AdProfiles/getDutiesList")},suggestDutyByPosition:function(t){var e={position_id:t};return n.a.get("AdProfiles/suggestDutyByPosition",{params:e})},updateMainProfile:function(t){return n.a.post("AdProfiles/updateMainProfile",t)},deleteProfile:function(t){return n.a.post("AdMasterProfile/deleteProfile",{master_id:t})},getMasterProfileList:function(t){return n.a.get("AdProfiles/getMasterProfileList",{params:t})},getUsersByMasterProfileId:function(t){return n.a.get("AdProfiles/getUsersByMasterProfileId",{params:t})},searchProfile:function(t){return n.a.get("AdProfiles/searchProfile",{params:t})},confirmProfile:function(t){return n.a.post("/AdMasterProfile/confirmProfile",t)},addExistUserIntoMasterProfile:function(t){return n.a.post("/AdMasterProfile/addExistUser",t)},updateDocuments:function(t){return n.a.post("AdMasterProfile/updateDocuments",t)},getLogs:function(t){return n.a.get("AdMasterProfile/getLogs",{params:t})},resign:function(t){return n.a.post("AdMasterProfile/resign",t)},updateDocumentFiles:function(t){return n.a.post("AdMasterProfile/updateDocumentFiles",t)},getDocumentFile:function(t){return n.a.get("AdMasterProfile/getDocumentFile",{params:t})},existedFieldValue:function(t){return n.a.get("AdMasterProfile/existedFieldValue",{params:t})},exportMasterProfile:function(t){return n.a.get("AdProfiles/exportMasterProfileList",{params:t})},exportMasterProfileImage:function(t){return n.a.get("AdProfiles/exportMasterProfileImage",{params:t})},exportRank:function(t){return n.a.get("AdProfiles/exportRank",{params:t})},getPermissionExportMasterProfile:function(){return n.a.get("AdProfiles/getPermissionExportMasterProfile")},getTitlesToExportMasterProfile:function(){return n.a.get("AdProfiles/getTitlesToExportMasterProfile")},checkJobStatus:function(t){return n.a.get("AdProfiles/checkJobStatus",{params:t})},checkJobImportStatus:function(t){return n.a.get("AdProfiles/checkJobImportStatus",{params:t})},cancelResign:function(t){return n.a.post("AdMasterProfile/cancelResign",t)},uploadImage:function(t){return n.a.post("AdProfiles/uploadImage",t)},transferImageProfileFromGallery:function(t){return n.a.post("AdProfiles/transferImageProfileFromGallery",t)},getGalleryProfile:function(t){return n.a.get("AdProfiles/getGalleryProfile",{params:t})},getGroupList:function(t){return n.a.get("AdProfiles/getGroupList",{params:t})},exportAtmTemplate:function(t){return n.a.get("AdProfiles/exportAtmTemplate",{params:t})},getListStaff:function(t){return i.a.get("ErpUsers/getListStaff",{params:t})},controlUserApp:function(t){return i.a.post("ErpUsers/controlUserApp",t)},getPhoneNumberByUserId:function(t){return i.a.get("ErpUsers/getPhoneNumberByUserId",{params:t})},addTemplate:function(t){return i.a.post("ErpTemplate/addTemplate",t)},deleteTemplate:function(t){return i.a.post("ErpTemplate/deleteTemplate",t)},changeStatusTemplate:function(t){return i.a.post("ErpTemplate/changeStatusTemplate",t)},downloadFile:function(t){return i.a.post("ErpTemplate/downloadFile",t)},getListKey:function(){return i.a.get("ErpAccessToken/getListKey")},updateKey:function(t){return i.a.post("ErpAccessToken/updateKey",t)},addKey:function(t){return i.a.post("ErpAccessToken/addKey",t)},deleteKey:function(t){return i.a.post("ErpAccessToken/deleteKey",t)},checkPermissionManage:function(){return i.a.get("ErpTemplate/checkPermissionManage")},verifiedProfile:function(t){return n.a.post("AdMasterProfile/verifiedProfile",t)},quickCreateUser:function(t){return n.a.post("AdMasterProfile/addProfileAndUserByDistribute",t)},getOriginImage:function(t){return n.a.post("AdMasterProfile/getRealIdentifyImage",t)},getListMemberCoporations:function(){return n.a.get("AdMasterProfile/getListMemberCorporations")},getListUserSwapDxteam:function(t){return n.a.get("AdProfiles/getListUserSwapDxteam",{params:t})},swapUserDxteam:function(t){return n.a.post("AdProfiles/swapUserDxteam",t)},getConfigPlanDteam:function(){return n.a.post("AdProfiles/getConfigPlanDteam")},saveConfigPlanDteam:function(t){return n.a.post("AdProfiles/saveConfigPlanDteam",t)},getProfileForPrint:function(t){return n.a.get("AdMasterProfile/getProfileForPrint",{params:t})},updateFullname:function(t){return n.a.post("/users/updateFullname",t)},getCommitProfiles:function(t){return n.a.get("/AdProfiles/getCommitProfiles",{params:t})},createDraftCommit:function(t){return n.a.post("/AdProfiles/createDraftCommit",t)},exportContract:function(t){return n.a.get("AdProfiles/exportContractList",{params:t})},saveConfigForceWallet:function(t){return n.a.post("AdMasterProfile/saveConfigForceWallet",t)},getEkycInfo:function(t){return n.a.get("AdProfiles/getEkycInfo",{params:t})},reportWrongEkycData:function(t){return n.a.post("AdProfiles/reportWrongEkycData",t)},apiGetClearFile:function(t){return n.a.get("/AdMasterProfile/apiGetClearFile",{params:t})},getDataCheckCreateCommitDraft:function(t){return n.a.get("/AdProfiles/getDataCheckCreateCommitDraft",{params:t})},getByCardId:function(t){return s.a.get("master-profile/get-by-card-id",{params:t})},getRawInfo:function(t){return s.a.get("profile-user/get-raw-info",{params:t})},downloadSensitiveData:function(t){return s.a.post("master-profile/download-sensitive-data",t)},downloadFileSensitive:function(t){return s.a.get("master-profile/download-file-sensitive",{params:t})}}},xFSM:function(t,e){},xGAS:function(t,e){},xH6Y:function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"e",function(){return i}),e.b=function(t,e){return e.split(".").reduce(function(t,e){return t===Object(t)?t[e]:t},t)},e.c=function(t,e){return s(t,e.keyCode)},e.d=s;var n={selectionUp:[38],selectionDown:[40],select:[13],hideList:[27],showList:[40],autocomplete:[32,13]},i={input:String,select:Object};function s(t,e){if(t.length<=0)return!1;var a=function(t){return t.some(function(t){return t===e})};return Array.isArray(t[0])?t.some(function(t){return a(t)}):a(t)}},xT3c:function(t,e,a){"use strict";var n=a("PikB");e.a={getAllStation:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return n.a.get("AdStations/getAllStation",{params:t})},getStationListByProvinceId:function(t){return n.a.get("AdStations/getStationListByProvinceId",{params:t})},getStationListByRegionId:function(t){return n.a.get("AdStations/getStationListByRegionId",{params:t})},getAllStationByProvinceIds:function(t){return n.a.get("AdStations/getAllStationByProvinceIds",{params:t})},getAllStationByIds:function(t){return n.a.get("AdStations/getAllStationByIds",{params:t})},getAllStationByDistrictIds:function(t){return n.a.get("AdStations/getAllStationByDistrictIds",{params:t})},getListStationByProvinceIds:function(t){return n.a.get("AdStations/getListStationByProvinceIds",{params:t})},getStationInfo:function(t){return n.a.get("AdStations/getStationInfo",{params:t})}}},xfyg:function(t,e){},xt1G:function(t,e,a){"use strict";var n,i=a("Xxa5"),s=a.n(i),o=a("//Fk"),r=a.n(o),l=a("exGp"),c=a.n(l),d=a("mtWM"),u=a.n(d),h=a("4WGu"),p=a("hC/b"),m=a("fEi7"),f=a("vfns"),g=a("R1Q+"),v=this,_=new f.a("local"),b=new f.a("session",!1),y=!p.a.isInIframe(),C=0,w=(n=c()(s.a.mark(function t(e){var a,n,i,o,l,c;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e.response,n=a.status,i=a.data,t.t0=n,t.next=400===t.t0?4:401===t.t0?5:402===t.t0?29:404===t.t0?30:405===t.t0?31:419===t.t0?32:500===t.t0?33:34;break;case 4:return t.abrupt("break",35);case 5:if(y){t.next=16;break}if(!(1109===i.code||i.errors&&i.errors.includes(1109))){t.next=9;break}return t.next=9,m.a.refreshToken();case 9:if(!(o=m.a.getToken())||0!==C){t.next=14;break}return++C,e.config.headers.GchatToken=o,t.abrupt("return",u.a.request(e.config));case 14:t.next=28;break;case 16:if((l=b.get("isReload"))&&"false"!==l){t.next=28;break}return _.remove(h.a.oidc.tokenIamStorage),b.set("isReload",!0),c=Object(g.a)(h.a.oidc),t.prev=21,t.next=24,c.run(window.location.href);case 24:t.next=28;break;case 26:t.prev=26,t.t1=t.catch(21);case 28:case 29:case 30:case 31:case 32:case 33:case 34:return t.abrupt("break",35);case 35:return t.abrupt("return",r.a.reject(e));case 36:case"end":return t.stop()}},t,v,[[21,26]])})),function(t){return n.apply(this,arguments)}),k=u.a.create({baseURL:h.a.domainHrmTicket});k.interceptors.request.use(function(t){var e=_.get(h.a.oidc.tokenIamStorage);if(e&&e.accessToken&&(t.headers.Authorization=h.a.bearerKey+" "+e.accessToken.accessToken),!y){var a=m.a.getToken();a&&(t.headers.GchatToken=a)}return t}),k.interceptors.response.use(function(t){return C=0,t},w);var x=k;e.a={getCountSosTicket:function(t){return x.get("/sos/api/need-handle/get-count",{params:t})},getCountClosingShiftSos:function(t){return x.get("/sos/api/closing-shift/get-count",{params:t})},getUnionTypes:function(){return x.get("hrorder/api/union/type/list")},getUnionOffers:function(t){return x.get("hrorder/api/union/list",{params:t})},getUnionOffer:function(t){return x.get("hrorder/api/union/detail",{params:t})},changeStatusUnionOffer:function(t){return x.post("hrorder/api/union/admin/change-status",t)},getLogs:function(t){return x.get("hrorder/api/union/get-log",{params:t})},getStatisticUnion:function(){return x.get("hrorder/api/union/count")},createUnionOffer:function(t){return x.post("hrorder/api/union/admin/create",t)}}},xtwg:function(t,e,a){"use strict";var n={get _layoutHelpers(){return window.layoutHelpers},_exec:function(t){return this._layoutHelpers&&t()},getLayoutSidenav:function(){var t=this;return this._exec(function(){return t._layoutHelpers.getLayoutSidenav()})||null},getSidenav:function(){var t=this;return this._exec(function(){return t._layoutHelpers.getSidenav()})||null},getLayoutNavbar:function(){var t=this;return this._exec(function(){return t._layoutHelpers.getLayoutNavbar()})||null},getLayoutFooter:function(){var t=this;return this._exec(function(){return t._layoutHelpers.getLayoutFooter()})||null},getLayoutContainer:function(){var t=this;return this._exec(function(){return t._layoutHelpers.getLayoutContainer()})||null},isSmallScreen:function(){var t=this;return this._exec(function(){return t._layoutHelpers.isSmallScreen()})},isLayout1:function(){var t=this;return this._exec(function(){return t._layoutHelpers.isLayout1()})},isCollapsed:function(){var t=this;return this._exec(function(){return t._layoutHelpers.isCollapsed()})},isFixed:function(){var t=this;return this._exec(function(){return t._layoutHelpers.isFixed()})},isOffcanvas:function(){var t=this;return this._exec(function(){return t._layoutHelpers.isOffcanvas()})},isNavbarFixed:function(){var t=this;return this._exec(function(){return t._layoutHelpers.isNavbarFixed()})},isFooterFixed:function(){var t=this;return this._exec(function(){return t._layoutHelpers.isFooterFixed()})},isReversed:function(){var t=this;return this._exec(function(){return t._layoutHelpers.isReversed()})},setCollapsed:function(t){var e=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._exec(function(){return e._layoutHelpers.setCollapsed(t,a)})},toggleCollapsed:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._exec(function(){return t._layoutHelpers.toggleCollapsed(e)})},setPosition:function(t,e){var a=this;this._exec(function(){return a._layoutHelpers.setPosition(t,e)})},setNavbarFixed:function(t){var e=this;this._exec(function(){return e._layoutHelpers.setNavbarFixed(t)})},setFooterFixed:function(t){var e=this;this._exec(function(){return e._layoutHelpers.setFooterFixed(t)})},setReversed:function(t){var e=this;this._exec(function(){return e._layoutHelpers.setReversed(t)})},update:function(){var t=this;this._exec(function(){return t._layoutHelpers.update()})},setAutoUpdate:function(t){var e=this;this._exec(function(){return e._layoutHelpers.setAutoUpdate(t)})},on:function(t,e){var a=this;this._exec(function(){return a._layoutHelpers.on(t,e)})},off:function(t){var e=this;this._exec(function(){return e._layoutHelpers.off(t)})},init:function(){var t=this;this._exec(function(){return t._layoutHelpers.init()})},destroy:function(){var t=this;this._exec(function(){return t._layoutHelpers.destroy()})},_removeClass:function(t){var e=this;this._exec(function(){return e._layoutHelpers._removeClass(t)})}},i=a("4WGu");e.a=function(){return{layoutHelpers:n,get isRTL(){return"rtl"===document.documentElement.getAttribute("dir")||"rtl"===document.body.getAttribute("dir")},get isIE(){return"number"==typeof document.documentMode},get isIE10(){return this.isIE&&10===document.documentMode},get layoutNavbarBg(){return"navbar-theme"},get layoutSidenavBg(){return"primary-dark sidenav-dark bg-sidenav-theme"},get layoutFooterBg(){return"footer-theme"},get baseUrl(){return i.a.baseUrl},scrollTop:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.scrollingElement||document.documentElement;if(a.scrollTop!==t){var n=a.scrollTop,i=t-n,s=+new Date;!function o(){var r,l,c,d=+new Date-s;a.scrollTop=parseInt((r=d,l=n,c=i,(r/=e/2)<1?c/2*r*r+l:-c/2*(--r*(r-2)-1)+l)),d<e?requestAnimationFrame(o):a.scrollTop=t}()}}}}},xvYD:function(t,e){},yQFU:function(t,e,a){"use strict";var n=a("Saf8");e.a={getListTopics:function(t){return n.a.get("/tag-subjects/index",{params:t})},getListTags:function(t){return n.a.get("/tags/index",{params:t})},getDataTopics:function(t){return n.a.get("/tag-subjects/list-tag",{params:t})},changeTagCategories:function(t){return n.a.post("/tag-categories/update-tagging",t)},ApiAddTopicAndTag:function(t){return n.a.post("/tag-subjects/create",t)},ApiUpdateTopicAndTag:function(t){return n.a.post("/tag-subjects/update",t)},ApiDeleteCategory:function(t){return n.a.post("/tag-categories/delete",t)},getAllPositionByDepartmentIds:function(t){return n.a.get("/tag-subjects/list-position",{params:t})},getListCategoryByUser:function(t){return n.a.get("/tag-categories/list-category-by-user",{params:t})},getListTagByCategory:function(t){return n.a.get("tags/list-tag-by-category",{params:t})},apiChangeTagStaffs:function(t){return n.a.post("/tag-staffs/update-tag-staff",t)}}},yQeu:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("qkSh"),i=a("5vjp"),s=a("F/2K"),o=a("a/7L"),r=a("YlZe"),l=a("csCE"),c=a("l48y"),d=a("ufke"),u=a("s5Jn"),h=a("PbY7"),p=a("poZo"),m=a("PJh5"),f=a.n(m),g=a("RUzx"),v=a.n(g),_=a("Dd8w"),b=a.n(_),y=a("Xxa5"),C=a.n(y),w=a("exGp"),k=a.n(w),x=a("q75W"),S=a("hC/b"),M=a("3m8s"),T=a("/b0+"),D=a("DbLI"),I=a("TyzE"),P=a("bkph"),E=a("3BrW"),L={name:"MultiSelectRewardPenaltyStatus",components:{Multiselect:v.a},props:{autoClose:{default:!0},hideSelected:{default:!0},limitProp:{default:5},isDisabled:{default:!1},placeholder:{default:"Trạng thái"},customClass:{default:"multiselect-ghtk"},rewardPenaltyType:{default:x.a.rewardPenaltyTypes.type_reward_collective}},watch:{rewardPenaltyType:function(t){t===x.a.rewardPenaltyTypes.type_penalty_card?this.options=this.optionsForPenalty:this.options=this.optionsForReward}},data:function(){return{option:null,optionsForReward:[{id:0,name:"Đề xuất"},{id:1,name:"Từ chối"},{id:2,name:"Duyệt bởi quản lý"},{id:3,name:"Duyệt bởi TBP/BGĐ"},{id:7,name:"Duyệt bởi Khối Nhân sự"}],optionsForPenalty:[{id:5,name:"Chốt phạt"},{id:6,name:"Bỏ phạt"}],options:[]}},methods:{handleInput:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&(this.option=t),this.$emit("onChangeStatus",this.option)}},created:function(){this.rewardPenaltyType===x.a.rewardPenaltyTypes.type_penalty_card?this.options=this.optionsForPenalty:this.options=this.optionsForReward}},A=a("XyMi");var O=function(t){a("kQz9")},N=Object(A.a)(L,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{class:t.customClass,attrs:{options:t.options,multiple:!0,placeholder:t.placeholder,label:"name","track-by":"id","selected-label":"","deselect-label":"X","select-label":"",disabled:t.isDisabled,limit:t.limitProp,"hide-selected":t.hideSelected,"close-on-select":t.autoClose},on:{input:t.handleInput},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,O,"data-v-264ba668",null).exports,R={name:"PenaltyCardInfo",props:{proposal:{type:Object,default:function(){return{}}}},data:function(){return{staffInfo:{defaultAvatar:"https://cache.giaohangtietkiem.vn/d/b04440d8dc4a05f744f1680ad42ecd1c.jpg?width=450&height=450"},tags:[]}},watch:{proposal:function(){this.mapTags()}},created:function(){this.mapTags()},methods:{formatDateTime:function(t,e){return S.a.formatDate(t,e)},colorPenaltyCard:function(t){return"card-"+t},mapTags:function(){if(this.tags=[],0!==this.proposal.length){switch(this.proposal.category){case"red_card":this.tags.push({name:this.proposal.category_name,type:"red"});break;case"yellow_card":this.tags.push({name:this.proposal.category_name,type:"yellow"})}switch(this.proposal.status){case 5:this.tags.push({name:this.proposal.status_name,type:"green"});break;case 6:this.tags.push({name:this.proposal.status_name,type:"gray"})}}}}};var U=function(t){a("8Yjz")},$=Object(A.a)(R,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"d-flex justify-content-between"},[a("div",{staticClass:"profile mt-1 mr-2 mb-1"},[a("img",{staticClass:"img-circle image-gallery mr-2",attrs:{alt:"avatar",src:t.proposal.user_info.image_profile?t.proposal.user_info.image_profile:t.staffInfo.defaultAvatar}}),t._v(" "),a("div",{staticClass:"d-inline-block"},[a("div",{staticClass:"text-black member-info font-weight-600"},[t._v(t._s(t.proposal.user_info.fullname)+"\n          ("+t._s(t.proposal.user_info.username)+")\n        ")]),t._v(" "),a("div",{staticClass:"text-black position"},[t._v("\n          "+t._s(t.proposal.user_info.position_name)+" - "+t._s(t.proposal.user_info.station_name)+"\n        ")]),t._v(" "),a("div",{staticClass:"fines mt-1"},[a("span",{staticClass:"fine-amount"},[t._v("Mức phạt: ")]),t._v(" "),a("span",{staticClass:"cash-payment"},[t._v(t._s(t.proposal.recompense_level_name)+" - ")]),t._v(" "),a("span",{staticClass:"price"},[t._v("\n            "+t._s(t.proposal.recompense_value)+" "+t._s(t.proposal.value_unit)+" "+t._s("%"===t.proposal.value_unit?"Lương":"")+"\n          ")])]),t._v(" "),a("div",{staticClass:"penalty-day mt-1"},[a("span",{staticClass:"label"},[t._v("Ngày phạt")]),t._v(" "),a("span",{staticClass:"separator"},[t._v(": ")]),t._v(" "),a("span",{staticClass:"date-value"},[t._v(t._s(t.formatDateTime(t.proposal.date_key,"DD/MM/YYYY")))])])])]),t._v(" "),a("div",{staticClass:"btn-profile p-2"},[a("button",{staticClass:"button-content",on:{click:function(e){return t.$emit("viewInfo")}}},[t._v("\n        Xem\n      ")])])]),t._v(" "),a("h6",{staticClass:"text-ghtk mb-1 mt-1 font-14 font-weight-600"},[t._v("Ngày tạo đề xuất: "+t._s(t.formatDateTime(t.proposal.created,"DD/MM/YYYY")))]),t._v(" "),a("div",{staticClass:"d-flex flex-wrap mt-2"},t._l(t.tags,function(e,n){return a("h6",{key:n,staticClass:"tag p-1 w-max-content text-white d-flex justify-content-center align-center text-center mr-2",class:t.colorPenaltyCard(e.type)},[t._v("\n      "+t._s(e.name)+"\n    ")])}),0)])},[],!1,U,"data-v-1298d3a1",null).exports,H={name:"ProposalLogs",props:{dataLogs:{type:Array,default:function(t){return[]}}},data:function(){return{page:1,limit:10,isLoading:!1,stopLoadData:!1,proposalLogsId:"proposal-logs"}},methods:{hiddenAntTimeline:function(t){return t===this.dataLogs.length-1?"d-none":""}},created:function(){this.unionLogsId=S.a.generateUniqueId(this.unionLogsId)}};var B=function(t){a("EZi6")},j=Object(A.a)(H,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:t.proposalLogsId,staticClass:"log-detail h-25 ml-1"},[a("ul",{staticClass:"ant-timeline ms-1"},[t._l(t.dataLogs,function(e,n){return a("li",{key:n,staticClass:"ant-timeline-item"},[a("div",{staticClass:"ant-timeline-item-tail",class:t.hiddenAntTimeline(n)}),t._v(" "),a("div",{staticClass:"ant-timeline-item-head ant-timeline-item-head-blue"}),t._v(" "),a("div",{staticClass:"ant-timeline-item-content"},[a("span",{staticClass:"time-log text-black",domProps:{innerHTML:t._s(e)}})])])}),t._v(" "),a("li",{directives:[{name:"show",rawName:"v-show",value:0===t.dataLogs.length,expression:"dataLogs.length === 0"}]},[a("div",{staticClass:"text-center"},[t._v("Không có dữ liệu logs!")])])],2),t._v(" "),t.isLoading?a("div",[a("em",{staticClass:"fa fa-spin fa-spinner"})]):t._e()])},[],!1,B,"data-v-87bafa24",null).exports,F={name:"RewardPersonalInfo",props:{proposal:{type:Object,default:function(){return{}}}},data:function(){return{staffInfo:{defaultAvatar:"https://cache.giaohangtietkiem.vn/d/b04440d8dc4a05f744f1680ad42ecd1c.jpg?width=450&height=450"},tags:[]}},watch:{proposal:function(){this.mapTags()}},created:function(){this.mapTags()},computed:{RewardPenalty:function(t){return x.a}},methods:{formatDateTime:function(t,e){return S.a.formatDate(t,e)},colorPenaltyCard:function(t){return"card-"+t},mapTags:function(){if(this.tags=[],0!==this.proposal.length)switch(this.tags.push({name:this.proposal.category_name,type:"green"}),this.proposal.status){case 0:case 2:this.tags.push({name:this.proposal.status_name,type:"orange"});break;case 1:this.tags.push({name:this.proposal.status_name,type:"red"});break;case 3:case x.a.rewardStatus.confirm_by_hr:this.tags.push({name:this.proposal.status_name,type:"green"})}}}};var q=function(t){a("+tAL")},Y=Object(A.a)(F,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"d-flex justify-content-between"},[a("div",{staticClass:"profile mt-1 mr-2 mb-1"},[a("img",{staticClass:"img-circle image-gallery mr-2",attrs:{alt:"avatar",src:t.proposal.user_info.image_profile?t.proposal.user_info.image_profile:t.staffInfo.defaultAvatar}}),t._v(" "),a("div",{staticClass:"d-inline-block"},[a("div",{staticClass:"text-black member-info font-weight-600"},[t._v(t._s(t.proposal.user_info.fullname)+"\n          ("+t._s(t.proposal.user_info.username)+")\n        ")]),t._v(" "),a("div",{staticClass:"text-black position"},[t._v("\n          "+t._s(t.proposal.user_info.position_name)+" - "+t._s(t.proposal.user_info.station_name)+"\n        ")]),t._v(" "),a("div",{staticClass:"fines mt-1"},[a("span",{staticClass:"fine-amount"},[t._v("Mức thưởng: ")]),t._v(" "),a("span",{staticClass:"cash-payment"},[t._v(t._s(t.proposal.recompense_level_name))]),t._v(" "),t.proposal.recompense_level!==t.RewardPenalty.optionLevelKeys.honors?a("span",[t._v(" - ")]):t._e(),t._v(" "),t.proposal.recompense_level!==t.RewardPenalty.optionLevelKeys.honors?a("span",{staticClass:"price"},[t._v("\n            "+t._s(t.proposal.recompense_value)+" "+t._s(t.proposal.value_unit)+" "+t._s("%"===t.proposal.value_unit?"Lương":"")+"\n          ")]):t._e()]),t._v(" "),a("div",{staticClass:"penalty-day mt-1"},[a("span",{staticClass:"label"},[t._v("Ngày thưởng")]),t._v(" "),a("span",{staticClass:"separator"},[t._v(": ")]),t._v(" "),a("span",{staticClass:"date-value"},[t._v(t._s(t.formatDateTime(t.proposal.date_key,"DD/MM/YYYY")))])])])]),t._v(" "),a("div",{staticClass:"btn-profile p-2"},[a("button",{staticClass:"button-content",on:{click:function(e){return t.$emit("viewInfo")}}},[t._v("\n        Xem\n      ")])])]),t._v(" "),a("h6",{staticClass:"text-ghtk mb-1 mt-1 font-14 font-weight-600"},[t._v("Ngày tạo đề xuất: "+t._s(t.formatDateTime(t.proposal.created,"DD/MM/YYYY")))]),t._v(" "),a("div",{staticClass:"d-flex flex-wrap mt-2"},t._l(t.tags,function(e,n){return a("h6",{key:n,staticClass:"tag p-1 w-max-content text-white d-flex justify-content-center align-center text-center mr-2",class:t.colorPenaltyCard(e.type)},[t._v("\n      "+t._s(e.name)+"\n    ")])}),0)])},[],!1,q,"data-v-6f319e8b",null).exports,z={name:"RewardCollectiveInfo",props:{proposal:{type:Object,default:function(){return{}}}},data:function(){return{staffInfo:{defaultAvatar:"https://cache.giaohangtietkiem.vn/d/b04440d8dc4a05f744f1680ad42ecd1c.jpg?width=450&height=450"},tags:[]}},watch:{proposal:function(){this.mapTags()}},computed:{RewardPenalty:function(t){return x.a}},created:function(){this.mapTags()},methods:{formatDateTime:function(t,e){return S.a.formatDate(t,e)},colorPenaltyCard:function(t){return"card-"+t},mapTags:function(){if(this.tags=[],0!==this.proposal.length)switch(this.tags.push({name:this.proposal.category_name,type:"green"}),this.proposal.status){case 0:case 2:this.tags.push({name:this.proposal.status_name,type:"orange"});break;case 1:this.tags.push({name:this.proposal.status_name,type:"red"});break;case 3:case x.a.rewardStatus.confirm_by_hr:this.tags.push({name:this.proposal.status_name,type:"green"})}}}};var G=function(t){a("zut0")},K=Object(A.a)(z,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"d-flex justify-content-between"},[a("div",{staticClass:"profile mt-1 mr-2 mb-1 d-inline-block text-black"},[a("h5",{staticClass:"mb-1 font-14"},[a("strong",[t._v(t._s(t.proposal.group_name))])]),t._v(" "),a("p",{staticClass:"mb-1"},[a("strong",[t._v("Đại diện: ")]),t._v(" "),a("span",{staticClass:"text-black"},[t._v(t._s(t.proposal.user_info.fullname)+" ("+t._s(t.proposal.user_info.username)+")")])]),t._v(" "),a("p",{staticClass:"mb-1"},[a("strong",[t._v("Số lượng thành viên: ")]),t._v(t._s(t.proposal.members_count))]),t._v(" "),a("p",{staticClass:"fines mb-1"},[a("span",{staticClass:"fine-amount"},[t._v("Mức thưởng: ")]),t._v(" "),a("span",{staticClass:"cash-payment"},[t._v(t._s(t.proposal.recompense_level_name))]),t._v(" "),t.proposal.recompense_level!==t.RewardPenalty.optionLevelKeys.honors?a("span",[t._v(" - ")]):t._e(),t._v(" "),t.proposal.recompense_level!==t.RewardPenalty.optionLevelKeys.honors?a("span",{staticClass:"price"},[t._v("\n          "+t._s(t.proposal.recompense_value)+" "+t._s(t.proposal.value_unit)+" "+t._s("%"===t.proposal.value_unit?"Lương":"")+"\n        ")]):t._e()]),t._v(" "),a("p",{staticClass:"penalty-day mb-1"},[a("span",{staticClass:"label"},[t._v("Ngày thưởng")]),t._v(" "),a("span",{staticClass:"separator"},[t._v(": ")]),t._v(" "),a("span",{staticClass:"date-value"},[t._v(t._s(t.formatDateTime(t.proposal.date_key,"DD/MM/YYYY")))])])]),t._v(" "),a("div",{ref:"btnViewInfo",staticClass:"btn-profile p-2"},[a("button",{staticClass:"button-content",on:{click:function(e){return t.$emit("viewInfo")}}},[t._v("\n        Xem\n      ")])])]),t._v(" "),a("h6",{staticClass:"text-ghtk mb-1 mt-1 font-14 font-weight-600"},[t._v("Ngày tạo đề xuất: "+t._s(t.formatDateTime(t.proposal.created,"DD/MM/YYYY")))]),t._v(" "),a("div",{staticClass:"d-flex flex-wrap mt-2"},t._l(t.tags,function(e,n){return a("h6",{key:n,staticClass:"tag p-1 w-max-content text-white d-flex justify-content-center align-center text-center mr-2",class:t.colorPenaltyCard(e.type)},[t._v("\n      "+t._s(e.name)+"\n    ")])}),0)])},[],!1,G,"data-v-82777c34",null).exports,V=a("lBHt"),Q={name:"SingleSelectRewardPenaltyType",components:{Multiselect:v.a},props:{autoClose:{default:!0},hideSelected:{default:!0},isMultiple:{default:!1},disabled:{default:!1},placeholder:{default:"Chọn loại đề xuất"}},data:function(){return{option:{id:x.a.rewardPenaltyTypes.type_reward_collective,name:x.a.labelNumberInput(x.a.rewardPenaltyTypes.type_reward_collective)},options:[{id:x.a.rewardPenaltyTypes.type_reward_personal,name:x.a.labelNumberInput(x.a.rewardPenaltyTypes.type_reward_personal)},{id:x.a.rewardPenaltyTypes.type_reward_collective,name:x.a.labelNumberInput(x.a.rewardPenaltyTypes.type_reward_collective)},{id:x.a.rewardPenaltyTypes.type_penalty_card,name:x.a.labelNumberInput(x.a.rewardPenaltyTypes.type_penalty_card)}]}},methods:{handleInput:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&(this.option=t),this.$emit("onChangeType",this.option)}}},X=Object(A.a)(Q,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{staticClass:"text-black",attrs:{options:t.options,multiple:t.isMultiple,placeholder:t.placeholder,label:"name","track-by":"id",selectedLabel:"",deselectLabel:"",selectLabel:"","close-on-select":t.autoClose,"hide-selected":t.hideSelected,disabled:t.disabled},on:{input:t.handleInput},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,null,null,null).exports,W=a("RP6o"),J=a("GNnm"),Z=a("Osgx"),tt=a("pFYg"),et=a.n(tt),at=a("mvHQ"),nt=a.n(at),it=a("BO1k"),st=a.n(it),ot=a("IC97"),rt=a("HhAh"),lt=a.n(rt),ct=a("phbQ"),dt=a("0XQL"),ut={name:"SingleSelectUserCustomTagName",props:{multiple:!1,resetAfter:{default:!1},user:{type:Object,default:null},inScope:{default:!1},statusId:{default:null},isSelectMainUser:{type:String,default:"no"},reset:{},placeholder:{default:"Nhập ít nhất 2 ký tự"},customClass:{default:"multiselect-primary"},trainingSyllabusId:{default:null},roles:{default:null},isDisabled:{type:Boolean,default:!1},targetApi:{type:String,default:"admin"},convertResult:{type:Boolean,default:!1}},components:{Multiselect:v.a,depositService:u.a,debounce:lt.a},watch:{asyncSelected:function(){this.$emit("onChange",this.asyncSelected)},user:{immediate:!0,handler:function(){this.user&&this.user.id?this.asyncSelected=this.user:this.asyncSelected=null}},reset:function(){this.asyncSelected=null}},data:function(){return{asyncSelected:null,asyncFound:[],asyncLoading:!1,asyncTimeout:null,message:"Nhập ít nhất 2 ký tự"}},computed:{},created:function(){},methods:{asyncFind:lt()(function(t){var e=this;if(t.length<2)return this.asyncFound=[],void(this.message="Nhập ít nhất 2 ký tự");if(this.asyncLoading=!0,this.asyncFound=[],"hrm"===this.targetApi){var a={username:t,mp_status:dt.a.ACTIVE_STATUS};ct.a.searchUser(a).then(function(t){t.data.hasOwnProperty("success")&&(t.data.success?e.asyncFound=t.data.data:e.message="Không tìm thấy kết quả")}).catch(function(){e.message="Không tìm thấy kết quả"}).then(function(){e.asyncLoading=!1})}else u.a.apiGetListUsers({term:t,isSelectMainUser:this.isSelectMainUser,inScope:this.inScope,trainingSyllabusId:this.trainingSyllabusId,statusId:this.statusId,roles:this.roles}).then(function(t){t.data.hasOwnProperty("success")&&(t.data.success?e.asyncFound=e.convertResult?e.convertResultFn(t.data.data):t.data.data:e.message="Không tìm thấy kết quả")}).catch(function(){e.message="Không tìm thấy kết quả"}).then(function(){e.asyncLoading=!1})},500),convertResultFn:function(t){return t.reduce(function(t,e){return e.username=e.name.split(" - ")[0],e.fullName=e.name.split(" - ")[1],t.push({id:e.id,name:e.fullName+" - "+e.username}),t},[])}}},ht=[{value:"%",name:"% Lương"},{value:"VNĐ",name:"VNĐ"}],pt={name:"ModalCreateFStarProposal",components:{SingleSelectUserCustomTagName:Object(A.a)(ut,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{attrs:{label:"name","track-by":"id",placeholder:t.placeholder,options:t.asyncFound,multiple:t.multiple,searchable:!0,loading:t.asyncLoading,"allow-empty":!0,"internal-search":!1,"clear-on-select":!0,"close-on-select":!0,"hide-selected":!1,"selected-label":"","deselect-label":"X","select-label":"",disabled:t.isDisabled,"reset-after":t.resetAfter},on:{"search-change":t.asyncFind,select:function(e){t.$emit("select",e)},remove:function(e){t.$emit("remove",e)}},model:{value:t.asyncSelected,callback:function(e){t.asyncSelected=e},expression:"asyncSelected"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("không có kết quả phù hợp !")]),t._v(" "),a("span",{attrs:{slot:"noOptions"},slot:"noOptions"},[t._v(t._s(t.message))]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,null,null,null).exports,Datepicker:ot.a,Multiselect:v.a},props:{actionModal:{type:null|String,default:null},dataReward:{type:null|Object,default:null},fStarType:{type:String,required:!0},typeOptions:{type:Array,required:!0}},computed:{helper:function(t){return S.a},RewardPenalty:function(t){return x.a},idInput:function(){return"input-file-"+Math.random()},convertFStarType:function(){return this.fStarType===x.a.fStarTypes.penalty?"phạt":this.fStarType===x.a.fStarTypes.reward?"thưởng":void 0},viewMode:function(){return"view"===this.actionModal}},watch:{dataReward:function(){this.resetFormModal(),this.handle()},"formModal.recompense_level":function(t){t===x.a.optionLevelKeys.honors&&(this.formModal.recompense_value=null,this.formModal.value_unit=null)}},data:function(){return{accept:"image/*, .pdf, video/*",orderPeriod:1,valueOptionType:ht,optionCategories:[],optionLevels:[],formModal:{userInfo:null,category:null,type:null,value_unit:null,date_key:null,reason:null,recompense_level:null,recompense_value:null,file_path:[],user_id:null,file_old:[]},loading:!1,loadingComponent:!1,titleModalAction:"",reason:"",renderFile:!0,modalActionConfirm:{title:"",content:""},display_pay_period:""}},created:function(){this.initFormDataModal()},methods:{breakLine:function(){this.formModal.reason+="\n"},dateChange:function(t){var e=t.getMonth()+1;t.getDate()>20&&e++,this.display_pay_period="Ngày thưởng "+S.a.formatDate(t,"YYYY-MM-DD")+" thuộc kỳ lương Tháng "+e},unitRewardPenalty:function(){this.formModal.recompense_value&&this.formModal.recompense_value<1&&(this.formModal.recompense_value=1)},showModal:function(){null!==this.dataReward&&"create"!==this.actionModal&&this.handle()},reRenderFile:function(){this.renderFile=!1,this.renderFile=!0},addFile:function(t){var e=t.target.files||t.dataTransfer.files;e.size&&(e=[e]);var a=this.accept.split(", "),n=!0,i=!1,s=void 0;try{for(var o,r=st()(e);!(n=(o=r.next()).done);n=!0){var l=o.value,c=l.type.split("/"),d=l.name.split(".").pop();if(!c||c.length<1)return;a.includes(l.type)||a.includes(c[0]+"/*")||a.includes("."+d)?this.formModal.file_path.push(l):S.a.showMessage("Định dạng file "+l.name+"  không được hỗ trợ !","warning")}}catch(t){i=!0,s=t}finally{try{!n&&r.return&&r.return()}finally{if(i)throw s}}t.target.value=null,this.reRenderFile()},emitSuccess:function(){this.resetFormModal(),this.$bvModal.hide("modal-"+this.fStarType+"-f-star-"+this.actionModal),this.$bvModal.hide("modal-"+this.fStarType+"-confirm-f-star-"+this.actionModal),this.$emit("reloadListFStar")},resetFormModal:function(){this.formModal={category:null,type:null,value_unit:null,date_key:null,reason:null,recompense_level:null,recompense_value:null,file_path:[],user_id:null,file_old:[]}},submit:function(){var t=this;return k()(C.a.mark(function e(){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.formModal.category){e.next=3;break}return S.a.showMessage("Vui lòng chọn loại hình","warning"),e.abrupt("return");case 3:if(t.formModal.recompense_level){e.next=6;break}return S.a.showMessage("Vui lòng chọn mức thưởng/phạt","warning"),e.abrupt("return");case 6:if(void 0===t.formModal.recompense_level||"cash"!==t.formModal.recompense_level){e.next=13;break}if(t.formModal.recompense_value){e.next=10;break}return S.a.showMessage("Vui lòng nhập giá trị thưởng phạt","warning"),e.abrupt("return");case 10:if(t.formModal.value_unit){e.next=13;break}return S.a.showMessage("Vui lòng chọn loại giá trị thưởng/phạt","warning"),e.abrupt("return");case 13:if(t.formModal.type){e.next=16;break}return S.a.showMessage("Vui lòng chọn nội dung thưởng","warning"),e.abrupt("return");case 16:if(t.formModal.date_key){e.next=19;break}return S.a.showMessage("Vui lòng chọn ngày","warning"),e.abrupt("return");case 19:if(t.formModal.reason){e.next=22;break}return S.a.showMessage("Vui lòng nhập lý do","warning"),e.abrupt("return");case 22:if(t.formModal.recompense_level){e.next=25;break}return S.a.showMessage("Vui lòng chọn mức thưởng phạt","warning"),e.abrupt("return");case 25:if(t.formModal.user_id){e.next=28;break}return S.a.showMessage("Vui lòng chọn người dùng","warning"),e.abrupt("return");case 28:if(t.fStarType!==x.a.fStarTypes.penalty){e.next=43;break}if(!(t.formModal.file_old.length<1&&t.formModal.file_path.length<1)){e.next=32;break}return S.a.showMessage("Vui lòng tải lên biên bản","warning"),e.abrupt("return");case 32:if(t.loadingComponent=!0,"create"!==t.actionModal){e.next=38;break}return e.next=36,t.submitCreatePenalty();case 36:e.next=41;break;case 38:if("edit"!==t.actionModal){e.next=41;break}return e.next=41,t.submitEditPenalty();case 41:e.next=53;break;case 43:if(t.fStarType!==x.a.fStarTypes.reward){e.next=53;break}if(t.loadingComponent=!0,"create"!==t.actionModal){e.next=50;break}return e.next=48,t.submitCreateReward();case 48:e.next=53;break;case 50:if("edit"!==t.actionModal){e.next=53;break}return e.next=53,t.submitEditReward();case 53:t.loadingComponent=!1;case 54:case"end":return e.stop()}},e,t)}))()},submitCreateReward:function(){var t=this;return k()(C.a.mark(function e(){var a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.buildFormData(!1),e.next=3,M.a.createReward(a).then(function(e){e.data.success?(S.a.showMessage(e.data.message,"success"),t.emitSuccess()):S.a.showMessage(e.data.message,"error")}).catch(function(t){S.a.showMessage(t.response.data.message,"error")});case 3:case"end":return e.stop()}},e,t)}))()},submitEditReward:function(){var t=this;return k()(C.a.mark(function e(){var a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.buildFormData(!0),e.next=3,M.a.updateReward(a).then(function(e){e.data.success?(S.a.showMessage(e.data.message,"success"),t.emitSuccess()):S.a.showMessage(e.data.message,"error")}).catch(function(t){S.a.showMessage(t.response.data.message,"error")});case 3:case"end":return e.stop()}},e,t)}))()},submitCreatePenalty:function(){var t=this;return k()(C.a.mark(function e(){var a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.buildFormData(!1),e.next=3,M.a.createPenalty(a).then(function(e){e.data.success?(S.a.showMessage(e.data.message,"success"),t.emitSuccess()):S.a.showMessage(e.data.message,"error")}).catch(function(t){S.a.showMessage(t.response.data.message,"error")});case 3:case"end":return e.stop()}},e,t)}))()},submitEditPenalty:function(){var t=this;return k()(C.a.mark(function e(){var a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.buildFormData(!0),e.next=3,M.a.updatePenalty(a).then(function(e){e.data.success?(S.a.showMessage(e.data.message,"success"),t.emitSuccess()):S.a.showMessage(e.data.message,"error")}).catch(function(t){S.a.showMessage(t.response.data.message,"error")});case 3:case"end":return e.stop()}},e,t)}))()},buildFormData:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=new FormData;return e.append("category",this.formModal.category),e.append("type",this.formModal.type.alias),e.append("date_key",S.a.formatDate(this.formModal.date_key,"YYYY-MM-DD")),e.append("reason",this.formModal.reason),e.append("recompense_level",this.formModal.recompense_level),void 0!==this.formModal.recompense_level&&"cash"===this.formModal.recompense_level&&(e.append("recompense_value",this.formModal.recompense_value),e.append("value_unit",this.formModal.value_unit.value)),void 0!==this.formModal.file_path&&this.formModal.file_path.constructor===Array&&this.formModal.file_path.forEach(function(t){t.name&&e.append("file_path[]",t)}),void 0!==this.formModal.file_old&&this.formModal.file_old.constructor===Array&&this.formModal.file_old.forEach(function(t){e.append("file_old[]",t)}),t?e.append("id",this.formModal.id):e.append("user_id",this.formModal.user_id),e},handle:function(){var t=this;this.loading=!0;var e=JSON.parse(nt()(this.dataReward));"create"!==this.actionModal?(this.fStarType===x.a.fStarTypes.reward?(this.titleModalAction="edit"===this.actionModal?"Chỉnh sửa khen thưởng":"Thông tin thưởng",this.modalActionConfirm.title="Xác nhận chỉnh sửa khen thưởng",this.modalActionConfirm.content="Bạn có chắc chắn muốn chỉnh sửa đề xuất thưởng ?"):this.fStarType===x.a.fStarTypes.penalty&&(this.titleModalAction="edit"===this.actionModal?"Chỉnh sửa thẻ phạt":"Thông tin thẻ phạt",this.modalActionConfirm.title="Xác nhận chỉnh sửa thẻ phạt",this.modalActionConfirm.content="Bạn có chắc chắn muốn chỉnh sửa thẻ phạt này ?"),this.formModal=e,this.formModal.userInfo={id:e.user_id,name:e.user_info.fullname+" - "+e.user_info.username},this.formModal.id=e.id,this.formModal.value_unit=this.valueOptionType.find(function(e){return e.value===t.formModal.value_unit}),this.formModal.type=this.typeOptions.find(function(e){return e.alias===t.formModal.type}),this.formModal.recompense_value=parseInt(e.recompense_value.replace(/,/g,""),10),this.formModal.file_path=[],this.formModal.file_old=e.fstar_report,e.recompense_level===x.a.optionLevelKeys.honors&&(this.formModal.recompense_value=null,this.formModal.value_unit=null),"warning"===e.recompense_level&&(this.formModal.recompense_value=null,this.formModal.value_unit=null),this.viewMode?(this.optionCategories.forEach(function(t){t.disabled=t.value!==e.category}),this.optionLevels.forEach(function(t){t.disabled=t.value!==e.recompense_level})):this.enableAllOption()):(this.fStarType===x.a.fStarTypes.reward?(this.titleModalAction="Tạo khen thưởng",this.modalActionConfirm.title="Xác nhận tạo khen thưởng",this.modalActionConfirm.content="Bạn có chắc muốn tạo khen thưởng ?"):this.fStarType===x.a.fStarTypes.penalty&&(this.titleModalAction="Tạo thẻ phạt ",this.modalActionConfirm.title="Xác nhận tạo thẻ phạt",this.modalActionConfirm.content="Bạn có chắc chắn muốn tạo thẻ phạt  ?"),this.formModal.user_id=this.userId,this.enableAllOption()),this.loading=!1},enableAllOption:function(){this.optionLevels.forEach(function(t){t.disabled=!1}),this.optionCategories.forEach(function(t){t.disabled=!1})},deleteFile:function(t){this.formModal.file_path.splice(t,1),this.reRenderFile()},deleteFileOld:function(t){this.formModal.file_old.splice(t,1),this.reRenderFile()},previewImageRender:function(t){if(S.a.isEmpty(t))return"";var e=S.a.getFileType(t);if("doc"===e)return"https://gs.giaohangtietkiem.vn/d/e24bec4ee88441bdb3e79466dd541152.png?height=250";if("object"===(void 0===t?"undefined":et()(t))){if("pdf"===e)return"https://gs.giaohangtietkiem.vn/d/d7d5ef9e764e4227b7aef2c11dfd1371.png?height=250";if("video"===e)return"https://ghtk.me/images/icon-file-video.png?height=250";if("image"===e)return URL.createObjectURL(t)}else if(["pdf","video"].includes(e))return t+"?extract=thumb";return t},initFormDataModal:function(){this.fStarType===x.a.fStarTypes.penalty&&(this.optionLevels=x.a.optionLevels.penalty,this.optionCategories=x.a.optionCategories.penalty),this.fStarType===x.a.fStarTypes.reward&&(this.optionLevels=x.a.optionLevels.reward,this.optionCategories=x.a.optionCategories.reward)}}};var mt=function(t){a("lYvY")},ft=Object(A.a)(pt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{staticClass:"custom-modal",attrs:{id:"modal-"+t.fStarType+"-f-star-"+t.actionModal,size:"lg",scrollable:"","hide-footer":"",title:t.titleModalAction,"header-class":"justify-content-center",centered:""},on:{show:t.showModal}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mb-4"},[a("b-row",{staticClass:"form-group"},[a("b-col",{staticClass:"d-flex align-items-center",attrs:{md:"3"}},[a("label",[a("b",[t._v("Nhân viên "),t.viewMode?t._e():a("span",{staticClass:"text-danger"},[t._v("*")])])])]),t._v(" "),a("b-col",{attrs:{md:"9"}},[a("div",{staticClass:"form-group mb-0 d-flex align-content-center"},[a("SingleSelectUserCustomTagName",{staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{isDisabled:t.viewMode,user:t.formModal.userInfo,convertResult:!0,placeholder:"Chọn nhân viên "+(t.fStarType===t.RewardPenalty.fStarTypes.reward?"được khen thưởng":"bị gán thẻ")},on:{onChange:function(e){t.formModal.user_id=e?e.id:null}}})],1)])],1),t._v(" "),a("b-row",{staticClass:"form-group"},[a("b-col",{attrs:{md:"3"}},[a("label",[a("b",[t._v("Loại hình "+t._s(t.convertFStarType)+" "),t.viewMode?t._e():a("span",{staticClass:"text-danger"},[t._v("*")])])])]),t._v(" "),a("b-col",{attrs:{md:"9"}},[a("b-form-radio-group",{attrs:{options:t.optionCategories},model:{value:t.formModal.category,callback:function(e){t.$set(t.formModal,"category",e)},expression:"formModal.category"}})],1)],1),t._v(" "),a("b-row",{staticClass:"form-group"},[a("b-col",{attrs:{md:"3"}},[a("label",[a("b",[t._v("Mức "+t._s(t.convertFStarType)+" "),t.viewMode?t._e():a("span",{staticClass:"text-danger"},[t._v("*")])])])]),t._v(" "),a("b-col",{attrs:{md:"9"}},[a("b-form-radio-group",{staticClass:"category",attrs:{options:t.optionLevels},model:{value:t.formModal.recompense_level,callback:function(e){t.$set(t.formModal,"recompense_level",e)},expression:"formModal.recompense_level"}})],1)],1),t._v(" "),"cash"===t.formModal.recompense_level?a("b-row",{staticClass:"form-group"},[a("b-col",{staticClass:"d-flex align-items-center",attrs:{md:"3"}},[a("label",[a("b",[t._v("Giá trị "+t._s(t.convertFStarType)+" "),t.viewMode?t._e():a("span",{staticClass:"text-danger"},[t._v("*")])])])]),t._v(" "),a("b-col",{attrs:{md:"9"}},[a("div",{staticClass:"form-group d-flex w-100"},[a("b-row",{staticClass:"w-100 ml-0"},[a("b-col",{staticClass:"pl-0",attrs:{md:"6"}},[a("b-input",{staticClass:"category-value mr-5 w-100",attrs:{disabled:t.viewMode,type:"number",min:"1",placeholder:"Giá trị"},on:{input:t.unitRewardPenalty},model:{value:t.formModal.recompense_value,callback:function(e){t.$set(t.formModal,"recompense_value",e)},expression:"formModal.recompense_value"}})],1),t._v(" "),a("b-col",{staticClass:"pr-0",attrs:{md:"6"}},[a("multiselect",{staticClass:"category-value w-100",attrs:{disabled:t.viewMode,label:"name","track-by":"value",placeholder:"Chọn đơn vị",options:t.valueOptionType,multiple:!1,searchable:!0,"preserve-search":!0,selectLabel:"Chọn",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn"},model:{value:t.formModal.value_unit,callback:function(e){t.$set(t.formModal,"value_unit",e)},expression:"formModal.value_unit"}})],1)],1)],1)])],1):t._e(),t._v(" "),a("b-row",{staticClass:"form-group"},[a("b-col",{staticClass:"d-flex align-items-center",attrs:{md:"3"}},[a("label",[a("b",[t._v("Nội dung "),t.viewMode?t._e():a("span",{staticClass:"text-danger"},[t._v("*")])])])]),t._v(" "),a("b-col",{attrs:{md:"9"}},[a("div",{staticClass:"form-group"},[a("multiselect",{attrs:{disabled:t.viewMode,label:"name","track-by":"alias",placeholder:"Chọn loại "+(t.fStarType===t.RewardPenalty.fStarTypes.reward?"thưởng":"phạt"),options:t.typeOptions,multiple:!1,searchable:!0,loading:t.loading,"preserve-search":!0,selectLabel:"Chọn",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn"},model:{value:t.formModal.type,callback:function(e){t.$set(t.formModal,"type",e)},expression:"formModal.type"}})],1)])],1),t._v(" "),a("b-row",{staticClass:"form-group"},[a("b-col",{staticClass:"d-flex align-items-center",attrs:{md:"3"}},[a("label",{class:t.display_pay_period?"mb-3":"mb-0"},[a("b",[t._v("Ngày "+t._s(t.convertFStarType)+" "),t.viewMode?t._e():a("span",{staticClass:"text-danger"},[t._v("*")])])])]),t._v(" "),a("b-col",{attrs:{md:"9"}},[a("div",{staticClass:"form-group mb-0"},[a("datepicker",{attrs:{disabled:t.viewMode,format:"yyyy-MM-dd",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0,placeholder:"Chọn ngày "+(t.fStarType===t.RewardPenalty.fStarTypes.reward?"thưởng":"phạt")},on:{selected:function(e){return t.dateChange(e)}},model:{value:t.formModal.date_key,callback:function(e){t.$set(t.formModal,"date_key",e)},expression:"formModal.date_key"}})],1),t._v(" "),a("p",{staticClass:"pay-period mb-0 mt-1"},[t._v(t._s(t.display_pay_period))])])],1),t._v(" "),a("b-row",{staticClass:"form-group"},[a("b-col",{staticClass:"d-flex align-items-center",attrs:{md:"3"}},[a("label",[a("b",[t._v("Lý do "+t._s(t.convertFStarType)+" "),t.viewMode?t._e():a("span",{staticClass:"text-danger"},[t._v("*")])])])]),t._v(" "),a("b-col",{attrs:{md:"9"}},[a("div",{staticClass:"form-group"},[a("b-textarea",{attrs:{disabled:t.viewMode,placeholder:"Lý do "+(t.fStarType===t.RewardPenalty.fStarTypes.reward?"thưởng":"phạt"),type:"text"},model:{value:t.formModal.reason,callback:function(e){t.$set(t.formModal,"reason",e)},expression:"formModal.reason"}})],1)])],1),t._v(" "),a("div",{staticClass:"form-group"},[t.fStarType===t.RewardPenalty.fStarTypes.reward?a("label",[a("b",[t._v("Văn bản thưởng ")])]):t._e(),t._v(" "),t.fStarType===t.RewardPenalty.fStarTypes.penalty?a("label",[a("b",[t._v("Biên bản phạt "),t.viewMode?t._e():a("span",{staticClass:"text-danger"},[t._v("*")])])]):t._e(),t._v(" "),t.renderFile?a("div",{staticClass:"list-file"},[t._l(t.formModal.file_old,function(e,n){return[a("div",{key:e+n+"fileClass",staticClass:"square-image"},[t.viewMode?t._e():a("i",{staticClass:"icon ion-md-close-circle cursor-pointer",on:{click:function(e){return t.deleteFileOld(n)}}}),t._v(" "),[a("span",[["pdf","video","image","doc"].includes(t.helper.getFileType(e))?a("img",{attrs:{src:t.previewImageRender(e),alt:""}}):t._e()])]],2)]}),t._v(" "),t._l(t.formModal.file_path,function(e,n){return[a("div",{key:e+n+"fileClass",staticClass:"square-image"},[t.viewMode?t._e():a("i",{staticClass:"icon ion-md-close-circle cursor-pointer",on:{click:function(e){return t.deleteFile(n)}}}),t._v(" "),[a("span",[["pdf","video","image","doc"].includes(t.helper.getFileType(e))?a("img",{attrs:{src:t.previewImageRender(e),alt:""}}):t._e()])]],2)]})],2):t._e(),t._v(" "),t.viewMode?t._e():a("input",{staticClass:"custom-file-input d-none",attrs:{type:"file",multiple:!1,accept:t.accept,id:t.idInput,name:"input_"},on:{input:t.addFile}}),t._v(" "),t.viewMode?t._e():a("label",{staticClass:"custom-label",attrs:{for:t.idInput}},[t._t("label",function(){return[a("div",{staticClass:"rounded cursor-pointer btn btn-outline-success px-3 py-2"},[t._v("+ Thêm file")])]})],2)])],1),t._v(" "),a("div",{staticClass:"mt-1 text-center"},[t.viewMode?t._e():a("button",{staticClass:"btn btn-outline-success mr-4 w-25",attrs:{"data-style":"zoom-out"},on:{click:function(e){return t.$bvModal.hide("modal-"+t.fStarType+"-f-star-"+t.actionModal)}}},[t._v("\n        Hủy\n      ")]),t._v(" "),t.viewMode?t._e():a("button",{staticClass:"btn btn-success ml-4 w-25",attrs:{"data-style":"zoom-out"},on:{click:function(e){return t.$bvModal.show("modal-"+t.fStarType+"-confirm-f-star-"+t.actionModal)}}},[t._v("\n        Xác nhận\n      ")])])]),t._v(" "),a("b-modal",{staticClass:"modal-confirm-f-star",attrs:{id:"modal-"+t.fStarType+"-confirm-f-star-"+t.actionModal,title:t.modalActionConfirm.title,scrollable:"","hide-footer":"","header-class":"justify-content-center",centered:""}},[a("div",{staticClass:"mb-4 text-center"},[t._v("\n      "+t._s(t.modalActionConfirm.content)+"\n    ")]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingComponent,expression:"loadingComponent"}],staticClass:"mt-1 text-center"},[a("button",{staticClass:"btn btn-outline-success mr-4 w-25",attrs:{"data-style":"zoom-out"},on:{click:function(e){return t.$bvModal.hide("modal-"+t.fStarType+"-confirm-f-star-"+t.actionModal)}}},[t._v("\n        Hủy\n      ")]),t._v(" "),a("button",{staticClass:"btn btn-success ml-4 w-25",attrs:{"data-style":"zoom-out"},on:{click:t.submit}},[t._v("\n        Xác nhận\n      ")])])])],1)},[],!1,mt,"data-v-5354bbb4",null).exports,gt={name:"ModalSelectProposalType",props:{modalId:{type:String,default:"modal-select-proposal-type"}},data:function(){return{roleOption:[{text:"Thêm khen thưởng tập thể",value:"collective"},{text:"Thêm khen thưởng cá nhân",value:"personal"},{text:"Thêm thẻ phạt",value:"penalty"}],selected:"collective"}},methods:{confirm:function(){this.$emit("confirm",this.selected),this.$bvModal.hide(this.modalId)},close:function(){this.$bvModal.hide(this.modalId),this.selected="collective"}}};var vt=function(t){a("kvRg")},_t=Object(A.a)(gt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{attrs:{id:t.modalId,title:"Thêm thưởng phạt",scrollable:"","hide-footer":"","body-class":"pl-5 pr-5","header-class":"justify-content-center bd-radius-tr-8 bd-radius-tl-8","content-class":"bd-radius-8",centered:""}},[a("h6",{staticClass:"mb-2 ml-4 mr-4"},[t._v("\n      Vui lòng chọn loại đề xuất muốn thêm\n    ")]),t._v(" "),a("b-form-group",{staticClass:"ml-4 mr-4",attrs:{label:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.ariaDescribedby;return[a("b-form-radio-group",{staticClass:"d-flex flex-column",attrs:{id:"btn-radios-type-proposal",options:t.roleOption,"aria-describedby":n,"button-variant":"outline-ghtk",size:"sm",name:"radio-btn-outline"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})]}}])}),t._v(" "),a("div",{staticClass:"mt-1 text-center"},[a("button",{staticClass:"btn btn-outline-success mr-1 w-25",attrs:{"data-style":"zoom-out"},on:{click:t.close}},[t._v("\n        Đóng\n      ")]),t._v(" "),a("button",{staticClass:"btn btn-ghtk ml-1 w-25",attrs:{"data-style":"zoom-out"},on:{click:t.confirm}},[t._v("\n        Xác nhận\n      ")])])],1)],1)},[],!1,vt,"data-v-544e5d1d",null).exports,bt=a("Gu7T"),yt=a.n(bt),Ct=a("xF2Z"),wt={name:"MultiSelectDepartmentCustomTagName",props:{departmentNames:{default:null},departmentIds:{default:null},autoClose:{default:null},hideSelected:{default:null},placeholder:{default:"Chọn Bộ Phận"},customClass:{default:null},disabled:{default:!1},isMultiple:{default:!0},customTagName:{type:Boolean,default:!1}},components:{Multiselect:v.a},data:function(){return{autoClosed:!0,hideSelect:!1,departmentOption:null,departmentOptions:[]}},created:function(){this.getAllDepartment(),void 0!==this.autoClose&&null!==this.autoClosed&&(this.autoClosed=this.autoClose),void 0!==this.hideSelected&&null!==this.hideSelected&&(this.hideSelect=this.hideSelected)},watch:{hideSelected:function(t,e){this.hideSelect=this.hideSelected},autoClose:function(t,e){this.autoClosed=this.autoClose},departmentNames:function(t,e){t?void 0!==this.departmentOptions&&this.departmentOptions.length>0&&this.setList():this.departmentOption=null},departmentIds:function(t,e){t||(this.departmentOption=null),this.departmentOptions&&this.departmentOptions.length>0&&this.setList()},departmentOption:function(t,e){this.$emit("handleDepartmentSelected",t)}},methods:{getTagName:function(t){return t.length>0?t.reduce(function(t,e){return t.push(e.name),t},[]).join(", "):""},setList:function(){var t=this;if(this.departmentOptions&&0!==this.departmentOptions.length&&(this.departmentNames&&(this.departmentOption=[],this.departmentNames.split(",").forEach(function(e){if(e){var a=t.departmentOptions.find(function(t){return""+t.name===e});a&&t.departmentOption.push(a)}t.departmentOption.push(t.departmentOptions.find(function(t){return""+t.name===e}))})),this.departmentIds&&this.departmentIds.length>0)){this.departmentOption=[];var e=this.departmentIds;Array.isArray(this.departmentIds)||(e=this.departmentIds.split(",")),e.forEach(function(e){var a=t.departmentOptions.find(function(t){return+t.id==+e});a&&t.departmentOption.push(a)})}},getAllDepartment:function(){var t=this;if(sessionStorage.getItem("allDepartment"))return this.departmentOptions=JSON.parse(sessionStorage.getItem("allDepartment")),void this.setList();Ct.a.getDepartmentList().then(function(e){e.data.success&&(t.departmentOptions=e.data.data,t.setList(),sessionStorage.setItem("allDepartment",nt()(t.departmentOptions)))}).catch(function(t){console.log(t)})}}},kt=Object(A.a)(wt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{class:t.customClass,attrs:{options:t.departmentOptions,multiple:t.isMultiple,placeholder:t.placeholder,label:"name","track-by":"id",selectedLabel:"",deselectLabel:"X",selectLabel:"","hide-selected":t.hideSelected,"close-on-select":t.autoClosed,disabled:t.disabled},scopedSlots:t._u([t.customTagName?{key:"selection",fn:function(e){var n=e.values;return e.search,e.isOpen,[n.length?a("span",{staticClass:"multiselect__single"},[t._v("\n      "+t._s(t.getTagName(n))+"\n    ")]):t._e()]}}:null],null,!0),model:{value:t.departmentOption,callback:function(e){t.departmentOption=e},expression:"departmentOption"}},[t._v(" "),a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,null,null,null).exports,xt={name:"MultiSelectPositionCustomTagName",components:{Multiselect:v.a},props:{departmentIds:{default:null},positionIds:{default:null},autoClose:{default:null},hideSelected:{default:null},placeholder:{default:"Chọn vị trí"},disabled:{default:!1},listPosition:{},departmentId:{},isSyllabus:{default:!1},triggerDuplicateChange:{default:!1},isMultiple:{default:!0},excludeDepartment:{type:Array,default:function(){return[]}},notInGroup:{type:Array,default:function(){return[]}},customTagName:{type:Boolean,default:!1}},data:function(){return{option:null,options:[],triggerDuplicate:!1}},created:function(){this.getList(this.departmentIds)},watch:{option:function(t,e){this.$emit("handlePositionSelected",t)},departmentIds:function(t){if(!t)return this.option=null,void(this.options=[]);this.getList(t)},listPosition:{immediate:!0,handler:function(t,e){this.getList(),this.option=null}},departmentId:{immediate:!0,handler:function(t,e){this.getList()}},triggerDuplicateChange:function(t,e){this.triggerDuplicate=t},positionIds:function(t,e){this.triggerDuplicate||this.options&&this.options.length>0&&this.setList()}},methods:{getTagName:function(t){return t.length>0?t.reduce(function(t,e){return t.push(e.name),t},[]).join(", "):""},upTriger:function(){this.triggerDuplicateChange=!1},reset:function(){this.option=null},setList:function(){var t=this;this.positionIds&&this.positionIds.length>0?(this.option=[],this.positionIds.split(",").forEach(function(e){if(e){var a=t.options.find(function(t){return+t.id==+e});a&&t.option.push(a)}})):this.option=null},getList:function(t){var e=this;if(this.departmentIds)return!t&&sessionStorage.getItem("allPosition")?(this.options=JSON.parse(sessionStorage.getItem("allPosition")),this.listPosition&&this.listPosition.length&&this.setListOption(this.listPosition),this.excludeDepartment&&this.excludeDepartment.length>0&&(this.options=this.options.filter(function(t){return!e.excludeDepartment.includes(+t.department_id)})),this.departmentId&&this.setListOptionByDepartmentId(this.departmentId),this.isSyllabus&&this.setListOptionSyllarbus(),this.notInGroup.length>0&&(this.options=this.options.filter(function(t){if(!e.notInGroup.includes(parseInt(t.group_id)))return!0},{notInGroup:this.notInGroup})),void this.setList()):void Ct.a.getAllPositionByDepartmentIds({departmentIds:t,isSyllabus:this.isSyllabus}).then(function(a){a.data.success&&(e.options=a.data.data,e.excludeDepartment&&e.excludeDepartment.length>0&&(e.options=e.options.filter(function(t){return!e.excludeDepartment.includes(+t.department_id)})),e.triggerDuplicate=!1,e.$emit("handleTriggerDuplicateChange",!1),e.setList(),t||sessionStorage.setItem("allPosition",nt()(e.options)),e.listPosition&&e.listPosition.length&&e.setListOption(e.listPosition),e.departmentId&&e.setListOptionByDepartmentId(e.departmentId),e.isSyllabus&&e.setListOptionSyllarbus())}).catch(function(t){console.log(t)})},setListOption:function(t){this.options=this.options.filter(function(e){return!!t.includes(parseInt(e.id))||(!!t.includes(e.id)||void 0)})},setListOptionByDepartmentId:function(t){this.options=this.options.filter(function(e){if(parseInt(t)===parseInt(e.department_id))return!0}),this.setList()},setListOptionSyllarbus:function(){this.options=this.options.filter(function(t){if(1!==parseInt(t.department_id))return!0}),this.setList()}}},St=Object(A.a)(xt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{attrs:{options:t.options,multiple:t.isMultiple,placeholder:t.placeholder,label:"name","track-by":"id",selectedLabel:"",deselectLabel:"X",selectLabel:"","close-on-select":t.autoClose,"hide-selected":t.hideSelected,disabled:t.disabled},scopedSlots:t._u([t.customTagName?{key:"selection",fn:function(e){var n=e.values;return e.search,e.isOpen,[n.length?a("span",{staticClass:"multiselect__single"},[t._v("\n        "+t._s(t.getTagName(n))+"\n      ")]):t._e()]}}:null],null,!0),model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[t._v(" "),a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{attrs:{slot:"noOptions"},slot:"noOptions"},[t._v("Vui lòng chọn bộ phận")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,null,null,null).exports,Mt=a("CpaI"),Tt=a("fwrr"),Dt={name:"MultiSelectProvinceCustomTagName",props:{limit:{default:5},provinceIds:{},autoClose:{default:!1},hideSelect:{default:!1},displayAll:{default:!1},isDisabled:{default:!1},placeholder:{default:"Chọn tỉnh"},preLoad:{default:!0},region:{default:null},customClass:{default:"multiselect-primary"},reset:{default:null},withRegions:{default:!0},triggerDuplicateChange:{default:!1},customTagName:{type:Boolean,default:!1}},components:{Multiselect:v.a},data:function(){return{provinceOption:null,provinceOptions:[]}},created:function(){this.preLoad&&this.getListProvince()},watch:{provinceIds:function(t,e){this.triggerDuplicateChange||(t?this.setList():this.provinceOption=null)},provinceOption:function(t,e){if(this.displayAll)if(!0===(t&&-1===t.id||t&&t.length>1&&-1!==t.findIndex(function(t){return-1===t.id}))){var a=this.provinceOption&&""!==this.provinceOption?this.provinceOption.filter(function(t){return!isNaN(t.id)}):"";this.$emit("handleProvinceSelected",a)}else this.$emit("handleProvinceSelected",t);else this.$emit("handleProvinceSelected",t)},triggerDuplicateChange:function(t,e){this.$emit("handleTriggerDuplicateChange",t)},region:function(t){if(!t)return this.provinceOption=null,void(this.provinceOptions=[]);this.getListProvince()},reset:function(){this.provinceOption=null}},methods:{getTagName:function(t){return t.length>0?t.reduce(function(t,e){return t.push(e.name),t},[]).join(", "):""},setList:function(){var t=this;if(this.provinceIds){this.provinceOption=[];for(var e=this.provinceIds.toString().split(","),a=!0,n=["MN","MB","MT","HN","HCM"],i=0;i<n.length;i++){var s=n[i];e.includes(s)||(a=!1)}return a?(this.provinceOption=[],void this.provinceOption.push({id:-1,name:"Toàn quốc"})):void e.forEach(function(e){var a=t.provinceOptions.find(function(t){return+t.id==+e});a&&t.provinceOption.push(a)})}this.displayAll||this.provinceIds||(this.provinceOption=null)},setDisplayName:function(){this.provinceOptions=this.provinceOptions.map(function(t){var e=null===t.end_date||new Date(t.end_date)>new Date?t.prefix+" "+t.name:t.prefix+" "+t.name+" (Cũ)";return b()({},t,{name:e})})},getAllProvince:function(){var t=this;if(this.region){var e=[{id:-1,name:"Toàn quốc"},{id:"MB",name:"Miền bắc"},{id:"MN",name:"Miền Nam"},{id:"MT",name:"Miền Trung"},{id:"HCM",name:"TP. Hồ Chí Minh"},{id:"HN",name:"TP. Hà Nội"}];if(sessionStorage.getItem("allProvinces")){var a=JSON.parse(sessionStorage.getItem("allProvinces"));return this.displayAll?this.provinceOptions=this.withRegions?[].concat(e,yt()(a)):[].concat(yt()(a)):this.provinceOptions=a,this.setDisplayName(),void this.setList()}Mt.a.getAllProvinceHrmV2().then(function(a){a.data.success&&(t.displayAll?t.provinceOptions=t.withRegions?[].concat(e,yt()(a.data.data)):[].concat(yt()(a.data.data)):(t.provinceOptions=a.data.data,sessionStorage.setItem("allProvinces",nt()(t.provinceOptions))),t.setDisplayName(),t.setList())}).catch(function(t){console.log(t)})}},getProvinceByRegion:function(){var t=this,e=this.region.constructor===Array?this.region.join():this.region;Tt.a.getProvinceByRegion({regions:e}).then(function(e){e&&e.data&&(t.provinceOptions=e.data.data.ProvinceListingV2.data,t.triggerDuplicateChange=!1,t.setDisplayName(),t.setList(),t.$emit("handleProvinceOption",t.provinceOptions.map(function(t){return t.id})))}).catch(function(t){console.log(t)})},getListProvince:function(){this.region?this.getProvinceByRegion():this.getAllProvince()},handleInput:function(t){if(this.displayAll)if(null==t||0===t.length||t.findIndex(function(t){return-1===t.id})===t.length-1)this.provinceOption=[{id:-1,name:"Toàn quốc"}];else{var e=t.filter(function(t){return-1!==t.id});this.provinceOption=e}else this.$emit("input",t)}}};var It=function(t){a("Ia/w")},Pt=Object(A.a)(Dt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{class:t.customClass,attrs:{options:t.provinceOptions,multiple:!0,limit:t.limit,placeholder:t.placeholder,label:"name","track-by":"id",selectedLabel:"","deselect-label":"X",selectLabel:"","close-on-select":t.autoClose,"hide-selected":t.hideSelect,disabled:t.isDisabled},on:{input:function(e){return t.handleInput(t.provinceOption)}},scopedSlots:t._u([t.customTagName?{key:"selection",fn:function(e){var n=e.values;return e.search,e.isOpen,[n.length?a("span",{staticClass:"multiselect__single"},[t._v("\n      "+t._s(t.getTagName(n))+"\n    ")]):t._e()]}}:null],null,!0),model:{value:t.provinceOption,callback:function(e){t.provinceOption=e},expression:"provinceOption"}},[t._v(" "),a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{attrs:{slot:"noOptions"},slot:"noOptions"},[t._v("Vui lòng chọn miền")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,It,"data-v-caed3af4",null).exports,Et={name:"MultiSelectRegionCustomTagName",components:{Multiselect:v.a},props:{isSelectAll:{default:1},autoClose:{default:!1},hideSelected:{default:!1},limitProp:{default:5},isDisabled:{default:!1},regions:{default:null},placeholder:{default:"Chọn miền"},customClass:{default:"multiselect-primary"},selectLabel:{default:"Chọn"},customTagName:{type:Boolean,default:!1}},data:function(){return{option:null,options:[{id:"HN",name:"Hà Nội"},{id:"HCM",name:"Thành Phố HCM"},{id:"MB",name:"Miền Bắc"},{id:"MT",name:"Miền Trung"},{id:"MN",name:"Miền Nam"}]}},created:function(){this.setSelectedOption()},watch:{regions:function(t,e){this.setSelectedOption()},option:function(t,e){this.$emit("handleSelectedRegion",t)}},methods:{getTagName:function(t){return t.length>0?t.reduce(function(t,e){return t.push(e.name),t},[]).join(", "):""},setSelectedOption:function(){var t=this;this.options.length>0&&this.regions?(this.option=[],this.regions.split(",").forEach(function(e){var a=t.options.find(function(t){return""+t.id==""+e});a&&t.option.push(a)})):this.option=null}}};var Lt=function(t){a("TKj7")},At=Object(A.a)(Et,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{class:t.customClass,attrs:{options:t.options,multiple:!0,placeholder:t.placeholder,label:"name","track-by":"id","selected-label":"","deselect-label":"X","select-label":t.selectLabel,disabled:t.isDisabled,limit:t.limitProp,"hide-selected":t.hideSelected,"close-on-select":t.autoClose},on:{input:function(e){t.$emit("input",e)}},scopedSlots:t._u([t.customTagName?{key:"selection",fn:function(e){var n=e.values;return e.search,e.isOpen,[n.length?a("span",{staticClass:"multiselect__single"},[t._v("\n        "+t._s(t.getTagName(n))+"\n      ")]):t._e()]}}:null],null,!0),model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[t._v(" "),a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,Lt,"data-v-cd8d349e",null).exports,Ot=a("xT3c"),Nt={name:"MultiSelectStationCustomTagName",components:{Multiselect:v.a},props:{provinceIds:{},stationIds:{},autoClose:{default:!0},hideSelected:{default:!1},limitProp:{default:5},isDisabled:{default:!1},placeholder:{default:"Chọn kho"},reset:{default:!1},listStation:{},isActive:{default:!1},triggerDuplicateChange:{default:!1},customTagName:{type:Boolean,default:!1}},data:function(){return{option:null,options:[]}},created:function(){},watch:{option:function(t,e){this.$emit("input",t)},stationIds:function(t,e){this.triggerDuplicateChange||this.setList()},triggerDuplicateChange:function(t,e){this.$emit("handleTriggerDuplicateChange",t)},provinceIds:{immediate:!0,handler:function(t){if(!t)return this.option=null,void(this.options=[]);this.listStation||this.getList(t),this.option=null}},reset:function(){this.option=null},listStation:{immediate:!0,handler:function(t,e){this.getListById(t),this.option=null}}},methods:{getTagName:function(t){return t.length>0?t.reduce(function(t,e){return t.push(e.name),t},[]).join(", "):""},select:function(t){this.$emit("select",t)},remove:function(t){this.$emit("remove",t)},emitStation:function(){this.$emit("handleStationSelected",this.option)},resetOption:function(){this.option=null},setList:function(){var t=this;this.stationIds?(this.option=[],this.stationIds.split(",").forEach(function(e){var a=t.options.find(function(t){return""+t.id===e});a&&t.option.push(a)})):this.option=null},getList:function(t){var e=this;this.provinceIds&&(t=t&&t.constructor===Array?t.join():t,Ot.a.getAllStationByProvinceIds({provinceIds:t,is_active:this.isActive}).then(function(t){t.data.success&&(e.options=t.data.data,e.triggerDuplicateChange=!1,e.setList())}).catch(function(t){console.log(t)}))},getListById:function(t){var e=this;this.provinceIds&&(t=t&&t.constructor===Array?t.join():t,Ot.a.getAllStationByIds({stationIds:t,is_active:this.isActive}).then(function(t){t.data.success&&(e.options=t.data.data,e.setList())}).catch(function(t){console.log(t)}))}}};var Rt,Ut=function(t){a("tu42")},$t=Object(A.a)(Nt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{attrs:{options:t.options,multiple:!0,placeholder:t.placeholder,label:"name","track-by":"id","selected-label":"","deselect-label":"X","select-label":"",disabled:t.isDisabled,limit:t.limitProp,"hide-selected":t.hideSelected,"close-on-select":t.autoClose},on:{input:function(e){return t.emitStation()},select:t.select,remove:t.remove},scopedSlots:t._u([t.customTagName?{key:"selection",fn:function(e){var n=e.values;return e.search,e.isOpen,[n.length?a("span",{staticClass:"multiselect__single"},[t._v("\n      "+t._s(t.getTagName(n))+"\n    ")]):t._e()]}}:null],null,!0),model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[t._v(" "),a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{attrs:{slot:"noOptions"},slot:"noOptions"},[t._v("Vui lòng chọn tỉnh")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,Ut,"data-v-daf5a008",null).exports,Ht=a("eHUP"),Bt={name:"multi-select-team",props:{teamBranches:{default:null},teamIds:{default:null},autoClose:{default:null},hideSelected:{default:null},placeholder:{default:"Chọn Bộ Phận"},customClass:{default:null},disabled:{default:!1},isMultiple:{default:!0}},components:{Multiselect:v.a},data:function(){return{autoClosed:!0,hideSelect:!1,teamOption:null,teamOptions:[],loading:!1,message:"Nhập ít nhất 1 ký tự"}},created:function(){this.getTeams(),void 0!==this.autoClose&&null!==this.autoClosed&&(this.autoClosed=this.autoClose),void 0!==this.hideSelected&&null!==this.hideSelected&&(this.hideSelect=this.hideSelected)},computed:{tag:function(){return this.teamOption?this.teamOption.reduce(function(t,e){return t.push(e.name),t},[]).join(", "):""}},watch:{hideSelected:function(t,e){this.hideSelect=this.hideSelected},autoClose:function(t,e){this.autoClosed=this.autoClose},teamBranches:function(t,e){t?void 0!==this.teamOptions&&this.teamOptions.length>0&&this.setList():this.teamOption=null},teamIds:function(t,e){t||(this.teamOption=null),this.teamOptions&&this.teamOptions.length>0&&this.setList()},teamOption:function(t,e){this.$emit("handleTeamSelected",t)}},methods:{getTagName:function(t){return t.length>0?t.reduce(function(t,e){return t.push(e.name),t},[]).join(", "):""},getTeams:lt()((Rt=k()(C.a.mark(function t(e){var a=this;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length<1)){t.next=4;break}return this.teamOptions=[],this.message="Nhập ít nhất 1 ký tự",t.abrupt("return");case 4:return this.loading=!0,t.next=7,Ht.a.searchTeam({name:e}).then(function(t){t.data.success?a.teamOptions=t.data.data.reduce(function(t,e){return t.push({id:e.branch,name:e.name}),t},[]):(S.a.showMessage(t.data.message,"error"),a.teamOptions=[],a.message="Không có kết quả phù hợp !")}).catch(function(t){S.a.showMessage(t.response.data.message,"error"),a.teamOptions=[],a.message="Không có kết quả phù hợp !"}).finally(function(){a.loading=!1});case 7:case"end":return t.stop()}},t,this)})),function(t){return Rt.apply(this,arguments)}),500)}},jt=Object(A.a)(Bt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{ref:"teamSelect",class:t.customClass,attrs:{options:t.teamOptions,multiple:t.isMultiple,placeholder:t.placeholder,label:"name","track-by":"id",selectedLabel:"",deselectLabel:"X",selectLabel:"","hide-selected":t.hideSelected,"close-on-select":t.autoClosed,disabled:t.disabled,loading:t.loading},on:{"search-change":t.getTeams},scopedSlots:t._u([{key:"selection",fn:function(e){var n=e.values;return e.search,e.isOpen,[n.length?a("span",{staticClass:"multiselect__single"},[t._v("\n        "+t._s(t.getTagName(n))+"\n      ")]):t._e()]}}]),model:{value:t.teamOption,callback:function(e){t.teamOption=e},expression:"teamOption"}},[t._v(" "),a("span",{attrs:{slot:"noOptions"},slot:"noOptions"},[t._v(t._s(t.message))]),t._v(" "),a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Không có kết quả phù hợp !")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,null,null,null).exports,Ft={name:"SingleSelectUserRepresent",props:{multiple:!1,resetAfter:{default:!1},user:{type:Object,default:null},inScope:{default:!1},statusId:{default:null},isSelectMainUser:{type:String,default:"no"},reset:{},placeholder:{default:"Nhập ít nhất 2 ký tự"},customClass:{default:"multiselect-primary"},trainingSyllabusId:{default:null},roles:{default:null},isDisabled:{type:Boolean,default:!1},targetApi:{type:String,default:"admin"},oldOption:{type:Object,default:null}},components:{Multiselect:v.a,depositService:u.a,debounce:lt.a},watch:{asyncSelected:function(){this.$emit("onChange",this.asyncSelected)},user:{immediate:!0,handler:function(){this.user&&this.user.id?this.asyncSelected=this.user:this.asyncSelected=null}},reset:function(){this.asyncSelected=null}},data:function(){return{asyncSelected:null,asyncFound:[],asyncLoading:!1,asyncTimeout:null,message:"Nhập ít nhất 2 ký tự"}},computed:{},created:function(){this.asyncSelected=this.oldOption},methods:{asyncFind:lt()(function(t){var e=this;if(t.length<2)return this.asyncFound=[],void(this.message="Nhập ít nhất 2 ký tự");this.asyncLoading=!0,this.asyncFound=[];var a={keyword:t};M.a.getUserRepresent(a).then(function(t){t.data.hasOwnProperty("success")&&(t.data.success?e.asyncFound=t.data.data.reduce(function(t,e){return t.push({id:e.id,name:e.fullname+" - "+e.username}),t},[]):e.message="Không tìm thấy kết quả")}).catch(function(){e.message="Không tìm thấy kết quả"}).then(function(){e.asyncLoading=!1})},500)}},qt=Object(A.a)(Ft,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("multiselect",{attrs:{label:"name","track-by":"id",placeholder:t.placeholder,options:t.asyncFound,multiple:t.multiple,searchable:!0,loading:t.asyncLoading,"allow-empty":!0,"internal-search":!1,"clear-on-select":!0,"close-on-select":!0,"hide-selected":!1,"selected-label":"","deselect-label":"X","select-label":"",disabled:t.isDisabled,"reset-after":t.resetAfter},on:{"search-change":t.asyncFind,select:function(e){t.$emit("select",e)},remove:function(e){t.$emit("remove",e)}},model:{value:t.asyncSelected,callback:function(e){t.asyncSelected=e},expression:"asyncSelected"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("không có kết quả phù hợp !")]),t._v(" "),a("span",{attrs:{slot:"noOptions"},slot:"noOptions"},[t._v(t._s(t.message))]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(t._s(t.placeholder))])])},[],!1,null,null,null).exports,Yt=a("M4fF"),zt=[{value:"%",name:"% Lương"},{value:"VNĐ",name:"VNĐ"}],Gt={name:"RewardCollectiveData",components:{SingleSelectUserRepresent:qt,Datepicker:ot.a,Multiselect:v.a},props:{actionModal:{type:null|String,default:null},dataReward:{type:null|Object,default:null},userId:{type:null|Number,default:null},fStarType:{type:String,required:!0},typeOptions:{type:Array,required:!0},tempTeamId:{type:null|String,required:!0},memberIdNotSelected:{type:Array,default:function(){return[]}},memberIdSelected:{type:Array,default:function(){return[]}},isSelectAll:{type:Boolean,default:!1},formModalOld:{type:Object,default:function(){}},viewMode:{type:Boolean,default:!1}},computed:{helper:function(t){return S.a},RewardPenalty:function(t){return x.a},idInput:function(){return"input-file-"+Math.random()},convertFStarType:function(){return this.fStarType===x.a.fStarTypes.penalty?"phạt":this.fStarType===x.a.fStarTypes.reward?"thưởng":void 0}},watch:{dataReward:function(){this.resetFormModal(),this.handle()},loadingComponent:function(){this.$emit("loading",this.loadingComponent)},viewMode:function(){this.handle()},"formModal.recompense_level":function(t){t===x.a.optionLevelKeys.honors&&(this.formModal.recompense_value=null,this.formModal.value_unit=null)}},data:function(){return{accept:"image/*, .pdf, video/*",orderPeriod:1,valueOptionType:zt,optionCategories:[],optionLevels:[],formModal:{userRepresent:null,group_name:null,category:null,type:null,value_unit:null,date_key:null,reason:null,recompense_level:null,recompense_value:null,file_path:[],user_id:null,file_old:[]},loading:!1,loadingComponent:!1,titleModalAction:"",reason:"",renderFile:!0,modalActionConfirm:{title:"Xác nhận chỉnh sửa khen thưởng",content:"Bạn có chắc chắn muốn tạo khen thưởng ?"},users:[],display_pay_period:""}},created:function(){this.initFormDataModal(),this.formModal=b()({},this.formModal,this.formModalOld),"create"!==this.actionModal?this.handle():this.enableAllOption()},mounted:function(){this.formModal.request_id=this.tempTeamId},methods:{dateChange:function(t){var e=t.getMonth()+1;t.getDate()>20&&e++,this.display_pay_period="Ngày thưởng "+S.a.formatDate(t,"YYYY-MM-DD")+" thuộc kỳ lương Tháng "+e},unitRewardPenalty:function(){this.formModal.recompense_value&&this.formModal.recompense_value<1&&(this.formModal.recompense_value=1)},changeUserRepresent:function(t){if(!t)return this.formModal.user_id=null,void(this.formModal.userRepresent=null);this.formModal.userRepresent=t,this.formModal.user_id=t.id},showModal:function(){null!==this.dataReward&&"create"!==this.actionModal&&this.handle()},reRenderFile:function(){this.renderFile=!1,this.renderFile=!0},addFile:function(t){var e=t.target.files||t.dataTransfer.files;e.size&&(e=[e]);var a=this.accept.split(", "),n=!0,i=!1,s=void 0;try{for(var o,r=st()(e);!(n=(o=r.next()).done);n=!0){var l=o.value,c=l.type.split("/"),d=l.name.split(".").pop();if(!c||c.length<1)return;a.includes(l.type)||a.includes(c[0]+"/*")||a.includes("."+d)?this.formModal.file_path.push(l):S.a.showMessage("Định dạng file "+l.name+"  không được hỗ trợ !","warning")}}catch(t){i=!0,s=t}finally{try{!n&&r.return&&r.return()}finally{if(i)throw s}}t.target.value=null,this.reRenderFile()},closeModalConfirm:function(){this.$bvModal.hide("modal-confirm-create-collective-reward")},emitSuccess:function(){this.resetFormModal(),this.$bvModal.hide("modal-"+this.fStarType+"-f-star-"+this.actionModal),this.closeModalConfirm(),this.$emit("reloadListFStar")},resetFormModal:function(){this.formModal={userRepresent:null,group_name:null,category:null,type:null,value_unit:null,date_key:null,reason:null,recompense_level:null,recompense_value:null,file_path:[],user_id:null,file_old:[]}},submit:function(){var t=this;return k()(C.a.mark(function e(){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.formModal.category){e.next=4;break}return S.a.showMessage("Vui lòng chọn loại hình","warning"),t.closeModalConfirm(),e.abrupt("return");case 4:if(t.formModal.group_name){e.next=8;break}return S.a.showMessage("Vui lòng nhập tên tập thể","warning"),t.closeModalConfirm(),e.abrupt("return");case 8:if(t.formModal.user_id){e.next=12;break}return S.a.showMessage("Vui lòng chọn người đại diện","warning"),t.closeModalConfirm(),e.abrupt("return");case 12:if(t.formModal.recompense_level){e.next=16;break}return S.a.showMessage("Vui lòng chọn mức thưởng/phạt","warning"),t.closeModalConfirm(),e.abrupt("return");case 16:if(void 0===t.formModal.recompense_level||"cash"!==t.formModal.recompense_level){e.next=25;break}if(t.formModal.recompense_value){e.next=21;break}return S.a.showMessage("Vui lòng nhập giá trị thưởng phạt","warning"),t.closeModalConfirm(),e.abrupt("return");case 21:if(t.formModal.value_unit){e.next=25;break}return S.a.showMessage("Vui lòng chọn loại giá trị thưởng/phạt","warning"),t.closeModalConfirm(),e.abrupt("return");case 25:if(t.formModal.type){e.next=29;break}return S.a.showMessage("Vui lòng chọn nội dung thưởng","warning"),t.closeModalConfirm(),e.abrupt("return");case 29:if(t.formModal.date_key){e.next=33;break}return S.a.showMessage("Vui lòng chọn ngày","warning"),t.closeModalConfirm(),e.abrupt("return");case 33:if(t.formModal.reason){e.next=37;break}return S.a.showMessage("Vui lòng nhập lý do","warning"),t.closeModalConfirm(),e.abrupt("return");case 37:if(t.formModal.recompense_level){e.next=41;break}return S.a.showMessage("Vui lòng chọn mức thưởng phạt","warning"),t.closeModalConfirm(),e.abrupt("return");case 41:if(!(t.formModal.file_old.length<1&&t.formModal.file_path.length<1)){e.next=45;break}return S.a.showMessage("Vui lòng tải lên ảnh tập thể","warning"),t.closeModalConfirm(),e.abrupt("return");case 45:if(t.fStarType!==x.a.fStarTypes.penalty){e.next=57;break}if(t.loadingComponent=!0,"create"!==t.actionModal){e.next=52;break}return e.next=50,t.submitCreatePenalty();case 50:e.next=55;break;case 52:if("edit"!==t.actionModal){e.next=55;break}return e.next=55,t.submitEditPenalty();case 55:e.next=67;break;case 57:if(t.fStarType!==x.a.fStarTypes.reward){e.next=67;break}if(t.loadingComponent=!0,"create"!==t.actionModal){e.next=64;break}return e.next=62,t.submitCreateReward();case 62:e.next=67;break;case 64:if("edit"!==t.actionModal){e.next=67;break}return e.next=67,t.submitEditReward();case 67:t.closeModalConfirm(),t.loadingComponent=!1;case 69:case"end":return e.stop()}},e,t)}))()},submitCreateReward:function(){var t=this;return k()(C.a.mark(function e(){var a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.buildFormData(!1),e.next=3,M.a.createReward(a).then(function(e){e.data.success?(S.a.showMessage(e.data.message,"success"),t.resetFormModal(),t.emitSuccess()):S.a.showMessage(e.data.message,"error")}).catch(function(t){S.a.showMessage(t.response.data.message,"error")});case 3:case"end":return e.stop()}},e,t)}))()},submitEditReward:function(){var t=this;return k()(C.a.mark(function e(){var a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.buildFormData(!0),e.next=3,M.a.updateReward(a).then(function(e){e.data.success?(S.a.showMessage(e.data.message,"success"),t.emitSuccess()):S.a.showMessage(e.data.message,"error")}).catch(function(t){S.a.showMessage(t.response.data.message,"error")});case 3:case"end":return e.stop()}},e,t)}))()},submitCreatePenalty:function(){var t=this;return k()(C.a.mark(function e(){var a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.buildFormData(!1),e.next=3,M.a.createPenalty(a).then(function(e){e.data.success?(S.a.showMessage(e.data.message,"success"),t.emitSuccess()):S.a.showMessage(e.data.message,"error")}).catch(function(t){S.a.showMessage(t.response.data.message,"error")});case 3:case"end":return e.stop()}},e,t)}))()},submitEditPenalty:function(){var t=this;return k()(C.a.mark(function e(){var a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.buildFormData(!0),e.next=3,M.a.updatePenalty(a).then(function(e){e.data.success?(S.a.showMessage(e.data.message,"success"),t.emitSuccess()):S.a.showMessage(e.data.message,"error")}).catch(function(t){S.a.showMessage(t.response.data.message,"error")});case 3:case"end":return e.stop()}},e,t)}))()},buildFormData:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=new FormData,a=Yt.pick(this.formModal,["request_id","user_id","group_name","category","reason","recompense_level"]);return S.a.appendFormData(e,a),e.append("type_fstar",x.a.rewardPenaltyTypes.type_reward_collective),this.formModal.type.alias&&e.append("type",this.formModal.type.alias),this.formModal.date_key&&e.append("date_key",S.a.formatDate(this.formModal.date_key,"YYYY-MM-DD")),void 0!==this.formModal.recompense_level&&"cash"===this.formModal.recompense_level&&(e.append("recompense_value",this.formModal.recompense_value),e.append("value_unit",this.formModal.value_unit.value)),void 0!==this.formModal.file_path&&this.formModal.file_path.constructor===Array&&this.formModal.file_path.forEach(function(t){t.name&&null===e.get("file_path")&&e.append("file_path",t)}),void 0!==this.formModal.file_old&&this.formModal.file_old.constructor===Array&&this.formModal.file_old.forEach(function(t){e.append("file_old[]",t)}),t&&e.append("id",this.formModal.id),e},handle:function(){var t=this,e=JSON.parse(nt()(this.dataReward));"create"!==this.actionModal?(this.fStarType===x.a.fStarTypes.reward?(this.titleModalAction="edit"===this.actionModal?"Chỉnh sửa khen thưởng":"Thông tin thưởng",this.modalActionConfirm.title="Xác nhận chỉnh sửa khen thưởng",this.modalActionConfirm.content="Bạn có chắc chắn muốn chỉnh sửa đề xuất thưởng ?"):this.fStarType===x.a.fStarTypes.penalty&&(this.titleModalAction="edit"===this.actionModal?"Chỉnh sửa thẻ phạt":"Thông tin thẻ phạt",this.modalActionConfirm.title="Xác nhận chỉnh sửa thẻ phạt",this.modalActionConfirm.content="Bạn có chắc chắn muốn chỉnh sửa thẻ phạt này ?"),this.formModal=e,this.formModal.userRepresent={id:e.user_id,name:e.user_info.fullname+" - "+e.user_info.username},this.formModal.id=e.id,this.formModal.group_name=e.group_name,this.formModal.value_unit=this.valueOptionType.find(function(e){return e.value===t.formModal.value_unit}),this.formModal.type=this.typeOptions.find(function(e){return e.alias===t.formModal.type}),this.formModal.recompense_value=parseInt(e.recompense_value.replace(/,/g,""),10),this.formModal.file_path=[],this.formModal.file_old=e.fstar_report,e.recompense_level===x.a.optionLevelKeys.honors&&(this.formModal.recompense_value=null,this.formModal.value_unit=null),"warning"===e.recompense_level&&(this.formModal.recompense_value=null,this.formModal.value_unit=null),this.viewMode?(this.optionCategories.forEach(function(t){t.disabled=t.value!==e.category}),this.optionLevels.forEach(function(t){t.disabled=t.value!==e.recompense_level})):this.enableAllOption()):(this.fStarType===x.a.fStarTypes.reward?(this.titleModalAction="Tạo khen thưởng",this.modalActionConfirm.title="Xác nhận tạo khen thưởng",this.modalActionConfirm.content="Bạn có chắc muốn tạo khen thưởng ?"):this.fStarType===x.a.fStarTypes.penalty&&(this.titleModalAction="Tạo thẻ phạt ",this.modalActionConfirm.title="Xác nhận tạo thẻ phạt",this.modalActionConfirm.content="Bạn có chắc chắn muốn tạo thẻ phạt  ?"),this.formModal.user_id=this.userId,this.enableAllOption())},enableAllOption:function(){this.optionLevels.forEach(function(t){t.disabled=!1}),this.optionCategories.forEach(function(t){t.disabled=!1})},deleteFile:function(t){this.formModal.file_path.splice(t,1),this.reRenderFile()},deleteFileOld:function(t){this.formModal.file_old.splice(t,1),this.reRenderFile()},previewImageRender:function(t){if(S.a.isEmpty(t))return"";var e=S.a.getFileType(t);if("doc"===e)return"https://gs.giaohangtietkiem.vn/d/e24bec4ee88441bdb3e79466dd541152.png?height=250";if("object"===(void 0===t?"undefined":et()(t))){if("pdf"===e)return"https://gs.giaohangtietkiem.vn/d/d7d5ef9e764e4227b7aef2c11dfd1371.png?height=250";if("video"===e)return"https://ghtk.me/images/icon-file-video.png?height=250";if("image"===e)return URL.createObjectURL(t)}else if(["pdf","video"].includes(e))return t+"?extract=thumb";return t},initFormDataModal:function(){this.optionLevels=x.a.optionLevels.reward,this.optionCategories=x.a.optionCategories.reward}}};var Kt=function(t){a("fogI"),a("X+KB")},Vt=Object(A.a)(Gt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"mb-2 mih-70"},[a("b-row",{staticClass:"form-group"},[a("b-col",{staticClass:"d-flex align-items-center",attrs:{md:"3"}},[a("label",[a("b",[t._v("Tên tập thể "),t.viewMode?t._e():a("span",{staticClass:"text-danger"},[t._v("*")])])])]),t._v(" "),a("b-col",{attrs:{md:"9"}},[a("div",{staticClass:"form-group mb-0 d-flex align-content-center"},[a("b-input",{attrs:{disabled:t.viewMode,autocomplete:"off",placeholder:"Nhập tên tập thể",type:"text"},model:{value:t.formModal.group_name,callback:function(e){t.$set(t.formModal,"group_name",e)},expression:"formModal.group_name"}})],1)])],1),t._v(" "),a("b-row",{staticClass:"form-group"},[a("b-col",{staticClass:"d-flex align-items-center",attrs:{md:"3"}},[a("label",[a("b",[t._v("Người đại diện "),t.viewMode?t._e():a("span",{staticClass:"text-danger"},[t._v("*")])])])]),t._v(" "),a("b-col",{attrs:{md:"9"}},[a("div",{staticClass:"form-group mb-0 d-flex align-content-center"},[a("SingleSelectUserRepresent",{staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{isDisabled:t.viewMode,oldOption:t.formModal.userRepresent,placeholder:"Chọn người đại diện"},on:{onChange:t.changeUserRepresent}})],1)])],1),t._v(" "),a("b-row",{staticClass:"form-group"},[a("b-col",{attrs:{md:"3"}},[a("label",[a("b",[t._v("Loại hình thưởng "),t.viewMode?t._e():a("span",{staticClass:"text-danger"},[t._v("*")])])])]),t._v(" "),a("b-col",{attrs:{md:"9"}},[a("b-form-radio-group",{attrs:{options:t.optionCategories},model:{value:t.formModal.category,callback:function(e){t.$set(t.formModal,"category",e)},expression:"formModal.category"}})],1)],1),t._v(" "),a("b-row",{staticClass:"form-group"},[a("b-col",{attrs:{md:"3"}},[a("label",[a("b",[t._v("Mức "+t._s(t.convertFStarType)+" "),t.viewMode?t._e():a("span",{staticClass:"text-danger"},[t._v("*")])])])]),t._v(" "),a("b-col",{attrs:{md:"9"}},[a("b-form-radio-group",{staticClass:"category",attrs:{options:t.optionLevels},model:{value:t.formModal.recompense_level,callback:function(e){t.$set(t.formModal,"recompense_level",e)},expression:"formModal.recompense_level"}})],1)],1),t._v(" "),"cash"===t.formModal.recompense_level?a("b-row",{staticClass:"form-group"},[a("b-col",{staticClass:"d-flex align-items-center",attrs:{md:"3"}},[a("label",[a("b",[t._v("Giá trị "+t._s(t.convertFStarType)+" "),t.viewMode?t._e():a("span",{staticClass:"text-danger"},[t._v("*")])])])]),t._v(" "),a("b-col",{attrs:{md:"9"}},[a("div",{staticClass:"form-group d-flex w-100"},[a("b-row",{staticClass:"w-100 ml-0"},[a("b-col",{staticClass:"pl-0",attrs:{md:"6"}},[a("b-input",{staticClass:"category-value mr-5 w-100",attrs:{disabled:t.viewMode,type:"number",min:"1",placeholder:"Giá trị"},on:{input:t.unitRewardPenalty},model:{value:t.formModal.recompense_value,callback:function(e){t.$set(t.formModal,"recompense_value",e)},expression:"formModal.recompense_value"}})],1),t._v(" "),a("b-col",{staticClass:"pr-0",attrs:{md:"6"}},[a("multiselect",{staticClass:"category-value w-100",attrs:{disabled:t.viewMode,label:"name","track-by":"value",placeholder:"Chọn đơn vị",options:t.valueOptionType,multiple:!1,searchable:!0,"preserve-search":!0,selectLabel:"Chọn",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn"},model:{value:t.formModal.value_unit,callback:function(e){t.$set(t.formModal,"value_unit",e)},expression:"formModal.value_unit"}})],1)],1)],1)])],1):t._e(),t._v(" "),a("b-row",{staticClass:"form-group"},[a("b-col",{staticClass:"d-flex align-items-center",attrs:{md:"3"}},[a("label",{staticClass:"mb-0"},[a("b",[t._v("Nội dung "),t.viewMode?t._e():a("span",{staticClass:"text-danger"},[t._v("*")])])])]),t._v(" "),a("b-col",{attrs:{md:"9"}},[a("div",{staticClass:"form-group mb-0 d-flex align-content-center"},[a("multiselect",{attrs:{disabled:t.viewMode,label:"name","track-by":"alias",placeholder:"Chọn loại "+(t.fStarType===t.RewardPenalty.fStarTypes.reward?"thưởng":"phạt"),options:t.typeOptions,multiple:!1,searchable:!0,loading:t.loading,"preserve-search":!0,selectLabel:"Chọn",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn"},model:{value:t.formModal.type,callback:function(e){t.$set(t.formModal,"type",e)},expression:"formModal.type"}})],1)])],1),t._v(" "),a("b-row",{staticClass:"form-group"},[a("b-col",{staticClass:"d-flex align-items-center",attrs:{md:"3"}},[a("label",{class:t.display_pay_period?"mb-3":"mb-0"},[a("b",[t._v("Ngày "+t._s(t.convertFStarType)+" "),t.viewMode?t._e():a("span",{staticClass:"text-danger"},[t._v("*")])])])]),t._v(" "),a("b-col",{attrs:{md:"9"}},[a("div",{staticClass:"form-group mb-0 d-flex align-content-center"},[a("datepicker",{staticClass:"w-100",attrs:{disabled:t.viewMode,format:"yyyy-MM-dd",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0,placeholder:"Chọn ngày "+(t.fStarType===t.RewardPenalty.fStarTypes.reward?"thưởng":"phạt")},on:{selected:function(e){return t.dateChange(e)}},model:{value:t.formModal.date_key,callback:function(e){t.$set(t.formModal,"date_key",e)},expression:"formModal.date_key"}})],1),t._v(" "),a("p",{staticClass:"pay-period mb-0 mt-1"},[t._v(t._s(t.display_pay_period))])])],1),t._v(" "),a("b-row",{staticClass:"form-group"},[a("b-col",{staticClass:"d-flex align-items-center",attrs:{md:"3"}},[a("label",[a("b",[t._v("Lý do "+t._s(t.convertFStarType)+" "),t.viewMode?t._e():a("span",{staticClass:"text-danger"},[t._v("*")])])])]),t._v(" "),a("b-col",{attrs:{md:"9"}},[a("div",{staticClass:"form-group mb-0 d-flex align-content-center"},[a("b-textarea",{attrs:{disabled:t.viewMode,autocomplete:"off",placeholder:"Lý do "+(t.fStarType===t.RewardPenalty.fStarTypes.reward?"thưởng":"phạt"),type:"text"},model:{value:t.formModal.reason,callback:function(e){t.$set(t.formModal,"reason",e)},expression:"formModal.reason"}})],1)])],1),t._v(" "),a("div",{staticClass:"form-group"},[t.fStarType===t.RewardPenalty.fStarTypes.reward?a("label",[a("b",[t._v("Ảnh tập thể "),t.viewMode?t._e():a("span",{staticClass:"text-danger"},[t._v("*")])])]):t._e(),t._v(" "),t.renderFile?a("div",{staticClass:"list-file"},[t._l(t.formModal.file_old,function(e,n){return[a("div",{key:e+n+"fileClass",staticClass:"square-image"},[t.viewMode?t._e():a("i",{staticClass:"icon ion-md-close-circle cursor-pointer",on:{click:function(e){return t.deleteFileOld(n)}}}),t._v(" "),[a("span",[["pdf","video","image","doc"].includes(t.helper.getFileType(e))?a("img",{attrs:{src:t.previewImageRender(e),alt:""}}):t._e()])]],2)]}),t._v(" "),t._l(t.formModal.file_path,function(e,n){return[a("div",{key:e+n+"fileClass",staticClass:"square-image"},[t.viewMode?t._e():a("i",{staticClass:"icon ion-md-close-circle cursor-pointer",on:{click:function(e){return t.deleteFile(n)}}}),t._v(" "),[a("span",[["pdf","video","image","doc"].includes(t.helper.getFileType(e))?a("img",{attrs:{src:t.previewImageRender(e),alt:""}}):t._e()])]],2)]})],2):t._e(),t._v(" "),!this.viewMode&&this.formModal.file_path.length<1&&this.formModal.file_old.length<1?a("input",{staticClass:"custom-file-input d-none",attrs:{type:"file",multiple:!1,accept:t.accept,id:t.idInput,name:"input_"},on:{input:t.addFile}}):t._e(),t._v(" "),!this.viewMode&&this.formModal.file_path.length<1&&this.formModal.file_old.length<1?a("label",{staticClass:"custom-label",attrs:{for:t.idInput}},[t._t("label",function(){return[a("div",{staticClass:"rounded cursor-pointer btn btn-outline-success px-3 py-2"},[t._v("+ Thêm ảnh")])]})],2):t._e()])],1),t._v(" "),a("div",{staticClass:"mt-1 text-center"},[t.viewMode?t._e():a("button",{staticClass:"btn btn-outline-success mr-1 w-25",attrs:{"data-style":"zoom-out"},on:{click:function(e){return t.$emit("prevStep",t.formModal)}}},[t._v("\n      Quay lại\n    ")]),t._v(" "),t.viewMode?t._e():a("button",{staticClass:"btn btn-success ml-1 w-25",attrs:{"data-style":"zoom-out"},on:{click:function(e){return t.$bvModal.show("modal-confirm-create-collective-reward")}}},[t._v("\n      Xác nhận\n    ")])]),t._v(" "),a("b-modal",{staticClass:"modal-confirm-f-star",attrs:{id:"modal-confirm-create-collective-reward",title:t.modalActionConfirm.title,scrollable:"","hide-footer":"","header-class":"justify-content-center",centered:""}},[a("div",{staticClass:"mb-4 text-center"},[t._v("\n      "+t._s(t.modalActionConfirm.content)+"\n    ")]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingComponent,expression:"loadingComponent"}],staticClass:"mt-1 text-center"},[a("button",{staticClass:"btn btn-outline-success mr-1 w-25",attrs:{"data-style":"zoom-out"},on:{click:t.closeModalConfirm}},[t._v("\n        Hủy\n      ")]),t._v(" "),a("button",{staticClass:"btn btn-success ml-1 w-25",attrs:{"data-style":"zoom-out"},on:{click:t.submit}},[t._v("\n        Xác nhận\n      ")])])])],1)},[],!1,Kt,"data-v-4ed17403",null).exports,Qt={name:"ModalCreateCollectiveReward",components:{Multiselect:v.a,MultiSelectDepartmentCustomTagName:kt,MultiSelectPositionCustomTagName:St,MultiSelectProvinceCustomTagName:Pt,MultiSelectRegionCustomTagName:At,MultiSelectStationCustomTagName:$t,MultiSelectTeam:jt,RewardCollectiveData:Vt},props:{modalId:{type:String,default:"modal-create-collective-reward"},dataReward:{type:null|Object,default:null},actionModal:{type:null|String,default:null}},data:function(){return{defaultAvatar:"https://cache.giaohangtietkiem.vn/d/b04440d8dc4a05f744f1680ad42ecd1c.jpg?width=450&height=450",loading:!1,loadingModal:!1,stopLoadData:!1,filter:{keyword:null,region:null,province:null,station:null,department:null,position:null,team_branch:null},filterAfterSearch:{},teamMembers:[],usersSelected:[],teamMemberSelected:[],isSelectAll:!1,memberIdNotSelected:[],memberIdSelected:[],page:{currentPage:1,perPage:50,totalItem:0},step:1,typeRewardOptions:[],formModalOld:{},temp:{list:[],teamId:null,fStarId:null,keyword:"",page:{currentPage:1,perPage:50,totalItem:0,totalPage:0}}}},created:function(){this.getTypeReward()},watch:{step:function(t){switch(t){case 1:this.getUserTemp(!1);break;case 2:this.resetData(),this.resetFilter()}}},methods:{showStepAddMember:function(){this.resetFilter(),this.step=2},searchTempUser:lt()(function(){this.temp.page.currentPage=1,this.getUserTemp(!1)},500),getUserTemp:function(t){var e=this;return k()(C.a.mark(function a(){var n;return C.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.temp.teamId){a.next=6;break}return e.loading=!0,n={request_id:e.temp.teamId,page:e.temp.page.currentPage,limit:e.temp.page.perPage},e.temp.keyword&&(n.keyword=e.temp.keyword),a.next=6,M.a.getUserTemp(n).then(function(a){if(a.data.success){var n;if(t)(n=e.temp.list).push.apply(n,yt()(a.data.data));else e.temp.list=a.data.data;e.temp.page.totalItem=a.data.total,e.temp.page.currentPage=a.data.current_page,e.temp.page.perPage=a.data.per_page,e.temp.page.totalPage=a.data.total_page}else S.a.showMessage(a.data.message,"error")}).catch(function(t){S.a.showMessage(t.response.data.message,"error")}).finally(function(){e.loading=!1});case 6:case"end":return a.stop()}},a,e)}))()},loadMoreUserTemp:function(){this.loading||this.temp.page.currentPage<this.temp.page.totalPage&&(this.temp.page.currentPage++,this.getUserTemp(!0))},handleScrollUserTemp:function(t){var e=this.$refs[t];e.scrollTop+e.clientHeight+100>=e.scrollHeight&&this.loadMoreUserTemp()},saveUserTemp:function(){var t=this;return k()(C.a.mark(function e(){var a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,a={filters:t.convertDataFilter(),choose_all:t.isSelectAll?1:0},t.temp.teamId&&(a.request_id=t.temp.teamId),t.memberIdNotSelected.length>0&&(a.excluded_members=t.memberIdNotSelected),t.memberIdSelected.length>0&&(a.included_members=t.memberIdSelected),a.choose_all?delete a.included_members:delete a.excluded_members,e.next=8,M.a.saveUserTemp(a).then(function(e){e.data.success?(t.temp.teamId=e.data.data.request_id,t.step--):S.a.showMessage(e.data.message,"error")}).catch(function(t){S.a.showMessage(t.response.data.message,"error")}).finally(function(){t.loading=!1});case 8:case"end":return e.stop()}},e,t)}))()},getTempTeamId:function(t){var e=this;return k()(C.a.mark(function a(){return C.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.step=1,e.loading=!0,a.next=4,M.a.saveUserTemp({fstar_id:t}).then(function(t){t.data.success?(e.temp.teamId=t.data.data.request_id,e.getUserTemp(!1)):S.a.showMessage(t.data.message,"error")}).catch(function(t){S.a.showMessage(t.response.data.message,"error")}).finally(function(){e.loading=!1});case 4:case"end":return a.stop()}},a,e)}))()},prevStep:function(t){this.step=1,this.formModalOld=t},resetTempData:function(){this.temp={list:[],teamId:null,keyword:"",page:{currentPage:1,perPage:50,totalItem:0,totalPage:0}}},reloadListFStar:function(){this.resetData(),this.resetTempData(),this.resetFilter(),this.step=1,this.formModalOld={},this.$bvModal.hide(this.modalId),this.$emit("reloadListFStar")},getTypeReward:function(){var t=this;return k()(C.a.mark(function e(){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.getTypeReward().then(function(e){e.data.success?t.typeRewardOptions=e.data.data:S.a.showMessage(e.data.message,"error")}).catch(function(t){S.a.showMessage(t.response.data.message,"error")});case 2:case"end":return e.stop()}},e,t)}))()},removeMember:function(t){var e=this;return k()(C.a.mark(function a(){return C.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.loading=!0,a.next=3,M.a.removeUserTemp({request_id:e.temp.teamId,user_id:t.user_id}).then(function(t){t.data.success?e.getUserTemp(!1):S.a.showMessage(t.data.message,"error")}).catch(function(t){S.a.showMessage(t.response.data.message,"error")}).finally(function(){e.loading=!1});case 3:case"end":return a.stop()}},a,e)}))()},selectAllUser:function(){this.teamMembers.length<1||(this.memberIdNotSelected=[],this.memberIdSelected=[],this.isSelectAll=!0,this.usersSelected=this.teamMembers.reduce(function(t,e){return t.push(e.id),t},[]))},removeAllUser:function(){this.isSelectAll&&(this.memberIdNotSelected=[],this.memberIdSelected=[],this.isSelectAll=!1,this.usersSelected=[])},handleSelectedTeamMember:function(t,e){this.usersSelected[e]?(this.teamMemberSelected.push(t),this.memberIdSelected.push(t.id),this.memberIdNotSelected=this.memberIdNotSelected.filter(function(e){return e!==t.id})):(this.memberIdNotSelected.push(t.id),this.memberIdSelected=this.memberIdSelected.filter(function(e){return e!==t.id}),this.$delete(this.teamMemberSelected,this.teamMemberSelected.findIndex(function(e){return e.id===t.id})))},handleSelectedRegion:function(t){this.filter.region=t?t.map(function(t){return t.id}).toString():""},handleSelectedProvince:function(t){this.filter.province=t?t.map(function(t){return t.id}).toString():""},handleStationSelected:function(t){this.filter.station=t?t.map(function(t){return t.id}).toString():""},handleDepartmentSelected:function(t){this.filter.department=t?t.map(function(t){return t.id}).toString():""},handlePositionSelected:function(t){this.filter.position=t?t.map(function(t){return t.id}).toString():""},handleTeamSelected:function(t){this.filter.team_branch=t?t.map(function(t){return t.id}).toString():""},convertDataFilter:function(){var t=b()({},this.filter);return t.department&&(t.department_ids=t.department.split(",")),delete t.department,t.position&&(t.position_ids=t.position.split(",")),delete t.position,t.region&&(t.regions=t.region.split(",")),delete t.region,t.province&&(t.province_ids=t.province.split(",")),delete t.province,t.station&&(t.station_ids=t.station.split(",")),delete t.station,t.team_branch&&(t.team_branch=t.team_branch.split(",")),this.isShowInputTeam||delete t.team_branch,t.keyword?t.keyword=t.keyword.trim():delete t.keyword,t},searchTeamMembersWithKeyword:lt()(function(){this.isActiveBtnSearch&&(this.page.currentPage=1,this.searchTeamMembers(!1,this.memberIdSelected,this.memberIdNotSelected))},500),addMembersSelected:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.memberIdSelected=e,this.memberIdNotSelected=a,this.usersSelected=this.teamMembers.reduce(function(n,i){return(t?!a.includes(i.id):e.includes(i.id))?n.push(i.id):n.push(!1),n},[])},searchTeamMembers:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return k()(C.a.mark(function i(){var s,o,r,l,c,d;return C.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!e.loading){i.next=2;break}return i.abrupt("return");case 2:return e.loading=!0,s=e.convertDataFilter(),e.filterAfterSearch=e.filter,o={page:1,limit:e.page.perPage},t&&(o.page=e.page.currentPage+1),r=b()({},s,o),i.prev=8,i.next=11,M.a.getUserFSar(r);case 11:(l=i.sent).data.success?(c=e.isSelectAll,t?((d=e.teamMembers).push.apply(d,yt()(l.data.data.data)),e.updateSelectedUser(l.data.data.data,e.memberIdSelected,e.memberIdNotSelected)):(e.resetData(),e.teamMembers=l.data.data.data),(a.length>0||n.length>0)&&(e.isSelectAll=c,e.addMembersSelected(c,a,n)),e.page.totalItem=l.data.data.total,e.page.currentPage=l.data.data.current_page,e.page.perPage=l.data.data.per_page,e.stopLoadData=l.data.data.data.length<e.page.perPage):e.stopLoadData=!0,i.next=19;break;case 15:i.prev=15,i.t0=i.catch(8),S.a.showMessage(i.t0.response.data.message||"Không lấy được danh sách !","error","Lỗi"),e.stopLoadData=!0;case 19:return i.prev=19,e.loading=!1,i.finish(19);case 22:case"end":return i.stop()}},i,e,[[8,15,19,22]])}))()},resetFilter:function(){this.filter={keyword:null,region:null,province:null,station:null,department:null,position:null,team_branch:null}},resetData:function(){this.teamMembers=[],this.teamMemberSelected=[],this.usersSelected=[],this.isSelectAll=!1,this.memberIdSelected=[],this.memberIdNotSelected=[]},handleScroll:function(t){if(!this.stopLoadData&&!this.loading){var e=this.$refs[t];e.scrollTop+e.clientHeight+100>=e.scrollHeight&&this.searchTeamMembers(!0)}},updateSelectedUser:function(t,e,a){var n;this.isSelectAll&&(this.usersSelected=this.teamMembers.reduce(function(t,e){return a.includes(e.id)?t.push(!1):t.push(e.id),t},[]),(n=this.teamMemberSelected).push.apply(n,yt()(t)))},handleLoading:function(t){this.loadingModal=t}},computed:{RewardPenalty:function(t){return x.a},isActiveBtnSearch:function(){return this.filter.region&&this.filter.department},isActiveBtnAddMember:function(){return this.memberIdSelected.length>0},isActiveBtnContinue:function(){return this.temp.list.length>0},isShowInputTeam:function(){return this.filter.department&&this.filter.department.split(",").includes("2")},countMemberSelected:function(){return this.isSelectAll?this.page.totalItem-this.memberIdNotSelected.length:this.memberIdSelected.length},countTempMember:function(){return this.temp.page.totalItem},titleModalAction:function(){switch(this.step){case 1:return"Danh sách thành viên";case 2:return"Thêm thành viên";case 3:return"edit"===this.actionModal?"Chỉnh sửa khen thưởng":"view"===this.actionModal?"Thông tin thưởng":"Tạo khen thưởng";default:return"Tạo khen thưởng"}},viewMode:function(){return"view"===this.actionModal},editMode:function(){return"edit"===this.actionModal}}};var Xt=function(t){a("NpTJ")},Wt=Object(A.a)(Qt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{staticClass:"custom-modal",attrs:{id:t.modalId,size:"lg",scrollable:"","hide-footer":"",title:t.titleModalAction,centered:"","header-class":"justify-content-center bd-radius-tr-8 bd-radius-tl-8","content-class":t.step<3?"bd-radius-8 h-90vh":"bd-radius-8"}},[1===t.step?[a("b-form",{staticClass:"mh-70 h-90 mb-3"},[a("b-row",{staticClass:"mb-3"},[a("b-col",{staticClass:"d-flex align-items-center",attrs:{md:"2"}},[a("a",{staticClass:"text-ghtk",attrs:{href:"javascript:void(0)"}},[t._v("\n              "+t._s(t.countTempMember)+" Thành viên\n            ")])]),t._v(" "),a("b-col",{staticClass:"px-0",attrs:{md:"7"}},[a("b-form-input",{attrs:{placeholder:"Tìm kiếm thành viên",autocomplete:"off"},on:{input:t.searchTempUser},model:{value:t.temp.keyword,callback:function(e){t.$set(t.temp,"keyword",e)},expression:"temp.keyword"}},[a("i",{staticClass:"fa fa-search"})])],1),t._v(" "),a("b-col",{attrs:{md:"3 text-right"}},[a("b-button",{staticClass:"btn btn-outline-ghtk",on:{click:t.showStepAddMember}},[a("i",{staticClass:"fa fa-plus"}),t._v(" Thêm thành viên\n            ")])],1)],1),t._v(" "),a("b-row",{staticClass:"h-90"},[a("b-col",{staticClass:"h-100",attrs:{md:"12"}},[a("div",{class:t.temp.list.length<1?"d-flex justify-content-center align-items-center h-100 border border-grey border-radius-1":"h-100"},[t.temp.list.length<1?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("p",{staticClass:"align-content-center text-center mb-1"},[t._v("Chưa có thành viên nào")]),t._v(" "),a("p",{staticClass:"align-content-center"},[t._v("\n                  Vui lòng bấm "),a("span",{staticClass:"text-ghtk"},[a("strong",[t._v("Thêm thành viên")])]),t._v(" để thêm vào tập thể\n                ")])]):a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"members-selected",staticClass:"h-100 mh-70 border-radius-1 border-grey border p-2 overflow-y-auto webkit-scrollbar-0",on:{scroll:function(e){return t.handleScrollUserTemp("members-selected")}}},t._l(t.temp.list,function(e,n){return a("b-row",{key:n,staticClass:"w-100 m-0 mb-3 d-flex justify-content-between"},[a("div",{staticClass:"d-inline-flex align-items-center"},[a("img",{staticClass:"image-gallery mr-1",attrs:{alt:"avatar",src:e.avatar?e.avatar:t.defaultAvatar}}),t._v(" "),a("div",{staticClass:"d-inline-block"},[a("div",{staticClass:"text-black font-weight-600"},[t._v("\n                        "+t._s(e.fullname)+"\n                      ")]),t._v(" "),a("div",{staticClass:"text-black position"},[t._v("\n                        "+t._s(e.position_name)+"\n                      ")])])]),t._v(" "),a("div",{staticClass:"d-flex align-items-center"},[a("i",{staticClass:"fa fa-times align-content-center cursor-pointer h-fit-content",on:{click:function(a){return t.removeMember(e)}}})])])}),1)])])],1)],1),t._v(" "),a("div",{staticClass:"mt-2 text-center"},[a("button",{staticClass:"btn w-20",class:t.isActiveBtnContinue?"btn-ghtk":"btn-secondary",attrs:{disabled:!t.isActiveBtnContinue},on:{click:function(e){t.step=3}}},[t._v("\n          Tiếp tục\n        ")])])]:t._e(),t._v(" "),2===t.step?[a("b-row",{staticClass:"mb-3 mh-70 h-90"},[a("b-col",{staticClass:"mh-50 text-left",attrs:{md:"12"}},[a("div",{staticClass:"form-group"},[a("b-row",{staticClass:"m-0 justify-content-between"},[a("label",{staticClass:"text-black"},[t._v("Khu vực "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("div",{staticClass:"row filter pb-2 pl-2 pr-2 input-border area-filter"},[a("div",{staticClass:"mb-1 pl-1 pr-1 input-filter"},[a("MultiSelectRegionCustomTagName",{attrs:{customClass:"multiselect-ghtk multiselect-no-horizontal",autoClose:!0,hideSelected:!1,regions:t.filter.region?t.filter.region:"",selectLabel:"",customTagName:!0},on:{handleSelectedRegion:t.handleSelectedRegion}})],1),t._v(" "),a("div",{staticClass:"mb-1 pl-1 pr-1 input-filter"},[a("MultiSelectProvinceCustomTagName",{attrs:{customClass:"multiselect-ghtk multiselect-no-horizontal","province-ids":t.filter.province,region:t.filter.region,"auto-close":!0,hideSelected:!1,customTagName:!0},on:{handleProvinceSelected:t.handleSelectedProvince}})],1),t._v(" "),a("div",{staticClass:"mb-1 pl-1 input-filter"},[a("MultiSelectStationCustomTagName",{staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{"province-ids":t.filter.province,autoClose:!0,hideSelected:!1,customTagName:!0},on:{input:t.handleStationSelected}})],1)])]),t._v(" "),a("b-row",{staticClass:"m-0 justify-content-between"},[a("label",{staticClass:"text-black"},[t._v("Bộ phận "),a("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),a("div",{staticClass:"row filter pb-2 pl-2 pr-2 input-border department-filer"},[a("div",{staticClass:"mb-1 pl-1 pr-1 input-filter"},[a("MultiSelectDepartmentCustomTagName",{staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{"department-ids":t.filter.department,"auto-close":!0,hideSelected:!1,customTagName:!0,placeholder:"Bộ phận"},on:{handleDepartmentSelected:t.handleDepartmentSelected}})],1)])]),t._v(" "),a("b-row",{staticClass:"m-0 justify-content-between"},[a("label",{staticClass:"text-black"},[t._v("Vị trí")]),t._v(" "),a("div",{staticClass:"row filter pb-2 pl-2 pr-2 input-border position-filter"},[a("div",{staticClass:"mb-1 pl-1 pr-1 input-filter"},[a("MultiSelectPositionCustomTagName",{staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{"department-ids":t.filter.department,"position-ids":t.filter.position,autoClose:!0,hideSelected:!1,customTagName:!0,placeholder:"Vị trí"},on:{handlePositionSelected:t.handlePositionSelected}})],1)])]),t._v(" "),t.isShowInputTeam?a("b-row",{staticClass:"m-0 justify-content-between"},[a("label",{staticClass:"text-black"},[t._v("Team")]),t._v(" "),a("div",{staticClass:"row filter pb-2 pl-2 pr-2 input-border position-filter"},[a("div",{staticClass:"mb-1 pl-1 pr-1 input-filter"},[a("MultiSelectTeam",{staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{autoClose:!0,hideSelected:!1,placeholder:"Team"},on:{handleTeamSelected:t.handleTeamSelected}})],1)])]):t._e(),t._v(" "),a("b-row",{staticClass:"justify-content-center mt-2"},[a("button",{staticClass:"btn rounded w-20",class:t.isActiveBtnSearch?"btn-ghtk":"btn-secondary",attrs:{disabled:!t.isActiveBtnSearch},on:{click:function(e){return t.searchTeamMembers(!1)}}},[a("i",{staticClass:"fa fa-filter"}),t._v(" Tìm kiếm\n              ")])]),t._v(" "),a("b-row",{staticClass:"mt-2"},[a("b-col",{staticClass:"text-black",attrs:{md:"6"}},[a("strong",[t._v("Danh sách tìm kiếm")])]),t._v(" "),a("b-col",{staticClass:"text-right",attrs:{md:"6"}},[t.isSelectAll?a("a",{staticClass:"text-ghtk",attrs:{href:"javascript:void(0)"},on:{click:t.removeAllUser}},[t._v("\n                  Bỏ chọn tất cả\n                ")]):a("a",{staticClass:"text-ghtk",attrs:{href:"javascript:void(0)"},on:{click:t.selectAllUser}},[t._v("\n                  Chọn tất cả\n                ")])])],1),t._v(" "),a("b-row",{staticClass:"mt-2"},[a("b-col",[a("b-form-input",{attrs:{placeholder:"Tìm kiếm thành viên",autocomplete:"off"},on:{input:t.searchTeamMembersWithKeyword},model:{value:t.filter.keyword,callback:function(e){t.$set(t.filter,"keyword",e)},expression:"filter.keyword"}},[a("i",{staticClass:"fa fa-search"})])],1)],1)],1),t._v(" "),t.loading?a("div",{staticClass:"d-flex justify-content-center h-50 position-relative"},[a("em",{staticClass:"fa fa-spin fa-spinner align-content-center text-ghtk"})]):t.teamMembers.length<1?a("div",{staticClass:"d-flex justify-content-center h-50 position-relative"},[a("p",{staticClass:"align-content-center"},[t._v("Vui lòng nhập thông tin để tìm kiếm")])]):a("div",{ref:"filter-result",staticClass:"team-member-list overflow-y-auto",class:{"show-input-team":t.isShowInputTeam},on:{scroll:function(e){return t.handleScroll("filter-result")}}},t._l(t.teamMembers,function(e,n){return a("b-row",{key:n,staticClass:"d-flex w-100 m-0 justify-content-between mb-3"},[a("div",{staticClass:"d-inline-flex align-items-center"},[a("img",{staticClass:"image-gallery mr-1",attrs:{alt:"avatar",src:e.avatar?e.avatar:t.defaultAvatar}}),t._v(" "),a("div",{staticClass:"d-inline-block"},[a("div",{staticClass:"text-black font-weight-600"},[t._v("\n                    "+t._s(e.fullname)+"\n                  ")]),t._v(" "),a("div",{staticClass:"text-black position"},[t._v("\n                    "+t._s(e.position_name)+"\n                  ")])])]),t._v(" "),a("b-checkbox",{ref:"select-user-"+e.id,refInFor:!0,staticClass:"mr-1 checkbox-ghtk checkbox-circle",attrs:{name:"select-user-"+e.id,value:e.id},on:{input:function(a){return t.handleSelectedTeamMember(e,n)}},model:{value:t.usersSelected[n],callback:function(e){t.$set(t.usersSelected,n,e)},expression:"usersSelected[index]"}})],1)}),1)])],1),t._v(" "),a("div",{staticClass:"mt-1 text-center"},[a("button",{staticClass:"btn btn-outline-success mr-1 w-20",attrs:{"data-style":"zoom-out"},on:{click:function(e){t.step--}}},[t._v("\n          Quay lại\n        ")]),t._v(" "),a("button",{staticClass:"btn ml-4 w-fit-content position-relative z-1000",class:t.isActiveBtnAddMember?"btn-ghtk":"btn-secondary",attrs:{"data-style":"zoom-out",disabled:!t.isActiveBtnAddMember},on:{click:t.saveUserTemp}},[t._v("\n          Thêm thành viên "),t.countMemberSelected>0?a("span",[t._v("("+t._s(t.countMemberSelected)+" người)")]):t._e()])])]:t._e(),t._v(" "),3===t.step?a("RewardCollectiveData",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingModal,expression:"loadingModal"}],ref:"RewardCollectiveData",attrs:{tempTeamId:t.temp.teamId,actionModal:t.actionModal,fStarType:t.RewardPenalty.fStarTypes.reward,typeOptions:t.typeRewardOptions,memberIdNotSelected:t.memberIdNotSelected,memberIdSelected:t.memberIdSelected,isSelectAll:t.isSelectAll,formModalOld:t.formModalOld,viewMode:t.viewMode,dataReward:t.dataReward},on:{prevStep:t.prevStep,loading:t.handleLoading,reloadListFStar:t.reloadListFStar}}):t._e()],2)],1)},[],!1,Xt,"data-v-e324b56c",null).exports,Jt={name:"ManageFStarReward",mixins:[p.a],components:{ModalCreateCollectiveReward:Wt,ModalSelectProposalType:_t,ModalCreateFStarProposal:ft,ModalPenaltyConfirm:Z.a,ModalRewardConfirm:J.a,Progress:W.a,MultiSelectDepartment:T.a,MultiSelectPosition:D.a,MultiSelectProvince:I.a,MultiSelectRegion:P.a,MultiSelectStation:E.a,MultiSelectRewardPenaltyStatus:N,PenaltyCardInfo:$,ProposalLogs:j,RewardCollectiveInfo:K,RewardPersonalInfo:Y,SingleSelectUser:V.a,SingleSelectRewardPenaltyType:X},data:function(){return{typeRewardOptions:[],typePenaltyOptions:[],titleToast:{success:"Thành công",error:"Lỗi",warning:"Cảnh báo"},filter:{type:x.a.rewardPenaltyTypes.type_reward_collective,recompense_type:x.a.recompenseTypeName(x.a.rewardPenaltyTypes.type_reward_collective),region:null,province:null,station:null,department:null,position:null,code:null,userId:null,activeDate:null,status:null},loading:!1,proposals:[],page:{currentPage:1,perPage:10,totalItem:0},RewardPenalty:x.a,dataReward:null,dataPenalty:null,titleModalConfirm:"",contentModalConfirm:"",actionModalConfirm:"",modalSelectTypeId:"modal-select-proposal-type"}},computed:{isRewardCollective:function(){return this.filter.type===x.a.rewardPenaltyTypes.type_reward_collective}},watch:{"page.perPage":function(){this.changePage(1)}},methods:{getTypeReward:function(){var t=this;return k()(C.a.mark(function e(){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.getTypeReward().then(function(e){e.data.success?t.typeRewardOptions=e.data.data:S.a.showMessage(e.data.message,"error")}).catch(function(t){S.a.showMessage(t.response.data.message,"error")});case 2:case"end":return e.stop()}},e,t)}))()},getTypePenalty:function(){var t=this;return k()(C.a.mark(function e(){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.getTypePenalty().then(function(e){e.data.success?t.typePenaltyOptions=e.data.data:S.a.showMessage(e.data.message,"error")}).catch(function(t){S.a.showMessage(t.response.data.message,"error")});case 2:case"end":return e.stop()}},e,t)}))()},handleShowModalRewardAction:function(){this.dataReward={},this.getTypeReward(),this.$bvModal.show("modal-reward-f-star-create")},handleShowModalPenaltyAction:function(){this.dataPenalty={},this.getTypePenalty(),this.$bvModal.show("modal-penalty-f-star-create")},handleSelectedRegion:function(t){this.filter.region=t?t.map(function(t){return t.id}).toString():""},handleSelectedProvince:function(t){this.filter.province=t?t.map(function(t){return t.id}).toString():""},handleStationSelected:function(t){this.filter.station=t?t.map(function(t){return t.id}).toString():""},handleDepartmentSelected:function(t){this.filter.department=t?t.map(function(t){return t.id}).toString():""},handlePositionSelected:function(t){this.filter.position=t?t.map(function(t){return t.id}).toString():""},validate:function(){return!!this.filter.activeDate||(S.a.showMessage("Không được để trống ngày thưởng/phạt","warning",this.titleToast.error),!1)},convertDataFilter:function(){var t=b()({},this.filter);return t.code=t.code?t.code:null,t.user_id=t.userId?t.userId:null,t.department_ids=t.department?t.department.split(","):null,t.position_ids=t.position?t.position.split(","):null,t.regions=t.region?t.region.split(","):null,t.province_ids=t.province?t.province.split(","):null,t.station_ids=t.station?t.station.split(","):null,t.status=t.status?t.status.split(","):null,t.recompense_type=t.recompense_type?t.recompense_type:null,t.type!==x.a.rewardPenaltyTypes.type_penalty_card&&(t.type_fstar=t.type?t.type:null),t.activeDate&&(t.from=S.a.formatDate(t.activeDate.start,"YYYY-MM-DD"),t.to=S.a.formatDate(t.activeDate.end,"YYYY-MM-DD")),delete t.activeDate,t},search:function(){var t=this;return k()(C.a.mark(function e(){var a,n,i,s;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.validate()){e.next=2;break}return e.abrupt("return");case 2:return t.loading=!0,a=t.convertDataFilter(),n={page:t.page.currentPage,limit:t.page.perPage},i=b()({},a,n),e.prev=6,i.type===x.a.rewardPenaltyTypes.type_penalty_card&&(i.type=x.a.rewardPenaltyTypes.type_reward_personal),e.next=10,M.a.getManagerData(i);case 10:(s=e.sent).data.success&&(t.proposals=s.data.data,t.page.totalItem=s.data.total,t.page.currentPage=s.data.current_page,t.page.perPage=s.data.per_page),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),S.a.showMessage(e.t0.response.data.message||"Không lấy được danh sách đề xuất!","error",t.titleToast.error);case 17:return e.prev=17,t.loading=!1,e.finish(17);case 20:case"end":return e.stop()}},e,t,[[6,14,17,20]])}))()},changePage:function(t){this.page.currentPage=t,this.search()},changeType:function(t){switch(t.id){case x.a.rewardPenaltyTypes.type_reward_personal:case x.a.rewardPenaltyTypes.type_reward_collective:this.getTypeReward();break;case x.a.rewardPenaltyTypes.type_penalty_card:this.getTypePenalty()}t&&(this.filter.type=t.id,this.filter.recompense_type=x.a.recompenseTypeName(t.id)),this.filter.type===x.a.rewardPenaltyTypes.type_reward_collective&&(this.filter.region=null,this.filter.province=null,this.filter.station=null,this.filter.department=null,this.filter.position=null),this.search()},getDefaultActiveDate:function(){return f()().date()>=21?{start:new Date(f()().year(),f()().month()-1,21),end:new Date(f()().year(),f()().month()+1,20)}:{start:new Date(f()().year(),f()().month()-2,21),end:new Date(f()().year(),f()().month(),20)}},viewInfo:function(t){switch(this.filter.type){case x.a.rewardPenaltyTypes.type_reward_personal:this.dataReward=t,this.$bvModal.show("modal-reward-f-star-view");break;case x.a.rewardPenaltyTypes.type_reward_collective:this.dataReward=t,this.$refs.modalViewCollectiveReward.step=3,this.$bvModal.show("modal-view-collective-reward");break;case x.a.rewardPenaltyTypes.type_penalty_card:this.dataPenalty=t,this.$bvModal.show("modal-penalty-f-star-view")}},edit:function(t){var e=this;return k()(C.a.mark(function a(){return C.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:a.t0=e.filter.type,a.next=a.t0===x.a.rewardPenaltyTypes.type_reward_personal?3:a.t0===x.a.rewardPenaltyTypes.type_reward_collective?7:a.t0===x.a.rewardPenaltyTypes.type_penalty_card?15:19;break;case 3:return e.$refs.modalEditPersonalReward.dataReward=t,e.$refs.modalEditPersonalReward.handle(),e.$bvModal.show("modal-reward-f-star-edit"),a.abrupt("break",20);case 7:return e.dataReward=t,e.$refs.modalEditCollectiveReward.resetFilter(),e.$refs.modalEditCollectiveReward.resetTempData(),e.$refs.modalEditCollectiveReward.step=1,e.$bvModal.show("modal-edit-collective-reward"),a.next=14,e.$refs.modalEditCollectiveReward.getTempTeamId(t.id);case 14:return a.abrupt("break",20);case 15:return e.$refs.modalEditPenaltyCard.dataReward=t,e.$refs.modalEditPenaltyCard.handle(),e.$bvModal.show("modal-penalty-f-star-edit"),a.abrupt("break",20);case 19:return a.abrupt("break",20);case 20:case"end":return a.stop()}},a,e)}))()},approveReward:function(t){this.dataReward=t,this.titleModalConfirm="Xác nhận duyệt khen thưởng",this.contentModalConfirm="Bạn có chắc chắn muốn duyệt khen thưởng ?",this.actionModalConfirm="approve",this.$bvModal.show("modal-action-reward-confirm")},confirmReward:function(t){this.dataReward=t,this.titleModalConfirm="Xác nhận chốt thưởng",this.contentModalConfirm="Bạn có chắc chắn muốn chốt thưởng cho đề xuất này?",this.actionModalConfirm="approve",this.$bvModal.show("modal-action-reward-confirm")},removeReward:function(t){this.dataReward=t,this.titleModalConfirm="Xác nhận xóa khen thưởng",this.contentModalConfirm="Bạn có chắc chắn muốn xóa khen thưởng ?",this.actionModalConfirm="remove",this.$bvModal.show("modal-action-reward-confirm")},cancelReward:function(t){this.dataReward=t,this.titleModalConfirm="Xác nhận từ chối khen thưởng",this.contentModalConfirm="Bạn có chắc chắn muốn từ chối khen thưởng ?",this.actionModalConfirm="cancel",this.$bvModal.show("modal-action-reward-confirm")},cancelPenalty:function(t){this.dataPenalty=t,this.titleModalConfirm="Xác nhận bỏ phạt",this.actionModalConfirm="cancel",this.$bvModal.show("modal-action-penalty-confirm")},showModalSelectType:function(){this.$bvModal.show(this.modalSelectTypeId)},openModalCreateProposal:function(t){switch(t){case"collective":this.$refs.modalCreateCollectiveReward.resetData(),this.$refs.modalCreateCollectiveReward.resetTempData(),this.$refs.modalCreateCollectiveReward.resetFilter(),this.$refs.modalCreateCollectiveReward.step=1,this.$bvModal.show("modal-create-collective-reward");break;case"personal":this.handleShowModalRewardAction();break;case"penalty":this.handleShowModalPenaltyAction()}}},created:function(){this.filter.activeDate=this.getDefaultActiveDate(),this.search(),this.modalSelectTypeId=S.a.generateUniqueId(this.modalSelectTypeId)}};var Zt=function(t){a("fBxE")},te=Object(A.a)(Jt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isRewardCollective?t._e():a("div",{staticClass:"row filter pb-2 pl-2 pr-2 justify-content-between input-border first-line-filter"},[a("div",{staticClass:"mb-1 pl-1 pr-1 input-filter"},[a("MultiSelectRegion",{attrs:{customClass:"multiselect-ghtk multiselect-no-horizontal",autoClose:!0,hideSelected:!0,regions:t.filter.region?t.filter.region:""},on:{handleSelectedRegion:t.handleSelectedRegion}})],1),t._v(" "),a("div",{staticClass:"mb-1 pl-1 pr-1 input-filter"},[a("MultiSelectProvince",{attrs:{customClass:"multiselect-ghtk multiselect-no-horizontal","province-ids":t.filter.province,region:t.filter.region,"auto-close":!0,"hide-select":!0},on:{handleProvinceSelected:t.handleSelectedProvince}})],1),t._v(" "),a("div",{staticClass:"mb-1 pl-1 input-filter"},[a("MultiSelectStation",{staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{"province-ids":t.filter.province,autoClose:!0,hideSelected:!0},on:{input:t.handleStationSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 pl-1 pr-1 input-filter"},[a("MultiSelectDepartment",{staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{"department-ids":t.filter.department,"auto-close":!0,"hide-selected":!0,placeholder:"Bộ phận"},on:{handleDepartmentSelected:t.handleDepartmentSelected}})],1),t._v(" "),a("div",{staticClass:"mb-1 pl-1 pr-1 input-filter"},[a("MultiSelectPosition",{staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{"department-ids":t.filter.department,"position-ids":t.filter.position,autoClose:!0,hideSelected:!0,placeholder:"Vị trí"},on:{handlePositionSelected:t.handlePositionSelected}})],1)]),t._v(" "),a("div",{staticClass:"row filter pb-2 pl-2 pr-2 justify-content-between input-border second-line-filter"},[a("div",{staticClass:"mb-1 pl-1 pr-1 input-filter"},[a("SingleSelectRewardPenaltyType",{attrs:{disabled:!1},on:{onChangeType:t.changeType}})],1),t._v(" "),a("div",{staticClass:"mb-1 pl-1 pr-1 input-filter"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.code,expression:"filter.code"}],staticClass:"form-control",attrs:{placeholder:"Mã đề xuất",disabled:!1},domProps:{value:t.filter.code},on:{input:function(e){e.target.composing||t.$set(t.filter,"code",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"mb-1 pr-1 input-filter"},[a("SingleSelectUser",{staticClass:"multiselect-ghtk multiselect-no-horizontal",attrs:{placeholder:"username, Họ tên"},on:{onChange:function(e){t.filter.userId=e?e.id:null}}})],1),t._v(" "),a("div",{staticClass:"mb-1 pl-1 pr-1 input-filter"},[a("MultiSelectRewardPenaltyStatus",{attrs:{rewardPenaltyType:t.filter.type},on:{onChangeStatus:function(e){t.filter.status=e?e.map(function(t){return t.id}).toString():null}}})],1),t._v(" "),a("div",{staticClass:"mb-1 pl-1 pr-1 input-filter"},[a("v-date-picker",{attrs:{mode:"range",locale:"vi",color:"green","input-props":{placeholder:"Ngày thưởng/phạt",style:"font-size:14px; line-height: unset",class:"form-control rounded"},popover:{visibility:"focus"}},model:{value:t.filter.activeDate,callback:function(e){t.$set(t.filter,"activeDate",e)},expression:"filter.activeDate"}})],1),t._v(" "),a("div",{staticClass:"text-right input-filter pl-1"},[a("button",{staticClass:"btn btn-ghtk rounded w-100",on:{click:t.search}},[t._v("Tìm kiếm")])])]),t._v(" "),a("div",{staticClass:"table-sticky mh-62 table-data"},[a("table",{staticClass:"table table-sm mb-0 bordered",attrs:{"aria-describedby":"list union offer"}},[t._m(0),t._v(" "),a("tbody",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"position-relative"},[t._l(t.proposals,function(e,n){return a("tr",{key:n},[t.filter.type===t.RewardPenalty.rewardPenaltyTypes.type_reward_personal?a("td",{staticClass:"info"},[t.filter.type===t.RewardPenalty.rewardPenaltyTypes.type_reward_personal?a("RewardPersonalInfo",{attrs:{proposal:e},on:{viewInfo:function(a){return t.viewInfo(e)}}}):t._e()],1):t._e(),t._v(" "),t.filter.type===t.RewardPenalty.rewardPenaltyTypes.type_reward_collective?a("td",{staticClass:"info"},[t.filter.type===t.RewardPenalty.rewardPenaltyTypes.type_reward_collective?a("RewardCollectiveInfo",{attrs:{proposal:e},on:{viewInfo:function(a){return t.viewInfo(e)}}}):t._e()],1):t._e(),t._v(" "),t.filter.type===t.RewardPenalty.rewardPenaltyTypes.type_penalty_card?a("td",{staticClass:"info"},[t.filter.type===t.RewardPenalty.rewardPenaltyTypes.type_penalty_card?a("PenaltyCardInfo",{attrs:{proposal:e},on:{viewInfo:function(a){return t.viewInfo(e)}}}):t._e()],1):t._e(),t._v(" "),t.filter.type===t.RewardPenalty.rewardPenaltyTypes.type_reward_personal?a("td",[a("h5",{staticClass:"text-ghtk mt-1 pt-1"},[t._v("ĐX."+t._s(e.id)+" - Thưởng cá nhân - "+t._s(e.category_name))]),t._v(" "),a("Progress",{attrs:{processing:e.processing,title:"d-none",customClass:"new-f-star"}}),t._v(" "),a("h5",{staticClass:"text-black font-weight-500 font-14 mb-2"},[t._v("Chi tiết log")]),t._v(" "),a("ProposalLogs",{attrs:{dataLogs:e.log}})],1):t._e(),t._v(" "),t.filter.type===t.RewardPenalty.rewardPenaltyTypes.type_reward_collective?a("td",[a("h5",{staticClass:"text-ghtk mt-1 pt-1"},[t._v("ĐX."+t._s(e.id)+" - Thưởng tập thể - "+t._s(e.category_name))]),t._v(" "),a("Progress",{attrs:{processing:e.processing,title:"d-none",customClass:"new-f-star"}}),t._v(" "),a("h5",{staticClass:"text-black font-weight-500 font-14 mb-2"},[t._v("Chi tiết log")]),t._v(" "),a("ProposalLogs",{attrs:{dataLogs:e.log}})],1):t._e(),t._v(" "),t.filter.type===t.RewardPenalty.rewardPenaltyTypes.type_penalty_card?a("td",[a("h5",{staticClass:"text-ghtk mt-1 pt-1"},[t._v("ĐX."+t._s(e.id)+" - Thẻ phạt - "+t._s(e.category_name))]),t._v(" "),a("h5",{staticClass:"text-black font-weight-500 font-14 mb-2"},[t._v("Chi tiết log")]),t._v(" "),a("ProposalLogs",{attrs:{dataLogs:e.log}})],1):t._e(),t._v(" "),a("td",{staticClass:"border-left"},[a("div",{staticClass:"action d-flex flex-column align-items-center mt-3"},[e.permission.delete?a("button",{staticClass:"btn btn-outline-success btn-outline-bold font-weight-bold pt-1 pb-1",on:{click:function(a){return t.removeReward(e)}}},[t._v("\n              Xóa thưởng\n            ")]):t._e(),t._v(" "),e.permission.update?a("button",{staticClass:"btn btn-outline-success btn-outline-bold font-weight-bold pt-1 pb-1",on:{click:function(a){return t.edit(e)}}},[t._v("\n              Chỉnh sửa\n            ")]):t._e(),t._v(" "),e.permission.approve?a("button",{staticClass:"btn btn-outline-success btn-outline-bold font-weight-bold pt-1 pb-1",on:{click:function(a){return t.approveReward(e)}}},[t._v("\n              Duyệt\n            ")]):t._e(),t._v(" "),e.permission.confirm?a("button",{staticClass:"btn btn-outline-success btn-outline-bold font-weight-bold pt-1 pb-1",on:{click:function(a){return t.confirmReward(e)}}},[t._v("\n              Chốt thưởng\n            ")]):t._e(),t._v(" "),e.permission.reject?a("button",{staticClass:"btn btn-outline-danger btn-outline-bold font-weight-bold pt-1 pb-1",on:{click:function(a){return t.cancelReward(e)}}},[t._v("\n              Từ chối\n            ")]):t._e(),t._v(" "),e.permission.cancel?a("button",{staticClass:"btn btn-outline-danger btn-outline-bold font-weight-bold pt-1 pb-1",on:{click:function(a){return t.cancelPenalty(e)}}},[t._v("\n              Bỏ phạt\n            ")]):t._e()])])])}),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]},[t._m(1)]),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:!t.loading&&0===t.proposals.length,expression:"!loading && proposals.length === 0"}]},[t._m(2)])],2)])]),t._v(" "),a("div",{staticClass:"d-flex justify-content-between pt-3"},[a("div",{staticClass:"paging mt-1 d-block w-75"},[a("div",{staticClass:"col text-left p-0 mt-2"},[a("b",[t._v("\n          Bản ghi/ trang\n        ")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.page.perPage,expression:"page.perPage"}],staticClass:"form-control form-control-sm w-4re text-ghtk rounded border-ghtk d-inline-block",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.page,"perPage",e.target.multiple?a:a[0])}}},[a("option",[t._v("5")]),t._v(" "),a("option",[t._v("10")]),t._v(" "),a("option",[t._v("25")]),t._v(" "),a("option",[t._v("50")]),t._v(" "),a("option",[t._v("100")])]),t._v(" "),a("div",{staticClass:"z-0 d-inline-block"},[a("b-pagination",{staticClass:"paginator-ghtk mb-0",attrs:{size:"sm",align:"left","total-rows":+t.page.totalItem,"per-page":+t.page.perPage},on:{change:t.changePage},model:{value:t.page.currentPage,callback:function(e){t.$set(t.page,"currentPage",e)},expression:"page.currentPage"}})],1)])]),t._v(" "),a("div",[a("button",{staticClass:"btn btn-ghtk",on:{click:function(e){return t.showModalSelectType()}}},[a("em",{staticClass:"ion ion-ios-add"}),t._v(" Thêm đề xuất\n      ")])])]),t._v(" "),a("ModalRewardConfirm",{attrs:{title:t.titleModalConfirm,content:t.contentModalConfirm,action:t.actionModalConfirm,dataReward:t.dataReward},on:{reloadListFstar:t.search}}),t._v(" "),a("ModalPenaltyConfirm",{attrs:{title:t.titleModalConfirm,content:t.contentModalConfirm,action:t.actionModalConfirm,dataPenalty:t.dataPenalty},on:{reloadListFstar:t.search}}),t._v(" "),a("ModalSelectProposalType",{attrs:{modalId:t.modalSelectTypeId},on:{confirm:t.openModalCreateProposal}}),t._v(" "),a("ModalCreateCollectiveReward",{ref:"modalCreateCollectiveReward",attrs:{actionModal:"create"},on:{reloadListFStar:t.search}}),t._v(" "),a("ModalCreateCollectiveReward",{ref:"modalEditCollectiveReward",attrs:{modalId:"modal-edit-collective-reward",actionModal:"edit",dataReward:t.dataReward},on:{reloadListFStar:t.search}}),t._v(" "),a("ModalCreateCollectiveReward",{ref:"modalViewCollectiveReward",attrs:{modalId:"modal-view-collective-reward",actionModal:"view",dataReward:t.dataReward}}),t._v(" "),a("ModalCreateFStarProposal",{attrs:{actionModal:"create",dataReward:t.dataReward,fStarType:t.RewardPenalty.fStarTypes.reward,typeOptions:t.typeRewardOptions},on:{reloadListFStar:t.search}}),t._v(" "),a("ModalCreateFStarProposal",{ref:"modalEditPersonalReward",attrs:{actionModal:"edit",dataReward:t.dataReward,fStarType:t.RewardPenalty.fStarTypes.reward,typeOptions:t.typeRewardOptions},on:{reloadListFStar:t.search}}),t._v(" "),a("ModalCreateFStarProposal",{ref:"modalViewPersonalReward",attrs:{actionModal:"view",dataReward:t.dataReward,fStarType:t.RewardPenalty.fStarTypes.reward,typeOptions:t.typeRewardOptions},on:{reloadListFStar:t.search}}),t._v(" "),a("ModalCreateFStarProposal",{attrs:{actionModal:"create",dataReward:t.dataPenalty,fStarType:t.RewardPenalty.fStarTypes.penalty,typeOptions:t.typePenaltyOptions},on:{reloadListFStar:t.search}}),t._v(" "),a("ModalCreateFStarProposal",{ref:"modalEditPenaltyCard",attrs:{actionModal:"edit",dataReward:t.dataPenalty,fStarType:t.RewardPenalty.fStarTypes.penalty,typeOptions:t.typePenaltyOptions},on:{reloadListFStar:t.search}}),t._v(" "),a("ModalCreateFStarProposal",{ref:"modalViewPenaltyCard",attrs:{actionModal:"view",dataReward:t.dataPenalty,fStarType:t.RewardPenalty.fStarTypes.penalty,typeOptions:t.typePenaltyOptions},on:{reloadListFStar:t.search}})],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",{staticClass:"header-content"},[e("tr",{staticClass:"text-center text-black"},[e("th",{staticClass:"w-30"},[e("b",[this._v("Đề xuất")])]),this._v(" "),e("th",{staticClass:"border-right border-left"},[e("b",[this._v("Trạng thái")])]),this._v(" "),e("th",{staticClass:"w-15"},[e("b",[this._v("Thao tác")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"font-weight-bold text-center no-record",attrs:{colspan:"3"}},[e("div",{staticClass:"my-5"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"font-weight-bold text-center no-record",attrs:{colspan:"3"}},[e("div",{staticClass:"my-5"},[this._v("Không tìm thấy đề xuất !")])])}],!1,Zt,"data-v-64d7a020",null).exports,ee={name:"evaluation-employee-manager",mixins:[p.a],components:{ManageFStarReward:te,SingleSelectProfileRegion:c.a,SingleSelectModule:i.a,SingleSelectProvince:s.a,SingleSelectStation:o.a,SingleSelectPosition:r.a,SingleSelectDepartment:l.a,SingleSelectWorkType:d.a,Multiselect:v.a},props:{scrollMode:{default:!1,type:Boolean}},data:function(){return{tabs:{fStar:"f-star",reward:"reward"},currentTab:"reward",groupId:null,keyword:"",staff_code:"",region:"",provinceId:"",stationId:"",moduleId:"",departmentName:"",positionId:"",work_type_id:"",reward_status:"",penalty_status:"",evaluations:[],appLoading:!1,currentPage:1,totalItems:0,perPage:10,range_time:null,time_format:null,rangeConfig:{mode:"range",altInput:!0,dateFormat:"d-m-Y",altFormat:"d-m-Y"},evaluationDetail:"",URLExportedFile:"#",exportRight:!0,exporting:!1,exported:!1,downloaded:!1,URLExportedFileEvaluation:"#",exportRightEvaluation:!0,exportingEvaluation:!1,exportedEvaluation:!1,downloadedEvaluation:!1,codGroupIds:h.a.codGroupIds,status_id:{value:3,name:"Đang hoạt động"},statusIdOptions:[{value:1,name:"Không hoạt động"},{value:2,name:"Tạm khóa"},{value:3,name:"Đang hoạt động"}],statusRewardOptions:[{value:0,name:"Đề xuất"},{value:2,name:"Duyệt bởi Quản lý"},{value:3,name:"Duyệt bởi Trưởng bộ phân"},{value:1,name:"Từ chối"},{value:7,name:"Duyệt bởi Khối Nhân sự"}],statusPenaltyOptions:[{value:5,name:"Chốt phạt"},{value:6,name:"Bỏ phạt"}]}},created:function(){this.getStartEndFromTimeRange(),this.search(),this.getGroupIdOfUser()},computed:{totalPages:function(){return Math.ceil(this.totalItems/this.perPage)}},watch:{range_time:function(t,e){this.getStartEndFromTimeRange()}},methods:{isEnabled:function(t){return t===this.currentTab},switchTab:function(t){t===this.tabs.fStar?(this.currentTab=this.tabs.fStar,this.getStartEndFromTimeRange(),this.search(),this.getGroupIdOfUser()):this.currentTab=this.tabs.reward},getGroupIdOfUser:function(){var t=this;u.a.getGroupIdOfUser().then(function(e){e.data.success&&(t.groupId=e.data.data)}).catch(function(t){console.log(t)})},reverseFormatDate:function(t){return t.split("-").reverse().join("-")},exportRecompense:function(){var t=this,e={staff_code:this.staff_code,keyword:this.keyword,region:this.region,provinceId:this.provinceId,stationId:this.stationId,moduleId:this.moduleId,departmentName:this.departmentName,positionId:this.positionId,workTypeId:this.work_type_id,from:this.time_format.from,to:this.time_format.to};this.exporting=!0,n.a.exportRecompense(e).then(function(e){e.data.success?(t.exported=!0,t.exporting=!1,0===e.data.data.length?(t.$notify({group:"default",type:"text-dark bg-warning",title:"Không có dữ liệu thưởng phạt trong thời gian này!",text:e.data.message}),t.exported=!1):t.URLExportedFile=e.data.data.url):(t.$notify({group:"default",type:"text-dark bg-warning",title:"Xảy ra lỗi",text:e.data.message}),t.exporting=!1)})},checkJobStatus:function(t){var e=this,a=setInterval(function(){n.a.checkJobStatus({job_id:t}).then(function(t){t.data.success?"closed"===t.data.job_status&&(clearInterval(a),t.data.message?e.$notify({group:"default",type:"text-dark bg-warning",title:"Xảy ra lỗi",text:t.data.message}):(e.exportedEvaluation=!0,e.URLExportedFileEvaluation=t.data.file_path,e.$notify({group:"default",type:"text-white bg-primary",title:"Xuất file thành công",text:"Đã xuất xong file cọc"}),e.downloadedEvaluation=!1),e.exportingEvaluation=!1):(e.$notify({group:"default",type:"text-dark bg-warning",title:"Xảy ra lỗi",text:t.data.message}),clearInterval(a),e.exportingEvaluation=!1)})},2e3)},exportEvaluation:function(){var t=this,e={staff_code:this.staff_code,keyword:this.keyword,region:this.region,provinceId:this.provinceId,stationId:this.stationId,moduleId:this.moduleId,departmentName:this.departmentName,positionId:this.positionId,workTypeId:this.work_type_id,from:this.time_format.from,to:this.time_format.to};this.exportingEvaluation=!0,n.a.exportEvaluation(e).then(function(e){e.data.success?t.checkJobStatus(e.data.job_id):(t.$notify({group:"default",type:"text-dark bg-warning",title:"Xảy ra lỗi",text:e.data.message}),t.exportingEvaluation=!1)})},setDownloaded:function(){this.downloaded=!0,this.exported=!1},setEvaluationDownloaded:function(){this.downloadedEvaluation=!0,this.exportedEvaluation=!1},searchEvaluation:function(){this.currentPage=1,this.search()},gotoCodProfile:function(t,e){h.a.redirectProfile(t,e)},getStartEndFromTimeRange:function(){if(this.$route.query.from&&this.$route.query.from)return this.time_format={from:this.$route.query.from,to:this.$route.query.to},!0;if(!this.range_time){var t=new Date,e=new Date;return f()().date()>=21?(t=new Date(f()().year(),f()().month()-1,21),e=new Date(f()().year(),f()().month()+1,20)):(t=new Date(f()().year(),f()().month()-2,21),e=new Date(f()().year(),f()().month(),20)),this.time_format={from:f()(t).format("YYYY-MM-DD"),to:f()(e).format("YYYY-MM-DD")},!0}this.time_format={from:f()(this.range_time.start).format("YYYY-MM-DD"),to:f()(this.range_time.end).format("YYYY-MM-DD")}},search:function(){var t=this;this.appLoading=!0;var e={staff_code:this.staff_code,keyword:this.keyword,region:this.region,provinceId:this.provinceId,stationId:this.stationId,moduleId:this.moduleId,departmentName:this.departmentName,positionId:this.positionId,workTypeId:this.work_type_id,from:this.time_format.from,to:this.time_format.to,status_id:this.status_id.value,reward_status:this.reward_status.value,penalty_status:this.penalty_status.value,page:this.currentPage,limit:this.perPage};n.a.getEvaluationList(e).then(function(e){e.data.success&&(t.evaluations=e.data.data,t.totalItems=e.data.count)}).catch(function(t){console.log(t)}).then(function(){t.appLoading=!1})},setValueEvaluationDetail:function(t){this.evaluationDetail=t},checkGroupUser:function(t){return["12","14","17","18"].includes(t)},handleSelectedModule:function(t){this.moduleId=t?t.id:""},handleSelectedRegion:function(t){this.region=t?t.id:""},handleSelectedProvince:function(t){this.provinceId=t?t.id:""},handleSelectedStation:function(t){this.stationId=t?t.id:""},handleSelectedDepartment:function(t){this.departmentName=t?t.name:""},handleSelectedPosition:function(t){this.positionId=t?t.id:""},handleSelectedWorkType:function(t){this.work_type_id=t?t.id:""},handleSelectedRewardStatus:function(t){this.reward_status=t?t.id:""},handleSelectedPenaltyStatus:function(t){this.penalty_status=t?t.id:""}}};var ae=function(t){a("UxYm")},ne=Object(A.a)(ee,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",{staticClass:"top align-items-end mb-3"},[a("b-col",{attrs:{md:"5"}},[a("h4",{staticClass:"mb-3"},[t._v("Quản lý đánh giá nhân viên")])]),t._v(" "),a("b-col",{attrs:{md:"7 text-right mt-1"}},[a("div",{staticClass:"category-bar"},[a("div",{staticClass:"wrapper",class:t.isEnabled(t.tabs.fStar)?"enabled":"disabled",on:{click:function(e){return t.switchTab(t.tabs.fStar)}}},[a("div",{staticClass:"text-wrapper"},[t._v("Đánh giá F-Star")])]),t._v(" "),a("div",{staticClass:"wrapper",class:t.isEnabled(t.tabs.reward)?"enabled":"disabled",on:{click:function(e){return t.switchTab(t.tabs.reward)}}},[a("div",{staticClass:"text-wrapper"},[t._v("Đề xuất thưởng phạt")])])])])],1),t._v(" "),a("b-row",{staticClass:"ml-1"},[t.isEnabled(t.tabs.fStar)?a("div",{staticClass:"text-note"},[t._v("\n          Lưu ý: "),a("br"),t._v(" "),a("div",{staticClass:"pl-3"},[15===parseInt(t.groupId)?a("span",[t._v("- Thời gian đánh giá là tất cả các ngày trong tuần.")]):a("span",[t._v("\n                  - Chu kỳ 1: Từ 21 – 4 hàng tháng, thời gian đánh giá từ 5 – 8 hàng tháng. "),a("br"),t._v("\n                  - Chu kỳ 2: Từ 5 – 20 hàng tháng, thời gian đánh giá từ 21 – 24 hàng tháng.\n              ")]),a("br"),t._v("\n            - Chỉ hiển thị nhân viên đã làm việc nhiều hơn 10 ngày. "),a("br"),t._v("\n            - Chỉ hiển thị nhân viên dưới quyền quản lý. "),3!==parseInt(t.groupId)?a("span",[t._v("Vui lòng liên hệ HR để gán nhân viên.")]):t._e()])]):t._e()]),t._v(" "),t.isEnabled(t.tabs.fStar)?a("div",{staticClass:"seperate-xs my-1"}):t._e(),t._v(" "),t.isEnabled(t.tabs.fStar)?a("b-row",{staticClass:"h-col-50"},[a("b-col",{attrs:{md:"2"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.staff_code,expression:"staff_code"}],staticClass:"form-control",attrs:{placeholder:"Mã Profile",type:"number",min:"9",max:"12"},domProps:{value:t.staff_code},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchEvaluation.apply(null,arguments)},input:function(e){e.target.composing||(t.staff_code=e.target.value)}}})]),t._v(" "),a("b-col",{attrs:{md:"2"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"form-control",attrs:{type:"text",placeholder:"username, Họ tên"},domProps:{value:t.keyword},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchEvaluation.apply(null,arguments)},input:function(e){e.target.composing||(t.keyword=e.target.value)}}})]),t._v(" "),a("b-col",{staticClass:"z-5",attrs:{md:"2"}},[a("single-select-profile-region",{on:{handleSelectedRegion:t.handleSelectedRegion}})],1),t._v(" "),a("b-col",{staticClass:"z-5",attrs:{md:"2"}},[a("single-select-province",{attrs:{"custom-class":""},on:{handleSelectedProvince:t.handleSelectedProvince}})],1),t._v(" "),a("b-col",{staticClass:"z-5",attrs:{md:"2"}},[a("single-select-station",{attrs:{"province-id":t.provinceId},on:{handleSelectedStation:t.handleSelectedStation}})],1),t._v(" "),a("b-col",{staticClass:"z-5",attrs:{md:"2"}},[a("single-select-department",{on:{handleSelectedDepartment:t.handleSelectedDepartment}})],1),t._v(" "),a("b-col",{staticClass:"z-3",attrs:{md:"2"}},[a("single-select-position",{attrs:{departmentName:t.departmentName,"position-job":t.positionId},on:{handleSelectedPosition:t.handleSelectedPosition}})],1),t._v(" "),a("b-col",{staticClass:"z-3",attrs:{md:"2"}},[a("single-select-work-type",{attrs:{"position-job":t.positionId,"work-type-id":t.work_type_id},on:{handleSelectedWorkType:t.handleSelectedWorkType}})],1),t._v(" "),a("b-col",{staticClass:"z-3",attrs:{md:"2"}},[a("single-select-module",{attrs:{"station-id":t.stationId,"module-id":t.moduleId},on:{handleSelectedModule:t.handleSelectedModule}})],1),t._v(" "),a("b-col",{staticClass:"z-3",attrs:{md:"2"}},[a("div",{staticClass:"select-reward-status"},[a("multiselect",{attrs:{options:t.statusRewardOptions,disabled:!1,label:"name","track-by":"name",placeholder:"Trạng thái đề xuất thưởng",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn",searchable:!0},model:{value:t.reward_status,callback:function(e){t.reward_status=e},expression:"reward_status"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v("Trạng thái đề xuất thưởng")])])],1)]),t._v(" "),a("b-col",{staticClass:"z-3",attrs:{md:"2"}},[a("div",{staticClass:"select-penalty-status"},[a("multiselect",{attrs:{options:t.statusPenaltyOptions,disabled:!1,label:"name","track-by":"name",placeholder:"Trạng thái đề xuất phạt",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn",searchable:!0},model:{value:t.penalty_status,callback:function(e){t.penalty_status=e},expression:"penalty_status"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v("Trạng thái đề xuất phạt")])])],1)]),t._v(" "),a("b-col",{attrs:{md:"2"}},[a("v-date-picker",{attrs:{mode:"range",locale:"vi",color:"green","input-props":{placeholder:t.reverseFormatDate(t.time_format.from)+" - "+t.reverseFormatDate(t.time_format.to),style:"font-size:14px; line-height: unset"}},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search.apply(null,arguments)}},model:{value:t.range_time,callback:function(e){t.range_time=e},expression:"range_time"}})],1),t._v(" "),a("b-col",{staticClass:"z-3",attrs:{md:"2"}},[a("multiselect",{attrs:{options:t.statusIdOptions,placeholder:"Chọn trạng thái",label:"name","track-by":"name",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn",searchable:!0},model:{value:t.status_id,callback:function(e){t.status_id=e},expression:"status_id"}},[a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v("Chọn trạng thái")])])],1),t._v(" "),a("b-col",{staticClass:"z-3",attrs:{md:"2"}},[a("b-btn",{attrs:{variant:"ghtk"},on:{click:function(e){return t.searchEvaluation()}}},[a("i",{staticClass:"sidenav-icon ion ion-md-search"}),t._v(" Tìm kiếm\n          ")])],1)],1):t._e(),t._v(" "),t.isEnabled(t.tabs.fStar)?a("div",{staticClass:"mb-1 mt-3"},[a("div",{staticClass:"z-0 d-inline-block"},[a("b-pagination",{staticClass:"m-0",attrs:{size:"sm",align:"left","total-rows":t.totalItems,"per-page":t.perPage},on:{input:t.search},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("b",{staticClass:"float-right"},[t._v("Trang "+t._s(t.currentPage)+"/"+t._s(t.totalPages))])]):t._e(),t._v(" "),t.isEnabled(t.tabs.fStar)?a("div",{staticClass:"border rounded table-content",class:t.scrollMode&&"table-sticky"},[a("table",{staticClass:"table table-striped table-sm table-hover is_align_middle mih-10re m-0"},[a("thead",[a("tr",[a("th",[t._v("Kho")]),t._v(" "),a("th",[t._v("Mã nhân viên")]),t._v(" "),a("th",[t._v("Tên nhân viên")]),t._v(" "),a("th",[t._v("Số điện thoại")]),t._v(" "),a("th",[t._v("Username")]),t._v(" "),a("th",[t._v("Bộ phận")]),t._v(" "),15!==parseInt(t.groupId)?a("th",[t._v("Module")]):t._e(),t._v(" "),a("th",[t._v("Cần cải thiện")]),t._v(" "),a("th",[t._v("Bình thường")]),t._v(" "),a("th",[t._v("Đáng khen ngợi")]),t._v(" "),a("th",[t._v("Thẻ vàng")]),t._v(" "),a("th",[t._v("Thẻ đỏ")]),t._v(" "),a("th",[t._v("Thưởng")]),t._v(" "),15!==parseInt(t.groupId)?a("th",[t._v("Shop vote")]):t._e(),t._v(" "),a("th",[t._v("Action")])])]),t._v(" "),a("tbody",{directives:[{name:"loading",rawName:"v-loading",value:t.appLoading,expression:"appLoading"}],staticClass:"position-relative"},[t._l(t.evaluations,function(e,n){return a("tr",{key:n},[a("td",[t._v(t._s(e.station))]),t._v(" "),a("td",[t._v(t._s(e.staff_code))]),t._v(" "),a("td",[e.link_avatar?a("img",{staticClass:"rounded-circle",staticStyle:{"border-radius":"50%"},attrs:{src:e.link_avatar,width:"35",height:"35",alt:"avatar"}}):t._e(),t._v("\n                                  \n                              "),a("p",{staticClass:"member-info-item",class:t.codGroupIds.includes(parseInt(e.group_id))?"text-success-hover text-underline-hover cursor-pointer":"",on:{click:function(a){return t.gotoCodProfile(e.group_id,e.user_id)}}},[t._v("\n                                "+t._s(e.fullname)+" ")])]),t._v(" "),a("td",[t._v(t._s(e.tel))]),t._v(" "),a("td",[a("p",{staticClass:"member-info-item",class:t.codGroupIds.includes(parseInt(e.group_id))?"text-success-hover text-underline-hover cursor-pointer":"",on:{click:function(a){return t.gotoCodProfile(e.group_id,e.user_id)}}},[t._v("\n                                "+t._s(e.username)+" ")])]),t._v(" "),a("td",[t._v(t._s(e.department))]),t._v(" "),15!==parseInt(t.groupId)?a("td",[t._v(t._s(e.module))]):t._e(),t._v(" "),a("td",[t._v(t._s(e.manager.need_improve))]),t._v(" "),a("td",[t._v(t._s(e.manager.normal))]),t._v(" "),a("td",[t._v(t._s(e.manager.praise))]),t._v(" "),a("td",[t._v(t._s(e.recompense.yellow_card))]),t._v(" "),a("td",[t._v(t._s(e.recompense.red_card))]),t._v(" "),a("td",[t._v(t._s(e.recompense.reward))]),t._v(" "),15!==parseInt(t.groupId)?a("td",[t.checkGroupUser(e.group_id)?a("span",[t._v("\n                                "+t._s(Math.round(e.shop.average_vote))),a("i",{staticClass:"ion ion-ios-star yellow-icon"}),t._v("\n                                / "+t._s(e.shop.count_vote)+" lượt vote\n                                ")]):a("span",[t._v("Không có dữ liệu")])]):t._e(),t._v(" "),a("td",[a("router-link",{staticClass:"btn btn-sm btn-outline-ghtk",attrs:{to:{name:"detail-evaluation",params:{id:e.user_id},query:{from:t.time_format.from,to:t.time_format.to}}}},[a("i",{staticClass:"ion ion-md-eye"})])],1)])}),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:!(t.appLoading||t.evaluations&&t.evaluations.length),expression:"!appLoading && (!evaluations || !evaluations.length)"}]},[t._m(0)])],2)])]):t._e(),t._v(" "),t.isEnabled(t.tabs.reward)?a("div",[a("ManageFStarReward")],1):t._e()],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("td",{attrs:{colspan:"20"}},[e("div",{staticClass:"text-center"},[e("b",[this._v("Rất tiếc, không tìm thấy profile phù hợp !")])])])}],!1,ae,"data-v-f9505bc6",null);e.default=ne.exports},yYyc:function(t,e){},yfp4:function(t,e,a){"use strict";var n=a("Xxa5"),i=a.n(n),s=a("exGp"),o=a.n(s),r=a("7zFw"),l=a("RUzx"),c={name:"SelectJob",components:{Multiselect:a.n(l).a},props:{jobId:null,multiple:!1},data:function(){return{options:[],selectedOption:null}},mounted:function(){this.fetchOptions()},created:function(){},watch:{jobId:function(t,e){this.selectedOption=this.options.find(function(e){return e.id===t})}},methods:{fetchOptions:function(){var t=this;return o()(i.a.mark(function e(){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.getJobs();case 2:(a=e.sent).data.success?(t.options=a.data.data.map(function(t){return{id:t.id,name:t.name}}),n=t,t.selectedOption=t.options.find(function(t){return t.id===n.jobId})):console.log(a.data.message||"Không lấy được job");case 4:case"end":return e.stop()}},e,t)}))()},handleChange:function(t){this.$emit("selected-option-changed",t)}}},d=a("XyMi"),u=Object(d.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("multiselect",{attrs:{options:t.options,placeholder:"Chọn vị trí làm việc",label:"name","track-by":"name",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn",searchable:!0,multiple:t.multiple},on:{input:t.handleChange},model:{value:t.selectedOption,callback:function(e){t.selectedOption=e},expression:"selectedOption"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")])])],1)},[],!1,null,null,null);e.a=u.exports},ymRw:function(t,e){},yq5M:function(t,e){},z76f:function(t,e){},zIFd:function(t,e){},"zN+w":function(t,e,a){"use strict";var n=a("Zx67"),i=a.n(n),s=a("Zrlr"),o=a.n(s),r=a("wxAW"),l=a.n(r),c=a("zwoO"),d=a.n(c),u=a("Pf15"),h=a.n(u),p=a("NHnr"),m=function(t){function e(){return o()(this,e),d()(this,(e.__proto__||i()(e)).apply(this,arguments))}return h()(e,t),l()(e,null,[{key:"receiveMessage",value:function(t){var e=t.data;e&&p.default.$store.dispatch("setEvent",e)}},{key:"startListen",value:function(){window.postMessage?window.addEventListener?window.addEventListener("message",e.receiveMessage,!1):window.attachEvent("onmessage",e.receiveMessage):console.log("Không hỗ trợ function postMessage")}},{key:"sendMessage",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";e||(e=window.opener||window.parent),e&&e.postMessage(t,a)}}]),e}(a("MUME").a);m.urlAllow=["https://ghtk.me/","https://ghtk.me"],e.a=m},zfKv:function(t,e,a){"use strict";var n=a("Xxa5"),i=a.n(n),s=a("exGp"),o=a.n(s),r=a("RUzx"),l=a.n(r),c=a("agCp"),d={name:"single-select-worktype-for-user",components:{Multiselect:l.a},props:{positionJob:{},workTypeId:{},isDisabled:{type:Boolean}},data:function(){return{option:null,options:[]}},created:function(){var t=this;return o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.positionJob){e.next=3;break}return e.next=3,t.getWorkTypeByPositionJob(t.positionJob);case 3:case"end":return e.stop()}},e,t)}))()},watch:{positionJob:function(){var t=o()(i.a.mark(function t(e,a){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}return this.option=null,this.options=[],t.next=5,this.getWorkTypeByPositionJob(e);case 5:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),option:function(t,e){this.$emit("handleSelectedWorkType",t)},workTypeId:function(t,e){t?this.setSelectedOption():this.option=null}},methods:{setSelectedOption:function(){var t=this;this.workTypeId&&this.options&&this.options.length&&(this.option=this.options.find(function(e){return parseInt(e.id)===parseInt(t.workTypeId)}))},getWorkTypeByPositionJob:function(t){var e=this;return o()(i.a.mark(function a(){var n,s,o;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t){a.next=2;break}return a.abrupt("return");case 2:return n={position_id:t},a.prev=3,a.next=6,c.a.getWorkTypeByPositionJob(n);case 6:(s=a.sent).data.success?(o=[1,5,7,14,15,16],[79,80,98,318,319].includes(parseInt(t))?e.options=s.data.data.filter(function(t){return!o.includes(parseInt(t.id))}):e.options=s.data.data,e.workTypeId&&e.setSelectedOption()):e.options=[],a.next=13;break;case 10:a.prev=10,a.t0=a.catch(3),console.log(a.t0);case 13:case"end":return a.stop()}},a,e,[[3,10]])}))()}}},u=a("XyMi"),h=Object(u.a)(d,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"select-user-work-type"},[a("multiselect",{attrs:{options:t.options,disabled:t.isDisabled,label:"name","track-by":"name",placeholder:"Chọn kiểu nhân viên",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn",searchable:!0},on:{select:function(e){return t.$emit("select",e)}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")]),t._v(" "),a("span",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v("Chọn kiểu nhân viên")])])],1)},[],!1,null,null,null);e.a=h.exports},zmAe:function(t,e,a){"use strict";var n=a("7pbi"),i=a("hC/b"),s=this,o={props:{userId:{required:!0},type:{type:String,required:!0},dataInput:{default:"***"},source:{type:String,required:!0},placeHolder:{default:""}},name:"sensitive-label",components:{EyeButton:n.a},data:function(){return{inputValue:s.dataInput,isShowData:!1,isLoading:!1}},watch:{dataInput:function(t,e){this.inputValue=t}},computed:{},created:function(){this.inputValue=this.dataInput},methods:{getRawData:function(){this.isShowData=!0},setRawData:function(t){i.a.isEmpty(t)||(this.inputValue=t,this.isShowData=!0),this.$emit("returnRawData",t)}}},r=a("XyMi");var l=function(t){a("OfDR")},c=Object(r.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:"sensitive-link-label tracking-action tracking-"+t.type+" tracking-uid-"+t.userId+" text-has-action",on:{click:function(e){return t.getRawData()}}},[a("span",[t._v(t._s(t.inputValue))]),t._v(" "),a("eye-button",{staticClass:"d-none",attrs:{"is-get-data":t.isShowData,source:t.source,type:t.type,"user-id":t.userId},on:{returnRawData:t.setRawData}})],1)},[],!1,l,"data-v-143e67ee",null);e.a=c.exports},ztoD:function(t,e){},zut0:function(t,e){}},[1]);