#!/bin/bash
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ”¥ å­åŸŸåæ·±åº¦æšä¸¾ï¼ˆçˆ†ç ´å¸¸è§æ¨¡å¼ï¼‰"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"

PREFIXES=(
    "dev" "test" "staging" "uat" "qa" "prod" "beta"
    "admin" "api" "backend" "internal" "private"
    "jenkins" "gitlab" "jira" "confluence"
    "monitor" "grafana" "prometheus" "elk"
    "db" "mysql" "postgres" "redis" "mongo"
    "vpn" "mail" "smtp" "webmail"
    "old" "backup" "tmp" "temp"
    "v1" "v2" "v3" "api-v1" "api-v2"
)

DOMAIN="ghtk.vn"

echo "[*] çˆ†ç ´å­åŸŸå..."
for prefix in "${PREFIXES[@]}"; do
    subdomain="${prefix}.${DOMAIN}"
    ip=$(dig +short $subdomain @8.8.8.8 2>/dev/null | grep -E "^[0-9]" | head -1)
    
    if [ -n "$ip" ]; then
        echo "  âœ… $subdomain â†’ $ip"
        
        # å°è¯•è®¿é—®
        for proto in https http; do
            status=$(curl -sk "$proto://$subdomain" -w "%{http_code}" -o /dev/null -m 2 2>/dev/null)
            [ "$status" != "000" ] && echo "     $proto â†’ $status"
        done
    fi
done

echo ""
echo "[*] æµ‹è¯•å¸¸è§å¤‡ä»½åŸŸå..."
BACKUP_PATTERNS=(
    "old-admin.giaohangtietkiem.vn"
    "backup-admin.giaohangtietkiem.vn"
    "admin-old.giaohangtietkiem.vn"
    "admin2.giaohangtietkiem.vn"
    "admin-v1.giaohangtietkiem.vn"
)

for backup in "${BACKUP_PATTERNS[@]}"; do
    ip=$(dig +short $backup @8.8.8.8 2>/dev/null | head -1)
    [ -n "$ip" ] && echo "  âš ï¸  $backup â†’ $ip"
done

echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
