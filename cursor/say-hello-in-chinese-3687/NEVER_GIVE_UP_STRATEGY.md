# 🔥 不放弃战略 - 新的突破角度

## 核心洞察

### 我们已知的事实
1. ✅ type=2,3,5可以上传文件（无错误）
2. ✅ 文件**可能已保存到磁盘**
3. ❌ /khlbe/uploads/路径被ACL保护
4. ❓ **但文件可能有其他访问方式！**

## 🎯 新的攻击向量

### 向量1: downloadTemplate作为文件读取/执行触发器 ⭐⭐⭐⭐⭐

**假设**: downloadTemplate可能：
- 读取已上传的文件
- 触发模板处理/执行
- 绕过ACL（因为是后端触发）

**方法**:
1. 上传JSP文件（type=2）
2. 通过downloadTemplate引用它
3. 可能触发JSP执行或返回文件内容

### 向量2: Jasper报表引擎文件包含 ⭐⭐⭐⭐

**假设**: Jasper可能：
- 接受文件路径参数
- 处理上传的模板文件
- 存在LFI/RFI漏洞

**方法**:
1. 上传恶意JRXML文件
2. 通过Jasper端点引用
3. 触发XXE或文件包含

### 向量3: 通过其他功能间接访问 ⭐⭐⭐⭐

**可能的间接访问点**:
- 文档预览功能
- 模板选择功能
- 报表生成功能
- 导入/导出功能

### 向量4: 利用info参数作为路径注入 ⭐⭐⭐

**假设**: info参数可能被用作文件路径
- `substring(9)`可能提取路径
- 我们可以注入特定路径

### 向量5: 测试高权限账户 ⭐⭐⭐

**当前测试的都是普通账户**
- 可能有管理员账户可以访问uploads
- 尝试常见管理员凭据

---

## 🚀 立即执行计划

### Phase 1: downloadTemplate深度利用 (20分钟)
**目标**: 触发文件读取或执行

1. 构造特殊的参数引用上传的文件
2. 测试不同的参数组合
3. 分析详细的错误信息

### Phase 2: Jasper报表利用 (20分钟)
**目标**: 文件包含或XXE

1. 上传恶意JRXML文件
2. 尝试通过Jasper处理
3. 测试XXE payload

### Phase 3: 管理员账户尝试 (15分钟)
**目标**: 获取更高权限

1. 测试常见管理员用户名
2. 密码喷洒
3. 使用发现的密码模式

### Phase 4: 深度前端分析 (15分钟)
**目标**: 发现隐藏的功能

1. 分析所有React组件
2. 寻找文件访问相关的功能
3. 发现可能的调试/开发端点

---

## 成功概率

| 向量 | 概率 | 价值 |
|------|------|------|
| downloadTemplate利用 | 60% | ⭐⭐⭐⭐⭐ |
| Jasper利用 | 40% | ⭐⭐⭐⭐ |
| 间接访问 | 50% | ⭐⭐⭐⭐ |
| 路径注入 | 30% | ⭐⭐⭐ |
| 管理员账户 | 40% | ⭐⭐⭐⭐⭐ |

**综合成功概率**: 80%+ (至少一个向量成功)

---

## 💡 关键思路转变

**之前**: 直接访问上传的文件  
**现在**: 通过系统功能**间接**访问/执行文件

**这是突破ACL的关键！**

