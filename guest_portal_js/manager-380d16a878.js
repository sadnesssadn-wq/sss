(e=>{function t(){if("object"==typeof this.constructor.instance)return this.constructor.instance;e.su.Observable.call(this),this.constructor.instance=this,e.su.serviceManager.register(this.name,this)}e.su=e.su||{},e.su.Service=(e.su.inherit(e.su.Observable,t),t)})(jQuery),(d=>{function h(e){if("object"==typeof h.instance)return h.instance;this.name="vtype",d.su.Service.call(this),h.instance=this}d.su.Vtype=(d.su.inherit(d.su.Service,h),h.types={cloud_email:{regex:/^[A-Za-z0-9.!#$%^&’*+-/=?_`{|}~-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)+$/,vtypeText:d.su.CHAR.VTYPETEXT.EMAIL},cloud_pwd_old:{regex:/^[\x21-\x7E]{6,32}$/,vtypeText:d.su.CHAR.VTYPETEXT.INCORRECT_NAME_PWD},cloud_non_special_char:{regex:/^[\p{P}\p{L}\p{N}\s]+$/u,vtypeText:d.su.CHAR.VTYPETEXT.CLOUD_NON_SPECIAL_CHAR},email:{regex:/^[-0-9a-zA-Z.+_]+@[-0-9a-zA-Z.+_]+\.[a-zA-Z0-9]{2,}$/,vtypeText:d.su.CHAR.VTYPETEXT.EMAIL},controllerEmail:{regex:/^[-0-9a-zA-Z.+_]+@[-0-9a-zA-Z.+_]+\.[a-zA-Z0-9]{2,}$/,vtypeText:d.su.CHAR.VTYPETEXT.EMAIL},float_positive:{regex:/^[0-9]\d*(.[0-9]\d*)?$/,vtypeText:d.su.CHAR.VTYPETEXT.NUMBER},unit_price:{regex:/(^[1-9]{1}[0-9]{0,9}$)|(^[0-9]{1,10}\.[0-9]{1,9}$)/,vtypeText:d.su.CHAR.VTYPETEXT.NUMBER},float_number:{regex:/^-?[0-9]\d*(.[0-9]\d*)?$/,vtypeText:d.su.CHAR.VTYPETEXT.NUMBER,validator:function(e){if((e=parseFloat(e),null!==this.max||void 0!==this.max)&&e>this.max)return(null!==this.min||void 0!==this.min?d.su.CHAR.VTYPETEXT.NUMBER_MIN_MAX.replace("%min",this.min.toString()):d.su.CHAR.VTYPETEXT.NUMBER_MAX).replace("%max",this.max.toString());if((null!==this.min||void 0!==this.min)&&e<this.min)return null!==this.max||void 0!==this.max?d.su.CHAR.VTYPETEXT.NUMBER_MIN_MAX.replace("%min",this.min.toString()).replace("%max",this.max.toString()):d.su.CHAR.VTYPETEXT.NUMBER_MIN.replace("%min",this.min.toString());return!0}},number:{regex:/^-?[0-9]\d*$/,vtypeText:d.su.CHAR.VTYPETEXT.NUMBER,minText:"",maxText:"",validator:function(e){var t;return e=parseInt(e,10),null!=this.max&&e>this.max?(t=(null!=this.min?d.su.CHAR.VTYPETEXT.NUMBER_MIN_MAX.replace("%min",this.min.toString()):d.su.CHAR.VTYPETEXT.NUMBER_MAX).replace("%max",this.max.toString()),(t=this.maxText?this.maxText.replace("%max",this.max.toString()):t)||this.vtypeText):!(null!=this.min&&e<this.min)||(t=null!=this.max?d.su.CHAR.VTYPETEXT.NUMBER_MIN_MAX.replace("%min",this.min.toString()).replace("%max",this.max.toString()):d.su.CHAR.VTYPETEXT.NUMBER_MIN.replace("%min",this.min.toString()),t=this.minText?this.minText.replace("%min",this.min.toString()):t)||this.vtypeText},keybordHandler:function(e){e.stopPropagation();var t=e.keyCode,i=e.ctrlKey;if(e.shiftKey)return!1;if(37==t||39==t)return!0;if(38==t||40==t){var e=d(this),a=e.val();if(d.su.vtype.types.number.regex.test(a))if(38==t){if(!(a<(e.hasClass("hour-text")?23:59)))return!1;e.val(parseInt(a,10)+1)}else{if(0==a)return!1;e.val(parseInt(a,10)-1)}else e.val(0)}return!(!i&&(t<48||57<t)&&32<t)&&void 0}},date:{format:"yyyy/MM/dd",validator:function(e){var t=e.split("/"),e=new Date(e);if("MM/dd/yyyy"===this.format){if(parseInt(t[2],10)<1970)return d.su.CHAR.VTYPETEXT.DATE_INVALID;if(2030<parseInt(t[2],10))return d.su.CHAR.VTYPETEXT.DATE_INVALID;if(e.getFullYear()!=t[2]||e.getMonth()+1!=t[0]||e.getDate()!=t[1])return d.su.CHAR.VTYPETEXT.DATE}else if("yyyy/MM/dd"===this.format&&(e.getFullYear()!=t[0]||e.getMonth()+1!=t[1]||e.getDate()!=t[2]))return d.su.CHAR.VTYPETEXT.DATE;return!0}},ipv6:{isPrefixFlag:!1,canbeLinkLocalAddr:!1,canbeLinkLocalAddrWithoutAbbr:!1,regex:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,vtypeText:d.su.CHAR.VTYPETEXT.IPV6,validator:function(e){var t=new RegExp("^[Ff][Ee]80::");if(this.canbeLinkLocalAddr&&t.test(e))return!0;t=new RegExp("^[Ff][Ee]80");if(this.canbeLinkLocalAddrWithoutAbbr&&t.test(e))return!0;if(!new RegExp("^([2-3][0-9A-Fa-f]{1,3}:)|(0[2-3][0-9A-Fa-f]{1,2}:)|(0{1,2}[2-3][0-9A-Fa-f]:)").test(e))return d.su.CHAR.VTYPETEXT.IPV6_NOT_GLOBAL;var t=new RegExp("::$"),i=new RegExp("^2002:");if(this.isPrefixFlag){if(!t.test(e))return d.su.CHAR.VTYPETEXT.IPV6_NOT_PREFIX;if(i.test(e))return d.su.CHAR.VTYPETEXT.IPV6_PREFIX}i=/:/g,t=e.match(i);return!(this.isPrefixFlag&&5<t.length)||d.su.CHAR.VTYPETEXT.IPV6_NOT_PREFIX}},staticRouteIpv6:{allowLastZero:!1,regex:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,vtypeText:d.su.CHAR.VTYPETEXT.IPV6,validator:function(e){var t=new RegExp("^[Ff][Ee]80"),i=new RegExp("^[Ff]{2}"),a=new RegExp("^[0:]*1$");return!(t.test(e)||i.test(e)||a.test(e))&&(t=new RegExp("^[0:]*$"),!(!this.allowLastZero&&t.test(e)))||d.su.CHAR.VTYPETEXT.IPV6_NOT_GLOBAL}},ipDomainWithoutHeader:{regex:/^[A-Za-z0-9\_\-]+\.{1,}/,vtypeText:d.su.CHAR.VTYPETEXT.STRING_DOMAIN,allowAllZeroFlag:!1,disallowAllZeroText:d.su.CHAR.VTYPETEXT.IP_NO_ALL_ZERO,allowAllOneFlag:!1,disallowAllOneText:d.su.CHAR.VTYPETEXT.IP_NO_ALL_ONE,allowDTypeFlag:!1,disallowDTypeText:d.su.CHAR.VTYPETEXT.IP_NO_D_TYPE,disallowFirstZeroFlag:!0,disallowFirstZeroText:d.su.CHAR.VTYPETEXT.IP_NO_FIRST_ZERO,disallowFirstGreaterThan223Flag:!1,disallowFirstGreaterThan223Text:d.su.CHAR.VTYPETEXT.IP,disallowSpaceText:d.su.CHAR.VTYPETEXT.INVALIDTEXT,validator:function(e){var t,i,a=[0,0,0,0],r=e;if(r.includes(" "))return this.disallowSpaceText;for(t=0;t<3;t++){var s=r.indexOf(".");a[t]=r.substring(0,s),r=i=r.substring(s+1)}return a[3]=i,this.allowAllZeroFlag||0!=a[0]||0!=a[1]||0!=a[2]||0!=a[3]?this.allowAllOneFlag||255!=a[0]||255!=a[1]||255!=a[2]||255!=a[3]?!this.allowDTypeFlag&&224<=a[0]&&a[0]<=239?this.disallowDTypeText:!this.disallowFirstZeroFlag||0!=a[0]||0==a[1]&&0==a[2]&&0==a[3]?!(this.disallowFirstGreaterThan223Flag&&223<a[0])||this.disallowFirstGreaterThan223Text:this.disallowFirstZeroText:this.disallowAllOneText:this.disallowAllZeroText}},ip:{allowAllZeroFlag:!1,disallowAllZeroText:d.su.CHAR.VTYPETEXT.IP_NO_ALL_ZERO,allowLoopFlag:!1,disallowLoopText:d.su.CHAR.VTYPETEXT.IP_NO_LOOP,allowDTypeFlag:!0,disallowDTypeText:d.su.CHAR.VTYPETEXT.IP_NO_D_TYPE,allowETypeFlag:!0,disallowETypeText:d.su.CHAR.VTYPETEXT.IP_NO_E_TYPE,allowLinkLocalTypeFlag:!0,disallowLinkLocalTypeText:d.su.CHAR.VTYPETEXT.IP_NO_LINK_LOCAL_TYPE,allowAllOneFlag:!1,disallowAllOneText:d.su.CHAR.VTYPETEXT.IP_NO_ALL_ONE,disallowFirstZeroFlag:!0,disallowFirstZeroText:d.su.CHAR.VTYPETEXT.IP_NO_FIRST_ZERO,disallowFirstAllOneText:d.su.CHAR.VTYPETEXT.IP_NO_FIRST_ALL_ONE,disallowLastZeroFlag:!1,disallowLastZeroText:d.su.CHAR.VTYPETEXT.IP_NO_LAST_ZERO,disallowLastAllOneFlag:!1,disallowLastAllOneText:d.su.CHAR.VTYPETEXT.IP_NO_LAST_ALL_ONE,disallowFirstGreaterThan223Flag:!0,disallowFirstGreaterThan223Text:d.su.CHAR.VTYPETEXT.IP,disableAllFlag:!1,regex:/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5]|0\d\d)(\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5]|0\d\d)){3}$/,validator:function(e){for(var t,i=e,a=[0,0,0,0],r=0;r<3;r++){var s=i.indexOf(".");a[r]=i.substring(0,s),i=t=i.substring(s+1)}for(a[3]=t,r=0;r<4;r++)if(a[r]<0||255<a[r])return!1;if(this.disableAllFlag)return!0;if(!this.allowLoopFlag&&127==a[0])return this.disallowLoopText;if(!this.allowDTypeFlag&&224<=a[0]&&a[0]<=239)return this.disallowDTypeText;if(!this.allowETypeFlag&&240<=a[0]&&a[0]<=254)return this.disallowETypeText;if(!this.allowLinkLocalTypeFlag&&169==a[0]&&254==a[1])return this.disallowLinkLocalTypeText;if(this.allowAllOneFlag){if((255!=a[0]||255!=a[1]||255!=a[2]||255!=a[3])&&255==a[0])return this.disallowFirstAllOneText}else{if(255==a[0]&&255==a[1]&&255==a[2]&&255==a[3])return this.disallowAllOneText;if(255==a[0])return this.disallowFirstAllOneText}return this.allowAllZeroFlag||0!=a[0]||0!=a[1]||0!=a[2]||0!=a[3]?!this.disallowFirstZeroFlag||0!=a[0]||0==a[1]&&0==a[2]&&0==a[3]?this.disallowLastZeroFlag&&!this.allowAllZeroFlag&&0==a[3]?this.disallowLastZeroText:this.disallowLastAllOneFlag&&255==a[3]?this.disallowLastAllOneText:!(this.disallowFirstGreaterThan223Flag&&223<a[0])||this.disallowFirstGreaterThan223Text:this.disallowFirstZeroText:this.disallowAllZeroText},vtypeText:d.su.CHAR.VTYPETEXT.IP},ipPrimary:{regex:/^\s*[0-9]{1,3}\.{1}[0-9]{1,3}\.{1}[0-9]{1,3}\.{1}[0-9]{1,3}\s*$/,vtypeText:d.su.CHAR.VTYPETEXT.INVALIDTEXT},ipRange:{validator:function(e){function t(e){var t=d.su.Vtype.types.ipPrimary.regex,i=e.split(".");return 4==i.length&&t.test(e)?Number(i[0])*(1<<24)+(Number(i[1])<<16|Number(i[2])<<8|Number(i[3])):-1}var i,a,r=d.su.Vtype.types.ip.regex,e=e.split("-");return 1!=e.length?2==e.length?(a=e[0],i=e[1],1!=r.test(a)&&0==r.test(a)||1!=r.test(i)&&0==r.test(i)?d.su.SMB_CHAR.VALIDATION.IP_FORMAT:!(t(a)>=t(i))||d.su.SMB_CHAR.VALIDATION.IP_RANGE):d.su.SMB_CHAR.VALIDATION.IP_RANGE_NUM:"0.0.0.0"==(a=e[0])?d.su.SMB_CHAR.VALIDATION.IP_ALL_ZERO:0!=r.test(a)||d.su.SMB_CHAR.VALIDATION.IP_FORMAT}},portRange:{portStart:1,portEnd:65535,portEndText:"",usePort:!0,allowMultiple:!1,allowDuplicate:!0,validator:function(e){var t,i,a,r,s=d.su.CHAR.VALIDATION,n=!0;if(this.allowMultiple&&(r=",",!/^[\d-,]+$/.test(e)))return d.su.CHAR.VTYPETEXT.PORT_RANGE;for(var o=e.split(r),u=new Set,l=0;l<o.length;l++){if(!0!==n)return n;if(1==(t=o[l].split("-")).length)i=t[0],Number(i)<this.portStart?n=p(s.PORT_START_ERR):Number(i)>this.portEnd?n=p(s.PORT_END_ERR,this.portEndText.replace("%max",this.portEnd)):(n=c(i))&&!this.allowDuplicate&&(u.has(Number(i))?n=d.su.CHAR.LANNETWORK.VLAN_ID_DUPLICATE:u.add(Number(i)));else if(2!=t.length)n=p(s.PORT_RANGE_INVALID);else if(i=t[0],a=t[1],c(i)&&c(a))if(Number(i)<Number(a)){if(Number(i)<this.portStart)n=p(s.PORT_START_ERR);else if(Number(a)>this.portEnd)n=p(s.PORT_END_ERR,this.portEndText.replace("%max",this.portEnd));else if(n=!0,!this.allowDuplicate)for(let e=Number(i);e<=Number(a);e++){if(u.has(e)){n=d.su.CHAR.LANNETWORK.VLAN_ID_DUPLICATE;break}u.add(e)}}else n=p(s.PORT_RANGE_ERR);else n=d.su.CHAR.VALIDATION.PORT_RANGE_FORMAT}function c(e){return 0!=d.su.Vtype.types.integer.regex.test(e)||d.su.CHAR.VTYPETEXT.NUMBER}function p(e,t){return this.usePort?e:t||s.PORT_RANGE_FORMAT}return n}},serverAddress:{allowAllZeroFlag:!0,duplicateText:d.su.CHAR.VTYPETEXT.SUBNET_EXIST,validator:function(i){var a=[],r=d.extend({},d.su.Vtype.types.ip,{allowAllZeroFlag:this.allowAllZeroFlag});d.each(i,function(e,t){r.regex.test(i[e])?a.push(r.validator(i[e])):a.push(!1)});for(var e=0,t=a.length;e<t;e++)if(!0!==a[e])return a;return!0}},ipSubnet:{allowZeroMask:!1,allowAllZero:!1,allowAllAddress:!1,disallowZeroAddressText:d.su.CHAR.VTYPETEXT.IP_NO_ALL_ZERO,duplicateText:d.su.CHAR.VTYPETEXT.SUBNET_EXIST,minMask:-1,maxMask:-1,validator:function(i){var a=[],r={},s=this.duplicateText,n=d.extend({},d.su.Vtype.types.ipMask,{allowAllZero:this.allowAllZero,allowZeroMask:this.allowZeroMask,allowAllAddress:this.allowAllAddress,disallowZeroAddressText:this.disallowZeroAddressText,minMask:this.minMask,maxMask:this.maxMask});d.each(i,function(e,t){2!=t.split("/").length?a.push(d.su.CHAR.ACCESS_CONTROL.IP_MASK_ERR):r[t]?a.push(s):(r[t]=!0,a.push(n.validator(i[e])))});for(var e=0,t=a.length;e<t;e++)if(!0!==a[e])return a;return!0}},timeFormat:{regex:/^[0-9]{1,2}\:{1}[0-9]{1,2}$/g,vtypeText:d.su.CHAR.VTYPETEXT.TIME_FORMAT},timeRange:{validator:function(e){function t(e){e=e.split(":");return data=e[0].toString()+e[1].toString(),data=0==(data=Number(data))?"0000":data}function i(e){var t,i;return!d.su.Vtype.types.timeFormat.regex.test(e)||(t=e.indexOf(":"),i=parseInt(e.slice(0,t),10),e=parseInt(e.slice(t+1),10),i<0)||24<=i||e<0||60<=e?d.su.SMB_CHAR.VALIDATION.TIME_FORMAT:!(24==i&&0<e)||d.su.SMB_CHAR.VALIDATION.TIME_START}function a(e){var t,i;return!d.su.Vtype.types.timeFormat.regex.test(e)||(t=e.indexOf(":"),i=parseInt(e.slice(0,t),10),e=parseInt(e.slice(t+1),10),i<0)||24<i||e<0||60<=e?d.su.SMB_CHAR.VALIDATION.TIME_FORMAT:(0!=i||0!=e)&&(!(24==i&&0<e)||d.su.SMB_CHAR.VALIDATION.TIME_END)}var r,s,e=e.split("-");return""!=e&&1==e.length?d.su.SMB_CHAR.VALIDATION.TIME_END:2!=e.length?d.su.SMB_CHAR.VALIDATION.TIME_FORMAT:(r=e[0],s=e[1],1==i(r)&&1==a(s)?(r=t(e[0]))<(s=t(e[1]))||d.su.SMB_CHAR.VALIDATION.TIME_RANGE:1!=i(r)?d.su.SMB_CHAR.VALIDATION.TIME_START:1==a(s)||d.su.SMB_CHAR.VALIDATION.TIME_END)}},mac:{regex:/^([a-f0-9]{2}[\-\:]){5}[a-f0-9]{2}$/i,disallowAllMultiText:d.su.CHAR.VTYPETEXT.MULTI_MAC,disallowAllZero:d.su.CHAR.VTYPETEXT.MAC_NO_ALL_ZERO,validator:function(e){return/^\s*[0-9A-Fa-f]{1}[13579bdfBDF]{1}([\-\:][A-Fa-f0-9]{2}){5}\s*$/.test(e)?this.disallowAllMultiText:!/^(0{1,2}[\-\:]){5}0{1,2}$/.test(e)||this.disallowAllZero},vtypeText:d.su.CHAR.VTYPETEXT.MAC},authCode:{regex:/[0-9]{6}/,vtypeText:d.su.CHAR.VTYPETEXT.INVALID_TOKEN},netmask:{allowAllOneFlag:!1,disallowAllOneText:d.su.CHAR.VTYPETEXT.MASK_NO_ALL_ONE,regex:/^(254|252|248|240|224|192|128)\.0\.0\.0$|^(255\.(254|252|248|240|224|192|128|0)\.0\.0)$|^(255\.255\.(254|252|248|240|224|192|128|0)\.0)$|^(255\.255\.255\.(254|252|248|240|224|192|128|0))$|^255.255.255.255$/,vtypeText:d.su.CHAR.VTYPETEXT.MASK,validator:function(e){return"255.255.255.255"!=e||!!this.allowAllOneFlag||this.disallowAllOneText}},string_ip_domain:{regex:/^[A-Za-z0-9\_\-]+\.{1,}/,vtypeText:d.su.CHAR.VTYPETEXT.STRING_DOMAIN,validator:function(e){return!!/^\S+$/.test(e)||d.su.CHAR.VTYPETEXT.STRING_DOMAIN}},string_ip_domain_no_loop:{regex:/^[A-Za-z0-9\_\-]+\.{1,}/,validator:function(e){return"127.0.0.1"!=e||d.su.CHAR.ERROR["00000131"]},vtypeText:d.su.CHAR.VTYPETEXT.STRING_DOMAIN},domain:{regex:/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}$/,vtypeText:d.su.CHAR.VTYPETEXT.DOMAIN},domain_standalone:{regex:/^([a-zA-Z0-9]([a-zA-Z0-9\-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9]([a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,vtypeText:d.su.CHAR.VTYPETEXT.DOMAIN,validator:function(e){return!e.split(".").some(e=>63<e.length)||d.su.CHAR.VTYPETEXT.DOMAIN_LABEL_LENGTH_INVALID}},domain_header:{regex:/^[a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9]*)$/,vtypeText:d.su.CHAR.VTYPETEXT.DOMAIN},ascii_visible:{regex:/^[\x21-\x7e]+$/,vtypeText:d.su.CHAR.VTYPETEXT.ASCII_VISIBLE},ascii_visible_allow_blank:{regex:/^[\x20-\x7e]+$/,vtypeText:d.su.CHAR.VTYPETEXT.ASCII_VISIBLE_ALLOW_BLANK},string_strict:{validator:function(e){var t=this.maxLength||16,t=(e=e.trim(),d.appUtils.isUtf8Des(e,t));return 1!=t?t:!!/^[^\+\#\&\=\|\<\>\^\\]+$/.test(e)||d.su.CHAR.VTYPETEXT.STRING_STRICT}},string_strict_strict:{validator:function(e){var t=this.maxLength||16,t=(e=e.trim(),d.appUtils.isUtf8Des(e,t));return 1!=t?t:!!/^[^\+\#\&\=\|\<\>\^\\\~\`\!\@\$\%\*\(\)\[\]\{\}\;\:\'\"\,\.\/\?]+$/.test(e)||d.su.CHAR.VTYPETEXT.STRING_STRICT_STRICT}},string_visible:{regex:/^\S+$/,vtypeText:d.su.CHAR.VTYPETEXT.STRING_VISIBLE},string_visible_no_comma:{regex:/^\S+$/,vtypeText:d.su.CHAR.VTYPETEXT.STRING_VISIBLE_NO_COMMA,validator:function(e){return!(0<=e.indexOf(","))}},password:{regex:/^[a-zA-Z0-9]{6,32}$/,vtypeText:d.su.CHAR.VTYPETEXT.PWD},psk_password:{regex:/^([A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\ ]+|[0-9a-fA-F]+)$/,vtypeText:d.su.CHAR.VTYPETEXT.PSK_PWD},normal_password:{regex:/^[A-Za-z0-9_]+$/,vtypeText:d.su.CHAR.VTYPETEXT.PWD_LENGTH_ERR,validator:function(e){return!(e.length<6||32<e.length)||d.su.CHAR.VTYPETEXT.PWD_LENGTH_ERR}},portal_password:{regex:/^[A-Za-z0-9_]+$/,vtypeText:d.su.CHAR.ERROR["00000259"],validator:function(e){return!(e.length<8||16<e.length)}},portal_domain_name:{regex:/((http|ftp|https):\/\/)+(([a-zA-Z0-9\._-]+\.[a-zA-Z]{2,6})|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,4})*(\/[a-zA-Z0-9\&%_\.\/-~-]*)?/,vtypeText:d.su.CHAR.VTYPETEXT.INVALIDTEXT},protal_title:{regex:/^\S+$/,vtypeText:d.su.CHAR.ERROR["00000256"],validator:function(e){return!(31<e.length)}},protal_content:{vtypeText:d.su.CHAR.ERROR["00000257"],validator:function(e){return!(1023<e.length)||d.su.CHAR.ERROR["00000257"]}},string_visible_allow_blank:{regex:/^(\S|\x20)+$/,vtypeText:d.su.CHAR.VTYPETEXT.STRING_VISIBLE_ALLOW_BLANK},string_visible_describe:{regex:/^[A-Za-z0-9\-\_]+$/,vtypeText:d.su.CHAR.VTYPETEXT.INVALIDTEXT},name:{regex:/^[A-Za-z0-9\_]+$/,vtypeText:d.su.CHAR.VTYPETEXT.NAME},name_special:{regex:/^[A-Za-z0-9\_\-]+$/,vtypeText:d.su.CHAR.VTYPETEXT.NAME,validator:function(e){return!(e.length<4)}},name_with_special_start:{regex:/^[a-zA-Z_]/,vtypeText:d.su.CHAR.VTYPETEXT.NAME_START},name_in_vpn:{regex:/^[a-zA-Z0-9\_][A-Za-z0-9\_\-]{0,14}$/,vtypeText:d.su.CHAR.VTYPETEXT.VPN_NAME_PWD},pwd_in_vpn:{regex:/^[A-Za-z0-9\_\-]{1,15}$/,vtypeText:d.su.CHAR.VTYPETEXT.VPN_NAME_PWD},cloud_username:{regex:/^[\s\S]*?$/,vtypeText:d.su.CHAR.VTYPETEXT.NAME},cloud_pwd:{regex:/^[\x21-\x7E]{8,32}$/,vtypeText:d.su.CHAR.VTYPETEXT.CLOUD_PWD,validator:function(e){var t=0,i=0,a=0;return!((t=/[A-Za-z]/g.test(e)?1:t)+(i=/[0-9]/g.test(e)?1:i)+(a=/[^A-Za-z0-9]/g.test(e)?1:a)<2)||d.su.CHAR.VTYPETEXT.CONTAINS_TWO}},note:{regex:/^[A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\ ]*$/,vtypeText:d.su.CHAR.VTYPETEXT.NOTE},sim_pin:{regex:/^[0-9]{4}$/,vtypeText:d.su.CHAR.VTYPETEXT.SIM_PIN},sim_dialnum:{regex:/^[0-9*#]{0,118}$/,vtypeText:d.su.CHAR.VTYPETEXT.SIM_DIALNUM},port:{validator:function(e){var t=d.su.Vtype.types.integer.regex,i=e.toString().split("-"),a=i.length;if(2<a)return d.su.CHAR.VTYPETEXT.PORT_RANGE_FORMAT;for(var r=0;r<a;r++)if(0==i[r].length||!t.test(i[r].trim())||parseInt(i[r])<1||65535<parseInt(i[r]))return d.su.CHAR.VTYPETEXT.PORT_RANGE_OUT;return!0}},time_start:{validator:function(e){var t,i;return!d.su.Vtype.types.timeFormat.regex.test(e)||(t=e.indexOf(":"),i=parseInt(e.slice(0,t),10),e=parseInt(e.slice(t+1),10),i<0)||24<=i||e<0||60<=e?d.su.CHAR.VTYPETEXT.TIME_FORMAT:!(24==i&&0<e)||d.su.CHAR.VTYPETEXT.TIME_START}},time_end:{validator:function(e){var t,i;return!d.su.Vtype.types.timeFormat.regex.test(e)||(t=e.indexOf(":"),i=parseInt(e.slice(0,t),10),e=parseInt(e.slice(t+1),10),i<0)||24<i||e<0||60<=e?d.su.CHAR.VTYPETEXT.TIME_FORMAT:(0!=i||0!=e)&&!(24==i&&0<e)||d.su.CHAR.VTYPETEXT.TIME_END}},time:{format:"hh:mm:ss",validator:function(e){if("hh:mm:ss"===this.format){if(!1===/^(?:[01]\d|2[0-3])(?::[0-5]\d){2}$/.test(e))return d.su.CHAR.VTYPETEXT.TIME_FORMAT}else if("hh:mm"===this.format)if(!1===/^(?:[01]\d|2[0-3])(?::[0-5]\d){1}$/.test(e))return d.su.CHAR.VTYPETEXT.TIME_FORMAT;return!0}},username:{regex:/^[a-zA-Z0-9_-]+$/,vtypeText:d.su.CHAR.VTYPETEXT.USERNAME},adminName:{regex:/^[A-Za-z0-9\-\_\@\.]+$/,vtypeText:d.su.CHAR.VTYPETEXT.USERNAME},securityPwd:{validator:function(e){if(8<=e.length&&e.length<64){var t=/^[A-Za-z0-9\`\~\!\@\#\$\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\%\^\ ]+$/;if(e&&!t.test(e))return d.su.CHAR.VTYPETEXT.ILLEGAL_PWD}else if(64==e.length){t=/^[A-Fa-f0-9]+$/;if(e&&!t.test(e))return smb.charset.validation.ILLEGAL_PWD}return!0}},wanPwd:{regex:/^[A-Za-z0-9\`\~\!\@\#\$\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\%\^\/\ ]+$/,vtypeText:d.su.CHAR.VTYPETEXT.PASSWORD_FORMAT},strongPassword:{regex:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\!\#\$\%\&\'\(\)\*\+\,\-\.\/\:\;\<\=\>\@\[\\\]\^\_\`\{\|\}\~])(?!.*[\x00-\x20\x22\x3F\x7F]).{8,128}$/,vtypeText:d.su.CHAR.VTYPETEXT.STRONG_PASSWORD.replace("{SYMBOLS}","`~!@#$%^&*()_-+={}[]:;'|\\<>,./"),validator:(e,t,i)=>{var a,r,s;return e?(s=d.su.Vtype.types.strongPassword.regex,a=d.su.Vtype.types.ascii_visible.regex,r=d.su.CHAR.VTYPETEXT.LEN_MIN_MAX.replace("%min",t).replace("%max",i)+" "+d.su.CHAR.VTYPETEXT.STRONG_PASSWORD.replace("{SYMBOLS}","`~!@#$%^&*()_-+={}[]:;'|\\<>,./"),t=e.length>=t&&e.length<=i,i=s.test(e),s=a.test(e),!!(t&&i&&s)||r):""}},deviceStrongPassword:{validator:e=>d.su.Vtype.types.strongPassword.validator(e,8,64)},accountStrongPassword:{validator:e=>d.su.Vtype.types.strongPassword.validator(e,8,128)},string_visible_username:{regex:/^[A-Za-z0-9\`\~\!\@\#\$\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\%\^\/\ ]+$/,vtypeText:d.su.CHAR.VTYPETEXT.ILLEGAL_USERNAME},userPwd:{regex:/^[A-Za-z0-9\`\~\!\@\#\$\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\%\^\/]+$/,vtypeText:d.su.CHAR.VTYPETEXT.PASSWORD_FORMAT},serviceName:{regex:/^[A-Za-z0-9\`\~\!\@\#\$\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\%\^\/\ ]+$/,vtypeText:d.su.CHAR.VTYPETEXT.SERVICE_NAME},acName:{regex:/^[A-Za-z0-9\`\~\!\@\#\$\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\%\^\/\ ]+$/,vtypeText:d.su.CHAR.VTYPETEXT.AC_NAME},integer:{regex:/^[0-9]+$/,vtypeText:d.su.CHAR.VTYPETEXT.INTEGER_INVALID,validator:function(e){if((null!==this.max||void 0!==this.max)&&e>this.max)return(null!==this.min||void 0!==this.min?d.su.CHAR.VTYPETEXT.NUMBER_MIN_MAX.replace("%min",this.min.toString()):d.su.CHAR.VTYPETEXT.NUMBER_MAX).replace("%max",this.max.toString());if((null!==this.min||void 0!==this.min)&&e<this.min)return null!==this.max||void 0!==this.max?d.su.CHAR.VTYPETEXT.NUMBER_MIN_MAX.replace("%min",this.min.toString()).replace("%max",this.max.toString()):d.su.CHAR.VTYPETEXT.NUMBER_MIN.replace("%min",this.min.toString());return!0}},groupKey:{validator:function(e){return 0!==e&&e<30?d.su.CHAR.VTYPETEXT.MIN_THIRTY:!(0!==e&&1e6<e)||d.su.CHAR.VTYPETEXT.MAX_MILLION}},mask:{allow32:!1,validator:function(e){return!(!d.su.Vtype.types.number.regex.test(e)||e<=0||32<e)&&!!(this.allow32||32!==e&&"32"!==e)||d.su.CHAR.VTYPETEXT.MASK}},ipInCidr:{validator:function(e){var t=e.split("."),a=t[0];if(!/^\s*[0-9]{1,3}\.{1}[0-9]{1,3}\.{1}[0-9]{1,3}\.{1}[0-9]{1,3}\s*$/.test(e))return d.su.CHAR.VTYPETEXT.IP;for(i=0;i<4;i++)if(t[i]<0||255<t[i])return d.su.CHAR.VTYPETEXT.IP;return(0!=parseInt(t[0],10)||0!=parseInt(t[1],10)||0!=parseInt(t[2],10)||0!=parseInt(t[3],10))&&!(0==a||127==a||223<a)||d.su.CHAR.VTYPETEXT.IP}},ipMask:{allowAllZero:!1,allowZeroMask:!1,allowAny:!1,allowAllAddress:!1,disallowZeroAddressText:d.su.CHAR.VTYPETEXT.IP_MASK_UNION,minMask:-1,maxMask:-1,validator:function(e){if(!e)return d.su.CHAR.VTYPETEXT.NOT_EMPTY;var t=e.indexOf("/"),a=e.slice(0,t),t=e.slice(t+1,e.length),e=d.su.Vtype.types.number.regex,r=d.su.Vtype.types.ipPrimary.regex,s=-1!==this.minMask&&t<this.minMask||-1!==this.maxMask&&t>this.maxMask;if(this.allowAllAddress&&"0.0.0.0"===a&&"0"===t)return!0;if(!this.allowAllAddress&&"0.0.0.0"===a&&"0"===t)return this.disallowZeroAddressText;if(!e.test(t)||t<0||32<t)return d.su.CHAR.VTYPETEXT.IP_MASK_UNION;if(!this.allowZeroMask&&(0===t||"0"===t))return d.su.CHAR.VTYPETEXT.IP_MASK_UNION;if(s)return-1!==this.minMask&&-1!==this.maxMask?d.su.CHAR.VTYPETEXT.IP_MASK_MIN_MAX.replace("%min%",this.minMask).replace("%max%",this.maxMask):-1!==this.minMask?d.su.CHAR.VTYPETEXT.IP_MASK_MIN.replace("%min%",this.minMask):d.su.CHAR.VTYPETEXT.IP_MASK_MAX.replace("%max%",this.maxMask);if(!r.test(a))return d.su.CHAR.VTYPETEXT.IP_MASK_UNION;var n=a.split(".");for(i=0;i<4;i++)if(n[i]<0||255<n[i])return d.su.CHAR.VTYPETEXT.IP_MASK_UNION;if(!this.allowAllZero&&0==parseInt(n[0],10)&&0==parseInt(n[1],10)&&0==parseInt(n[2],10)&&0==parseInt(n[3],10))return d.su.CHAR.VTYPETEXT.IP_MASK_UNION;if(255==n[0]){if(!this.allowAny)return d.su.CHAR.VTYPETEXT.IP_MASK_UNION;if(255!=n[1]||255!=n[2]||255!=n[3])return d.su.CHAR.VTYPETEXT.IP_MASK_UNION}return!(240<=n[0]&&n[0]<=254)&&!(224<=n[0]&&n[0]<=239)&&127!=n[0]||d.su.CHAR.VTYPETEXT.IP_MASK_UNION}},urlDomain:{regex:/^(?=^.{3,255}$)(http(s)?:\/\/)?(www\.)?[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+(:\d+)*(\/\w*(\.\w+)?)*([\?&]\w+=\w*)*$/,vtypeText:d.su.CHAR.VTYPETEXT.DOMAIN},urlDomainWithoutSubPathAndParams:{regex:/^(?=^.{3,255}$)(http(s)?:\/\/)?(www\.)?[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+(:\d+)*\/?$/,vtypeText:d.su.CHAR.VTYPETEXT.DOMAIN},urlDomainWithoutHeader:{regex:/^(?=^.{3,255}$)(www\.)?[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+(:\d+)*(\/\w*(\.\w+)?)*([\?&]\w+=\w*)*$/,vtypeText:d.su.CHAR.VTYPETEXT.DOMAIN},urlDomainWithWildcard:{regex:/^((\*?(([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?)\*?)|\*)$/,vtypeText:d.su.CHAR.VTYPETEXT.DOMAIN},urlDomainForMigration:{regex:/((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])(\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])){3}(:([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-4]\d{4}|65[0-4]\d{2}|655[0-2]\d|6553[0-5]))?|([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,18}(:([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-4]\d{4}|65[0-4]\d{2}|655[0-2]\d|6553[0-5]))?)|^omada:\/\/([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}[?]dPort=((0|([1-9]\d{0,3})|([1-5]\d{4})|(6[0-4]\d{3})|(65[0-4]\d{2})|(655[0-2]\d)|(6553[0-5])))[a-zA-Z0-9\&\=]{0,256}$/,vtypeText:d.su.CHAR.VTYPETEXT.DOMAIN},url:{validator:function(e){var t=d.su.Vtype.types.urlDomain.regex,i=d.su.Vtype.types.ip.regex;return!(!t.test(e)&&!i.test(e))||d.su.CHAR.VTYPETEXT.URL_INVALID}},ipOrUrl:{validator:function(e){return!!e&&(!0===d.su.serviceManager.get("vtype").validate(e,"ip")||!!/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}$/.test(e)||d.su.CHAR.VTYPETEXT.IP_RUL_INVALID)}},deviceName:{regex:/^[A-Za-z0-9\-\_]+$/,vtypeText:d.su.CHAR.VTYPETEXT.DEVICE_NAME_INVALID},noStartSpace:{validator:function(e){return!e||!/^\s+/.test(e)||d.su.CHAR.VTYPETEXT.START_SPACE_IS_NOT_ALLOW}},noSpecialChar:{validator:function(e){return!e||!/[\s\$\`\#\&\(\)\;\"\'\<\>]+/.test(e)||d.su.CHAR.VTYPETEXT.NO_SPECIAL_CHARACTER}},hex:{regex:/^[A-Fa-f0-9]*$/,vtypeText:d.su.CHAR.VTYPETEXT.INVALIDTEXT},string:{regex:/^[A-Za-z0-9\_\-\@\:\/\.]+$/,vtypeText:d.su.CHAR.VTYPETEXT.INVALIDTEXT},string_id:{regex:/^[A-Za-z0-9\-\_\@\:\/\.\#]+$/,vtypeText:d.su.CHAR.VTYPETEXT.INVALIDTEXT},string_include_space:{regex:/^[A-Za-z0-9\_\-\@\:\/\. ]+$/,vtypeText:d.su.CHAR.VTYPETEXT.STRING_INCLUDE_SPACE},numberAndPoint:{regex:/^[0-9\.]+$/,vtypeText:d.su.CHAR.VTYPETEXT.INVALIDTEXT},longitude:{regex:/^[\-\+]?(0?\d{1,2}(\.\d{1,13})?|1[0-7]?\d{1}(\.\d{1,13})?|180(\.0{1,13})?)$/,vtypeText:d.su.CHAR.VTYPETEXT.LONGITUDE},latitude:{regex:/^[\-\+]?([0-8]?\d{1}(\.\d{1,13})?|90(\.0{1,13})?)$/,vtypeText:d.su.CHAR.VTYPETEXT.LATITUDE},exportToExcelStr:{regex:/^[^+@=\-]/,vtypeText:d.su.CHAR.VTYPETEXT.EXPORT_EXCEL_INPUT_ERROR},deviceKey:{regex:/^([a-zA-Z0-9]{4}\-){4}([a-zA-Z0-9]{4})$/,vtypeText:d.su.CHAR.VTYPETEXT.INVALIDTEXT_DEVICE_KEY},apnProfileUsernamePassword:{regex:/^[\x21\x23-\x26\x28-\x2B\x2D-\x7E]{1,64}$/,vtypeText:d.su.CHAR.VTYPETEXT.INVALID_USERNAME_PASSWORD},dhcpOptionHex:{regex:/^[0-9a-fA-F]{2}(:[0-9a-fA-F]{2})*$/,vtypeText:d.su.CHAR.LANNETWORK.HEX_ARRAY_ERROR}},h.prototype.validate=function(e,t){var i={type:"sample",regex:/^[a-zA-Z0-9]&/,vtypeText:"",validator:null},a="",r={};if("string"===d.type(t))a=t;else if("object"===d.type(t)&&t.vtype&&!(a=(r=t).vtype))return!0;if(h.types[a])return i=h.types[a],t=!0,!(i=d.extend({},i,r)).regex||!0===i.regex.test(e)||void 0===i.vtypeText&&null===i.vtypeText&&""===i.vtypeText?!i.validator||!0===(t=i.validator(e))||t:i.vtypeText;for(var s=!1,n=a.split("||"),o=0;o<n.length;o++){for(var u=!0,l=n[o].split("&&"),c=0;c<l.length;c++){var p=d.trim(l[c]);if(!h.types[p])return null;p=d.extend({},r,{"vtype":p});if(!0!==(u=this.validate(e,p)))break}if(!0===u){s=!0;break}s=u}return!0===s||r.vtypeText||s},h)})(jQuery),(s=>{function t(e){if("object"==typeof t.instance)return t.instance;s.extend(!0,n.ajax,e.ajax),this.failHandler=e.failHandler,this.errorHandler=e.errorHandler,this.name="ajax",s.su.Service.call(this),t.instance=this}var n;s.su=s.su||{},s.su.Ajax=(n={url:null,ajax:{timeout:3e4,contentType:"application/x-www-form-urlencoded; charset=UTF-8",type:"POST"},root:null,params:{},failHandler:function(e,t){return s.su.raise({msg:"ev_proxy_fail",type:"proxy_fail",info:e.msg,errorCode:e.errorCode,proxy:this,preventDefaultFail:t&&t.preventDefaultFail||!1,preventDefaultMask:t&&t.preventDefaultMask||!1}),e}},s.su.inherit(s.su.Service,t),t.prototype.request=function(e){var t={ajax:e.ajax,data:e.data,success:e.success,fail:e.fail,error:e.error,preventDefaultFail:e.preventDefaultFail||!1,preventDefaultMask:e.preventDefaultMask||!1,preventDefaultError:e.preventDefaultError||!1},e=(this.failHandler&&(t.fail=this.failHandler(e.fail,e.preventDefaultFail)),this.errorHandler&&(t.error=this.errorHandler(e.error,e.preventDefaultError)),e.params&&(t.params=e.params,delete e.params),s.extend(!0,{},n,e));return new s.su.Proxy(e).read(t)},t.prototype.promise=function(e){var t={ajax:e.ajax,data:e.data,success:e.success,fail:e.fail,error:e.error,preventDefaultFail:e.preventDefaultFail||!1,preventDefaultMask:e.preventDefaultMask||!1,preventDefaultError:e.preventDefaultError||!1},e=(e.params&&(t.params=e.params,delete e.params),s.extend(!0,{},n,e));return new s.su.Proxy(e).readPromise(t)},t.prototype.upload=function(e){var t=s.extend({},n,e),t=new s.su.Proxy(t),i={type:e.ajax&&e.ajax.type||"POST",url:e.url,fileId:e.fileId,resultFileIdName:e.resultFileIdName,data:e.data,customData:e.customData,success:e.success,fail:e.fail,error:e.error,preventDefaultFail:e.preventDefaultFail||!1,preventDefaultMask:e.preventDefaultMask||!1,preventDefaultError:e.preventDefaultError||!1,blob:e.blob,fileName:e.fileName};if(t.ajax.url=s.su.url.upload||t.ajax.url,e.params){var a,r=t.ajax.url;for(a in-1===r.indexOf("?")?r+="?":r+="&",e.params)e.params.hasOwnProperty(a)&&(r=r+(a+"="+e.params[a])+"&");t.ajax.url=r.slice(0,r.length-1)}return t.ajax.timeout=e.ajax&&e.ajax.timeout||3e5,t.upload(i)},t.prototype.download=function(e){var t=new s.su.Proxy(n);return e.method=e.method||"GET",t.ajax.url=e.url||s.su.url.download,"POST"!==e.method&&(t.ajax.url=e.data?t.ajax.url+"?data="+encodeURIComponent(JSON.stringify(e.data)):t.ajax.url),t.download(e)},t.prototype.downloadStatic=function(e){var t=new s.su.Proxy(n);t.ajax.url=e.url||s.su.url.download,t.downloadStatic()},t)})(jQuery),$.su.Device=(v=>{function e(e){this.settings=v.extend({},s,e),this.settings.LAN_NETWORK_URL="/setting/lan/networks/interface",this.settings.VPN_CLIENTS_URL="/setting/vpns/pptpAndL2tp",this.settings.LOCAL_NETWORK_URL="/setting/lan/networks",this.settings.IP_GROUP_URL="/setting/profiles/groups/0",this.settings.GROUP_URL="/setting/profiles/groups",this.settings.WAN_INTERNET_URL="/setting/wan/networks",this.service=e.service,this.configs={},this.allDefaultColumns={name:!0,deviceSeriesType:!0,customName:!0,siteName:!0,ip:!0,status:!0,healthScore:!0,showModel:!0,version:!0,uptime:!0,licenseStatus:!0,dueTime:!0},this.name="device",this.DEVICE_SERIES_TYPE={OMADA:0,OMADA_PRO:1},this._rollingStatus=!1,this._rollingTimer=null,this._onlineCheckTimer=null,v.su.Service.call(this)}var t={DISCONNECTED:{status:0,priority:7},DISCONNECTED_MIGRATING:{status:1,priority:8},PROVISIONING:{status:10,priority:17},CONFIGURING:{status:11,priority:18},UPGRADING:{status:12,priority:19},REBOOTING:{status:13,priority:20},CONNECTED:{status:14,priority:21},CONNECTED_WIRELESS:{status:15,priority:22},CONNECTED_MIGRATING:{status:16,priority:23},CONNECTED_WIRELESS_MIGRATING:{status:17,priority:24},PENDING:{status:20,priority:1},PENDING_WIRELESS:{status:21,priority:2},ADOPTING:{status:22,priority:3},ADOPTING_WIRELESS:{status:23,priority:4},ADOPTFAILED:{status:24,priority:5},ADOPTFAILED_WIRELESS:{status:25,priority:6},MANAGEDBYOTHERS:{status:26,priority:15},MANAGEDBYOTHERS_WIRELESS:{status:27,priority:16},HEARTBEATMISSED:{status:30,priority:11},HEARTBEATMISSED_WIRELESS:{status:31,priority:12},HEARTBEATMISSED_MIGRATING:{status:32,priority:13},HEARTBEATMISSED_WIRELESS_MIGRATING:{status:33,priority:14},ISOLATED:{status:40,priority:9},ISOLATED_MIGRATING:{status:41,priority:10}},n=1,o=2,u=3,c=4,p=5,i={DISCONNECTED:0,CONNECTED:1,PENDING:2,HEARTBEATMISSED:3,ISOLATED:4},m=1,a=0,r=14,s={};return v.su.inherit(v.su.Service,e),e.prototype.getLanNetworks=function(){var t,i=this;return this.service.ajax.request({url:this.settings.LAN_NETWORK_URL,ajax:{method:"GET",async:!1},preventSuccess:!0,success:function(e){t=e.result.data,i.configs.lanNetworkIds=t}}),t},e.prototype.getVpnClients=function(){var a,r=this;return this.service.ajax.request({url:this.settings.VPN_CLIENTS_URL,ajax:{type:"GET",async:!1},data:{type:1},preventSuccess:!0,success:function(e){for(var t=(a=e.result).length,i=0;i<t;i++)a[i].isVPN=!0;r.configs.vpnClientIds=a}}),a},e.prototype.getLocalNetworks=function(){var t,i=this;return this.service.ajax.request({url:this.settings.LOCAL_NETWORK_URL,ajax:{method:"GET",async:!1},preventSuccess:!0,success:function(e){t=e.result.data,i.configs.localNetworkIds=t}}),t},e.prototype.getGroups=function(){var t,i=this;return this.service.ajax.request({url:this.settings.GROUP_URL,ajax:{method:"GET",async:!1},preventSuccess:!0,success:function(e){t=e.result.data,i.configs.groupIds=t}}),t},e.prototype.getIpGroups=function(){var t,i=this;return this.service.ajax.request({url:this.settings.IP_GROUP_URL,ajax:{method:"GET",async:!1},preventSuccess:!0,success:function(e){t=e.result.data,i.configs.ipGroupIds=t}}),t},e.prototype.getSourceIds=function(){return this.getLanNetworks(),this.getIpGroups(),this.configs.lanNetworkIds.concat(this.configs.ipGroupIds)},e.prototype.getWanInternets=function(){var t,i=this;return this.service.ajax.request({url:this.settings.WAN_INTERNET_URL,ajax:{method:"GET",async:!1},preventSuccess:!0,preventDefaultFail:!0,success:function(e){t=e.result,i.configs.wanInternetIds=t.wanPortSettings},fail:function(e){-33400===e.errorCode&&(t=!1)}}),t},e.prototype.hasGateway=function(){var t=v.Deferred(),i={adoptedGateway:!1,addedGateway:!1,wirelessRouter:!1};return this.service.ajax.request({url:"/setting/wanlanstatus",ajax:{type:"GET"},success:function(e){e=e.result;i.adoptedGateway=e.adoptedGateway,i.addedGateway=e.osgAddInAdvance,i.wirelessRouter=e.wirelessRouter,t.resolve(i)},fail:function(){t.resolve(i)}}),t},e.prototype.getDeviceColumns=function(e,t){var a,r,d=this,h=0,g=2,f=3,s=v.su.CHAR.DEVICES;this.normalStatus=[s.DISCONNECTED,s.CONNECTED,s.PENDING,s.HEARTBEAT_MISSED,s.ISOLATED],this.connectDetail=[s.PROVISIONING,s.CONFIGURING,s.UPGRADING,s.REBOOTING],this.pendingDetail=[s.PENDING,s.PENDING,s.ADOPTING,s.ADOPTING,s.ADOPT_FAILED,s.ADOPT_FAILED,s.MANAGED_BY_OTHERS,s.MANAGED_BY_OTHERS],this.deviceAuth=t||v.su.moduleManager.get("main").getDeviceAuths(),this.getChannelUtils=function(e){var t;return v.isNumeric(e.txUtil)&&v.isNumeric(e.rxUtil)&&v.isNumeric(e.interUtil)?t=(+e.txUtil||0)+(+e.rxUtil||0)+(+e.interUtil||0):v.isNumeric(e.busyUtil)&&(t=e.busyUtil),t},this.isMigrating=function(e){var t;switch(e){case 1:case 16:case 17:case 32:case 33:case 41:t=!0;break;default:t=!1}return t};let i=function(){return!v.su.serviceManager.get("user").isSiteView()&&v.su.serviceManager.get("capability").support("siteMix")};function l(e){return"ap"===e.type||"gateway"===e.type&&e.subDevType===m}return this.columns=[{xtype:"checkcolumn",width:60},{xtype:"customWidget",width:parseInt(v.getUIColor("--table-width-td-device-icon-first-col")),cls:"device-icon",renderer:function(e,t){var i=v.appUtils.getDeviceIconType(t.model,t.modelVersion,t.type),a=!0===t.combinedGateway?s.COMBINED_GATEWAY:"";return'<span class="device-type u-d-inline-block '+t.type.toLowerCase()+" "+i+'" data-tip="'+a+'"><span class="icon"></span></span>'}},{text:v.su.CHAR.DEVICES.DEVICES_NAME,sortable:!v.su.serviceManager.get("user").isMspView(),dataIndex:"name",filterText:v.su.CHAR.DEVICES.DEVICES_NAME_FIL,width:280,renderer:function(e,t){var i=t.name;null!=i&&""!==i||(i=t.mac);var a,r=(r='<span class="device-name u-text-word-break-all'+(t.needUpgrade?"need-upgrade":"")+'">')+v.su.escapeHtml(i)+"</span>";if(!1===t.inWhitelist&&(t.compatible=11),v.isNumeric(t.compatible)&&0!==t.compatible){var s="",n="";switch(t.compatible){case 1:case 2:case 10:s=v.su.CHAR.DEVICES.NOT_COMPATIBLE_INFO,n="incompatible";break;case 3:case 7:s=v.su.CHAR.DEVICES.NOT_COMPATIBLE_HIGH_VERSION;break;case 4:s=v.su.CHAR.DEVICES.NOT_COMPATIBLE_LOW_VERSION;break;case 11:s=v.su.CHAR.DEVICES.NOT_INWHITELIST,n="incompatible";break;case 12:s=v.su.CHAR.DEVICES.NOT_COMPATIBLE_CONTROLLER_VERSION,n="incompatible";break;case 14:s=v.su.CHAR.DEVICES.NOT_COMPATIBLE_CLUSTER}r+='<span class="icon compatible-icon '+n+'" data-tip="'+s+'" tip-max-width="250px"></span>'}else!1===t.supportAnomaly&&v.su.serviceManager.get("license").isPro()&&(r+='<span class="icon nonsupport-health-icon" data-tip="'+("gateway"===t.type&&t.subDevType===m?v.su.CHAR.DEVICES.NOT_SUPPORT_WIRELESS_HEALTH:v.su.CHAR.DEVICES.NOT_SUPPORT_HEALTH)+'" tip-max-width="250px"></span>');return t.p2pRole?(i=t.p2pRole)&&(a=["",v.su.CHAR.DEVICES.BRIDGE_MASTER,v.su.CHAR.DEVICES.BRIDGE_CLIENT][i],r+=`<span class="m-l-8 tag-wrapper tag-with-text ${["","purple-pale","success-pale"][i]}">
                <span class="tag-text">${a}</span>
              </span>`):t.mainAp&&"accessPoints"!==v.appUtils.getDeviceModuleName()&&"ap"===t.type&&(r+=`<span class="m-l-8 tag-wrapper tag-with-text purple-pale">
              <span class="tag-text">${v.su.CHAR.DEVICES.MASTER}</span>
          </span>`),t.preConfigErrorCode&&(r+='<span class="icon compatible-icon" data-tip="'+v.su.getErrTxt(t.preConfigErrorCode)+'" tip-max-width="250px"></span>'),!1===t.switchConsistent&&v.su.serviceManager.get("user").isSiteView()&&(r+='<span class="icon compatible-icon" data-tip="'+v.su.CHAR.DEVICES.SWITCH_INCONSISTENT_SITE+'" tip-max-width="250px"></span>'),!1===t.supportLockToAp&&(r+='<span class="icon icon-warning" data-tip="'+v.su.CHAR.CLIENTS_SETTINGS.LOCK_TO_AP_SUPPORT_WARN+'" tip-max-width="250px"></span>'),t.stackMsg&&(r+=`<span class="m-l-8 tag-wrapper tag-with-text success-pale">
            <span class="tag-text">${v.su.CHAR.SWITCH_SETTINGS.STACK}</span>
            </span>`),r}},{text:v.su.CHAR.DEVICES.DEVICE_TYPE_UPPER,filterText:v.su.CHAR.DEVICES.DEVICE_TYPE,width:200,dataIndex:"deviceSeriesType",treeSelectWithoutChildren:!0,filterable:i(),renderer:function(e){return v.isNumeric(e)?`<span class="tag-pure-single-${0===e?"theme":"purple"}">${[v.su.CHAR.DEVICES.OMADA,v.su.CHAR.DEVICES.OMADA_PRO][e]}</span>`:"--"},render:i()},{text:v.su.CHAR.DEVICES.CUSTOMER_UPPER,filterText:v.su.CHAR.DEVICES.CUSTOMER,width:220,dataIndex:"customName",renderer:function(e){return e?v.su.escapeHtml(e):"--"},render:v.su.serviceManager.get("user").isMspView()},{text:v.su.CHAR.DEVICES.SITE_UPPER,filterText:v.su.CHAR.DEVICES.SITE,width:220,dataIndex:"siteName",renderer:function(e){return e?v.su.escapeHtml(e):"--"},render:!v.su.serviceManager.get("user").isSiteView()},{text:v.su.CHAR.DEVICES.SERIAL_NUMBER_TH,filterText:v.su.CHAR.DEVICES.SERIAL_NUMBER_FIL,width:150,dataIndex:"sn"},{text:v.su.CHAR.DEVICES.MAC_ADDRESS,filterText:v.su.CHAR.DEVICES.MAC_ADDRESS_FIL,sortable:!v.su.serviceManager.get("user").isMspView(),width:190,dataIndex:"mac"},{text:v.su.CHAR.DEVICES.IP_ADDRESS,filterText:v.su.CHAR.DEVICES.IP_ADDRESS_FIL,sortable:v.su.serviceManager.get("user").isSiteView(),width:140,dataIndex:"ip"},{text:v.su.CHAR.DEVICES.IPV6_ADDRESS,filterText:v.su.CHAR.DEVICES.IPV6_ADDRESS_FIL,width:300,dataIndex:"ipv6List",renderer:function(e,t){return v.isArray(e)&&e.length?(e=e.map(e=>v.su.escapeHtml(e)),"<div>"+v.su.ellipsisIpv6(e,2)+"</div>"):"--"}},{text:v.su.CHAR.DEVICES.PUBLIC_IP_ADDRESS,filterText:v.su.CHAR.DEVICES.PUBLIC_IP_ADDRESS_FIL,sortable:v.su.serviceManager.get("user").isSiteView(),width:200,dataIndex:"publicIp",renderer:function(e,t){return t.combinedGateway?"--":e},thAddon:function(){return'<span data-tip="'+v.su.CHAR.DEVICES.PUBLIC_IP_ADDRESS_TIPS+'" class="due-tip"></span>'}},{text:v.su.CHAR.AP_SETTINGS.VOIP_VLAN_IP,width:200,dataIndex:"voipVlanIp",renderer:function(e,t){return e?v.su.escapeHtml(e):"--"}},{text:v.su.CHAR.DEVICES.ADDRESS,filterText:v.su.CHAR.DEVICES.ADDRESS_FIL,sortable:v.su.serviceManager.get("user").isSiteView(),width:220,dataIndex:"address",renderer:function(e){return e?v.su.escapeHtml(e):"--"},render:v.su.serviceManager.get("capability").support("deviceAddress")},{text:v.su.CHAR.DEVICES.CONFIG_RESULT,filterText:v.su.CHAR.DEVICES.CONFIG_RESULT_FIL,treeSelectWithoutChildren:!0,treeSelectWithoutChildren:!0,width:180,dataIndex:"configSyncStatus",filterable:v.su.serviceManager.get("user").isSiteView(),renderer:function(e,t){var i,a,r={[n]:v.su.CHAR.CLI_CONFIGURE.SUCCESS,[o]:v.su.CHAR.CLI_CONFIGURE.STATUS_FAILED,[u]:v.su.CHAR.CLI_CONFIGURE.STATUS_INCOMPATIBLE,[c]:v.su.CHAR.CLI_CONFIGURE.STATUS_DEPLOYING,[p]:v.su.CHAR.CLI_CONFIGURE.STATUS_PRECONFIGURE};return void 0!==t.configSyncStatus&&r[t.configSyncStatus]?(i={[n]:"success",[o]:"fail",[u]:"alert",[c]:"configuring",[p]:"pre-config"},a=t.configSyncStatus===n||t.configSyncStatus===c?"":"config-status-text config-status-click",'<span class="config-status round-rec '+i[t.configSyncStatus]+'" /> <span class="'+a+'">'+r[t.configSyncStatus]+"</span>"):"--"},render:v.su.serviceManager.get("capability").support("configurationResult")},{text:v.su.CHAR.DEVICES.STATUS,filterText:v.su.CHAR.DEVICES.STATUS_FIL,treeSelectWithoutChildren:!0,sortable:v.su.serviceManager.get("user").isSiteView(),filterable:v.su.serviceManager.get("user").isSiteView(),width:245,dataIndex:"status",renderer:function(e,t){if(t.addedInAdvanced&&e===h)return l=`<span class="tag-pure-single-grey">${v.su.CHAR.DEVICES.PRECONFIGURED}</span>`;if(v.su.serviceManager.get("capability").support("deviceLicence")&&!1===t.active&&t.licenseStatus!==v.su.serviceManager.get("license").LICENSE_STATUS.LICENSE_NOT_REQUIRED)l=`<span class="tag-pure-single-grey">${v.su.CHAR.DEVICES.UNACTIVE_UPPER}</span>`,t.wirelessLinked&&(l+='<span class="wireless-icon-unactive sprite-ico device-status-ico" data-tip="'+v.su.CHAR.DEVICES.WIRELESS+'"></span>');else{if(null==t.status)return e;var e=t.statusCategory,i=d.normalStatus[e],a=+(t.status+"").slice(-1),r="normal",s="",n="",o=!1,u=!1;switch(e){case 0:r="fail",u=1==a;break;case 1:r="done",t.fwDownload?i=v.su.CHAR.DEVICES.DOWNLOADING:0<=a&&a<=3&&(i=d.connectDetail[a]),o=5==a||7==a||"IPC"===t.type&&t.wirelessLinked,u=6==a||7==a;break;case 2:i=d.pendingDetail[a],4!=a&&5!=a||(r="fail"),6!=a&&7!=a||(r="warn"),o=1==a||3==a||5==a||7==a;break;case 3:r="warn",o=1==a||3==a,u=2==a||3==a;break;case 4:u=1==a}var e=v.appUtils.getTagTypeFromDeviceStatus(r),l=(o&&(s=`<span class="wireless-icon-${r} sprite-ico device-status-ico" data-tip="`+v.su.CHAR.DEVICES.WIRELESS+'"></span>'),u&&(n=`<span class="migrate-icon-${r} sprite-ico device-status-ico" data-tip="`+v.su.CHAR.DEVICES.MIGRATING+'"></span>'),`<span class="tag-pure-single-${e}">${i}</span>`);l+=s+(n+=v.su.moduleManager.get("index").getPowerStatus(t))}return l}},{text:v.su.CHAR.DEVICES.HEALTH,filterText:v.su.CHAR.DEVICES.HEALTH_FIL,sortable:v.su.serviceManager.get("user").isSiteView(),width:235,dataIndex:"healthScore",renderer:function(e){var t='<span class="health-wrap">',i="point ",a=v.appUtils.getHealthScoreText(e);switch(v.appUtils.getHealthLevel(e)){case v.appUtils.HEALTH_LEVEL.GOOD:i+="health-good";break;case v.appUtils.HEALTH_LEVEL.FAIR:i+="health-fair";break;case v.appUtils.HEALTH_LEVEL.POOR:i+="health-poor";break;case v.appUtils.HEALTH_LEVEL.NO_DATA:i+="health-no-data";break;default:a="--"}return(t+='<span class="'+i+'"></span>')+("<span>"+a+"</span>")+"</span>"},render:v.su.serviceManager.get("license").isPro()},{text:v.su.CHAR.DEVICES.MODEL,filterText:v.su.CHAR.DEVICES.MODEL_FIL,sortable:!v.su.serviceManager.get("user").isMspView(),width:235,dataIndex:"showModel",renderer:function(e,t){return v.su.escapeHtml(e+(t.specialModel?v.su.CHAR.DEVICES.CUSTOM_MADE:""))}},{text:v.su.CHAR.DEVICES.VERSION,filterText:v.su.CHAR.DEVICES.VERSION_FIL,sortable:!v.su.serviceManager.get("user").isMspView(),width:200,cls:"manual-check-header",dataIndex:"version",thAddon:function(){return'<span data-tip="'+v.su.CHAR.DEVICES.MANUAL_CHECK_TIP+'" class="manual-check check"></span>'},renderer:function(e,t){var i;return null==t.version?e:(i='<span class="version-wrap">',i+='<span dir="ltr" class="current-version">'+v.su.escapeHtml(e)+"</span>",t.needUpgrade&&!t.stackMsg&&(i+=v.su.serviceManager.get("user").isSiteView()?'<a class="version-name"><span class="update"></span> <span>'+t.latestVersion+"</span></a>":'<span data-tip="'+v.su.CHAR.DEVICES.NEW_FIRMWARE_AVAILABLE+'" class="upgrade-spot"></span>'),i+"</span>")}},{text:v.su.CHAR.DEVICES.UPLINK,filterText:v.su.CHAR.DEVICES.UPLINK_FIL,sortable:v.su.serviceManager.get("user").isSiteView(),width:190,dataIndex:"uplink",renderer:function(e,t){return l(t)?null==t.uplink?v.su.escapeHtml(e):t.wirelessLinked?'<span class="uplinks-number">'+v.su.escapeHtml(e)+'</span><span class="switch-icon"></span>':v.su.CHAR.DEVICES.WIRED:"--"}},{text:v.su.CHAR.DEVICES.DOWNLINK,filterText:v.su.CHAR.DEVICES.DOWNLINK_FIL,sortable:v.su.serviceManager.get("user").isSiteView(),width:120,dataIndex:"downlink",renderer:function(e,t){return l(t)?null==t.downlink||0===e?e:'<span data-info-panel="grid" data-key="'+t.mac+'" panel-position="left">'+e+"</span>":"--"}},{text:v.su.CHAR.DEVICES.UPLINK_DEVICE,filterText:v.su.CHAR.DEVICES.UPLINK_DEVICE_FIL,sortable:!1,dataIndex:"uplinkDeviceName",width:190,renderer:function(e,t){t=t.uplinkDeviceName;return null==t||""===t?"--":v.su.escapeHtml(t)},render:v.su.serviceManager.get("user").isSiteView()},{text:v.su.CHAR.DEVICES.UPLINK_DEVICE_PORT,filterText:v.su.CHAR.DEVICES.UPLINK_DEVICE_PORT_FIL,sortable:!1,dataIndex:"uplinkDevicePort",width:190,renderer:function(e,t){t=t.uplinkDevicePort;return null==t||""===t?"--":v.su.escapeHtml(t)},render:v.su.serviceManager.get("user").isSiteView()},{text:v.su.CHAR.DEVICES.UPLINK_SPEED,filterText:v.su.CHAR.DEVICES.UPLINK_SPEED_FIL,sortable:!1,dataIndex:"linkSpeed",width:150,renderer:function(e){return v.isNumeric(e)&&v.su.CHAR.SWITCH_SETTINGS["LINK_SPEED_"+e]||"--"},render:v.su.serviceManager.get("user").isSiteView()},{text:v.su.CHAR.DEVICES.UPLINK_DUPLEX,filterText:v.su.CHAR.DEVICES.UPLINK_DUPLEX_FIL,sortable:!1,dataIndex:"duplex",width:150,renderer:function(e){return v.isNumeric(e)&&v.su.CHAR.SWITCH_SETTINGS["DUPLEX_"+e]||"--"},render:v.su.serviceManager.get("user").isSiteView()},{text:v.su.CHAR.DEVICES.UPTIME,filterText:v.su.CHAR.DEVICES.UPTIME_FIL,sortable:v.su.serviceManager.get("user").isSiteView(),width:160,dataIndex:"uptime",renderer:function(e){return v.su.escapeHtml(v.su.language.isRtl()?e&&e.replaceAll(/ /g," ‏"):e)}},{text:v.su.CHAR.DEVICES.LICENSE_STATUS_UPPER,filterText:v.su.CHAR.DEVICES.LICENSE_STATUS_FIL,width:220,dataIndex:"licenseStatus",renderer:function(e,t){return v.isNumeric(e)?`<span class="tag-wrapper tag-with-text ${v.appUtils.getTagTypeFormLicense(e)}">${v.appUtils.getLicenseText(e)||v.su.getDaysLeftText(t.dueTime)}</span>`:"--"},render:v.su.serviceManager.get("capability").support("deviceLicence")},{text:v.su.CHAR.DEVICES.LICENSE_DUE_TIME,filterText:v.su.CHAR.DEVICES.LICENSE_DUE_TIME_FIL,width:180,dataIndex:"dueTime",thAddon:function(){return'<span data-tip="'+v.su.CHAR.LICENSE.TIME_TYPE_CONVERSION.replace("{viewType}",v.su.moduleManager.get("main").getViewType())+'" class="due-tip"></span>'},renderer:function(e,t){var i="--",a=v.su.serviceManager.get("user").isSiteView()?"site":"controller";return i=v.isNumeric(e)?(i='<span class="license-due-time '+(2===t.licenseStatus?"disabled":"")+'">')+v.su.serviceManager.get("time").getTextFromUTC(e,a,{pattern:"MM dd, yyyy"})+"</span>":i},render:v.su.serviceManager.get("capability").support("deviceLicence")},{text:v.su.CHAR.DEVICES.MEM_USAGE,filterText:v.su.CHAR.DEVICES.MEM_USAGE_FIL,sortable:v.su.serviceManager.get("user").isSiteView(),width:160,dataIndex:"memUtil",renderer:function(e,t){return t.combinedGateway?"--":null==t.memUtil?e:"number"===v.type(e=+e)?e+"%":""}},{text:v.su.CHAR.DEVICES.CPU_USAGE,filterText:v.su.CHAR.DEVICES.CPU_USAGE_FIL,sortable:v.su.serviceManager.get("user").isSiteView(),width:140,dataIndex:"cpuUtil",renderer:function(e,t){return null==t.cpuUtil?e:"number"===v.type(e=+e)?e+"%":""}},{text:v.su.CHAR.DEVICES.CLINETS,filterText:v.su.CHAR.DEVICES.CLINETS_FIL,sortable:v.su.serviceManager.get("user").isSiteView(),width:110,dataIndex:"clientNum",renderer:function(e,t){return null==t.clientNum||2!==parseInt(t.statusCategory)?e:0},render:v.su.serviceManager.get("capability").support("clientStatisticOfDevice")},{text:v.su.CHAR.DEVICES.STACK_NAME,filterText:v.su.CHAR.DEVICES.STACK_NAME_FIL,sortable:!0,dataIndex:"stackMsg",width:220,renderer:function(e,t){var i;return"switch"!==t.type||null==(t=t.stackMsg)?"--":(i=t.stackName,'<span class="stack-group-btn" data-id="'+t.stackId+'">'+v.su.escapeHtml(i)+"</span>")},render:v.su.serviceManager.get("capability").support("stackGroup")},{text:v.su.CHAR.DEVICES.DOWN,filterText:v.su.CHAR.DEVICES.DOWN_FIL,sortable:v.su.serviceManager.get("user").isSiteView(),width:120,dataIndex:"download",renderer:function(e,t){return null==t.download?e:2!==parseInt(t.statusCategory)?v.su.moduleManager.get("index").transferTraffic(e):"0 "+v.su.CHAR.AP_SETTINGS.BYTES}},{text:v.su.CHAR.DEVICES.UP,filterText:v.su.CHAR.DEVICES.UP_FIL,sortable:v.su.serviceManager.get("user").isSiteView(),width:120,dataIndex:"upload",renderer:function(e,t){return null==t.upload?e:2!==parseInt(t.statusCategory)?v.su.moduleManager.get("index").transferTraffic(e):"0 "+v.su.CHAR.AP_SETTINGS.BYTES}},{text:v.su.CHAR.DEVICES.LOOPBACK,filterText:v.su.CHAR.DEVICES.LOOPBACK_FIL,sortable:v.su.serviceManager.get("user").isSiteView(),width:145,dataIndex:"loopback",renderer:function(e,t){return("switch"===t.type||"ap"===t.type)&&t.loop&&t.loopbackNum?v.su.escapeHtml(t.loopbackNum+", "+t.loop):"--"}},{text:v.su.CHAR.DEVICES.HOP,filterText:v.su.CHAR.DEVICES.HOP_FIL,sortable:v.su.serviceManager.get("user").isSiteView(),dataIndex:"hop",width:120,renderer:function(e,t){return l(t)?null==t.hop?v.su.escapeHtml(e.toString()):t.wirelessLinked?v.su.escapeHtml(e.toString())+" "+v.su.CHAR.DEVICES.MESH_AP:v.su.CHAR.DEVICES.ROOT_AP:"--"}},{text:v.su.CHAR.DEVICES.WLAN_GROUP,filterText:v.su.CHAR.DEVICES.WLAN_GROUP_FIL,sortable:v.su.serviceManager.get("user").isSiteView(),dataIndex:"wlanGroup",width:140,renderer:function(e,t){return l(t)&&(null==t.wlanGroup||2!==parseInt(t.statusCategory))?v.su.escapeHtml(e.toString()):"--"}},{text:v.su.CHAR.DEVICES.OVERRIDE,filterText:v.su.CHAR.DEVICES.OVERRIDE_FIL,sortable:v.su.serviceManager.get("user").isSiteView(),dataIndex:"override",width:130,renderer:function(e,t){return l(t)?v.su.escapeHtml(e):"--"}},{text:v.su.CHAR.DEVICES.RADIO_2G,filterText:v.su.CHAR.DEVICES.RADIO_2G_FIL,dataIndex:"radio2gConfig",width:180,renderer:function(e,t){return l(t)&&2!==parseInt(t.statusCategory)&&!1!==t.deviceMisc.support2g&&!!t.radioSetting2g&&!!t.wp2g?v.su.escapeHtml(v.su.moduleManager.get("index").transferRealtimeRadio(t.radioSetting2g,t.wp2g,t.statusCategory)):"--"}},{text:v.su.CHAR.DEVICES.RADIO_5G,filterText:v.su.CHAR.DEVICES.RADIO_5G_FIL,dataIndex:"radio5gConfig",width:180,renderer:function(e,t){var i,a,r,s;return l(t)&&(a="",r=v.su.CHAR.MAIN.HZ5_1,s=v.su.CHAR.MAIN.HZ5_2,2!==parseInt(t.statusCategory)&&t.deviceMisc.support5g&&t.radioSetting5g&&t.wp5g&&(i=v.su.escapeHtml(v.su.moduleManager.get("index").transferRealtimeRadio(t.radioSetting5g,t.wp5g,t.statusCategory)),t.deviceMisc.support5g2&&(i+=" ("+r+")"),a+="<p>"+i+"</p>"),2!==parseInt(t.statusCategory)&&t.deviceMisc.support5g2&&t.radioSetting5g2&&t.wp5g2&&(r=v.su.escapeHtml(v.su.moduleManager.get("index").transferRealtimeRadio(t.radioSetting5g2,t.wp5g2,t.statusCategory)),a+="<p>"+(r+=" ("+s+")")+"</p>"),a)||"--"}},{text:v.su.CHAR.DEVICES.RADIO_6G,filterText:v.su.CHAR.DEVICES.RADIO_6G_FIL,dataIndex:"radio6gConfig",width:180,renderer:function(e,t){return l(t)&&2!==parseInt(t.statusCategory)&&t.deviceMisc.support6g&&!!t.radioSetting6g&&!!t.wp6g?v.su.escapeHtml(v.su.moduleManager.get("index").transferRealtimeRadio(t.radioSetting6g,t.wp6g,t.statusCategory)):"--"}},{text:v.su.CHAR.DEVICES.CLIENTS_2G,filterText:v.su.CHAR.DEVICES.CLIENTS_2G_FIL,sortable:v.su.serviceManager.get("user").isSiteView(),dataIndex:"clientNum2g",width:130,renderer:function(e,t){return l(t)?null==t.clientNum2g||2!==parseInt(t.statusCategory)?e:0:"--"},render:v.su.serviceManager.get("capability").support("clientStatisticOfDevice")},{text:v.su.CHAR.DEVICES.CLIENTS_5G,filterText:v.su.CHAR.DEVICES.CLIENTS_5G_FIL,sortable:v.su.serviceManager.get("user").isSiteView(),dataIndex:"clientNum5g",width:130,renderer:function(e,t){var i,a,r;return l(t)&&(i="",a=v.su.CHAR.MAIN.HZ5_1,r=v.su.CHAR.MAIN.HZ5_2,!t.deviceMisc.support5g||void 0===t.clientNum5g&&null===t.clientNum5g||(e=2!==parseInt(t.statusCategory)?e:0,t.deviceMisc.support5g2&&(e+=" ("+a+")"),i+="<p>"+e+"</p>"),!t.deviceMisc.support5g2||void 0===t.clientNum5g2&&null===t.clientNum5g2||(a=2!==parseInt(t.statusCategory)?t.clientNum5g2:0,i+="<p>"+(a+=" ("+r+")")+"</p>"),i)||"--"},render:v.su.serviceManager.get("capability").support("clientStatisticOfDevice")},{text:v.su.CHAR.DEVICES.CLIENTS_6G,filterText:v.su.CHAR.DEVICES.CLIENTS_6G_FIL,sortable:v.su.serviceManager.get("user").isSiteView(),dataIndex:"clientNum6g",width:120,renderer:function(e,t){return l(t)?null==t.clientNum6g||2!==parseInt(t.statusCategory)?e:0:"--"},render:v.su.serviceManager.get("capability").support("clientStatisticOfDevice")},{text:v.su.CHAR.DEVICES.BSSID,filterText:v.su.CHAR.DEVICES.BSSID_FIL,dataIndex:"bssids",width:170,renderer:function(e,t){return l(t)&&v.isArray(e)&&0<e.length?1<e.length?'<span data-tip="'+v.su.escapeHtml(e.join(", "))+'" tip-max-width="300px">'+v.su.escapeHtml(e[0])+"<span>...</span></span>":"<span>"+v.su.escapeHtml(e[0])+"</span>":"--"}},{text:v.su.CHAR.DEVICES.TX_RATE,filterText:v.su.CHAR.DEVICES.TX_RATE_FIL,sortable:v.su.serviceManager.get("user").isSiteView(),dataIndex:"txRate",width:120,renderer:function(e,t){return l(t)&&v.isNumeric(e)?v.su.moduleManager.get("index").transferTraffic(e)+v.su.CHAR.DEVICES.PS:"--"}},{text:v.su.CHAR.DEVICES.RX_RATE,filterText:v.su.CHAR.DEVICES.RX_RATE_FIL,sortable:v.su.serviceManager.get("user").isSiteView(),dataIndex:"rxRate",width:120,renderer:function(e,t){return l(t)&&v.isNumeric(e)?v.su.moduleManager.get("index").transferTraffic(e)+v.su.CHAR.DEVICES.PS:"--"}},{text:v.su.CHAR.DEVICES.CHANNEL,filterText:v.su.CHAR.DEVICES.CHANNEL_FIL,dataIndex:"channel",width:150,renderer:function(e,a){if(!l(a))return"--";for(var t,i=function(e){var t,i;return!!(2!==parseInt(a.statusCategory)&&("2g"===e?!1!==a.deviceMisc["support"+e]:a.deviceMisc["support"+e])&&!!a["radioSetting"+e]&&!!a["wp"+e])&&(e=a["wp"+e],i="",1!=(t=a.statusCategory)?i=!1:e&&e.actualChannel&&(t=e.actualChannel.split("/"),i=!!/^[1-9]\d*$/.test(t[0].trim())&&""+parseInt(t[0].trim())),i)},r=["2g","5g","5g2","6g"],s=[],n=v.su.CHAR.DEVICES,o=0,u=r.length;o<u;o++)(t=i(r[o]))&&s.push(t+" ("+n["OVERVIEW_CHANNEL_"+("5g"===r[o]&&a.deviceMisc.support5g2?"5G1":r[o].toUpperCase())]+")");return 0===s.length?"--":s.join(", ")}},{text:v.su.CHAR.DEVICES.CHANNEL_UTIL_2G,filterText:v.su.CHAR.DEVICES.CHANNEL_UTIL_2G_FIL,sortable:v.su.serviceManager.get("user").isSiteView(),width:130,dataIndex:"channelUtil2g",renderer:function(e,t){return l(t)&&(e=t.wp2g)&&void 0!==(t=d.getChannelUtils(e))?t+"%":"--"}},{text:v.su.CHAR.DEVICES.CHANNEL_UTIL_5G,filterText:v.su.CHAR.DEVICES.CHANNEL_UTIL_5G_FIL,sortable:v.su.serviceManager.get("user").isSiteView(),width:130,dataIndex:"channelUtil5g",renderer:function(e,t){var i,a,r,s,n;return l(t)&&(i="",a=t.wp5g,r=t.wp5g2,s=v.su.CHAR.MAIN.HZ5_1,n=v.su.CHAR.MAIN.HZ5_2,t.deviceMisc.support5g&&a&&void 0!==(a=d.getChannelUtils(a))&&(a=a+"%",t.deviceMisc.support5g2&&(a+=" ("+s+")"),i+="<p>"+a+"</p>"),t.deviceMisc.support5g2&&r&&void 0!==(s=d.getChannelUtils(r))&&(a=s+"%",i+="<p>"+(a+=" ("+n+")")+"</p>"),i)||"--"}},{text:v.su.CHAR.DEVICES.CHANNEL_UTIL_6G,filterText:v.su.CHAR.DEVICES.CHANNEL_UTIL_6G_FIL,sortable:v.su.serviceManager.get("user").isSiteView(),width:120,dataIndex:"channelUtil6g",renderer:function(e,t){return l(t)&&(e=t.wp6g)&&void 0!==(t=d.getChannelUtils(e))?t+"%":"--"}},{text:v.su.CHAR.DEVICES.TAGS,filterText:v.su.CHAR.DEVICES.TAGS_FIL,sortable:v.su.serviceManager.get("user").isSiteView(),filterable:!v.su.serviceManager.get("user").isSiteView(),dataIndex:"tagName",width:150,renderer:function(e){return e?v.su.escapeHtml(e):"--"}},{text:v.su.CHAR.DEVICES.LAST_SEEN,filterText:v.su.CHAR.DEVICES.LAST_SEEN_FIL,sortable:v.su.serviceManager.get("user").isSiteView(),dataIndex:"lastSeen",width:200,renderer:function(e,t){var i=v.su.serviceManager.get("user").isSiteView()?"site":"controller";return v.isNumeric(e)?v.su.serviceManager.get("time").getTextFromUTC(e,i,{pattern:"MM dd, yyyy hh:mm hc"}):null==e?"--":e}},{xtype:"actioncolumn",width:200,fixed:"right",text:v.su.CHAR.GRID.ACTION,renderer:function(e,t){var i="",a=v.su.CHAR.DEVICES;if(t.preConfigRetryType)return i="",(i+='<span class="adopt-cell">')+'<a class="action-pre-config-retry" data-type="preConfigRetry">'+a.RETRY+"</a></span>";if(v.su.serviceManager.get("capability").support("deviceLicence")&&!1===t.active&&"true"===localStorage.getItem("licenseAuth")&&!1!==t.inWhitelist&&"IPC"!==(s=t).type&&"NVR"!==s.type&&"SOLAR"!==s.type)return'<a class="action-active" data-type="active">'+a.ACTIVE+"</a>";if(!1===t.inWhitelist&&t.statusCategory===g)return"";if(d.isMigrating(t.status))return!d.deviceAuth["cancel-migrate"]||t.stackMsg&&t.stackMsg.masterMac!==t.mac?"":(i+='<span class="adopt-cell">')+'<a class="action-cancel-migrate" data-type="cancel-migrate">'+a.CANCEL_MIGRATION+"</a></span>";if(!1===t.inWhitelist&&t.statusCategory===h)return"";if(v.isNumeric(t.compatible)&&1!==t.compatible&&2!==t.compatible&&10!==t.compatible&&12!==t.compatible&&13!==t.compatible&&!1!==t.inWhitelist){t.stackMsg&&(t.mac,t.stackMsg.masterMac);var r=v.su.serviceManager.get("capability").support("deviceLicence")&&!0===t.active,s="cloudBase"!==App.CLOUD_TYPE||"cloudBase"===App.CLOUD_TYPE&&(!0===t.active||null==t.active),n=t.stackMsg&&t.mac!==t.stackMsg.masterMac;if(d.deviceAuth["adopt"]&&2===t.statusCategory&&s){var o="",u="";switch(+(t.status+"").slice(-1)){case 0:case 1:case 6:case 7:if(r&&n)return"";o="ready",u=a.ADOPT;break;case 2:case 3:o="doing";break;case 4:case 5:o="fail"}i=(i+='<span class="adopt-cell m-r-6">')+('<a class="action-adopt '+o+'" data-type="adopt" data-tip="'+u+'">'+a.RETRY+"</a>")+"</span>"}else 1===t.statusCategory?(l=12===t.status||t.fwDownload?" disabled":"",d.isCompatibleDevice(t)&&(d.deviceAuth["locate"]&&"gateway"!==t.type&&"olt"!==t.type&&(i+=t.locateEnable?'<a class="sprite-ico action-unlocate" data-type="cancelLocate" data-tip="'+a.CANCEL_LOCATE+'"></a>':'<a class="sprite-ico action-locate" data-type="locate" data-tip="'+a.LOCATE+'"></a>'),d.deviceAuth["reboot"])&&!0!==t.combinedGateway&&(i+='<a class="sprite-ico action-reboot'+(12===t.status||t.rebooting?" disabled":"")+'" data-type="reboot" data-tip="'+a.REBOOT+'"></a>'),d.deviceAuth["upgrade"]&&t.needUpgrade&&!0!==t.combinedGateway&&!t.stackMsg&&(i+='<a class="sprite-ico action-upgrade'+l+'" data-type="upgrade" data-tip="'+(0<l.length?a.UPGRADEING:a.UPGRADE)+'"></a>'),d.deviceAuth["showRunningConfig"]&&t.supportRunningConfig&&!n&&v.su.serviceManager.get("capability").support("cli")&&(i+='<a class="sprite-ico action-running-config'+l+'" data-type="showRunningConfig" data-tip="'+a.SHOW_RUNNING_CONFIG+'"></a>')):t.statusCategory===f&&d.deviceAuth["showRunningConfig"]&&t.supportRunningConfig&&!n&&v.su.serviceManager.get("capability").support("cli")&&(i+='<a class="sprite-ico action-running-config'+l+'" data-type="showRunningConfig" data-tip="'+a.SHOW_RUNNING_CONFIG+'"></a>')}4===t.statusCategory&&d.deviceAuth["link"]&&"ap"===t.type&&(i+='<a class="sprite-ico action-reconnect" data-type="link" data-tip="'+v.su.CHAR.AP_SETTINGS.LINK+'"></a>'),v.su.serviceManager.get("user").isMspView()&&t.site&&"PENDING-SITE"!==t.site&&(i+='<a class="sprite-ico action-launch" data-type="launch" data-tip="'+v.su.CHAR.DEVICES.NAVIGATE_TO_SITE+'"></a>'),t.switchable&&1===t.p2pRole&&d.deviceAuth["manage"]&&(i+='<a class="sprite-ico action-change-role inline-block" data-type="changeRole" data-tip="'+v.su.CHAR.DEVICES.CHANGE_ROLE+'"></a>');var l=("cloudBase"===App.CLOUD_TYPE||v.su.serviceManager.get("license").isPro())&&!1===t.active,c="PENDING-SITE"!==t.site&&(24===t.status||25===t.status),p="deviceGroup"===v.appUtils.getDeviceModuleName()&&v.su.moduleManager.get("accessPoints")&&v.su.moduleManager.get("accessPoints").isGroupedBridge(),t=t.childApsOfP2P&&v.isArray(t.childApsOfP2P)&&0<t.childApsOfP2P.length;return p&&t&&!l&&!c&&d.deviceAuth["move-to-site"]&&(i+='<a class="sprite-ico action-move-site" data-type="moveSite" data-tip="'+v.su.CHAR.ACCESS_POINTS.MOVE_SITE+'"></a>'),i}}],(a=e)?(r=new Array(a.length),v.each(d.columns,function(e,t){var i=a.indexOf(t.dataIndex),i=-1!==i?i:a.indexOf(t.xtype);-1!==i&&(r[i]=v.su.clone(t))})):(r=v.su.clone(d.columns),v.each(r,function(e,t){"status"===t.dataIndex&&v.su.serviceManager.get("user").isSiteView()?r[e].filterOptions=new v.su.StoreBind(v.su.storeManager.get("statusFilterOpts")):"tagName"!==t.dataIndex||v.su.serviceManager.get("user").isSiteView()?"deviceSeriesType"===t.dataIndex&&i()?r[e].filterOptions=new v.su.StoreBind(v.su.storeManager.get("deviceSeriesOpts")):"configSyncStatus"===t.dataIndex&&v.su.serviceManager.get("user").isSiteView()&&(r[e].filterOptions=new v.su.StoreBind(v.su.storeManager.get("configurationResultFilterOpts"))):r[e].filterOptions=new v.su.StoreBind(v.su.storeManager.get("tagFilterOpts"))})),r},e.prototype.getAllDefaultColumns=function(){var t,e=v.su.clone(this.allDefaultColumns),i=[],a=this.getDeviceColumns().filter(function(e){return void 0===e.render||!!e.render});for(t in e){var r=a.find(function(e){return e.dataIndex===t});r?r.text&&i.push(r.text):e[t]=!1}return{columns:e,columnText:i}},e.prototype.getDeviceStatusMap=function(){return t},e.prototype.getDeviceStatusCategoryMap=function(){return i},e.prototype.getDeviceCompatibleIconAndText=function(e){var t="",i="";if(v.isNumeric(e.compatible)&&0!==e.compatible)switch(e.compatible){case 1:case 2:case 10:t=v.su.CHAR.DEVICES.NOT_COMPATIBLE_INFO,i="incompatible";break;case 3:case 7:t=v.su.CHAR.DEVICES.NOT_COMPATIBLE_HIGH_VERSION;break;case 4:t=v.su.CHAR.DEVICES.NOT_COMPATIBLE_LOW_VERSION;break;case 11:t=v.su.CHAR.DEVICES.NOT_INWHITELIST,i="incompatible";break;case 12:t=v.su.CHAR.DEVICES.NOT_COMPATIBLE_CONTROLLER_VERSION,i="incompatible";break;case 13:t=v.su.CHAR.DEVICES.NOT_COMPATIBLE_FIRMWARE_VERSION,i="incompatible"}return{text:t,cls:i}},e.prototype.getRollingUpgradeStatus=function(t,i){var a;v.su.serviceManager.get("capability").support("deviceRollingUpgrade")&&v.su.serviceManager.get("user").isSiteView()&&!App.SITE_PROFILE_EDITING&&(a=this).service.ajax.request({url:"/devices/rollingUpgradeStatus",ajax:{type:"GET"},success:function(e){a.setRollingBtnStatus(e&&e.result&&e.result.status,i),t&&t(e),i&&(i.show(),i.loading(!1))},fail:function(){i&&i.hide()},error:function(){i&&i.hide()}})},e.prototype.setRollingBtnStatus=function(e,t){1===e?(t.setText(v.su.CHAR.DEVICES.CANCEL_ROLLING_UPGRADE),this._rollingStatus=!0):(t.setText(v.su.CHAR.DEVICES.START_ROLLING_UPGRADE),this._rollingStatus=!1)},e.prototype.clickRollingUpgradeBtn=function(e,t){this._rollingStatus?this.cancelRollingUpgrade(t):e.show()},e.prototype.cancelRollingUpgrade=function(e){v.su.serviceManager.get("user").isSiteView()&&!App.SITE_PROFILE_EDITING&&this.service.ajax.request({url:"/cmd/devices/cancelRollingUpgrade",ajax:{type:"POST"},success:function(){e&&e()}})},e.prototype.pollingRollingUpgrade=function(t,i){var a;function r(e){clearInterval(a._rollingTimer),2===e.result.status&&t&&t(e)}v.su.serviceManager.get("user").isSiteView()&&!App.SITE_PROFILE_EDITING&&(a=this,clearInterval(a._rollingTimer),this.getRollingUpgradeStatus(function(e){e&&e.result&&v.isNumeric(e.result.status)&&(clearInterval(a._rollingTimer),e&&e.result&&1!==e.result.status?r(e):a._rollingTimer=setInterval(function(){a.getRollingUpgradeStatus(function(e){e&&e.result&&1!==e.result.status&&r(e)},i)},"cloudAccess"===App.CLOUD_TYPE?15e3:5e3))},i))},e.prototype.startRollingUpgrade=function(e,t,i){var a;v.su.serviceManager.get("user").isSiteView()&&!App.SITE_PROFILE_EDITING&&(a=this,e.disable(),this.service.ajax.request({url:"/cmd/devices/onlineRollingUpgrade"+v.appUtils.getURLSearchParamString(i),ajax:{type:"POST"},success:function(){e.enable(),a.pollingRollingUpgrade(t,e)},fail:function(){e.enable()},error:function(){e.enable()}}))},e.prototype.clearRollingUpgrade=function(){clearInterval(this._rollingTimer)},e.prototype.onlineCheckUpgrade=function(e){var t,i,a;v.su.serviceManager.get("user").isSiteView()&&!App.SITE_PROFILE_EDITING&&(t=this,i=(e=e||{}).loading,a=e.fail,i&&i(),this.service.ajax.request({url:"/cmd/devices/onlineCheckUpgrade",success:function(){t.pollingOnlineCheckStatus(e)},fail:function(){a&&a()},error:function(){a&&a()}}))},e.prototype.pollingOnlineCheckStatus=function(t){var i,a;v.su.serviceManager.get("user").isSiteView()&&!App.SITE_PROFILE_EDITING&&(i=this,a=(t=t||{}).success,clearTimeout(i._onlineCheckTimer),i.getOnlineCheckStatus(function(e){a&&a(e),e.status?i._onlineCheckTimer=setTimeout(function(){i.pollingOnlineCheckStatus(t)},"cloudAccess"===App.CLOUD_TYPE?15e3:5e3):clearTimeout(i._onlineCheckTimer)},t))},e.prototype.getOnlineCheckStatus=function(t,e){var i,a;v.su.serviceManager.get("user").isSiteView()&&!App.SITE_PROFILE_EDITING&&(i=(e=e||{}).loading,a=e.fail,i&&i(),this.service.ajax.request({url:"/devices/onlineUpgradeStatus",ajax:{type:"GET"},success:function(e){t&&t(e&&e.result)},fail:function(){a&&a()},error:function(){a&&a()}}))},e.prototype.isCompatibleDevice=function(e){return!(!e||!v.isNumeric(e.compatible)||e.compatible!==a&&e.compatible!==r)},e})(jQuery),$.su.CountryTimezone=(e=>{function t(){if("object"==typeof t.instance)return t.instance;this.name="countryTimezone",this.dataUrl="./config/countries-timezone.json",this.countryTimezoneMap={},this.countries=null,e.su.Service.call(this),t.instance=this}return e.su.inherit(e.su.Service,t),t.prototype.initData=function(){var t=this;e.ajax(this.dataUrl,{async:!1,type:"GET",dataType:"json",success:function(e){t.countryTimezoneMap=e}})},t.prototype.getTimezonesForCountry=function(e){var t,i;for(t in this.countryTimezoneMap)if((i=this.countryTimezoneMap[t]).name===e)return i.zones;return[]},t})(jQuery),(o=>{o.su=o.su||{},o.su.Polling=(()=>{function e(){if("object"==typeof e.instance)return e.instance;this.name="polling",o.su.Service.call(this),(e.instance=this).activityModelMap={},this.addListener("ev_model_dirty",function(e,t){this.clearPolling(t)})}function n(e){var t,i=null;for(t in e)e.hasOwnProperty(t)&&(null===i||0<e[t]&&e[t]<i)&&(i=e[t]);return i}return o.su.inherit(o.su.Service,e),e.prototype.poll=function(e,t,i,a,r){var s="string"==typeof e?e:e.name||e.dataObj.name,e="string"==typeof r?r:r.name;r=this.activityModelMap[s]?(this.activityModelMap[s].modules[e]=a,clearInterval(this.activityModelMap[s].instance),a=n(this.activityModelMap[s].modules),this.activityModelMap[s].method=t,this.activityModelMap[s].dataAndCallback=o.su.clone(i),function(){var e=o.su.modelManager.get(s)||o.su.storeManager.get(s);e.isDirty()&&"load"!=t||e[t](i)}):(this.activityModelMap[s]={modules:{},queryInterval:null,instance:null},this.activityModelMap[s].modules[e]=a,this.activityModelMap[s].method=t,this.activityModelMap[s].dataAndCallback=o.su.clone(i),function(){var e=o.su.modelManager.get(s)||o.su.storeManager.get(s);e.isDirty()&&"load"!=t||e[t](i)}),this.activityModelMap[s].instance=setInterval(r,a),r()},e.prototype.stopPolling=function(e,t){var i,a,r="string"==typeof e?e:e.name||e.dataObj.name,s="string"==typeof t?t:t.name;this.checkPolling(e,t)&&(s in this.activityModelMap[r].modules&&(this.activityModelMap[r].modules[s]=void 0),clearInterval(this.activityModelMap[r].instance),e=n(this.activityModelMap[r].modules),i=this.activityModelMap[r].method,a=this.activityModelMap[r].dataAndCallback,e)&&(t=function(){var e=o.su.modelManager.get(r)||o.su.storeManager.get(r);e.isDirty()&&"load"!=i||e[i](a)},this.activityModelMap[r].instance=setInterval(t,e),t())},e.prototype.clearPolling=function(e){for(var t in clearInterval(this.activityModelMap[e].instance),this.activityModelMap[e].modules)this.activityModelMap[e].modules.hasOwnProperty(t)&&(this.activityModelMap[e].modules[t]=void 0)},e.prototype.checkPolling=function(e,t){e="string"==typeof e?e:e.name||e.dataObj.name,t="string"==typeof t?t:t.name;return!!this.activityModelMap[e]&&this.activityModelMap[e].modules[t]},e})()})(jQuery),(i=>{function e(){if("object"==typeof e.instance)return e.instance;this.name="moduleManager",i.su.Service.call(this),e.instance=this}i.su=i.su||{},i.su.Services=i.su.Services||{},i.su.Services.ModuleManager=(i.su.inherit(i.su.Service,e),e.prototype.launch=function(e,t){i.su.moduleManager.launch(e,t)},e.prototype.get=function(e){e=i.su.moduleManager.query(e);return e instanceof i.su.Module&&e},e.prototype.getStatus=function(e){return i.su.moduleManager.getStatus(e)},e.prototype.hasModule=function(e){return!1!==i.su.moduleManager.query(e)},e)})(jQuery),(h=>{h.su=h.su||{},h.su.Services=h.su.Services||{},h.su.Services.ModuleLoader=(()=>{function e(){if("object"==typeof e.instance)return e.instance;this.name="moduleLoader",h.su.Service.call(this),(e.instance=this)._map={},this.loadingModule={}}return h.su.inherit(h.su.Service,e),e.prototype.load=function(e,t,i,a){var r=this,s=(this.isBusy=!0,e.module),e=e.view||"_default",n=s+"_"+e,o=t.module,u=t.view||"_default",l=o+"_"+u,c=(this.loadingModule[o]=this.loadingModule[o]||{},h.su.randomId()),p=(h.each(this.loadingModule[o],function(e,t){r.loadingModule[o][e]="stopped"}),this.loadingModule[o][c]="running",this.unLoad(i),this._map[n]),d=(p||(this._map[n]={id:n,module:s,view:e,children:[],htmlLoader:null,parent:null},p=this._map[n]),this._map[l]?this._map[l].htmlLoader&&this.unLoad(this._map[l].htmlLoader):this._map[l]={id:l,module:o,view:u,children:[],htmlLoader:null,parent:n},this._map[l].htmlLoader=i,0<=h.inArray(l,p.children)||p.children.push(l),i.viewObjs?i.viewObjs[0]:i);"stopped"!=r.loadingModule[o][c]&&h.su.moduleManager.load(o,function(){var e=h.su.moduleManager.query(o);e._getView(t.view)&&(e._getView(t.view).setContainer(d),e.load(function(){delete r.loadingModule[o][c],a&&a()}),d.setLoadingModuleName(t.module)),r.isBusy=!1})},e.prototype.unLoad=function(e){var t,s=function(e,t){var i=e[t].module,i=h.su.moduleManager.query(i),a=e[t].children.slice(0);if(a&&0<a.length)for(var r=0;r<a.length;r++)s(e,a[r]);i.fireEvent&&i.fireEvent("ev_before_view_unload",[e[t].view]),e[t].htmlLoader.load(""),i&&"defineNotLoaded"!==i&&i.fireEvent("ev_view_will_unload",[e[t].view]),e[t].children=[],e[t].htmlLoader=null,e[t].parent&&(i=e[e[t].parent],0<=(t=h.inArray(t,i.children)))&&i.children.splice(t,1)};for(t in this._map)this._map.hasOwnProperty(t)&&this._map[t].htmlLoader===e&&s(this._map,t);e.setLoadingModuleName(null)},e})()})(jQuery),(n=>{let o={CONNECTED:0,CONNECTING:1,DISCONNECTED_STOP_RETRY:2};function t(e){if("object"==typeof t.instance)return t.instance;n.extend(!0,i),this.name="webSocket",n.su.Service.call(this),t.instance=this}var u,l,i,c;n.su=n.su||{},n.su.WebSocketManager=(u={},l={},i={},c=["websocket","xhr-streaming","xdr-streaming","eventsource","htmlfile","xhr-polling","xdr-polling","jsonp-polling"],n.su.inherit(n.su.Service,t),t.prototype.register=function(i,e=!0){var a=this,t=i.name||i.url,r=(this.getWebSocket(t)&&this.destroy(t),i.transports||c),r=new SockJS(i.url,void 0,{transports:r}),r=Stomp.over(r),s=new n.su.Socket({name:t,client:r});u[t]=s,e&&(l[t]=0),i.topics;s.on("ev_socket_connected_success",()=>{a.fireEvent("ev_socket_connected_success",t),s.status=o.CONNECTED,l[t]=0}),s.on("ev_socket_connected_fail",(e,t)=>{"Cannot connect to server"!==t.reason&&(s.reconnectTimeout&&clearTimeout(s.reconnectTimeout),s.reconnectTimeout=setTimeout(()=>{a.register(i)},1e3))}),s.reconnectTimeout=setTimeout(()=>{a.isConnected(t)||(l[t]<10?(l[t]+=1,a.register(i,!1)):(a.fireEvent("ev_socket_notconnected_stop_retry",t),s.status=o.DISCONNECTED_STOP_RETRY))},1e4),s.connect({headers:i.headers,topics:i.topics,success:n.isFunction(i.success)&&i.success,fail:n.isFunction(i.fail)&&i.fail}),a.fireEvent("ev_socket_connecting",t),s.status=o.CONNECTING},t.prototype.getWebSocket=function(e){if(!u[e])for(var t in u)if(u.hasOwnProperty(t)&&t===e)return u[t];return u[e]},t.prototype.destroy=function(e,t){var i=this.getWebSocket(e);i&&i.getClient().connected?i.disconnect(t):t&&t(),u[e].off("ev_socket_connected_success"),u[e].off("ev_socket_connected_fail"),u[e].reconnectTimeout&&clearTimeout(u[e].reconnectTimeout),u[e]=null,delete u[e]},t.prototype.isConnected=function(e){e=this.getWebSocket(e);return e&&e.getClient().connected},t)})(jQuery),(s=>{function e(e){var t=e.client,i=e.name;n[i]={},this.getClient=function(){return t},this.getName=function(){return i},s.su.Observable.call(this)}var n;s.su=s.su||{},s.su.Socket=(n={},s.su.inherit(s.su.Observable,e),e.prototype.connect=function(i){var a=this,e=this.getClient(),r=i.topics,t={};s.extend(t,i.headers),e.connect(t,function(){if(r)for(var e=0,t=r.length;e<t;e++)a.subscribe({name:r[e].name,url:r[e].url,onmessage:r[e].onmessage});a.fireEvent("ev_socket_connected_success"),i.success&&i.success()},function(e,t){a.fireEvent("ev_socket_connected_fail",t),i.fail&&i.fail()})},e.prototype.disconnect=function(e){this.getClient().disconnect(e),delete n[this.getName()]},e.prototype.subscribe=function(a){var r=this,e=this.getName(),s=a.name||a.url,t=this.getClient(),t=(n[e]&&n[e][s]&&this.unsubscribe(s),t.subscribe(a.url,function(e){for(var t in a.uniqueKey)if(a.uniqueKey.hasOwnProperty(t)&&a.uniqueKey[t]!==i[t])return;var i=JSON.parse(e.body);a.onmessage&&a.onmessage(i),r.fireEvent("ev_socket_"+s+"_"+i.type,i)}));n[e]||(n[e]={}),n[e][s]=t},e.prototype.unsubscribe=function(e){var t=this.getName(),i=n[t][e];if(!i)for(var a in n[t])if(n[t].hasOwnProperty(a)&&a===e){i=n[t][a];break}i.unsubscribe()},e.prototype.send=function(e){var t=this.getClient(),i=e.url;t.send(i,{},JSON.stringify(e.data))},e)})(jQuery),$.su.Time=(l=>{function e(e){this.name="time",this.service=e.service,this.siteTimeInfo={timezoneOffset:0,timezoneArea:null,timezoneName:null,dstEnable:!1,dstStatus:!1,dstStartTime:null,dstEndTime:null,dstNextStart:null,dstNextEnd:null,dstLastStart:null,dstLastEnd:null,dstOffset:36e5},this.controllerTimeInfo={timezoneOffset:0,timezoneArea:null,timezoneName:null,dstEnable:!1,dstStatus:!1,dstStartTime:null,dstEndTime:null,dstNextStart:null,dstNextEnd:null,dstLastStart:null,dstLastEnd:null,dstOffset:36e5},this.systemTime=0;var t=this;function u(e){return l.appUtils.getUiInterface(e)}function i(e){return!!(e.dstStartTime&&e.dstEndTime&&e.dstNextStart&&e.dstNextEnd&&e.dstLastStart&&e.dstLastEnd)}this.isBetweenDST=function(e,t){return!!i(t)&&(e>=t.dstLastStart&&e<t.dstLastEnd||e>=t.dstStartTime&&e<t.dstEndTime||e>=t.dstNextStart&&e<t.dstNextEnd)},this.getDstStartTime=function(e,t){if(i(t)){if(e>=t.dstLastStart&&e<t.dstLastEnd)return t.dstLastStart;if(t.dstStartTime<=e&&e<t.dstEndTime)return t.dstStartTime;if(t.dstNextStart<=e&&e<t.dstNextEnd)return t.dstNextStart}return e},this.getNowTimeStamp=function(){var e=l.su.serviceManager.get("user");return!l.appUtils.isCentralType()||l.appUtils.isCentralType()&&l.appUtils.isOrganizationView()&&e.getOrgType()===e.ORG_TYPE.INTEGRATED?a():t.systemTime=(new Date).getTime(),this.systemTime};var a=l.su.debounce(function(){var e=l.su.serviceManager.get("user"),e=l.appUtils.isHotspot()?"/api/v2/hotspot/maintenance/controllerStatus":l.appUtils.isCentralType()&&l.appUtils.isOrganizationView()&&e.getOrgType()===e.ORG_TYPE.INTEGRATED?"/api/v1/central/{centralId}/settings/system/status":"software"!==l.su.moduleManager.get("main").checkControllerType()?"/api/v2/controller/systemTime":"/api/v2/maintenance/controllerStatus";t.service.ajax.request({url:e,ajax:{type:"GET",async:!1},success:function(e){t.systemTime=e.result.systemTime}})},1e3,!0);function r(e){switch(l.type(e)){case"string":t=e;break;case"date":t=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();break;default:t=(e=moment(e)).year()+"-"+(e.month()+1)+"-"+e.date()}for(var t=t.split("-"),i=1;i<t.length;i++)t[i]=parseInt(t[i])<10?"0"+parseInt(t[i]):t[i];return t.join("-")}function s(e){var t=u("timeZone");return e===o||e===d&&0===t?o:e===c||e===d&&2===t?c:e===d&&1===t?p:e===d&&3===t?"utc":void 0}function n(e,t){var i,a=t&&t.pattern||"yyyy-MM-dd hh:mm:ss",t=!t||void 0===t.transferMonth||t.transferMonth,r=l.su.CHAR.DATEPICKER,s=[r.JAN,r.FEB,r.MAR,r.APR,r.MAY,r.JUN,r.JUL,r.AUG,r.SEP,r.OCT,r.NOV,r.DEC],n=!u("use24hour"),o={"d+":e.date,"h+":n?e.hours%12==0?12:e.hours%12:e.hours,"m+":e.minutes,"s+":e.seconds,"q+":Math.floor((e.month+3)/3),"S":e.milliseconds,"hc":n?12<=e.hours?r.PM:r.AM:"  "};for(i in/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(e.year+"").substr(4-RegExp.$1.length))),o)o.hasOwnProperty(i)&&new RegExp("("+i+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length||"hc"===i?o[i]:("00"+o[i]).substr((""+o[i]).length)));return o["M+"]=t?s[e.month]:e.month+1,a=new RegExp("(M+)").test(a)?a.replace(RegExp.$1,t?o["M+"]:("00"+o["M+"]).substr((""+o["M+"]).length)):a}this.isAfterDST=function(e,t,i){return!(e||!t||!i)&&(e=this.getNowTimeStamp())>new Date(t).getTime()&&e>=new Date(i).getTime()},this.getTimeFromUTC=function(e,t,i,a){e=new Date(e);var r=60*this.getTimezoneOffsetWithoutDst(e)*1e3;return void 0===i?e.getTime()+r+60*t*60*1e3:this.dateFormat(new Date(e.getTime()),i,a,60*t*60*1e3)},this.getTimezoneOffsetWithoutDst=function(e){var t=new Date(e.getFullYear(),0,1).getTimezoneOffset(),e=new Date(e.getFullYear(),6,1).getTimezoneOffset();return e<t?t:e},this.getSiteLocalTimeFromUTC=function(e,t,i){var a=this.getStackOffset(e,o);return this.getTimeFromUTC(e,a,t,i)},this.getControllerLocalTimeFromUTC=function(e,t,i){var a=this.getStackOffset(e,c);return this.getTimeFromUTC(e,a,t,i)},this.getStackOffset=function(e,t){var t=t===o?this.siteTimeInfo:this.controllerTimeInfo,i=t.timezoneOffset;return t.dstEnable&&this.isBetweenDST(e,t)&&(i+=t.dstOffset/36e5),i},this.getSiteUTCTimeFromLocal=function(e){e=new Date(e);var t=this.siteTimeInfo.timezoneOffset,i=60*this.getTimezoneOffsetWithoutDst(e)*1e3,e=e.getTime()-i-60*t*60*1e3;return this.siteTimeInfo.dstEnable&&this.isBetweenDST(e,this.siteTimeInfo)&&(e-=this.siteTimeInfo.dstOffset),e},this.getControllerUTCTimeFromLocal=function(e){e=new Date(e);var t=this.controllerTimeInfo.timezoneOffset,i=60*this.getTimezoneOffsetWithoutDst(e)*1e3,e=e.getTime()-i-60*t*60*1e3;return this.controllerTimeInfo.dstEnable&&this.isBetweenDST(e,this.controllerTimeInfo)&&(e-=this.controllerTimeInfo.dstOffset),e},this.getUILocalTimeFromUTC=function(e,t,i){var a,r;switch(e=new Date(e),u("timeZone")){case 0:return this.getSiteLocalTimeFromUTC(e,t,i);case 2:return this.getControllerLocalTimeFromUTC(e,t,i);case 1:r=e.getTime(),a=6e4*-e.getTimezoneOffset();break;case 3:r=new Date(e.getTime()+6e4*this.getTimezoneOffsetWithoutDst(e)).getTime();break;default:r=e.getTime()}return void 0===t?r:this.dateFormat(new Date(r),t,i,a)},this.dateFormat=function(e,t,i,a){return a=void 0===a?60*-this.getTimezoneOffsetWithoutDst(e)*1e3:a,e=e||new Date(this.getNowTimeStamp()),n({year:(e=new Date(e.getTime()+a)).getUTCFullYear(),month:e.getUTCMonth(),date:e.getUTCDate(),hours:e.getUTCHours(),minutes:e.getUTCMinutes(),seconds:e.getUTCSeconds(),milliseconds:e.getUTCMilliseconds()},{pattern:t,transferMonth:i})},this.updateTimeInfo=function(e,t){var i,a,r,s;l.appUtils.getUiInterface("timeZone");if(t&&"site"===t?(a=null,r=(i=e).timeZone):s=t&&"global"===t?(i=null,(a=e).timeZone):(i=e.result.site,a=e.result.omadac,r=i?i.timeZone:void 0,a?a.timeZone:void 0),i){for(var n=0,o=l.appUtils.timezone.length;n<o;n++)if(r===l.appUtils.timezone[n].timezone){var u={timezoneOffset:l.appUtils.timezone[n].offset,timezoneArea:r,timezoneName:l.appUtils.timezone[n].name,dstEnable:i.enable,dstStatus:i.status,dstStartTime:i.startTime,dstEndTime:i.endTime,dstNextStart:i.nextStart,dstNextEnd:i.nextEnd,dstLastStart:i.lastStart,dstLastEnd:i.lastEnd,dstOffset:i.offset};sessionStorage.setItem("siteTimeZone",l.appUtils.timezone[n].offset),sessionStorage.setItem("siteTimeZoneArea",l.appUtils.timezone[n].timezoneText);break}l.extend(this.siteTimeInfo,u)}if(a){for(n=0,o=l.appUtils.timezone.length;n<o;n++)if(s===l.appUtils.timezone[n].timezone){u={timezoneOffset:l.appUtils.timezone[n].offset,timezoneArea:s,timezoneName:l.appUtils.timezone[n].name,dstEnable:a.enable,dstStatus:a.status,dstStartTime:a.startTime,dstEndTime:a.endTime,dstNextStart:a.nextStart,dstNextEnd:a.nextEnd,dstLastStart:a.lastStart,dstLastEnd:a.lastEnd,dstOffset:a.offset};sessionStorage.setItem("systemTimeZone",l.appUtils.timezone[n].offset),sessionStorage.setItem("systemTimeZoneName",s);break}l.extend(this.controllerTimeInfo,u)}},this.refreshTimeInfo=l.su.debounce(function(){var e=l.su.serviceManager.get("user");t.service.ajax.request({url:e.isSiteView()?"/dst":"/anon/global/dst",ajax:{type:"GET",async:!1},success:function(e){l.su.serviceManager.get("user").isSiteView()||l.su.serviceManager.get("user").isMspView()?t.updateTimeInfo(e):t.updateTimeInfo(e.result,"global")}})},2e3,!0),this.getStartUTCTimeInDay=function(e,t){e=r(e);e=moment(e),e=r(e.date(e.date()-1));return this.getEndUTCTimeInDay(e,t)+1},this.getEndUTCTimeInDay=function(e,t){this.setDefaultTimezone(t),e=r(e);e=moment(e);e.date(e.date()+1);var i,e=moment.utc([e.year(),e.month(),e.date()]).valueOf()-1-this.getUtcOffset(t),t=s(t);if(t===o&&(i=this.siteTimeInfo),(i=t===c?this.controllerTimeInfo:i)&&i.dstEnable){t=e;if(this.isBetweenDST(e-i.dstOffset,i)){if(e-=i.dstOffset,!this.isBetweenDST(t,i))return t}else if(this.isBetweenDST(t,i))return this.getDstStartTime(t,i)-1}return e},this.setDefaultTimezone=function(e){switch(s(e)){case o:moment.tz.setDefault(this.siteTimeInfo.timezoneArea);break;case c:moment.tz.setDefault(this.controllerTimeInfo.timezoneArea);break;case p:moment.tz.setDefault(moment.tz.guess(!0));break;case"utc":moment.tz.setDefault("UTC")}},this.getUtcOffset=function(e){switch(s(e)){case o:return 60*this.siteTimeInfo.timezoneOffset*60*1e3;case c:return 60*this.controllerTimeInfo.timezoneOffset*60*1e3;case p:return 60*moment(t).utcOffset()*1e3;default:return 0}},this.getTextFromUTC=function(e,t,i){this.setDefaultTimezone(t),e=(e=>{switch(l.type(e)){case"string":return moment(e).valueOf();case"date":return e.getTime();default:return moment(e).valueOf()}})(e);var a,r=s(t),r=(r===o&&(a=this.siteTimeInfo),r===c&&(a=this.controllerTimeInfo),i&&i.notInDst||!a||!a.dstEnable||!this.isBetweenDST(e,a)||(e+=a.dstOffset),moment.utc(e+this.getUtcOffset(t)));return n({year:r.year(),month:r.month(),date:r.date(),hours:r.hour(),minutes:r.minute(),seconds:r.second(),milliseconds:r.millisecond()},i)},this.getTextWithoutDst=function(e,t,i){e+=60*t*60*1e3;t=new Date(e);return n({year:t.getUTCFullYear(),month:t.getUTCMonth(),date:t.getUTCDate(),hours:t.getUTCHours(),minutes:t.getUTCMinutes(),seconds:t.getUTCSeconds(),milliseconds:t.getUTCMilliseconds()},i)},this.getCurrentDayStart=function(e){e=e||o;var t=this.getNowTimeStamp(),t=this.getTextFromUTC(t,e,{pattern:"yyyy-MM-dd",transferMonth:!1});return this.getStartUTCTimeInDay(t,e)},this.getCopyright=function(){var e=this.systemTime,e=this.getTextFromUTC(e,c,{pattern:"yyyy"}),t=l.appUtils.getCompanyName();return l.su.CHAR.OTHERS.COPYRIGHT.replace("{YEAR}",e).replace("{TP_LINK}",t)},l.su.Service.call(this)}var o="site",c="controller",p="browser",d="uiInterface";return l.su.inherit(l.su.Service,e),e})(jQuery),$.su.HeatMap=(w=>{function e(e){function u(e,t,i,a,r){return Math.pow(10,(t+a-e-s-20*Math.log10(i))/10/r)}function l(e,t,i,a,r){return t+a-s-20*Math.log10(i)-10*r*Math.log10(e)}function c(e){let t,i;return i=e===F?(t=200,300):(t=250,500),{boundaryDistance:t,maxDistance:i}}function d(e,t,i,a,r){var s,n,o;return L.showModel.toLowerCase().includes("bridge")||({boundaryDistance:s,maxDistance:n}=c(H.channel),(o=Number(l(s,t,i,a,r).toFixed(1)))<e)?u(e,t,i,a,r):s+(e-o)*(n-s)/(-90-o)}function h(e,t,i,a,r){var s,n,o;return L.showModel.toLowerCase().includes("bridge")||({boundaryDistance:s,maxDistance:n}=c(H.channel),o=Number(l(s,t,i,a,r).toFixed(1)),e<s)?l(e,t,i,a,r):o-(e-s)*(o- -90)/(n-s)}function g(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function f(e,t){return Math.sqrt(Math.pow(e,2)-Math.pow(t,2))}function v(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function m(e,t){return Math.atan2(t.y-e.y,t.x-e.x)+Math.PI}function E(e){a={x:0,y:0,z:0,w:1},i={x:0,y:0,z:1},e=e,e/=2,t=Math.sin(e),a.x=i.x*t,a.y=i.y*t,a.z=i.z*t,a.w=Math.cos(e);var t,i,a,r,s,n,o,u,l;return i=a,e=(t={x:-1,y:0,z:0}).x,a=t.y,t=t.z,r=i.x,s=i.y,n=i.z,u=(i=i.w)*a+n*e-r*t,l=i*t+r*a-s*e,{x:(o=i*e+s*t-n*a)*i+(e=-r*e-s*a-n*t)*-r+u*-n-l*-s,y:u*i+e*-s+l*-r-o*-n,z:l*i+e*-n+o*-s-u*-r}}function T(e,t,i){for(var a=[],r=b(m({x:0,y:0},e)),s={x:t.x,y:t.y},n={x:s.x+e.x*r,y:s.y+e.y*r},o=0;o<i.length;o++){var u=i[o],l=((e,t,i,a)=>{var r=(e.x-i.x)*(t.y-i.y)-(e.y-i.y)*(t.x-i.x),s=(e.x-a.x)*(t.y-a.y)-(e.y-a.y)*(t.x-a.x);return!(0<=r*s||0<=(i=(i.x-e.x)*(a.y-e.y)-(i.y-e.y)*(a.x-e.x))*(i+r-s))&&{x:e.x+(a=i/(s-r))*(t.x-e.x),y:e.y+a*(t.y-e.y)}})(s,n,{x:u.start.x,y:u.start.y},{x:u.end.x,y:u.end.y});!1!==l&&a.push({intersection:l,distance:v(s,l),wall:u})}return a=a.sort(function(e,t){return e.distance-t.distance})}function y(){switch(H.channel){case F:return{powerInDb:L.sendPower2g,frequencyInMhz:i(L.channel2g)};case B:return{powerInDb:L.sendPower5g1,frequencyInMhz:i(L.channel5g1)};case G:return{powerInDb:L.sendPower5g2,frequencyInMhz:i(L.channel5g2)};case Y:return{powerInDb:L.sendPower6g,frequencyInMhz:5*L.channel6g+5950}}}function p(){switch(H.channel){case F:return t(Z);case B:case G:return t(W);case Y:return t(K)}}function _(e){switch(e.channel){case F:return t(q);case B:case G:return t(Q);case Y:return t(J)}}function t(e){return L.installType===$?e[z]:H.envType===z?e[X]:e[H.envType]}function S(e,t){switch(t.channel){case F:return e.decay2g;case B:case G:return e.decay5g;case Y:return e.decay6g}}function i(e){return 14===e?2484:e<14&&0<e?2407+5*e:35<e&&e<190?5*e+5e3:0}function I(e,t,i){var a,r,s=y().powerInDb;return w.isNumeric(e)&&!(w.isNumeric(t)&&U<=t)&&!(w.isNumeric(i)&&i<=C())&&(t=(()=>{var e=o(L.model+L.modelVersion);if(e)switch(H.channel){case F:return e.BAND_24&&e.BAND_24.antennaGain;case B:return e.BAND_5&&e.BAND_5.antennaGain;case G:return e.BAND_5G2&&e.BAND_5G2.antennaGain;case Y:return e.BAND_6&&e.BAND_6.antennaGain}})())?(i=o(L.model+L.modelVersion)&&o(L.model+L.modelVersion).apType,r=R[i]||0,a=w.isNumeric(L.angle)?L.angle:180,e=(e*M(i)+r-(a*M(i)-180)*Math.PI/180+N+2*D)%(2*Math.PI),s+t[r=(r=Math.round(e/(2*Math.PI)*t.length))<t.length?r:t.length-1]):s}function A(e,t){var i=p(),a=_(H),r=w.isNumeric(H.receiveHeight)?H.receiveHeight:1,r=(L.height-r)/k,s=y(),t=f(d(e,I(t,e),s.frequencyInMhz,i,a)/k,r);return t=isNaN(Number(t))?0:t}function b(e){return A(P[P.length-1],e)}function o(e){if("object"==typeof x[e])return x[e];if("string"==typeof x[e])return o(x[e]);var t,i=e.split(".");for(let e=i.length-1;0<e;e--)if(i[e].match(/\d[1-9]$/)?(i[e]=i[e].replace(/[1-9]$/,"0"),e++):i[e]="0",t=i.join("."),x[t])return o(t);return!1}function C(){var e=o(L.model+L.modelVersion);if(!e)return 0;switch(H.channel){case F:return e.BAND_24&&e.BAND_24.maxNoAntennaGainMeters||0;case B:return e.BAND_5&&e.BAND_5.maxNoAntennaGainMeters||0;case G:return e.BAND_5G2&&e.BAND_5G2.maxNoAntennaGainMeters||0;case Y:return e.BAND_6&&e.BAND_6.maxNoAntennaGainMeters||0}}function M(e){return e===a||e===r?-1:1}this.name="heatMap",this.setEmulateResult=function(e,t){V[e]?w.extend(V[e],t):V[e]=t},this.getEmulateResult=function(e){return V[e]},this.deleteEmulateResult=function(e){delete V[e],this.deleteLastAreaData(e)},this.setLastAreaData=function(e,t){j[e]?w.extend(j[e],t):j[e]=t},this.getLastAreaData=function(e){return j[e]},this.deleteLastAreaData=function(e){delete j[e]},this.calculate=function(e,t,i,a,r,s,n){P=a,L=e,k=r,H=s,x=n,a=C(),e=p(),r=_(H),s=y(),n=I(),s=s.frequencyInMhz,U=h(a,n,s,e,r);var o=((e,t,i,a)=>{for(var r=[],s=e.length,n=0;n<s;n++){var o=T(e[n],t,i);r.push({direction:e[n],intersections:o})}return r})((e=>{for(var t=[],i=e.length,a=0;a<i;a++)t.push(E(e[a]));return t})(((e,t)=>{for(var i=[],a=0;a<=D;)i.push(a),a+=O;for(var r=t.length,s=0;s<r;s++){var n=t[s],o={x:e.x,y:e.y},n={x:n.x,y:n.y},u=v(o,n);a=m(o,n),u>=b(a)||(-1===i.indexOf(a+.001)&&i.push(a+.001,a+.001),-1===i.indexOf(a-.001)&&i.push(a-.001,a-.001))}return i.sort(function(e,t){return e-t}),i})(L,i)),L,t,k),a=P,l=H,c={};return _(l),w.each(a,function(e,u){c[u]=[],w.each(o,function(e,r){var s=m({x:0,y:0},r.direction);if(A(u,s)<=0)return o={x:0,y:0},c[u].push(o),!0;var t,n=0,o=null;w.each(r.intersections,function(e,t){var i=S(t.wall,l),a=A(Number(u)+n,s);return a<t.distance?!(o={x:r.direction.x*a,y:r.direction.y*a}):(n+=i,A(Number(u)+n,s)<t.distance?(o={x:r.direction.x*t.distance,y:r.direction.y*t.distance},c[u].push(o),!1):void 0)}),o||(t=A(Number(u)+n,s),o={x:r.direction.x*t,y:r.direction.y*t}),c[u].push(o)})}),c},this.calculatePointPower=function(e,t,i,a,r,s){k=a,H=r,x=s;var o=m(L=e,t),u=v(L,t),a=T(E(o),L,i),l=0,r=w.isNumeric(H.receiveHeight)?H.receiveHeight:1,c=L.height-r,p=y().frequencyInMhz,s=(w.each(a,function(e,t){if(u<t.distance)return!1;var i=S(t.wall,H),t=t.distance+l,a=I(o,void 0,t*k),a=h(g(t*k,c),a,p,antennaToAirLossInDb,n),a=f(d(a-i,I(o,a-i),p,antennaToAirLossInDb,n)/k,c/k)-t;l+=a}),g((u+l)*k,c));return h(s,I(o,void 0,(u+l)*k),p,antennaToAirLossInDb,n)},this.getPowerToColor=function(){var e,t=(e={"precision":.1,"powerRange":{"max":-40,"min":-80},"hueRange":{"max":0,"min":264},"lightnessRange":{"max":50,"min":86}}).precision||2,i=e.powerRange||{max:-46,min:-76},a=e.hueRange||{max:197,min:197},r=e.lightnessRange||{max:40,min:86},s=Math.abs(i.max-i.min),n=Math.abs(a.max-a.min),o=Math.abs(r.max-r.min);for(var u,l,c={},p=i.max;p>=i.min;p-=t){d=p,u=l=u=void 0,u=Math.abs(Math.abs(d)-Math.abs(i.min))/s,l=a.max>a.min?u*n+a.min:a.max+(1-u)*n,l=Math.max(Math.min(Math.round(l),360),0),u=r.max>r.min?u*o+r.min:r.max+(1-u)*o;var d={value:d,fill:{color:"hsl("+l+", 100%, "+Math.max(Math.min(Math.round(u),100),0)+"%)"}};c[d.value.toFixed(1)]={fill:d.fill.color}}return c},w.su.Service.call(this)}var a="Wave Ceiling",r="Circular Ceiling",R={},x=(R[a]=-.5*Math.PI,R[r]=.5*Math.PI,{}),s=-27.55,D=2*Math.PI,O=2*Math.PI/36,N=1.5*Math.PI,V={},P=[],L={},k=1,H={},U=0,j={},F="2G",B="5G1",G="5G2",Y="6G",z=0,X=1,$=4,Z={0:28.83+s,1:-7,2:-9,3:-8,4:-9},W={0:29.99+s,1:-4,2:-15,3:-6,4:-15},K={0:-9,1:-15,2:-9,3:-20,4:-20},q={0:2.38,1:2.2,2:2,3:1.7,4:2},Q={0:2.2,1:2.2,2:2,3:1.8,4:2},J={0:1.65,1:1.8,2:1.65,3:1.55,4:1.55};return w.su.inherit(w.su.Service,e),e})(jQuery),$.su.TimeGranularity=(c=>{function t(e){if("object"==typeof t.instance)return t.instance;this.name="timeGranularity",this.timeCombos=null,this.service=e.service,h=this,c.su.Service.call(this),t.instance=this}var p,d,h,g={ONE_HOUR:36e5};function f(e){return d.indexOf(e)}return g.ONE_DAY=24*g.ONE_HOUR,g.ONE_MONTH=31*g.ONE_DAY,c.su.inherit(c.su.Service,t),t.prototype.updateTimeType=function(e,t,i){p=i?{MINUTES_5:i[0],HOURLY:i[1],DAILY:i[2]}:{MINUTES_5:5,HOURLY:60,DAILY:1440},d=[p.MINUTES_5,p.HOURLY,p.DAILY],c.isArray(t)||(t=[t]),this.timeCombos=t;for(var i=(e=>{t=(e=>{var t=h.service.time.getNowTimeStamp();return e.start<t-7*g.ONE_DAY})(e)?p.DAILY:(e=>{var t=h.service.time.getNowTimeStamp();return e.start<t-2*g.ONE_DAY})(e)?p.HOURLY:p.MINUTES_5;var t,i=h.service.time.getNowTimeStamp(),i=Math.min(e.end,i)-e.start;return e=i>g.ONE_MONTH?p.DAILY:i>=2*g.ONE_DAY?p.HOURLY:p.MINUTES_5,f(t)<f(e)?e:t})(e.getValue()),e=f(e=t=i),a=d.slice(0,e),r=d.slice(e),s=0;s<h.timeCombos.length;s++)h.timeCombos[s].disableItems(a),h.timeCombos[s].enableItems(r);for(var n=t,i=f(n),o=d.slice(0,i),u=0;u<h.timeCombos.length;u++){var l=h.timeCombos[u].getValue();-1!==o.indexOf(l)&&h.timeCombos[u].setValue(n)}},t})(jQuery),$.su.License=(t=>{function e(e){this.name="license",this.LICENSE_TYPE={BASIC:"advanced",PRO:"pro",LITE:"lite",FESTA:"lite",FREE:"free"},this.SITE_TYPE={BASIC:0,PRO:1},this.LICENSE_CATEGORY_TEXT={permanent:t.su.CHAR.LICENSE.PERMANENT,trial:t.su.CHAR.LICENSE.TRIAL,"1year":t.su.CHAR.DEVICES.TYPE_1YEAR,"2years":t.su.CHAR.DEVICES.TYPE_2YEARS,"3years":t.su.CHAR.DEVICES.TYPE_3YEARS,"4years":t.su.CHAR.DEVICES.TYPE_4YEARS,"5years":t.su.CHAR.DEVICES.TYPE_5YEARS,"others":t.su.CHAR.DEVICES.OTHERS},this.PRO_LICENSE_TEXT={"advanced":t.su.CHAR.LICENSE.STANDARD_NETWORK,"ipc":t.su.CHAR.LICENSE.STANDARD_SURVEILLANCE,"basic":t.su.CHAR.LICENSE.BASIC_LICENSE,"pro":t.su.CHAR.LICENSE.PRO,"ap":t.su.CHAR.LICENSE.PRO_AP,"l2Switch":t.su.CHAR.LICENSE.L2_SWITCH,"l3Switch":t.su.CHAR.LICENSE.L3_SWITCH,"gateway":t.su.CHAR.LICENSE.GATEWAY},this.LICENSE_STATUS={UNACTIVE:0,UNBIND:1,EXPIRED:2,ACTIVE:3,INCOMPATIBLE:4,NEAR_EXPIRED:5,LICENSE_NOT_REQUIRED:6},this.STACK_LICENSE_STATUS={ACTIVATED:0,UNACTIVATED:1,NOT_ALL_ACTIVATED:2,EXPIRED:3},this.CONTROLLER_LICENSE_STATUS={NORMAL:0,EXPIRING:1,EXPIRED:2,ERROR_EXPIRING:3,ERROR_EXPIRED:4},this.siteCategory=this.LICENSE_TYPE.BASIC,this.omadaCategory=this.LICENSE_TYPE.BASIC,this.licenseStatus=this.CONTROLLER_LICENSE_STATUS.NORMAL,this.remainDate=0,this.setExpired=function(e,t){this.licenseStatus=e,this.remainDate=t},this.getLicenseTypeText=function(e){return this.PRO_LICENSE_TEXT[e]},this.getConflictLicenseTypeText=function(e){return e===this.LICENSE_TYPE.BASIC?t.su.CHAR.SETUP.CLOUD_BASED_PRO:t.su.CHAR.SETUP.CLOUD_BASED},this.setSiteCategory=function(e){this.siteCategory=e},this.setOmadaCategory=function(e){this.omadaCategory=e},this.isSitePro=function(){return t.su.serviceManager.get("capability").support("siteMix")?t.su.serviceManager.get("user").isSiteView()&&this.omadaCategory===this.LICENSE_TYPE.PRO&&this.siteCategory===this.LICENSE_TYPE.PRO:this.isOmadaPro()},this.isOmadaPro=function(){return this.omadaCategory===this.LICENSE_TYPE.PRO},this.isPro=function(){return t.su.serviceManager.get("user").isSiteView()?this.isSitePro():this.isOmadaPro()},this.isLite=function(){return this.omadaCategory===this.LICENSE_TYPE.LITE},this.isFesta=function(){return this.omadaCategory===this.LICENSE_TYPE.FESTA},this.isFree=function(){return this.omadaCategory===this.LICENSE_TYPE.FREE},this.getSiteSelectProIconDom=function(e){return e===this.SITE_TYPE.PRO?'<span class="site-pro-icon"></span>':""},t.su.Service.call(this)}return t.su.inherit(t.su.Service,e),e})(jQuery),$.su.Capability=(o=>{function e(){var s=this,t=(s.name="capability",4),i=5,a="portSchedule",r="rebootSchedule";let n={globalClientStatistic:()=>this.backendSupport("global_dashboard:overview:site_list:clients"),importSite:()=>{var e;return!!this.backendSupport("global_dashboard:overview:site_list:import_site")&&(e=o.su.serviceManager.get("user"),this.roleSupport("globalDashboard",!0))&&!e.isMspView()},editDashboardCard:()=>this.backendSupport("site_dashboard:card_edit"),statistics:()=>!!this.backendSupport("statistic")&&this.roleSupport("statics"),deviceSyncClient:()=>!this.backendSupport("devices:client:num_async"),aiRfPlanning:()=>!!this.backendSupport("settings:wireless_networks:wlan_optimization:basic")&&this.roleSupport("network"),autoFailover:()=>this.backendSupport("settings:site:mesh:failover"),remoteLogging:()=>{o.su.serviceManager.get("user");return this.backendSupport("settings:site:remote_logging")&&(this.roleSupport("network")||App.SITE_PROFILE_EDITING)},fastRoaming:()=>this.backendSupport("settings:site:roaming:fast_roaming"),noStickRoaming:()=>this.backendSupport("settings:site:roaming:non_stick_roaming"),aiRoaming:()=>this.backendSupport("settings:site:roaming:ai_roaming"),clientHistory:()=>this.backendSupport("devices:ap:clients:history"),apRfScan:()=>{var e=this.getDeviceSettingsData();return this.backendSupport("devices:ap:tools:rfscan")&&e.supportRFScan},deviceLocation:()=>this.backendSupport("map:device_map"),deviceAction:()=>this.roleSupport("devices",!0),deviceRollingUpgrade:()=>{var e=o.su.serviceManager.get("user");return this.support("deviceAction")&&e.isSiteView()},checkDeviceUpgradeStatus:()=>{var e;return!!o.su.serviceManager.get("user").isSiteView()&&!(!o.appUtils.getUiInterface("cloudFirmwareDetection")||(e=o.su.moduleManager.get("accessPoints"))&&e.isDeviceGroupModule()&&!e.isGroupedBridge())&&this.support("deviceAction")},securityNone:()=>this.backendSupport("settings:wireless_networks:wlan:security:none"),wpaPersonal:()=>this.backendSupport("settings:wireless_networks:wlan:security:wpa_personal"),wpaEnterprise:()=>this.backendSupport("settings:wireless_networks:wlan:security:wpa_enterprise"),ppskWithoutRadius:()=>this.backendSupport("settings:wireless_networks:wlan:security:ppsk_without_radius"),ppskWithRadius:()=>this.backendSupport("settings:wireless_networks:wlan:security:ppsk_with_radius"),Bluetooth:()=>this.backendSupport("settings:wireless_networks:bluetooth"),homePage:()=>this.backendSupport("site:home")&&this.roleSupport("siteHome"),festa:()=>o.su.serviceManager.get("license").isFesta(),free:()=>o.su.serviceManager.get("license").isFree(),lite:()=>this.support("festa")||this.support("free"),clientStatisticOfDevice:()=>{var e=o.su.serviceManager.get("user");return this.backendSupport("devices:global_device_list:client")||e.isSiteView()},deviceAddress:()=>this.backendSupport("devices:global_device_list:address"),configurationResult:()=>this.backendSupport("configuration_result"),deviceConfigurationResultTab:()=>{var e=o.su.serviceManager.get("user");return s.support("configurationResult")&&e.isSiteView()},wlanConfigurationResultTips:()=>s.support("configurationResult")&&!App.SITE_PROFILE_EDITING,stackGroup:()=>{var e;return!!this.support("l3Switch")&&(e=o.su.serviceManager.get("user"),this.backendSupport("devices:device_group:stack"))&&e.isSiteView()},webSocket:()=>this.backendSupport("websocket:basic"),tools:()=>this.backendSupport("tools"),tools:function(){return"software"!==o.su.moduleManager.get("main").checkControllerType()&&!o.su.moduleManager.get("main").isCombinedGateway()&&o.su.serviceManager.get("user").isGlobalView()||o.su.serviceManager.get("user").isSiteView()},toolsEmail:()=>this.backendSupport("tools:email"),authClientTraffic:()=>this.backendSupport("portal:authed_clients:traffic"),portalNoAuth:()=>this.backendSupport("portal:auth_type:no_auth"),portalSimplePwd:()=>this.backendSupport("portal:auth_type:simple_pwd"),portalExternalRadius:()=>this.backendSupport("portal:auth_type:external_radius"),portalVoucher:()=>this.backendSupport("portal:auth_type:voucher"),portalExternalPortal:()=>this.backendSupport("portal:auth_type:external_portal"),portalLocalUser:()=>this.backendSupport("portal:auth_type:localuser"),portalSms:()=>this.backendSupport("portal:auth_type:sms"),portalHotspotRadius:()=>this.backendSupport("portal:auth_type:hotspot_radius"),portalHotspot:()=>this.backendSupport("portal:auth_type:hotspot"),portalFormAuth:()=>this.backendSupport("portal:auth_type:form_auth"),portalLdap:()=>this.backendSupport("portal:auth_type:ldap"),voucherStatistic:()=>this.backendSupport("portal:voucher:standard"),portalAuthHistory:()=>this.backendSupport("portal:authed_clients:history"),voucherPrice:()=>this.backendSupport("portal:voucher:standard"),voucherTrafficRateLimit:()=>this.backendSupport("portal:voucher:standard"),portalRateLimit:()=>this.backendSupport("portal:voucher:rate_limit"),mostActiveDevices:()=>this.backendSupport("site_dashboard:active_devices_card"),alterIn7day:()=>this.backendSupport("logs:alert:seven_days"),blockClient:()=>this.backendSupport("client:action:block"),offlineClient:()=>this.backendSupport("client:offline"),clientFixedIp:()=>this.backendSupport("client:action:fix_ip"),lte:function(){return s.backendSupport("settings:wireless_networks:sim")},simStatistics:function(){return s.support("lte")&&s.backendSupport("settings:wireless_networks:sim:statistics")},simSmsMessage:function(){return!App.SITE_PROFILE_EDITING},apnProfile:function(){return s.support("lte")&&!s.backendSupport("settings:profiles:apn_move_to_profile")},basicApnProfile:function(){return s.support("lte")&&s.backendSupport("settings:profiles:apn_move_to_profile")},buildInRadius:function(){return s.backendSupport("build_in_radius:basic")},dpi:function(){return s.capacitySupport("dpi")&&s.backendSupport("dpi")},siteTemplate:function(){return s.backendSupport("site:template")&&o.su.serviceManager.get("siteTemplate").isInTemplateWhiteList()&&s.roleSupport("siteTemplate")},firmwareUpgrade:function(){return s.backendSupport("firmware:upgrade")&&s.roleSupport("globalFirmware")},siteMix:function(){return"cloudBase"!==App.CLOUD_TYPE&&o.su.serviceManager.get("license").isOmadaPro()},oui:()=>o.su.serviceManager.get("license").isPro(),backupUpTo3Months:()=>{var e="software"!==o.su.moduleManager.get("main").checkControllerType()&&!o.su.moduleManager.get("main").isCombinedGateway();return o.su.serviceManager.get("license").isPro()&&e},builtInRadius:function(){return!1},radiusProfileBuiltIn:function(){return!o.su.moduleManager.get("main").isCombinedGateway()},webhook:function(){var e=o.su.serviceManager.get("user");return s.roleSupport(e.isMspView()?"mspWebhook":"globalWebhook")&&s.backendSupport("settings:platform_integration:webhooks")},twoFactorAuthentication:function(){var e=o.su.moduleManager.get("main");return s.backendSupport("settings:account_security:mfa")&&!e.isSsoUser},ipAccessRule:function(){var e,t=(t=o.appUtils.isOmadaService(),e=o.su.serviceManager.get("user"),{isNetworkChildSystem:t,isGlobalView:e.isGlobalView(),isCentralType:o.appUtils.isCentralType(),isCentralService:o.appUtils.isCentralService(),isRoot:e.isRoot()}).isRoot;return s.backendSupport("settings:account_security:ip_rule")&&t},internetDhcpOptions:function(){var e=o.su.modelManager.get("internetSettingModuleM")?.parentModule.getValue();return o.su.moduleManager.get(e)?.apiResult?.supportDhcpOptions||!1},internetUsbDhcpOptions:function(){var e=o.su.modelManager.get("internetSettingModuleM")?.parentModule.getValue();return o.su.moduleManager.get(e)?.apiResult?.supportUsbDhcpOptions||!1},dsl:function(){var e=o.su.modelManager.get("internetSettingModuleM")?.parentModule.getValue();return o.su.moduleManager.get(e)?.apiResult?.supportDsl||!1},mapE:function(){var e=o.su.modelManager.get("internetSettingModuleM").parentModule.getValue();return o.su.moduleManager.get(e)?.apiResult?.supportMapE||!1},dsLite:function(){var e=o.su.modelManager.get("internetSettingModuleM").parentModule.getValue();return o.su.moduleManager.get(e)?.apiResult?.supportDsLite||!1},virtualWan:function(){var e;return s.backendSupport("settings:wired_networks:virtual_wan")&&(e=o.su.modelManager.get("internetSettingModuleM")?.parentModule.getValue(),!o.su.moduleManager.get(e)||!o.su.moduleManager.get(e)?.apiResult||o.su.moduleManager.get(e)?.apiResult?.supportVirtualWan)||!1},internalStorage:function(){return"oc400"!==o.appUtils.getPlatform()},hardwareStatus:function(){var e=o.appUtils.getPlatform();return"oc400"===e||"oc300"===e},allHardwareSt:function(){return"oc400"===o.appUtils.getPlatform()},privateLabel:function(){var e="cloudBase"===App.CLOUD_TYPE,t=o.su.serviceManager.get("user");return!e||t.getOrgType()!==t.ORG_TYPE.INTEGRATED},sso:function(){var e=!0,t=o.appUtils.getPlatform();return(e="software"!==o.su.moduleManager.get("main").checkControllerType()&&("oc200"===t||"oc220"===t||o.su.moduleManager.get("main").isCombinedGateway())?!1:e)&&!o.appUtils.isOmadaService()},dxf:function(){var e=!0,t=o.appUtils.getPlatform();return e="software"!==o.su.moduleManager.get("main").checkControllerType()&&("oc200"===t||"oc220"===t||o.su.moduleManager.get("main").isCombinedGateway())?!1:e},usbModem:function(){return o.su.storeManager.get("wanLanPortSettingS").getData().find(e=>e.type===t)},internetLte:function(){return o.su.storeManager.get("wanLanPortSettingS").getData().find(e=>e.type===i)&&s.support("lte")},dualSim:function(){return o.su.modelManager.get("lteModel").getData().supportDualSim},settingSecurity:function(){var e,t,i;return!!s.backendSupport("settings:account_security")&&(e=this.twoFactorAuthentication(),t=this.ipAccessRule(),(i=o.su.serviceManager.get("user")).isMspView()&&!i.isBlock("mspSetting")||!(!i.isGlobalView()||i.isBlock("globalSetting"))&&i.isStandardUser())&&(e||t)},switch:function(){return this.es()||this.l2Switch()||this.l3Switch()},es:function(){if(App.SITE_PROFILE_EDITING){let t=!1;var e=o.su.serviceManager.get("ajax"),i=o.su.moduleManager.get("main").getSiteId();return e.request({url:`/api/v2/sitetemplates/${i}/has-es`,ajax:{method:"GET",async:!1},success:function(e){t=!!e.result.hasEs}}),t}return o.su.serviceManager.get("site").getSwitchSupportEs()},olt:()=>this.backendSupport("devices:olt"),globalAdmin:function(){return!o.appUtils.isOmadaService()},systemSettings:()=>this.backendSupport("settings:system"),globalSettings:function(){return!0},license:()=>{var e=o.su.serviceManager.get("user"),e=s.roleSupport(e.isMspView()?"mspLicense":"license");return s.backendSupport("license")&&e&&!o.appUtils.isOmadaService()},generalControllerSettings:()=>this.backendSupport("settings:controller:general_setting"),deviceLicence:()=>{var e=o.su.serviceManager.get("user"),e=s.roleSupport(e.isMspView()?"mspLicense":"license");return s.backendSupport("license:device")&&e},deviceBatchActionLicence:()=>{var e=o.su.serviceManager.get("user");return this.support("deviceLicence")&&e.isSiteView()},deviceSettingsLicense:()=>{var e;return!(!this.support("deviceLicence")||App.SITE_PROFILE_EDITING||!(e=this.getDeviceSettingsData())||!(e=Array.isArray(e)?e[0]:e).type&&e.id||"boolean"!=typeof e.active&&"number"!=typeof e.licenseStatus)},globalDeviceMainTypeFilter:function(){return o.su.serviceManager.get("user").isGlobalView()&&o.appUtils.isOmadaService()},log:function(){var e=o.su.serviceManager.get("user");return!e.isBlock(e.isMspView()?"mspLog":e.isGlobalView()?"globalLog":"log")},auditLog:function(){var e=o.su.serviceManager.get("user");return!e.isBlock(e.isMspView()?"mspLog":e.isGlobalView()?"globalLog":"log")},insightRogueAps:function(){return s.backendSupport("insights:rogue_aps")},qos:function(){var e=o.su.moduleManager.get("navigator"),e=!!e&&e.getExistCapacity().qos;return!(!s.capacitySupport("qos")&&!e)&&s.backendSupport("insights:qos_data")},ipsIds:function(){var e=o.su.moduleManager.get("navigator"),e=!!e&&e.getExistCapacity().ipsIds;return!(!s.capacitySupport("ipsIds")&&!e)&&s.backendSupport("settings:network_security:ids_ips")},insightThreatManagement:function(){return s.backendSupport("insights:threat_management")&&s.capacitySupport("ipsIds")},dhcpReservation:function(){return!o.su.serviceManager.get("user").isViewOnly("network",!0)&&s.backendSupport("settings:services:dhcp_reservation")&&!App.SITE_PROFILE_EDITING},dhcpReservationOption:function(){return s.backendSupport("settings:services:dhcp_reservation:options")},ddns:function(){return!o.su.serviceManager.get("user").isViewOnly("network",!0)},mdns:function(){return s.backendSupport("settings:services:mdns")},snmp:function(){return s.roleSupport("network",!0)&&s.backendSupport("settings:services:snmp")},devicesSettingsSnmp:function(){var e=s.getDeviceSettingsData();let t=e.supportSnmp;return"switch"===e.type&&(t=!e.es),"ap"===e.type&&(t=!0),s.support("snmp")&&t},upnp:function(){return s.backendSupport("settings:services:upnp")},rebootSchedule:function(){var e=o.su.serviceManager.get("siteTemplate").getUnsupportedSettings();return s.backendSupport("settings:services:reboot_schedule")&&!(App.SITE_PROFILE_EDITING&&e.includes(r))},portSchedule:function(){var e=o.su.serviceManager.get("siteTemplate").getUnsupportedSettings(),t=o.su.serviceManager.get("user");return s.backendSupport("settings:services:port_schedule")&&!(App.SITE_PROFILE_EDITING&&e.includes(a))&&(!(t.isSiteView()&&!App.SITE_PROFILE_EDITING)||s.support("switch"))},upgradeSchedule:function(){var e=this.firmwareUpgrade(),t=o.appUtils.getUiInterface("cloudFirmwareDetection");return s.backendSupport("settings:services:upgrade_schedule")&&!e&&t&&!App.SITE_PROFILE_EDITING},dnsProxy:function(){var e=o.su.moduleManager.get("navigator"),e=e&&e.getExistCapacity()&&e.getExistCapacity().dnsProxy;return s.backendSupport("settings:services:dns_proxy")&&(s.capacitySupport("dnsProxy")||e)},dnsCache:function(){return s.backendSupport("settings:services:dns_cache")&&s.capacitySupport("dnsCache")},globalExportData:()=>s.backendSupport("settings:export_data")&&s.roleSupport("globalExportData",!0),siteExportData:()=>s.roleSupport("exportData",!0)&&s.backendSupport("settings:services:export_data")&&!App.SITE_PROFILE_EDITING,exportData:()=>o.su.serviceManager.get("user").isSiteView()?this.support("siteExportData"):this.support("globalExportData"),auditLogCheckbox:()=>s.support("exportData")&&"cloudAccess"!==App.CLOUD_TYPE,exportDataEmail:()=>s.support("exportData"),exportDeviceBtn:()=>{var e=o.su.serviceManager.get("user");return s.support("exportData")&&e.isSiteView()},customAcl:function(){var e=o.su.moduleManager.get("navigator");return e&&e.getCapacity()&&e.getCapacity().customAcl},switchType:function(e){return null!=e?!e:!o.su.serviceManager.get("license").isPro()},l2Switch:function(){return!!App.SITE_PROFILE_EDITING||o.su.serviceManager.get("site").getSwitchSupportL2()},l3Switch:function(){return!!App.SITE_PROFILE_EDITING||this.systemL3Switch()&&o.su.serviceManager.get("site").getSwitchSupportL3()},systemL3Switch:function(){return!o.su.moduleManager.get("main").isCombinedGateway()},dashboardCardDeviceUsage:function(){return this.l2Switch()||this.l3Switch()},dashboardCardPoe:function(){return this.es()||this.l2Switch()||this.l3Switch()},statisticsUsageChart:function(){return!this.es()},insightSwitchStatus:function(){return s.backendSupport("insights:switch_status")&&(this.es()||this.l2Switch()||this.l3Switch())},insightsRoutingTableSwitch:function(){return this.l2Switch()||this.l3Switch()},toolsNetworkCheckSwitch:function(){return this.l2Switch()||this.l3Switch()},toolsPacketSwitch:function(){return this.l2Switch()||this.l3Switch()},toolsTerminalSwitch:function(){return this.l2Switch()||this.l3Switch()},reportWiredDeviceCPU:function(){return this.l2Switch()||this.l3Switch()},reportWiredDeviceMemory:function(){return this.l2Switch()||this.l3Switch()},lanNetworksTableEsTip:function(){return this.es()&&(this.l2Switch()||this.l3Switch())},lanNetworksSwitchOptionsNotSupportTip:function(){return this.l2Switch()||this.l3Switch()},lanNetworksSwitchOptions:function(){return this.l2Switch()||this.l3Switch()},lanNetworksEsNotSupportOptions:function(){return this.l2Switch()||this.l3Switch()},lanProfile:function(){return this.es()||this.l2Switch()||this.l3Switch()},lanProfileGridColumnEsEnable:function(){return this.es()},lanProfileApplyEsEnableOption:function(){return this.es()&&(this.l2Switch()||this.l3Switch())},openLanProfileApplyEsEnableOption:function(){return this.es()&&!this.l2Switch()&&!this.l3Switch()},lanProfileEsNotSupportOptions:function(){return this.l2Switch()||this.l3Switch()},lanProfileEsNoteSupportTip:function(){return this.l2Switch()||this.l3Switch()},transmissionOSPF:function(){return s.backendSupport("settings:transmission:ospf")&&this.l3Switch()},transmissionQoS:function(){return s.backendSupport("settings:transmission:switch_qos")&&this.l3Switch()},transmissionSwitchQoS:function(){return o.su.serviceManager.get("user").isSiteView()?s.support("transmissionQoS"):s.backendSupport("settings:transmission:switch_qos")},transmissionVRRP:function(){return s.backendSupport("settings:transmission:vrrp")&&this.l3Switch()},authenticationDotx:function(){return(this.l2Switch()||this.l3Switch())&&s.backendSupport("settings:auth:dot1x")},serviceSNMPTip:function(){return this.es()},serviceSSHTip:function(){return this.es()},cli:function(){return s.support("siteCli")||s.support("deviceCli")},siteCli:function(){return s.backendSupport("settings:cli_configuration:site_cli")&&(this.l2Switch()||this.l3Switch())},deviceCli:function(){return s.backendSupport("settings:cli_configuration:device_cli")&&(this.l2Switch()||this.l3Switch())},lanDhcpNextServer:function(){return o.su.moduleManager.get("wiredLanNetworks")&&o.su.moduleManager.get("wiredLanNetworks").supportDhcpNextServer||!1},lanRA:function(){return o.su.moduleManager.get("wiredLanNetworks")&&o.su.moduleManager.get("wiredLanNetworks").supportRA||!1},lanCustomDhcpOption:function(){return o.su.moduleManager.get("wiredLanNetworks")&&o.su.moduleManager.get("wiredLanNetworks").supportCustomDhcpOption||!1},wirelessIds:function(){return o.su.serviceManager.get("license").isPro()},maintenance:function(){return!o.su.serviceManager.get("license").isLite()},maintenance:function(){return!(!s.support("backupRestore")&&!s.support("autoBackup"))&&s.backendSupport("settings:basictenance")&&s.roleSupport("globalSetting")},backupRestore:function(){return!0},backupRestore:function(){return s.support("backup")||s.support("restore")},cloudAccess:function(){return!o.su.serviceManager.get("user").getUserDetail().startTime},mspMode:function(){return!0},siteTools:function(){return!0},openApi:function(){return!o.appUtils.isCentralType()&&s.backendSupport("settings:platform_integration:openapi")},ar_SA:function(){return!0},mspPatternChange:function(){var e=o.su.serviceManager.get("user"),t=e.isGlobalView()&&e.isNormalPattern()||e.isMspView(),i="cloudAccess"!==App.CLOUD_TYPE,a=e.isRoot(),r=!o.appUtils.isCentralType(),e=e.isIdpUser();return s.backendSupport("settings:controller:msp_mode")&&a&&t&&i&&r&&!e},accountSettingSecurity:function(){var e=o.appUtils.isCentralType(),t=o.su.serviceManager.get("user").isLocalUser();return e||t},accountSettingLicense:function(){var e=o.su.moduleManager.get("main");return o.appUtils.isCentralType()&&!e.isSsoUser&&"OM"!==e.countryCode},accountSettingOrders:function(){var e=o.su.moduleManager.get("main");return o.appUtils.isCentralType()&&!e.isSsoUser&&"OM"!==e.countryCode},accountSettingAuditLog:function(){var e=o.su.moduleManager.get("main");return o.appUtils.isCentralType()&&!e.isSsoUser&&"OM"!==e.countryCode},accountSettingBilling:function(){var e=o.su.moduleManager.get("main");return o.appUtils.isCentralType()&&!e.isSsoUser&&e.showPurchaseLicense&&"OM"!==e.countryCode},purchase:function(){return o.su.moduleManager.get("main").showPurchaseLicense},essential:function(){var e=o.su.modelManager.get("centralUserAddon");return!!e&&e.showEssential.getValue()},platformIntegration:function(){return!0},platformIntegration:function(){return!o.appUtils.isOmadaService()&&s.backendSupport("settings:platform_integration")&&(s.roleSupport("globalSetting")||s.roleSupport("globalWebhook"))},abnormal:function(){return o.su.serviceManager.get("license").isPro()},auditLogLicense:function(){var e=o.su.serviceManager.get("license").isLite();return o.su.serviceManager.get("license").isPro()||"cloudBase"===App.CLOUD_TYPE&&!e},integratedOrg:function(){return!0},aclDomainGroup:function(){return s.support("settings:network_security:acl:gateway_acl:domain_group")},dhcpLeaseTime:function(){return!0},vmsLicense:function(){return s.support("licenseCentral")},vmsLogNum:function(){return!1},licenseCentral:function(){return s.backendSupport("license")},insightKnownClients:function(){return s.backendSupport("insights:known_clients")},insightPastConnection:function(){return s.backendSupport("insights:past_connection")},applicationControl:function(){return s.backendSupport("dpi:basic")},sessionLimit:function(){return s.backendSupport("settings:transmission:session_limit")},gatewayQos:function(){return s.backendSupport("settings:transmission:gateway_qos")},servicesIPTV:function(){return s.backendSupport("settings:services:iptv")},nat:function(){return s.backendSupport("settings:transmission:nat:basic")},natPortForwarding:function(){return s.backendSupport("settings:transmission:nat:port_forwarding")},natAlg:function(){return s.backendSupport("settings:transmission:nat:alg")},natOneToOneNat:function(){var e=o.su.moduleManager.get("navigator"),e=!!e&&e.getExistCapacity().oneToOneNat;return!(!s.capacitySupport("oneToOneNat")&&!e)&&s.backendSupport("settings:transmission:nat:one_to_one_nat")&&!App.SITE_PROFILE_EDITING},natDisableNat:function(){var e=o.su.moduleManager.get("navigator"),e=!!e&&e.getExistCapacity().disableNat;return!(!s.capacitySupport("disableNat")&&!e)&&s.backendSupport("settings:transmission:nat:disable_nat")},serviceType:function(){var e=o.su.moduleManager.get("navigator"),e=!!e&&e.getExistCapacity().serviceType;return!(!s.capacitySupport("serviceType")&&!e)&&s.backendSupport("settings:profiles:gateway_qos_service")},bonjourService:function(){return s.backendSupport("settings:profiles:bonjour_service")},notNetwork:function(){return s.backendSupport("settings:network_security:acl:gateway_acl:not_network")},ipGroup:function(){return s.backendSupport("settings:profiles:group:ip_group")},notIpGroup:function(){return s.backendSupport("settings:network_security:acl:gateway_acl:not_ip_group")},ipv6Group:function(){return s.backendSupport("settings:profiles:group:ipv6_group")},notIpv6Group:function(){return s.backendSupport("settings:network_security:acl:gateway_acl:not_ipv6_group")},ipPortGroup:function(){return s.backendSupport("settings:profiles:group:ip_port_group")&&s.capacitySupport("ipPortGroup")},notIpPortGroup:function(){return s.backendSupport("settings:network_security:acl:gateway_acl:not_ip_port_group")},ipv6PortGroup:function(){return s.backendSupport("settings:profiles:group:ipv6_port_group")},notIpv6PortGroup:function(){return s.backendSupport("settings:network_security:acl:gateway_acl:not_ipv6_port_group")},macGroup:function(){return s.backendSupport("settings:profiles:group:mac_group")},locationGroup:function(){return s.backendSupport("settings:profiles:group:location_group")},domainGroup:function(){return s.backendSupport("settings:profiles:group:domain_group")},historyRetention:function(){return s.backendSupport("settings:controller:history_data_retention")&&s.roleSupport("globalSetting")},serverSettings:function(){return s.backendSupport("settings:server")&&s.roleSupport("globalSetting")},samlSso:function(){return s.support("sso")&&s.backendSupport("settings:saml_sso")&&s.roleSupport("samlSsos")},backupData:function(){return"cloudBase"!==App.CLOUD_TYPE},backup:function(){return!o.appUtils.isOmadaService()&&s.backendSupport("settings:basictenance:backup")},restore:function(){return!o.su.serviceManager.get("user").isSiteView()&&!o.su.serviceManager.get("siteTemplate").isBindSiteTemplate()&&s.backendSupport("settings:basictenance:restore")},autoBackup:function(){return!o.appUtils.isOmadaService()&&s.backendSupport("settings:basictenance:auto_backup")},controllerMigration:function(){return s.backendSupport("settings:migration:controller")},siteMigration:function(){return s.backendSupport("settings:migration:site")},migration:function(){return(s.support("controllerMigration")||s.support("siteMigration"))&&s.roleSupport("globalSetting")},accountUser:function(){var e=o.su.serviceManager.get("user");return s.roleSupport(e.isMspView()?"mspUsers":"users")},accountRoleRead:function(){var e=o.su.serviceManager.get("user");return s.backendSupport("account:role:read")&&s.roleSupport(e.isMspView()?"mspRoles":"roles")},accountRoleWrite:function(){var e=o.su.serviceManager.get("user"),e=s.roleSupport(e.isMspView()?"mspRoles":"roles",!0);return s.backendSupport("account:role:write")&&e},accountSamlUser:function(){var e=o.su.serviceManager.get("user");return s.support("sso")&&s.backendSupport("account:saml_sso")&&s.roleSupport(e.isMspView()?"mspSamlUsers":"samlUsers")},accountSamlRole:function(){var e=o.su.serviceManager.get("user");return s.support("sso")&&s.backendSupport("account:saml_sso")&&s.roleSupport(e.isMspView()?"mspSamlRoles":"samlRoles")},accountUserAlertEmail:function(){return s.backendSupport("account:alert_email")},accountPermissionTransfer:function(){return s.support("accountUser")&&o.su.serviceManager.get("user").isOwnerRoot()},show6g:()=>!this.support("festa"),hasAdoptedDevices:()=>{let t=!1;return o.su.serviceManager.get("ajax").request({url:"/quick-action/network-wizard/devices/existed",ajax:{method:"GET",async:!1},success:function(e){t=e.result},fail:function(){t=!1},error:function(){t=!1}}),t},networkSecurity:()=>!o.su.serviceManager.get("user").isBlock("network"),wireguard:()=>{var e=o.su.moduleManager.get("navigator"),e=!!e&&e.getExistCapacity().wireguard;return!(!s.capacitySupport("wireguard")&&!e)&&s.backendSupport("settings:vpn:wireguard_vpn")},peers:()=>s.backendSupport("settings:vpn:peers"),greTunnel:function(){return s.backendSupport("settings:vpn:eo_gre_tunnel")&&!App.SITE_PROFILE_EDITING},eoGRE:function(){return s.backendSupport("settings:vpn:eo_gre_tunnel")},homeWireguard:()=>{if(o.su.serviceManager.get("user").isSiteView()){let t=!1;return o.su.serviceManager.get("ajax").request({url:"/setting/capacity",ajax:{method:"GET",async:!1},success:function(e){t=e.result&&e.result.wireguard},fail:function(){t=!0},error:function(){t=!0}}),t&&this.support("wireguard")&&!o.su.serviceManager.get("user").isBlock("network")}return!1},lockToApWirelessRouter:()=>s.capacitySupport("lockToAp"),authentication:()=>!this.support("free")&&!o.su.serviceManager.get("user").isBlock("network"),onlyPortalMenu:()=>this.support("free")&&!o.su.serviceManager.get("user").isBlock("network"),poeRecovery:()=>o.su.serviceManager.get("user").isModify("siteHome")&&o.su.serviceManager.get("user").isModify("devices"),ssid:()=>!o.su.serviceManager.get("user").isBlock("network"),homeSsid:()=>o.su.serviceManager.get("user").isModify("siteHome")&&this.support("ssid"),networkWizard:()=>!o.su.serviceManager.get("user").isBlock("network")&&o.su.serviceManager.get("user").isModify("devices"),networkWizardSurveillanceNetwork:()=>this.support("networkWizard")&&s.backendSupport("site:home:surveillance_network_support"),extendMode:()=>o.su.serviceManager.get("user").isModify("siteHome")&&o.su.serviceManager.get("user").isModify("devices"),autoPoeExtend:()=>!1,portIsolation:()=>o.su.serviceManager.get("user").isModify("siteHome")&&o.su.serviceManager.get("user").isModify("devices"),portForward:()=>!o.su.serviceManager.get("user").isBlock("network"),appNotification:function(){return"cloudBase"===App.CLOUD_TYPE},deviceManage:function(){return!o.su.moduleManager.get("main").isClusterMode()},clusterDeviceManageIP:function(){return!0},cluster:function(){var e=o.su.serviceManager.get("user"),t=!e.isBlock(e.isMspView()?"mspCluster":"globalCluster");let i=!1;var a=o.su.moduleManager.get("navigator"),a=(a&&(i=!0===a.capability.cluster),!(!e.isStandardUser()&&e.isGlobalView()));return t&&i&&a},mspCluster:function(){var e=!o.su.serviceManager.get("user").isBlock("mspCluster");let t=!1;var i=o.su.moduleManager.get("navigator");return i&&(t=!0===i.capability.cluster),e&&t},clusterRole:function(){var e=o.su.serviceManager.get("user"),t=e.isRoot();let i=!1;var a=o.su.moduleManager.get("navigator"),a=(a&&(i=!0===a.capability.cluster),!(!e.isStandardUser()&&e.isGlobalView()));return t&&i&&a},clusterInitReminder:function(){let e=!1;var t=o.su.moduleManager.get("navigator");return(e=t?!0===t.capability.initClusterReminder:e)&&s.support("cluster")},p2pAdoptedFunction:function(){let e=!0;var t=o.su.moduleManager.get("navigator");return e=t?!1!==t.capability.p2p:e},showCentralAddButton:function(){var e=o.su.modelManager.get("centralUserAddon");return!!e&&e.showCentral.getValue()},ppsk:function(){return s.backendSupport("settings:profiles:ppsk")},networkReport:function(){return s.backendSupport("reports")&&s.roleSupport("report")},acl:function(){return s.backendSupport("settings:network_security:acl")&&(s.support("gatewayAcl")||s.support("networkSecurityACLSwitchTab")||s.support("eapAcl"))},gatewayAcl:function(){return s.backendSupport("settings:network_security:acl:gateway_acl")},switchAcl:function(){return s.backendSupport("settings:network_security:acl:switch_acl")},networkSecurityACLSwitchTab:function(){return(this.l2Switch()||this.l3Switch())&&!App.SITE_PROFILE_EDITING&&s.support("switchAcl")},eapAcl:function(){return s.backendSupport("settings:network_security:acl:eap_acl")},urlFiltering:function(){return s.backendSupport("settings:network_security:url_filter")},macFilter:function(){return s.backendSupport("settings:network_security:mac_filter")&&s.capacitySupport("macFilter")},attackDefence:function(){return s.backendSupport("settings:network_security:attack_defence")},ipMacBinding:function(){return s.backendSupport("settings:network_security:ip_mac_binding")&&s.capacitySupport("ipMacBinding")},childrenVpn:function(){return s.backendSupport("settings:vpn:vpn")},sslVpn:function(){var e=o.su.moduleManager.get("navigator"),e=!!e&&e.getExistCapacity().sslVpn;return!(!s.capacitySupport("sslVpn")&&!e)&&s.backendSupport("settings:vpn:ssl_vpn")},insightSessionLimit:function(){return s.backendSupport("insights:session_limit")},insightPortForwardingStatus:function(){return s.backendSupport("insights:port_forwarding_status")},insightRoutingTable:function(){return s.backendSupport("insights:routing_table")},insightDdns:function(){return s.backendSupport("insights:dynamic_dns")},networkAnalyze:function(){return s.backendSupport("tools")&&s.roleSupport("siteAnalyze")},intelliRecover:function(){return s.backendSupport("intelli_recover")&&s.roleSupport("deviceRecovery")&&o.su.serviceManager.get("user").isSiteView()&&!App.SITE_PROFILE_EDITING},intelliRecoverLog:function(){return s.support("intelliRecover")&&s.roleSupport("log")},intelliRecoverModifyLog:function(){return s.support("intelliRecoverLog")&&s.roleSupport("log",!0)&&s.roleSupport("deviceRecovery",!0)},intelliRecoverDeviceButton:function(){return!(!s.support("intelliRecover")||!s.getDeviceSettingsData())&&o.su.serviceManager.get("intelliRecover").judgeIntelliRecoverButtonByVerifyStatus(!1)},intelliRecoverClientButton:function(){return!(!s.support("intelliRecover")||!s.getDeviceSettingsData())&&o.su.serviceManager.get("intelliRecover").judgeIntelliRecoverButtonByVerifyStatus(!0)},toolsPacketCapture:function(){return(!o.su.serviceManager.get("user").isSiteView()||s.support("networkAnalyze"))&&s.backendSupport("tools:packet_capture")},toolsCableTest:function(){var e=o.su.serviceManager.get("user");return s.support("networkAnalyze")&&!e.isGlobalView()},toolsTitle:function(){return s.support("networkAnalyze")||s.support("mapEntry")},insightPastAuthorization:function(){return s.backendSupport("portal:ui:standard")},settingsPastAuthorization:function(){return!s.backendSupport("portal:ui:standard")},settingsPastAuthorizationTraffic:function(){return s.backendSupport("portal:authed_clients:traffic")},macAuth:function(){return s.backendSupport("settings:auth:mac")},radiusProfile:function(){return s.backendSupport("settings:profiles:radius")},LDAP:function(){return s.backendSupport("settings:profiles:ldap")},orgAndCloudAccessList:function(){return!o.su.moduleManager.get("main").isSsoUser},deviceAsyncTopologyInfo:function(){return o.su.serviceManager.get("user").isSiteView()},clusterHorizontalScaling:function(){return!("software"!==o.su.moduleManager.get("main").checkControllerType())},clientBlock:()=>!this.support("festa"),extendModeEnable:()=>this.support("homePage"),poeReboot:()=>this.support("homePage"),insightVpnStatus:function(){return!s.backendSupport("insights:vpn_status_move_wireguard")},networkVpnStatus:function(){return s.backendSupport("insights:vpn_status_move_wireguard")},iPsecVpnTab:function(){return s.support("insightVpnStatus")&&s.capacitySupport("ipsec")},tunnelVpnTab:function(){return s.support("insightVpnStatus")},sslVpnTab:function(){return s.support("insightVpnStatus")&&s.capacitySupport("sslVpn")},wireGuardVpnTab:function(){return s.capacitySupport("wireguard")},l2TPVpn:function(){return s.capacitySupport("l2TP")},ldapSsl:function(){return s.capacitySupport("ldapSsl")},iPsecVpn:function(){return s.capacitySupport("ipsec")},firewall:function(){return s.backendSupport("settings:network_security:fire_wall")},mapEntry:function(){return s.roleSupport("map")},mapTopology:function(){return s.backendSupport("map:topology")&&!s.support("homePage")},mapHeatMap:function(){return s.backendSupport("map:heat_map")},mapDeviceMap:function(){return s.backendSupport("map:device_map")},siteMap:()=>s.backendSupport("global_dashboard:site_map"),editSiteLocation:()=>!App.SITE_PROFILE_EDITING&&!o.appUtils.isCentralType()&&s.backendSupport("global_dashboard:site_map"),portalImportCustomizedPage:function(){return s.backendSupport("portal:imported_page")},portalAuthTypeNoAuth:function(){return s.backendSupport("portal:auth_type:no_auth")},portalAuthTypeSimplePwd:function(){return s.backendSupport("portal:auth_type:simple_pwd")},portalAuthTypeHotspot:function(){return s.backendSupport("portal:auth_type:hotspot")},portalAuthTypeHotspotVoucher:function(){return s.support("portalAuthTypeHotspot")&&s.backendSupport("portal:auth_type:voucher")},portalAuthTypeHotspotLocalUser:function(){return s.support("portalAuthTypeHotspot")&&s.backendSupport("portal:auth_type:localuser")},portalAuthTypeHotspotSms:function(){return s.support("portalAuthTypeHotspot")&&s.backendSupport("portal:auth_type:sms")},portalAuthTypeHotspotRadius:function(){return s.support("portalAuthTypeHotspot")&&s.backendSupport("portal:auth_type:hotspot_radius")},portalAuthTypeHotspotFormAuth:function(){return s.support("portalAuthTypeHotspot")&&s.backendSupport("portal:auth_type:form_auth")&&!App.SITE_PROFILE_EDITING},portalAuthTypeExternalRadius:function(){return s.backendSupport("portal:auth_type:external_radius")},portalAuthTypeLdap:function(){return s.backendSupport("portal:auth_type:ldap")},portalAuthTypeExternalPortal:function(){return s.backendSupport("portal:auth_type:external_portal")},portalAuthTypeGoogle:function(){return s.backendSupport("portal:auth_type:google")},logsRemoteLogging:function(){var e=o.su.serviceManager.get("user");return e.isSiteView()?s.backendSupport("settings:site:remote_logging")&&s.roleSupport("network",!0)&&s.roleSupport("log",!0):e.isGlobalView()?s.backendSupport("settings:controller:remote_logging")&&s.roleSupport("globalLog",!0):!e.isMspView()||s.roleSupport("mspLog",!0)},logsEvents:function(){return!App.SITE_PROFILE_EDITING},logsAlerts:function(){return!App.SITE_PROFILE_EDITING&&!o.appUtils.isCentralType()},logsEmail:function(){return s.backendSupport("logs:email")},logsEmailSetting:function(){return o.su.serviceManager.get("user").isSiteView()&&s.backendSupport("logs:email")},ip:function(){return"software"!==o.su.moduleManager.get("main").checkControllerType()&&!o.su.moduleManager.get("main").isCombinedGateway()},cpuUtil:function(){return"software"!==o.su.moduleManager.get("main").checkControllerType()&&!o.su.moduleManager.get("main").isCombinedGateway()},memUtil:function(){return"software"!==o.su.moduleManager.get("main").checkControllerType()&&!o.su.moduleManager.get("main").isCombinedGateway()},informUrl:function(){return s.backendSupport("settings:system:controller_status:inform_url")},organizationName:function(){return s.backendSupport("settings:system:controller_status:organization_name")},portalWiredClient:()=>s.backendSupport("portal:network"),historyEnable:()=>!o.su.serviceManager.get("user").isMspView()&&s.backendSupport("client:history")&&!o.appUtils.isCentralType(),userInterface:()=>this.support("refreshInterval")||this.support("uiInteractionNotifications")||this.support("dashboardAndStatisTimezone"),refreshInterval:()=>{var e="cloudAccess"===App.CLOUD_TYPE,t=!o.appUtils.isOmadaService();return s.backendSupport("settings:user_interface:refresh_interval")&&!e&&t},importantAutoRefresh:()=>!s.backendSupport("settings:user_interface:refresh_interval"),controllerServices:()=>s.support("controllerRemoteLogging")||s.support("clientTimeout")||s.support("deviceAccessManagement"),controllerRemoteLogging:()=>s.backendSupport("settings:controller:remote_logging"),experienceImprovement:function(){var e=o.su.serviceManager.get("user");return s.backendSupport("settings:controller:experience_improvement")&&!e.isMspView()},clientTimeout:()=>{var e,t;return!!s.backendSupport("settings:controller:client_timeout")&&(e=o.su.serviceManager.get("user"),t=o.appUtils.isCentralType()&&!o.su.serviceManager.get("user").getServiceEnableStatus("networkEnable"),e.isGlobalView())&&!t},deviceAccessManagement:()=>this.support("deviceAccessHttpHttps")||this.support("deviceAccessStandalone"),deviceAccessHttpHttps:()=>{var e,t;return!!s.backendSupport("settings:controller:device_access")&&(e=o.su.serviceManager.get("user"),t=o.appUtils.isCentralType()&&!o.su.serviceManager.get("user").getServiceEnableStatus("networkEnable"),e.isGlobalView())&&!t},deviceAccessStandalone:()=>{var e,t;return!!s.backendSupport("settings:controller:standalone_mode_management")&&(e=o.su.serviceManager.get("user"),t=o.appUtils.isCentralType()&&!o.su.serviceManager.get("user").getServiceEnableStatus("networkEnable"),e.isGlobalView())&&!t},clientsHistory:()=>s.backendSupport("insights:past_connection"),clientsStatistics:()=>s.backendSupport("client:statistics"),clientsIdentifiedTraffic:()=>s.backendSupport("client:dpi")&&s.support("dpi"),uploadCsvSizeLimit:()=>{var e=s.capabilities.filter(e=>null!==e.match(/settings:voip:telephone_number:/));return e.length?(e=e[0].split(":")[3],parseInt(e.split("_")[3][0])):0},commonSettings:()=>"gateway"===this.getDeviceSettingsData().type&&!o.su.serviceManager.get("user").isMspView()&&!o.appUtils.isCentralType()&&!this.support("lite"),editLogoutProperties:()=>this.backendSupport("portal:logout:edit_properties"),editLogoutConfig:()=>this.backendSupport("portal:logout:configured"),security:()=>this.backendSupport("security")&&this.roleSupport("globalSecurity"),crossViewJump:()=>!o.su.serviceManager.get("user").isGlobalView(),dashboardAndStatisTimezone:()=>!o.su.serviceManager.get("user").isMspView()&&!o.appUtils.isCentralService()&&this.backendSupport("settings:user_interface:time_zone"),versionUpgrade:()=>s.backendSupport("settings:system:controller_status:controller_upgrade"),gatewayTraffic:()=>s.backendSupport("devices:gateway:details:portTraffic"),gatewayNetworkClient:()=>this.backendSupport("devices:gateway:clients:basic"),logDevice:()=>!(o.su.serviceManager.get("user").isGlobalView()&&this.support("free")),logEventSystemAndClient:()=>!(o.su.serviceManager.get("user").isSiteView()&&this.support("free")),scenarioHotel:()=>this.backendSupport("scenario:hotel"),scenarioRestaurant:()=>this.backendSupport("scenario:restaurant"),scenarioOffice:()=>this.backendSupport("scenario:office"),scenarioFactory:()=>this.backendSupport("scenario:factory"),scenarioDormitory:()=>this.backendSupport("scenario:dormitory"),scenarioCampus:()=>this.backendSupport("scenario:campus"),scenarioHospital:()=>this.backendSupport("scenario:hospital"),scenarioHome:()=>this.backendSupport("scenario:home"),scenarioShoppingMall:()=>this.backendSupport("scenario:shopping_mall"),scenarioAirport:()=>this.backendSupport("scenario:airport"),clientPpskProfile:()=>this.backendSupport("settings:profiles:ppsk"),sdWan:()=>this.backendSupport("sd_wan"),lanDns:()=>{var e=o.su.moduleManager.get("navigator"),e=!!e&&e.getExistCapacity().lanDns;return!(!this.capacitySupport("lanDns")&&!e)&&this.backendSupport("settings:wired_networks:lan_dns")},addDeviceByInformUrl:function(){return"cloudBase"===App.CLOUD_TYPE},meshFailoverAlgorithm:function(){return s.backendSupport("devices:ap:mesh:failover_algorithm")},accountAlertVms:function(){return!1},virtualMacMAD:function(){return!1},controllerUpdate:()=>{var e="software"===o.su.moduleManager.get("main").checkControllerType(),t="cloudBase"===App.CLOUD_TYPE,i=o.su.serviceManager.get("user"),a=i.isMspView(),i=i.getSettingPrivilege();return(e&&!t||!e&&!a)&&s.roleSupport(i)},accountManagement:function(){var e=o.su.modelManager.get("centralUserAddon");return e&&e.showAccountManager.getValue()},exportRunningLogs:function(){var e=o.su.serviceManager.get("user"),e=!e.isStandardUser()&&e.isGlobalView();return s.backendSupport("settings:export_data:export_running_logs")&&!e},uiInteractionNotifications:function(){return s.backendSupport("settings:user_interface:notification")},guardPcClient:function(){var e=o.su.modelManager.get("centralUserAddon");return!!e&&e.showGuardDownload.getValue()},toolsGlobalSsh:function(){var e="software"!==o.su.moduleManager.get("main").checkControllerType()&&!o.su.moduleManager.get("main").isCombinedGateway();return o.su.serviceManager.get("user").isGlobalView()&&e},networkWizardEcspv1DeviceSupport:function(){return s.backendSupport("devices:common:compatible:ecsp_v1")}};s.capabilities=[],s.updateCapabilities=()=>{let t=o.Deferred(),e="/api/v2/anon/capabilities";return o.su.serviceManager.get("user").isLogin()&&(e="/api/v2/capabilities"),o.su.moduleManager.get("main").isHotspot()&&(e="/api/v2/hotspot/capabilities"),o.appUtils.isCentralType()&&(e="/api/v1/central/{centralId}/capabilities"),o.su.serviceManager.get("ajax").request({url:e,ajax:{type:"GET"},success:function(e){e=e&&e.result||[];s.capabilities=e,t.resolve()},fail:function(){t.reject()},error:function(){t.reject()}}),t.promise()},s.backendSupport=e=>s.capabilities.includes(e),s.updateActiveDeviceTab=e=>{s.activeDeviceTab=e},s.getDeviceSettingsData=()=>{var e=o.su.moduleManager.get("index")&&o.su.moduleManager.get("index").getDrawer();return!e||!(e=e.getTabData(s.activeDeviceTab||e.getActiveTabName()))||o.isEmptyObject(e)?{}:e},s.capacitySupport=e=>{let t=!0;var i=o.su.moduleManager.get("navigator");return t=i?!1!==i.capability[e]:t},s.roleSupport=(e,t)=>{var i=o.su.serviceManager.get("user");return t?i.isModify(e):!i.isBlock(e)},s.support=(e,...t)=>!e||!n[e]||n[e](...t),o.su.Service.call(s)}return o.su.inherit(o.su.Service,e),e})(jQuery),$.su.Incident=(g=>{var a="incident",e=[a,"cause"],r={};function t(){g.each(e,function(e,t){r[t]=(e=>e=e===a?g.appUtils.getAnomalyData():g.appUtils.getCauseData())(t)})}function i(){t(),this.name="incident",this.getCause=function(e,t){var i=r["cause"][e];return i?{title:s(h.TITLE,e,t),content:g.su.language.isRtl()?s(h.CONTENT,e,t).replace(/:/g,"‏:‏"):s(h.CONTENT,e,t),advicesInfo:(i=>{var a=[];return i.advices&&g.each(i.advices,function(e,t){a.push({adviceCode:e,adviceText:s(h.ADVICE,e,i),helpful:t.helpful,adviceData:t})}),a})(t),widgets:n(i.widgets,t)}:{}},this.getIncident=function(e,t){var i=r[a][e];return i?{category:i.category,level:t.level,title:s(h.TITLE,e,t),content:g.su.language.isRtl()?s(h.CONTENT,e,t).replace(/:/g,"‏:‏"):s(h.CONTENT,e,t),widgets:n(i.widgets,t)}:{}},this.getSettings=function(e){return g.su.CHAR.ANOMALY_SETTINGS[e]},this.getCodeType=function(i){var a;return g.each(e,function(e,t){r[t][i]&&(a=t)}),a},g.su.Service.call(this)}var h={TITLE:"title",CONTENT:"content",ADVICE:"advice"};function s(e,t,i){var a,r,s,n,o,u,l,c,p,d=((e,t)=>{switch(e){case h.TITLE:return g.su.CHAR.ANOMALY_DETECTION[t].title;case h.CONTENT:return g.su.CHAR.ANOMALY_DETECTION[t].content;case h.ADVICE:return g.su.CHAR.ANOMALY_DETECTION[t]}return""})(e,t);if(e!==h.ADVICE){if("03100006"===t&&e===h.CONTENT)return u=d,(l=i).contentParams&&l.contentParams.ddmParams?(c="",p=/%\s*(\w+(\.\w+)*)%|%(\w+(\.\w+)*)\s*%/g,l=JSON.parse(l.contentParams.ddmParams),g.each(l,function(e,t){var i=u.replace(p,function(){var e=Array.prototype.slice.apply(arguments)[0].replace(/%/g,"").trim();return"threshold"===e?t.threshold:g.su.CHAR.ABNORMAL_INCIDENT["DDM_"+e.replace(/([A-Z])/g,"_$1").toUpperCase()+"_"+t[e]]});c+=i+"\n"}),c):"";"01100003"===t&&e===h.CONTENT&&(d=((e,t)=>(e=e.split("\n"),t.contentParams&&g.isNumeric(t.contentParams.causeType)?e[t.contentParams.causeType]:""))(d,i)),"01100051"===t&&e===h.CONTENT&&i.contentParams&&(i.contentParams.fatherApChannel=i.contentParams.fatherApChannel||g.su.CHAR.GATEWAY_SETTINGS.AUTO,i.contentParams.apChannel=i.contentParams.apChannel||g.su.CHAR.GATEWAY_SETTINGS.AUTO);e===h.CONTENT&&0<=["01100062","01100025","01100056"].indexOf(t)&&(r=i,s=[],l=(l=d).split("\n"),n=[],o=/%\s*(\w+(\.\w+)*)%|%(\w+(\.\w+)*)\s*%/g,g.each(l,function(t,e){e.replace(o,function(){var e=Array.prototype.slice.apply(arguments)[0].replace(/%/g,"").trim();r.contentParams&&null!=r.contentParams[e]&&(s[t]=!0)})}),g.each(l,function(e,t){s[e]&&n.push(t)}),d=n=n.join("\n")),d=b(e,d,i,t),"01001003"===t&&e===h.CONTENT&&(d=((e,t)=>{var i=e.split("\n");return e=t.contentParams.avgDisconnectCount?i[0]:t.contentParams.disconnectApPercent?i[1]:i[2]})(d,i))}else{if(!i.advices)return d;a=d,e={"%services%":g.su.CHAR.MENU.SETTINGS+" > "+g.su.CHAR.SITE.SERVICES,"%WiFiNetworks%":g.su.CHAR.ABNORMAL_INCIDENT.WIFINETWORKS,"%sessionLimit%":g.su.CHAR.ABNORMAL_INCIDENT.SESSIONLIMIT,"%wiredNetworksLan%":g.su.CHAR.ABNORMAL_INCIDENT.WIREDNETWORKSLAN,"%internet%":g.su.CHAR.ABNORMAL_INCIDENT.INTERNET,"%acl%":g.su.CHAR.ABNORMAL_INCIDENT.ACL,"%clients%":g.su.CHAR.ABNORMAL_INCIDENT.CLIENTS,"%devices%":g.su.CHAR.ABNORMAL_INCIDENT.ACCESSPOINTS,"%insight%":g.su.CHAR.ABNORMAL_INCIDENT.INSIGHT},g.each(e,function(e,t){-1!==a.indexOf(e)&&(a=a.replace(e,"<a class='u-font-weight-bold u-cursor-pointer go-to' data-key='"+e.replace(/%/g,"")+"'>"+t+"</a>"))}),d=a,d=b(h.CONTENT,d,i.advices[t],t)}return d}var f=[{name:"devMac.",mapping:"devices"},{name:"devMac1.",mapping:"devices"},{name:"clientMac.",mapping:"clients"}],v="frequencyBand",m="site",E="controller",T={0:g.su.CHAR.AP_SETTINGS.BAND_2G,1:g.su.CHAR.AP_SETTINGS.BAND_5G,2:g.su.CHAR.AP_SETTINGS.BAND_5G_2,3:g.su.CHAR.AP_SETTINGS.BAND_6G},y={AP:"ap"},_="conf",S="config",I="meaningCode",A="meaningCodeArray";function b(p,e,d,h){return e=e.replace(/%\s*(\w+(\.\w+)*)%|%(\w+(\.\w+)*)\s*%/g,function(){var e=d[p+"Params"];if(!e)return"";for(var i,t,a,r=Array.prototype.slice.apply(arguments)[0].replace(/%/g,"").trim(),s=0,n=f.length;s<n;s++){var o,u,l,c=f[s];if(-1!==r.indexOf(c.name))return r=r.replace(c.name,""),o=e[c.name.slice(0,-1)],1<r.split(".").length?(u=r.split(".")[0],l=r.split(".")[1],'<span class="link-detail" active-tab="btn-'+(l=d[c.mapping][o].type!==y.AP&&l===_?S:l)+'" data-key="'+o+'" data-type="'+d[c.mapping][o].type+'">'+g.su.ellipsisGridStr(d[c.mapping][o][u],200)+"</span>"):g.su.ellipsisGridStr(d[c.mapping][o][r],200)||o}return-1!==r.indexOf(v)?(a=T[e[r]],!0!==e[t="01004002"===h?"frequencyBand"===r?"support5g2I":"support5g2II":"support5g2"]&&"true"!==e[t]||1!==e[r]&&e[r]!==String(1)?a:g.su.CHAR.AP_SETTINGS.BAND_5G_1):r===I?g.su.CHAR.ABNORMAL_INCIDENT["MEANING_CODE_"+e[r]]:r===A?(i="",t=e[r].split(","),g.each(t,function(e,t){i+=g.su.CHAR.ABNORMAL_INCIDENT["MEANING_CODE_"+t]+"\n"}),i):(a={"01100021":["rebootTime"],"01006001":["rebootTime"],"03100023":["downTime"],"03100025":["deleteTime"],"02006001":["rebootTime"],"03009004":["startTime","endTime"],"01200002":["destTime"],"01002005":["occurTime"]})[h]&&-1!==a[h].indexOf(r)?g.su.serviceManager.get("time").getTextFromUTC(+e[r],g.su.serviceManager.get("user").isSiteView()?m:E,{pattern:"MM dd, yyyy hh:mm:ss hc"}):g.su.escapeHtml(e[r])})}function n(e,r){var s;return r.detail?(s=[],g.each(e=e||[],function(e,t){if("journey"!==t.name){var i={},a=g.su.clone(r.detail[t.mapping]);if(a){if(!(a="array"===g.type(a)?a:[a]).length)return s;g.each(a[0],function(e,t){i[e]=g.su.CHAR.INCIDENT_WIDGET_TEXT[e.replace(/([A-Z])/g,"_$1").toUpperCase()]||""}),s.push({name:t.name,text:i,data:a,mapping:t.mapping})}}}),s):[]}return g.su.inherit(g.su.Service,i),i})(jQuery),$.su.ExportPDF=(n=>{function e(){if("object"==typeof e.instance)return e.instance;this.name="exportPDF",n.su.Service.call(this),e.instance=this}return n.su.inherit(n.su.Service,e),e.prototype.print=function(e,t,i){this.cb=i;var a,e=document.getElementById(e).innerHTML;let r=n("#export-pdf-iframe")[0],s=document.title;r||(a=("cloudAccess"===App.CLOUD_TYPE?"/omada/"+App.controllerVersion:"")+"/"+n("#su-css").attr("href"),(r=document.createElement("iframe")).setAttribute("style","position: absolute; width: 0;height: 0;top: 0;left: 0;"),r.setAttribute("id","export-pdf-iframe"),document.body.appendChild(r),r.contentWindow.document.write(`<link rel="stylesheet" type="text/css" href="${a}"><body class="pdf-body" dir="${n.su.language.isRtl()?"rtl":"ltr"}"></body>`),r.contentWindow.document.close()),r.contentWindow.onbeforeprint=()=>{document.title=t.fileName},r.contentWindow.onafterprint=()=>{document.title=s},n("#export-pdf-iframe").contents().find(".pdf-body")[0].innerHTML=`
            <div class="pdf-container network-report-container">
              <div class="header">
                <div class="logo-wrapper">
                  <div class="omada"></div>
                </div>
                <div class="time-range">${t.timeStr}</div>
              </div>
              <div class="title-header">
                <h1>${t.title}</h1>
                <h2>${t.subTitle}</h2>
                <h2>${t.subsubTitile}</h2>
              </div>
              <table class="pdf-table">
                <tbody><tr><td>
                  <div class="content network-summary">${e}</div>
                </td></tr></tbody>
                <tfoot><tr><td>
                  <div class="footer-space">&nbsp;</div>
                </td></tr></tfoot>
              </table>

              <div class="div-footer">
                <div class="copyright">
                    ${n.su.serviceManager.get("time").getCopyright()}
                </div>
              </div>
            </div>`,t&&t.echarts?this.renderEchart(t):(i&&i(),r.contentWindow?.print(),document.body.removeChild(r))},e.prototype.renderEchart=function(e){var s=this;this.totalEchartsNum=(e=>{let i=0;return e&&e.echarts?(n.each(e.echarts,function(e,t){t.tabCharts?n.each(t.tabCharts,function(e,t){t.option&&(i+=1)}):t.option&&(i+=1)}),i):0})(e),this.number=0,n.each(e.echarts,function(e,a){var r,t;a.tabCharts?(r=n("#export-pdf-iframe").contents().find("#"+a.cardId).addClass("avoid-break"),n.each(a.tabCharts,function(e,t){var i=r.clone().attr("id",a.cardId+e);i.find("#"+a.id).attr("id",a.id+e),t.option.title=[{left:"center",text:t.title,textStyle:{fontSize:14,lineHeight:18}}],t.showLegend&&(t.legend={type:"plain",right:0,textStyle:{color:n.appUtils.getCurrentThemeIsDark()?"#ffffff":n.getUIColor("--s-color-text-primary")}}),t.option.grid.top=40,e=((0===e?r:n("#export-pdf-iframe").contents().find("#"+a.cardId+(e-1))).after(i),i.find(".chart-canvas")),s.renderSingleEchart(e,t.option)}),r.remove()):(t=n("#export-pdf-iframe").contents().find("#"+a.id).find(".chart-canvas"),s.renderSingleEchart(t,a.option))})},e.prototype.renderSingleEchart=function(t,i){var a=this;t.empty(),t.attr("_echarts_instance_",null),t.removeAttr("style"),setTimeout(()=>{function e(){var e=echarts.init(t.get(0),null,{renderer:"svg"});e.on("finished",()=>{a.number+=1,a.number===a.totalEchartsNum&&(a.cb&&a.cb(),n("#export-pdf-iframe")[0].contentWindow?.print())}),i&&i.series&&("pie"===i.series.type||i.series.length&&"pie"===i.series[0])&&(i.title&&i.title.textStyle&&(i.title.textStyle.fontSize=10),i.title)&&i.title.subtextStyle&&(i.title.subtextStyle.fontSize=8),i&&(i.tooltip=null),i&&e.setOption(i)}void 0===window.echarts?n.su.router.loadScript("js/libs/echarts-e8eb209127.min.js",function(){n.su.router.loadScript("js/libs/s-dark-d1dd258a99.min.js",function(){e()})}):window.echarts&&e()},1e3)},e})(jQuery),(s=>{function e(){if("object"==typeof e.instance)return e.instance;this.TEMPLATE_STATUS={NOT_ALLOW_OVERRIDE:-2,NOT_TEMPLATE:-1,CUSTOM:0,INHERIT:1,OVERRIDE:2},this.name="siteTemplate",s.su.Service.call(this),this._siteTemplateName="",this._siteTemplateId="",this._inWhiteList=!0,this._siteTemplateSupportedSettings=[],this._optionalModules=[],this._lastHash="",e.instance=this}s.su=s.su||{},s.su.SiteTemplate=(s.su.inherit(s.su.Service,e),e.prototype.setSiteTemplateId=function(e){this._siteTemplateId=e},e.prototype.getSiteTemplateId=function(){return this._siteTemplateId},e.prototype.setSiteTemplateName=function(e){this._siteTemplateName=e},e.prototype.getSiteTemplateName=function(){return this._siteTemplateName},e.prototype.setSiteTemplateSupportedSettings=function(e){this._siteTemplateSupportedSettings=e},e.prototype.getSiteTemplateSupportedSettings=function(){return this._siteTemplateSupportedSettings},e.prototype.getUnsupportedSettings=function(){return this._optionalModules.filter(e=>!this._siteTemplateSupportedSettings.includes(e))},e.prototype.isBindSiteTemplate=function(){return s.su.serviceManager.get("user").isSiteView()&&""!==this.getSiteTemplateId()&&!App.SITE_PROFILE_EDITING},e.prototype.getTemplateStatusDom=function(e,t,i=!1){let a="",r="";if(!t&&!this.isBindSiteTemplate()||this.isBindSiteTemplate()&&this.isInUnsupportedSettings())return"";switch(e){case this.TEMPLATE_STATUS.CUSTOM:a="custom",r=s.su.CHAR.SITE_PROFILE.STATUS_CUSTOM;break;case this.TEMPLATE_STATUS.INHERIT:a="inherit",r=s.su.CHAR.SITE_PROFILE.STATUS_INHERIT;break;case this.TEMPLATE_STATUS.OVERRIDE:a="override",r=s.su.CHAR.SITE_PROFILE.STATUS_OVERRIDE}return""!==r?i?`<span class="tag-pure-single-${s.appUtils.getTagTypeFromTemplateStatus(a)}">${r}</span>`:`<span class="tag-wrapper tag-with-text ${s.appUtils.getTagTypeFromTemplateStatus(a)}-pale">
              <span class="tag-text template-status-text">${r}</span></span>`:""},e.prototype.gotoSiteTemplate=function(e){this.getSiteTemplateDetailSetting().then(()=>{this.setLastHash(location.hash.replace("#","")),s.su.moduleManager.get("navigator").action.setGlobalState({type:"editProfile",templateId:this._siteTemplateId,templateName:this._siteTemplateName,supportedInfo:this.getSiteTemplateSupportedSettings(),hash:e||this._lastHash})})},e.prototype.gotoDeviceTemplate=function(e,t){this.getSiteTemplateDetailSetting(e).then(()=>{this.setLastHash(location.hash.replace("#","")),s.su.moduleManager.get("navigator").action.setGlobalState({type:"editProfile",templateId:e,templateName:t,supportedInfo:this.getSiteTemplateSupportedSettings(),hash:"deviceProfile"})})},e.prototype.setLastHash=function(e){this._lastHash=e},e.prototype.getLastHash=function(){return this._lastHash},e.prototype.clearLastHash=function(){this._lastHash=""},e.prototype.setWhiteListStatus=function(e){this._inWhiteList=e},e.prototype.isInTemplateWhiteList=function(){return!1!==this._inWhiteList},e.prototype.updateOptionalModules=function(){var e=s.su.serviceManager.get("user").isBlock("siteTemplate");if(!s.su.serviceManager.get("user").isMspView()&&this.isInTemplateWhiteList()&&!e){e=s.su.serviceManager.get("ajax");let t=this;e.request({url:"/api/v2/sitetemplates/modules",ajax:{type:"GET"},success:function(e){t._optionalModules=e.result}})}},e.prototype.getOptionalModules=function(){return this._optionalModules},e.prototype.isInUnsupportedSettings=function(){var e=location.hash.replace("#","");return this.getUnsupportedSettings().includes(e)},e.prototype.getSiteTemplateDetailSetting=function(e){let t=s.Deferred();var e=e||this.getSiteTemplateId(),i=this;return e?(s.su.serviceManager.get("ajax").request({url:"/api/v2/sitetemplates/"+e,ajax:{type:"GET"},success:function(e){i.setSiteTemplateSupportedSettings(e.result&&e.result.settings||[]),t.resolve()}}),t):t.resolve()},e)})(jQuery),(e=>{function t(){if("object"==typeof t.instance)return t.instance;this.name="site",e.su.Service.call(this),this._swichSupportEs=!1,this._swichSupportL2=!1,this._swichSupportL3=!1,t.instance=this}e.su=e.su||{},e.su.Site=(e.su.inherit(e.su.Service,t),t.prototype.setSwitchSupportEs=function(e){this._swichSupportEs=e},t.prototype.setSwitchSupportL2=function(e){this._swichSupportL2=e},t.prototype.setSwitchSupportL3=function(e){this._swichSupportL3=e},t.prototype.getSwitchSupportEs=function(e){return this._swichSupportEs},t.prototype.getSwitchSupportL2=function(e){return this._swichSupportL2},t.prototype.getSwitchSupportL3=function(e){return this._swichSupportL3},t)})(jQuery),$.su.Payment=(()=>{function e(e){(r=this).name="payment",this.service=e.service,this.stripeStatus={cardNumber:!1,cardExpiry:!1,cardCvc:!1},$.su.Service.call(this)}var r;return $.su.inherit($.su.Service,e),e.prototype.getKey=function(){var t,i,a=this;return this.currency=null,i=$.Deferred(),r.service.ajax.request({url:"/api/v1/central/account/stripe/public-key",ajax:{method:"GET"},preventDefaultSuccess:!0,preventDefaultFail:!0,success:function(e){t=e.result&&e.result.publicKey,i.resolve(t)},fail:function(){i.reject()},error:function(){i.reject()}}),i.then(function(e){a.publicKey=e})},e.prototype.loadPaypal=function(e){var t=$.Deferred();return window.paypal?t.resolve():(null===this.currency&&(this.currency=e),"string"!==$.type(this.clientId)||"string"!==$.type(this.clientId)?(console.log("Fail to get client id or currency"),t.reject("NO CLIENTID OR CURRENCY")):$.ajax({url:"https://www.paypal.com/sdk/js?client-id="+this.clientId+"&currency="+this.currency+"&disable-funding=credit,card",timeout:3e4,dataType:"script"}).done(function(){t.resolve()}).fail(function(){console.log("fail paypal"),t.reject("BAD REQUEST")})),t},e.prototype.loadStripe=function(){var e,t=$.Deferred(),i=this;return window.Stripe?(e=i.initStripe())?t.resolve(e):t.reject("NO PUBLICKEY"):$.ajax({url:"https://js.stripe.com/v3/",dataType:"script",timeout:3e4}).done(function(){var e=i.initStripe();e?t.resolve(e):t.reject("NO PUBLICKEY")}).fail(function(){t.reject("BAD REQUEST")}),t},e.prototype.initStripe=function(){var e=this;return e.stripe||("string"!==$.type(e.publicKey)?(console.log("Fail to get public key."),!1):(e.stripe=Stripe(e.publicKey),e.stripe))},e.prototype.getStripe=function(){return this.stripe?$.Deferred().resolve(this.stripe):this.loadStripe()},e.prototype.getPaypal=function(){return window.paypal?$.Deferred().resolve():this.loadPaypal()},e.prototype.getStripeStyle=function(){return{base:{fontSize:"13px",color:$.getUIColor("--s-color-color-picker-input-text"),fontFamily:$.getUIColor("--s-font-family"),fontSmoothing:"antialiased","::placeholder":{color:$.getUIColor("--s-color-input-placeholder")}},invalid:{color:$.getUIColor("--s-color-theme-status-error"),iconColor:$.getUIColor("--s-color-theme-status-error")}}},e.prototype.resetStripeStatus=function(){for(var e in $(".card-number-error").removeClass("show-error"),$(".card-expiration-error").removeClass("show-error"),this.stripeStatus)this.stripeStatus[e]=!1},e.prototype.isStripeValid=function(){for(var e in this.stripeStatus)if(!1===this.stripeStatus[e])return!1;return!0},e.prototype.setStripeStatus=function(e,t){var i;this.stripeStatus.hasOwnProperty(e.elementType)&&(this.stripeStatus[e.elementType]=t),"cardNumber"===e.elementType?((i=$(".card-number-error")).removeClass("show-error"),!t&&e.error&&(i.text(e.error.message),i.addClass("show-error"))):"cardExpiry"===e.elementType&&((i=$(".card-expiration-error")).removeClass("show-error"),!t)&&e.error&&(i.text(e.error.message),i.addClass("show-error"))},e})(),$.su.IntelliRecover=(s=>{function e(){if("object"==typeof e.instance)return e.instance;this.name="intelliRecover",r=this,s.su.Service.call(this),e.instance=this}var r,n={GATEWAY:1,SWITCH:2,EAP:3,CLIENT:107,NVR:6,OLT:5,IPC:4},o={SUCCESS:0,EXIST:1,NOT_VERIFIED:2};return s.su.inherit(s.su.Service,e),e.prototype.getIntelliRecoverDeviceType=function(){return n},e.prototype.getIntelliRecoverVerifyResults=function(){return o},e.prototype.verifyIntelliRecover=function(e){var t=r.getIntelliRecoverObject(e),i=e?"/monitor-client/verify":"/monitor-device/verify",t={mac:t.mac,deviceType:t.deviceType},e=e?{monitorClient:t}:{monitorDevice:t},a=o.NOT_VERIFIED;return s.su.serviceManager.get("ajax").request({url:i,ajax:{type:"POST",async:!1},data:e,success:function(e){0===e.errorCode&&e.result&&(e=e.result,a=e.verifyResult)}}),a},e.prototype.getIntelliRecoverObject=function(e,t){e=e??!1;var i,a,r=s.su.serviceManager.get("capability").getDeviceSettingsData();return r?(i=e?n.CLIENT:n.EAP,e&&r.vigi&&("IPC"===(a=r.deviceType||"").toUpperCase()?i=n.IPC:"NVR"===a.toUpperCase()&&(i=n.NVR)),{mac:r.mac,name:r.name,id:e?r.id:r.customId,deviceType:i,clientTab:t??!1}):getDefaultIntelliRecoverObject()},e.prototype.judgeIntelliRecoverButtonByVerifyStatus=function(e,t){e=r.verifyIntelliRecover(e=e??!1);switch(t&&t(e),e){case o.SUCCESS:return!!s.su.serviceManager.get("user").isModify("deviceRecovery");case o.EXIST:return!0;default:return!1}},e})(jQuery),$.su.DeviceInfo=(o=>{function e(){this.name="deviceInfo";var n=this;n.imgInfos=[],n.imgPathMap={"bigImg":"/static/theme/img/topology/deviceicon","heatmapImg":"/static/theme/img/virtualDeviceIcon","smallImg":"/static/theme/img/deviceIcon"},this.updateDeviceInfo=function(){var e=o.appUtils.isCentralType()?"/api/v1/central/account/devicemodelimg":"/api/v2/cmd/devicemodelimg";o.su.serviceManager.get("ajax").request({url:e,preventDefaultFail:!0,data:{cloudAccess:"cloudAccess"===App.CLOUD_TYPE},ajax:{type:"GET"},success:function(e){e=e&&e.result||{};n.imgInfos=o.su.clone(e.imgInfos),n.imgPathMap=o.su.clone(e.imgPathMap),n.updateAppIconMap(),n.generateIconStyle()}})},this.updateAppIconMap=function(){var e=n.imgInfos;e&&o.each(e,function(e,t){o.appUtils.addIcon(t.model,t.modelVersion,t.imgName)})},this.getDeviceInfo=function(){return{imgInfos:n.imgInfos,imgPathMap:n.imgPathMap}},this.getIconUrl=function(e,i){i=i||"smallImg";var a,r=e.model,s=e.modelVersion;return!(!r||!s)&&(o.each(n.imgInfos,function(e,t){if(t.model===r&&t.modelVersion===s)return t.imgBucketPathMap?a=t.imgBucketPathMap[i+"BucketPathForWeb"]:a=n.imgPathMap[i]+"/"+t.imgName+".png",!1}),a)},this.generateIconStyle=function(){var p=`
            .drawer-container.shown .tab-btn[data-name="batch-switch"]{DEVICE_ICON},
            .drawer-container.shown .tab-btn[data-name="batch-olt"]{DEVICE_ICON},
            .drawer-container.shown .tab-btn[data-name="batch-ap"]{DEVICE_ICON},
            .drawer-container.shown .tab-btn[data-name="batch-active"]{DEVICE_ICON},
            .drawer-container.shown .tab-btn{DEVICE_ICON},
            .drawer-container.shown .device-type{DEVICE_ICON},
            .drawer-container.shown .drawer-title-container{DEVICE_ICON},
            .drawer-container.shown .combobox-list{DEVICE_ICON},
            .device-icon .tab-btn[data-name="batch-switch"]{DEVICE_ICON},
            .device-icon .tab-btn[data-name="batch-olt"]{DEVICE_ICON},
            .device-icon .tab-btn[data-name="batch-ap"]{DEVICE_ICON},
            .device-icon .tab-btn[data-name="batch-active"]{DEVICE_ICON},
            .device-icon .tab-btn{DEVICE_ICON},
            .device-icon .device-type{DEVICE_ICON},
            .device-icon .drawer-title-container{DEVICE_ICON},
            .device-icon .combobox-list{DEVICE_ICON},
            .client-icon .tab-btn[data-name="batch-switch"]{DEVICE_ICON},
            .client-icon .tab-btn[data-name="batch-olt"]{DEVICE_ICON},
            .client-icon .tab-btn[data-name="batch-ap"]{DEVICE_ICON},
            .client-icon .tab-btn[data-name="batch-active"]{DEVICE_ICON},
            .client-icon .tab-btn{DEVICE_ICON},
            .client-icon .device-type{DEVICE_ICON},
            .client-icon .drawer-title-container{DEVICE_ICON},
            .client-icon .combobox-list{DEVICE_ICON},
            #global-combobox-options .tab-btn[data-name="batch-switch"]{DEVICE_ICON},
            #global-combobox-options .tab-btn[data-name="batch-olt"]{DEVICE_ICON},
            #global-combobox-options .tab-btn[data-name="batch-ap"]{DEVICE_ICON},
            #global-combobox-options .tab-btn[data-name="batch-active"]{DEVICE_ICON},
            #global-combobox-options .tab-btn{DEVICE_ICON},
            #global-combobox-options .device-type{DEVICE_ICON},
            #global-combobox-options .drawer-title-container{DEVICE_ICON},
            #global-combobox-options .combobox-list{DEVICE_ICON},
            #customer-combobox-options .tab-btn[data-name="batch-switch"]{DEVICE_ICON},
            #customer-combobox-options .tab-btn[data-name="batch-olt"]{DEVICE_ICON},
            #customer-combobox-options .tab-btn[data-name="batch-ap"]{DEVICE_ICON},
            #customer-combobox-options .tab-btn[data-name="batch-active"]{DEVICE_ICON},
            #customer-combobox-options .tab-btn{DEVICE_ICON},
            #customer-combobox-options .device-type{DEVICE_ICON},
            #customer-combobox-options .drawer-title-container{DEVICE_ICON},
            #customer-combobox-options .combobox-list{DEVICE_ICON},
            .statistics-charts-container .tab-btn[data-name="batch-switch"]{DEVICE_ICON},
            .statistics-charts-container .tab-btn[data-name="batch-olt"]{DEVICE_ICON},
            .statistics-charts-container .tab-btn[data-name="batch-ap"]{DEVICE_ICON},
            .statistics-charts-container .tab-btn[data-name="batch-active"]{DEVICE_ICON},
            .statistics-charts-container .tab-btn{DEVICE_ICON},
            .statistics-charts-container .device-type{DEVICE_ICON},
            .statistics-charts-container .drawer-title-container{DEVICE_ICON},
            .statistics-charts-container .combobox-list{DEVICE_ICON},
            .devicesList-item-device-icon .tab-btn[data-name="batch-switch"]{DEVICE_ICON},
            .devicesList-item-device-icon .tab-btn[data-name="batch-olt"]{DEVICE_ICON},
            .devicesList-item-device-icon .tab-btn[data-name="batch-ap"]{DEVICE_ICON},
            .devicesList-item-device-icon .tab-btn[data-name="batch-active"]{DEVICE_ICON},
            .devicesList-item-device-icon .tab-btn{DEVICE_ICON},
            .devicesList-item-device-icon .device-type{DEVICE_ICON},
            .devicesList-item-device-icon .drawer-title-container{DEVICE_ICON},
            .devicesList-item-device-icon .combobox-list{DEVICE_ICON},
            .detect-aps-list-container .tab-btn[data-name="batch-switch"]{DEVICE_ICON},
            .detect-aps-list-container .tab-btn[data-name="batch-olt"]{DEVICE_ICON},
            .detect-aps-list-container .tab-btn[data-name="batch-ap"]{DEVICE_ICON},
            .detect-aps-list-container .tab-btn[data-name="batch-active"]{DEVICE_ICON},
            .detect-aps-list-container .tab-btn{DEVICE_ICON},
            .detect-aps-list-container .device-type{DEVICE_ICON},
            .detect-aps-list-container .drawer-title-container{DEVICE_ICON},
            .detect-aps-list-container .combobox-list{DEVICE_ICON},
            .vue-device-icon .tab-btn[data-name="batch-switch"]{DEVICE_ICON},
            .vue-device-icon .tab-btn[data-name="batch-olt"]{DEVICE_ICON},
            .vue-device-icon .tab-btn[data-name="batch-ap"]{DEVICE_ICON},
            .vue-device-icon .tab-btn[data-name="batch-active"]{DEVICE_ICON},
            .vue-device-icon .tab-btn{DEVICE_ICON},
            .vue-device-icon .device-type{DEVICE_ICON},
            .vue-device-icon .drawer-title-container{DEVICE_ICON},
            .vue-device-icon .combobox-list{DEVICE_ICON} {
                background: {ICON_URL} no-repeat;
                background-size: contain;
            }
            
            .virtual-eap-list .td-content .device-type.ap.virtual {VIRTUAL_DEVICE_ICON},
            .virtual-eap-list .td-content .tab-btn.ap.virtual {VIRTUAL_DEVICE_ICON},
            .aps-grid .td-content .device-type.ap.virtual {VIRTUAL_DEVICE_ICON},
            .aps-grid .td-content .tab-btn.ap.virtual {VIRTUAL_DEVICE_ICON},
            .drawer-container.shown .device-type.ap.virtual {VIRTUAL_DEVICE_ICON},
            .drawer-container.shown .tab-btn.ap.virtual {VIRTUAL_DEVICE_ICON} {
                background: {VIRTUAL_ICON_URL} no-repeat;
                background-size: contain;
            }
            
            
            .statistics-device-combo .combobox-text{DEVICE_BEFORE_ICON} {
                background: {ICON_URL} no-repeat;
                background-size: contain;
            }
            
            .statistics-charts-container .charts-icons{DEVICE_ONLY_ICON},
            .vue-device-icon .device-icon{DEVICE_ONLY_ICON} {
                background: {ICON_URL} no-repeat;
                background-size: contain;
            }
            
            #devices-search-result-list .devicesList-item-container .devicesList-item-content{SEARCH_ICON} {
                background: {ICON_URL} no-repeat;
                background-size: contain;
            }
            
            .card div.device-list.devicesList-container .devicesList-item-content{LOGO_ICON} {
                background: {ICON_URL} no-repeat;
                background-size: contain;
            }
            
            .card div.device-list .repeat-item {REPEAT_EAP_ICON} {
                background: {ICON_URL} no-repeat;
                background-size: contain;
            }            
            `,d="",h=[],g=n.imgPathMap.smallImg,f=n.imgPathMap.heatmapImg,e=(o.each(n.imgInfos,function(e,t){var i=t.type,a=t.imgName;if(h.includes(a))return!0;h.push(a);var r=`url('${g}/${a}.png')`,s=`url('${f}/${a}.png')`;t.imgBucketPathMap&&(r=`url('${t.imgBucketPathMap.smallImgBucketPathForWeb}')`,s=`url('${t.imgBucketPathMap.heatmapImgBucketPathForWeb}')`);var t=`.${a} .icon`,n=`.${i}.${a}:before`,o=`.${i}.`+a,u=`.${i}.${a} .logo-container span.icon`,l=`.${a} .logo-container span.icon`,c=`.${a} .eap-icon`;d+=p.replaceAll("{DEVICE_ICON}",`.${i}.${a} .icon`).replaceAll("{VIRTUAL_DEVICE_ICON}",t).replaceAll("{DEVICE_BEFORE_ICON}",n).replaceAll("{DEVICE_ONLY_ICON}",o).replaceAll("{SEARCH_ICON}",u).replaceAll("{LOGO_ICON}",l).replaceAll("{REPEAT_EAP_ICON}",c).replaceAll("{ICON_URL}",r).replaceAll("{VIRTUAL_ICON_URL}",s)}),document.createElement("style"));e.type="text/css",e.appendChild(document.createTextNode(d)),document.body.appendChild(e)},o.su.Service.call(this)}return o.su.inherit(o.su.Service,e),e})(jQuery),(l=>{function e(e){e=l.extend(!0,{fields:null,feedback:!0,validator:null,convert:null,serialize:null,params:{read:{},update:{},create:{},remove:{}}},e);var i=this;this.name=e.name,this._name=e.name,this.feedback=e.feedback,this.fields=e.fields,this.validator=e.validator,this.data=[],this.convert=e.convert,this.serialize=e.serialize,this.params=e.params,this.dataNull=e.dataNull,l.su.Observable.call(this),e.proxy&&(e.proxy.isProxy?this.proxy=e.proxy:(e=l.extend(!0,{triggerEvent:!0,host:i},e.proxy),this.proxy=new l.su.Proxy(e)),this.proxy.addListener("ev_load",function(e,t){i.loadData(t,!0),i.record()})),t.call(this)}function r(e){var t,e=new l.su.Model.DataField(e),i=this;return e.validator&&(t=e.validator,e.validator=function(){var e=Array.prototype.slice.call(arguments,0);return e.push(i),t.apply(this,e)}),e}var t;l.su=l.su||{},l.su.Model=(l.su.inherit(l.su.Observable,e),t=function(){for(var a=this,e=0,t=this.fields.length;e<t;e++)this.data[e]=r.call(this,this.fields[e]),this[this.fields[e].name]=this.data[e],this.data[e].on("ev_data_change",function(e,t,i){"_value"===t.type&&a.trigger("ev_data_change",[t,i,a])})},e.prototype.modelConvert=function(e){var t={};e=e||{},null!==this.convert&&(e=this.convert(e)||{});for(var i=0,a=this.data.length;i<a;i++){var r,s=this.data[i];s.mapping&&(r=e[s.mapping],t[s.name]=void 0===r?s.defaultValue:r,null!==s.convert)&&null!=r&&(t[s.name]=s.convert(r,e))}return t},e.prototype.modelSerialize=function(e){var t={};if(!e)return{};for(var i=0,a=this.data.length;i<a;i++){var r,s=this.data[i];s.name&&(r=e[s.name],null!==s.serialize&&void 0!==r&&(r=s.serialize(r,e)),t[s.mapping]=r)}return t=null!==this.serialize?this.serialize(t):t},e.prototype.loadData=function(e,t,i){var a=l.su.clone(e);t&&(e=this.modelConvert(e));for(var r=0,s=this.data.length;r<s;r++){var n=e[this.data[r].name];i&&void 0===n&&(n=this.data[r].defaultValue),this.data[r].setValue(n),this.data[r].setValid(!0)}this.trigger("ev_loaded",a)},e.prototype.replaceData=function(e,t){t&&(e=this.modelConvert(e));for(var i=0,a=this.data.length;i<a;i++){var r=e[this.data[i].name];void 0!==r&&this.data[i].setValue(r)}this.trigger("ev_loaded")},e.prototype.getData=function(e){for(var t,i,a={},r=0,s=this.fields.length;r<s;r++)"submit"===e&&this.data[r].disabled||(t=this.data[r].getValue(),"submit"===e&&this.dataNull&&""===t&&(t=null),(i={})[this.data[r].name]=t,l.extend(a,i));return a},e.prototype.validate=function(e){for(var t=e&&e.returnDetail,i=e&&e.validateAll,a=[],r=!0,s=!0,n=0,o=this.fields.length;n<o;n++){var u=this.data[n];if(!0!==(r=u.validate())){if(this.trigger("ev_validate_change",[{result:!1,field:u.getName()}]),!i)return t?{result:!1,field:u.getName()}:r;a.push(u.getName()),s=!1}}return i&&!0!==s?t?{result:!1,field:a}:s:l.isFunction(this.validator)?(r=this.validator.call(this),this.trigger("ev_validate_change",[{result:"boolean"===l.type(r)?r:r.result,field:r.field||null}]),t?{result:!1,field:u.getName()}:r):(this.trigger("ev_validate_change",[{result:!0}]),t?{result:!0,field:u.getName()}:r)},e.prototype.beforeLoad=function(e){var a=this,r=((e=e||{})&&e.ajax&&e.ajax.type||((e=e||{}).ajax=e.ajax||{},e.ajax.type="GET",e.ajax.contentType="application/x-www-form-urlencoded",e.url&&(e.ajax.url=e.url)),e.params=e.params||{},e.fail),i=(e.fail=function(e,t,i){r&&r(e,t,i),i&&l(a).trigger("ev_model_load_error",i)},e.error);return e.error=function(e,t){i&&i(e,t),l(a).trigger("ev_model_ajax_error",[e,t])},e},e.prototype.load=function(e){e=this.beforeLoad(e);this.proxy.read(e)},e.prototype.getProxy=function(){return this.proxy},e.prototype.beforeSubmit=function(e,a){var r=this;return{ajax:{url:a.url||void 0,contentType:"application/x-www-form-urlencoded"},data:r.modelSerialize(e),params:a.params||{},success:function(e,t){e.model&&t.data&&(r.loadData(e.model,!0),r.record()),a.success&&a.success(e.model,t),r.fireEvent("ev_model_submit")},fail:function(e,t,i){e.model&&t.data&&(r.loadData(e.model,!0),r.record()),i&&l(r).trigger("ev_model_submit_error",i),a.fail&&a.fail(t,i,errTxt=l.su.getErrTxt(i))},error:function(e,t){a.error&&a.error(e,t),l(r).trigger("ev_model_ajax_error",[e,t])}}},e.prototype.submit=function(e,t){if(!0===(t=!1!==t)&&!0!==this.validate())return null;var t=this.getData("submit");e=e||{},t&&(t=this.beforeSubmit(t,e),this.proxy.update(t))},e.prototype.record=function(){for(var e=0,t=this.fields.length;e<t;e++)this.data[e].record();return this},e.prototype.reset=function(e){for(var t=0,i=this.fields.length;t<i;t++)this.data[t].reset(e),this.data[t].setValid(!0);return this},e.prototype.resetDefault=function(){for(var e=0,t=this.fields.length;e<t;e++)this.data[e].resetDefault(),this.data[e].setValid(!0);return this},e.prototype.isDirty=function(){for(var e=0,t=this.fields.length;e<t;e++)if(this.data[e].isDirty())return!0;return!1},e.prototype.isEmpty=function(){for(var e,t=0,i=this.fields.length;t<i;t++)if(e=this.data[t]._value,!this.data[t].skipEmptyJudge&&(""===e||null===e||!1===e))return!0;return!1},e.prototype.getField=function(e){return this[e]},e.prototype.getFieldNameByIndex=function(e){return this.fields.length>=e?this.data[i].name:null},e.prototype.getSize=function(e){return this.fields.length},e.prototype.getFields=function(){return this.data},e)})(jQuery),(r=>{function e(t){r.su.Observable.call(this),this.customLenText=t&&t.minLenText&&t.maxLenText;var t=r.extend({name:"",mapping:null,defaultValue:null,disabled:!1,readOnly:!1,autoTrim:!1,stripZwj:!1,valueType:null,valid:!0,validated:!1,isDetect:!0,format:null,allowBlank:!0,xss:!1,blankText:r.su.CHAR.VTYPETEXT.BLANKTEXT,maxLenText:r.su.CHAR.VTYPETEXT.LEN_MAX,minLenText:r.su.CHAR.VTYPETEXT.LEN_MIN,vtype:null,vtypeText:null,validator:null,maxLength:-1,minLength:-1,skipEmptyJudge:!1,checkCharLength:!1,triggerInvalid:!0,skipBlankCheck:!1,checkUTF8StrBytes:!1},t),i=this;if(this.name=t.name,this._name=t.name,this.mapping=t.mapping||this.name,this.defaultValue=t.defaultValue,this.convert=t.convert||null,this.serialize=t.serialize||null,this.valueType=t.valueType,this.allowBlank=t.allowBlank,this.xss=t.xss,this.autoTrim=t.autoTrim,this.stripZwj=t.stripZwj,this.blankText=t.blankText,this.maxLenText=t.maxLenText,this.minLenText=t.minLenText,this.disabled=t.disabled,this.valid=t.valid,this._realValid=t.valid,this.maxLength=t.maxLength,this.minLength=t.minLength,this.skipEmptyJudge=t.skipEmptyJudge,this.checkCharLength=t.checkCharLength,this.triggerInvalid=t.triggerInvalid,this.skipBlankCheck=t.skipBlankCheck,this.checkUTF8StrBytes=t.checkUTF8StrBytes,this.vtype=r.isArray(t.vtype)?t.vtype:[t.vtype],t.validator){if(!r.isFunction(t.validator))throw new Error("Error in DataField: validator must be a function.");this.validator=t.validator}if(this._value=this._formatType(t.defaultValue),this._valueBackup=this._formatType(t.defaultValue),t.set&&(this.set=function(){var e=Array.prototype.slice.call(arguments,0,this.mapping.length);this.val(t.set.apply(this,e))}),t.get){if(!r.isFunction(t.get))throw new Error("Error in DataField: options.get must be a function, if options.get has been defined and mapping is a string.");this.get=function(){var e={};return e[i.mapping]=t.get.call(i,i._value),e}}}r.su.Model.DataField=(r.su.inherit(r.su.Observable,e),e.prototype.getName=function(){return this.name},e.prototype.val=function(e){return void 0!==e&&e!==this._value&&(this._value=this._formatType(e)),this._value},e.prototype._formatType=function(e){var t;return null==e||""===e?e:"number"===this.valueType?(t=parseFloat(e,10),(!/^\d+$/.test(e)||!r.isNumeric(t))&&(isNaN(t)||(t+"").length!==(e+"").length)?e:t):"string"===this.valueType?e.toString():"boolean"===this.valueType?"true"===e||"number"==typeof e&&0<e||"string"==typeof e&&0<parseInt(e)||"false"!==e&&0!==e&&"0"!==e&&e:e},e.prototype.setValue=function(e){var t=e;!r.isArray(e)&&"object"!==r.type(e)||(t=JSON.parse(JSON.stringify(e))),this._set("_value",{oldValue:this.getValue(),value:t})},e.prototype.setNumRange=function(e,t){this.vtype[0].min=e,this.vtype[0].max=t},e.prototype.setAllowBlank=function(e){this.allowBlank=e},e.prototype.setValidator=function(e){this.validator=e},e.prototype.getValue=function(e){var t=this._value;return!r.isArray(this._value)&&"object"!==r.type(t)||(t=JSON.parse(JSON.stringify(this._value))),t=e&&null!==this.serialize&&void 0!==t?this.serialize(t):t},e.prototype.getValueBackup=function(){return this._valueBackup},e.prototype.getData=function(){var e={};return e[this.mapping]=this._value,e},e.prototype.record=function(e){return this._valueBackup=void 0===e?this._value:e,this},e.prototype.isDirty=function(){return!(r.type(this._value)===r.type(this._valueBackup)&&("object"===r.type(this._value)||"array"===r.type(this._value)?this._value.equals(this._valueBackup):"number"===r.type(this._value)&&isNaN(this._value)&&isNaN(this._valueBackup)||this._value===this._valueBackup))},e.prototype.getBackupValue=function(){return this._valueBackup},e.prototype.reset=function(e){this.setValue(e||null===this._valueBackup?this.defaultValue:this._valueBackup)},e.prototype.resetDefault=function(){this._valueBackup=this._formatType(this.defaultValue),this.reset()},e.prototype.lengthCheck=function(){if("string"==typeof this._value){var e=0,e=this.checkCharLength?this._value.length:this.checkUTF8StrBytes?r.su.sizeof(this._value):r.su.len(this._value);if(-1!=this.minLength&&e<this.minLength)return!1;if(-1!=this.maxLength&&e>this.maxLength)return!1}return!0},e.prototype.vtypeCheck=function(){var e=!0;if(!(t=this.vtype))return!0;var t=r.isArray(t)?t:[t],a=r.su.serviceManager.get("vtype");for(i=0,len=t.length;i<len;i++)if(t[i]&&!0!==(e=a.validate(this._value,t[i]))){t[i],this.valid=!1;break}return e},e.prototype.setVtype=function(e){this.vtype=r.isArray(e)?e:[e]},e.prototype.validatorCheck=function(){return!this.validator||this.validator(this._value)},e.prototype.containXSS=function(){var e=this._value;return/<script>(.*?)<\/script>/.test(e)||/src=\'(.*?)\'/.test(e)||/src=\"(.*?)\"/.test(e)||/<\/script>/.test(e)||/<script(.*?)>/.test(e)||/eval\((.*?)\)/.test(e)||/expression\((.*?)\)/.test(e)||/javascript:/.test(e)||/vbscript:/.test(e)||/onload(.*?)=/.test(e)||/<iframe>(.*?)<\/iframe>/.test(e)||/<\/iframe>/.test(e)||/<iframe(.*?)>/.test(e)},e.prototype.validate=function(e){if(e&&r.extend(this,e),this.disabled)this.setValid(!0);else{if(this.autoTrim&&"string"===r.type(this._value)&&this._value.trim()!==this._value&&this.setValue(this._value.trim()),this.stripZwj&&"string"===r.type(this._value)&&this._value.replace(/[\u200b-\u200f\uFEFF\u202a-\u202e]/g,"")!==this._value&&this.setValue(this._value.replace(/[\u200b-\u200f\uFEFF\u202a-\u202e]/g,"")),!this.skipBlankCheck&&(""===this._value||null==this._value||r.isArray(this._value)&&0===this._value.length))return!0!==this.allowBlank?(this.setValid(!1,this.blankText),this._realValid=!1):(this.setValid(!0),this._realValid=!0);if(!this.lengthCheck())return e=-1==this.minLength||-1==this.maxLength||this.customLenText?-1!=this.minLength?this.minLenText.replace("%min",this.minLength):this.maxLenText.replace("%max",this.maxLength):r.su.CHAR.VTYPETEXT.LEN_MIN_MAX.replace("%min",this.minLength).replace("%max",this.maxLength),this.setValid(!1,e),this._realValid=!1;e=this.vtypeCheck();if(!0!==e)return this.setValid(!1,this.vtypeText||e),this._realValid=!1;e=this.validatorCheck();if(!0!==e)return this.setValid(!1,e),this._realValid=!1;if(this.xss&&this.containXSS())return this.setValid(!1,r.su.CHAR.VTYPETEXT.XSS),this._realValid=!1;this.setValid(!0),this._realValid=!0}return!0},e.prototype.disable=function(){this._set("disabled",!0),this.setValid(!0)},e.prototype.enable=function(){this._set("disabled",!1),!0!==this._realValid&&this.setValid(!0)},e.prototype.setValid=function(e,t){(this.triggerInvalid||e)&&this._set("valid",e||t),this.triggerInvalid=!0},e.prototype._set=function(e,t){"_value"===e&&t.hasOwnProperty("value")?(t.value=this._formatType(t.value),this[e]=t.value):this[e]=t,this.trigger("ev_data_change",[{"type":e,"value":t},this])},e)})(jQuery),(f=>{let v=(e,t)=>{(e.url||t).includes(f.su.url.openApi)&&(e.headers["Omada-Request-Source"]="cloudAccess"===App.CLOUD_TYPE?"web-remote":"web-local")};function m(){"cloudBase"===App.CLOUD_TYPE&&f.su.CHAR.MAIN.REQUEST_TIMEOUT_CLOUD?f.su.moduleManager.get("main").showError(f.su.CHAR.MAIN.REQUEST_TIMEOUT_CLOUD):f.su.CHAR.MAIN.REQUEST_TIMEOUT_LOCAL?f.su.moduleManager.get("main").showError(f.su.CHAR.MAIN.REQUEST_TIMEOUT_LOCAL):f.su.CHAR.MAIN.REQUEST_TIMEOUT&&f.su.moduleManager.get("main").showError(f.su.CHAR.MAIN.REQUEST_TIMEOUT)}function t(e,t){"function"!=typeof t||(t?-1<f.inArray(t,e):e&&e.length)||e.push(t)}function E(e,t,i){for(var a=e.length,r=0;r<a;r++)t=e[r].call(this,t,i);return t}function T(e,t,i){var a=new FormData;return e&&a.append("data",JSON.stringify(e)),t&&(i?a.append("file",t,i):a.append("file",t)),a}function p(e,t){var i,a="unknown";(e=e.getResponseHeader("content-disposition"))&&(i=e.match(/filename=(.*);?/i)&&e.match(/filename=(.*);?/i)[1],a=(e=e.match(/filename\*=(.*)/i)&&e.match(/filename\*=(.*)/i)[1])?decodeURIComponent(e.substring(6)):decodeURIComponent(i)),window.navigator.msSaveOrOpenBlob?navigator.msSaveBlob(t,a):(e=document.createElement("a"),t.type="application/octet-stream",i=URL.createObjectURL(t),e.href=i,e.download=a,e.click(),window.URL.revokeObjectURL(i),e.remove())}function e(e){f.su.Observable.call(this),y=[],r=[],_=[],this.ajax=f.extend({},i,e),e.readFilter&&(t(y,e.readFilter),delete e.readFilter),e.writeFilter&&(t(r,e.writeFilter),delete e.writeFilter),e.failHandler&&(t(_,e.failHandler),delete e.failHandler)}var i,y,r,_;f.su.Connection=(i={url:null,async:!0,timeout:3e4,type:"POST",dataType:"json",cache:!1,contentType:"application/json; charset=UTF-8"},y=[],r=[],_=[],f.su.inherit(f.su.Observable,e),e.prototype.upload=function(r){var a,s,n,t,o,u,e,l=this,i=f.su.handleUrl(r.url||this.ajax.url),i=f.appUtils.addControllerId(i),c=r.data,p=r.resultFileIdName,d=f.Deferred(),h=f.Deferred(),g=f.Deferred();return!(!r.fileId&&!r.blob)&&(e={},"cloudAccess"!==App.CLOUD_TYPE&&("cloudBase"!==App.CLOUD_TYPE||App.WITHOUT_SEPARATION)||(e={xhrFields:{withCredentials:!0},crossDomain:!0}),(u=f.extend({},this.ajax,e,{preventDefaultFail:r.preventDefaultFail,preventDefaultMask:r.preventDefaultMask,preventDefaultError:r.preventDefaultError},{url:i,contentType:!1,processData:!1})).headers={"Csrf-Token":f.appUtils.getToken()},App.SITE_PROFILE_EDITING&&(u.timeout=12e5),3e4!==this.ajax.timeout&&"cloudAccess"===App.CLOUD_TYPE&&(u.headers["Omada-Remote-Timeout"]=this.ajax.timeout/1e3),v(u),(e=new FileReader).onload=function(){var e=CryptoJS.lib.WordArray.create(this.result),e=CryptoJS.MD5(e).toString();d.resolve(e)},n=(i=r).blob||f("#"+i.fileId+' input[type="file"]').prop("files")[0],p?e.readAsArrayBuffer(n):h.resolve(),f.when(d).done(function(e){c=f.extend({},c,{md5:e}),s=T(c),u.data=s,t=f.ajax(u).done(function(e,t,i){e=E.call(this,y,e),h.resolve(e,t,i)}).fail(function(e,t){h.reject(e,t)})}).fail(function(){g.reject()}),f.when(h).done(function(e,t,i){var a=void 0!==e&&!0!==l.successJudge(e,u);e&&e.result&&!!e.result[p]||!1||a?g.resolve(e,t,i):(s=T(c,n,r.fileName),u.data=s,o=f.ajax(u).done(function(e,t,i){e=E.call(this,y,e),g.resolve(e,t,i)}).fail(function(e,t){g.reject(e,t)}))}).fail(function(e,t){g.reject(e,t)}),f.when(g).done(function(e,t,i){!0===(a=l.successJudge(e,u))?r.success&&r.success(e,t,i):(E.call(this,_,e,u),r.fail&&r.fail(e,a,t,i))}).fail(function(e,t){!u.preventDefaultError&&"timeout"===t&&f.su.moduleManager.get("main")&&m(),r.error&&r.error(e,t)}),(i=g.promise()).abort=function(){d.reject(),h.reject(),g.reject(),t&&t.abort(),o&&o.abort()},i)},e.prototype.request=function(e,o,u,i){var l,c=this,p=f.extend({},this.ajax,e),a=[];if(App.SITE_PROFILE_EDITING&&(p.timeout=12e5),p.data=E.call(this,r,e.data||{},p),p.idempotent||c.options.idempotent){let e=sessionStorage.getItem("xTransaction");e=e||uuidv4(),sessionStorage.setItem("xTransaction",e),p.data.idempotentKey=e}if("application/json; charset=UTF-8"!==p.contentType||f.isEmptyObject(p.data)||(p.data="GET"===p.type?p.data:JSON.stringify(p.data)),p.headers={"Csrf-Token":f.appUtils.getToken()},3e4!==p.timeout&&"cloudAccess"===App.CLOUD_TYPE&&(p.headers["Omada-Remote-Timeout"]=p.timeout/1e3),!f.isArray(p.url))return v(p),f.ajax(p).done(function(e,t,i){e=E.call(this,y,e),!0===(l=c.successJudge(e,p))?o&&o(e,t,i):(E.call(this,_,e,p),u&&u(e,l,t,i))}).fail(function(e,t){i&&i(e,t)});url=f.extend(!0,[],p.url),f.each(p.url,function(e,t){p.url=t,v(p),a.push(f.ajax(p))}),f.when.apply(null,a).done(function(){for(var e,t,i,a=Array.prototype.slice.call(arguments),r=[],s=0,n=a.length;s<n;s++){if(e=a[s][0],t=a[s][1],i=a[s][2],e=E.call(this,y,e),!0!==(l=c.successJudge(e,p)))return E.call(this,_,e,p),void(u&&u(e,l,t,i));r.push(e)}o&&o(r)}).fail(function(e,t){i&&i(e,t)})},e.prototype.promise=function(e){var o,u=this,l=f.extend({},this.ajax,e),c=f.Deferred(),i=[];return l.data=E.call(this,r,e.data||{},l),"application/json; charset=UTF-8"!==l.contentType||f.isEmptyObject(l.data)||(l.data="GET"===l.type?l.data:JSON.stringify(l.data)),l.headers={"Csrf-Token":f.appUtils.getToken()},App.SITE_PROFILE_EDITING&&(l.timeout=12e5),3e4!==this.ajax.timeout&&"cloudAccess"===App.CLOUD_TYPE&&(l.headers["Omada-Remote-Timeout"]=this.ajax.timeout/1e3),f.isArray(l.url)?(url=f.extend(!0,[],l.url),f.each(l.url,function(e,t){l.url=t,v(l),i.push(f.ajax(l))}),f.when.apply(null,i).done(function(){for(var e,t,i,a=Array.prototype.slice.call(arguments),r=[],s=0,n=a.length;s<n;s++){if(e=a[s][0],t=a[s][1],i=a[s][2],e=E.call(this,y,e),!0!==(o=u.successJudge(e,l)))return E.call(this,_,e,l),void c.reject(e,o,t,i);r.push(e)}c.resolve(r)}).fail(function(e,t){l.preventDefaultError||"timeout"!==t||m(),c.reject(e,t)})):(v(l),f.ajax(l).done(function(e,t,i){e=E.call(this,y,e),!0===(o=u.successJudge(e,l))?c.resolve(e,t,i):(E.call(this,_,e,l),c.reject(e,o,t,i))}).fail(function(e,t){!l.preventDefaultError&&"timeout"===t&&f.su.moduleManager.get("main")&&m(),c.reject(e,t)})),c.promise()},e.prototype.downloadStatic=function(){var e,t=this.ajax.url;"ie"===f.su.getBrowseVersion().browse?((e=document.createElement("a")).href=t,document.body.appendChild(e),e.click(),document.body.removeChild(e)):setTimeout(function(){window.location.href=t},100)},e.prototype.download=function(a){var e=f.su.handleUrl(a.url||this.ajax.url),e=f.appUtils.addControllerId(e),t=a.method,r=a.callback,s=a.complete,n=a.fail,o=a.error,i=a.data,u=a.maxErrorLength||1e4,l=this,c=new XMLHttpRequest;return c.open(t,e,!0),c.setRequestHeader("Csrf-Token",f.appUtils.getToken()),c.setRequestHeader("Cache-Control","max-age=0"),"cloudAccess"!==App.CLOUD_TYPE&&("cloudBase"!==App.CLOUD_TYPE||App.WITHOUT_SEPARATION)&&"POST"!==t||(c.withCredentials=!0),c.responseType="blob",a.ajax&&f.isNumeric(a.ajax.timeout)&&(c.timeout=a.ajax.timeout,"cloudAccess"===App.CLOUD_TYPE)&&c.setRequestHeader("Omada-Remote-Timeout",a.ajax.timeout/1e3),e.includes(f.su.url.openApi)&&c.setRequestHeader("Omada-Request-Source","cloudAccess"===App.CLOUD_TYPE?"web-remote":"web-local"),c.ontimeout=function(){f.su.moduleManager.get("main").showError(f.su.CHAR.MAIN.REQUEST_TIMEOUT),o&&o()},c.onload=function(e){var t,i;200!==this.status?o&&o():(t=this.response,"function"==typeof r&&r(t),t.size>=u?p(c,t):((i=new FileReader).onload=function(){try{var e=JSON.parse(this.result);!0!==l.successJudge(e,a)&&(E.call(this,_,e,a),n)&&n(e)}catch(e){p(c,t)}},i.readAsText(t))),s&&s()},"POST"===t?c.send(JSON.stringify(i)):c.send(),c},e)})(jQuery),(c=>{function p(e){return e=this.root?e[this.root]:e}function d(e,t){var i,a=t.ajax&&t.ajax.url||t.url||this.options.ajax.url,r=("function"==typeof(a="object"==typeof a?a[e]:a)&&(a=a.call(this)),a=c.su.handleUrl(a),c.extend(!0,{},this.options.params[e],t.params)),s="";for(i in!0===/\?/.test(a)&&(e=(e=>{var t=e.split("?")[1].split("&"),i={};if(!t||""===t[0])return{};for(var a=0,r=t.length;a<r;a++)i[t[a].split("=")[0]]=t[a].split("=")[1];return i})(a),r=c.extend(!0,e,r),a=a.split("?")[0]),r)r.hasOwnProperty(i)&&(-1===s.indexOf("?")?s+="?":s+="&",s=(s=s+i+"=")+r[i]);return a+s}function i(){for(var e in r)if(r.hasOwnProperty(e)&&void 0===r[e].success)return;for(var t=0,i=s.length;t<i;t++)s[t]&&s[t].call(null,r);a.fireEvent("ev_load",[r]),r={},s=[]}function e(e){e.url&&(e.ajax=e.ajax||{},e.ajax.url=e.url,delete e.url),e.data&&(e.ajax=e.ajax||{},e.ajax.data=e.data,delete e.data),this.options=c.extend(!0,{},t,e),c.su.Connection.call(this,c.extend({},this.options.ajax,{readFilter:this.options.readFilter,writeFilter:this.options.writeFilter,failHandler:this.options.failHandler,errorHandler:this.options.errorHandler})),this.successJudge=this.options.successJudge,this.isProxy=!0,this.host=e.host,this.root=void 0===this.options.root?n:this.options.root}var a,r,s,t,n,h;c.su.Proxy=(t={ajax:{url:null},params:{create:{},update:{},read:{},remove:{}},packData:function(e){return e},successJudge:function(e){if("object"===c.type(e))return void 0===e.success||e.success},readFilter:function(e){return e},writeFilter:function(e){return e},operation:"multi",success:function(){},fail:function(){},error:function(){}},n="data",r={},s=[],h={init:function(e){a=this,c.isArray(e)?s=s.concat(e):s.push(e)},addKey:function(e){r[e]={}},success:function(e,t){r[e].success=!0,r[e].data=t,i()},fail:function(e,t){r[e].success=!1,r[e].data=t,i()}},c.su.inherit(c.su.Connection,e),e.prototype.op=function(e,a,r){var i,s={},n=this,o={create:"model",update:"model",remove:"oldModel"}[e];if(this.options.opType=e,this.options.ajax.url=(this.options[e]||this.options.ajax).url,a.ajax.type=a.ajax.type||(this.options[e]||this.options.ajax).type,!a)return!1;c.extend(s,a.ajax),s.preventDefaultFail=a.preventDefaultFail,s.preventDefaultMask=a.preventDefaultMask,s.preventDefaultSuccess=a.preventDefaultSuccess,s.preventDefaultError=a.preventDefaultError,s.idempotent=a.idempotent,s.url=d.call(this,e,a);function t(){s.data=this.options.packData.call(this,a||{}),this.request(s,function(e){var t=p.call(n,e);n.options.compareResult&&(t=n.options.compareResult(!0,t,s.data)),a.success&&a.success(t,e),r&&r(t,e)},function(e,t){var i=p.call(n,e);n.options.compareResult&&(i=n.options.compareResult(!1,i,s.data)),a.fail&&a.fail(i,e,t),r&&r(i,e,t)},function(e,t){a.error&&a.error(e,t)})}if("multi"===this.options.operation)t.call(this);else if("single"===this.options.operation)if(1===i.length)t.call(this);else{h.init.call(n,[a.success,r]);for(var u=0,l=i.length;u<l;u++)(e=>{var t=i[e].key;delete s.data,s.data={},s.data[i[e].key]=i[e][o],h.addKey(t),n.request(s,function(e){e=p.call(n,e);h.success(t,e)},function(e){e=p.call(n,e);h.fail(t,e)},function(){h.fail(t,i[e][o])})})(u)}},e.prototype.create=function(e,t){this.op("create",e,t)},e.prototype.update=function(e,t){this.op("update",e,t)},e.prototype.read=function(r,s){var i={},a=this,n={};this.options.opType="read",this.options.ajax.url=(this.options.read||this.options.ajax).url,this.options.ajax.type=this.options.read?this.options.read.type:"GET",r=r||{},c.extend(i,{data:this.options.packData.call(this,r)},r.ajax),c.isArray(this.options.ajax.url)?(i.url=[],c.each(this.options.ajax.url,function(e,t){n.url=t,i.url.push(d.call(a,"read",n))})):i.url=d.call(this,"read",r),i.preventDefaultSuccess=r.preventDefaultSuccess,i.preventDefaultFail=r.preventDefaultFail,i.preventDefaultMask=r.preventDefaultMask,this.request(i,function(e){var i,t;c.isArray(e)?(t=!0,i=[],c.each(e,function(e,t){i.push(p.call(a,t))})):(t=!1,i=p.call(a,e)),a.fireEvent("ev_load",[i,t]),r.success&&r.success(i,e),s&&s()},function(e,t,i,a){r.fail&&r.fail(e,t,i,a),s&&s()},function(e,t){r.error&&r.error(e,t),s&&s()})},e.prototype.readPromise=function(e,t){var i={},a=this,r={};return this.options.opType="read",this.options.ajax.url=(this.options.read||this.options.ajax).url,this.options.ajax.type=this.options.read?this.options.read.type:"GET",c.extend(i,{data:this.options.packData.call(this,e=e||{})},e.ajax),c.isArray(this.options.ajax.url)?(i.url=[],c.each(this.options.ajax.url,function(e,t){r.url=t,i.url.push(d.call(a,"read",r))})):i.url=d.call(this,"read",e),i.preventDefaultSuccess=e.preventDefaultSuccess,i.preventDefaultFail=e.preventDefaultFail,i.preventDefaultMask=e.preventDefaultMask,this.promise(i)},e.prototype.remove=function(e,t){this.op("remove",e,t)},e.prototype.setUrl=function(e,t){this.options.ajax.url=this.ajax.url=t},e.setup=function(e){c.extend(!0,t,e),"root"in e&&(n=e.root)},e)})(jQuery),(g=>{g.su.Store=function(e){var t,r=this,e=g.extend(!0,{},{fields:null,xtype:"store",autoLoad:!1,autoReload:!0,tag:"store",global:!1,keyProperty:"id",updateMode:"operation",keyLength:0,dataRoot:"data",filters:[],data:[],convert:null,serialize:null},e);return g.su.Observable.call(this),e.fields&&e.fields.push({"name":e.keyProperty,"mapping":e.keyProperty}),e.proxy&&(e.proxy.isProxy||(t=g.extend(!0,{triggerEvent:!0,host:r},e.proxy),e.proxy=new g.su.Proxy(t)),e.proxy.addListener("ev_load",function(e,t,i){var a;(r.rawData=t)&&i?(a=[],g.each(t,function(e,t){a=a.concat(t[r.dataRoot[e]])})):a=t&&r.dataRoot?t[r.dataRoot]:t,r.loadData(a,!0)})),e.fields&&0!==e.fields.length&&(!0!==e.global||e.id)?(this.id=e.id||g.su.randomId("store"),void this.init(e)):null},g.su.inherit(g.su.Observable,g.su.Store),g.su.Store.prototype.init=function(e){g.extend(this,e),this._name=e.name,this.data=[],this.snapshot=null,this.isStore=!0,this.isSorted=!1,e.data&&0<e.data.length&&this.loadData(e.data,!0),!0===this.autoLoad&&this.load()},g.su.Store.prototype.getSize=function(){return this.data.length},g.su.Store.prototype.getProxy=function(){return this.proxy},g.su.Store.prototype.hasField=function(e){for(var t=this.fields,i=0;i<t.length;i++)if(t[i].name===e)return!0;return!1},g.su.Store.prototype.storeConvert=function(e){for(var t in 0<this.data.length&&this.removeAllData(),this.data=[],this.dataMap={},(e=null!==this.convert?this.convert(e):e)&&!g.isEmptyObject(e)||(e=[]),e=g.isArray(e)?e:[e]){var i;e.hasOwnProperty(t)&&(i=this.createModel(),void 0===e[t][this.keyProperty]&&(e[t][this.keyProperty]=g.su.randomId("key")),e[t][this.keyProperty],e[t]=i.modelConvert(e[t]))}return e},g.su.Store.prototype.storeSerialize=function(e,t){for(var i in this.dataMap=this.dataMap||{},e=g.isArray(e=e||[])?e:[e]){var a;e.hasOwnProperty(i)&&(a=e[i][this.keyProperty],a=(a=this.dataMap[a])||this.createModel(),e[i]=a.modelSerialize(e[i]))}return e=null!==this.serialize?this.serialize(e,t):e},g.su.Store.prototype.loadData=function(e,t,i,a,r){var s=g.extend(!0,[],e=e||[]);if(t?e=this.storeConvert(e):(this.data=[],this.dataMap={}),this.filterBackupData=e,!(0<this.filters.length)){0<e.length&&!this.filterModel&&(this.filterModel=this.createFilterModel());for(var n=0;n<e.length;n++){var o,u=e[n][this.keyProperty];void 0!==u&&this.dataMap[u]?(o=this.dataMap[u]).loadData(e[n]):(o=this.createModel(),void 0===u&&(u=e[n][this.keyProperty]=g.su.randomId("key")),o.loadData(e[n]),this.insertModelNoEvent(o,n),this.dataMap[u]=o)}return r||this.record(),this.trigger("ev_raw_loaded",[s]),this.trigger("ev_loaded"),this.fireEvent("ev_store_data_load_success"),a&&a.call(this,e),this}this.filter({filters:[]})},g.su.Store.prototype.refreshData=function(e){var o=function(e,t,i){var a,r,s=!!t.hasOwnProperty(i);for(r in e)if(e.hasOwnProperty(r)&&(r!==i||s)){for(var n in a=!1,t)t.hasOwnProperty(n)&&(r===n&&e[r]===t[n]?a=!0:"array"===g.type(e[r])&&"array"===g.type(t[n])?a=e[r].join(",")===t[n].join(","):"object"===g.type(e[r])&&"object"===g.type(t[n])&&(a=o(e[r],t[n])));if(!1===a)break}return a};if(0===this.data.length)this.loadData(e,!0);else{var t,i,a,r,s,n=(e=((e,t)=>{null!==e.convert&&(t=e.convert(t)),g.isArray(t=t||[])||(t=[t]);var i,a=e.createModel();for(i in t)t.hasOwnProperty(i)&&(t[i]=a.modelConvert(t[i]));return t})(this,e)).length;for(l=0;l<n;l++)if((a=e[l]).hasOwnProperty(this.keyProperty))a=a[this.keyProperty],(t=this.getModelByKey(a))?o(t.getData(),e[l],this.keyProperty)||t.loadData(e[l]):((i=this.createModel()).loadData(e[l]),this.insertModel(i)),this.moveModelPosition(a,l);else{if((s=l)<this.data.length)for(s=l;s<this.data.length;s++)if(t=this.data[s],o(t.getData(),e[l],this.keyProperty)){r=t.getField(this.keyProperty).getValue();break}r?this.moveModelPosition(r,l):((i=this.createModel()).loadData(e[l]),this.insertModel(i),this.moveModelPosition(i.getField(this.keyProperty).getValue(),l))}if(this.data.length>e.length){for(var u=[],l=e.length;l<this.data.length;l++)u.push(this.data[l].getField(this.keyProperty).getValue());this.data.splice(e.length,this.data.length-e.length),this.trigger("ev_model_deleted",[u])}}},g.su.Store.prototype.loadFilterData=function(e){for(var t in 0<this.filters.length&&(e=this.runFilter(g.su.clone(e))),this.data=[],this.dataMap={},e){var i,a;e.hasOwnProperty(t)&&((i=e[t][this.keyProperty])&&this.dataMap[i]?(a=this.dataMap[i]).loadData(e[t]):(a=this.createModel(),i=i||(e[t][this.keyProperty]=g.su.randomId("key")),a.loadData(e[t]),this.insertModelNoEvent(a,t),this.dataMap[i]=a))}return this.record(),this.trigger("ev_loaded"),this},g.su.Store.prototype.filter=function(e,t){var i=e.filters,a=e.append,r=e.columns;if(this.rendererMap={},this.filterPrecise=!!t,i&&0!==i.length){if(i=g.isArray(i)?i:[i],a?this.filters.concat(i):this.filters=i,r)for(var s=0,n=r.length;s<n;s++){var o=r[s].dataIndex;this.rendererMap[o]=r[s].renderer}this.loadFilterData(this.filterBackupData)}else 0<this.filters.length&&(this.filters=[],this.loadData(this.filterBackupData))},g.su.Store.prototype.runFilter=function(e){for(var a=this,t=0,i=this.filters.length;t<i;t++){var r=this.filters[t];if(r.func)for(var s=e.length-1;0<=s;s--)r.func(e[s])||e.splice(s,1);else if(null!=r.value&&""!==r.value&&void 0!==r.column){d=p=l=c=u=o=n=void 0;var n=r.column,o=r.value;if(a.filterPrecise)for(var u=e.length-1;0<=u;u--)if(void 0===(c=e[u][n])){var l=!1;for(p in e[u])if(e[u].hasOwnProperty(p)&&p!==a.keyProperty)if(void 0!==(d=e[u][p])&&d===o){l=!0;break}!1===l&&e.splice(u,1)}else c!==o&&e.splice(u,1);else for(var c,u=e.length-1;0<=u;u--)if(void 0===(c=h(n,e[u][n],e[u]))){var p,d,l=!1;for(p in e[u])if(e[u].hasOwnProperty(p)&&p!==a.keyProperty)if(void 0!==(d=h(p,e[u][p],e[u]))&&-1!==(d+"").search(new RegExp(o,"i"))){l=!0;break}!1===l&&e.splice(u,1)}else"array"===g.type(o)?-1===g.inArray(e[u][n],o)&&e.splice(u,1):-1===c.toString().search(new RegExp(o,"i"))&&-1===e[u][n].toString().search(new RegExp(o,"i"))&&e.splice(u,1)}}function h(e,t,i){return void 0===a.rendererMap[e]?""+t:a.rendererMap[e](t,i)}return e},g.su.Store.prototype.record=function(){for(var e=0,t=this.data.length;e<t;e++)this.data[e].record();return this.snapshot=g.su.clone(this.getStoreData()),this},g.su.Store.prototype.getDataByIndex=function(e){return this.data[e].getData()},g.su.Store.prototype.getDataByKey=function(e){for(var t=this.keyProperty,i=[],a={},r=0,s=(e=g.isArray(e)?e:[e]).length;r<s;r++)a[e[r]]=!0;var n=this.data;for(r=0,s=n.length;r<s;r++)n[r].getField(t).val()in a&&i.push(this.getDataByIndex(r));return i},g.su.Store.prototype.getModelByIndex=function(e){return this.data[e]},g.su.Store.prototype.getModelByKey=function(e){return this.data[this.getIndex(e)]},g.su.Store.prototype.getIndex=function(e){var t=this.data,i=this.keyProperty;if(void 0!==e)for(var a=0,r=t.length;a<r;a++)if(t[a].getField(i).val().toString()==e.toString())return a},g.su.Store.prototype.getKeyByIndex=function(e){var t=this.data,i=this.keyProperty;return t[e].getField(i).val()},g.su.Store.prototype.getIndexs=function(e){var t=this.data,i=this.keyProperty;if(0!==e.length){for(var a="",r=0,s=e.length;r<s;r++)for(var n=0,o=t.length;n<o;n++){var u=e[r];if(t[n].getField(i).val().toString()==u.toString()){a+=n+",";break}}return""!==a?a.substring(0,a.length-1):a}},g.su.Store.prototype.beforeInsert=function(e,t,i){var a,r=this,s={};for(a in t)t.hasOwnProperty(a)&&(s[a]=r.storeSerialize(t[a].model)[0]);return{data:s,params:{option:"add"},success:function(e){r.loadData(e.model,!0),r.fireEvent("ev_store_sync_success")},fail:function(e,t,i){r.loadData(r.snapshot),i&&r.trigger("ev_store_sync_error",i)},error:function(e,t){r.loadData(r.snapshot),r.trigger("ev_store_ajax_error",[e,t])}}},g.su.Store.prototype.insert=function(e,t,i,a){var r;!this.proxy||g.isEmptyObject(e)?i&&i("insert"):(r=this.getStoreData(),r=this.beforeInsert(r,e,t,i),this.proxy.create(r,a))},g.su.Store.prototype.beforeLoad=function(e){var a=this,r=(e&&e.ajax&&e.ajax.type||((e=e||{}).ajax=e.ajax||{},e.ajax.type="GET",e.ajax.contentType="application/x-www-form-urlencoded"),e.params=e.params||{option:"get"},e.fail),i=(e.fail=function(e,t,i){r&&r(e,t,i),i&&a.trigger("ev_store_sync_error",i)},e.error);return e.error=function(e,t){i&&i(e,t),a.trigger("ev_store_ajax_error",[e,t])},e},g.su.Store.prototype.load=function(e){var e=this.beforeLoad(e),t=this;t.trigger("ev_store_load_start"),this.proxy.read(e,function(){t.trigger("ev_store_load_end")})},g.su.Store.prototype.beforeUpdate=function(e,t,i){var a,r=this,s={};for(a in t)t.hasOwnProperty(a)&&(s[a]=r.storeSerialize(t[a].model)[0]);return{data:s,params:{option:"edit"},success:function(e){r.loadData(e.model,!0),r.fireEvent("ev_store_sync_success")},fail:function(e,t,i){r.loadData(r.snapshot),i&&r.trigger("ev_store_sync_error",i)},error:function(e,t){r.loadData(r.snapshot),r.trigger("ev_store_ajax_error",[e,t])}}},g.su.Store.prototype.update=function(e,t,i,a){var r;!this.proxy||g.isEmptyObject(e)?i&&i("update"):(r=this.getStoreData(),r=this.beforeUpdate(r,e,t,i),this.proxy.update(r,a))},g.su.Store.prototype.beforeRemove=function(e,t,i){var a,r=this,s={};for(a in t)t.hasOwnProperty(a)&&(s[a]=r.storeSerialize(t[a].oldModel)[0]);return{data:s,params:{option:"delete"},success:function(e,t){r.loadData(e.model,!0),r.fireEvent("ev_store_sync_success")},fail:function(e,t,i){r.loadData(r.snapshot),i&&r.trigger("ev_store_sync_error",i)},error:function(e,t){r.loadData(r.snapshot),r.trigger("ev_store_ajax_error",[e,t])}}},g.su.Store.prototype.remove=function(e,t,i){var a;!this.proxy||g.isEmptyObject(e)?i&&i("remove"):(a=this.getStoreData(),a=this.beforeRemove(a,e,t,i),this.proxy.remove(a))},g.su.Store.prototype.removeDataByKey=function(e,i){for(var t=this.keyProperty,a={},r=0,s=(e=g.isArray(e)?e:[e]).length;r<s;r++)a[e[r]]=!0;var n=this.data,o=[];for(r=0,s=n.length;r<s;r++)n[r].getField(t).val()in a&&o.push(r);this.removeDataByIndex(o,function(e,t){i&&i.call(this,e,t)})},g.su.Store.prototype.moveModelPosition=function(e,t){var i,a=this.getIndex(e);a!==t&&(i=this.data.splice(a,1),this.data.splice(t,0,i[0]),this.trigger("ev_store_item_moved",[e,t,a]))},g.su.Store.prototype.removeDataByIndex=function(e,t){for(var i=this.keyProperty,a=this.data,r=((e=g.isArray(e)?e:[e]).sort(function(e,t){return e-t}),[]),s=e.length-1;0<=s;s--){var n=e[s];isNaN(n)||(r.push(a[n][i].getValue()),a.splice(e[s],1))}return t&&t.call(this,r,e),this.trigger("ev_model_deleted",[r,e]),this.trigger("ev_datachanged",[this,this.getStoreData,"removeData"]),this},g.su.Store.prototype.removeAllData=function(e){return this.data=null,delete this.data,this.data=[],this.trigger("ev_removeAllData",[this]),this.trigger("ev_datachanged",[this,this.data,"removeData"]),this},g.su.Store.prototype.getStoreData=function(){return this.getData()},g.su.Store.prototype.getSelectedStoreData=function(){for(var e=[],t=0;t<this.data.length;t++)this.data[t].selected&&e.push(this.data[t]);var i=e.length,a=[];for(t=0;t<i;t++){var r=e[t].getData();a.push(r)}return a},g.su.Store.prototype.getSelectedData=function(){for(var e=[],t=0;t<this.data.length;t++)this.data[t].selected&&e.push(this.data[t]);var i=e.length,a=[];for(t=0;t<i;t++){var r=e[t].getData();a.push(r)}return a},g.su.Store.prototype.getSelectedDataKey=function(e){for(var t=[],i=0;i<this.data.length;i++)this.data[i].selected&&t.push(this.data[i]);var a=t.length,r=[];for(i=0;i<a;i++){var s=t[i].getField(e||this.keyProperty).getValue();r.push(s)}return r},g.su.Store.prototype.getData=function(e){for(var t=this.data,i=t.length,a=[],r=0;r<i;r++){var s=t[r].getData(e);a.push(s)}return a},g.su.Store.prototype.insertModel=function(e,t){var r=this;return this.data.splice(t=t||0,0,e),this.trigger("ev_model_inserted",[t]),e.on("ev_data_change",function(e,t,i,a){r.trigger("ev_data_change",[t,i,a,r])}),this},g.su.Store.prototype.insertModelNoEvent=function(e,t){var r=this;return this.data.splice(t=t||0,0,e),e.on("ev_data_change",function(e,t,i,a){r.trigger("ev_data_change",[t,i,a,r])}),this},g.su.Store.prototype.insertData=function(e,t){var i=this.createModel(),a=this.keyProperty;t=t||0,void 0===e[a]&&(e[a]=i.getField(a).getValue()),i.replaceData(e,!0),this.insertModel(i,t)},g.su.Store.prototype.generateModelKey=function(){return g.su.randomId(this.keyProperty)},g.su.Store.prototype.createModel=function(){var e={"fields":this.fields},e=new g.su.Model(e);return e.getField(this.keyProperty).setValue(this.generateModelKey()),e},g.su.Store.prototype.createFilterModel=function(){for(var e,t=this.fields,i=t.length,a=[],r=0;r<i;r++)t[r].filterable&&a.push(t[r]);return e=0<a.length?new g.su.Model({"fields":a}):e},g.su.Store.prototype.getModelKey=function(e){e=e.getField(this.keyProperty);return e?e.getValue():null},g.su.Store.prototype.checkDataChange=function(){function e(e){var t={},i={};if(e)for(var a=0,r=e.length;a<r;a++){var s=e[a][n.keyProperty];t[s]=g.extend({},e[a]),i[s]=!1}return{data:t,map:i}}var t,i,a,n=this,r=e(this.getStoreData()),s=e(this.snapshot),o={},u={},l={};for(t in r.map)if(r.map.hasOwnProperty(t))for(var c in s.map)s.map.hasOwnProperty(c)&&t===c&&(s.map[c]=!0,r.map[t]=!0);for(i in r.map)r.map.hasOwnProperty(i)&&(r.map[i]&&s.map[i]&&!((e,t)=>{var i,a,r=g.su.getObjectLength(e),s=g.su.getObjectLength(t);for(a in e)if(e.hasOwnProperty(a)){for(var n in i=!1,t)t.hasOwnProperty(n)&&(a===n&&e[a]===t[n]?i=!0:a===n&&("array"===g.type(e[a])&&"array"===g.type(t[n])||"object"===g.type(e[a])&&"object"===g.type(t[n]))&&(i=JSON.stringify(e[a])===JSON.stringify(t[n])));if(!1===i)break}return r===s&&i})(r.data[i],s.data[i])?u[i]={model:r.data[i],oldModel:s.data[i]}:r.map[i]||(o[i]={model:r.data[i]}));for(a in s.map)!s.map.hasOwnProperty(a)||s.map[a]||(l[a]={oldModel:s.data[a]});return{"insert":o,"update":u,"remove":l}},g.su.Store.prototype.beforeSync=function(){},g.su.Store.prototype.afterSync=function(){},g.su.Store.prototype.sync=function(e){this.beforeSync();var t=this,i={},a=(e=e||{},this.checkDataChange());function r(e){i[e]=!0,3===g.su.getObjectLength(i)&&t.afterSync()}this.insert(a.insert,g.extend(!0,{},e,e.insert),r),this.remove(a.remove,g.extend(!0,{},e,e.remove),r),this.update(a.update,g.extend(!0,{},e,e.update),r)},g.su.Store.prototype.isDirty=function(){var e=this.checkDataChange();return!(g.isEmptyObject(e.insert)&&g.isEmptyObject(e.update)&&g.isEmptyObject(e.remove))},g.su.Store.prototype.reset=function(){for(var e=0,t=this.data.length;e<t;e++)this.data[e].reset();return this},g.su.Store.prototype.selectByKey=function(e){for(var t,i=0,a=(e=g.isArray(e)?e:[e]).length;i<a;i++)(t=this.getModelByKey(e[i]))&&!t.disabled&&(t.selected=!0)},g.su.Store.prototype.selectAll=function(){for(var e=0,t=this.data.length;e<t;e++)this.data[e].disabled||(this.data[e].selected=!0);return this},g.su.Store.prototype.unselectAll=function(){for(var e=0,t=this.data.length;e<t;e++)this.data[e].disabled||(this.data[e].selected=!1);return this},g.su.Store.prototype.unselectByKey=function(e){for(var t,i=0,a=(e=g.isArray(e)?e:[e]).length;i<a;i++)(t=this.getModelByKey(e[i]))&&!t.disabled&&(t.selected=!1)},g.su.Store.prototype.disableByKey=function(e){for(var t,i=0,a=(e=g.isArray(e)?e:[e]).length;i<a;i++)(t=this.getModelByKey(e[i]))&&(t.disabled=!0)},g.su.Store.prototype.enableByKey=function(e){for(var t,i=0,a=(e=g.isArray(e)?e:[e]).length;i<a;i++)(t=this.getModelByKey(e[i]))&&(t.disabled=!1)},g.su.Store.prototype.getAllSelectedKeys=function(){for(var e=this.keyProperty,t=this.data,i=t.length,a=[],r=0;r<i;r++)t[r].selected&&a.push(t[r].getField(e).getValue());return a},g.su.Store.prototype.syncSelectedData=function(){function e(e){var t={},i={};if(e)for(var a=0,r=e.length;a<r;a++){var s=e[a][n.keyProperty];t[s]=g.extend({},e[a]),i[s]=!1}return{data:t,map:i}}var t,i,n=this,a=e(this.getSelectedData()),r=e(this.snapshot),s={};for(t in a.map)if(a.map.hasOwnProperty(t))for(var o in r.map)r.map.hasOwnProperty(o)&&t===o&&(r.map[o]=!0,a.map[t]=!0);for(i in a.map)a.map.hasOwnProperty(i)&&a.map[i]&&r.map[i]&&!((e,t)=>{var i,a,r=g.su.getObjectLength(e),s=g.su.getObjectLength(t);for(a in e)if(e.hasOwnProperty(a)){for(var n in i=!1,t)t.hasOwnProperty(n)&&a===n&&e[a]===t[n]&&(i=!0);if(!1===i)break}return r===s&&i})(a.data[i],r.data[i])&&(s[i]={model:a.data[i],oldModel:r.data[i]});this.update(s)},g.su.Store.prototype.getAllKeys=function(){for(var e=this.keyProperty,t=this.data,i=t.length,a=[],r=0;r<i;r++)a.push(t[r].getField(e).getValue());return a}})(jQuery),(r=>{function e(e,t){if(r.su.Observable.call(this),this.viewObjs=[],this.dataObj=e,!t||r.isArray(t)||(t=[t]),this.viewEventHandler={},this.dataEventHandler={},this.dataObj&&this.bindDataObj(this.dataObj),t)for(var i=0;i<t.length;i++)this.bindViewObj(t[i])}r.su=r.su||{},r.su.DataBind=(r.su.inherit(r.su.Observable,e),e.prototype.getName=function(){if(this.dataObj&&this.dataObj._name)return this.dataObj._name},e.prototype.bind=function(e,t){r.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++)this.bindViewObj(e[i]);this.bindDataObj(t)},e.prototype.bindDataObj=function(e){var t,i=this.constructor.dataEventMap;for(t in this.unbindDataObj(),this.dataObj=e,i){var a=i[t].fn,a=((e,t)=>function(){e.apply(t,arguments)})(a="string"==typeof a?this[a]:a,this);this.dataEventHandler[t]=a,e.addListener(t,a)}},e.prototype.viewIsBinded=function(e){return 0<=r.inArray(e,this.viewObjs)},e.prototype.bindViewObj=function(e){var t=this.constructor,i=t.viewEventMap[e._type]||t.viewEventMap.defaults;if(!this.viewIsBinded(e)){for(var a in this.viewObjs.push(e),this.viewEventHandler[e.domId]={},i){var r=i[a].fn,r=((t,i,a)=>function(){var e=Array.prototype.slice.call(arguments);e[e.length]=i,t.apply(a,e)})(r="string"==typeof r?this[r]:r,e,this);this.viewEventHandler[e.domId][a]=r,e.dom().on(a,r)}e.dataBind?e.dataBind.push(this):e.dataBind=[this]}},e.prototype.unbind=function(){this.unbindDataObj(),this.unbindViewObjs()},e.prototype.unbindDataObj=function(){if(this.dataObj){for(var e in this.dataEventHandler)this.dataObj.off(e,this.dataEventHandler[e]);this.dataObj=null}this.trigger("ev_data_unbind")},e.prototype.unbindViewObj=function(e){var t=r.inArray(e,this.viewObjs);if(0<=t){var i,a=this.viewEventHandler[e.domId];for(i in a)a.hasOwnProperty(i)&&e.dom().off(i,a[i]);delete this.viewEventHandler[e.domId],this.viewObjs.splice(t,1)}0<=(t=r.inArray(this,e.dataBind))&&e.dataBind.splice(t,1)},e.prototype.unbindViewObjs=function(){for(var e=0;e<this.viewObjs.length;e++)this.unbindViewObj(this.viewObjs[e])},e.prototype.syncView=function(){},e)})(jQuery),(o=>{o.su=o.su||{},o.su.DataFieldBind=(()=>{var e,t,i,a={sync:function(e){var t;this.dataObj&&(t=this.dataObj.getValue(),this._syncDataValue(t),this.dataObj.disabled)&&this.disable()}},r={defaults:{ev_view_change:{fn:function(e,t,i,a){e.stopPropagation();var r=this,e=o.su.getDefaultEvent(i,function(){switch(t.type){case"value":r._responseViewValueChanges(t.value,i);break;case"valid":r.validate();break;case"record":r.dataObj&&(r.setValue(t.value),r.dataObj.record())}});a&&a.dom().triggerHandler("ev_view_before_change",[e.ev,t]),e.exe()}},ev_view_update:{fn:function(){var e;this.dataObj&&(e=this.dataObj.getValue(),this._syncDataValue(e))}},ev_view_disable:{fn:function(){this.dataObj.disable()}},ev_view_enable:{fn:function(){this.dataObj.enable()}}},textbox1:{"value_change":{fn:function(e,t,i){},argsInterface:null}}};for(i in r)"defaults"!=i&&(r[i]=o.extend(!0,r.defaults,r[i]));function n(e,t){o.su.DataBind.call(this,e,t),this.addListener(a)}function s(s){return function(){var e=n.argsTransMap[s];if(this.viewObjs&&0<this.viewObjs.length)for(var t in this.viewObjs){var i,a,t=this.viewObjs[t],r=t._type;t[s]&&(a=void 0===(i=t[s].apply(t,e&&e[r]?e[r](arguments):arguments))?a:i)}return a=this.dataObj&&this.dataObj[s]?i=this.dataObj[s].apply(this.dataObj,e&&e["dataObj"]?e["dataObj"](arguments):arguments):a}}for(i in o.su.inherit(o.su.DataBind,n),n.argsTransMap={setValue:{defaults:function(e){return e},textBox1:function(e){return e[0]},dataObj1:function(e){return e[0]}},validate:{},getValue:{}},n.viewEventMap=r,n.dataEventMap={ev_data_change:{fn:function(e,t){switch(t.type){case"_value":this._responseDataValueChange(t.value.value,t.value.oldValue);break;case"valid":!0===t.value?this.setNormal():this.setError(t.value),this.fireEvent("ev_valid_change",[t.value])}}}},o.su.Widget.regMap)for(t in e=o.su.Widget.regMap.hasOwnProperty(i)?o.su.Widget.regMap[i]:e)!e.hasOwnProperty(t)||"function"!=typeof e[t]||"_init"==t||"init"==t||"create"==t||n.prototype[t]||(n.prototype[t]=s(t));for(i in o.su.Model.DataField.prototype)"function"!=typeof o.su.Model.DataField.prototype[i]||n.prototype[i]||(n.prototype[i]=s(i));return n.prototype.setValue=function(e){this.dataObj?this.dataObj.setValue(e):this._syncDataValue(e)},n.prototype._responseViewValueChanges=function(e,t){!this.dataObj||o.su.valueEqual(e,this.dataObj.getValue())||this.dataObj.setValue(e)},n.prototype._responseDataValueChange=function(e,t){if(o.su.valueEqual(e,t))for(var i=0;i<this.viewObjs.length;i++)for(var a=this.viewObjs[i],r=0;r<a.dataBind.length;r++)a.dataBind[r]instanceof o.su.DataFieldBind&&a.dataBind[r].fireEvent("ev_value_change",[e,t]);else!1!==this._syncDataValue(e)&&this.fireEvent("ev_value_change",[e,t])},n.prototype._syncDataValue=function(e){for(var t=0;t<this.viewObjs.length;t++){var i=this.viewObjs[t];if(!i.setValue||i.getValue&&o.su.valueEqual(i.getValue(),e)||i.setValue(e),this.dataObj&&!o.su.valueEqual(this.dataObj.getValue(),e))return!1;for(var a=0;a<i.dataBind.length;a++){var r=i.dataBind[a];r!==this&&r instanceof o.su.DataFieldBind&&r.getValue&&!o.su.valueEqual(r.getValue(),e)&&i.dataBind[a].setValue(e)}}},n.prototype.bindDataObj=function(e){n.superclass.bindDataObj.call(this,e),this.syncView()},n.prototype.bindViewObj=function(e){n.superclass.bindViewObj.call(this,e),this.syncView()},n.prototype.syncView=function(){this.fireEvent("sync")},n})()})(jQuery),(o=>{o.su=o.su||{},o.su.ModelBind=(()=>{var e={defaults:{"value_change":{fn:"setValue",argsInterface:null},"validate_change":{fn:"validate"},ev_view_change:{fn:function(e,t){switch(t.type){case"value":this.setValue(t.value);break;case"valid":this.validate()}}}},form:{"value_change":{fn:function(e,t,i){},argsInterface:null}}};for(r in e)"defaults"!=r&&(e[r]=o.extend(!0,e.defaults,e[r]));function n(e,t){this.subFieldsBinds={},o.su.DataBind.call(this,e,t)}function t(s){return function(){var e=n.argsTransMap[s];if(this.viewObjs&&0<this.viewObjs.length)for(var t in this.viewObjs){var i,a,t=this.viewObjs[t],r=t._type;t[s]&&(a=void 0===(i=t[s].apply(t,e&&e[r]?e[r](arguments):arguments))?a:i)}return a=this.dataObj&&this.dataObj[s]?i=this.dataObj[s].apply(this.dataObj,e&&e["dataObj"]?e["dataObj"](arguments):arguments):a}}var i,a,r,s={ev_model_submit_error:{fn:function(e,t){o.su.raise({msg:"ev_model_submit_error",type:"model_submit_error",errorCode:t,modelBind:this})},argsInterface:null},ev_model_load_error:{fn:function(e,t){o.su.raise({msg:"ev_model_load_error",type:"model_load_error",errorCode:t,modelBind:this})},argsInterface:null},ev_model_ajax_error:{fn:function(e,t,i){o.su.raise({msg:"ev_model_ajax_error",type:"model_ajax_error",ajaxErrorStatus:t,ajaxErrorXhr:i,modelBind:this})},argsInterface:null},ev_loaded:{fn:function(e,t){this.fireEvent("ev_loaded",t)},argsInterface:null},ev_data_change:{fn:function(e,t,i,a){this._responseDataChange();i=this[i.getName()];this.trigger("ev_data_change",[t.value,i,this])}},ev_validate_change:{fn:function(e,t){if(this.trigger("ev_validate_change",[t]),!1===t.result)try{this[t.field].viewObjs[0].dom()[0].scrollIntoView({block:"center"})}catch(e){}}}};for(r in o.su.inherit(o.su.DataBind,n),n.argsTransMap={setValue:{defaults:function(e){return e},textBox1:function(e){return e[0]},dataObj1:function(e){return e[0]}},validate:{},getValue:{}},n.viewEventMap=e,n.dataEventMap=s,o.su.Widget.regMap)for(a in i=o.su.Widget.regMap.hasOwnProperty(r)?o.su.Widget.regMap[r]:i)!i.hasOwnProperty(a)||"function"!=typeof i[a]||"_init"==a||"init"==a||"create"==a||n.prototype[a]||(n.prototype[a]=t(a));for(r in o.su.Model.prototype)"function"!=typeof o.su.Model.prototype[r]||n.prototype[r]||(n.prototype[r]=t(r));return n.prototype.bindDataObj=function(e){if(n.superclass.bindDataObj.call(this,e),this.createSubBinds(),this.viewObjs)for(var t=0;t<this.viewObjs.length;t++)this.syncSubViewBinds(this.viewObjs[t]);this.syncView()},n.prototype.createSubBinds=function(){var e=this.dataObj.fields;this.subFieldsBinds={};for(var t=0;t<e.length;t++)this[e[t].name]=this.subFieldsBinds[e[t].name]=new o.su.DataFieldBind(this.dataObj.data[t])},n.prototype.syncSubViewBinds=function(e){if(e.getAllFields){var t=e.getAllFields();if(t)for(var i=0;i<t.length;i++){var a=t[i],r=a.field,r=this.subFieldsBinds[r];r&&!r.viewIsBinded(a)&&r.bindViewObj(a)}}},n.prototype.syncSubViewUnbinds=function(e){if(e.getAllFields)for(var t=e.getAllFields(),i=0;i<t.length;i++){var a=t[i],r=a.field,r=this.subFieldsBinds[r];r&&r.viewIsBinded(a)&&r.unbindViewObj(a)}},n.prototype.bindViewObj=function(e){n.superclass.bindViewObj.call(this,e),this.dataObj&&this.syncSubViewBinds(e),this.syncView()},n.prototype.unbindDataObj=function(){for(var e in this.subFieldsBinds)this.subFieldsBinds[e].unbind(),delete this[e];this.subFieldsBinds={},n.superclass.unbindDataObj.call(this)},n.prototype.unbindViewObj=function(e){this.syncSubViewUnbinds(e),n.superclass.unbindViewObj.call(this,e)},n.prototype._responseDataChange=function(){for(var e=this.dataObj.getData(),t=0;t<this.viewObjs.length;t++)for(var i=this.viewObjs[t],a=0;a<i.dataBind.length;a++){var r=i.dataBind[a];r.dataObj!==this.dataObj&&r.dataObj.loadData(e)}},n.prototype.getAllFields=function(){return this.subFieldsBinds},n})()})(jQuery),(l=>{l.su=l.su||{},l.su.StoreBind=(()=>{function n(e){return"popEditor"==e._type&&0<e.containerMsg.dom().find("div[widget=form]").length&&e.containerMsg.dom().find("div[widget=form]").eq(0).data("viewObj").dataBind[0]}var i={sync:function(e){if(this.dataObj){for(var t=this.dataObj.getAllKeys(),i=0,a=this.viewObjs.length;i<a;i++)this.viewObjs[i].syncData&&this.viewObjs[i].syncData(t);var r=this.getStoreData();this.loadItems&&this.loadItems(r);for(i=0,a=this.viewObjs.length;i<a;i++)this.viewObjs[i].dom().triggerHandler("ev_store_bound")}}},e={defaults:{ev_grid_edit:{fn:function(e,t,i){var a,r,i=i.getPlugin("editor"),s=n(i);s?"add"!=t?(r=this.getSubModelBindByKey(t).getData(),s.loadData(r,!0)):(a=this.dataObj.createModel(),this.addModelBind.modelBind=new l.su.ModelBind(a),s.loadData(a.getData(),!0),this.addModelBind.key=this.dataObj.getModelKey(a)):(a=this.dataObj.createModel(),this.addModelBind.modelBind=new l.su.ModelBind(a),this.addModelBind.modelBind.bindViewObj(i),"add"!=t?(r=this.getSubModelBindByKey(t).getData(),this.addModelBind.modelBind.dataObj.loadData(r),this.addModelBind.key=t):(this.addModelBind.modelBind.dataObj.loadData(a.getData()),this.addModelBind.key=this.dataObj.getModelKey(a))),this.trigger("ev_start_edit",[this.addModelBind.modelBind,this])},argsInterface:null},ev_grid_cancel:{fn:function(e,t,i){var i=i.getPlugin("editor"),a=n(i);a?a.reset():(this.addModelBind.modelBind.reset(),this.addModelBind.modelBind.unbindViewObj(i),this.addModelBind.key=null,this.addModelBind.modelBind=null)}},ev_grid_save:{fn:function(e,t,i,a){a=a.getPlugin("editor");if(s=n(a)){if(this.trigger("ev_before_save",[s,this]),!0!==(r=s.dataObj.validate({returnDetail:!0})).result)return this.trigger("ev_editor_validator_fail",[r.field]),void t.preventDefault();"add"!=i?this.getSubModelBindByKey(a.key).replaceData(s.modelSerialize(s.getData())):this.addModelBind.key&&(this.addModelBind.modelBind.replaceData(s.modelSerialize(s.getData())),this.dataObj.insertModel(this.addModelBind.modelBind.dataObj))}else{var r,s=this.addModelBind.modelBind;if(this.trigger("ev_before_save",[s,this]),!0!==(r=s.dataObj.validate({returnDetail:!0})).result)return this.trigger("ev_editor_validator_fail",[r.field]),void t.preventDefault();"add"!=i?(this.getSubModelBindByKey(a.key).loadData(s.getData()),s.unbindViewObj(a)):this.addModelBind.key&&(this.addModelBind.modelBind.unbindViewObj(a),this.addModelBind.modelBind.record(),this.dataObj.insertModel(this.addModelBind.modelBind.dataObj))}this.addModelBind.key=null,this.addModelBind.modelBind=null,!1!==this.dataObj.autoSync&&(r=l.su.getDefaultEvent(this,this.sync),this.trigger("ev_before_sync",[r.ev,this.dataObj.proxy]),r.exe())}},ev_grid_delete:{fn:function(e,t,i){this.dataObj.removeDataByKey(t);var a=l.su.getDefaultEvent(this,this.sync);this.trigger("ev_before_sync",[a.ev,this.dataObj.proxy,t]),a.exe()}},ev_grid_row_selected:{fn:function(e,t){this.dataObj.selectByKey(t)}},ev_grid_row_unselected:{fn:function(e,t){this.dataObj.unselectByKey(t)}},ev_grid_row_selected_all:{fn:function(e,t){this.dataObj.selectAll()}},ev_grid_row_unselected_all:{fn:function(e,t){this.dataObj.unselectAll()}},ev_grid_row_disabled:{fn:function(e,t){this.dataObj.disableByKey(t)}},ev_grid_row_enabled:{fn:function(e,t){this.dataObj.enableByKey(t)}},ev_grid_filter:{fn:function(e,t,i,a){this.dataObj.filter({filters:t,append:i,columns:a.columns})}},ev_store_render_items:{fn:function(e,t,i){if(this.dataObj){for(var l=this.dataObj.keyProperty,c=i.rerender||!1,a=this.dataObj.itemCls,p=[],r=[],s=0;s<t.length;s++){var n=this.getSubModelBindByKey(t[s]);r.push(n.dataObj),p.push(n)}0<r.length&&this.filterModelBind&&(this.filterModelBind.bindViewObj(i.getPlugin("filter")),this.filterModelBind.record()),i.renderModels(l,r,function(e){for(var t=e.length,i={},a=0,r=p.length;a<r;a++)i[(u=p[a]).dataObj.getField(l).getValue()]=a;for(var s=0;s<t;s++){var n=e[s].key,o=e[s].obj;if(!i[n]&&0!==i[n])throw new Error("store render item return unknown key");var u=p[i[n]];c&&u.unbindViewObjs(),u.bindViewObj(o)}},a)}}}},ev_store_render_items:{fn:function(e,t,i){if(this.dataObj){for(var u=this.dataObj.keyProperty,l=[],a=[],r=0;r<t.length;r++){var s=this.getSubModelBindByKey(t[r]);a.push(s.dataObj),l.push(s)}i.renderModels(u,a,function(e){for(var t=e.length,i=l.length,a=0;a<t;a++){for(var r=e[a].key,s=e[a].viewObj,n=0;n<i;n++){var o=l[n];if(o.dataObj.getField[u].getValue()!==r)throw new Error("store render item return unknown key");o.bindViewObj(s);break}l.splice(n,1),i-=1}})}}},form:{}};for(s in e)"defaults"!=s&&(e[s]=l.extend(!0,e.defaults,e[s]));function o(e,t){this.subModelsBinds=[],this.filterModelBind=null,this.addModelBind={key:null,modelBind:null},this._convertedkeyMap={},l.su.DataBind.call(this,e,t),this.addListener(i)}function t(n){return function(){var e=o.argsTransMap[n];if(this.viewObjs&&0<this.viewObjs.length)for(var t in this.viewObjs){var i,a,r,s=this.viewObjs[t];"loadItems"==n&&"repeat"==s.renderParent&&s.hasRenderItems||(i=s._type,s[n]&&(r=void 0===(a=s[n].apply(s,e&&e[i]?e[i](arguments):arguments))?r:a),"loadItems"!=n)||"repeat"!=s.renderParent||s.hasRenderItems||(this.viewObjs[t].hasRenderItems=!0)}return r=this.dataObj&&this.dataObj[n]?a=this.dataObj[n].apply(this.dataObj,e&&e["dataObj"]?e["dataObj"](arguments):arguments):r}}var a,r,s,u={ev_loaded:{fn:function(e){var t=this.dataObj;this.unbindDataObj();for(var i=0;i<this.viewObjs.length;i++){var a=this.viewObjs[i];"grid"===a._type&&(a.remove(),a.dom().hasClass("loading"))&&a.dom().removeClass("loading")}this.bindDataObj(t),this.fireEvent("ev_storedata_loaded")},argsInterface:null},ev_raw_loaded:{fn:function(e,t){this.fireEvent("ev_raw_loaded",[t])}},ev_store_load_start:{fn:function(){for(var e=0;e<this.viewObjs.length;e++){var t=this.viewObjs[e];"grid"!==t._type||t.dom().hasClass("loading")||t.dom().addClass("loading")}}},ev_store_load_end:{fn:function(){for(var e=0;e<this.viewObjs.length;e++){var t=this.viewObjs[e];"grid"===t._type&&t.dom().removeClass("loading")}}},ev_model_deleted:{fn:function(e,t){for(var i=0;i<t.length;i++){var a,r=this.getSubModelBindIndex(a=t[i]);this.subModelsBinds[r].unbind(),this.subModelsBinds.splice(r,1),delete this._convertedkeyMap[this._convertKey(a)];for(var s=0;s<this.viewObjs.length;s++){var n=this.viewObjs[s];"grid"===n._type&&n.remove(a)}}this.syncView(),this.fireEvent("ev_store_deleted")}},ev_model_inserted:{fn:function(e,t){var i=this.dataObj.getKeyByIndex(t),a=new l.su.ModelBind(this.getModelByIndex(t));this.subModelsBinds.splice(t,0,a),this._convertedkeyMap[this._convertKey(i)]=a;for(var r,s=0;s<this.viewObjs.length;s++)"grid"===(r=this.viewObjs[s])._type&&(r.getRow(i)||r.createRow(i,this.getModelByKey(i)),r=r.getRow(i),a.bindViewObj(r));this.syncView(),this.fireEvent("ev_store_inserted")}},ev_store_item_moved:{fn:function(e,t,i,a){a=this.subModelsBinds.splice(a,1);this.subModelsBinds.splice(i,0,a[0]);for(var r=0;r<this.viewObjs.length;r++)this.viewObjs[r].moveRow(t,i)}},ev_store_sync_success:{fn:function(){for(var e=0;e<this.viewObjs.length;e++){var t=this.viewObjs[e];"grid"===t._type&&t.getPlugin("popEditor")&&t.getPlugin("popEditor").containerMsg.close()}},argsInterface:null},ev_store_sync_error:{fn:function(e,t){l.su.raise({msg:"ev_store_submit_error",type:"store_submit_error",errorCode:t,storeBind:this})},argsInterface:null},ev_store_ajax_error:{fn:function(e,t,i){l.su.raise({msg:"ev_store_ajax_error",type:"store_ajax_error",ajaxErrorStatus:t,ajaxErrorXhr:i,storeBind:this})},argsInterface:null},ev_data_change:{fn:function(e,t,i,a,r){a=this.getModelKey(a),a=this.getSubModelBindByKey(a),i=a[i.name];this.trigger("ev_data_change",[t.value,i,a,this])},argsInterface:null}};for(s in l.su.inherit(l.su.DataBind,o),o.argsTransMap={setValue:{defaults:function(e){return e},textBox1:function(e){return e[0]},dataObj1:function(e){return e[0]}}},o.viewEventMap=e,o.dataEventMap=u,l.su.Widget.regMap)for(r in a=l.su.Widget.regMap.hasOwnProperty(s)?l.su.Widget.regMap[s]:a)!a.hasOwnProperty(r)||"function"!=typeof a[r]||"_init"==r||"init"==r||"create"==r||o.prototype[r]||(o.prototype[r]=t(r));for(s in l.su.Store.prototype)"function"!=typeof l.su.Store.prototype[s]||o.prototype[s]||(o.prototype[s]=t(s));return o.prototype.bindDataObj=function(e){o.superclass.bindDataObj.call(this,e),this.createSubBinds(),this.syncView()},o.prototype.createSubBinds=function(){this.subModelsBinds=[];var e=this.dataObj,t=e.getSize(),i=0;for(0<t&&e.filterModel&&(this.filterModelBind=new l.su.ModelBind(e.filterModel));i<t;i++){var a=e.getModelByIndex(i),r=this.getModelKey(a),a=new l.su.ModelBind(a);this.subModelsBinds.push(a),this._convertedkeyMap[this._convertKey(r)]=a}},o.prototype.syncSubViewBinds=function(r){var s=this;"grid"===r._type&&(r.remove(),r.loadGridData(this.dataObj.keyProperty,this.dataObj.data,function(){for(var e=r.getRows(),t=0;t<s.subModelsBinds.length;t++){s.dataObj.getKeyByIndex(t);var i=s.subModelsBinds[t],a=e[t];i.bindViewObj(a)}}))},o.prototype.syncSubViewUnbinds=function(e){var t=0!==e.dom().length;if("grid"===e._type){for(var i=e.getRow(),a=e.getPlugin("editor"),r=i.length,s=0;s<r;s++){var n,o=i[s].obj,u=o.key;(n=this.getSubModelBindByKey(u))&&n.viewIsBinded(o)&&n.unbindViewObj(o)}t&&e.remove(),(u=a.key)&&(n=this.getSubModelBindByKey(u))&&n.viewIsBinded(a)&&n.unbindViewObj(a)}},o.prototype.bindViewObj=function(e){o.superclass.bindViewObj.call(this,e),this.syncView()},o.prototype.getSubModelBindByKey=function(e){return this._convertedkeyMap[this._convertKey(e)]},o.prototype.getSubModelBindByIndex=function(e){return this.subModelsBinds[e]},o.prototype.getSubModelBindIndex=function(e){e=this._convertedkeyMap[this._convertKey(e)];return l.inArray(e,this.subModelsBinds)},o.prototype.unbindDataObj=function(){for(var e=0;e<this.subModelsBinds.length;e++)this.subModelsBinds[e].unbind();this.subModelsBinds=[],this._convertedkeyMap={},o.superclass.unbindDataObj.call(this)},o.prototype.unbindViewObj=function(e){this.syncSubViewUnbinds(e),o.superclass.unbindViewObj.call(this,e)},o.prototype.syncView=function(){this.fireEvent("sync")},o.prototype.getSubModelBindByModel=function(e){for(var t=0;t<this.subModelsBinds.length;t++)if(this.subModelsBinds[t].dataObj===e)return this.subModelsBinds[t];return!1},o.prototype._convertKey=function(e){return l.type(e)+"_"+e},o.prototype._getOriginalKey=function(e){var t=e.slice(0,6),e=e.slice(7);return"number"===t?Number(e):e},o})()})(jQuery),$.su.Application=(()=>{function e(){$.su.Controller.call(this),$.su.modelManager=new $.su.ModelManager,$.su.moduleManager=new $.su.ModuleManager,$.su.storeManager=new $.su.StoreManager,$.su.viewManager=new $.su.ViewManager,$.su.serviceManager=new $.su.ServiceManager,this.modelManager=$.su.modelManager,this.moduleManager=$.su.moduleManager,this.storeManager=$.su.storeManager,this.viewManager=$.su.viewManager,this.serviceManager=$.su.serviceManager,this.container=null}return $.su.inherit($.su.Controller,e),e.prototype.setContainer=function(e){this.container=e},e.prototype.init=function(){},e.prototype.launch=function(e){var t;this.container&&(t=new $.su.widgets.htmlLoader({id:this.container}),$.when(t.render()).done(function(){$.su.moduleManager.load("main",function(){var e=$.su.moduleManager.query("main");e._getView().setContainer(t),e.launch()})}))},e})(jQuery),(s=>{function e(){if("object"==typeof this.constructor.instance)return this.constructor.instance;s.su.Observable.call(this),(this.constructor.instance=this)._map={},this._infoMap={},this.type=null}s.su.Manager=(s.su.inherit(s.su.Observable,e),e.prototype.define=function(e,t,i){var a,r;this._infoMap[e]={},this._infoMap[e].constructor=i?(a=this.type,r=i,function(e){a.call(this,e),r&&s.extend(this,r.call(this))}):this.type,this._infoMap[e].options=t},e.prototype.init=function(e){this._infoMap[e]&&(this._map[e]=new this._infoMap[e].constructor(this._infoMap[e].options))},e.prototype.get=function(e){return this._map[e]},e.prototype.destroy=function(e){delete this._map[e]},e)})(jQuery),(s=>{function e(){s.su.Manager.call(this),this.type=s.su.Model}s.su.ModelManager=(s.su.inherit(s.su.Manager,e),e.prototype.define=function(e,t,i){s.isArray(e)||(e=[e]);for(var a=0;a<e.length;a++){var r=s.extend({name:e[a],factory:i,singleton:!0},t);if(this._infoMap[e[a]])return;this._infoMap[e[a]]={"settings":r,"constructor":null,"status":"defined"},i?(s.su.inherit(s.su.Model,r=function(e){s.su.Model.call(this,e);e=i.call(this);e&&s.extend(this,e)}),this._infoMap[e[a]].constructor=r):this._infoMap[e[a]].constructor=s.su.Model}},e.prototype.init=function(e){var t=this._infoMap[e];if(!t||"available"==t.status)return null;!1===t.settings.singleton?t.status="available":(this._map[e]=new this._infoMap[e].constructor(this._infoMap[e].settings),this._infoMap[e].status="available")},e.prototype.get=function(e){var t=this._infoMap[e];return t?!1===t.settings.singleton?new this._infoMap[e].constructor(this._infoMap[e].settings):this._map[e]||null:null},e.prototype.loadDefine=function(e,t){s.su.router.loadModel(e,t)},e.prototype.getStatus=function(e){return this._infoMap[e]?this._infoMap[e].status:null},e.prototype.isDefined=function(e){return!!this._infoMap[e]},e.prototype.isAvailable=function(e){return!(!this._infoMap[e]||"available"!==this._infoMap[e].status)},e.prototype.destroy=function(e){delete this._map[e]},e)})(jQuery),(a=>{function e(){a.su.Manager.call(this),this.type=a.su.Store}a.su.StoreManager=(a.su.inherit(a.su.Manager,e),e.prototype.define=function(e,t,i){i=a.extend({name:e,factory:i,singleton:!1},t);this._infoMap[e]||(this._infoMap[e]={"settings":i,"status":"defined"})},e.prototype.init=function(e){var t=this._infoMap[e];if(!t||"available"==t.status)return null;!1===t.settings.singleton?t.status="available":(t=this._infoMap[e].settings.type||"store",this._map[e]=new a.su[a.su.format.capitalize(t)](this._infoMap[e].settings),this._infoMap[e].status="available")},e.prototype.get=function(e){var t,i=this._infoMap[e];return i?!1===i.settings.singleton?(t=this._infoMap[e].settings.type||"store",new a.su[a.su.format.capitalize(t)](i.settings)):this._map[e]||null:null},e.prototype.loadDefine=function(e,t){a.su.router.loadModel(e,t)},e.prototype.getStatus=function(e){return this._infoMap[e]?this._infoMap[e].status:null},e.prototype.isDefined=function(e){return!!this._infoMap[e]},e.prototype.isAvailable=function(e){return!(!this._infoMap[e]||"available"!==this._infoMap[e].status)},e.prototype.destroy=function(e){delete this._map[e]},e)})(jQuery),(A=>{A.su=A.su||{},A.su.ModuleManager=(()=>{function e(){A.su.Manager.call(this),this.type=A.su.Module,this._depMap={},this._toDestroy=[]}function r(i,e){function t(){for(var e=0;e<o.length;e++){var t=o[e];if(!A.su.modelManager.isDefined(t))return}d||(d=!0,f())}function a(){for(var e=0;e<u.length;e++){var t=u[e];if(!A.su.storeManager.isDefined(t))return}h||(h=!0,f())}function r(){for(var e=0;e<l.length;e++){var t=l[e];if(!A.su.moduleManager.isDefined(t))return!1}p||(p=!0,f())}function s(){for(var e=0;e<c.length;e++){var t=c[e];if(!A.su.viewManager.isDefined(t,i))return}g||(g=!0,f())}var n=this._infoMap[i].settings,o=n.models,u=n.stores,l=n.deps,c=n.views,p=!1,d=!1,h=!1,g=!1,f=function(){p&&d&&h&&g&&e()};if(0==o.length)d=!0,f();else for(var v=0;v<o.length;v++){var m=o[v];A.su.modelManager.isDefined(m)?t():A.su.modelManager.loadDefine(m,function(){t()})}if(0==u.length)h=!0,f();else for(var E=0;E<u.length;E++){var T=u[E];A.su.storeManager.isDefined(T)?a():A.su.storeManager.loadDefine(T,function(){a()})}if(0==c.length)g=!0,f();else for(var y=0;y<c.length;y++){var _=c[y];A.su.viewManager.isDefined(_,i)?s():A.su.viewManager.loadDefine(_,i,function(){s()})}if(0==l.length)p=!0,f();else for(var S=0;S<l.length;S++){var I=l[S];A.su.moduleManager.isDefined(I)?r():"loadingDefine"!==A.su.moduleManager.getStatus(I)?A.su.moduleManager.loadDefine(I,r):A(A.su.moduleManager).one("ev_module_"+I+"_defined",function(){r()})}}return A.su.inherit(A.su.Manager,e),e.prototype.define=function(e,t,i){var a=this,t=A.extend({"name":e,deps:[],models:[],stores:[],views:[]},t);this._infoMap[e]||(function(e,t){if(0!==t.length)for(var i=0;i<t.length;i++)this._depMap.hasOwnProperty(t[i])?0<=A.inArray(this._depMap[t[i]],e)||this._depMap[t[i]].push(e):this._depMap[t[i]]=[e]}.call(this,t.name,t.deps),this._infoMap[e]={"settings":t,"constructor":null,"status":"loadingDefine"},A.su.inherit(A.su.Module,t=function(e){this.factory=i,A.su.Module.call(this,e)}),this._infoMap[e].constructor=t,r.call(this,e,function(){a._infoMap[e].status="defined",A(a).trigger("ev_module_"+e+"_defined")}))},e.prototype.query=function(e){return this._map[e]||!!A.su.router.query(e)&&"defineNotLoaded"},e.prototype.unload=function(e){this._map[e]&&(this._map[e].destroy(),delete this._map[e],this._infoMap[e].status="defined")},e.prototype.loadDefine=function(e,t){A(this).one("ev_module_"+e+"_defined",t),A.su.router.loadController(e)},e.prototype.load=function(e,t){switch(A.su.moduleManager.getStatus(e)){case"loadingDefine":A(A.su.moduleManager).one("ev_module_"+e+"_defined",function(){A.su.moduleManager.init(e),t&&t()});break;case"defined":A.su.moduleManager.init(e),t&&t();break;case"available":A.su.moduleManager.query(e);t&&t();break;default:A.su.moduleManager.loadDefine(e,function(){A.su.moduleManager.init(e),t&&t()})}},e.prototype.getStatus=function(e){return this._infoMap[e]?this._infoMap[e].status:null},e.prototype.isDefined=function(e){return!(!this._infoMap[e]||"loadingDefine"===this._infoMap[e].status)},e.prototype.isAvailable=function(e){return!(!this._infoMap[e]||"available"!==this._infoMap[e].status)},e.prototype.init=function(e){var i=this;this._infoMap[e]&&"available"!=this._infoMap[e].status&&(this._map[e]=new this._infoMap[e].constructor(this._infoMap[e].settings),this._infoMap[e].status="available",this._map[e].addListener("ev_to_destroy",function(e,t){i.prepareDestroy(t)}))},e.prototype.prepareDestroy=function(e){if(this._depMap[e])for(var t=0;t<this._depMap[e].length;t++){var i=this._depMap[e][t];if(this.isAvailable(i))return void(-1===A.inArray(e,this._toDestroy)&&this._toDestroy.push(e))}this.unload(e);for(var a=A.inArray(e,this._toDestroy),r=(0<=a&&this._toDestroy.splice(a,1),this._infoMap[e].settings.deps),s=0;s<r.length;s++)0<=A.inArray(r[s],this._toDestroy)&&this.prepareDestroy(r[s])},e.prototype.launch=function(e,t){this.load(e,function(){A.su.moduleManager.query(e).load(t)})},e})()})(jQuery),(r=>{r.su.ViewManager=(()=>{function e(){r.su.Manager.call(this),this.type=r.su.View}return r.su.inherit(r.su.Manager,e),e.prototype.init=function(e){this._infoMap[e];var e=new r.su.View(e,this._infoMap[e].DOM),t=e.getID();return this._map[t]=e},e.prototype.define=function(e,t){this._infoMap[e]||(("cloudBase"===App.CLOUD_TYPE?t.find("[cloud-base-hide]"):t.find("[cloud-base-show]")).remove(),("cloudAccess"===App.CLOUD_TYPE?t.find("[cloud-access-hide]"):t.find("[cloud-access-show]")).remove(),this._infoMap[e]={"DOM":t,"status":"defined"})},e.prototype.isDefined=function(e,t){return!!this._infoMap[e]},e.prototype.loadDefine=function(e,t,i){var a=this;r.su.router.loadView(t,e,function(e){!function(e){var a=this;r(e).filter("[view]").each(function(e,t){var i=r(t).attr("view").replace(/[\{,\}]/g,"");a.define(i,r(t))})}.call(a,e),i&&i()})},e.prototype.get=function(e){e="string"==typeof e?e:e.id;if(this._map[e])return this._map[e]},e.prototype.removeByID=function(e){this._map[e]&&(this._map[e].destroy(),delete this._map[e])},e})()})(jQuery),(e=>{function t(){e.su.Manager.call(this),this.type=e.su.Service}e.su.ServiceManager=(e.su.inherit(e.su.Manager,t),t.prototype.register=function(e,t){if(this._map[e])return this._map[e];this._map[e]=t},t.prototype.get=function(e){return this._map[e]||null},t)})(jQuery);