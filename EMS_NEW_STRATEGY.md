# 🎯 EMS获取未脱敏数据 - 新策略

**已知情况**: 
- backend-internal.ems.com 有注入，但数据已脱敏
- 需要找到真正的未脱敏数据源

---

## 🔍 **寻找未脱敏数据的方向**

### **方向1: 数据库服务器直接访问** ⭐⭐⭐⭐⭐

```
推测: backend-internal只是应用层，有脱敏逻辑
目标: 找到数据库服务器，直接连接

方法:
1. 扫描222.255.250.x段的数据库端口
   - MySQL: 3306
   - MSSQL: 1433
   - PostgreSQL: 5432
   - MongoDB: 27017
   
2. 如果backend-internal有SQL注入
   → 提取数据库连接字符串
   → 尝试直接连接数据库
   → 绕过应用层脱敏
```

### **方向2: 测试/开发环境** ⭐⭐⭐⭐⭐

```
推测: 生产环境脱敏，但测试环境可能没有

可能的域名/IP:
- dev.ems.com.vn
- test.ems.com.vn
- staging.ems.com.vn
- dev-internal.ems.com.vn
- 222.255.250.x (不同IP段)

特点:
- 可能没有脱敏逻辑
- 安全性较弱
- 可能有默认密码
- 数据可能是真实的副本
```

### **方向3: 备份文件/数据库备份** ⭐⭐⭐⭐

```
常见位置:
- /backup/
- /db_backup/
- /export/
- /data/
- ftp.ems.com.vn
- backup.ems.com.vn

文件类型:
- .sql, .bak, .dump
- .zip, .tar.gz
- .xlsx, .csv

方法:
- 目录遍历
- 常见路径枚举
- FTP服务扫描
```

### **方向4: 内部文件共享** ⭐⭐⭐⭐

```
可能的服务:
- SMB/CIFS (445)
- NFS (2049)
- FTP (21)
- WebDAV
- SharePoint

位置:
- 222.255.250.x段其他服务器
- file.ems.com.vn
- share.ems.com.vn
```

### **方向5: 其他业务系统** ⭐⭐⭐⭐

```
EMS可能有多个系统:
- 旧版系统（可能无脱敏）
- 内部管理系统
- 报表系统
- BI/数据分析系统
- 客服系统

这些系统可能:
- 直接查询数据库
- 没有脱敏逻辑
- 权限控制较弱
```

### **方向6: 通过MikroTik进入更深层内网** ⭐⭐⭐⭐⭐

```
我们有485个MikroTik设备:
- 可能有些在EMS内网
- 可以建立VPN/隧道
- 访问更深层的内网
- 可能访问到数据库服务器所在的内网
```

---

## 🚀 **立即执行的方案**

### **方案1: 深度扫描222.255.250.x段**

扫描所有端口，寻找:
- 数据库服务
- 文件服务
- 管理面板
- 其他Web应用
